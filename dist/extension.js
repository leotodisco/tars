var SY=Object.create;var r2=Object.defineProperty;var CY=Object.getOwnPropertyDescriptor;var AY=Object.getOwnPropertyNames;var EY=Object.getPrototypeOf,PY=Object.prototype.hasOwnProperty;var Ve=(n,e)=>()=>(n&&(e=n(n=0)),e);var te=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Am=(n,e)=>{for(var r in e)r2(n,r,{get:e[r],enumerable:!0})},JI=(n,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of AY(e))!PY.call(n,i)&&i!==r&&r2(n,i,{get:()=>e[i],enumerable:!(a=CY(e,i))||a.enumerable});return n};var gn=(n,e,r)=>(r=n!=null?SY(EY(n)):{},JI(e||!n||!n.__esModule?r2(r,"default",{value:n,enumerable:!0}):r,n)),fs=n=>JI(r2({},"__esModule",{value:!0}),n);var XI,YI=Ve(()=>{XI="ffffffff-ffff-ffff-ffff-ffffffffffff"});var QI,eD=Ve(()=>{QI="00000000-0000-0000-0000-000000000000"});var tD,rD=Ve(()=>{tD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function TY(n){return typeof n=="string"&&tD.test(n)}var ti,Em=Ve(()=>{rD();ti=TY});function OY(n){if(!ti(n))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(n.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(n.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(n.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(n.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Ql,Pm=Ve(()=>{Em();Ql=OY});function ri(n,e=0){return(Pn[n[e+0]]+Pn[n[e+1]]+Pn[n[e+2]]+Pn[n[e+3]]+"-"+Pn[n[e+4]]+Pn[n[e+5]]+"-"+Pn[n[e+6]]+Pn[n[e+7]]+"-"+Pn[n[e+8]]+Pn[n[e+9]]+"-"+Pn[n[e+10]]+Pn[n[e+11]]+Pn[n[e+12]]+Pn[n[e+13]]+Pn[n[e+14]]+Pn[n[e+15]]).toLowerCase()}function FY(n,e=0){let r=ri(n,e);if(!ti(r))throw TypeError("Stringified UUID is invalid");return r}var Pn,aD,hl=Ve(()=>{Em();Pn=[];for(let n=0;n<256;++n)Pn.push((n+256).toString(16).slice(1));aD=FY});function Cd(){return a2>n2.length-16&&(nD.default.randomFillSync(n2),a2=0),n2.slice(a2,a2+=16)}var nD,n2,a2,i2=Ve(()=>{nD=gn(require("node:crypto")),n2=new Uint8Array(256),a2=n2.length});function kY(n,e,r){let a=e&&r||0,i=e||new Array(16);n=n||{};let s=n.node,t=n.clockseq;if(n._v6||(s||(s=U5),t==null&&(t=s2)),s==null||t==null){let u=n.random||(n.rng||Cd)();s==null&&(s=[u[0],u[1],u[2],u[3],u[4],u[5]],!U5&&!n._v6&&(s[0]|=1,U5=s)),t==null&&(t=(u[6]<<8|u[7])&16383,s2===void 0&&!n._v6&&(s2=t))}let o=n.msecs!==void 0?n.msecs:Date.now(),l=n.nsecs!==void 0?n.nsecs:V5+1,d=o-$5+(l-V5)/1e4;if(d<0&&n.clockseq===void 0&&(t=t+1&16383),(d<0||o>$5)&&n.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");$5=o,V5=l,s2=t,o+=122192928e5;let c=((o&268435455)*1e4+l)%4294967296;i[a++]=c>>>24&255,i[a++]=c>>>16&255,i[a++]=c>>>8&255,i[a++]=c&255;let y=o/4294967296*1e4&268435455;i[a++]=y>>>8&255,i[a++]=y&255,i[a++]=y>>>24&15|16,i[a++]=y>>>16&255,i[a++]=t>>>8|128,i[a++]=t&255;for(let u=0;u<6;++u)i[a+u]=s[u];return e||ri(i)}var U5,s2,$5,V5,o2,z5=Ve(()=>{i2();hl();$5=0,V5=0;o2=kY});function Tm(n){let e=typeof n=="string"?Ql(n):n,r=RY(e);return typeof n=="string"?ri(r):r}function RY(n,e=!1){return Uint8Array.of((n[6]&15)<<4|n[7]>>4&15,(n[7]&15)<<4|(n[4]&240)>>4,(n[4]&15)<<4|(n[5]&240)>>4,(n[5]&15)<<4|(n[0]&240)>>4,(n[0]&15)<<4|(n[1]&240)>>4,(n[1]&15)<<4|(n[2]&240)>>4,96|n[2]&15,n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}var W5=Ve(()=>{Pm();hl()});function IY(n){n=unescape(encodeURIComponent(n));let e=[];for(let r=0;r<n.length;++r)e.push(n.charCodeAt(r));return e}function Om(n,e,r){function a(i,s,t,o){var l;if(typeof i=="string"&&(i=IY(i)),typeof s=="string"&&(s=Ql(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+i.length);if(d.set(s),d.set(i,s.length),d=r(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,t){o=o||0;for(let c=0;c<16;++c)t[o+c]=d[c];return t}return ri(d)}try{a.name=n}catch{}return a.DNS=DY,a.URL=NY,a}var DY,NY,G5=Ve(()=>{hl();Pm();DY="6ba7b810-9dad-11d1-80b4-00c04fd430c8",NY="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function MY(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),iD.default.createHash("md5").update(n).digest()}var iD,sD,oD=Ve(()=>{iD=gn(require("node:crypto"));sD=MY});var jY,uD,lD=Ve(()=>{G5();oD();jY=Om("v3",48,sD),uD=jY});var cD,H5,dD=Ve(()=>{cD=gn(require("node:crypto")),H5={randomUUID:cD.default.randomUUID}});function BY(n,e,r){if(H5.randomUUID&&!e&&!n)return H5.randomUUID();n=n||{};let a=n.random||(n.rng||Cd)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=a[i];return e}return ri(a)}var Ia,pD=Ve(()=>{dD();i2();hl();Ia=BY});function LY(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),fD.default.createHash("sha1").update(n).digest()}var fD,hD,mD=Ve(()=>{fD=gn(require("node:crypto"));hD=LY});var qY,gD,bD=Ve(()=>{G5();mD();qY=Om("v5",80,hD),gD=qY});function K5(n={},e,r=0){let a=o2({...n,_v6:!0},new Uint8Array(16));if(a=Tm(a),e){for(let i=0;i<16;i++)e[r+i]=a[i];return e}return ri(a)}var vD=Ve(()=>{hl();z5();W5()});function Z5(n){let e=typeof n=="string"?Ql(n):n,r=UY(e);return typeof n=="string"?ri(r):r}function UY(n){return Uint8Array.of((n[3]&15)<<4|n[4]>>4&15,(n[4]&15)<<4|(n[5]&240)>>4,(n[5]&15)<<4|n[6]&15,n[7],(n[1]&15)<<4|(n[2]&240)>>4,(n[2]&15)<<4|(n[3]&240)>>4,16|(n[0]&240)>>4,(n[0]&15)<<4|(n[1]&240)>>4,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}var yD=Ve(()=>{Pm();hl()});function $Y(n,e,r){n=n||{};let a=e&&r||0,i=e||new Uint8Array(16),s=n.random||(n.rng||Cd)(),t=n.msecs!==void 0?n.msecs:Date.now(),o=n.seq!==void 0?n.seq:null,l=xD,d=_D;return t>lo&&n.msecs===void 0&&(lo=t,o!==null&&(l=null,d=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,d=o&524287),(l===null||d===null)&&(l=s[6]&127,l=l<<8|s[7],d=s[8]&63,d=d<<8|s[9],d=d<<5|s[10]>>>3),t+1e4>lo&&o===null?++d>524287&&(d=0,++l>4095&&(l=0,lo++)):lo=t,xD=l,_D=d,i[a++]=lo/1099511627776&255,i[a++]=lo/4294967296&255,i[a++]=lo/16777216&255,i[a++]=lo/65536&255,i[a++]=lo/256&255,i[a++]=lo&255,i[a++]=l>>>4&15|112,i[a++]=l&255,i[a++]=d>>>13&63|128,i[a++]=d>>>5&255,i[a++]=d<<3&255|s[10]&7,i[a++]=s[11],i[a++]=s[12],i[a++]=s[13],i[a++]=s[14],i[a++]=s[15],e||ri(i)}var _D,xD,lo,wD,SD=Ve(()=>{i2();hl();_D=null,xD=null,lo=0;wD=$Y});function VY(n){if(!ti(n))throw TypeError("Invalid UUID");return parseInt(n.slice(14,15),16)}var CD,AD=Ve(()=>{Em();CD=VY});var Tn={};Am(Tn,{MAX:()=>XI,NIL:()=>QI,parse:()=>Ql,stringify:()=>aD,v1:()=>o2,v1ToV6:()=>Tm,v3:()=>uD,v4:()=>Ia,v5:()=>gD,v6:()=>K5,v6ToV1:()=>Z5,v7:()=>wD,validate:()=>ti,version:()=>CD});var Xa=Ve(()=>{YI();eD();Pm();hl();z5();W5();lD();pD();bD();vD();yD();SD();Em();AD()});var PD=te((tAe,ED)=>{function hs(n,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(n)),this._timeouts=n,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}ED.exports=hs;hs.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};hs.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};hs.prototype.retry=function(n){if(this._timeout&&clearTimeout(this._timeout),!n)return!1;var e=new Date().getTime();if(n&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(n),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(n);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var a=this;return this._timer=setTimeout(function(){a._attempts++,a._operationTimeoutCb&&(a._timeout=setTimeout(function(){a._operationTimeoutCb(a._attempts)},a._operationTimeout),a._options.unref&&a._timeout.unref()),a._fn(a._attempts)},r),this._options.unref&&this._timer.unref(),!0};hs.prototype.attempt=function(n,e){this._fn=n,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};hs.prototype.try=function(n){console.log("Using RetryOperation.try() is deprecated"),this.attempt(n)};hs.prototype.start=function(n){console.log("Using RetryOperation.start() is deprecated"),this.attempt(n)};hs.prototype.start=hs.prototype.try;hs.prototype.errors=function(){return this._errors};hs.prototype.attempts=function(){return this._attempts};hs.prototype.mainError=function(){if(this._errors.length===0)return null;for(var n={},e=null,r=0,a=0;a<this._errors.length;a++){var i=this._errors[a],s=i.message,t=(n[s]||0)+1;n[s]=t,t>=r&&(e=i,r=t)}return e}});var TD=te(Ad=>{var zY=PD();Ad.operation=function(n){var e=Ad.timeouts(n);return new zY(e,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})};Ad.timeouts=function(n){if(n instanceof Array)return[].concat(n);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in n)e[r]=n[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],i=0;i<e.retries;i++)a.push(this.createTimeout(i,e));return n&&n.forever&&!a.length&&a.push(this.createTimeout(i,e)),a.sort(function(s,t){return s-t}),a};Ad.createTimeout=function(n,e){var r=e.randomize?Math.random()+1:1,a=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,n));return a=Math.min(a,e.maxTimeout),a};Ad.wrap=function(n,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var a in n)typeof n[a]=="function"&&r.push(a)}for(var i=0;i<r.length;i++){var s=r[i],t=n[s];n[s]=function(l){var d=Ad.operation(e),c=Array.prototype.slice.call(arguments,1),y=c.pop();c.push(function(u){d.retry(u)||(u&&(arguments[0]=d.mainError()),y.apply(this,arguments))}),d.attempt(function(){l.apply(n,c)})}.bind(n,t),n[s].options=e}}});var FD=te((aAe,OD)=>{OD.exports=TD()});var Ed=te((nAe,l2)=>{"use strict";var WY=FD(),GY=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],u2=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},HY=(n,e,r)=>{let a=r.retries-(e-1);return n.attemptNumber=e,n.retriesLeft=a,n},KY=n=>GY.includes(n),kD=(n,e)=>new Promise((r,a)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=WY.operation(e);i.attempt(async s=>{try{r(await n(s))}catch(t){if(!(t instanceof Error)){a(new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`));return}if(t instanceof u2)i.stop(),a(t.originalError);else if(t instanceof TypeError&&!KY(t.message))i.stop(),a(t);else{HY(t,s,e);try{await e.onFailedAttempt(t)}catch(o){a(o);return}i.retry(t)||a(i.mainError())}}})});l2.exports=kD;l2.exports.default=kD;l2.exports.AbortError=u2});var ID=te((iAe,J5)=>{"use strict";var ZY=Object.prototype.hasOwnProperty,ai="~";function Fm(){}Object.create&&(Fm.prototype=Object.create(null),new Fm().__proto__||(ai=!1));function JY(n,e,r){this.fn=n,this.context=e,this.once=r||!1}function RD(n,e,r,a,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new JY(r,a||n,i),t=ai?ai+e:e;return n._events[t]?n._events[t].fn?n._events[t]=[n._events[t],s]:n._events[t].push(s):(n._events[t]=s,n._eventsCount++),n}function c2(n,e){--n._eventsCount===0?n._events=new Fm:delete n._events[e]}function Vn(){this._events=new Fm,this._eventsCount=0}Vn.prototype.eventNames=function(){var e=[],r,a;if(this._eventsCount===0)return e;for(a in r=this._events)ZY.call(r,a)&&e.push(ai?a.slice(1):a);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Vn.prototype.listeners=function(e){var r=ai?ai+e:e,a=this._events[r];if(!a)return[];if(a.fn)return[a.fn];for(var i=0,s=a.length,t=new Array(s);i<s;i++)t[i]=a[i].fn;return t};Vn.prototype.listenerCount=function(e){var r=ai?ai+e:e,a=this._events[r];return a?a.fn?1:a.length:0};Vn.prototype.emit=function(e,r,a,i,s,t){var o=ai?ai+e:e;if(!this._events[o])return!1;var l=this._events[o],d=arguments.length,c,y;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,a),!0;case 4:return l.fn.call(l.context,r,a,i),!0;case 5:return l.fn.call(l.context,r,a,i,s),!0;case 6:return l.fn.call(l.context,r,a,i,s,t),!0}for(y=1,c=new Array(d-1);y<d;y++)c[y-1]=arguments[y];l.fn.apply(l.context,c)}else{var u=l.length,S;for(y=0;y<u;y++)switch(l[y].once&&this.removeListener(e,l[y].fn,void 0,!0),d){case 1:l[y].fn.call(l[y].context);break;case 2:l[y].fn.call(l[y].context,r);break;case 3:l[y].fn.call(l[y].context,r,a);break;case 4:l[y].fn.call(l[y].context,r,a,i);break;default:if(!c)for(S=1,c=new Array(d-1);S<d;S++)c[S-1]=arguments[S];l[y].fn.apply(l[y].context,c)}}return!0};Vn.prototype.on=function(e,r,a){return RD(this,e,r,a,!1)};Vn.prototype.once=function(e,r,a){return RD(this,e,r,a,!0)};Vn.prototype.removeListener=function(e,r,a,i){var s=ai?ai+e:e;if(!this._events[s])return this;if(!r)return c2(this,s),this;var t=this._events[s];if(t.fn)t.fn===r&&(!i||t.once)&&(!a||t.context===a)&&c2(this,s);else{for(var o=0,l=[],d=t.length;o<d;o++)(t[o].fn!==r||i&&!t[o].once||a&&t[o].context!==a)&&l.push(t[o]);l.length?this._events[s]=l.length===1?l[0]:l:c2(this,s)}return this};Vn.prototype.removeAllListeners=function(e){var r;return e?(r=ai?ai+e:e,this._events[r]&&c2(this,r)):(this._events=new Fm,this._eventsCount=0),this};Vn.prototype.off=Vn.prototype.removeListener;Vn.prototype.addListener=Vn.prototype.on;Vn.prefixed=ai;Vn.EventEmitter=Vn;typeof J5<"u"&&(J5.exports=Vn)});var ND=te((sAe,DD)=>{"use strict";DD.exports=(n,e)=>(e=e||(()=>{}),n.then(r=>new Promise(a=>{a(e())}).then(()=>r),r=>new Promise(a=>{a(e())}).then(()=>{throw r})))});var jD=te((oAe,p2)=>{"use strict";var XY=ND(),d2=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},MD=(n,e,r)=>new Promise((a,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){a(n);return}let s=setTimeout(()=>{if(typeof r=="function"){try{a(r())}catch(l){i(l)}return}let t=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new d2(t);typeof n.cancel=="function"&&n.cancel(),i(o)},e);XY(n.then(a,i),()=>{clearTimeout(s)})});p2.exports=MD;p2.exports.default=MD;p2.exports.TimeoutError=d2});var BD=te(X5=>{"use strict";Object.defineProperty(X5,"__esModule",{value:!0});function YY(n,e,r){let a=0,i=n.length;for(;i>0;){let s=i/2|0,t=a+s;r(n[t],e)<=0?(a=++t,i-=s+1):i=s}return a}X5.default=YY});var LD=te(Q5=>{"use strict";Object.defineProperty(Q5,"__esModule",{value:!0});var QY=BD(),Y5=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let a={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(a);return}let i=QY.default(this._queue,a,(s,t)=>t.priority-s.priority);this._queue.splice(i,0,a)}dequeue(){let e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Q5.default=Y5});var Pd=te(t8=>{"use strict";Object.defineProperty(t8,"__esModule",{value:!0});var eQ=ID(),qD=jD(),tQ=LD(),f2=()=>{},rQ=new qD.TimeoutError,e8=class extends eQ{constructor(e){var r,a,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=f2,this._resolveIdle=f2,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:tQ.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=f2,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=f2,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((a,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let t=this._timeout===void 0&&r.timeout===void 0?e():qD.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(rQ)});a(await t)}catch(t){i(t)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async a=>this.add(a,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};t8.default=e8});var km=te(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.getEnv=ca.isNode=ca.isDeno=ca.isJsDom=ca.isWebWorker=ca.isBrowser=void 0;ca.getRuntimeEnvironment=cQ;ca.getLangChainEnvVars=dQ;ca.getLangChainEnvVarsMetadata=pQ;ca.getEnvironmentVariables=n8;ca.getEnvironmentVariable=h2;ca.getLangSmithEnvironmentVariable=fQ;ca.setEnvironmentVariable=hQ;ca.getShas=UD;var aQ=m2(),ml,nQ=()=>typeof window<"u"&&typeof window.document<"u";ca.isBrowser=nQ;var iQ=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope";ca.isWebWorker=iQ;var sQ=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));ca.isJsDom=sQ;var oQ=()=>typeof Deno<"u";ca.isDeno=oQ;var uQ=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!(0,ca.isDeno)();ca.isNode=uQ;var lQ=()=>ml||((0,ca.isBrowser)()?ml="browser":(0,ca.isNode)()?ml="node":(0,ca.isWebWorker)()?ml="webworker":(0,ca.isJsDom)()?ml="jsdom":(0,ca.isDeno)()?ml="deno":ml="other",ml);ca.getEnv=lQ;var r8;function cQ(){if(r8===void 0){let n=(0,ca.getEnv)(),e=UD();r8={library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:aQ.__version__,...e}}return r8}function dQ(){let n=n8()||{},e={};for(let[r,a]of Object.entries(n))r.startsWith("LANGCHAIN_")&&typeof a=="string"&&(e[r]=a);for(let r in e)if((r.toLowerCase().includes("key")||r.toLowerCase().includes("secret")||r.toLowerCase().includes("token"))&&typeof e[r]=="string"){let a=e[r];e[r]=a.slice(0,2)+"*".repeat(a.length-4)+a.slice(-2)}return e}function pQ(){let n=n8()||{},e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[a,i]of Object.entries(n))(a.startsWith("LANGCHAIN_")||a.startsWith("LANGSMITH_"))&&typeof i=="string"&&!r.includes(a)&&!a.toLowerCase().includes("key")&&!a.toLowerCase().includes("secret")&&!a.toLowerCase().includes("token")&&(a==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[a]=i);return e}function n8(){try{return typeof process<"u"&&process.env?Object.entries(process.env).reduce((n,[e,r])=>(n[e]=String(r),n),{}):void 0}catch{return}}function h2(n){try{return typeof process<"u"?process.env?.[n]:void 0}catch{return}}function fQ(n){return h2(`LANGSMITH_${n}`)||h2(`LANGCHAIN_${n}`)}function hQ(n,e){typeof process<"u"&&(process.env[n]=e)}var a8;function UD(){if(a8!==void 0)return a8;let n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of n){let a=h2(r);a!==void 0&&(e[r]=a)}return a8=e,e}});var g2=te(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec._getFetchImplementation=ec._globalFetchImplementationIsNodeFetch=ec.overrideFetchImplementation=void 0;var $D=km(),mQ=(...n)=>fetch(...n),i8=Symbol.for("ls:fetch_implementation"),gQ=n=>{globalThis[i8]=n};ec.overrideFetchImplementation=gQ;var bQ=()=>{let n=globalThis[i8];return n?typeof n=="function"&&"Headers"in n&&"Request"in n&&"Response"in n:!1};ec._globalFetchImplementationIsNodeFetch=bQ;var vQ=n=>async(...e)=>{if(n||(0,$D.getLangSmithEnvironmentVariable)("DEBUG")==="true"){let[a,i]=e;console.log(`\u2192 ${i?.method||"GET"} ${a}`)}let r=await(globalThis[i8]??mQ)(...e);return(n||(0,$D.getLangSmithEnvironmentVariable)("DEBUG")==="true")&&console.log(`\u2190 ${r.status} ${r.statusText} ${r.url}`),r};ec._getFetchImplementation=vQ});var zD=te(Pf=>{"use strict";var VD=Pf&&Pf.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.AsyncCaller=void 0;var yQ=VD(Ed()),s8=VD(Pd()),_Q=g2(),xQ=[400,401,403,404,405,406,407,408],wQ=[409],o8=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in s8.default?this.queue=new s8.default.default({concurrency:this.maxConcurrency}):this.queue=new s8.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...r){let a=this.onFailedResponseHook;return this.queue.add(()=>(0,yQ.default)(()=>e(...r).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||i?.code==="ECONNABORTED")throw i;let s=i?.response,t=s?.status;if(t){if(xQ.includes(+t))throw i;if(wQ.includes(+t))return;a&&await a(s)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...a){return e.signal?Promise.race([this.call(r,...a),new Promise((i,s)=>{e.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...a)}fetch(...e){return this.call(()=>(0,_Q._getFetchImplementation)(this.debug)(...e).then(r=>r.ok?r:Promise.reject(r)))}};Pf.AsyncCaller=o8});var WD=te(b2=>{"use strict";Object.defineProperty(b2,"__esModule",{value:!0});b2.isLangChainMessage=SQ;b2.convertLangChainMessageToExample=CQ;function SQ(n){return typeof n?._getType=="function"}function CQ(n){let e={type:n._getType(),data:{content:n.content}};return n?.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(e.data.additional_kwargs={...n.additional_kwargs}),e}});var GD=te(gl=>{"use strict";var AQ=gl&&gl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),EQ=gl&&gl.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),PQ=gl&&gl.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(r){var a=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[a.length]=i);return a},n(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var a=n(e),i=0;i<a.length;i++)a[i]!=="default"&&AQ(r,e,a[i]);return EQ(r,e),r}}();Object.defineProperty(gl,"__esModule",{value:!0});gl.assertUuid=OQ;var TQ=PQ((Xa(),fs(Tn)));function OQ(n,e){if(!TQ.validate(n)){let r=e!==void 0?`Invalid UUID for ${e}: ${n}`:`Invalid UUID: ${n}`;throw new Error(r)}return n}});var l8=te(u8=>{"use strict";Object.defineProperty(u8,"__esModule",{value:!0});u8.warnOnce=FQ;var HD={};function FQ(n){HD[n]||(console.warn(n),HD[n]=!0)}});var Rm=te((bAe,KD)=>{"use strict";var kQ="2.0.0",RQ=Number.MAX_SAFE_INTEGER||9007199254740991,IQ=16,DQ=250,NQ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];KD.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:IQ,MAX_SAFE_BUILD_LENGTH:DQ,MAX_SAFE_INTEGER:RQ,RELEASE_TYPES:NQ,SEMVER_SPEC_VERSION:kQ,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Im=te((vAe,ZD)=>{"use strict";var MQ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};ZD.exports=MQ});var Tf=te(($o,JD)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:c8,MAX_SAFE_BUILD_LENGTH:jQ,MAX_LENGTH:BQ}=Rm(),LQ=Im();$o=JD.exports={};var qQ=$o.re=[],UQ=$o.safeRe=[],kt=$o.src=[],$Q=$o.safeSrc=[],Rt=$o.t={},VQ=0,d8="[a-zA-Z0-9-]",zQ=[["\\s",1],["\\d",BQ],[d8,jQ]],WQ=n=>{for(let[e,r]of zQ)n=n.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return n},gr=(n,e,r)=>{let a=WQ(e),i=VQ++;LQ(n,i,e),Rt[n]=i,kt[i]=e,$Q[i]=a,qQ[i]=new RegExp(e,r?"g":void 0),UQ[i]=new RegExp(a,r?"g":void 0)};gr("NUMERICIDENTIFIER","0|[1-9]\\d*");gr("NUMERICIDENTIFIERLOOSE","\\d+");gr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d8}*`);gr("MAINVERSION",`(${kt[Rt.NUMERICIDENTIFIER]})\\.(${kt[Rt.NUMERICIDENTIFIER]})\\.(${kt[Rt.NUMERICIDENTIFIER]})`);gr("MAINVERSIONLOOSE",`(${kt[Rt.NUMERICIDENTIFIERLOOSE]})\\.(${kt[Rt.NUMERICIDENTIFIERLOOSE]})\\.(${kt[Rt.NUMERICIDENTIFIERLOOSE]})`);gr("PRERELEASEIDENTIFIER",`(?:${kt[Rt.NONNUMERICIDENTIFIER]}|${kt[Rt.NUMERICIDENTIFIER]})`);gr("PRERELEASEIDENTIFIERLOOSE",`(?:${kt[Rt.NONNUMERICIDENTIFIER]}|${kt[Rt.NUMERICIDENTIFIERLOOSE]})`);gr("PRERELEASE",`(?:-(${kt[Rt.PRERELEASEIDENTIFIER]}(?:\\.${kt[Rt.PRERELEASEIDENTIFIER]})*))`);gr("PRERELEASELOOSE",`(?:-?(${kt[Rt.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${kt[Rt.PRERELEASEIDENTIFIERLOOSE]})*))`);gr("BUILDIDENTIFIER",`${d8}+`);gr("BUILD",`(?:\\+(${kt[Rt.BUILDIDENTIFIER]}(?:\\.${kt[Rt.BUILDIDENTIFIER]})*))`);gr("FULLPLAIN",`v?${kt[Rt.MAINVERSION]}${kt[Rt.PRERELEASE]}?${kt[Rt.BUILD]}?`);gr("FULL",`^${kt[Rt.FULLPLAIN]}$`);gr("LOOSEPLAIN",`[v=\\s]*${kt[Rt.MAINVERSIONLOOSE]}${kt[Rt.PRERELEASELOOSE]}?${kt[Rt.BUILD]}?`);gr("LOOSE",`^${kt[Rt.LOOSEPLAIN]}$`);gr("GTLT","((?:<|>)?=?)");gr("XRANGEIDENTIFIERLOOSE",`${kt[Rt.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);gr("XRANGEIDENTIFIER",`${kt[Rt.NUMERICIDENTIFIER]}|x|X|\\*`);gr("XRANGEPLAIN",`[v=\\s]*(${kt[Rt.XRANGEIDENTIFIER]})(?:\\.(${kt[Rt.XRANGEIDENTIFIER]})(?:\\.(${kt[Rt.XRANGEIDENTIFIER]})(?:${kt[Rt.PRERELEASE]})?${kt[Rt.BUILD]}?)?)?`);gr("XRANGEPLAINLOOSE",`[v=\\s]*(${kt[Rt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${kt[Rt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${kt[Rt.XRANGEIDENTIFIERLOOSE]})(?:${kt[Rt.PRERELEASELOOSE]})?${kt[Rt.BUILD]}?)?)?`);gr("XRANGE",`^${kt[Rt.GTLT]}\\s*${kt[Rt.XRANGEPLAIN]}$`);gr("XRANGELOOSE",`^${kt[Rt.GTLT]}\\s*${kt[Rt.XRANGEPLAINLOOSE]}$`);gr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${c8}})(?:\\.(\\d{1,${c8}}))?(?:\\.(\\d{1,${c8}}))?`);gr("COERCE",`${kt[Rt.COERCEPLAIN]}(?:$|[^\\d])`);gr("COERCEFULL",kt[Rt.COERCEPLAIN]+`(?:${kt[Rt.PRERELEASE]})?(?:${kt[Rt.BUILD]})?(?:$|[^\\d])`);gr("COERCERTL",kt[Rt.COERCE],!0);gr("COERCERTLFULL",kt[Rt.COERCEFULL],!0);gr("LONETILDE","(?:~>?)");gr("TILDETRIM",`(\\s*)${kt[Rt.LONETILDE]}\\s+`,!0);$o.tildeTrimReplace="$1~";gr("TILDE",`^${kt[Rt.LONETILDE]}${kt[Rt.XRANGEPLAIN]}$`);gr("TILDELOOSE",`^${kt[Rt.LONETILDE]}${kt[Rt.XRANGEPLAINLOOSE]}$`);gr("LONECARET","(?:\\^)");gr("CARETTRIM",`(\\s*)${kt[Rt.LONECARET]}\\s+`,!0);$o.caretTrimReplace="$1^";gr("CARET",`^${kt[Rt.LONECARET]}${kt[Rt.XRANGEPLAIN]}$`);gr("CARETLOOSE",`^${kt[Rt.LONECARET]}${kt[Rt.XRANGEPLAINLOOSE]}$`);gr("COMPARATORLOOSE",`^${kt[Rt.GTLT]}\\s*(${kt[Rt.LOOSEPLAIN]})$|^$`);gr("COMPARATOR",`^${kt[Rt.GTLT]}\\s*(${kt[Rt.FULLPLAIN]})$|^$`);gr("COMPARATORTRIM",`(\\s*)${kt[Rt.GTLT]}\\s*(${kt[Rt.LOOSEPLAIN]}|${kt[Rt.XRANGEPLAIN]})`,!0);$o.comparatorTrimReplace="$1$2$3";gr("HYPHENRANGE",`^\\s*(${kt[Rt.XRANGEPLAIN]})\\s+-\\s+(${kt[Rt.XRANGEPLAIN]})\\s*$`);gr("HYPHENRANGELOOSE",`^\\s*(${kt[Rt.XRANGEPLAINLOOSE]})\\s+-\\s+(${kt[Rt.XRANGEPLAINLOOSE]})\\s*$`);gr("STAR","(<|>)?=?\\s*\\*");gr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");gr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var v2=te((yAe,XD)=>{"use strict";var GQ=Object.freeze({loose:!0}),HQ=Object.freeze({}),KQ=n=>n?typeof n!="object"?GQ:n:HQ;XD.exports=KQ});var p8=te((_Ae,eN)=>{"use strict";var YD=/^[0-9]+$/,QD=(n,e)=>{let r=YD.test(n),a=YD.test(e);return r&&a&&(n=+n,e=+e),n===e?0:r&&!a?-1:a&&!r?1:n<e?-1:1},ZQ=(n,e)=>QD(e,n);eN.exports={compareIdentifiers:QD,rcompareIdentifiers:ZQ}});var zn=te((xAe,rN)=>{"use strict";var y2=Im(),{MAX_LENGTH:tN,MAX_SAFE_INTEGER:_2}=Rm(),{safeRe:x2,t:w2}=Tf(),JQ=v2(),{compareIdentifiers:Of}=p8(),f8=class n{constructor(e,r){if(r=JQ(r),e instanceof n){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>tN)throw new TypeError(`version is longer than ${tN} characters`);y2("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let a=e.trim().match(r.loose?x2[w2.LOOSE]:x2[w2.FULL]);if(!a)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>_2||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_2||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_2||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<_2)return s}return i}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(y2("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),Of(this.major,e.major)||Of(this.minor,e.minor)||Of(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let a=this.prerelease[r],i=e.prerelease[r];if(y2("prerelease compare",r,a,i),a===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(a===void 0)return-1;if(a===i)continue;return Of(a,i)}while(++r)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let r=0;do{let a=this.build[r],i=e.build[r];if(y2("build compare",r,a,i),a===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(a===void 0)return-1;if(a===i)continue;return Of(a,i)}while(++r)}inc(e,r,a){if(e.startsWith("pre")){if(!r&&a===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?x2[w2.PRERELEASELOOSE]:x2[w2.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,a),this.inc("pre",r,a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,a),this.inc("pre",r,a);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(a)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&a===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];a===!1&&(s=[r]),Of(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};rN.exports=f8});var Td=te((wAe,nN)=>{"use strict";var aN=zn(),XQ=(n,e,r=!1)=>{if(n instanceof aN)return n;try{return new aN(n,e)}catch(a){if(!r)return null;throw a}};nN.exports=XQ});var sN=te((SAe,iN)=>{"use strict";var YQ=Td(),QQ=(n,e)=>{let r=YQ(n,e);return r?r.version:null};iN.exports=QQ});var uN=te((CAe,oN)=>{"use strict";var eee=Td(),tee=(n,e)=>{let r=eee(n.trim().replace(/^[=v]+/,""),e);return r?r.version:null};oN.exports=tee});var dN=te((AAe,cN)=>{"use strict";var lN=zn(),ree=(n,e,r,a,i)=>{typeof r=="string"&&(i=a,a=r,r=void 0);try{return new lN(n instanceof lN?n.version:n,r).inc(e,a,i).version}catch{return null}};cN.exports=ree});var hN=te((EAe,fN)=>{"use strict";var pN=Td(),aee=(n,e)=>{let r=pN(n,null,!0),a=pN(e,null,!0),i=r.compare(a);if(i===0)return null;let s=i>0,t=s?r:a,o=s?a:r,l=!!t.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(t)===0)return o.minor&&!o.patch?"minor":"patch"}let c=l?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"};fN.exports=aee});var gN=te((PAe,mN)=>{"use strict";var nee=zn(),iee=(n,e)=>new nee(n,e).major;mN.exports=iee});var vN=te((TAe,bN)=>{"use strict";var see=zn(),oee=(n,e)=>new see(n,e).minor;bN.exports=oee});var _N=te((OAe,yN)=>{"use strict";var uee=zn(),lee=(n,e)=>new uee(n,e).patch;yN.exports=lee});var wN=te((FAe,xN)=>{"use strict";var cee=Td(),dee=(n,e)=>{let r=cee(n,e);return r&&r.prerelease.length?r.prerelease:null};xN.exports=dee});var ms=te((kAe,CN)=>{"use strict";var SN=zn(),pee=(n,e,r)=>new SN(n,r).compare(new SN(e,r));CN.exports=pee});var EN=te((RAe,AN)=>{"use strict";var fee=ms(),hee=(n,e,r)=>fee(e,n,r);AN.exports=hee});var TN=te((IAe,PN)=>{"use strict";var mee=ms(),gee=(n,e)=>mee(n,e,!0);PN.exports=gee});var S2=te((DAe,FN)=>{"use strict";var ON=zn(),bee=(n,e,r)=>{let a=new ON(n,r),i=new ON(e,r);return a.compare(i)||a.compareBuild(i)};FN.exports=bee});var RN=te((NAe,kN)=>{"use strict";var vee=S2(),yee=(n,e)=>n.sort((r,a)=>vee(r,a,e));kN.exports=yee});var DN=te((MAe,IN)=>{"use strict";var _ee=S2(),xee=(n,e)=>n.sort((r,a)=>_ee(a,r,e));IN.exports=xee});var Dm=te((jAe,NN)=>{"use strict";var wee=ms(),See=(n,e,r)=>wee(n,e,r)>0;NN.exports=See});var C2=te((BAe,MN)=>{"use strict";var Cee=ms(),Aee=(n,e,r)=>Cee(n,e,r)<0;MN.exports=Aee});var h8=te((LAe,jN)=>{"use strict";var Eee=ms(),Pee=(n,e,r)=>Eee(n,e,r)===0;jN.exports=Pee});var m8=te((qAe,BN)=>{"use strict";var Tee=ms(),Oee=(n,e,r)=>Tee(n,e,r)!==0;BN.exports=Oee});var A2=te((UAe,LN)=>{"use strict";var Fee=ms(),kee=(n,e,r)=>Fee(n,e,r)>=0;LN.exports=kee});var E2=te(($Ae,qN)=>{"use strict";var Ree=ms(),Iee=(n,e,r)=>Ree(n,e,r)<=0;qN.exports=Iee});var g8=te((VAe,UN)=>{"use strict";var Dee=h8(),Nee=m8(),Mee=Dm(),jee=A2(),Bee=C2(),Lee=E2(),qee=(n,e,r,a)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof r=="object"&&(r=r.version),n===r;case"!==":return typeof n=="object"&&(n=n.version),typeof r=="object"&&(r=r.version),n!==r;case"":case"=":case"==":return Dee(n,r,a);case"!=":return Nee(n,r,a);case">":return Mee(n,r,a);case">=":return jee(n,r,a);case"<":return Bee(n,r,a);case"<=":return Lee(n,r,a);default:throw new TypeError(`Invalid operator: ${e}`)}};UN.exports=qee});var VN=te((zAe,$N)=>{"use strict";var Uee=zn(),$ee=Td(),{safeRe:P2,t:T2}=Tf(),Vee=(n,e)=>{if(n instanceof Uee)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let r=null;if(!e.rtl)r=n.match(e.includePrerelease?P2[T2.COERCEFULL]:P2[T2.COERCE]);else{let l=e.includePrerelease?P2[T2.COERCERTLFULL]:P2[T2.COERCERTL],d;for(;(d=l.exec(n))&&(!r||r.index+r[0].length!==n.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),l.lastIndex=d.index+d[1].length+d[2].length;l.lastIndex=-1}if(r===null)return null;let a=r[2],i=r[3]||"0",s=r[4]||"0",t=e.includePrerelease&&r[5]?`-${r[5]}`:"",o=e.includePrerelease&&r[6]?`+${r[6]}`:"";return $ee(`${a}.${i}.${s}${t}${o}`,e)};$N.exports=Vee});var WN=te((WAe,zN)=>{"use strict";var b8=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};zN.exports=b8});var gs=te((GAe,ZN)=>{"use strict";var zee=/\s+/g,v8=class n{constructor(e,r){if(r=Gee(r),e instanceof n)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new n(e.raw,r);if(e instanceof y8)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(zee," "),this.set=this.raw.split("||").map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let a=this.set[0];if(this.set=this.set.filter(i=>!HN(i[0])),this.set.length===0)this.set=[a];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Qee(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let a=0;a<r.length;a++)a>0&&(this.formatted+=" "),this.formatted+=r[a].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let a=((this.options.includePrerelease&&Xee)|(this.options.loose&&Yee))+":"+e,i=GN.get(a);if(i)return i;let s=this.options.loose,t=s?bi[ni.HYPHENRANGELOOSE]:bi[ni.HYPHENRANGE];e=e.replace(t,lte(this.options.includePrerelease)),Aa("hyphen replace",e),e=e.replace(bi[ni.COMPARATORTRIM],Kee),Aa("comparator trim",e),e=e.replace(bi[ni.TILDETRIM],Zee),Aa("tilde trim",e),e=e.replace(bi[ni.CARETTRIM],Jee),Aa("caret trim",e);let o=e.split(" ").map(y=>ete(y,this.options)).join(" ").split(/\s+/).map(y=>ute(y,this.options));s&&(o=o.filter(y=>(Aa("loose invalid filter",y,this.options),!!y.match(bi[ni.COMPARATORLOOSE])))),Aa("range list",o);let l=new Map,d=o.map(y=>new y8(y,this.options));for(let y of d){if(HN(y))return[y];l.set(y.value,y)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return GN.set(a,c),c}intersects(e,r){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(a=>KN(a,r)&&e.set.some(i=>KN(i,r)&&a.every(s=>i.every(t=>s.intersects(t,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Hee(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(cte(this.set[r],e,this.options))return!0;return!1}};ZN.exports=v8;var Wee=WN(),GN=new Wee,Gee=v2(),y8=Nm(),Aa=Im(),Hee=zn(),{safeRe:bi,t:ni,comparatorTrimReplace:Kee,tildeTrimReplace:Zee,caretTrimReplace:Jee}=Tf(),{FLAG_INCLUDE_PRERELEASE:Xee,FLAG_LOOSE:Yee}=Rm(),HN=n=>n.value==="<0.0.0-0",Qee=n=>n.value==="",KN=(n,e)=>{let r=!0,a=n.slice(),i=a.pop();for(;r&&a.length;)r=a.every(s=>i.intersects(s,e)),i=a.pop();return r},ete=(n,e)=>(Aa("comp",n,e),n=ate(n,e),Aa("caret",n),n=tte(n,e),Aa("tildes",n),n=ite(n,e),Aa("xrange",n),n=ote(n,e),Aa("stars",n),n),ii=n=>!n||n.toLowerCase()==="x"||n==="*",tte=(n,e)=>n.trim().split(/\s+/).map(r=>rte(r,e)).join(" "),rte=(n,e)=>{let r=e.loose?bi[ni.TILDELOOSE]:bi[ni.TILDE];return n.replace(r,(a,i,s,t,o)=>{Aa("tilde",n,a,i,s,t,o);let l;return ii(i)?l="":ii(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:ii(t)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:o?(Aa("replaceTilde pr",o),l=`>=${i}.${s}.${t}-${o} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${t} <${i}.${+s+1}.0-0`,Aa("tilde return",l),l})},ate=(n,e)=>n.trim().split(/\s+/).map(r=>nte(r,e)).join(" "),nte=(n,e)=>{Aa("caret",n,e);let r=e.loose?bi[ni.CARETLOOSE]:bi[ni.CARET],a=e.includePrerelease?"-0":"";return n.replace(r,(i,s,t,o,l)=>{Aa("caret",n,i,s,t,o,l);let d;return ii(s)?d="":ii(t)?d=`>=${s}.0.0${a} <${+s+1}.0.0-0`:ii(o)?s==="0"?d=`>=${s}.${t}.0${a} <${s}.${+t+1}.0-0`:d=`>=${s}.${t}.0${a} <${+s+1}.0.0-0`:l?(Aa("replaceCaret pr",l),s==="0"?t==="0"?d=`>=${s}.${t}.${o}-${l} <${s}.${t}.${+o+1}-0`:d=`>=${s}.${t}.${o}-${l} <${s}.${+t+1}.0-0`:d=`>=${s}.${t}.${o}-${l} <${+s+1}.0.0-0`):(Aa("no pr"),s==="0"?t==="0"?d=`>=${s}.${t}.${o}${a} <${s}.${t}.${+o+1}-0`:d=`>=${s}.${t}.${o}${a} <${s}.${+t+1}.0-0`:d=`>=${s}.${t}.${o} <${+s+1}.0.0-0`),Aa("caret return",d),d})},ite=(n,e)=>(Aa("replaceXRanges",n,e),n.split(/\s+/).map(r=>ste(r,e)).join(" ")),ste=(n,e)=>{n=n.trim();let r=e.loose?bi[ni.XRANGELOOSE]:bi[ni.XRANGE];return n.replace(r,(a,i,s,t,o,l)=>{Aa("xRange",n,a,i,s,t,o,l);let d=ii(s),c=d||ii(t),y=c||ii(o),u=y;return i==="="&&u&&(i=""),l=e.includePrerelease?"-0":"",d?i===">"||i==="<"?a="<0.0.0-0":a="*":i&&u?(c&&(t=0),o=0,i===">"?(i=">=",c?(s=+s+1,t=0,o=0):(t=+t+1,o=0)):i==="<="&&(i="<",c?s=+s+1:t=+t+1),i==="<"&&(l="-0"),a=`${i+s}.${t}.${o}${l}`):c?a=`>=${s}.0.0${l} <${+s+1}.0.0-0`:y&&(a=`>=${s}.${t}.0${l} <${s}.${+t+1}.0-0`),Aa("xRange return",a),a})},ote=(n,e)=>(Aa("replaceStars",n,e),n.trim().replace(bi[ni.STAR],"")),ute=(n,e)=>(Aa("replaceGTE0",n,e),n.trim().replace(bi[e.includePrerelease?ni.GTE0PRE:ni.GTE0],"")),lte=n=>(e,r,a,i,s,t,o,l,d,c,y,u)=>(ii(a)?r="":ii(i)?r=`>=${a}.0.0${n?"-0":""}`:ii(s)?r=`>=${a}.${i}.0${n?"-0":""}`:t?r=`>=${r}`:r=`>=${r}${n?"-0":""}`,ii(d)?l="":ii(c)?l=`<${+d+1}.0.0-0`:ii(y)?l=`<${d}.${+c+1}.0-0`:u?l=`<=${d}.${c}.${y}-${u}`:n?l=`<${d}.${c}.${+y+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),cte=(n,e,r)=>{for(let a=0;a<n.length;a++)if(!n[a].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let a=0;a<n.length;a++)if(Aa(n[a].semver),n[a].semver!==y8.ANY&&n[a].semver.prerelease.length>0){let i=n[a].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Nm=te((HAe,tM)=>{"use strict";var Mm=Symbol("SemVer ANY"),w8=class n{static get ANY(){return Mm}constructor(e,r){if(r=JN(r),e instanceof n){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),x8("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Mm?this.value="":this.value=this.operator+this.semver.version,x8("comp",this)}parse(e){let r=this.options.loose?XN[YN.COMPARATORLOOSE]:XN[YN.COMPARATOR],a=e.match(r);if(!a)throw new TypeError(`Invalid comparator: ${e}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new QN(a[2],this.options.loose):this.semver=Mm}toString(){return this.value}test(e){if(x8("Comparator.test",e,this.options.loose),this.semver===Mm||e===Mm)return!0;if(typeof e=="string")try{e=new QN(e,this.options)}catch{return!1}return _8(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new eM(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new eM(this.value,r).test(e.semver):(r=JN(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||_8(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||_8(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};tM.exports=w8;var JN=v2(),{safeRe:XN,t:YN}=Tf(),_8=g8(),x8=Im(),QN=zn(),eM=gs()});var jm=te((KAe,rM)=>{"use strict";var dte=gs(),pte=(n,e,r)=>{try{e=new dte(e,r)}catch{return!1}return e.test(n)};rM.exports=pte});var nM=te((ZAe,aM)=>{"use strict";var fte=gs(),hte=(n,e)=>new fte(n,e).set.map(r=>r.map(a=>a.value).join(" ").trim().split(" "));aM.exports=hte});var sM=te((JAe,iM)=>{"use strict";var mte=zn(),gte=gs(),bte=(n,e,r)=>{let a=null,i=null,s=null;try{s=new gte(e,r)}catch{return null}return n.forEach(t=>{s.test(t)&&(!a||i.compare(t)===-1)&&(a=t,i=new mte(a,r))}),a};iM.exports=bte});var uM=te((XAe,oM)=>{"use strict";var vte=zn(),yte=gs(),_te=(n,e,r)=>{let a=null,i=null,s=null;try{s=new yte(e,r)}catch{return null}return n.forEach(t=>{s.test(t)&&(!a||i.compare(t)===1)&&(a=t,i=new vte(a,r))}),a};oM.exports=_te});var dM=te((YAe,cM)=>{"use strict";var S8=zn(),xte=gs(),lM=Dm(),wte=(n,e)=>{n=new xte(n,e);let r=new S8("0.0.0");if(n.test(r)||(r=new S8("0.0.0-0"),n.test(r)))return r;r=null;for(let a=0;a<n.set.length;++a){let i=n.set[a],s=null;i.forEach(t=>{let o=new S8(t.semver.version);switch(t.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||lM(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),s&&(!r||lM(r,s))&&(r=s)}return r&&n.test(r)?r:null};cM.exports=wte});var fM=te((QAe,pM)=>{"use strict";var Ste=gs(),Cte=(n,e)=>{try{return new Ste(n,e).range||"*"}catch{return null}};pM.exports=Cte});var O2=te((eEe,bM)=>{"use strict";var Ate=zn(),gM=Nm(),{ANY:Ete}=gM,Pte=gs(),Tte=jm(),hM=Dm(),mM=C2(),Ote=E2(),Fte=A2(),kte=(n,e,r,a)=>{n=new Ate(n,a),e=new Pte(e,a);let i,s,t,o,l;switch(r){case">":i=hM,s=Ote,t=mM,o=">",l=">=";break;case"<":i=mM,s=Fte,t=hM,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Tte(n,e,a))return!1;for(let d=0;d<e.set.length;++d){let c=e.set[d],y=null,u=null;if(c.forEach(S=>{S.semver===Ete&&(S=new gM(">=0.0.0")),y=y||S,u=u||S,i(S.semver,y.semver,a)?y=S:t(S.semver,u.semver,a)&&(u=S)}),y.operator===o||y.operator===l||(!u.operator||u.operator===o)&&s(n,u.semver))return!1;if(u.operator===l&&t(n,u.semver))return!1}return!0};bM.exports=kte});var yM=te((tEe,vM)=>{"use strict";var Rte=O2(),Ite=(n,e,r)=>Rte(n,e,">",r);vM.exports=Ite});var xM=te((rEe,_M)=>{"use strict";var Dte=O2(),Nte=(n,e,r)=>Dte(n,e,"<",r);_M.exports=Nte});var CM=te((aEe,SM)=>{"use strict";var wM=gs(),Mte=(n,e,r)=>(n=new wM(n,r),e=new wM(e,r),n.intersects(e,r));SM.exports=Mte});var EM=te((nEe,AM)=>{"use strict";var jte=jm(),Bte=ms();AM.exports=(n,e,r)=>{let a=[],i=null,s=null,t=n.sort((c,y)=>Bte(c,y,r));for(let c of t)jte(c,e,r)?(s=c,i||(i=c)):(s&&a.push([i,s]),s=null,i=null);i&&a.push([i,null]);let o=[];for(let[c,y]of a)c===y?o.push(c):!y&&c===t[0]?o.push("*"):y?c===t[0]?o.push(`<=${y}`):o.push(`${c} - ${y}`):o.push(`>=${c}`);let l=o.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return l.length<d.length?l:e}});var RM=te((iEe,kM)=>{"use strict";var PM=gs(),A8=Nm(),{ANY:C8}=A8,Bm=jm(),E8=ms(),Lte=(n,e,r={})=>{if(n===e)return!0;n=new PM(n,r),e=new PM(e,r);let a=!1;e:for(let i of n.set){for(let s of e.set){let t=Ute(i,s,r);if(a=a||t!==null,t)continue e}if(a)return!1}return!0},qte=[new A8(">=0.0.0-0")],TM=[new A8(">=0.0.0")],Ute=(n,e,r)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===C8){if(e.length===1&&e[0].semver===C8)return!0;r.includePrerelease?n=qte:n=TM}if(e.length===1&&e[0].semver===C8){if(r.includePrerelease)return!0;e=TM}let a=new Set,i,s;for(let S of n)S.operator===">"||S.operator===">="?i=OM(i,S,r):S.operator==="<"||S.operator==="<="?s=FM(s,S,r):a.add(S.semver);if(a.size>1)return null;let t;if(i&&s){if(t=E8(i.semver,s.semver,r),t>0)return null;if(t===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let S of a){if(i&&!Bm(S,String(i),r)||s&&!Bm(S,String(s),r))return null;for(let V of e)if(!Bm(S,String(V),r))return!1;return!0}let o,l,d,c,y=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,u=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;y&&y.prerelease.length===1&&s.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(let S of e){if(c=c||S.operator===">"||S.operator===">=",d=d||S.operator==="<"||S.operator==="<=",i){if(u&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===u.major&&S.semver.minor===u.minor&&S.semver.patch===u.patch&&(u=!1),S.operator===">"||S.operator===">="){if(o=OM(i,S,r),o===S&&o!==i)return!1}else if(i.operator===">="&&!Bm(i.semver,String(S),r))return!1}if(s){if(y&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===y.major&&S.semver.minor===y.minor&&S.semver.patch===y.patch&&(y=!1),S.operator==="<"||S.operator==="<="){if(l=FM(s,S,r),l===S&&l!==s)return!1}else if(s.operator==="<="&&!Bm(s.semver,String(S),r))return!1}if(!S.operator&&(s||i)&&t!==0)return!1}return!(i&&d&&!s&&t!==0||s&&c&&!i&&t!==0||u||y)},OM=(n,e,r)=>{if(!n)return e;let a=E8(n.semver,e.semver,r);return a>0?n:a<0||e.operator===">"&&n.operator===">="?e:n},FM=(n,e,r)=>{if(!n)return e;let a=E8(n.semver,e.semver,r);return a<0?n:a>0||e.operator==="<"&&n.operator==="<="?e:n};kM.exports=Lte});var T8=te((sEe,NM)=>{"use strict";var P8=Tf(),IM=Rm(),$te=zn(),DM=p8(),Vte=Td(),zte=sN(),Wte=uN(),Gte=dN(),Hte=hN(),Kte=gN(),Zte=vN(),Jte=_N(),Xte=wN(),Yte=ms(),Qte=EN(),ere=TN(),tre=S2(),rre=RN(),are=DN(),nre=Dm(),ire=C2(),sre=h8(),ore=m8(),ure=A2(),lre=E2(),cre=g8(),dre=VN(),pre=Nm(),fre=gs(),hre=jm(),mre=nM(),gre=sM(),bre=uM(),vre=dM(),yre=fM(),_re=O2(),xre=yM(),wre=xM(),Sre=CM(),Cre=EM(),Are=RM();NM.exports={parse:Vte,valid:zte,clean:Wte,inc:Gte,diff:Hte,major:Kte,minor:Zte,patch:Jte,prerelease:Xte,compare:Yte,rcompare:Qte,compareLoose:ere,compareBuild:tre,sort:rre,rsort:are,gt:nre,lt:ire,eq:sre,neq:ore,gte:ure,lte:lre,cmp:cre,coerce:dre,Comparator:pre,Range:fre,satisfies:hre,toComparators:mre,maxSatisfying:gre,minSatisfying:bre,minVersion:vre,validRange:yre,outside:_re,gtr:xre,ltr:wre,intersects:Sre,simplifyRange:Cre,subset:Are,SemVer:$te,re:P8.re,src:P8.src,tokens:P8.t,SEMVER_SPEC_VERSION:IM.SEMVER_SPEC_VERSION,RELEASE_TYPES:IM.RELEASE_TYPES,compareIdentifiers:DM.compareIdentifiers,rcompareIdentifiers:DM.rcompareIdentifiers}});var jM=te(F2=>{"use strict";Object.defineProperty(F2,"__esModule",{value:!0});F2.isVersionGreaterOrEqual=Ere;F2.parsePromptIdentifier=Pre;var MM=T8();function Ere(n,e){let r=(0,MM.parse)(n),a=(0,MM.parse)(e);if(!r||!a)throw new Error("Invalid version format.");return r.compare(a)>=0}function Pre(n){if(!n||n.split("/").length>2||n.startsWith("/")||n.endsWith("/")||n.split(":").length>2)throw new Error(`Invalid identifier format: ${n}`);let[e,r]=n.split(":"),a=r||"latest";if(e.includes("/")){let[i,s]=e.split("/",2);if(!i||!s)throw new Error(`Invalid identifier format: ${n}`);return[i,s,a]}else{if(!e)throw new Error(`Invalid identifier format: ${n}`);return["-",e,a]}}});var BM=te(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.LangSmithConflictError=void 0;Ff.printErrorStackTrace=Ore;Ff.raiseForStatus=Fre;function Tre(n){if(typeof n!="object"||n==null||!("stack"in n)||typeof n.stack!="string")return;let e=n.stack,r=`${n}`;return e.startsWith(r)&&(e=e.slice(r.length)),e.startsWith(`
`)&&(e=e.slice(1)),e}function Ore(n){let e=Tre(n);e!=null&&console.error(e)}var k2=class extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}};Ff.LangSmithConflictError=k2;async function Fre(n,e,r){let a;if(n.ok){r&&(a=await n.text());return}a=await n.text();let i=`Failed to ${e}. Received status [${n.status}]: ${n.statusText}. Server response: ${a}`;if(n.status===409)throw new k2(i);let s=new Error(i);throw s.status=n.status,s}});var qM=te(k8=>{"use strict";Object.defineProperty(k8,"__esModule",{value:!0});k8.serialize=Dre;var LM="[...]",kre={result:"[Circular]"},I2=[],kf=[],Rre=new TextEncoder;function Ire(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function R2(n){return Rre.encode(n)}function Dre(n,e,r,a,i){try{let s=JSON.stringify(n,r,a);return R2(s)}catch(s){if(!s.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),R2("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=Ire()),F8(n,"",0,[],void 0,0,i);let t;try{kf.length===0?t=JSON.stringify(n,r,a):t=JSON.stringify(n,Nre(r),a)}catch{return R2("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;I2.length!==0;){let o=I2.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return R2(t)}}function O8(n,e,r,a){var i=Object.getOwnPropertyDescriptor(a,r);i.get!==void 0?i.configurable?(Object.defineProperty(a,r,{value:n}),I2.push([a,r,e,i])):kf.push([e,r,n]):(a[r]=n,I2.push([a,r,e]))}function F8(n,e,r,a,i,s,t){s+=1;var o;if(typeof n=="object"&&n!==null){for(o=0;o<a.length;o++)if(a[o]===n){O8(kre,n,e,i);return}if(typeof t.depthLimit<"u"&&s>t.depthLimit){O8(LM,n,e,i);return}if(typeof t.edgesLimit<"u"&&r+1>t.edgesLimit){O8(LM,n,e,i);return}if(a.push(n),Array.isArray(n))for(o=0;o<n.length;o++)F8(n[o],o,o,a,n,s,t);else{var l=Object.keys(n);for(o=0;o<l.length;o++){var d=l[o];F8(n[d],d,o,a,n,s,t)}}a.pop()}}function Nre(n){return n=typeof n<"u"?n:function(e,r){return r},function(e,r){if(kf.length>0)for(var a=0;a<kf.length;a++){var i=kf[a];if(i[1]===e&&i[0]===r){r=i[2],kf.splice(a,1);break}}return n.call(this,e,r)}}});var N8=te(Wn=>{"use strict";var Mre=Wn&&Wn.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),jre=Wn&&Wn.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Bre=Wn&&Wn.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(r){var a=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[a.length]=i);return a},n(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var a=n(e),i=0;i<a.length;i++)a[i]!=="default"&&Mre(r,e,a[i]);return jre(r,e),r}}();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Client=Wn.DEFAULT_BATCH_SIZE_LIMIT_BYTES=Wn.AutoBatchQueue=void 0;Wn.mergeRuntimeEnvIntoRunCreate=I8;var Lm=Bre((Xa(),fs(Tn))),UM=zD(),D2=WD(),Vo=km(),Lre=m2(),_r=GD(),qre=l8(),tc=jM(),Or=BM(),Wt=g2(),Ji=qM();function I8(n){let e=(0,Vo.getRuntimeEnvironment)(),r=(0,Vo.getLangChainEnvVarsMetadata)(),a=n.extra??{},i=a.metadata;return n.extra={...a,runtime:{...e,...a?.runtime},metadata:{...r,...r.revision_id||n.revision_id?{revision_id:n.revision_id??r.revision_id}:{},...i}},n}var Ure=n=>{let e=n?.toString()??(0,Vo.getLangSmithEnvironmentVariable)("TRACING_SAMPLING_RATE");if(e===void 0)return;let r=parseFloat(e);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},$re=n=>{let r=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function Vre(n){let e=[];for await(let r of n)e.push(r);return e}function R8(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var zre=async n=>{if(n?.status===429){let e=parseInt(n.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(r=>setTimeout(r,e)),!0}return!1};function $M(n){return typeof n=="number"?Number(n.toFixed(4)):n}var N2=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let r,a=new Promise(s=>{r=s}),i=(0,Ji.serialize)(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:r,itemPromise:a,size:i}),this.sizeBytes+=i,a}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");let r=[],a=0;for(;a+(this.peek()?.size??0)<e&&this.items.length>0;){let i=this.items.shift();i&&(r.push(i),a+=i.size,this.sizeBytes-=i.size)}if(r.length===0&&this.items.length>0){let i=this.items.shift();r.push(i),a+=i.size,this.sizeBytes-=i.size}return[r.map(i=>({action:i.action,item:i.payload})),()=>r.forEach(i=>i.itemPromiseResolve())]}};Wn.AutoBatchQueue=N2;Wn.DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520;var Wre=2500,D8=class n{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new N2}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:(0,Vo.getEnvironmentVariable)("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:(0,Vo.getEnvironmentVariable)("LANGSMITH_DEBUG")==="true"});let r=n.getDefaultClientConfig();if(this.tracingSampleRate=Ure(e.tracingSamplingRate),this.apiUrl=R8(e.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=R8(e.apiKey??r.apiKey),this.webUrl=R8(e.webUrl??r.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new UM.AsyncCaller({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new UM.AsyncCaller({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:zre,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??r.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??r.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){let e=(0,Vo.getLangSmithEnvironmentVariable)("API_KEY"),r=(0,Vo.getLangSmithEnvironmentVariable)("ENDPOINT")??"https://api.smith.langchain.com",a=(0,Vo.getLangSmithEnvironmentVariable)("HIDE_INPUTS")==="true",i=(0,Vo.getLangSmithEnvironmentVariable)("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:a,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:$re(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${Lre.__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let r={...e};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(e,r){let a=r?.toString()??"",i=`${this.apiUrl}${e}?${a}`,s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(s,`Failed to fetch ${e}`),s}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,a){let i=Number(r.get("offset"))||0,s=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(s));let t=`${this.apiUrl}${e}?${r}`,o=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),t,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(o,`Failed to fetch ${e}`);let l=a?a(await o.json()):await o.json();if(l.length===0||(yield l,l.length<s))break;i+=l.length}}async*_getCursorPaginatedList(e,r=null,a="POST",i="runs"){let s=r?{...r}:{};for(;;){let o=await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}${e}`,{method:a,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(s)})).json();if(!o||!o[i])break;yield o[i];let l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,r=!1){if(this.tracingSampleRate===void 0)return e;if(r){let a=[];for(let i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):a.push(i);return a}else{let a=[];for(let i of e){let s=i.trace_id??i.id;this.filteredPostUuids.has(s)||(i.id===s?this._shouldSample()?a.push(i):this.filteredPostUuids.add(s):a.push(i))}return a}}async _getBatchSizeLimitBytes(){let e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??Wn.DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){let r=[];for(;this.autoBatchQueue.items.length>0;){let[a,i]=this.autoBatchQueue.pop(e);if(!a.length){i();break}let s=this._processBatch(a,i).catch(console.error);r.push(s)}return Promise.all(r)}async _processBatch(e,r){if(!e.length){r();return}try{let a={runCreates:e.filter(s=>s.action==="create").map(s=>s.item),runUpdates:e.filter(s=>s.action==="update").map(s=>s.item)};(await this._ensureServerInfo())?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(a):await this.batchIngestRuns(a)}finally{r()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=I8(e.item));let r=this.autoBatchQueue.push(e);if(this.manualFlushMode)return r;let a=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>a&&this.drainAutoBatchQueue(a),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(a)},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){let e=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(Wre),...this.fetchOptions});await(0,Or.raiseForStatus)(e,"get server info");let r=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;let r={...this.headers,"Content-Type":"application/json"},a=e.project_name;delete e.project_name;let i=await this.prepareRunCreateOrUpdateInputs({session_name:a,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}let s=I8(i),t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:r,body:(0,Ji.serialize)(s,`Creating run with id: ${s.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(t,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let a=await Promise.all(e?.map(o=>this.prepareRunCreateOrUpdateInputs(o))??[]),i=await Promise.all(r?.map(o=>this.prepareRunCreateOrUpdateInputs(o))??[]);if(a.length>0&&i.length>0){let o=a.reduce((d,c)=>(c.id&&(d[c.id]=c),d),{}),l=[];for(let d of i)d.id!==void 0&&o[d.id]?o[d.id]={...o[d.id],...d}:l.push(d);a=Object.values(o),i=l}let s={post:a,patch:i};if(!s.post.length&&!s.patch.length)return;let t={post:[],patch:[]};for(let o of["post","patch"]){let l=o,d=s[l].reverse(),c=d.pop();for(;c!==void 0;)t[l].push(c),c=d.pop()}if(t.post.length>0||t.patch.length>0){let o=t.post.map(l=>l.id).concat(t.patch.map(l=>l.id)).join(",");await this._postBatchIngestRuns((0,Ji.serialize)(t,`Ingesting runs with ids: ${o}`))}}async _postBatchIngestRuns(e){let r={...this.headers,"Content-Type":"application/json",Accept:"application/json"},a=await this.batchIngestCaller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(a,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let a={},i=[];for(let c of e??[]){let y=await this.prepareRunCreateOrUpdateInputs(c);y.id!==void 0&&y.attachments!==void 0&&(a[y.id]=y.attachments),delete y.attachments,i.push(y)}let s=[];for(let c of r??[])s.push(await this.prepareRunCreateOrUpdateInputs(c));if(i.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&s.length>0){let c=i.reduce((u,S)=>(S.id&&(u[S.id]=S),u),{}),y=[];for(let u of s)u.id!==void 0&&c[u.id]?c[u.id]={...c[u.id],...u}:y.push(u);i=Object.values(c),s=y}if(i.length===0&&s.length===0)return;let l=[],d=[];for(let[c,y]of[["post",i],["patch",s]])for(let u of y){let{inputs:S,outputs:V,events:U,attachments:z,...D}=u,k={inputs:S,outputs:V,events:U},T=(0,Ji.serialize)(D,`Serializing for multipart ingestion of run with id: ${D.id}`);d.push({name:`${c}.${D.id}`,payload:new Blob([T],{type:`application/json; length=${T.length}`})});for(let[R,g]of Object.entries(k)){if(g===void 0)continue;let m=(0,Ji.serialize)(g,`Serializing ${R} for multipart ingestion of run with id: ${D.id}`);d.push({name:`${c}.${D.id}.${R}`,payload:new Blob([m],{type:`application/json; length=${m.length}`})})}if(D.id!==void 0){let R=a[D.id];if(R){delete a[D.id];for(let[g,m]of Object.entries(R)){let v,b;if(Array.isArray(m)?[v,b]=m:(v=m.mimeType,b=m.data),g.includes(".")){console.warn(`Skipping attachment '${g}' for run ${D.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}d.push({name:`attachment.${D.id}.${g}`,payload:new Blob([b],{type:`${v}; length=${b.byteLength}`})})}}}l.push(`trace=${D.trace_id},id=${D.id}`)}await this._sendMultipartRequest(d,l.join("; "))}async _createNodeFetchBody(e,r){let a=[];for(let t of e)a.push(new Blob([`--${r}\r
`])),a.push(new Blob([`Content-Disposition: form-data; name="${t.name}"\r
`,`Content-Type: ${t.payload.type}\r
\r
`])),a.push(t.payload),a.push(new Blob([`\r
`]));return a.push(new Blob([`--${r}--\r
`])),await new Blob(a).arrayBuffer()}async _createMultipartStream(e,r){let a=new TextEncoder;return new ReadableStream({async start(s){let t=async o=>{typeof o=="string"?s.enqueue(a.encode(o)):s.enqueue(o)};for(let o of e){await t(`--${r}\r
`),await t(`Content-Disposition: form-data; name="${o.name}"\r
`),await t(`Content-Type: ${o.payload.type}\r
\r
`);let d=o.payload.stream().getReader();try{let c;for(;!(c=await d.read()).done;)s.enqueue(c.value)}finally{d.releaseLock()}await t(`\r
`)}await t(`--${r}--\r
`),s.close()}})}async _sendMultipartRequest(e,r){try{let a="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=await((0,Wt._globalFetchImplementationIsNodeFetch)()?this._createNodeFetchBody(e,a):this._createMultipartStream(e,a)),s=await this.batchIngestCaller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${a}`},body:i,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(s,"ingest multipart runs",!0)}catch(a){console.warn(`${a.message.trim()}

Context: ${r}`)}}async updateRun(e,r){(0,_r.assertUuid)(e),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));let a={...r,id:e};if(!this._filterForSampling([a],!0).length)return;if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){if(r.end_time!==void 0&&a.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:a}).catch(console.error);return}else this.processRunOperation({action:"update",item:a}).catch(console.error);return}let i={...this.headers,"Content-Type":"application/json"},s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:(0,Ji.serialize)(r,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(s,"update run",!0)}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){(0,_r.assertUuid)(e);let a=await this._get(`/runs/${e}`);return r&&a.child_run_ids&&(a=await this._loadChildRuns(a)),a}async getRunUrl({runId:e,run:r,projectOpts:a}){if(r!==void 0){let i;r.session_id?i=r.session_id:a?.projectName?i=(await this.readProject({projectName:a?.projectName})).id:a?.projectId?i=a?.projectId:i=(await this.readProject({projectName:(0,Vo.getLangSmithEnvironmentVariable)("PROJECT")||"default"})).id;let s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){let i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){let r=await Vre(this.listRuns({id:e.child_run_ids})),a={},i={};r.sort((s,t)=>(s?.dotted_order??"").localeCompare(t?.dotted_order??""));for(let s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in a||(a[s.parent_run_id]=[]),a[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=a[e.id]||[];for(let s in a)s!==e.id&&(i[s].child_runs=a[s]);return e}async*listRuns(e){let{projectId:r,projectName:a,parentRunId:i,traceId:s,referenceExampleId:t,startTime:o,executionOrder:l,isRoot:d,runType:c,error:y,id:u,query:S,filter:V,traceFilter:U,treeFilter:z,limit:D,select:k,order:T}=e,R=[];if(r&&(R=Array.isArray(r)?r:[r]),a){let b=Array.isArray(a)?a:[a],f=await Promise.all(b.map(p=>this.readProject({projectName:p}).then(h=>h.id)));R.push(...f)}let g=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],m={session:R.length?R:null,run_type:c,reference_example:t,query:S,filter:V,trace_filter:U,tree_filter:z,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:y,id:u,limit:D,trace:s,select:k||g,is_root:d,order:T},v=0;for await(let b of this._getCursorPaginatedList("/runs/query",m))if(D){if(v>=D)break;if(b.length+v>D){yield*b.slice(0,D-v);break}v+=b.length,yield*b}else yield*b}async*listGroupRuns(e){let{projectId:r,projectName:a,groupBy:i,filter:s,startTime:t,endTime:o,limit:l,offset:d}=e,y={session_id:r||(await this.readProject({projectName:a})).id,group_by:i,filter:s,start_time:t?t.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100},u=Number(d)||0,S="/runs/group",V=`${this.apiUrl}${S}`;for(;;){let U={...y,offset:u},z=Object.fromEntries(Object.entries(U).filter(([g,m])=>m!==void 0)),D=await this.caller.call((0,Wt._getFetchImplementation)(),V,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(z),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(D,`Failed to fetch ${S}`);let k=await D.json(),{groups:T,total:R}=k;if(T.length===0)break;for(let g of T)yield g;if(u+=T.length,u>=R)break}}async getRunStats({id:e,trace:r,parentRun:a,runType:i,projectNames:s,projectIds:t,referenceExampleIds:o,startTime:l,endTime:d,error:c,query:y,filter:u,traceFilter:S,treeFilter:V,isRoot:U,dataSourceType:z}){let D=t||[];s&&(D=[...t||[],...await Promise.all(s.map(m=>this.readProject({projectName:m}).then(v=>v.id)))]);let T=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:a,run_type:i,session:D,reference_example:o,start_time:l,end_time:d,error:c,query:y,filter:u,trace_filter:S,tree_filter:V,is_root:U,data_source_type:z}).filter(([m,v])=>v!==void 0));return await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:r}={}){let a={run_id:e,share_token:r||Lm.v4()};(0,_r.assertUuid)(e);let s=await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){(0,_r.assertUuid)(e);let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(r,"unshare run",!0)}async readRunSharedLink(e){(0,_r.assertUuid)(e);let a=await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(a===null||!("share_token"in a)))return`${this.getHostUrl()}/public/${a.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){let a=new URLSearchParams({share_token:e});if(r!==void 0)for(let t of r)a.append("id",t);return(0,_r.assertUuid)(e),await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/runs${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),(0,_r.assertUuid)(e);let i=await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);let a={dataset_id:e};(0,_r.assertUuid)(e);let s=await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){(0,_r.assertUuid)(e);let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(r,"unshare dataset",!0)}async readSharedDataset(e){return(0,_r.assertUuid)(e),await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,r){let a={};r?.exampleIds&&(a.id=r.exampleIds);let i=new URLSearchParams;Object.entries(a).forEach(([o,l])=>{Array.isArray(l)?l.forEach(d=>i.append(o,d)):i.append(o,l)});let s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),t=await s.json();if(!s.ok)throw"detail"in t?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${Array.isArray(t.detail)?t.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return t.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:a=null,upsert:i=!1,projectExtra:s=null,referenceDatasetId:t=null}){let o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,d=s||{};a&&(d.metadata=a);let c={name:e,extra:d,description:r};t!==null&&(c.reference_dataset_id=t);let y=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(y,"create project"),await y.json()}async updateProject(e,{name:r=null,description:a=null,metadata:i=null,projectExtra:s=null,endTime:t=null}){let o=`${this.apiUrl}/sessions/${e}`,l=s;i&&(l={...l||{},metadata:i});let d={name:r,extra:l,description:a,end_time:t?new Date(t).toISOString():null},c=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:r}){let a="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)(0,_r.assertUuid)(e),a+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}${a}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{let t=await s.json();return s.ok?Array.isArray(t)?t.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:r,includeStats:a}){let i="/sessions",s=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)(0,_r.assertUuid)(e),i+=`/${e}`;else if(r!==void 0)s.append("name",r);else throw new Error("Must provide projectName or projectId");a!==void 0&&s.append("include_stats",a.toString());let t=await this._get(i,s),o;if(Array.isArray(t)){if(t.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);o=t[0]}else o=t;return o}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");let a=await this.readProject({projectId:e,projectName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${a.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");let a=await this.readDataset({datasetId:e,datasetName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${a.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:a,referenceDatasetId:i,referenceDatasetName:s,referenceFree:t,metadata:o}={}){let l=new URLSearchParams;if(e!==void 0)for(let d of e)l.append("id",d);if(r!==void 0&&l.append("name",r),a!==void 0&&l.append("name_contains",a),i!==void 0)l.append("reference_dataset",i);else if(s!==void 0){let d=await this.readDataset({datasetName:s});l.append("reference_dataset",d.id)}t!==void 0&&l.append("reference_free",t.toString()),o!==void 0&&l.append("metadata",JSON.stringify(o));for await(let d of this._getPaginated("/sessions",l))yield*d}async deleteProject({projectId:e,projectName:r}){let a;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?a=(await this.readProject({projectName:r})).id:a=e,(0,_r.assertUuid)(a);let i=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/sessions/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(i,`delete session ${a} (${r})`,!0)}async uploadCsv({csvFile:e,fileName:r,inputKeys:a,outputKeys:i,description:s,dataType:t,name:o}){let l=`${this.apiUrl}/datasets/upload`,d=new FormData;d.append("file",e,r),a.forEach(u=>{d.append("input_keys",u)}),i.forEach(u=>{d.append("output_keys",u)}),s&&d.append("description",s),t&&d.append("data_type",t),o&&d.append("name",o);let c=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),l,{method:"POST",headers:this.headers,body:d,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(c,"upload CSV"),await c.json()}async createDataset(e,{description:r,dataType:a,inputsSchema:i,outputsSchema:s,metadata:t}={}){let o={name:e,description:r,extra:t?{metadata:t}:void 0};a&&(o.data_type=a),i&&(o.inputs_schema_definition=i),s&&(o.outputs_schema_definition=s);let l=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(l,"create dataset"),await l.json()}async readDataset({datasetId:e,datasetName:r}){let a="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)(0,_r.assertUuid)(e),a+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let s=await this._get(a,i),t;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);t=s[0]}else t=s;return t}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(a){if(a instanceof Error&&a.message.toLocaleLowerCase().includes("not found"))return!1;throw a}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:a,toVersion:i}){let s=e;if(s===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:r})).id);let t=new URLSearchParams({from_version:typeof a=="string"?a:a.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,t)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){let a="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${a}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:a,datasetName:i,datasetNameContains:s,metadata:t}={}){let o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(a!==void 0)for(let d of a)l.append("id",d);i!==void 0&&l.append("name",i),s!==void 0&&l.append("name_contains",s),t!==void 0&&l.append("metadata",JSON.stringify(t));for await(let d of this._getPaginated(o,l))yield*d}async updateDataset(e){let{datasetId:r,datasetName:a,...i}=e;if(!r&&!a)throw new Error("Must provide either datasetName or datasetId");let s=r??(await this.readDataset({datasetName:a})).id;(0,_r.assertUuid)(s);let t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(t,"update dataset"),await t.json()}async updateDatasetTag(e){let{datasetId:r,datasetName:a,asOf:i,tag:s}=e;if(!r&&!a)throw new Error("Must provide either datasetName or datasetId");let t=r??(await this.readDataset({datasetName:a})).id;(0,_r.assertUuid)(t);let o=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${t}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:s}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(o,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:r}){let a="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)(0,_r.assertUuid)(i),a+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(s,`delete ${a}`),await s.json()}async indexDataset({datasetId:e,datasetName:r,tag:a}){let i=e;if(!i&&!r)throw new Error("Must provide either datasetName or datasetId");if(i&&r)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:r})).id),(0,_r.assertUuid)(i);let s={tag:a},t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(t,"index dataset"),await t.json()}async similarExamples(e,r,a,{filter:i}={}){let s={limit:a,inputs:e};i!==void 0&&(s.filter=i),(0,_r.assertUuid)(r);let t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${r}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(t,"fetch similar examples"),(await t.json()).examples}async createExample(e,r,a){if(VM(e)&&(r!==void 0||a!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=r?a?.datasetId:e.dataset_id,s=r?a?.datasetName:e.dataset_name;if(i===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:s})).id);let t=(r?a?.createdAt:e.created_at)||new Date,o;VM(e)?o=e:o={inputs:e,outputs:r,created_at:t?.toISOString(),id:a?.exampleId,metadata:a?.metadata,split:a?.split,source_run_id:a?.sourceRunId,use_source_run_io:a?.useSourceRunIO,use_source_run_attachments:a?.useSourceRunAttachments,attachments:a?.attachments};let l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(l.example_ids?.[0]??Lm.v4())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];let k=e,T=k[0].dataset_id,R=k[0].dataset_name;if(T===void 0&&R===void 0)throw new Error("Must provide either datasetName or datasetId");if(T!==void 0&&R!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");T===void 0&&(T=(await this.readDataset({datasetName:R})).id);let g=await this._uploadExamplesMultipart(T,k);return await Promise.all(g.example_ids.map(v=>this.readExample(v)))}let{inputs:r,outputs:a,metadata:i,splits:s,sourceRunIds:t,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:d,exampleIds:c,datasetId:y,datasetName:u}=e;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let S=y,V=u;if(S===void 0&&V===void 0)throw new Error("Must provide either datasetName or datasetId");if(S!==void 0&&V!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");S===void 0&&(S=(await this.readDataset({datasetName:V})).id);let U=r.map((k,T)=>({dataset_id:S,inputs:k,outputs:a?.[T],metadata:i?.[T],split:s?.[T],id:c?.[T],attachments:d?.[T],source_run_id:t?.[T],use_source_run_io:o?.[T],use_source_run_attachments:l?.[T]})),z=await this._uploadExamplesMultipart(S,U);return await Promise.all(z.example_ids.map(k=>this.readExample(k)))}async createLLMExample(e,r,a){return this.createExample({input:e},{output:r},a)}async createChatExample(e,r,a){let i=e.map(t=>(0,D2.isLangChainMessage)(t)?(0,D2.convertLangChainMessageToExample)(t):t),s=(0,D2.isLangChainMessage)(r)?(0,D2.convertLangChainMessageToExample)(r):r;return this.createExample({input:i},{output:s},a)}async readExample(e){(0,_r.assertUuid)(e);let r=`/examples/${e}`,a=await this._get(r),{attachment_urls:i,...s}=a,t=s;return i&&(t.attachments=Object.entries(i).reduce((o,[l,d])=>(o[l.slice(11)]={presigned_url:d.presigned_url,mime_type:d.mime_type},o),{})),t}async*listExamples({datasetId:e,datasetName:r,exampleIds:a,asOf:i,splits:s,inlineS3Urls:t,metadata:o,limit:l,offset:d,filter:c,includeAttachments:y}={}){let u;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)u=e;else if(r!==void 0)u=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let S=new URLSearchParams({dataset:u}),V=i?typeof i=="string"?i:i?.toISOString():void 0;V&&S.append("as_of",V);let U=t??!0;if(S.append("inline_s3_urls",U.toString()),a!==void 0)for(let D of a)S.append("id",D);if(s!==void 0)for(let D of s)S.append("splits",D);if(o!==void 0){let D=JSON.stringify(o);S.append("metadata",D)}l!==void 0&&S.append("limit",l.toString()),d!==void 0&&S.append("offset",d.toString()),c!==void 0&&S.append("filter",c),y===!0&&["attachment_urls","outputs","metadata"].forEach(D=>S.append("select",D));let z=0;for await(let D of this._getPaginated("/examples",S)){for(let k of D){let{attachment_urls:T,...R}=k,g=R;T&&(g.attachments=Object.entries(T).reduce((m,[v,b])=>(m[v.slice(11)]={presigned_url:b.presigned_url,mime_type:b.mime_type||void 0},m),{})),yield g,z++}if(l!==void 0&&z>=l)break}}async deleteExample(e){(0,_r.assertUuid)(e);let r=`/examples/${e}`,a=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(a,`delete ${r}`),await a.json()}async updateExample(e,r){let a;r?a=e:a=e.id,(0,_r.assertUuid)(a);let i;r?i={id:a,...r}:i=e;let s;return i.dataset_id!==void 0?s=i.dataset_id:s=(await this.readExample(a)).dataset_id,this._updateExamplesMultipart(s,[i])}async updateExamples(e){let r;return e[0].dataset_id===void 0?r=(await this.readExample(e[0].id)).dataset_id:r=e[0].dataset_id,this._updateExamplesMultipart(r,e)}async readDatasetVersion({datasetId:e,datasetName:r,asOf:a,tag:i}){let s;if(e?s=e:s=(await this.readDataset({datasetName:r})).id,(0,_r.assertUuid)(s),a&&i||!a&&!i)throw new Error("Exactly one of asOf and tag must be specified.");let t=new URLSearchParams;a!==void 0&&t.append("as_of",typeof a=="string"?a:a.toISOString()),i!==void 0&&t.append("tag",i);let o=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${s}/version?${t.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(o,"read dataset version"),await o.json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:a}){let i;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:r})).id:i=e,(0,_r.assertUuid)(i);let s=new URLSearchParams,t=a?typeof a=="string"?a:a?.toISOString():void 0;return t&&s.append("as_of",t),await this._get(`/datasets/${i}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:a,exampleIds:i,remove:s=!1}){let t;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?t=(await this.readDataset({datasetName:r})).id:t=e,(0,_r.assertUuid)(t);let o={split_name:a,examples:i.map(d=>((0,_r.assertUuid)(d),d)),remove:s},l=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${t}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(l,"update dataset splits",!0)}async evaluateRun(e,r,{sourceInfo:a,loadChildRuns:i,referenceExample:s}={loadChildRuns:!1}){(0,qre.warnOnce)("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let t;if(typeof e=="string")t=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)t=e;else throw new Error(`Invalid run type: ${typeof e}`);t.reference_example_id!==null&&t.reference_example_id!==void 0&&(s=await this.readExample(t.reference_example_id));let o=await r.evaluateRun(t,s),[l,d]=await this._logEvaluationFeedback(o,t,a);return d[0]}async createFeedback(e,r,{score:a,value:i,correction:s,comment:t,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:d,feedbackId:c,feedbackConfig:y,projectId:u,comparativeExperimentId:S}){if(!e&&!u)throw new Error("One of runId or projectId must be provided");if(e&&u)throw new Error("Only one of runId or projectId can be provided");let V={type:l??"api",metadata:o??{}};d!==void 0&&V?.metadata!==void 0&&!V.metadata.__run&&(V.metadata.__run={run_id:d}),V?.metadata!==void 0&&V.metadata.__run?.run_id!==void 0&&(0,_r.assertUuid)(V.metadata.__run.run_id);let U={id:c??Lm.v4(),run_id:e,key:r,score:$M(a),value:i,correction:s,comment:t,feedback_source:V,comparative_experiment_id:S,feedbackConfig:y,session_id:u},z=`${this.apiUrl}/feedback`,D=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),z,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(U),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(D,"create feedback",!0),U}async updateFeedback(e,{score:r,value:a,correction:i,comment:s}){let t={};r!=null&&(t.score=$M(r)),a!=null&&(t.value=a),i!=null&&(t.correction=i),s!=null&&(t.comment=s),(0,_r.assertUuid)(e);let o=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(o,"update feedback",!0)}async readFeedback(e){(0,_r.assertUuid)(e);let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){(0,_r.assertUuid)(e);let r=`/feedback/${e}`,a=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(a,`delete ${r}`),await a.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:a}={}){let i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(let s of r)i.append("key",s);if(a)for(let s of a)i.append("source",s);for await(let s of this._getPaginated("/feedback",i))yield*s}async createPresignedFeedbackToken(e,r,{expiration:a,feedbackConfig:i}={}){let s={run_id:e,feedback_key:r,feedback_config:i};return a?typeof a=="string"?s.expires_at=a:(a?.hours||a?.minutes||a?.days)&&(s.expires_in=a):s.expires_in={hours:3},await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:a,createdAt:i,description:s,metadata:t,id:o}){if(r.length===0)throw new Error("At least one experiment is required");if(a||(a=(await this.readProject({projectId:r[0]})).reference_dataset_id),!a==null)throw new Error("A reference dataset is required");let l={id:o,name:e,experiment_ids:r,reference_dataset_id:a,description:s,created_at:(i??new Date)?.toISOString(),extra:{}};return t&&(l.extra.metadata=t),await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){(0,_r.assertUuid)(e);let r=new URLSearchParams({run_id:e});for await(let a of this._getPaginated("/feedback/tokens",r))yield*a}_selectEvalResults(e){let r;return"results"in e?r=e.results:Array.isArray(e)?r=e:r=[e],r}async _logEvaluationFeedback(e,r,a){let i=this._selectEvalResults(e),s=[];for(let t of i){let o=a||{};t.evaluatorInfo&&(o={...t.evaluatorInfo,...o});let l=null;t.targetRunId?l=t.targetRunId:r&&(l=r.id),s.push(await this.createFeedback(l,t.key,{score:t.score,value:t.value,comment:t.comment,correction:t.correction,sourceInfo:o,sourceRunId:t.sourceRunId,feedbackConfig:t.feedbackConfig,feedbackSourceType:"model"}))}return[i,s]}async logEvaluationFeedback(e,r,a){let[i]=await this._logEvaluationFeedback(e,r,a);return i}async*listAnnotationQueues(e={}){let{queueIds:r,name:a,nameContains:i,limit:s}=e,t=new URLSearchParams;r&&r.forEach((l,d)=>{(0,_r.assertUuid)(l,`queueIds[${d}]`),t.append("ids",l)}),a&&t.append("name",a),i&&t.append("name_contains",i),t.append("limit",(s!==void 0?Math.min(s,100):100).toString());let o=0;for await(let l of this._getPaginated("/annotation-queues",t))if(yield*l,o++,s!==void 0&&o>=s)break}async createAnnotationQueue(e){let{name:r,description:a,queueId:i,rubricInstructions:s}=e,t={name:r,description:a,id:i||Lm.v4(),rubric_instructions:s},o=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(t).filter(([d,c])=>c!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(o,"create annotation queue"),await o.json()}async readAnnotationQueue(e){let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(r,"read annotation queue"),await r.json()}async updateAnnotationQueue(e,r){let{name:a,description:i,rubricInstructions:s}=r,t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:a,description:i,rubric_instructions:s}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(t,"update annotation queue")}async deleteAnnotationQueue(e){let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(r,"delete annotation queue")}async addRunsToAnnotationQueue(e,r){let a=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r.map((i,s)=>(0,_r.assertUuid)(i,`runIds[${s}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(a,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,r){let a=`/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}/run`,i=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}${a}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(i,"get run from annotation queue"),await i.json()}async deleteRunFromAnnotationQueue(e,r){let a=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}/runs/${(0,_r.assertUuid)(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(a,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,_r.assertUuid)(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(r,"get size from annotation queue"),await r.json()}async _currentTenantIsOwner(e){let r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){let a=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${a.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){let r=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await r.json();if(!r.ok){let i=typeof a.detail=="string"?a.detail:JSON.stringify(a.detail),s=new Error(`Error ${r.status}: ${r.statusText}
${i}`);throw s.statusCode=r.status,s}if(a.commits.length!==0)return a.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){let[a,i,s]=(0,tc.parsePromptIdentifier)(e),t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/likes/${a}/${i}`,{method:"POST",body:JSON.stringify({like:r}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(t,`${r?"like":"unlike"} prompt`),await t.json()}async _getPromptUrl(e){let[r,a,i]=(0,tc.parsePromptIdentifier)(e);if(await this._currentTenantIsOwner(r)){let s=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${a}/${i.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${a}?organizationId=${s.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${r}/${a}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${a}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let r of this._getPaginated(`/commits/${e}/`,new URLSearchParams,a=>a.commits))yield*r}async*listPrompts(e){let r=new URLSearchParams;r.append("sort_field",e?.sortField??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!e?.isArchived).toString()),e?.isPublic!==void 0&&r.append("is_public",e.isPublic.toString()),e?.query&&r.append("query",e.query);for await(let a of this._getPaginated("/repos",r,i=>i.repos))yield*a}async getPrompt(e){let[r,a,i]=(0,tc.parsePromptIdentifier)(e),s=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${r}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(s.status===404)return null;await(0,Or.raiseForStatus)(s,"get prompt");let t=await s.json();return t.repo?t.repo:null}async createPrompt(e,r){let a=await this._getSettings();if(r?.isPublic&&!a.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,s,t]=(0,tc.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);let o={repo_handle:s,...r?.description&&{description:r.description},...r?.readme&&{readme:r.readme},...r?.tags&&{tags:r.tags},is_public:!!r?.isPublic},l=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(l,"create prompt");let{repo:d}=await l.json();return d}async createCommit(e,r,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[i,s,t]=(0,tc.parsePromptIdentifier)(e),o=a?.parentCommitHash==="latest"||!a?.parentCommitHash?await this._getLatestCommitHash(`${i}/${s}`):a?.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(r)),parent_commit:o},d=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${i}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(d,"create commit");let c=await d.json();return this._getPromptUrl(`${i}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,r=[]){return this._updateExamplesMultipart(e,r)}async _updateExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let a=new FormData;for(let o of r){let l=o.id,d={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},c=(0,Ji.serialize)(d,`Serializing body for example with id: ${l}`),y=new Blob([c],{type:"application/json"});if(a.append(l,y),o.inputs){let u=(0,Ji.serialize)(o.inputs,`Serializing inputs for example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.inputs`,S)}if(o.outputs){let u=(0,Ji.serialize)(o.outputs,`Serializing outputs whle updating example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.outputs`,S)}if(o.attachments)for(let[u,S]of Object.entries(o.attachments)){let V,U;Array.isArray(S)?[V,U]=S:(V=S.mimeType,U=S.data);let z=new Blob([U],{type:`${V}; length=${U.byteLength}`});a.append(`${l}.attachment.${u}`,z)}if(o.attachments_operations){let u=(0,Ji.serialize)(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.attachments_operations`,S)}}let i=e??r[0]?.dataset_id;return await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/v1/platform/datasets/${i}/examples`,{method:"PATCH",headers:this.headers,body:a})).json()}async uploadExamplesMultipart(e,r=[]){return this._uploadExamplesMultipart(e,r)}async _uploadExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let a=new FormData;for(let t of r){let o=(t.id??Lm.v4()).toString(),l={created_at:t.created_at,...t.metadata&&{metadata:t.metadata},...t.split&&{split:t.split},...t.source_run_id&&{source_run_id:t.source_run_id},...t.use_source_run_io&&{use_source_run_io:t.use_source_run_io},...t.use_source_run_attachments&&{use_source_run_attachments:t.use_source_run_attachments}},d=(0,Ji.serialize)(l,`Serializing body for uploaded example with id: ${o}`),c=new Blob([d],{type:"application/json"});if(a.append(o,c),t.inputs){let y=(0,Ji.serialize)(t.inputs,`Serializing inputs for uploaded example with id: ${o}`),u=new Blob([y],{type:"application/json"});a.append(`${o}.inputs`,u)}if(t.outputs){let y=(0,Ji.serialize)(t.outputs,`Serializing outputs for uploaded example with id: ${o}`),u=new Blob([y],{type:"application/json"});a.append(`${o}.outputs`,u)}if(t.attachments)for(let[y,u]of Object.entries(t.attachments)){let S,V;Array.isArray(u)?[S,V]=u:(S=u.mimeType,V=u.data);let U=new Blob([V],{type:`${S}; length=${V.byteLength}`});a.append(`${o}.attachment.${y}`,U)}}let i=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:a});return await(0,Or.raiseForStatus)(i,"upload examples"),await i.json()}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[a,i]=(0,tc.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("update a prompt",a);let s={};if(r?.description!==void 0&&(s.description=r.description),r?.readme!==void 0&&(s.readme=r.readme),r?.tags!==void 0&&(s.tags=r.tags),r?.isPublic!==void 0&&(s.is_public=r.isPublic),r?.isArchived!==void 0&&(s.is_archived=r.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");let t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${a}/${i}`,{method:"PATCH",body:JSON.stringify(s),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,Or.raiseForStatus)(t,"update prompt"),t.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[r,a,i]=(0,tc.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return await(await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${r}/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,r){let[a,i,s]=(0,tc.parsePromptIdentifier)(e),t=await this.caller.call((0,Wt._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${a}/${i}/${s}${r?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,Or.raiseForStatus)(t,"pull prompt commit");let o=await t.json();return{owner:a,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,r){let a=await this.pullPromptCommit(e,{includeModel:r?.includeModel});return JSON.stringify(a.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(i=>i!=="object")&&await this.updatePrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}):await this.createPrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}),r?.object?await this.createCommit(e,r?.object,{parentCommitHash:r?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){let{sourceApiUrl:a=this.apiUrl,datasetName:i}=r,[s,t]=this.parseTokenOrUrl(e,a),o=new n({apiUrl:s,apiKey:"placeholder"}),l=await o.readSharedDataset(t),d=i||l.name;try{if(await this.hasDataset({datasetId:d})){console.log(`Dataset ${d} already exists in your tenant. Skipping.`);return}}catch{}let c=await o.listSharedExamples(t),y=await this.createDataset(d,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(u=>u.inputs),outputs:c.flatMap(u=>u.outputs?[u.outputs]:[]),datasetId:y.id})}catch(u){throw console.error(`An error occurred while creating dataset ${d}. You should delete it manually.`),u}}parseTokenOrUrl(e,r,a=2,i="dataset"){try{return(0,_r.assertUuid)(e),[r,e]}catch{}try{let t=new URL(e).pathname.split("/").filter(o=>o!=="");if(t.length>=a){let o=t[t.length-a];return[r,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}};Wn.Client=D8;function VM(n){return"dataset_id"in n||"dataset_name"in n}});var zM=te(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.isTracingEnabled=void 0;var Gre=km(),Hre=n=>n!==void 0?n:!!["TRACING_V2","TRACING"].find(r=>(0,Gre.getLangSmithEnvironmentVariable)(r)==="true");M2.isTracingEnabled=Hre});var WM=te(j2=>{"use strict";Object.defineProperty(j2,"__esModule",{value:!0});j2._LC_CONTEXT_VARIABLES_KEY=void 0;j2._LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables")});var q2=te(Xi=>{"use strict";var Kre=Xi&&Xi.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Zre=Xi&&Xi.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Jre=Xi&&Xi.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(r){var a=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[a.length]=i);return a},n(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var a=n(e),i=0;i<a.length;i++)a[i]!=="default"&&Kre(r,e,a[i]);return Zre(r,e),r}}();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.RunTree=void 0;Xi.convertToDottedOrderFormat=HM;Xi.isRunTree=KM;Xi.isRunnableConfigLike=JM;var Xre=Jre((Xa(),fs(Tn))),qm=km(),Yre=N8(),Qre=zM(),eae=l8(),M8=WM();function tae(n){return n.replace(/[-:.]/g,"")}function HM(n,e,r=1){let a=r.toFixed(0).slice(0,3).padStart(3,"0");return tae(`${new Date(n).toISOString().slice(0,-1)}${a}Z`)+e}var B2=class n{constructor(e,r,a){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r,this.project_name=a}static fromHeader(e){let r=e.split(","),a={},i=[],s;for(let t of r){let[o,l]=t.split("="),d=decodeURIComponent(l);o==="langsmith-metadata"?a=JSON.parse(d):o==="langsmith-tags"?i=d.split(","):o==="langsmith-project"&&(s=d)}return new n(a,i,s)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}},L2=class n{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),KM(e)){Object.assign(this,{...e});return}let r=n.getDefaultConfig(),{metadata:a,...i}=e,s=i.client??n.getSharedClient(),t={...a,...i?.extra?.metadata};if(i.extra={...i.extra,metadata:t},Object.assign(this,{...r,...i,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){let o=HM(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+o:this.dotted_order=o}}static getDefaultConfig(){return{id:Xre.v4(),run_type:"chain",project_name:(0,qm.getLangSmithEnvironmentVariable)("PROJECT")??(0,qm.getEnvironmentVariable)("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:(0,qm.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:(0,qm.getEnvironmentVariable)("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return n.sharedClient||(n.sharedClient=new Yre.Client),n.sharedClient}createChild(e){let r=this.child_execution_order+1,a=new n({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});M8._LC_CONTEXT_VARIABLES_KEY in this&&(a[M8._LC_CONTEXT_VARIABLES_KEY]=this[M8._LC_CONTEXT_VARIABLES_KEY]);let i=Symbol.for("lc:child_config"),s=e.extra?.[i]??this.extra[i];if(JM(s)){let l={...s},d=rae(l.callbacks)?l.callbacks.copy?.():void 0;d&&(Object.assign(d,{_parentRunId:a.id}),d.handlers?.find(ZM)?.updateFromRunTree?.(a),l.callbacks=d),a.extra[i]=l}let t=new Set,o=this;for(;o!=null&&!t.has(o.id);)t.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,r),o=o.parent_run;return this.child_runs.push(a),a}async end(e,r,a=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??r,this.end_time=this.end_time??a,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,r,a=!0){let i=e.extra??{};if(i.runtime||(i.runtime={}),r)for(let[l,d]of Object.entries(r))i.runtime[l]||(i.runtime[l]=d);let s,t;return a?(t=e.parent_run?.id,s=[]):(s=e.child_runs.map(l=>this._convertToCreate(l,r,a)),t=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:t,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{let r=(0,qm.getRuntimeEnvironment)(),a=await this._convertToCreate(this,r,!0);if(await this.client.createRun(a),!e){(0,eae.warnOnce)("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let i of this.child_runs)await i.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(){try{let e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,r){let a=e?.callbacks,i,s,t,o=(0,Qre.isTracingEnabled)();if(a){let d=a?.getParentRunId?.()??"",c=a?.handlers?.find(y=>y?.name=="langchain_tracer");i=c?.getRun?.(d),s=c?.projectName,t=c?.client,o=o||!!c}return i?new n({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:t,tracingEnabled:o,project_name:s,tags:[...new Set((i?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...i?.extra?.metadata,...e?.metadata}}}).createChild(r):new n({...r,client:t,tracingEnabled:o,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){let a="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=a["langsmith-trace"];if(!i||typeof i!="string")return;let s=i.trim(),t=s.split(".").map(d=>{let[c,y]=d.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:y}}),o=t[0].uuid,l={...r,name:r?.name??"parent",run_type:r?.run_type??"chain",start_time:r?.start_time??Date.now(),id:t.at(-1)?.uuid,trace_id:o,dotted_order:s};if(a.baggage&&typeof a.baggage=="string"){let d=B2.fromHeader(a.baggage);l.metadata=d.metadata,l.tags=d.tags,l.project_name=d.project_name}return new n(l)}toHeaders(e){let r={"langsmith-trace":this.dotted_order,baggage:new B2(this.extra?.metadata,this.tags,this.project_name).toHeader()};if(e)for(let[a,i]of Object.entries(r))e.set(a,i);return r}};Xi.RunTree=L2;Object.defineProperty(L2,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function KM(n){return n!==void 0&&typeof n.createChild=="function"&&typeof n.postRun=="function"}function ZM(n){return typeof n=="object"&&n!=null&&typeof n.name=="string"&&n.name==="langchain_tracer"}function GM(n){return Array.isArray(n)&&n.some(e=>ZM(e))}function rae(n){return typeof n=="object"&&n!=null&&Array.isArray(n.handlers)}function JM(n){return n!==void 0&&typeof n.callbacks=="object"&&(GM(n.callbacks?.handlers)||GM(n.callbacks))}});var m2=te(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.__version__=zo.overrideFetchImplementation=zo.RunTree=zo.Client=void 0;var aae=N8();Object.defineProperty(zo,"Client",{enumerable:!0,get:function(){return aae.Client}});var nae=q2();Object.defineProperty(zo,"RunTree",{enumerable:!0,get:function(){return nae.RunTree}});var iae=g2();Object.defineProperty(zo,"overrideFetchImplementation",{enumerable:!0,get:function(){return iae.overrideFetchImplementation}});zo.__version__="0.3.29"});var j8=te((mEe,XM)=>{XM.exports=m2()});var Um=te(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.getGlobalAsyncLocalStorageInstance=bs.setGlobalAsyncLocalStorageInstance=bs._CONTEXT_VARIABLES_KEY=bs.TRACING_ALS_KEY=void 0;bs.TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage");bs._CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables");var sae=n=>{globalThis[bs.TRACING_ALS_KEY]=n};bs.setGlobalAsyncLocalStorageInstance=sae;var oae=()=>globalThis[bs.TRACING_ALS_KEY];bs.getGlobalAsyncLocalStorageInstance=oae});var B8=te((bEe,YM)=>{"use strict";YM.exports=function(n,e){if(typeof n!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,n.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var q8=te((vEe,L8)=>{"use strict";var uae=/[\p{Lu}]/u,lae=/[\p{Ll}]/u,QM=/^[\p{Lu}](?![\p{Lu}])/gu,rj=/([\p{Alpha}\p{N}_]|$)/u,aj=/[_.\- ]+/,cae=new RegExp("^"+aj.source),ej=new RegExp(aj.source+rj.source,"gu"),tj=new RegExp("\\d+"+rj.source,"gu"),dae=(n,e,r)=>{let a=!1,i=!1,s=!1;for(let t=0;t<n.length;t++){let o=n[t];a&&uae.test(o)?(n=n.slice(0,t)+"-"+n.slice(t),a=!1,s=i,i=!0,t++):i&&s&&lae.test(o)?(n=n.slice(0,t-1)+"-"+n.slice(t-1),s=i,i=!1,a=!0):(a=e(o)===o&&r(o)!==o,s=i,i=r(o)===o&&e(o)!==o)}return n},pae=(n,e)=>(QM.lastIndex=0,n.replace(QM,r=>e(r))),fae=(n,e)=>(ej.lastIndex=0,tj.lastIndex=0,n.replace(ej,(r,a)=>e(a)).replace(tj,r=>e(r))),nj=(n,e)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(n)?n=n.map(s=>s.trim()).filter(s=>s.length).join("-"):n=n.trim(),n.length===0)return"";let r=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),a=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return n.length===1?e.pascalCase?a(n):r(n):(n!==r(n)&&(n=dae(n,r,a)),n=n.replace(cae,""),e.preserveConsecutiveUppercase?n=pae(n,r):n=r(n),e.pascalCase&&(n=a(n.charAt(0))+n.slice(1)),fae(n,a))};L8.exports=nj;L8.exports.default=nj});var U8=te(Wo=>{"use strict";var ij=Wo&&Wo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.mapKeys=Wo.keyFromJson=Wo.keyToJson=void 0;var hae=ij(B8()),mae=ij(q8());function gae(n,e){return e?.[n]||(0,hae.default)(n)}Wo.keyToJson=gae;function bae(n,e){return e?.[n]||(0,mae.default)(n)}Wo.keyFromJson=bae;function vae(n,e,r){let a={};for(let i in n)Object.hasOwn(n,i)&&(a[e(i,r)]=n[i]);return a}Wo.mapKeys=vae});var co=te(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Serializable=Rf.get_lc_unique_name=void 0;var sj=U8();function oj(n){return Array.isArray(n)?[...n]:{...n}}function yae(n,e){let r=oj(n);for(let[a,i]of Object.entries(e)){let[s,...t]=a.split(".").reverse(),o=r;for(let l of t.reverse()){if(o[l]===void 0)break;o[l]=oj(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function uj(n){let e=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof e.lc_name!="function"||n.lc_name()!==e.lc_name())?n.lc_name():n.name}Rf.get_lc_unique_name=uj;var $8=class n{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,uj(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([a])=>this.lc_serializable_keys?.includes(a))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof n||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},a=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(a,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,t=a,[o,...l]=i.split(".").reverse();for(let d of l.reverse()){if(!(d in s)||s[d]===void 0)return;(!(d in t)||t[d]===void 0)&&(typeof s[d]=="object"&&s[d]!=null?t[d]={}:Array.isArray(s[d])&&(t[d]=[])),s=s[d],t=t[d]}o in s&&s[o]!==void 0&&(t[o]=t[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:(0,sj.mapKeys)(Object.keys(r).length?yae(a,r):a,sj.keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};Rf.Serializable=$8});var Go=te(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.getEnvironmentVariable=wa.getRuntimeEnvironment=wa.getEnv=wa.isNode=wa.isDeno=wa.isJsDom=wa.isWebWorker=wa.isBrowser=void 0;var _ae=()=>typeof window<"u"&&typeof window.document<"u";wa.isBrowser=_ae;var xae=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope";wa.isWebWorker=xae;var wae=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));wa.isJsDom=wae;var Sae=()=>typeof Deno<"u";wa.isDeno=Sae;var Cae=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!(0,wa.isDeno)();wa.isNode=Cae;var Aae=()=>{let n;return(0,wa.isBrowser)()?n="browser":(0,wa.isNode)()?n="node":(0,wa.isWebWorker)()?n="webworker":(0,wa.isJsDom)()?n="jsdom":(0,wa.isDeno)()?n="deno":n="other",n};wa.getEnv=Aae;var V8;async function Eae(){return V8===void 0&&(V8={library:"langchain-js",runtime:(0,wa.getEnv)()}),V8}wa.getRuntimeEnvironment=Eae;function Pae(n){try{return typeof process<"u"?process.env?.[n]:(0,wa.isDeno)()?Deno?.env.get(n):void 0}catch{return}}wa.getEnvironmentVariable=Pae});var Od=te(vi=>{"use strict";var Tae=vi&&vi.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Oae=vi&&vi.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Fae=vi&&vi.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Tae(e,n,r);return Oae(e,n),e};Object.defineProperty(vi,"__esModule",{value:!0});vi.isBaseCallbackHandler=vi.BaseCallbackHandler=vi.callbackHandlerPrefersStreaming=void 0;var kae=Fae((Xa(),fs(Tn))),z8=co(),Rae=Go(),W8=class{};function Iae(n){return"lc_prefer_streaming"in n&&n.lc_prefer_streaming}vi.callbackHandlerPrefersStreaming=Iae;var G8=class n extends W8{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,z8.get_lc_unique_name)(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:(0,Rae.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return z8.Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return z8.Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends n{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:kae.v4()}),Object.assign(this,e)}}return new r}};vi.BaseCallbackHandler=G8;var Dae=n=>{let e=n;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};vi.isBaseCallbackHandler=Dae});var H8=te((SEe,dj)=>{"use strict";var lj=(n=0)=>e=>`\x1B[${38+n};5;${e}m`,cj=(n=0)=>(e,r,a)=>`\x1B[${38+n};2;${e};${r};${a}m`;function Nae(){let n=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,a]of Object.entries(e)){for(let[i,s]of Object.entries(a))e[i]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},a[i]=e[i],n.set(s[0],s[1]);Object.defineProperty(e,r,{value:a,enumerable:!1})}return Object.defineProperty(e,"codes",{value:n,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=lj(),e.color.ansi16m=cj(),e.bgColor.ansi256=lj(10),e.bgColor.ansi16m=cj(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,a,i)=>r===a&&a===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(a/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let a=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!a)return[0,0,0];let{colorString:i}=a.groups;i.length===3&&(i=i.split("").map(t=>t+t).join(""));let s=Number.parseInt(i,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(dj,"exports",{enumerable:!0,get:Nae})});var po=te(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.BaseTracer=If.isBaseTracer=void 0;var Mae=Od();function K8(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}function jae(n){return n.replace(/[-:.]/g,"")}function Bae(n,e,r){let a=r.toFixed(0).slice(0,3).padStart(3,"0");return jae(`${new Date(n).toISOString().slice(0,-1)}${a}Z`)+e}function Lae(n){return typeof n._addRunToRunMap=="function"}If.isBaseTracer=Lae;var Z8=class extends Mae.BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){let r=Bae(e.start_time,e.id,e.execution_order),a={...e};if(a.parent_run_id!==void 0){let i=this.runMap.get(a.parent_run_id);i&&(this._addChildRun(i,a),i.child_execution_order=Math.max(i.child_execution_order,a.child_execution_order),a.trace_id=i.trace_id,i.dotted_order!==void 0&&(a.dotted_order=[i.dotted_order,r].join(".")))}else a.trace_id=a.id,a.dotted_order=r;return this.runMap.set(a.id,a),a}async _endTrace(e){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await this.onRunUpdate?.(e)}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y=o?{...s,metadata:o}:s,u={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:y??{},tags:t||[]};return this._addRunToRunMap(u)}async handleLLMStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForLLMStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}_createRunForChatModelStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y=o?{...s,metadata:o}:s,u={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:y??{},tags:t||[]};return this._addRunToRunMap(u)}async handleChatModelStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForChatModelStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}async handleLLMEnd(e,r,a,i,s){let t=this.runMap.get(r);if(!t||t?.run_type!=="llm")throw new Error("No LLM run to end.");return t.end_time=Date.now(),t.outputs=e,t.events.push({name:"end",time:new Date(t.end_time).toISOString()}),t.extra={...t.extra,...s},await this.onLLMEnd?.(t),await this._endTrace(t),t}async handleLLMError(e,r,a,i,s){let t=this.runMap.get(r);if(!t||t?.run_type!=="llm")throw new Error("No LLM run to end.");return t.end_time=Date.now(),t.error=this.stringifyError(e),t.events.push({name:"error",time:new Date(t.end_time).toISOString()}),t.extra={...t.extra,...s},await this.onLLMError?.(t),await this._endTrace(t),t}_createRunForChainStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:d,child_execution_order:d,run_type:o??"chain",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(y)}async handleChainStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForChainStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onChainStart?.(d),d}async handleChainEnd(e,r,a,i,s){let t=this.runMap.get(r);if(!t)throw new Error("No chain run to end.");return t.end_time=Date.now(),t.outputs=K8(e,"output"),t.events.push({name:"end",time:new Date(t.end_time).toISOString()}),s?.inputs!==void 0&&(t.inputs=K8(s.inputs,"input")),await this.onChainEnd?.(t),await this._endTrace(t),t}async handleChainError(e,r,a,i,s){let t=this.runMap.get(r);if(!t)throw new Error("No chain run to end.");return t.end_time=Date.now(),t.error=this.stringifyError(e),t.events.push({name:"error",time:new Date(t.end_time).toISOString()}),s?.inputs!==void 0&&(t.inputs=K8(s.inputs,"input")),await this.onChainError?.(t),await this._endTrace(t),t}_createRunForToolStart(e,r,a,i,s,t,o){let l=this._getExecutionOrder(i),d=Date.now(),c={id:a,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleToolStart(e,r,a,i,s,t,o){let l=this.runMap.get(a)??this._createRunForToolStart(e,r,a,i,s,t,o);return await this.onRunCreate?.(l),await this.onToolStart?.(l),l}async handleToolEnd(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.outputs={output:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await this.onToolEnd?.(a),await this._endTrace(a),a}async handleToolError(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await this.onToolError?.(a),await this._endTrace(a),a}async handleAgentAction(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="chain")return;let i=a;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(a)}async handleAgentEnd(e,r){let a=this.runMap.get(r);!a||a?.run_type!=="chain"||(a.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(a))}_createRunForRetrieverStart(e,r,a,i,s,t,o){let l=this._getExecutionOrder(i),d=Date.now(),c={id:a,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,r,a,i,s,t,o){let l=this.runMap.get(a)??this._createRunForRetrieverStart(e,r,a,i,s,t,o);return await this.onRunCreate?.(l),await this.onRetrieverStart?.(l),l}async handleRetrieverEnd(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.outputs={documents:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await this.onRetrieverEnd?.(a),await this._endTrace(a),a}async handleRetrieverError(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await this.onRetrieverError?.(a),await this._endTrace(a),a}async handleText(e,r){let a=this.runMap.get(r);!a||a?.run_type!=="chain"||(a.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(a))}async handleLLMNewToken(e,r,a,i,s,t){let o=this.runMap.get(a);if(!o||o?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:t?.chunk}}),await this.onLLMNewToken?.(o,e,{chunk:t?.chunk}),o}};If.BaseTracer=Z8});var X8=te(Df=>{"use strict";var qae=Df&&Df.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Df,"__esModule",{value:!0});Df.ConsoleCallbackHandler=void 0;var fj=qae(H8()),Uae=po();function si(n,e){return`${n.open}${e}${n.close}`}function vs(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function pj(n){return typeof n=="string"?n.trim():n==null?n:vs(n,n.toString())}function rc(n){if(!n.end_time)return"";let e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var{color:yi}=fj.default,J8=class extends Uae.BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],a=e;for(;a.parent_run_id;){let i=this.runMap.get(a.parent_run_id);if(i)r.push(i),a=i;else break}return r}getBreadcrumbs(e){let a=[...this.getParents(e).reverse(),e].map((i,s,t)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===t.length-1?si(fj.default.bold,o):o}).join(" > ");return si(yi.grey,a)}onChainStart(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.green,"[chain/start]")} [${r}] Entering Chain run with input: ${vs(e.inputs,"[inputs]")}`)}onChainEnd(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.cyan,"[chain/end]")} [${r}] [${rc(e)}] Exiting Chain run with output: ${vs(e.outputs,"[outputs]")}`)}onChainError(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.red,"[chain/error]")} [${r}] [${rc(e)}] Chain run errored with error: ${vs(e.error,"[error]")}`)}onLLMStart(e){let r=this.getBreadcrumbs(e),a="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${si(yi.green,"[llm/start]")} [${r}] Entering LLM run with input: ${vs(a,"[inputs]")}`)}onLLMEnd(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.cyan,"[llm/end]")} [${r}] [${rc(e)}] Exiting LLM run with output: ${vs(e.outputs,"[response]")}`)}onLLMError(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.red,"[llm/error]")} [${r}] [${rc(e)}] LLM run errored with error: ${vs(e.error,"[error]")}`)}onToolStart(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.green,"[tool/start]")} [${r}] Entering Tool run with input: "${pj(e.inputs.input)}"`)}onToolEnd(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.cyan,"[tool/end]")} [${r}] [${rc(e)}] Exiting Tool run with output: "${pj(e.outputs?.output)}"`)}onToolError(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.red,"[tool/error]")} [${r}] [${rc(e)}] Tool run errored with error: ${vs(e.error,"[error]")}`)}onRetrieverStart(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${vs(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.cyan,"[retriever/end]")} [${r}] [${rc(e)}] Exiting Retriever run with output: ${vs(e.outputs,"[outputs]")}`)}onRetrieverError(e){let r=this.getBreadcrumbs(e);console.log(`${si(yi.red,"[retriever/error]")} [${r}] [${rc(e)}] Retriever run errored with error: ${vs(e.error,"[error]")}`)}onAgentAction(e){let r=e,a=this.getBreadcrumbs(e);console.log(`${si(yi.blue,"[agent/action]")} [${a}] Agent selected action: ${vs(r.actions[r.actions.length-1],"[action]")}`)}};Df.ConsoleCallbackHandler=J8});var $m=te(U2=>{"use strict";Object.defineProperty(U2,"__esModule",{value:!0});U2.addLangChainErrorFields=void 0;function $ae(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}U2.addLangChainErrorFields=$ae});var $2=te(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.ToolInputParsingException=ac._configHasToolCallId=ac._isToolCall=void 0;function Vae(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="tool_call")}ac._isToolCall=Vae;function zae(n){return!!(n&&typeof n=="object"&&"toolCall"in n&&n.toolCall!=null&&typeof n.toolCall=="object"&&"id"in n.toolCall&&typeof n.toolCall.id=="string")}ac._configHasToolCallId=zae;var Y8=class extends Error{constructor(e,r){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=r}};ac.ToolInputParsingException=Y8});var Q8=te(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.parsePartialJson=Nf.parseJsonMarkdown=void 0;function Wae(n,e=hj){n=n.trim();let r=n.indexOf("```");if(r===-1)return e(n);let a=n.substring(r+3);a.startsWith(`json
`)?a=a.substring(5):a.startsWith("json")?a=a.substring(4):a.startsWith(`
`)&&(a=a.substring(1));let i=a.indexOf("```"),s=a;return i!==-1&&(s=a.substring(0,i)),e(s.trim())}Nf.parseJsonMarkdown=Wae;function hj(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let e="",r=[],a=!1,i=!1;for(let s of n){if(a)s==='"'&&!i?a=!1:s===`
`&&!i?s="\\n":s==="\\"?i=!i:i=!1;else if(s==='"')a=!0,i=!1;else if(s==="{")r.push("}");else if(s==="[")r.push("]");else if(s==="}"||s==="]")if(r&&r[r.length-1]===s)r.pop();else return null;e+=s}a&&(e+='"');for(let s=r.length-1;s>=0;s-=1)e+=r[s];try{return JSON.parse(e)}catch{return null}}Nf.parsePartialJson=hj});var e9=te(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.convertToProviderContentBlock=Ya.parseBase64DataUrl=Ya.parseMimeType=Ya.convertToOpenAIImageBlock=Ya.isIDContentBlock=Ya.isPlainTextContentBlock=Ya.isBase64ContentBlock=Ya.isURLContentBlock=Ya.isDataContentBlock=void 0;function Mf(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"&&"source_type"in n&&(n.source_type==="url"||n.source_type==="base64"||n.source_type==="text"||n.source_type==="id")}Ya.isDataContentBlock=Mf;function Gae(n){return Mf(n)&&n.source_type==="url"&&"url"in n&&typeof n.url=="string"}Ya.isURLContentBlock=Gae;function Hae(n){return Mf(n)&&n.source_type==="base64"&&"data"in n&&typeof n.data=="string"}Ya.isBase64ContentBlock=Hae;function Kae(n){return Mf(n)&&n.source_type==="text"&&"text"in n&&typeof n.text=="string"}Ya.isPlainTextContentBlock=Kae;function Zae(n){return Mf(n)&&n.source_type==="id"&&"id"in n&&typeof n.id=="string"}Ya.isIDContentBlock=Zae;function Jae(n){if(Mf(n)){if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url}};if(n.source_type==="base64"){if(!n.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${n.mime_type};base64,${n.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}Ya.convertToOpenAIImageBlock=Jae;function Xae(n){let e=n.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${n}" - does not match type/subtype format.`);let r=e[0].trim(),a=e[1].trim();if(r===""||a==="")throw new Error(`Invalid mime type: "${n}" - type or subtype is empty.`);let i={};for(let s of n.split(";").slice(1)){let t=s.split("=");if(t.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${n}".`);let o=t[0].trim(),l=t[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${n}".`);i[o]=l}return{type:r,subtype:a,parameters:i}}Ya.parseMimeType=Xae;function Yae({dataUrl:n,asTypedArray:e=!1}){let r=n.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/),a;if(r){a=r[1].toLowerCase();let i=e?Uint8Array.from(atob(r[2]),s=>s.charCodeAt(0)):r[2];return{mime_type:a,data:i}}}Ya.parseBase64DataUrl=Yae;function Qae(n,e){if(n.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(n)}if(n.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(n)}if(n.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(n)}if(n.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(n)}throw new Error(`Unable to convert content block type '${n.type}' to provider-specific format: not recognized.`)}Ya.convertToProviderContentBlock=Qae});var ys=te(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.isBaseMessageChunk=Ta.isBaseMessage=Ta._isMessageFieldWithRole=Ta.BaseMessageChunk=Ta._mergeObj=Ta._mergeLists=Ta._mergeDicts=Ta.isOpenAIToolCallArray=Ta.BaseMessage=Ta._mergeStatus=Ta.mergeContent=void 0;var ene=co(),mj=e9();function tne(n,e){return typeof n=="string"?n===""?e:typeof e=="string"?n+e:Array.isArray(e)&&e.some(r=>(0,mj.isDataContentBlock)(r))?[{type:"text",source_type:"text",text:n},...e]:[{type:"text",text:n},...e]:Array.isArray(e)?W2(n,e)??[...n,...e]:e===""?n:Array.isArray(n)&&n.some(r=>(0,mj.isDataContentBlock)(r))?[...n,{type:"file",source_type:"text",text:e}]:[...n,{type:"text",text:e}]}Ta.mergeContent=tne;function rne(n,e){return n==="error"||e==="error"?"error":"success"}Ta._mergeStatus=rne;function ane(n,e){function r(a,i){if(typeof a!="object"||a===null||a===void 0)return a;if(i>=e)return Array.isArray(a)?"[Array]":"[Object]";if(Array.isArray(a))return a.map(t=>r(t,i+1));let s={};for(let t of Object.keys(a))s[t]=r(a[t],i+1);return s}return JSON.stringify(r(n,0),null,2)}var V2=class extends ene.Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let r=ane(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}};Ta.BaseMessage=V2;function nne(n){return Array.isArray(n)&&n.every(e=>typeof e.index=="number")}Ta.isOpenAIToolCallArray=nne;function z2(n,e){let r={...n};for(let[a,i]of Object.entries(e))if(r[a]==null)r[a]=i;else{if(i==null)continue;if(typeof r[a]!=typeof i||Array.isArray(r[a])!==Array.isArray(i))throw new Error(`field[${a}] already exists in the message chunk, but with a different type.`);if(typeof r[a]=="string"){if(a==="type")continue;r[a]+=i}else if(typeof r[a]=="object"&&!Array.isArray(r[a]))r[a]=z2(r[a],i);else if(Array.isArray(r[a]))r[a]=W2(r[a],i);else{if(r[a]===i)continue;console.warn(`field[${a}] already exists in this message chunk and value has unsupported type.`)}}return r}Ta._mergeDicts=z2;function W2(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0||e===void 0)return n||e;{let r=[...n];for(let a of e)if(typeof a=="object"&&"index"in a&&typeof a.index=="number"){let i=r.findIndex(s=>s.index===a.index);i!==-1?r[i]=z2(r[i],a):r.push(a)}else{if(typeof a=="object"&&"text"in a&&a.text==="")continue;r.push(a)}return r}}}Ta._mergeLists=W2;function ine(n,e){if(!n&&!e)throw new Error("Cannot merge two undefined objects.");if(!n||!e)return n||e;if(typeof n!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof n}
Right ${typeof e}`);if(typeof n=="string"&&typeof e=="string")return n+e;if(Array.isArray(n)&&Array.isArray(e))return W2(n,e);if(typeof n=="object"&&typeof e=="object")return z2(n,e);if(n===e)return n;throw new Error(`Can not merge objects of different types.
Left ${n}
Right ${e}`)}Ta._mergeObj=ine;var t9=class extends V2{};Ta.BaseMessageChunk=t9;function sne(n){return typeof n.role=="string"}Ta._isMessageFieldWithRole=sne;function gj(n){return typeof n?._getType=="function"}Ta.isBaseMessage=gj;function one(n){return gj(n)&&typeof n.concat=="function"}Ta.isBaseMessageChunk=one});var jf=te(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.isToolMessageChunk=_i.isToolMessage=_i.defaultToolCallParser=_i.ToolMessageChunk=_i.ToolMessage=_i.isDirectToolOutput=void 0;var Fd=ys();function une(n){return n!=null&&typeof n=="object"&&"lc_direct_tool_output"in n&&n.lc_direct_tool_output===!0}_i.isDirectToolOutput=une;var r9=class extends Fd.BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,r,a){typeof e=="string"&&(e={content:e,name:a,tool_call_id:r}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};_i.ToolMessage=r9;var a9=class n extends Fd.BaseMessageChunk{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new n({content:(0,Fd.mergeContent)(this.content,e.content),additional_kwargs:(0,Fd._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,Fd._mergeDicts)(this.response_metadata,e.response_metadata),artifact:(0,Fd._mergeObj)(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:(0,Fd._mergeStatus)(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};_i.ToolMessageChunk=a9;function lne(n){let e=[],r=[];for(let a of n)if(a.function){let i=a.function.name;try{let s=JSON.parse(a.function.arguments),t={name:i||"",args:s||{},id:a.id};e.push(t)}catch{r.push({name:i,args:a.function.arguments,id:a.id,error:"Malformed args."})}}else continue;return[e,r]}_i.defaultToolCallParser=lne;function cne(n){return n._getType()==="tool"}_i.isToolMessage=cne;function dne(n){return n._getType()==="tool"}_i.isToolMessageChunk=dne});var kd=te(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.AIMessageChunk=Ho.isAIMessageChunk=Ho.isAIMessage=Ho.AIMessage=void 0;var pne=Q8(),Bf=ys(),fne=jf(),n9=class extends Bf.BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,r){let a;if(typeof e=="string")a={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:r??{}};else{a=e;let i=a.additional_kwargs?.tool_calls,s=a.tool_calls;i!=null&&i.length>0&&(s===void 0||s.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(i!=null&&s===void 0){let[t,o]=(0,fne.defaultToolCallParser)(i);a.tool_calls=t??[],a.invalid_tool_calls=o??[]}else a.tool_calls=a.tool_calls??[],a.invalid_tool_calls=a.invalid_tool_calls??[]}catch{a.tool_calls=[],a.invalid_tool_calls=[]}}super(a),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof a!="string"&&(this.tool_calls=a.tool_calls??this.tool_calls,this.invalid_tool_calls=a.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=a.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}};Ho.AIMessage=n9;function hne(n){return n._getType()==="ai"}Ho.isAIMessage=hne;function mne(n){return n._getType()==="ai"}Ho.isAIMessageChunk=mne;var i9=class n extends Bf.BaseMessageChunk{constructor(e){let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)r={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{let a=[],i=[];for(let s of e.tool_call_chunks){let t={};try{if(t=(0,pne.parsePartialJson)(s.args||"{}"),t===null||typeof t!="object"||Array.isArray(t))throw new Error("Malformed tool call chunk args.");a.push({name:s.name??"",args:t,id:s.id,type:"tool_call"})}catch{i.push({name:s.name,args:s.args,id:s.id,error:"Malformed args.",type:"invalid_tool_call"})}}r={...e,tool_calls:a,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=r.tool_call_chunks??this.tool_call_chunks,this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){let r={content:(0,Bf.mergeContent)(this.content,e.content),additional_kwargs:(0,Bf._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,Bf._mergeDicts)(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let a=(0,Bf._mergeLists)(this.tool_call_chunks,e.tool_call_chunks);a!==void 0&&a.length>0&&(r.tool_call_chunks=a)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){let a={...(this.usage_metadata?.input_token_details?.audio!==void 0||e.usage_metadata?.input_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(e.usage_metadata?.input_token_details?.audio??0)},...(this.usage_metadata?.input_token_details?.cache_read!==void 0||e.usage_metadata?.input_token_details?.cache_read!==void 0)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(e.usage_metadata?.input_token_details?.cache_read??0)},...(this.usage_metadata?.input_token_details?.cache_creation!==void 0||e.usage_metadata?.input_token_details?.cache_creation!==void 0)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(e.usage_metadata?.input_token_details?.cache_creation??0)}},i={...(this.usage_metadata?.output_token_details?.audio!==void 0||e.usage_metadata?.output_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(e.usage_metadata?.output_token_details?.audio??0)},...(this.usage_metadata?.output_token_details?.reasoning!==void 0||e.usage_metadata?.output_token_details?.reasoning!==void 0)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(e.usage_metadata?.output_token_details?.reasoning??0)}},s=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},t=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},o={input_tokens:s.input_tokens+t.input_tokens,output_tokens:s.output_tokens+t.output_tokens,total_tokens:s.total_tokens+t.total_tokens,...Object.keys(a).length>0&&{input_token_details:a},...Object.keys(i).length>0&&{output_token_details:i}};r.usage_metadata=o}return new n(r)}};Ho.AIMessageChunk=i9});var G2=te(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.isChatMessageChunk=Ko.isChatMessage=Ko.ChatMessageChunk=Ko.ChatMessage=void 0;var Vm=ys(),s9=class n extends Vm.BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return n}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};Ko.ChatMessage=s9;var o9=class n extends Vm.BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new n({content:(0,Vm.mergeContent)(this.content,e.content),additional_kwargs:(0,Vm._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,Vm._mergeDicts)(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}};Ko.ChatMessageChunk=o9;function gne(n){return n._getType()==="generic"}Ko.isChatMessage=gne;function bne(n){return n._getType()==="generic"}Ko.isChatMessageChunk=bne});var H2=te(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.isFunctionMessageChunk=Zo.isFunctionMessage=Zo.FunctionMessageChunk=Zo.FunctionMessage=void 0;var zm=ys(),u9=class extends zm.BaseMessage{static lc_name(){return"FunctionMessage"}constructor(e,r){typeof e=="string"&&(e={content:e,name:r}),super(e)}_getType(){return"function"}};Zo.FunctionMessage=u9;var l9=class n extends zm.BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new n({content:(0,zm.mergeContent)(this.content,e.content),additional_kwargs:(0,zm._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,zm._mergeDicts)(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};Zo.FunctionMessageChunk=l9;function vne(n){return n._getType()==="function"}Zo.isFunctionMessage=vne;function yne(n){return n._getType()==="function"}Zo.isFunctionMessageChunk=yne});var Gm=te(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.isHumanMessageChunk=Jo.isHumanMessage=Jo.HumanMessageChunk=Jo.HumanMessage=void 0;var Wm=ys(),c9=class extends Wm.BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,r){super(e,r)}};Jo.HumanMessage=c9;var d9=class n extends Wm.BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,r){super(e,r)}concat(e){return new n({content:(0,Wm.mergeContent)(this.content,e.content),additional_kwargs:(0,Wm._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,Wm._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}};Jo.HumanMessageChunk=d9;function _ne(n){return n.getType()==="human"}Jo.isHumanMessage=_ne;function xne(n){return n.getType()==="human"}Jo.isHumanMessageChunk=xne});var K2=te(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.isSystemMessageChunk=Xo.isSystemMessage=Xo.SystemMessageChunk=Xo.SystemMessage=void 0;var Hm=ys(),p9=class extends Hm.BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,r){super(e,r)}};Xo.SystemMessage=p9;var f9=class n extends Hm.BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,r){super(e,r)}concat(e){return new n({content:(0,Hm.mergeContent)(this.content,e.content),additional_kwargs:(0,Hm._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,Hm._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}};Xo.SystemMessageChunk=f9;function wne(n){return n._getType()==="system"}Xo.isSystemMessage=wne;function Sne(n){return n._getType()==="system"}Xo.isSystemMessageChunk=Sne});var bl=te(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.convertToChunk=xi.mapChatMessagesToStoredMessages=xi.mapStoredMessagesToChatMessages=xi.mapStoredMessageToChatMessage=xi.getBufferString=xi.coerceMessageLikeToMessage=void 0;var Cne=$m(),Ane=$2(),Z2=kd(),bj=ys(),m9=G2(),vj=H2(),X2=Gm(),J2=K2(),yj=jf();function Ene(n){return(0,Ane._isToolCall)(n)?n:typeof n.id=="string"&&n.type==="function"&&typeof n.function=="object"&&n.function!==null&&"arguments"in n.function&&typeof n.function.arguments=="string"&&"name"in n.function&&typeof n.function.name=="string"?{id:n.id,args:JSON.parse(n.function.arguments),name:n.function.name,type:"tool_call"}:n}function Pne(n){return typeof n=="object"&&n!=null&&n.lc===1&&Array.isArray(n.id)&&n.kwargs!=null&&typeof n.kwargs=="object"}function h9(n){let e,r;if(Pne(n)){let a=n.id.at(-1);a==="HumanMessage"||a==="HumanMessageChunk"?e="user":a==="AIMessage"||a==="AIMessageChunk"?e="assistant":a==="SystemMessage"||a==="SystemMessageChunk"?e="system":a==="FunctionMessage"||a==="FunctionMessageChunk"?e="function":a==="ToolMessage"||a==="ToolMessageChunk"?e="tool":e="unknown",r=n.kwargs}else{let{type:a,...i}=n;e=a,r=i}if(e==="human"||e==="user")return new X2.HumanMessage(r);if(e==="ai"||e==="assistant"){let{tool_calls:a,...i}=r;if(!Array.isArray(a))return new Z2.AIMessage(r);let s=a.map(Ene);return new Z2.AIMessage({...i,tool_calls:s})}else{if(e==="system")return new J2.SystemMessage(r);if(e==="developer")return new J2.SystemMessage({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in r)return new yj.ToolMessage({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw(0,Cne.addLangChainErrorFields)(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(n,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Tne(n){if(typeof n=="string")return new X2.HumanMessage(n);if((0,bj.isBaseMessage)(n))return n;if(Array.isArray(n)){let[e,r]=n;return h9({type:e,content:r})}else if((0,bj._isMessageFieldWithRole)(n)){let{role:e,...r}=n;return h9({...r,type:e})}else return h9(n)}xi.coerceMessageLikeToMessage=Tne;function One(n,e="Human",r="AI"){let a=[];for(let i of n){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let t=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);a.push(`${s}: ${t}${o}`)}return a.join(`
`)}xi.getBufferString=One;function Fne(n){if(n.data!==void 0)return n;{let e=n;return{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}}}}function _j(n){let e=Fne(n);switch(e.type){case"human":return new X2.HumanMessage(e.data);case"ai":return new Z2.AIMessage(e.data);case"system":return new J2.SystemMessage(e.data);case"function":if(e.data.name===void 0)throw new Error("Name must be defined for function messages");return new vj.FunctionMessage(e.data);case"tool":if(e.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new yj.ToolMessage(e.data);case"generic":{if(e.data.role===void 0)throw new Error("Role must be defined for chat messages");return new m9.ChatMessage(e.data)}default:throw new Error(`Got unexpected type: ${e.type}`)}}xi.mapStoredMessageToChatMessage=_j;function kne(n){return n.map(_j)}xi.mapStoredMessagesToChatMessages=kne;function Rne(n){return n.map(e=>e.toDict())}xi.mapChatMessagesToStoredMessages=Rne;function Ine(n){let e=n._getType();if(e==="human")return new X2.HumanMessageChunk({...n});if(e==="ai"){let r={...n};return"tool_calls"in r&&(r={...r,tool_call_chunks:r.tool_calls?.map(a=>({...a,type:"tool_call_chunk",index:void 0,args:JSON.stringify(a.args)}))}),new Z2.AIMessageChunk({...r})}else{if(e==="system")return new J2.SystemMessageChunk({...n});if(e==="function")return new vj.FunctionMessageChunk({...n});if(m9.ChatMessage.isInstance(n))return new m9.ChatMessageChunk({...n});throw new Error("Unknown message type.")}}xi.convertToChunk=Ine});var g9=te((BEe,xj)=>{xj.exports=q2()});var wj=te(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.ROOT=fo.AsyncLocalStorageProviderSingleton=void 0;fo.getCurrentRunTree=Mne;fo.withRunTree=jne;fo.isTraceableFunction=Bne;var Dne=q2(),v9=class{getStore(){}run(e,r){return r()}},b9=Symbol.for("ls:tracing_async_local_storage"),Nne=new v9,y9=class{getInstance(){return globalThis[b9]??Nne}initializeGlobalInstance(e){globalThis[b9]===void 0&&(globalThis[b9]=e)}};fo.AsyncLocalStorageProviderSingleton=new y9;function Mne(n=!1){let e=fo.AsyncLocalStorageProviderSingleton.getInstance().getStore();if(!n&&!(0,Dne.isRunTree)(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function jne(n,e){let r=fo.AsyncLocalStorageProviderSingleton.getInstance();return new Promise((a,i)=>{r.run(n,()=>void Promise.resolve(e()).then(a).catch(i))})}fo.ROOT=Symbol.for("langsmith:traceable:root");function Bne(n){return typeof n=="function"&&"langsmith:traceable"in n}});var _9=te((qEe,Sj)=>{Sj.exports=wj()});var Cj=te(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.setDefaultLangChainClientSingleton=Lf.getDefaultLangChainClientSingleton=void 0;var Lne=j8(),qne=Go(),Y2,Une=()=>{if(Y2===void 0){let n=(0,qne.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Y2=new Lne.Client(n)}return Y2};Lf.getDefaultLangChainClientSingleton=Une;var $ne=n=>{Y2=n};Lf.setDefaultLangChainClientSingleton=$ne});var ev=te(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});Q2.LangChainTracer=void 0;var Vne=g9(),zne=_9(),x9=Go(),Wne=po(),Gne=Cj(),w9=class n extends Wne.BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:a,client:i}=e;this.projectName=a??(0,x9.getEnvironmentVariable)("LANGCHAIN_PROJECT")??(0,x9.getEnvironmentVariable)("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??(0,Gne.getDefaultLangChainClientSingleton)();let s=n.getTraceableRunTree();s&&this.updateFromRunTree(s)}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await(0,x9.getRuntimeEnvironment)()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async onRunCreate(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async onRunUpdate(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,r)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let r=e,a=new Set;for(;r.parent_run&&!(a.has(r.id)||(a.add(r.id),!r.parent_run));)r=r.parent_run;a.clear();let i=[r];for(;i.length>0;){let s=i.shift();!s||a.has(s.id)||(a.add(s.id),this.runMap.set(s.id,s),s.child_runs&&i.push(...s.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){let r={},a=[];for(let[i,s]of this.runMap){let t=new Vne.RunTree({...s,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});r[i]=t,a.push([i,s.dotted_order])}a.sort((i,s)=>!i[1]||!s[1]?0:i[1].localeCompare(s[1]));for(let[i]of a){let s=this.runMap.get(i),t=r[i];if(!(!s||!t)&&s.parent_run_id){let o=r[s.parent_run_id];o&&(o.child_runs.push(t),t.parent_run=o)}}return r[e]}static getTraceableRunTree(){try{return zne.getCurrentRunTree(!0)}catch{return}}};Q2.LangChainTracer=w9});var Pj=te(Yo=>{"use strict";var Hne=Yo&&Yo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.awaitAllCallbacks=Yo.consumeCallback=Yo.getQueue=void 0;var S9=Hne(Pd()),Aj=Um(),Rd;function Kne(){let n="default"in S9.default?S9.default.default:S9.default;return new n({autoStart:!0,concurrency:1})}function Ej(){return typeof Rd>"u"&&(Rd=Kne()),Rd}Yo.getQueue=Ej;async function Zne(n,e){if(e===!0){let r=(0,Aj.getGlobalAsyncLocalStorageInstance)();r!==void 0?await r.run(void 0,async()=>n()):await n()}else Rd=Ej(),Rd.add(async()=>{let r=(0,Aj.getGlobalAsyncLocalStorageInstance)();r!==void 0?await r.run(void 0,async()=>n()):await n()})}Yo.consumeCallback=Zne;function Jne(){return typeof Rd<"u"?Rd.onIdle():Promise.resolve()}Yo.awaitAllCallbacks=Jne});var C9=te(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.consumeCallback=qf.awaitAllCallbacks=void 0;var Tj=Pj();Object.defineProperty(qf,"awaitAllCallbacks",{enumerable:!0,get:function(){return Tj.awaitAllCallbacks}});Object.defineProperty(qf,"consumeCallback",{enumerable:!0,get:function(){return Tj.consumeCallback}})});var Oj=te(tv=>{"use strict";Object.defineProperty(tv,"__esModule",{value:!0});tv.isTracingEnabled=void 0;var Xne=Go(),Yne=n=>n!==void 0?n:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>(0,Xne.getEnvironmentVariable)(r)==="true");tv.isTracingEnabled=Yne});var Dj=te(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.registerConfigureHook=ho._getConfigureHooks=ho.getContextVariable=ho.setContextVariable=void 0;var Fj=g9(),Km=Um();function kj(n,e){let r=(0,Km.getGlobalAsyncLocalStorageInstance)();if(r===void 0)throw new Error("Internal error: Global shared async local storage instance has not been initialized.");let a=r.getStore(),i={...a?.[Km._CONTEXT_VARIABLES_KEY]};i[n]=e;let s={};(0,Fj.isRunTree)(a)&&(s=new Fj.RunTree(a)),s[Km._CONTEXT_VARIABLES_KEY]=i,r.enterWith(s)}ho.setContextVariable=kj;function Rj(n){let e=(0,Km.getGlobalAsyncLocalStorageInstance)();return e===void 0?void 0:e.getStore()?.[Km._CONTEXT_VARIABLES_KEY]?.[n]}ho.getContextVariable=Rj;var Ij=Symbol("lc:configure_hooks"),Qne=()=>Rj(Ij)||[];ho._getConfigureHooks=Qne;var eie=n=>{if(n.envVar&&!n.handlerClass)throw new Error("If envVar is set, handlerClass must also be set to a non-None value.");kj(Ij,[...(0,ho._getConfigureHooks)(),n])};ho.registerConfigureHook=eie});var nc=te(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.traceAsGroup=Oa.TraceGroup=Oa.ensureHandler=Oa.CallbackManager=Oa.CallbackManagerForToolRun=Oa.CallbackManagerForChainRun=Oa.CallbackManagerForLLMRun=Oa.CallbackManagerForRetrieverRun=Oa.BaseRunManager=Oa.BaseCallbackManager=Oa.parseCallbackConfigArg=void 0;var Uf=(Xa(),fs(Tn)),E9=Od(),Nj=X8(),tie=bl(),A9=Go(),rv=ev(),un=C9(),rie=Oj(),Zm=po(),Mj=Dj();function aie(n){return n?Array.isArray(n)||"name"in n?{callbacks:n}:n:{}}Oa.parseCallbackConfigArg=aie;var av=class{setHandler(e){return this.setHandlers([e])}};Oa.BaseCallbackManager=av;var Id=class{constructor(e,r,a,i,s,t,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{try{await r.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleText: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleCustomEvent(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{try{await t.handleCustomEvent?.(e,r,this.runId,this.tags,this.metadata)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleCustomEvent: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}};Oa.BaseRunManager=Id;var nv=class extends Id{getChild(e){let r=new Dd(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetriever`),r.raiseError)throw a}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetrieverError: ${a}`),r.raiseError)throw e}},r.awaitHandlers)))}};Oa.CallbackManagerForRetrieverRun=nv;var Jm=class extends Id{async handleLLMNewToken(e,r,a,i,s,t){await Promise.all(this.handlers.map(o=>(0,un.consumeCallback)(async()=>{if(!o.ignoreLLM)try{await o.handleLLMNewToken?.(e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,t)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleLLMError(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleLLMEnd(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}};Oa.CallbackManagerForLLMRun=Jm;var iv=class extends Id{getChild(e){let r=new Dd(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleChainEnd(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreAgent)try{await r.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentAction: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreAgent)try{await r.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentEnd: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}};Oa.CallbackManagerForChainRun=iv;var sv=class extends Id{getChild(e){let r=new Dd(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreAgent)try{await r.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolError: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>(0,un.consumeCallback)(async()=>{if(!r.ignoreAgent)try{await r.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolEnd: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}};Oa.CallbackManagerForToolRun=sv;var Dd=class n extends av{constructor(e,r){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=r?.handlers??this.handlers,this.inheritableHandlers=r?.inheritableHandlers??this.inheritableHandlers,this.tags=r?.tags??this.tags,this.inheritableTags=r?.inheritableTags??this.inheritableTags,this.metadata=r?.metadata??this.metadata,this.inheritableMetadata=r?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,r,a=void 0,i=void 0,s=void 0,t=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(d,c)=>{let y=c===0&&a?a:(0,Uf.v4)();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return(0,Zm.isBaseTracer)(u)&&u._createRunForLLMStart(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l),(0,un.consumeCallback)(async()=>{try{await u.handleLLMStart?.(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l)}catch(S){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${S}`),u.raiseError)throw S}},u.awaitHandlers)})),new Jm(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,a=void 0,i=void 0,s=void 0,t=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(d,c)=>{let y=c===0&&a?a:(0,Uf.v4)();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return(0,Zm.isBaseTracer)(u)&&u._createRunForChatModelStart(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l),(0,un.consumeCallback)(async()=>{try{if(u.handleChatModelStart)await u.handleChatModelStart?.(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l);else if(u.handleLLMStart){let S=(0,tie.getBufferString)(d);await u.handleLLMStart?.(e,[S],y,this._parentRunId,s,this.tags,this.metadata,l)}}catch(S){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${S}`),u.raiseError)throw S}},u.awaitHandlers)})),new Jm(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,a=(0,Uf.v4)(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreChain)return(0,Zm.isBaseTracer)(l)&&l._createRunForChainStart(e,r,a,this._parentRunId,this.tags,this.metadata,i,o),(0,un.consumeCallback)(async()=>{try{await l.handleChainStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,i,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new iv(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,a=(0,Uf.v4)(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreAgent)return(0,Zm.isBaseTracer)(l)&&l._createRunForToolStart(e,r,a,this._parentRunId,this.tags,this.metadata,o),(0,un.consumeCallback)(async()=>{try{await l.handleToolStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleToolStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new sv(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,a=(0,Uf.v4)(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreRetriever)return(0,Zm.isBaseTracer)(l)&&l._createRunForRetrieverStart(e,r,a,this._parentRunId,this.tags,this.metadata,o),(0,un.consumeCallback)(async()=>{try{await l.handleRetrieverStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new nv(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,r,a,i,s){await Promise.all(this.handlers.map(t=>(0,un.consumeCallback)(async()=>{if(!t.ignoreCustomEvent)try{await t.handleCustomEvent?.(e,r,a,this.tags,this.metadata)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleCustomEvent: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let a of e)this.addHandler(a,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let a=new n(this._parentRunId);for(let i of this.handlers){let s=this.inheritableHandlers.includes(i);a.addHandler(i,s)}for(let i of this.tags){let s=this.inheritableTags.includes(i);a.addTags([i],s)}for(let i of Object.keys(this.metadata)){let s=Object.keys(this.inheritableMetadata).includes(i);a.addMetadata({[i]:this.metadata[i]},s)}for(let i of e)a.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||a.addHandler(i,r);return a}static fromHandlers(e){class r extends E9.BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,Uf.v4)()}),Object.assign(this,e)}}let a=new this;return a.addHandler(new r),a}static configure(e,r,a,i,s,t,o){return this._configureSync(e,r,a,i,s,t,o)}static _configureSync(e,r,a,i,s,t,o){let l;(e||r)&&(Array.isArray(e)||!e?(l=new n,l.setHandlers(e?.map(P9)??[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(P9):r?.handlers,!1));let d=(0,A9.getEnvironmentVariable)("LANGCHAIN_VERBOSE")==="true"||o?.verbose,c=rv.LangChainTracer.getTraceableRunTree()?.tracingEnabled||(0,rie.isTracingEnabled)(),y=c||((0,A9.getEnvironmentVariable)("LANGCHAIN_TRACING")??!1);if(d||y){if(l||(l=new n),d&&!l.handlers.some(u=>u.name===Nj.ConsoleCallbackHandler.prototype.name)){let u=new Nj.ConsoleCallbackHandler;l.addHandler(u,!0)}if(y&&!l.handlers.some(u=>u.name==="langchain_tracer")&&c){let u=new rv.LangChainTracer;l.addHandler(u,!0),l._parentRunId=rv.LangChainTracer.getTraceableRunTree()?.id??l._parentRunId}}for(let{contextVar:u,inheritable:S=!0,handlerClass:V,envVar:U}of(0,Mj._getConfigureHooks)()){let z=U&&(0,A9.getEnvironmentVariable)(U)==="true"&&V,D,k=u!==void 0?(0,Mj.getContextVariable)(u):void 0;k&&(0,E9.isBaseCallbackHandler)(k)?D=k:z&&(D=new V({})),D!==void 0&&(l||(l=new n),l.handlers.some(T=>T.name===D.name)||l.addHandler(D,S))}return(a||i)&&l&&(l.addTags(a??[]),l.addTags(i??[],!1)),(s||t)&&l&&(l.addMetadata(s??{}),l.addMetadata(t??{},!1)),l}};Oa.CallbackManager=Dd;function P9(n){return"name"in n?n:E9.BaseCallbackHandler.fromMethods(n)}Oa.ensureHandler=P9;var ov=class{constructor(e,r){Object.defineProperty(this,"groupName",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async getTraceGroupCallbackManager(e,r,a){let i=new rv.LangChainTracer(a),t=await(await Dd.configure([i]))?.handleChainStart({lc:1,type:"not_implemented",id:["langchain","callbacks","groups",e]},r??{});if(!t)throw new Error("Failed to create run group callback manager.");return t}async start(e){return this.runManager||(this.runManager=await this.getTraceGroupCallbackManager(this.groupName,e,this.options)),this.runManager.getChild()}async error(e){this.runManager&&(await this.runManager.handleChainError(e),this.runManager=void 0)}async end(e){this.runManager&&(await this.runManager.handleChainEnd(e??{}),this.runManager=void 0)}};Oa.TraceGroup=ov;function nie(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}async function iie(n,e,...r){let a=new ov(n.name,n),i=await a.start({...r});try{let s=await e(i,...r);return await a.end(nie(s,"output")),s}catch(s){throw await a.error(s),s}}Oa.traceAsGroup=iie});var Bj=te(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.AsyncLocalStorageProviderSingleton=Vf.MockAsyncLocalStorage=void 0;var sie=j8(),$f=Um(),oie=nc(),uv=class{getStore(){}run(e,r){return r()}enterWith(e){}};Vf.MockAsyncLocalStorage=uv;var uie=new uv,jj=Symbol.for("lc:child_config"),T9=class{getInstance(){return(0,$f.getGlobalAsyncLocalStorageInstance)()??uie}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[jj]}runWithConfig(e,r,a){let i=oie.CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),s=this.getInstance(),t=s.getStore(),o=i?.getParentRunId(),l=i?.handlers?.find(c=>c?.name==="langchain_tracer"),d;return l&&o?d=l.convertToRunTree(o):a||(d=new sie.RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),d&&(d.extra={...d.extra,[jj]:e}),t!==void 0&&t[$f._CONTEXT_VARIABLES_KEY]!==void 0&&(d===void 0&&(d={}),d[$f._CONTEXT_VARIABLES_KEY]=t[$f._CONTEXT_VARIABLES_KEY]),s.run(d,r)}initializeGlobalInstance(e){(0,$f.getGlobalAsyncLocalStorageInstance)()===void 0&&(0,$f.setGlobalAsyncLocalStorageInstance)(e)}},lie=new T9;Vf.AsyncLocalStorageProviderSingleton=lie});var Nd=te(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic._CONTEXT_VARIABLES_KEY=ic.MockAsyncLocalStorage=ic.AsyncLocalStorageProviderSingleton=void 0;var Lj=Bj();Object.defineProperty(ic,"AsyncLocalStorageProviderSingleton",{enumerable:!0,get:function(){return Lj.AsyncLocalStorageProviderSingleton}});Object.defineProperty(ic,"MockAsyncLocalStorage",{enumerable:!0,get:function(){return Lj.MockAsyncLocalStorage}});var cie=Um();Object.defineProperty(ic,"_CONTEXT_VARIABLES_KEY",{enumerable:!0,get:function(){return cie._CONTEXT_VARIABLES_KEY}})});var Md=te((JEe,qj)=>{qj.exports=Nd()});var Uj=te(O9=>{"use strict";Object.defineProperty(O9,"__esModule",{value:!0});O9.initializeAsyncLocalStorageSingleton=fie;var die=Md(),pie=require("node:async_hooks");function fie(){die.AsyncLocalStorageProviderSingleton.initializeGlobalInstance(new pie.AsyncLocalStorage)}});var ln=te(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.getSubgraphsSeenSet=na.RemoteException=na.UnreachableNodeError=na.MultipleSubgraphsError=na.InvalidUpdateError=na.EmptyChannelError=na.EmptyInputError=na.ParentCommand=na.NodeInterrupt=na.GraphInterrupt=na.GraphValueError=na.GraphRecursionError=na.GraphBubbleUp=na.BaseLangGraphError=void 0;na.isParentCommand=hie;na.isGraphBubbleUp=mie;na.isGraphInterrupt=gie;var _s=class extends Error{constructor(e,r){let a=e??"";r?.lc_error_code&&(a=`${a}

Troubleshooting URL: https://langchain-ai.github.io/langgraphjs/troubleshooting/errors/${r.lc_error_code}/
`),super(a),Object.defineProperty(this,"lc_error_code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_error_code=r?.lc_error_code}};na.BaseLangGraphError=_s;var Xm=class extends _s{get is_bubble_up(){return!0}};na.GraphBubbleUp=Xm;var F9=class extends _s{constructor(e,r){super(e,r),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}};na.GraphRecursionError=F9;var k9=class extends _s{constructor(e,r){super(e,r),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}};na.GraphValueError=k9;var Ym=class extends Xm{constructor(e,r){super(JSON.stringify(e,null,2),r),Object.defineProperty(this,"interrupts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}};na.GraphInterrupt=Ym;var lv=class extends Ym{constructor(e,r){super([{value:e,when:"during"}],r),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}};na.NodeInterrupt=lv;var cv=class extends Xm{constructor(e){super(),Object.defineProperty(this,"command",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};na.ParentCommand=cv;function hie(n){return n!==void 0&&n.name===cv.unminifiable_name}function mie(n){return n!==void 0&&n.is_bubble_up===!0}function gie(n){return n!==void 0&&[Ym.unminifiable_name,lv.unminifiable_name].includes(n.name)}var R9=class extends _s{constructor(e,r){super(e,r),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}};na.EmptyInputError=R9;var I9=class extends _s{constructor(e,r){super(e,r),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}};na.EmptyChannelError=I9;var D9=class extends _s{constructor(e,r){super(e,r),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}};na.InvalidUpdateError=D9;var N9=class extends _s{constructor(e,r){super(e,r),this.name="MultipleSubgraphError"}static get unminifiable_name(){return"MultipleSubgraphError"}};na.MultipleSubgraphsError=N9;var M9=class extends _s{constructor(e,r){super(e,r),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};na.UnreachableNodeError=M9;var j9=class extends _s{constructor(e,r){super(e,r),this.name="RemoteException"}static get unminifiable_name(){return"RemoteException"}};na.RemoteException=j9;var bie=()=>(globalThis[Symbol.for("LG_CHECKPOINT_SEEN_NS_SET")]===void 0&&(globalThis[Symbol.for("LG_CHECKPOINT_SEEN_NS_SET")]=new Set),globalThis[Symbol.for("LG_CHECKPOINT_SEEN_NS_SET")]);na.getSubgraphsSeenSet=bie});var B9=te(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.uuid5=zf.uuid6=void 0;var $j=(Xa(),fs(Tn));function vie(n){return(0,$j.v6)({clockseq:n})}zf.uuid6=vie;function yie(n,e){let r=e.replace(/-/g,"").match(/.{2}/g).map(a=>parseInt(a,16));return(0,$j.v5)(n,new Uint8Array(r))}zf.uuid5=yie});var dv=te(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.RESUME=xs.INTERRUPT=xs.SCHEDULED=xs.ERROR=xs.TASKS=void 0;xs.TASKS="__pregel_tasks";xs.ERROR="__error__";xs.SCHEDULED="__scheduled__";xs.INTERRUPT="__interrupt__";xs.RESUME="__resume__"});var Vj=te(pv=>{"use strict";Object.defineProperty(pv,"__esModule",{value:!0});pv.optionalImportEntrypoints=void 0;pv.optionalImportEntrypoints=[]});var Wj=te(zj=>{"use strict";Object.defineProperty(zj,"__esModule",{value:!0})});var Gj=te(fv=>{"use strict";Object.defineProperty(fv,"__esModule",{value:!0});fv.insecureHash=void 0;var _ie=typeof window=="object"?window:{},Ir="0123456789abcdef".split(""),xie=[-2147483648,8388608,32768,128],mo=[24,16,8,0],bn=[];function go(n){n?(bn[0]=bn[16]=bn[1]=bn[2]=bn[3]=bn[4]=bn[5]=bn[6]=bn[7]=bn[8]=bn[9]=bn[10]=bn[11]=bn[12]=bn[13]=bn[14]=bn[15]=0,this.blocks=bn):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}go.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===_ie.ArrayBuffer&&(n=new Uint8Array(n));for(var r,a=0,i,s=n.length||0,t=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),e)for(i=this.start;a<s&&i<64;++a)t[i>>2]|=n[a]<<mo[i++&3];else for(i=this.start;a<s&&i<64;++a)r=n.charCodeAt(a),r<128?t[i>>2]|=r<<mo[i++&3]:r<2048?(t[i>>2]|=(192|r>>6)<<mo[i++&3],t[i>>2]|=(128|r&63)<<mo[i++&3]):r<55296||r>=57344?(t[i>>2]|=(224|r>>12)<<mo[i++&3],t[i>>2]|=(128|r>>6&63)<<mo[i++&3],t[i>>2]|=(128|r&63)<<mo[i++&3]):(r=65536+((r&1023)<<10|n.charCodeAt(++a)&1023),t[i>>2]|=(240|r>>18)<<mo[i++&3],t[i>>2]|=(128|r>>12&63)<<mo[i++&3],t[i>>2]|=(128|r>>6&63)<<mo[i++&3],t[i>>2]|=(128|r&63)<<mo[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=t[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};go.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=xie[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};go.prototype.hash=function(){var n=this.h0,e=this.h1,r=this.h2,a=this.h3,i=this.h4,s,t,o,l=this.blocks;for(t=16;t<80;++t)o=l[t-3]^l[t-8]^l[t-14]^l[t-16],l[t]=o<<1|o>>>31;for(t=0;t<20;t+=5)s=e&r|~e&a,o=n<<5|n>>>27,i=o+s+i+1518500249+l[t]<<0,e=e<<30|e>>>2,s=n&e|~n&r,o=i<<5|i>>>27,a=o+s+a+1518500249+l[t+1]<<0,n=n<<30|n>>>2,s=i&n|~i&e,o=a<<5|a>>>27,r=o+s+r+1518500249+l[t+2]<<0,i=i<<30|i>>>2,s=a&i|~a&n,o=r<<5|r>>>27,e=o+s+e+1518500249+l[t+3]<<0,a=a<<30|a>>>2,s=r&a|~r&i,o=e<<5|e>>>27,n=o+s+n+1518500249+l[t+4]<<0,r=r<<30|r>>>2;for(;t<40;t+=5)s=e^r^a,o=n<<5|n>>>27,i=o+s+i+1859775393+l[t]<<0,e=e<<30|e>>>2,s=n^e^r,o=i<<5|i>>>27,a=o+s+a+1859775393+l[t+1]<<0,n=n<<30|n>>>2,s=i^n^e,o=a<<5|a>>>27,r=o+s+r+1859775393+l[t+2]<<0,i=i<<30|i>>>2,s=a^i^n,o=r<<5|r>>>27,e=o+s+e+1859775393+l[t+3]<<0,a=a<<30|a>>>2,s=r^a^i,o=e<<5|e>>>27,n=o+s+n+1859775393+l[t+4]<<0,r=r<<30|r>>>2;for(;t<60;t+=5)s=e&r|e&a|r&a,o=n<<5|n>>>27,i=o+s+i-1894007588+l[t]<<0,e=e<<30|e>>>2,s=n&e|n&r|e&r,o=i<<5|i>>>27,a=o+s+a-1894007588+l[t+1]<<0,n=n<<30|n>>>2,s=i&n|i&e|n&e,o=a<<5|a>>>27,r=o+s+r-1894007588+l[t+2]<<0,i=i<<30|i>>>2,s=a&i|a&n|i&n,o=r<<5|r>>>27,e=o+s+e-1894007588+l[t+3]<<0,a=a<<30|a>>>2,s=r&a|r&i|a&i,o=e<<5|e>>>27,n=o+s+n-1894007588+l[t+4]<<0,r=r<<30|r>>>2;for(;t<80;t+=5)s=e^r^a,o=n<<5|n>>>27,i=o+s+i-899497514+l[t]<<0,e=e<<30|e>>>2,s=n^e^r,o=i<<5|i>>>27,a=o+s+a-899497514+l[t+1]<<0,n=n<<30|n>>>2,s=i^n^e,o=a<<5|a>>>27,r=o+s+r-899497514+l[t+2]<<0,i=i<<30|i>>>2,s=a^i^n,o=r<<5|r>>>27,e=o+s+e-899497514+l[t+3]<<0,a=a<<30|a>>>2,s=r^a^i,o=e<<5|e>>>27,n=o+s+n-899497514+l[t+4]<<0,r=r<<30|r>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+a<<0,this.h4=this.h4+i<<0};go.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,r=this.h2,a=this.h3,i=this.h4;return Ir[n>>28&15]+Ir[n>>24&15]+Ir[n>>20&15]+Ir[n>>16&15]+Ir[n>>12&15]+Ir[n>>8&15]+Ir[n>>4&15]+Ir[n&15]+Ir[e>>28&15]+Ir[e>>24&15]+Ir[e>>20&15]+Ir[e>>16&15]+Ir[e>>12&15]+Ir[e>>8&15]+Ir[e>>4&15]+Ir[e&15]+Ir[r>>28&15]+Ir[r>>24&15]+Ir[r>>20&15]+Ir[r>>16&15]+Ir[r>>12&15]+Ir[r>>8&15]+Ir[r>>4&15]+Ir[r&15]+Ir[a>>28&15]+Ir[a>>24&15]+Ir[a>>20&15]+Ir[a>>16&15]+Ir[a>>12&15]+Ir[a>>8&15]+Ir[a>>4&15]+Ir[a&15]+Ir[i>>28&15]+Ir[i>>24&15]+Ir[i>>20&15]+Ir[i>>16&15]+Ir[i>>12&15]+Ir[i>>8&15]+Ir[i>>4&15]+Ir[i&15]};go.prototype.toString=go.prototype.hex;go.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,r=this.h2,a=this.h3,i=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,a>>24&255,a>>16&255,a>>8&255,a&255,i>>24&255,i>>16&255,i>>8&255,i&255]};go.prototype.array=go.prototype.digest;go.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};var wie=n=>new go(!0).update(n).hex();fv.insecureHash=wie});var L9=te(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0});hv.insecureHash=void 0;var Sie=Gj();Object.defineProperty(hv,"insecureHash",{enumerable:!0,get:function(){return Sie.insecureHash}})});var U9=te(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.InMemoryCache=wi.BaseCache=wi.serializeGeneration=wi.deserializeStoredGeneration=wi.getCacheKey=void 0;var Cie=L9(),Aie=bl(),Eie=(...n)=>(0,Cie.insecureHash)(n.join("_"));wi.getCacheKey=Eie;function Pie(n){return n.message!==void 0?{text:n.text,message:(0,Aie.mapStoredMessageToChatMessage)(n.message)}:{text:n.text}}wi.deserializeStoredGeneration=Pie;function Tie(n){let e={text:n.text};return n.message!==void 0&&(e.message=n.message.toDict()),e}wi.serializeGeneration=Tie;var mv=class{};wi.BaseCache=mv;var Oie=new Map,q9=class n extends mv{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get((0,wi.getCacheKey)(e,r))??null)}async update(e,r,a){this.cache.set((0,wi.getCacheKey)(e,r),a)}static global(){return new n(Oie)}};wi.InMemoryCache=q9});var Qm=te(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.getParsedType=Sa.ZodParsedType=Sa.objectUtil=Sa.util=void 0;var $9;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function r(i){throw new Error}n.assertNever=r,n.arrayToEnum=i=>{let s={};for(let t of i)s[t]=t;return s},n.getValidEnumValues=i=>{let s=n.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),t={};for(let o of s)t[o]=i[o];return n.objectValues(t)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&s.push(t);return s},n.find=(i,s)=>{for(let t of i)if(s(t))return t},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function a(i,s=" | "){return i.map(t=>typeof t=="string"?`'${t}'`:t).join(s)}n.joinValues=a,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})($9||(Sa.util=$9={}));var Hj;(function(n){n.mergeShapes=(e,r)=>({...e,...r})})(Hj||(Sa.objectUtil=Hj={}));Sa.ZodParsedType=$9.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var Fie=n=>{switch(typeof n){case"undefined":return Sa.ZodParsedType.undefined;case"string":return Sa.ZodParsedType.string;case"number":return Number.isNaN(n)?Sa.ZodParsedType.nan:Sa.ZodParsedType.number;case"boolean":return Sa.ZodParsedType.boolean;case"function":return Sa.ZodParsedType.function;case"bigint":return Sa.ZodParsedType.bigint;case"symbol":return Sa.ZodParsedType.symbol;case"object":return Array.isArray(n)?Sa.ZodParsedType.array:n===null?Sa.ZodParsedType.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Sa.ZodParsedType.promise:typeof Map<"u"&&n instanceof Map?Sa.ZodParsedType.map:typeof Set<"u"&&n instanceof Set?Sa.ZodParsedType.set:typeof Date<"u"&&n instanceof Date?Sa.ZodParsedType.date:Sa.ZodParsedType.object;default:return Sa.ZodParsedType.unknown}};Sa.getParsedType=Fie});var gv=te(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.ZodError=sc.quotelessJson=sc.ZodIssueCode=void 0;var Kj=Qm();sc.ZodIssueCode=Kj.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var kie=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");sc.quotelessJson=kie;var e1=class n extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},a={_errors:[]},i=s=>{for(let t of s.issues)if(t.code==="invalid_union")t.unionErrors.map(i);else if(t.code==="invalid_return_type")i(t.returnTypeError);else if(t.code==="invalid_arguments")i(t.argumentsError);else if(t.path.length===0)a._errors.push(r(t));else{let o=a,l=0;for(;l<t.path.length;){let d=t.path[l];l===t.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(t))):o[d]=o[d]||{_errors:[]},o=o[d],l++}}};return i(this),a}static assert(e){if(!(e instanceof n))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kj.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},a=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):a.push(e(i));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};sc.ZodError=e1;e1.create=n=>new e1(n)});var z9=te(V9=>{"use strict";Object.defineProperty(V9,"__esModule",{value:!0});var Gn=gv(),jd=Qm(),Rie=(n,e)=>{let r;switch(n.code){case Gn.ZodIssueCode.invalid_type:n.received===jd.ZodParsedType.undefined?r="Required":r=`Expected ${n.expected}, received ${n.received}`;break;case Gn.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(n.expected,jd.util.jsonStringifyReplacer)}`;break;case Gn.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${jd.util.joinValues(n.keys,", ")}`;break;case Gn.ZodIssueCode.invalid_union:r="Invalid input";break;case Gn.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${jd.util.joinValues(n.options)}`;break;case Gn.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${jd.util.joinValues(n.options)}, received '${n.received}'`;break;case Gn.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case Gn.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case Gn.ZodIssueCode.invalid_date:r="Invalid date";break;case Gn.ZodIssueCode.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(r=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?r=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?r=`Invalid input: must end with "${n.validation.endsWith}"`:jd.util.assertNever(n.validation):n.validation!=="regex"?r=`Invalid ${n.validation}`:r="Invalid";break;case Gn.ZodIssueCode.too_small:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:r="Invalid input";break;case Gn.ZodIssueCode.too_big:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?r=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:r="Invalid input";break;case Gn.ZodIssueCode.custom:r="Invalid input";break;case Gn.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case Gn.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${n.multipleOf}`;break;case Gn.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,jd.util.assertNever(n)}return{message:r}};V9.default=Rie});var bv=te(oc=>{"use strict";var Iie=oc&&oc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(oc,"__esModule",{value:!0});oc.defaultErrorMap=void 0;oc.setErrorMap=Die;oc.getErrorMap=Nie;var Zj=Iie(z9());oc.defaultErrorMap=Zj.default;var Jj=Zj.default;function Die(n){Jj=n}function Nie(){return Jj}});var G9=te(da=>{"use strict";var Mie=da&&da.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(da,"__esModule",{value:!0});da.isAsync=da.isValid=da.isDirty=da.isAborted=da.OK=da.DIRTY=da.INVALID=da.ParseStatus=da.EMPTY_PATH=da.makeIssue=void 0;da.addIssueToContext=Lie;var jie=bv(),Xj=Mie(z9()),Bie=n=>{let{data:e,path:r,errorMaps:a,issueData:i}=n,s=[...r,...i.path||[]],t={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="",l=a.filter(d=>!!d).slice().reverse();for(let d of l)o=d(t,{data:e,defaultError:o}).message;return{...i,path:s,message:o}};da.makeIssue=Bie;da.EMPTY_PATH=[];function Lie(n,e){let r=(0,jie.getErrorMap)(),a=(0,da.makeIssue)({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,r,r===Xj.default?void 0:Xj.default].filter(i=>!!i)});n.common.issues.push(a)}var W9=class n{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let a=[];for(let i of r){if(i.status==="aborted")return da.INVALID;i.status==="dirty"&&e.dirty(),a.push(i.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){let a=[];for(let i of r){let s=await i.key,t=await i.value;a.push({key:s,value:t})}return n.mergeObjectSync(e,a)}static mergeObjectSync(e,r){let a={};for(let i of r){let{key:s,value:t}=i;if(s.status==="aborted"||t.status==="aborted")return da.INVALID;s.status==="dirty"&&e.dirty(),t.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof t.value<"u"||i.alwaysSet)&&(a[s.value]=t.value)}return{status:e.value,value:a}}};da.ParseStatus=W9;da.INVALID=Object.freeze({status:"aborted"});var qie=n=>({status:"dirty",value:n});da.DIRTY=qie;var Uie=n=>({status:"valid",value:n});da.OK=Uie;var $ie=n=>n.status==="aborted";da.isAborted=$ie;var Vie=n=>n.status==="dirty";da.isDirty=Vie;var zie=n=>n.status==="valid";da.isValid=zie;var Wie=n=>typeof Promise<"u"&&n instanceof Promise;da.isAsync=Wie});var Qj=te(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0})});var tB=te(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});vv.errorUtil=void 0;var eB;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(eB||(vv.errorUtil=eB={}))});var fB=te(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.discriminatedUnion=Me.date=Me.boolean=Me.bigint=Me.array=Me.any=Me.coerce=Me.ZodFirstPartyTypeKind=Me.late=Me.ZodSchema=Me.Schema=Me.ZodReadonly=Me.ZodPipeline=Me.ZodBranded=Me.BRAND=Me.ZodNaN=Me.ZodCatch=Me.ZodDefault=Me.ZodNullable=Me.ZodOptional=Me.ZodTransformer=Me.ZodEffects=Me.ZodPromise=Me.ZodNativeEnum=Me.ZodEnum=Me.ZodLiteral=Me.ZodLazy=Me.ZodFunction=Me.ZodSet=Me.ZodMap=Me.ZodRecord=Me.ZodTuple=Me.ZodIntersection=Me.ZodDiscriminatedUnion=Me.ZodUnion=Me.ZodObject=Me.ZodArray=Me.ZodVoid=Me.ZodNever=Me.ZodUnknown=Me.ZodAny=Me.ZodNull=Me.ZodUndefined=Me.ZodSymbol=Me.ZodDate=Me.ZodBoolean=Me.ZodBigInt=Me.ZodNumber=Me.ZodString=Me.ZodType=void 0;Me.NEVER=Me.void=Me.unknown=Me.union=Me.undefined=Me.tuple=Me.transformer=Me.symbol=Me.string=Me.strictObject=Me.set=Me.record=Me.promise=Me.preprocess=Me.pipeline=Me.ostring=Me.optional=Me.onumber=Me.oboolean=Me.object=Me.number=Me.nullable=Me.null=Me.never=Me.nativeEnum=Me.nan=Me.map=Me.literal=Me.lazy=Me.intersection=Me.instanceof=Me.function=Me.enum=Me.effect=void 0;Me.datetimeRegex=sB;Me.custom=uB;var yt=gv(),yv=bv(),$t=tB(),je=G9(),Ct=Qm(),Ss=class{constructor(e,r,a,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=a,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},rB=(n,e)=>{if((0,je.isValid)(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new yt.ZodError(n.common.issues);return this._error=r,this._error}}};function xr(n){if(!n)return{};let{errorMap:e,invalid_type_error:r,required_error:a,description:i}=n;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(t,o)=>{let{message:l}=n;return t.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??a??o.defaultError}:t.code!=="invalid_type"?{message:o.defaultError}:{message:l??r??o.defaultError}},description:i}}var wr=class{get description(){return this._def.description}_getType(e){return(0,Ct.getParsedType)(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:(0,Ct.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new je.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,Ct.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if((0,je.isAsync)(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let a=this.safeParse(e,r);if(a.success)return a.data;throw a.error}safeParse(e,r){let a={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,Ct.getParsedType)(e)},i=this._parseSync({data:e,path:a.path,parent:a});return rB(a,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,Ct.getParsedType)(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:r});return(0,je.isValid)(a)?{value:a.value}:{issues:r.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>(0,je.isValid)(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,r){let a=await this.safeParseAsync(e,r);if(a.success)return a.data;throw a.error}async safeParseAsync(e,r){let a={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,Ct.getParsedType)(e)},i=this._parse({data:e,path:a.path,parent:a}),s=await((0,je.isAsync)(i)?i:Promise.resolve(i));return rB(a,s)}refine(e,r){let a=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{let t=e(i),o=()=>s.addIssue({code:yt.ZodIssueCode.custom,...a(i)});return typeof Promise<"u"&&t instanceof Promise?t.then(l=>l?!0:(o(),!1)):t?!0:(o(),!1)})}refinement(e,r){return this._refinement((a,i)=>e(a)?!0:(i.addIssue(typeof r=="function"?r(a,i):r),!1))}_refinement(e){return new Yi({schema:this,typeName:ar.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ws.create(this,this._def)}nullable(){return eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _l.create(this)}promise(){return cc.create(this,this._def)}or(e){return zd.create([this,e],this._def)}and(e){return Wd.create(this,e,this._def)}transform(e){return new Yi({...xr(this._def),schema:this,typeName:ar.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Jd({...xr(this._def),innerType:this,defaultValue:r,typeName:ar.ZodDefault})}brand(){return new t1({typeName:ar.ZodBranded,type:this,...xr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Xd({...xr(this._def),innerType:this,catchValue:r,typeName:ar.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return r1.create(this,e)}readonly(){return Yd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};Me.ZodType=wr;Me.Schema=wr;Me.ZodSchema=wr;var Gie=/^c[^\s-]{8,}$/i,Hie=/^[0-9a-z]+$/,Kie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Zie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jie=/^[a-z0-9_-]{21}$/i,Xie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Yie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Qie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ese="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",H9,tse=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rse=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ase=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nse=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ise=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sse=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ose=new RegExp(`^${nB}$`);function iB(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);let r=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function use(n){return new RegExp(`^${iB(n)}$`)}function sB(n){let e=`${nB}T${iB(n)}`,r=[];return r.push(n.local?"Z?":"Z"),n.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function lse(n,e){return!!((e==="v4"||!e)&&tse.test(n)||(e==="v6"||!e)&&ase.test(n))}function cse(n,e){if(!Xie.test(n))return!1;try{let[r]=n.split("."),a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(a));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function dse(n,e){return!!((e==="v4"||!e)&&rse.test(n)||(e==="v6"||!e)&&nse.test(n))}var uc=class n extends wr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ct.ZodParsedType.string){let s=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(s,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.string,received:s.parsedType}),je.INVALID}let a=new je.ParseStatus,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="length"){let t=e.data.length>s.value,o=e.data.length<s.value;(t||o)&&(i=this._getOrReturnCtx(e,i),t?(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),a.dirty())}else if(s.kind==="email")Qie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"email",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="emoji")H9||(H9=new RegExp(ese,"u")),H9.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"emoji",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="uuid")Zie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"uuid",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="nanoid")Jie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"nanoid",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid")Gie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"cuid",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid2")Hie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"cuid2",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="ulid")Kie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"ulid",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"url",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"regex",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),a.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),a.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),a.dirty()):s.kind==="datetime"?sB(s).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),a.dirty()):s.kind==="date"?ose.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:"date",message:s.message}),a.dirty()):s.kind==="time"?use(s).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.invalid_string,validation:"time",message:s.message}),a.dirty()):s.kind==="duration"?Yie.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"duration",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):s.kind==="ip"?lse(e.data,s.version)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"ip",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):s.kind==="jwt"?cse(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"jwt",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):s.kind==="cidr"?dse(e.data,s.version)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"cidr",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):s.kind==="base64"?ise.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"base64",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):s.kind==="base64url"?sse.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{validation:"base64url",code:yt.ZodIssueCode.invalid_string,message:s.message}),a.dirty()):Ct.util.assertNever(s);return{status:a.value,value:e.data}}_regex(e,r,a){return this.refinement(i=>e.test(i),{validation:r,code:yt.ZodIssueCode.invalid_string,...$t.errorUtil.errToObj(a)})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$t.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$t.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$t.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$t.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...$t.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$t.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$t.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$t.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...$t.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...$t.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...$t.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$t.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...$t.errorUtil.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...$t.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...$t.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...$t.errorUtil.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...$t.errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...$t.errorUtil.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...$t.errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...$t.errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...$t.errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...$t.errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...$t.errorUtil.errToObj(r)})}nonempty(e){return this.min(1,$t.errorUtil.errToObj(e))}trim(){return new n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Me.ZodString=uc;uc.create=n=>new uc({checks:[],typeName:ar.ZodString,coerce:n?.coerce??!1,...xr(n)});function pse(n,e){let r=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,i=r>a?r:a,s=Number.parseInt(n.toFixed(i).replace(".","")),t=Number.parseInt(e.toFixed(i).replace(".",""));return s%t/10**i}var Bd=class n extends wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ct.ZodParsedType.number){let s=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(s,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.number,received:s.parsedType}),je.INVALID}let a,i=new je.ParseStatus;for(let s of this._def.checks)s.kind==="int"?Ct.util.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?pse(e.data,s.value)!==0&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.not_finite,message:s.message}),i.dirty()):Ct.util.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$t.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$t.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$t.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$t.errorUtil.toString(r))}setLimit(e,r,a,i){return new n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:$t.errorUtil.toString(i)}]})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$t.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$t.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$t.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$t.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$t.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$t.errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:$t.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$t.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$t.errorUtil.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ct.util.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Me.ZodNumber=Bd;Bd.create=n=>new Bd({checks:[],typeName:ar.ZodNumber,coerce:n?.coerce||!1,...xr(n)});var Ld=class n extends wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ct.ZodParsedType.bigint)return this._getInvalidInput(e);let a,i=new je.ParseStatus;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ct.util.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.bigint,received:r.parsedType}),je.INVALID}gte(e,r){return this.setLimit("min",e,!0,$t.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$t.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$t.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$t.errorUtil.toString(r))}setLimit(e,r,a,i){return new n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:$t.errorUtil.toString(i)}]})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$t.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$t.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$t.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$t.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$t.errorUtil.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Me.ZodBigInt=Ld;Ld.create=n=>new Ld({checks:[],typeName:ar.ZodBigInt,coerce:n?.coerce??!1,...xr(n)});var qd=class extends wr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ct.ZodParsedType.boolean){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.boolean,received:a.parsedType}),je.INVALID}return(0,je.OK)(e.data)}};Me.ZodBoolean=qd;qd.create=n=>new qd({typeName:ar.ZodBoolean,coerce:n?.coerce||!1,...xr(n)});var Ud=class n extends wr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ct.ZodParsedType.date){let s=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(s,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.date,received:s.parsedType}),je.INVALID}if(Number.isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(s,{code:yt.ZodIssueCode.invalid_date}),je.INVALID}let a=new je.ParseStatus,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),a.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),(0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),a.dirty()):Ct.util.assertNever(s);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:$t.errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:$t.errorUtil.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Me.ZodDate=Ud;Ud.create=n=>new Ud({checks:[],coerce:n?.coerce||!1,typeName:ar.ZodDate,...xr(n)});var Gf=class extends wr{_parse(e){if(this._getType(e)!==Ct.ZodParsedType.symbol){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.symbol,received:a.parsedType}),je.INVALID}return(0,je.OK)(e.data)}};Me.ZodSymbol=Gf;Gf.create=n=>new Gf({typeName:ar.ZodSymbol,...xr(n)});var $d=class extends wr{_parse(e){if(this._getType(e)!==Ct.ZodParsedType.undefined){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.undefined,received:a.parsedType}),je.INVALID}return(0,je.OK)(e.data)}};Me.ZodUndefined=$d;$d.create=n=>new $d({typeName:ar.ZodUndefined,...xr(n)});var Vd=class extends wr{_parse(e){if(this._getType(e)!==Ct.ZodParsedType.null){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.null,received:a.parsedType}),je.INVALID}return(0,je.OK)(e.data)}};Me.ZodNull=Vd;Vd.create=n=>new Vd({typeName:ar.ZodNull,...xr(n)});var lc=class extends wr{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,je.OK)(e.data)}};Me.ZodAny=lc;lc.create=n=>new lc({typeName:ar.ZodAny,...xr(n)});var yl=class extends wr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,je.OK)(e.data)}};Me.ZodUnknown=yl;yl.create=n=>new yl({typeName:ar.ZodUnknown,...xr(n)});var bo=class extends wr{_parse(e){let r=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.never,received:r.parsedType}),je.INVALID}};Me.ZodNever=bo;bo.create=n=>new bo({typeName:ar.ZodNever,...xr(n)});var Hf=class extends wr{_parse(e){if(this._getType(e)!==Ct.ZodParsedType.undefined){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.void,received:a.parsedType}),je.INVALID}return(0,je.OK)(e.data)}};Me.ZodVoid=Hf;Hf.create=n=>new Hf({typeName:ar.ZodVoid,...xr(n)});var _l=class n extends wr{_parse(e){let{ctx:r,status:a}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ct.ZodParsedType.array)return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.array,received:r.parsedType}),je.INVALID;if(i.exactLength!==null){let t=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(t||o)&&((0,je.addIssueToContext)(r,{code:t?yt.ZodIssueCode.too_big:yt.ZodIssueCode.too_small,minimum:o?i.exactLength.value:void 0,maximum:t?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),a.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&((0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),a.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&((0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((t,o)=>i.type._parseAsync(new Ss(r,t,r.path,o)))).then(t=>je.ParseStatus.mergeArray(a,t));let s=[...r.data].map((t,o)=>i.type._parseSync(new Ss(r,t,r.path,o)));return je.ParseStatus.mergeArray(a,s)}get element(){return this._def.type}min(e,r){return new n({...this._def,minLength:{value:e,message:$t.errorUtil.toString(r)}})}max(e,r){return new n({...this._def,maxLength:{value:e,message:$t.errorUtil.toString(r)}})}length(e,r){return new n({...this._def,exactLength:{value:e,message:$t.errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}};Me.ZodArray=_l;_l.create=(n,e)=>new _l({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ar.ZodArray,...xr(e)});function Wf(n){if(n instanceof Si){let e={};for(let r in n.shape){let a=n.shape[r];e[r]=ws.create(Wf(a))}return new Si({...n._def,shape:()=>e})}else return n instanceof _l?new _l({...n._def,type:Wf(n.element)}):n instanceof ws?ws.create(Wf(n.unwrap())):n instanceof eu?eu.create(Wf(n.unwrap())):n instanceof Qo?Qo.create(n.items.map(e=>Wf(e))):n}var Si=class n extends wr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ct.util.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Ct.ZodParsedType.object){let d=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(d,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.object,received:d.parsedType}),je.INVALID}let{status:a,ctx:i}=this._processInputParams(e),{shape:s,keys:t}=this._getCached(),o=[];if(!(this._def.catchall instanceof bo&&this._def.unknownKeys==="strip"))for(let d in i.data)t.includes(d)||o.push(d);let l=[];for(let d of t){let c=s[d],y=i.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new Ss(i,y,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof bo){let d=this._def.unknownKeys;if(d==="passthrough")for(let c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(d==="strict")o.length>0&&((0,je.addIssueToContext)(i,{code:yt.ZodIssueCode.unrecognized_keys,keys:o}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let c of o){let y=i.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new Ss(i,y,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let d=[];for(let c of l){let y=await c.key,u=await c.value;d.push({key:y,value:u,alwaysSet:c.alwaysSet})}return d}).then(d=>je.ParseStatus.mergeObjectSync(a,d)):je.ParseStatus.mergeObjectSync(a,l)}get shape(){return this._def.shape()}strict(e){return $t.errorUtil.errToObj,new n({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{let i=this._def.errorMap?.(r,a).message??a.defaultError;return r.code==="unrecognized_keys"?{message:$t.errorUtil.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new n({...this._def,unknownKeys:"strip"})}passthrough(){return new n({...this._def,unknownKeys:"passthrough"})}extend(e){return new n({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new n({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ar.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new n({...this._def,catchall:e})}pick(e){let r={};for(let a of Ct.util.objectKeys(e))e[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new n({...this._def,shape:()=>r})}omit(e){let r={};for(let a of Ct.util.objectKeys(this.shape))e[a]||(r[a]=this.shape[a]);return new n({...this._def,shape:()=>r})}deepPartial(){return Wf(this)}partial(e){let r={};for(let a of Ct.util.objectKeys(this.shape)){let i=this.shape[a];e&&!e[a]?r[a]=i:r[a]=i.optional()}return new n({...this._def,shape:()=>r})}required(e){let r={};for(let a of Ct.util.objectKeys(this.shape))if(e&&!e[a])r[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof ws;)s=s._def.innerType;r[a]=s}return new n({...this._def,shape:()=>r})}keyof(){return oB(Ct.util.objectKeys(this.shape))}};Me.ZodObject=Si;Si.create=(n,e)=>new Si({shape:()=>n,unknownKeys:"strip",catchall:bo.create(),typeName:ar.ZodObject,...xr(e)});Si.strictCreate=(n,e)=>new Si({shape:()=>n,unknownKeys:"strict",catchall:bo.create(),typeName:ar.ZodObject,...xr(e)});Si.lazycreate=(n,e)=>new Si({shape:n,unknownKeys:"strip",catchall:bo.create(),typeName:ar.ZodObject,...xr(e)});var zd=class extends wr{_parse(e){let{ctx:r}=this._processInputParams(e),a=this._def.options;function i(s){for(let o of s)if(o.result.status==="valid")return o.result;for(let o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let t=s.map(o=>new yt.ZodError(o.ctx.common.issues));return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_union,unionErrors:t}),je.INVALID}if(r.common.async)return Promise.all(a.map(async s=>{let t={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(i);{let s,t=[];for(let l of a){let d={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:d});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:d}),d.common.issues.length&&t.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let o=t.map(l=>new yt.ZodError(l));return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_union,unionErrors:o}),je.INVALID}}get options(){return this._def.options}};Me.ZodUnion=zd;zd.create=(n,e)=>new zd({options:n,typeName:ar.ZodUnion,...xr(e)});var vl=n=>n instanceof Gd?vl(n.schema):n instanceof Yi?vl(n.innerType()):n instanceof Hd?[n.value]:n instanceof Kd?n.options:n instanceof Zd?Ct.util.objectValues(n.enum):n instanceof Jd?vl(n._def.innerType):n instanceof $d?[void 0]:n instanceof Vd?[null]:n instanceof ws?[void 0,...vl(n.unwrap())]:n instanceof eu?[null,...vl(n.unwrap())]:n instanceof t1||n instanceof Yd?vl(n.unwrap()):n instanceof Xd?vl(n._def.innerType):[],_v=class n extends wr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.ZodParsedType.object)return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.object,received:r.parsedType}),je.INVALID;let a=this.discriminator,i=r.data[a],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):((0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),je.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,a){let i=new Map;for(let s of r){let t=vl(s.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of t){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new n({typeName:ar.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...xr(a)})}};Me.ZodDiscriminatedUnion=_v;function K9(n,e){let r=(0,Ct.getParsedType)(n),a=(0,Ct.getParsedType)(e);if(n===e)return{valid:!0,data:n};if(r===Ct.ZodParsedType.object&&a===Ct.ZodParsedType.object){let i=Ct.util.objectKeys(e),s=Ct.util.objectKeys(n).filter(o=>i.indexOf(o)!==-1),t={...n,...e};for(let o of s){let l=K9(n[o],e[o]);if(!l.valid)return{valid:!1};t[o]=l.data}return{valid:!0,data:t}}else if(r===Ct.ZodParsedType.array&&a===Ct.ZodParsedType.array){if(n.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<n.length;s++){let t=n[s],o=e[s],l=K9(t,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Ct.ZodParsedType.date&&a===Ct.ZodParsedType.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}var Wd=class extends wr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e),i=(s,t)=>{if((0,je.isAborted)(s)||(0,je.isAborted)(t))return je.INVALID;let o=K9(s.value,t.value);return o.valid?(((0,je.isDirty)(s)||(0,je.isDirty)(t))&&r.dirty(),{status:r.value,value:o.data}):((0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_intersection_types}),je.INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([s,t])=>i(s,t)):i(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}};Me.ZodIntersection=Wd;Wd.create=(n,e,r)=>new Wd({left:n,right:e,typeName:ar.ZodIntersection,...xr(r)});var Qo=class n extends wr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ct.ZodParsedType.array)return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.array,received:a.parsedType}),je.INVALID;if(a.data.length<this._def.items.length)return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),je.INVALID;!this._def.rest&&a.data.length>this._def.items.length&&((0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...a.data].map((t,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new Ss(a,t,a.path,o)):null}).filter(t=>!!t);return a.common.async?Promise.all(s).then(t=>je.ParseStatus.mergeArray(r,t)):je.ParseStatus.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new n({...this._def,rest:e})}};Me.ZodTuple=Qo;Qo.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qo({items:n,typeName:ar.ZodTuple,rest:null,...xr(e)})};var xv=class n extends wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ct.ZodParsedType.object)return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.object,received:a.parsedType}),je.INVALID;let i=[],s=this._def.keyType,t=this._def.valueType;for(let o in a.data)i.push({key:s._parse(new Ss(a,o,a.path,o)),value:t._parse(new Ss(a,a.data[o],a.path,o)),alwaysSet:o in a.data});return a.common.async?je.ParseStatus.mergeObjectAsync(r,i):je.ParseStatus.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,a){return r instanceof wr?new n({keyType:e,valueType:r,typeName:ar.ZodRecord,...xr(a)}):new n({keyType:uc.create(),valueType:e,typeName:ar.ZodRecord,...xr(r)})}};Me.ZodRecord=xv;var Kf=class extends wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ct.ZodParsedType.map)return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.map,received:a.parsedType}),je.INVALID;let i=this._def.keyType,s=this._def.valueType,t=[...a.data.entries()].map(([o,l],d)=>({key:i._parse(new Ss(a,o,a.path,[d,"key"])),value:s._parse(new Ss(a,l,a.path,[d,"value"]))}));if(a.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of t){let d=await l.key,c=await l.value;if(d.status==="aborted"||c.status==="aborted")return je.INVALID;(d.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(d.value,c.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let l of t){let d=l.key,c=l.value;if(d.status==="aborted"||c.status==="aborted")return je.INVALID;(d.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(d.value,c.value)}return{status:r.value,value:o}}}};Me.ZodMap=Kf;Kf.create=(n,e,r)=>new Kf({valueType:e,keyType:n,typeName:ar.ZodMap,...xr(r)});var Zf=class n extends wr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ct.ZodParsedType.set)return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.set,received:a.parsedType}),je.INVALID;let i=this._def;i.minSize!==null&&a.data.size<i.minSize.value&&((0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&a.data.size>i.maxSize.value&&((0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let s=this._def.valueType;function t(l){let d=new Set;for(let c of l){if(c.status==="aborted")return je.INVALID;c.status==="dirty"&&r.dirty(),d.add(c.value)}return{status:r.value,value:d}}let o=[...a.data.values()].map((l,d)=>s._parse(new Ss(a,l,a.path,d)));return a.common.async?Promise.all(o).then(l=>t(l)):t(o)}min(e,r){return new n({...this._def,minSize:{value:e,message:$t.errorUtil.toString(r)}})}max(e,r){return new n({...this._def,maxSize:{value:e,message:$t.errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Me.ZodSet=Zf;Zf.create=(n,e)=>new Zf({valueType:n,minSize:null,maxSize:null,typeName:ar.ZodSet,...xr(e)});var wv=class n extends wr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.ZodParsedType.function)return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.function,received:r.parsedType}),je.INVALID;function a(o,l){return(0,je.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,yv.getErrorMap)(),yv.defaultErrorMap].filter(d=>!!d),issueData:{code:yt.ZodIssueCode.invalid_arguments,argumentsError:l}})}function i(o,l){return(0,je.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,yv.getErrorMap)(),yv.defaultErrorMap].filter(d=>!!d),issueData:{code:yt.ZodIssueCode.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},t=r.data;if(this._def.returns instanceof cc){let o=this;return(0,je.OK)(async function(...l){let d=new yt.ZodError([]),c=await o._def.args.parseAsync(l,s).catch(S=>{throw d.addIssue(a(l,S)),d}),y=await Reflect.apply(t,this,c);return await o._def.returns._def.type.parseAsync(y,s).catch(S=>{throw d.addIssue(i(y,S)),d})})}else{let o=this;return(0,je.OK)(function(...l){let d=o._def.args.safeParse(l,s);if(!d.success)throw new yt.ZodError([a(l,d.error)]);let c=Reflect.apply(t,this,d.data),y=o._def.returns.safeParse(c,s);if(!y.success)throw new yt.ZodError([i(c,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new n({...this._def,args:Qo.create(e).rest(yl.create())})}returns(e){return new n({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,a){return new n({args:e||Qo.create([]).rest(yl.create()),returns:r||yl.create(),typeName:ar.ZodFunction,...xr(a)})}};Me.ZodFunction=wv;var Gd=class extends wr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Me.ZodLazy=Gd;Gd.create=(n,e)=>new Gd({getter:n,typeName:ar.ZodLazy,...xr(e)});var Hd=class extends wr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(r,{received:r.data,code:yt.ZodIssueCode.invalid_literal,expected:this._def.value}),je.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}};Me.ZodLiteral=Hd;Hd.create=(n,e)=>new Hd({value:n,typeName:ar.ZodLiteral,...xr(e)});function oB(n,e){return new Kd({values:n,typeName:ar.ZodEnum,...xr(e)})}var Kd=class n extends wr{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),a=this._def.values;return(0,je.addIssueToContext)(r,{expected:Ct.util.joinValues(a),received:r.parsedType,code:yt.ZodIssueCode.invalid_type}),je.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),a=this._def.values;return(0,je.addIssueToContext)(r,{received:r.data,code:yt.ZodIssueCode.invalid_enum_value,options:a}),je.INVALID}return(0,je.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return n.create(e,{...this._def,...r})}exclude(e,r=this._def){return n.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}};Me.ZodEnum=Kd;Kd.create=oB;var Zd=class extends wr{_parse(e){let r=Ct.util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==Ct.ZodParsedType.string&&a.parsedType!==Ct.ZodParsedType.number){let i=Ct.util.objectValues(r);return(0,je.addIssueToContext)(a,{expected:Ct.util.joinValues(i),received:a.parsedType,code:yt.ZodIssueCode.invalid_type}),je.INVALID}if(this._cache||(this._cache=new Set(Ct.util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Ct.util.objectValues(r);return(0,je.addIssueToContext)(a,{received:a.data,code:yt.ZodIssueCode.invalid_enum_value,options:i}),je.INVALID}return(0,je.OK)(e.data)}get enum(){return this._def.values}};Me.ZodNativeEnum=Zd;Zd.create=(n,e)=>new Zd({values:n,typeName:ar.ZodNativeEnum,...xr(e)});var cc=class extends wr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ct.ZodParsedType.promise&&r.common.async===!1)return(0,je.addIssueToContext)(r,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.promise,received:r.parsedType}),je.INVALID;let a=r.parsedType===Ct.ZodParsedType.promise?r.data:Promise.resolve(r.data);return(0,je.OK)(a.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Me.ZodPromise=cc;cc.create=(n,e)=>new cc({type:n,typeName:ar.ZodPromise,...xr(e)});var Yi=class extends wr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ar.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:a}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:t=>{(0,je.addIssueToContext)(a,t),t.fatal?r.abort():r.dirty()},get path(){return a.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let t=i.transform(a.data,s);if(a.common.async)return Promise.resolve(t).then(async o=>{if(r.value==="aborted")return je.INVALID;let l=await this._def.schema._parseAsync({data:o,path:a.path,parent:a});return l.status==="aborted"?je.INVALID:l.status==="dirty"||r.value==="dirty"?(0,je.DIRTY)(l.value):l});{if(r.value==="aborted")return je.INVALID;let o=this._def.schema._parseSync({data:t,path:a.path,parent:a});return o.status==="aborted"?je.INVALID:o.status==="dirty"||r.value==="dirty"?(0,je.DIRTY)(o.value):o}}if(i.type==="refinement"){let t=o=>{let l=i.refinement(o,s);if(a.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(a.common.async===!1){let o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?je.INVALID:(o.status==="dirty"&&r.dirty(),t(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>o.status==="aborted"?je.INVALID:(o.status==="dirty"&&r.dirty(),t(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(a.common.async===!1){let t=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!(0,je.isValid)(t))return je.INVALID;let o=i.transform(t.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(t=>(0,je.isValid)(t)?Promise.resolve(i.transform(t.value,s)).then(o=>({status:r.value,value:o})):je.INVALID);Ct.util.assertNever(i)}};Me.ZodEffects=Yi;Me.ZodTransformer=Yi;Yi.create=(n,e,r)=>new Yi({schema:n,typeName:ar.ZodEffects,effect:e,...xr(r)});Yi.createWithPreprocess=(n,e,r)=>new Yi({schema:e,effect:{type:"preprocess",transform:n},typeName:ar.ZodEffects,...xr(r)});var ws=class extends wr{_parse(e){return this._getType(e)===Ct.ZodParsedType.undefined?(0,je.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Me.ZodOptional=ws;ws.create=(n,e)=>new ws({innerType:n,typeName:ar.ZodOptional,...xr(e)});var eu=class extends wr{_parse(e){return this._getType(e)===Ct.ZodParsedType.null?(0,je.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Me.ZodNullable=eu;eu.create=(n,e)=>new eu({innerType:n,typeName:ar.ZodNullable,...xr(e)});var Jd=class extends wr{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return r.parsedType===Ct.ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Me.ZodDefault=Jd;Jd.create=(n,e)=>new Jd({innerType:n,typeName:ar.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xr(e)});var Xd=class extends wr{_parse(e){let{ctx:r}=this._processInputParams(e),a={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return(0,je.isAsync)(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new yt.ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new yt.ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}};Me.ZodCatch=Xd;Xd.create=(n,e)=>new Xd({innerType:n,typeName:ar.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xr(e)});var Jf=class extends wr{_parse(e){if(this._getType(e)!==Ct.ZodParsedType.nan){let a=this._getOrReturnCtx(e);return(0,je.addIssueToContext)(a,{code:yt.ZodIssueCode.invalid_type,expected:Ct.ZodParsedType.nan,received:a.parsedType}),je.INVALID}return{status:"valid",value:e.data}}};Me.ZodNaN=Jf;Jf.create=n=>new Jf({typeName:ar.ZodNaN,...xr(n)});Me.BRAND=Symbol("zod_brand");var t1=class extends wr{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}};Me.ZodBranded=t1;var r1=class n extends wr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?je.INVALID:s.status==="dirty"?(r.dirty(),(0,je.DIRTY)(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{let i=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?je.INVALID:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:a.path,parent:a})}}static create(e,r){return new n({in:e,out:r,typeName:ar.ZodPipeline})}};Me.ZodPipeline=r1;var Yd=class extends wr{_parse(e){let r=this._def.innerType._parse(e),a=i=>((0,je.isValid)(i)&&(i.value=Object.freeze(i.value)),i);return(0,je.isAsync)(r)?r.then(i=>a(i)):a(r)}unwrap(){return this._def.innerType}};Me.ZodReadonly=Yd;Yd.create=(n,e)=>new Yd({innerType:n,typeName:ar.ZodReadonly,...xr(e)});function aB(n,e){let r=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof r=="string"?{message:r}:r}function uB(n,e={},r){return n?lc.create().superRefine((a,i)=>{let s=n(a);if(s instanceof Promise)return s.then(t=>{if(!t){let o=aB(e,a),l=o.fatal??r??!0;i.addIssue({code:"custom",...o,fatal:l})}});if(!s){let t=aB(e,a),o=t.fatal??r??!0;i.addIssue({code:"custom",...t,fatal:o})}}):lc.create()}Me.late={object:Si.lazycreate};var ar;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ar||(Me.ZodFirstPartyTypeKind=ar={}));var fse=(n,e={message:`Input not instance of ${n.name}`})=>uB(r=>r instanceof n,e);Me.instanceof=fse;var lB=uc.create;Me.string=lB;var cB=Bd.create;Me.number=cB;var hse=Jf.create;Me.nan=hse;var mse=Ld.create;Me.bigint=mse;var dB=qd.create;Me.boolean=dB;var gse=Ud.create;Me.date=gse;var bse=Gf.create;Me.symbol=bse;var vse=$d.create;Me.undefined=vse;var yse=Vd.create;Me.null=yse;var _se=lc.create;Me.any=_se;var xse=yl.create;Me.unknown=xse;var wse=bo.create;Me.never=wse;var Sse=Hf.create;Me.void=Sse;var Cse=_l.create;Me.array=Cse;var Ase=Si.create;Me.object=Ase;var Ese=Si.strictCreate;Me.strictObject=Ese;var Pse=zd.create;Me.union=Pse;var Tse=_v.create;Me.discriminatedUnion=Tse;var Ose=Wd.create;Me.intersection=Ose;var Fse=Qo.create;Me.tuple=Fse;var kse=xv.create;Me.record=kse;var Rse=Kf.create;Me.map=Rse;var Ise=Zf.create;Me.set=Ise;var Dse=wv.create;Me.function=Dse;var Nse=Gd.create;Me.lazy=Nse;var Mse=Hd.create;Me.literal=Mse;var jse=Kd.create;Me.enum=jse;var Bse=Zd.create;Me.nativeEnum=Bse;var Lse=cc.create;Me.promise=Lse;var pB=Yi.create;Me.effect=pB;Me.transformer=pB;var qse=ws.create;Me.optional=qse;var Use=eu.create;Me.nullable=Use;var $se=Yi.createWithPreprocess;Me.preprocess=$se;var Vse=r1.create;Me.pipeline=Vse;var zse=()=>lB().optional();Me.ostring=zse;var Wse=()=>cB().optional();Me.onumber=Wse;var Gse=()=>dB().optional();Me.oboolean=Gse;Me.coerce={string:n=>uc.create({...n,coerce:!0}),number:n=>Bd.create({...n,coerce:!0}),boolean:n=>qd.create({...n,coerce:!0}),bigint:n=>Ld.create({...n,coerce:!0}),date:n=>Ud.create({...n,coerce:!0})};Me.NEVER=je.INVALID});var Z9=te(Cs=>{"use strict";var Hse=Cs&&Cs.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Xf=Cs&&Cs.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hse(e,n,r)};Object.defineProperty(Cs,"__esModule",{value:!0});Xf(bv(),Cs);Xf(G9(),Cs);Xf(Qj(),Cs);Xf(Qm(),Cs);Xf(fB(),Cs);Xf(gv(),Cs)});var J9=te(Ci=>{"use strict";var hB=Ci&&Ci.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Kse=Ci&&Ci.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Zse=Ci&&Ci.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&hB(e,n,r);return Kse(e,n),e},Jse=Ci&&Ci.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hB(e,n,r)};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.z=void 0;var mB=Zse(Z9());Ci.z=mB;Jse(Z9(),Ci);Ci.default=mB});var oi=te(tu=>{"use strict";var Xse=tu&&tu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Yse=tu&&tu.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xse(e,n,r)},Qse=tu&&tu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tu,"__esModule",{value:!0});var eoe=Qse(J9());Yse(J9(),tu);tu.default=eoe.default});var a1=te(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.PatchError=Ba.hasUndefined=Ba.getPath=Ba._getPathRecursive=Ba.unescapePathComponent=Ba.escapePathComponent=Ba.isInteger=Ba._deepClone=Ba._objectKeys=Ba.hasOwnProperty=void 0;var toe=Object.prototype.hasOwnProperty;function e7(n,e){return toe.call(n,e)}Ba.hasOwnProperty=e7;function bB(n){if(Array.isArray(n)){let r=new Array(n.length);for(let a=0;a<r.length;a++)r[a]=""+a;return r}if(Object.keys)return Object.keys(n);let e=[];for(let r in n)e7(n,r)&&e.push(r);return e}Ba._objectKeys=bB;function roe(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}Ba._deepClone=roe;function aoe(n){let e=0,r=n.length,a;for(;e<r;){if(a=n.charCodeAt(e),a>=48&&a<=57){e++;continue}return!1}return!0}Ba.isInteger=aoe;function X9(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}Ba.escapePathComponent=X9;function noe(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}Ba.unescapePathComponent=noe;function t7(n,e){let r;for(let a in n)if(e7(n,a)){if(n[a]===e)return X9(a)+"/";if(typeof n[a]=="object"&&(r=t7(n[a],e),r!=""))return X9(a)+"/"+r}return""}Ba._getPathRecursive=t7;function ioe(n,e){if(n===e)return"/";let r=t7(n,e);if(r==="")throw new Error("Object not found in root");return`/${r}`}Ba.getPath=ioe;function Y9(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let r=0,a=n.length;r<a;r++)if(Y9(n[r]))return!0}else if(typeof n=="object"){let r=bB(n),a=r.length;for(var e=0;e<a;e++)if(Y9(n[r[e]]))return!0}}return!1}Ba.hasUndefined=Y9;function gB(n,e){let r=[n];for(let a in e){let i=typeof e[a]=="object"?JSON.stringify(e[a],null,2):e[a];typeof i<"u"&&r.push(`${a}: ${i}`)}return r.join(`
`)}var Q9=class extends Error{constructor(e,r,a,i,s){super(gB(e,{name:r,index:a,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=gB(e,{name:r,index:a,operation:i,tree:s})}};Ba.PatchError=Q9});var Av=te(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr._areEquals=Fr.validate=Fr.validator=Fr.applyReducer=Fr.applyPatch=Fr.applyOperation=Fr.getValueByPointer=Fr.deepClone=Fr.JsonPatchError=void 0;var Qi=a1();Fr.JsonPatchError=Qi.PatchError;Fr.deepClone=Qi._deepClone;var Yf={add:function(n,e,r){return n[e]=this.value,{newDocument:r}},remove:function(n,e,r){var a=n[e];return delete n[e],{newDocument:r,removed:a}},replace:function(n,e,r){var a=n[e];return n[e]=this.value,{newDocument:r,removed:a}},move:function(n,e,r){let a=Sv(r,this.path);a&&(a=(0,Qi._deepClone)(a));let i=Qd(r,{op:"remove",path:this.from}).removed;return Qd(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:a}},copy:function(n,e,r){let a=Sv(r,this.from);return Qd(r,{op:"add",path:this.path,value:(0,Qi._deepClone)(a)}),{newDocument:r}},test:function(n,e,r){return{newDocument:r,test:n1(n[e],this.value)}},_get:function(n,e,r){return this.value=n[e],{newDocument:r}}},soe={add:function(n,e,r){return(0,Qi.isInteger)(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:r,index:e}},remove:function(n,e,r){var a=n.splice(e,1);return{newDocument:r,removed:a[0]}},replace:function(n,e,r){var a=n[e];return n[e]=this.value,{newDocument:r,removed:a}},move:Yf.move,copy:Yf.copy,test:Yf.test,_get:Yf._get};function Sv(n,e){if(e=="")return n;var r={op:"_get",path:e};return Qd(n,r),r.value}Fr.getValueByPointer=Sv;function Qd(n,e,r=!1,a=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,n,e.path):Cv(e,0)),e.path===""){let t={newDocument:n};if(e.op==="add")return t.newDocument=e.value,t;if(e.op==="replace")return t.newDocument=e.value,t.removed=n,t;if(e.op==="move"||e.op==="copy")return t.newDocument=Sv(n,e.from),e.op==="move"&&(t.removed=n),t;if(e.op==="test"){if(t.test=n1(n,e.value),t.test===!1)throw new Fr.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return t.newDocument=n,t}else{if(e.op==="remove")return t.removed=n,t.newDocument=null,t;if(e.op==="_get")return e.value=n,t;if(r)throw new Fr.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,n);return t}}else{a||(n=(0,Qi._deepClone)(n));let o=(e.path||"").split("/"),l=n,d=1,c=o.length,y,u,S;for(typeof r=="function"?S=r:S=Cv;;){if(u=o[d],u&&u.indexOf("~")!=-1&&(u=(0,Qi.unescapePathComponent)(u)),i&&(u=="__proto__"||u=="prototype"&&d>0&&o[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&y===void 0&&(l[u]===void 0?y=o.slice(0,d).join("/"):d==c-1&&(y=e.path),y!==void 0&&S(e,0,n,y)),d++,Array.isArray(l)){if(u==="-")u=l.length;else{if(r&&!(0,Qi.isInteger)(u))throw new Fr.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,n);(0,Qi.isInteger)(u)&&(u=~~u)}if(d>=c){if(r&&e.op==="add"&&u>l.length)throw new Fr.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,n);let V=soe[e.op].call(e,l,u,n);if(V.test===!1)throw new Fr.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return V}}else if(d>=c){let V=Yf[e.op].call(e,l,u,n);if(V.test===!1)throw new Fr.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return V}if(l=l[u],r&&d<c&&(!l||typeof l!="object"))throw new Fr.JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,n)}}}Fr.applyOperation=Qd;function vB(n,e,r,a=!0,i=!0){if(r&&!Array.isArray(e))throw new Fr.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(n=(0,Qi._deepClone)(n));let s=new Array(e.length);for(let t=0,o=e.length;t<o;t++)s[t]=Qd(n,e[t],r,!0,i,t),n=s[t].newDocument;return s.newDocument=n,s}Fr.applyPatch=vB;function ooe(n,e,r){let a=Qd(n,e);if(a.test===!1)throw new Fr.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",r,e,n);return a.newDocument}Fr.applyReducer=ooe;function Cv(n,e,r,a){if(typeof n!="object"||n===null||Array.isArray(n))throw new Fr.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,r);if(Yf[n.op]){if(typeof n.path!="string")throw new Fr.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,r);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new Fr.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,r);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new Fr.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new Fr.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&(0,Qi.hasUndefined)(n.value))throw new Fr.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,r);if(r){if(n.op=="add"){var i=n.path.split("/").length,s=a.split("/").length;if(i!==s+1&&i!==s)throw new Fr.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,r)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==a)throw new Fr.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,r)}else if(n.op==="move"||n.op==="copy"){var t={op:"_get",path:n.from,value:void 0},o=yB([t],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fr.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,r)}}}else throw new Fr.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,r)}Fr.validator=Cv;function yB(n,e,r){try{if(!Array.isArray(n))throw new Fr.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)vB((0,Qi._deepClone)(e),(0,Qi._deepClone)(n),r||!0);else{r=r||Cv;for(var a=0;a<n.length;a++)r(n[a],a,e,void 0)}}catch(i){if(i instanceof Fr.JsonPatchError)return i;throw i}}Fr.validate=yB;function n1(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var r=Array.isArray(n),a=Array.isArray(e),i,s,t;if(r&&a){if(s=n.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!n1(n[i],e[i]))return!1;return!0}if(r!=a)return!1;var o=Object.keys(n);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(t=o[i],!n1(n[t],e[t]))return!1;return!0}return n!==n&&e!==e}Fr._areEquals=n1});var _B=te(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.compare=ru.generate=ru.observe=ru.unobserve=void 0;var ui=a1(),uoe=Av(),i7=new WeakMap,r7=class{constructor(e){Object.defineProperty(this,"obj",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.obj=e}},a7=class{constructor(e,r){Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=e,this.observer=r}};function loe(n){return i7.get(n)}function coe(n,e){return n.observers.get(e)}function doe(n,e){n.observers.delete(e.callback)}function poe(n,e){e.unobserve()}ru.unobserve=poe;function foe(n,e){var r=[],a,i=loe(n);if(!i)i=new r7(n),i7.set(n,i);else{let o=coe(i,e);a=o&&o.observer}if(a)return a;if(a={},i.value=(0,ui._deepClone)(n),e){a.callback=e,a.next=null;var s=()=>{n7(a)},t=()=>{clearTimeout(a.next),a.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",t),window.addEventListener("keyup",t),window.addEventListener("mousedown",t),window.addEventListener("keydown",t),window.addEventListener("change",t))}return a.patches=r,a.object=n,a.unobserve=()=>{n7(a),clearTimeout(a.next),doe(i,a),typeof window<"u"&&(window.removeEventListener("mouseup",t),window.removeEventListener("keyup",t),window.removeEventListener("mousedown",t),window.removeEventListener("keydown",t),window.removeEventListener("change",t))},i.observers.set(e,new a7(e,a)),a}ru.observe=foe;function n7(n,e=!1){var r=i7.get(n.object);s7(r.value,n.object,n.patches,"",e),n.patches.length&&(0,uoe.applyPatch)(r.value,n.patches);var a=n.patches;return a.length>0&&(n.patches=[],n.callback&&n.callback(a)),a}ru.generate=n7;function s7(n,e,r,a,i){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=(0,ui._objectKeys)(e),t=(0,ui._objectKeys)(n),o=!1,l=!1,d=t.length-1;d>=0;d--){var c=t[d],y=n[c];if((0,ui.hasOwnProperty)(e,c)&&!(e[c]===void 0&&y!==void 0&&Array.isArray(e)===!1)){var u=e[c];typeof y=="object"&&y!=null&&typeof u=="object"&&u!=null&&Array.isArray(y)===Array.isArray(u)?s7(y,u,r,a+"/"+(0,ui.escapePathComponent)(c),i):y!==u&&(o=!0,i&&r.push({op:"test",path:a+"/"+(0,ui.escapePathComponent)(c),value:(0,ui._deepClone)(y)}),r.push({op:"replace",path:a+"/"+(0,ui.escapePathComponent)(c),value:(0,ui._deepClone)(u)}))}else Array.isArray(n)===Array.isArray(e)?(i&&r.push({op:"test",path:a+"/"+(0,ui.escapePathComponent)(c),value:(0,ui._deepClone)(y)}),r.push({op:"remove",path:a+"/"+(0,ui.escapePathComponent)(c)}),l=!0):(i&&r.push({op:"test",path:a,value:n}),r.push({op:"replace",path:a,value:e}),o=!0)}if(!(!l&&s.length==t.length))for(var d=0;d<s.length;d++){var c=s[d];!(0,ui.hasOwnProperty)(n,c)&&e[c]!==void 0&&r.push({op:"add",path:a+"/"+(0,ui.escapePathComponent)(c),value:(0,ui._deepClone)(e[c])})}}}function hoe(n,e,r=!1){var a=[];return s7(n,e,a,"",r),a}ru.compare=hoe});var o7=te(Ha=>{"use strict";var xB=Ha&&Ha.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),moe=Ha&&Ha.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),wB=Ha&&Ha.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xB(e,n,r)},goe=Ha&&Ha.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&xB(e,n,r);return moe(e,n),e};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.unescapePathComponent=Ha.escapePathComponent=Ha.deepClone=Ha.JsonPatchError=void 0;wB(Av(),Ha);wB(_B(),Ha);var Pv=a1();Object.defineProperty(Ha,"JsonPatchError",{enumerable:!0,get:function(){return Pv.PatchError}});Object.defineProperty(Ha,"deepClone",{enumerable:!0,get:function(){return Pv._deepClone}});Object.defineProperty(Ha,"escapePathComponent",{enumerable:!0,get:function(){return Pv.escapePathComponent}});Object.defineProperty(Ha,"unescapePathComponent",{enumerable:!0,get:function(){return Pv.unescapePathComponent}});var boe=goe(Av()),Ev=a1();Ha.default={...boe,JsonPatchError:Ev.PatchError,deepClone:Ev._deepClone,escapePathComponent:Ev.escapePathComponent,unescapePathComponent:Ev.unescapePathComponent}});var au=te(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.pickRunnableConfigKeys=Ai.patchConfig=Ai.ensureConfig=Ai.mergeConfigs=Ai.getCallbackManagerForConfig=Ai.DEFAULT_RECURSION_LIMIT=void 0;var Tv=nc(),voe=Nd();Ai.DEFAULT_RECURSION_LIMIT=25;async function yoe(n){return Tv.CallbackManager._configureSync(n?.callbacks,void 0,n?.tags,void 0,n?.metadata)}Ai.getCallbackManagerForConfig=yoe;function _oe(...n){let e={};for(let r of n.filter(a=>!!a))for(let a of Object.keys(r))if(a==="metadata")e[a]={...e[a],...r[a]};else if(a==="tags"){let i=e[a]??[];e[a]=[...new Set(i.concat(r[a]??[]))]}else if(a==="configurable")e[a]={...e[a],...r[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=r.timeout:r.timeout!==void 0&&(e.timeout=Math.min(e.timeout,r.timeout));else if(a==="signal")e.signal===void 0?e.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,r.signal]):e.signal=r.signal);else if(a==="callbacks"){let i=e.callbacks,s=r.callbacks;if(Array.isArray(s))if(!i)e.callbacks=s;else if(Array.isArray(i))e.callbacks=i.concat(s);else{let t=i.copy();for(let o of s)t.addHandler((0,Tv.ensureHandler)(o),!0);e.callbacks=t}else if(s)if(!i)e.callbacks=s;else if(Array.isArray(i)){let t=s.copy();for(let o of i)t.addHandler((0,Tv.ensureHandler)(o),!0);e.callbacks=t}else e.callbacks=new Tv.CallbackManager(s._parentRunId,{handlers:i.handlers.concat(s.handlers),inheritableHandlers:i.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(s.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(s.inheritableTags))),metadata:{...i.metadata,...s.metadata}})}else{let i=a;e[i]=r[i]??e[i]}return e}Ai.mergeConfigs=_oe;var xoe=new Set(["string","number","boolean"]);function SB(n){let e=voe.AsyncLocalStorageProviderSingleton.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:a,runName:i,...s}=e;r=Object.entries(s).reduce((t,[o,l])=>(l!==void 0&&(t[o]=l),t),r)}if(n&&(r=Object.entries(n).reduce((a,[i,s])=>(s!==void 0&&(a[i]=s),a),r)),r?.configurable)for(let a of Object.keys(r.configurable))xoe.has(typeof r.configurable[a])&&!r.metadata?.[a]&&(r.metadata||(r.metadata={}),r.metadata[a]=r.configurable[a]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");let a=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,a])):r.signal=a,delete r.timeout}return r}Ai.ensureConfig=SB;function woe(n={},{callbacks:e,maxConcurrency:r,recursionLimit:a,runName:i,configurable:s,runId:t}={}){let o=SB(n);return e!==void 0&&(delete o.runName,o.callbacks=e),a!==void 0&&(o.recursionLimit=a),r!==void 0&&(o.maxConcurrency=r),i!==void 0&&(o.runName=i),s!==void 0&&(o.configurable={...o.configurable,...s}),t!==void 0&&delete o.runId,o}Ai.patchConfig=woe;function Soe(n){return n?{configurable:n.configurable,recursionLimit:n.recursionLimit,callbacks:n.callbacks,tags:n.tags,metadata:n.metadata,maxConcurrency:n.maxConcurrency,timeout:n.timeout,signal:n.signal}:void 0}Ai.pickRunnableConfigKeys=Soe});var u7=te(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0});Ov.raceWithSignal=void 0;async function Coe(n,e){if(e===void 0)return n;let r;return Promise.race([n.catch(a=>{if(!e?.aborted)throw a}),new Promise((a,i)=>{r=()=>{i(new Error("Aborted"))},e.addEventListener("abort",r),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",r))}Ov.raceWithSignal=Coe});var vo=te(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.pipeGeneratorWithSetup=As.AsyncGeneratorWithSetup=As.concat=As.atee=As.IterableReadableStream=void 0;var CB=au(),AB=Nd(),Aoe=u7(),l7=class n extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let r=this.reader.cancel();this.reader.releaseLock(),await r}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){let r=e.getReader();return new n({start(a){return i();function i(){return r.read().then(({done:s,value:t})=>{if(s){a.close();return}return a.enqueue(t),i()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(e){return new n({async pull(r){let{value:a,done:i}=await e.next();i&&r.close(),r.enqueue(a)},async cancel(r){await e.return(r)}})}};As.IterableReadableStream=l7;function Eoe(n,e=2){let r=Array.from({length:e},()=>[]);return r.map(async function*(i){for(;;)if(i.length===0){let s=await n.next();for(let t of r)t.push(s)}else{if(i[0].done)return;yield i.shift().value}})}As.atee=Eoe;function EB(n,e){if(Array.isArray(n)&&Array.isArray(e))return n.concat(e);if(typeof n=="string"&&typeof e=="string")return n+e;if(typeof n=="number"&&typeof e=="number")return n+e;if("concat"in n&&typeof n.concat=="function")return n.concat(e);if(typeof n=="object"&&typeof e=="object"){let r={...n};for(let[a,i]of Object.entries(e))a in r&&!Array.isArray(r[a])?r[a]=EB(r[a],i):r[a]=i;return r}else throw new Error(`Cannot concat ${typeof n} and ${typeof e}`)}As.concat=EB;var Fv=class{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((r,a)=>{AB.AsyncLocalStorageProviderSingleton.runWithConfig((0,CB.pickRunnableConfigKeys)(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,a):this.firstResult.then(i=>r(void 0),a)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?AB.AsyncLocalStorageProviderSingleton.runWithConfig((0,CB.pickRunnableConfigKeys)(this.config),this.signal?async()=>(0,Aoe.raceWithSignal)(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};As.AsyncGeneratorWithSetup=Fv;async function Poe(n,e,r,a,...i){let s=new Fv({generator:e,startSetup:r,signal:a}),t=await s.setup;return{output:n(s,t,...i),setup:t}}As.pipeGeneratorWithSetup=Poe});var p7=te(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.LogStreamCallbackHandler=iu.isLogStreamHandler=iu.RunLog=iu.RunLogPatch=void 0;var c7=o7(),Toe=po(),Ooe=vo(),Foe=kd(),nu=class{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){let r=this.ops.concat(e.ops),a=(0,c7.applyPatch)({},r);return new kv({ops:r,state:a[a.length-1].newDocument})}};iu.RunLogPatch=nu;var kv=class n extends nu{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let r=this.ops.concat(e.ops),a=(0,c7.applyPatch)(this.state,e.ops);return new n({ops:r,state:a[a.length-1].newDocument})}static fromRunLogPatch(e){let r=(0,c7.applyPatch)({},e.ops);return new n({ops:e.ops,state:r[r.length-1].newDocument})}};iu.RunLog=kv;var koe=n=>n.name==="log_stream_tracer";iu.isLogStreamHandler=koe;async function PB(n,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=n;if(["retriever","llm","prompt"].includes(n.run_type))return r;if(!(Object.keys(r).length===1&&r?.input===""))return r.input}async function TB(n,e){let{outputs:r}=n;return e==="original"||["retriever","llm","prompt"].includes(n.run_type)?r:r!==void 0&&Object.keys(r).length===1&&r?.output!==void 0?r.output:r}function Roe(n){return n!==void 0&&n.message!==void 0}var d7=class extends Toe.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ooe.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;let r=e.tags??[],a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(a=a||r.find(i=>this.includeTags?.includes(i))!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(a=a&&r.every(i=>!this.excludeTags?.includes(i))),a}async*tapOutputIterable(e,r){for await(let a of r){if(e!==this.rootId){let i=this.keyMapByRunId[e];i&&await this.writer.write(new nu({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]}))}yield a}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new nu({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;let a={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(a.inputs=await PB(e,this._schemaFormat)),await this.writer.write(new nu({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:a}]}))}async onRunUpdate(e){try{let r=this.keyMapByRunId[e.id];if(r===void 0)return;let a=[];this._schemaFormat==="streaming_events"&&a.push({op:"replace",path:`/logs/${r}/inputs`,value:await PB(e,this._schemaFormat)}),a.push({op:"add",path:`/logs/${r}/final_output`,value:await TB(e,this._schemaFormat)}),e.end_time!==void 0&&a.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});let i=new nu({ops:a});await this.writer.write(i)}finally{if(e.id===this.rootId){let r=new nu({ops:[{op:"replace",path:"/final_output",value:await TB(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,a){let i=this.keyMapByRunId[e.id];if(i===void 0)return;let s=e.inputs.messages!==void 0,t;s?Roe(a?.chunk)?t=a?.chunk:t=new Foe.AIMessageChunk({id:`run-${e.id}`,content:r}):t=r;let o=new nu({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${i}/streamed_output/-`,value:t}]});await this.writer.write(o)}};iu.LogStreamCallbackHandler=d7});var pc=te(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.ChatGenerationChunk=dc.GenerationChunk=dc.RUN_KEY=void 0;dc.RUN_KEY="__run";var Rv=class n{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new n({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}};dc.GenerationChunk=Rv;var f7=class n extends Rv{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new n({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}};dc.ChatGenerationChunk=f7});var FB=te(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.EventStreamCallbackHandler=Qf.isStreamEventsHandler=void 0;var Ioe=po(),Doe=vo(),Noe=kd(),OB=pc();function Iv({name:n,serialized:e}){return n!==void 0?n:e?.name!==void 0?e.name:e?.id!==void 0&&Array.isArray(e?.id)?e.id[e.id.length-1]:"Unnamed"}var Moe=n=>n.name==="event_stream_tracer";Qf.isStreamEventsHandler=Moe;var h7=class extends Ioe.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Doe.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){let r=e.tags??[],a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(a=a||r.find(i=>this.includeTags?.includes(i))!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(a=a&&r.every(i=>!this.excludeTags?.includes(i))),a}async*tapOutputIterable(e,r){let a=await r.next();if(a.done)return;let i=this.runInfoMap.get(e);if(i===void 0){yield a.value;return}function s(o,l){return o==="llm"&&typeof l=="string"?new OB.GenerationChunk({text:l}):l}let t=this.tappedPromises.get(e);if(t===void 0){let o;t=new Promise(l=>{o=l}),this.tappedPromises.set(e,t);try{let l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:s(i.runType,a.value)}},i),yield a.value;for await(let d of r)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:s(i.runType,d)}},i),yield d}finally{o()}}else{yield a.value;for await(let o of r)yield o}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){let a=this.tappedPromises.get(e.run_id);a!==void 0?a.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){let r=Iv(e),a=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:a,inputs:e.inputs};this.runInfoMap.set(e.id,i);let s=`on_${a}_start`;await this.send({event:s,data:{input:e.inputs},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onLLMNewToken(e,r,a){let i=this.runInfoMap.get(e.id),s,t;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")t="on_chat_model_stream",a?.chunk===void 0?s=new Noe.AIMessageChunk({content:r,id:`run-${e.id}`}):s=a.chunk.message;else if(i.runType==="llm")t="on_llm_stream",a?.chunk===void 0?s=new OB.GenerationChunk({text:r}):s=a.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:t,data:{chunk:s},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){let r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let a;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=e.outputs?.generations,s;if(r.runType==="chat_model"){for(let t of i??[]){if(s!==void 0)break;s=t[0]?.message}a="on_chat_model_end"}else if(r.runType==="llm")s={generations:i?.map(t=>t.map(o=>({text:o.text,generationInfo:o.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},a="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:a,data:{output:s,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){let r=Iv(e),a=e.run_type??"chain",i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:e.run_type},s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},i.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,i.inputs=e.inputs.input):(s.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${a}_start`,data:s,name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onChainEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let a=`on_${e.run_type}_end`,i=e.inputs??r.inputs??{},t={output:e.outputs?.output??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(t.input=i.input,r.inputs=i.input),await this.sendEndEvent({event:a,data:t,run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata??{}},r)}async onToolStart(e){let r=Iv(e),a={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,a),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:r,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},a)}async onToolEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let a=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:a,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){let r=Iv(e),i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onRetrieverEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,a){let i=this.runInfoMap.get(a);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${a} not found in run map.`);await this.send({event:"on_custom_event",run_id:a,name:e,tags:i.tags,metadata:i.metadata,data:r},i)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};Qf.EventStreamCallbackHandler=h7});var t0=te(e0=>{"use strict";var kB=e0&&e0.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e0,"__esModule",{value:!0});e0.AsyncCaller=void 0;var joe=kB(Ed()),m7=kB(Pd()),Boe=[400,401,402,403,404,405,406,407,409],Loe=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n?.code==="ECONNABORTED")throw n;let e=n?.response?.status??n?.status;if(e&&Boe.includes(+e))throw n;if(n?.error?.code==="insufficient_quota"){let r=new Error(n?.message);throw r.name="InsufficientQuotaError",r}},g7=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Loe;let r="default"in m7.default?m7.default.default:m7.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,joe.default)(()=>e(...r).catch(a=>{throw a instanceof Error?a:new Error(a)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...a){return e.signal?Promise.race([this.call(r,...a),new Promise((i,s)=>{e.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...a)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}};e0.AsyncCaller=g7});var RB=te(Dv=>{"use strict";Object.defineProperty(Dv,"__esModule",{value:!0});Dv.RootListenersTracer=void 0;var qoe=po(),b7=class extends qoe.BaseTracer{constructor({config:e,onStart:r,onEnd:a,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=r,this.argOnEnd=a,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};Dv.RootListenersTracer=b7});var y7=te(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});r0._RootEventFilter=r0.isRunnableInterface=void 0;function Uoe(n){return n?n.lc_runnable:!1}r0.isRunnableInterface=Uoe;var v7=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,r){let a=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,i=e.tags??[];return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(r)),this.includeTags!==void 0&&(a=a||i.some(s=>this.includeTags?.includes(s))),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(r)),this.excludeTags!==void 0&&(a=a&&i.every(s=>!this.excludeTags?.includes(s))),a}};r0._RootEventFilter=v7});var Nv=te(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.getDefaultOptions=Es.defaultOptions=Es.jsonDescription=Es.ignoreOverride=void 0;Es.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");var $oe=(n,e)=>{if(e.description)try{return{...n,...JSON.parse(e.description)}}catch{}return n};Es.jsonDescription=$oe;Es.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};var Voe=n=>typeof n=="string"?{...Es.defaultOptions,name:n}:{...Es.defaultOptions,...n};Es.getDefaultOptions=Voe});var _7=te(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.getRefs=void 0;var zoe=Nv(),Woe=n=>{let e=(0,zoe.getDefaultOptions)(n),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([a,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}};Mv.getRefs=Woe});var fc=te(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.setResponseValueAndErrors=a0.addErrorMessage=void 0;function IB(n,e,r,a){a?.errorMessages&&r&&(n.errorMessage={...n.errorMessage,[e]:r})}a0.addErrorMessage=IB;function Goe(n,e,r,a,i){n[e]=r,IB(n,e,a,i)}a0.setResponseValueAndErrors=Goe});var x7=te(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});jv.parseAnyDef=void 0;function Hoe(){return{}}jv.parseAnyDef=Hoe});var w7=te(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0});Lv.parseArrayDef=void 0;var Koe=oi(),Bv=fc(),Zoe=Qa();function Joe(n,e){let r={type:"array"};return n.type?._def&&n.type?._def?.typeName!==Koe.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,Zoe.parseDef)(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&(0,Bv.setResponseValueAndErrors)(r,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&(0,Bv.setResponseValueAndErrors)(r,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&((0,Bv.setResponseValueAndErrors)(r,"minItems",n.exactLength.value,n.exactLength.message,e),(0,Bv.setResponseValueAndErrors)(r,"maxItems",n.exactLength.value,n.exactLength.message,e)),r}Lv.parseArrayDef=Joe});var S7=te(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0});qv.parseBigintDef=void 0;var ep=fc();function Xoe(n,e){let r={type:"integer",format:"int64"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?(0,ep.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e):(0,ep.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),(0,ep.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?(0,ep.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e):(0,ep.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),(0,ep.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e));break;case"multipleOf":(0,ep.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,e);break}return r}qv.parseBigintDef=Xoe});var C7=te(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});Uv.parseBooleanDef=void 0;function Yoe(){return{type:"boolean"}}Uv.parseBooleanDef=Yoe});var Vv=te($v=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});$v.parseBrandedDef=void 0;var Qoe=Qa();function eue(n,e){return(0,Qoe.parseDef)(n.type._def,e)}$v.parseBrandedDef=eue});var A7=te(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});zv.parseCatchDef=void 0;var tue=Qa(),rue=(n,e)=>(0,tue.parseDef)(n.innerType._def,e);zv.parseCatchDef=rue});var E7=te(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.parseDateDef=void 0;var DB=fc();function NB(n,e,r){let a=r??e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((i,s)=>NB(n,e,i))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aue(n,e)}}Wv.parseDateDef=NB;var aue=(n,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let a of n.checks)switch(a.kind){case"min":(0,DB.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e);break;case"max":(0,DB.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e);break}return r}});var P7=te(Gv=>{"use strict";Object.defineProperty(Gv,"__esModule",{value:!0});Gv.parseDefaultDef=void 0;var nue=Qa();function iue(n,e){return{...(0,nue.parseDef)(n.innerType._def,e),default:n.defaultValue()}}Gv.parseDefaultDef=iue});var T7=te(Hv=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});Hv.parseEffectsDef=void 0;var sue=Qa();function oue(n,e){return e.effectStrategy==="input"?(0,sue.parseDef)(n.schema._def,e):{}}Hv.parseEffectsDef=oue});var O7=te(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.parseEnumDef=void 0;function uue(n){return{type:"string",enum:Array.from(n.values)}}Kv.parseEnumDef=uue});var F7=te(Zv=>{"use strict";Object.defineProperty(Zv,"__esModule",{value:!0});Zv.parseIntersectionDef=void 0;var MB=Qa(),lue=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function cue(n,e){let r=[(0,MB.parseDef)(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),(0,MB.parseDef)(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(s=>{if(lue(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(a=void 0);else{let t=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:o,...l}=s;t=l}else a=void 0;i.push(t)}}),i.length?{allOf:i,...a}:void 0}Zv.parseIntersectionDef=cue});var k7=te(Jv=>{"use strict";Object.defineProperty(Jv,"__esModule",{value:!0});Jv.parseLiteralDef=void 0;function due(n,e){let r=typeof n.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[n.value]}:{type:r==="bigint"?"integer":r,const:n.value}}Jv.parseLiteralDef=due});var Xv=te(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.parseStringDef=On.zodPatterns=void 0;var tp=fc(),R7;On.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(R7===void 0&&(R7=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),R7),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function pue(n,e){let r={type:"string"};if(n.checks)for(let a of n.checks)switch(a.kind){case"min":(0,tp.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e);break;case"max":(0,tp.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"email":switch(e.emailStrategy){case"format:email":yo(r,"email",a.message,e);break;case"format:idn-email":yo(r,"idn-email",a.message,e);break;case"pattern:zod":li(r,On.zodPatterns.email,a.message,e);break}break;case"url":yo(r,"uri",a.message,e);break;case"uuid":yo(r,"uuid",a.message,e);break;case"regex":li(r,a.regex,a.message,e);break;case"cuid":li(r,On.zodPatterns.cuid,a.message,e);break;case"cuid2":li(r,On.zodPatterns.cuid2,a.message,e);break;case"startsWith":li(r,RegExp(`^${I7(a.value,e)}`),a.message,e);break;case"endsWith":li(r,RegExp(`${I7(a.value,e)}$`),a.message,e);break;case"datetime":yo(r,"date-time",a.message,e);break;case"date":yo(r,"date",a.message,e);break;case"time":yo(r,"time",a.message,e);break;case"duration":yo(r,"duration",a.message,e);break;case"length":(0,tp.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e),(0,tp.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"includes":{li(r,RegExp(I7(a.value,e)),a.message,e);break}case"ip":{a.version!=="v6"&&yo(r,"ipv4",a.message,e),a.version!=="v4"&&yo(r,"ipv6",a.message,e);break}case"base64url":li(r,On.zodPatterns.base64url,a.message,e);break;case"jwt":li(r,On.zodPatterns.jwt,a.message,e);break;case"cidr":{a.version!=="v6"&&li(r,On.zodPatterns.ipv4Cidr,a.message,e),a.version!=="v4"&&li(r,On.zodPatterns.ipv6Cidr,a.message,e);break}case"emoji":li(r,On.zodPatterns.emoji(),a.message,e);break;case"ulid":{li(r,On.zodPatterns.ulid,a.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{yo(r,"binary",a.message,e);break}case"contentEncoding:base64":{(0,tp.setResponseValueAndErrors)(r,"contentEncoding","base64",a.message,e);break}case"pattern:zod":{li(r,On.zodPatterns.base64,a.message,e);break}}break}case"nanoid":li(r,On.zodPatterns.nanoid,a.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}On.parseStringDef=pue;function I7(n,e){return e.patternStrategy==="escape"?hue(n):n}var fue=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function hue(n){let e="";for(let r=0;r<n.length;r++)fue.has(n[r])||(e+="\\"),e+=n[r];return e}function yo(n,e,r,a){n.format||n.anyOf?.some(i=>i.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&a.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...r&&a.errorMessages&&{errorMessage:{format:r}}})):(0,tp.setResponseValueAndErrors)(n,"format",e,r,a)}function li(n,e,r,a){n.pattern||n.allOf?.some(i=>i.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&a.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:jB(e,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):(0,tp.setResponseValueAndErrors)(n,"pattern",jB(e,a),r,a)}function jB(n,e){if(!e.applyRegexFlags||!n.flags)return n.source;let r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},a=r.i?n.source.toLowerCase():n.source,i="",s=!1,t=!1,o=!1;for(let l=0;l<a.length;l++){if(s){i+=a[l],s=!1;continue}if(r.i){if(t){if(a[l].match(/[a-z]/)){o?(i+=a[l],i+=`${a[l-2]}-${a[l]}`.toUpperCase(),o=!1):a[l+1]==="-"&&a[l+2]?.match(/[a-z]/)?(i+=a[l],o=!0):i+=`${a[l]}${a[l].toUpperCase()}`;continue}}else if(a[l].match(/[a-z]/)){i+=`[${a[l]}${a[l].toUpperCase()}]`;continue}}if(r.m){if(a[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(a[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&a[l]==="."){i+=t?`${a[l]}\r
`:`[${a[l]}\r
]`;continue}i+=a[l],a[l]==="\\"?s=!0:t&&a[l]==="]"?t=!1:!t&&a[l]==="["&&(t=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i}});var Qv=te(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.parseRecordDef=void 0;var i1=oi(),BB=Qa(),mue=Xv(),gue=Vv();function bue(n,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&n.keyType?._def.typeName===i1.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((a,i)=>({...a,[i]:(0,BB.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",i]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:(0,BB.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(n.keyType?._def.typeName===i1.ZodFirstPartyTypeKind.ZodString&&n.keyType._def.checks?.length){let{type:a,...i}=(0,mue.parseStringDef)(n.keyType._def,e);return{...r,propertyNames:i}}else{if(n.keyType?._def.typeName===i1.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:n.keyType._def.values}};if(n.keyType?._def.typeName===i1.ZodFirstPartyTypeKind.ZodBranded&&n.keyType._def.type._def.typeName===i1.ZodFirstPartyTypeKind.ZodString&&n.keyType._def.type._def.checks?.length){let{type:a,...i}=(0,gue.parseBrandedDef)(n.keyType._def,e);return{...r,propertyNames:i}}}return r}Yv.parseRecordDef=bue});var D7=te(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.parseMapDef=void 0;var LB=Qa(),vue=Qv();function yue(n,e){if(e.mapStrategy==="record")return(0,vue.parseRecordDef)(n,e);let r=(0,LB.parseDef)(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},a=(0,LB.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}ey.parseMapDef=yue});var N7=te(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.parseNativeEnumDef=void 0;function _ue(n){let e=n.values,a=Object.keys(n.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(a.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:a}}ty.parseNativeEnumDef=_ue});var M7=te(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.parseNeverDef=void 0;function xue(){return{not:{}}}ry.parseNeverDef=xue});var j7=te(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.parseNullDef=void 0;function wue(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}ay.parseNullDef=wue});var ny=te(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.parseUnionDef=hc.primitiveMappings=void 0;var Sue=Qa();hc.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Cue(n,e){if(e.target==="openApi3")return qB(n,e);let r=n.options instanceof Map?Array.from(n.options.values()):n.options;if(r.every(a=>a._def.typeName in hc.primitiveMappings&&(!a._def.checks||!a._def.checks.length))){let a=r.reduce((i,s)=>{let t=hc.primitiveMappings[s._def.typeName];return t&&!i.includes(t)?[...i,t]:i},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){let a=r.reduce((i,s)=>{let t=typeof s._def.value;switch(t){case"string":case"number":case"boolean":return[...i,t];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(a.length===r.length){let i=a.filter((s,t,o)=>o.indexOf(s)===t);return{type:i.length>1?i:i[0],enum:r.reduce((s,t)=>s.includes(t._def.value)?s:[...s,t._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,i)=>[...a,...i._def.values.filter(s=>!a.includes(s))],[])};return qB(n,e)}hc.parseUnionDef=Cue;var qB=(n,e)=>{let r=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((a,i)=>(0,Sue.parseDef)(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0}});var B7=te(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.parseNullableDef=void 0;var UB=Qa(),$B=ny();function Aue(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"?{type:$B.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[$B.primitiveMappings[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let a=(0,UB.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let r=(0,UB.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}iy.parseNullableDef=Aue});var L7=te(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.parseNumberDef=void 0;var mc=fc();function Eue(n,e){let r={type:"number"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"int":r.type="integer",(0,mc.addErrorMessage)(r,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?(0,mc.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e):(0,mc.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),(0,mc.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?(0,mc.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e):(0,mc.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),(0,mc.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e));break;case"multipleOf":(0,mc.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,e);break}return r}sy.parseNumberDef=Eue});var q7=te(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.parseObjectDef=void 0;var Pue=oi(),VB=Qa();function Tue(n,e){let r=e.target==="openAi",a={type:"object",properties:{}},i=[],s=n.shape();for(let o in s){let l=s[o];if(l===void 0||l._def===void 0)continue;let d=Fue(l);d&&r&&(l instanceof Pue.ZodOptional&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let c=(0,VB.parseDef)(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});c!==void 0&&(a.properties[o]=c,d||i.push(o))}i.length&&(a.required=i);let t=Oue(n,e);return t!==void 0&&(a.additionalProperties=t),a}oy.parseObjectDef=Tue;function Oue(n,e){if(n.catchall._def.typeName!=="ZodNever")return(0,VB.parseDef)(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Fue(n){try{return n.isOptional()}catch{return!0}}});var U7=te(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});uy.parseOptionalDef=void 0;var zB=Qa(),kue=(n,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return(0,zB.parseDef)(n.innerType._def,e);let r=(0,zB.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};uy.parseOptionalDef=kue});var $7=te(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.parsePipelineDef=void 0;var ly=Qa(),Rue=(n,e)=>{if(e.pipeStrategy==="input")return(0,ly.parseDef)(n.in._def,e);if(e.pipeStrategy==="output")return(0,ly.parseDef)(n.out._def,e);let r=(0,ly.parseDef)(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),a=(0,ly.parseDef)(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(i=>i!==void 0)}};cy.parsePipelineDef=Rue});var V7=te(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.parsePromiseDef=void 0;var Iue=Qa();function Due(n,e){return(0,Iue.parseDef)(n.type._def,e)}dy.parsePromiseDef=Due});var z7=te(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.parseSetDef=void 0;var WB=fc(),Nue=Qa();function Mue(n,e){let a={type:"array",uniqueItems:!0,items:(0,Nue.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&(0,WB.setResponseValueAndErrors)(a,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&(0,WB.setResponseValueAndErrors)(a,"maxItems",n.maxSize.value,n.maxSize.message,e),a}py.parseSetDef=Mue});var G7=te(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.parseTupleDef=void 0;var W7=Qa();function jue(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((r,a)=>(0,W7.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:(0,W7.parseDef)(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((r,a)=>(0,W7.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}fy.parseTupleDef=jue});var H7=te(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.parseUndefinedDef=void 0;function Bue(){return{not:{}}}hy.parseUndefinedDef=Bue});var K7=te(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.parseUnknownDef=void 0;function Lue(){return{}}my.parseUnknownDef=Lue});var Z7=te(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.parseReadonlyDef=void 0;var que=Qa(),Uue=(n,e)=>(0,que.parseDef)(n.innerType._def,e);gy.parseReadonlyDef=Uue});var J7=te(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.selectParser=void 0;var Wr=oi(),$ue=x7(),Vue=w7(),zue=S7(),Wue=C7(),Gue=Vv(),Hue=A7(),Kue=E7(),Zue=P7(),Jue=T7(),Xue=O7(),Yue=F7(),Que=k7(),ele=D7(),tle=N7(),rle=M7(),ale=j7(),nle=B7(),ile=L7(),sle=q7(),ole=U7(),ule=$7(),lle=V7(),cle=Qv(),dle=z7(),ple=Xv(),fle=G7(),hle=H7(),mle=ny(),gle=K7(),ble=Z7(),vle=(n,e,r)=>{switch(e){case Wr.ZodFirstPartyTypeKind.ZodString:return(0,ple.parseStringDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodNumber:return(0,ile.parseNumberDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodObject:return(0,sle.parseObjectDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodBigInt:return(0,zue.parseBigintDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodBoolean:return(0,Wue.parseBooleanDef)();case Wr.ZodFirstPartyTypeKind.ZodDate:return(0,Kue.parseDateDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodUndefined:return(0,hle.parseUndefinedDef)();case Wr.ZodFirstPartyTypeKind.ZodNull:return(0,ale.parseNullDef)(r);case Wr.ZodFirstPartyTypeKind.ZodArray:return(0,Vue.parseArrayDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodUnion:case Wr.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,mle.parseUnionDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodIntersection:return(0,Yue.parseIntersectionDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodTuple:return(0,fle.parseTupleDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodRecord:return(0,cle.parseRecordDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodLiteral:return(0,Que.parseLiteralDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodEnum:return(0,Xue.parseEnumDef)(n);case Wr.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,tle.parseNativeEnumDef)(n);case Wr.ZodFirstPartyTypeKind.ZodNullable:return(0,nle.parseNullableDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodOptional:return(0,ole.parseOptionalDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodMap:return(0,ele.parseMapDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodSet:return(0,dle.parseSetDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodLazy:return()=>n.getter()._def;case Wr.ZodFirstPartyTypeKind.ZodPromise:return(0,lle.parsePromiseDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodNaN:case Wr.ZodFirstPartyTypeKind.ZodNever:return(0,rle.parseNeverDef)();case Wr.ZodFirstPartyTypeKind.ZodEffects:return(0,Jue.parseEffectsDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodAny:return(0,$ue.parseAnyDef)();case Wr.ZodFirstPartyTypeKind.ZodUnknown:return(0,gle.parseUnknownDef)();case Wr.ZodFirstPartyTypeKind.ZodDefault:return(0,Zue.parseDefaultDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodBranded:return(0,Gue.parseBrandedDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodReadonly:return(0,ble.parseReadonlyDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodCatch:return(0,Hue.parseCatchDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodPipeline:return(0,ule.parsePipelineDef)(n,r);case Wr.ZodFirstPartyTypeKind.ZodFunction:case Wr.ZodFirstPartyTypeKind.ZodVoid:case Wr.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(a=>{})(e)}};by.selectParser=vle});var Qa=te(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.parseDef=void 0;var yle=Nv(),_le=J7();function GB(n,e,r=!1){let a=e.seen.get(n);if(e.override){let o=e.override?.(n,e,a,r);if(o!==yle.ignoreOverride)return o}if(a&&!r){let o=xle(a,e);if(o!==void 0)return o}let i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);let s=(0,_le.selectParser)(n,n.typeName,e),t=typeof s=="function"?GB(s(),e):s;if(t&&Sle(n,e,t),e.postProcess){let o=e.postProcess(t,n,e);return i.jsonSchema=t,o}return i.jsonSchema=t,t}vy.parseDef=GB;var xle=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:wle(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,a)=>e.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},wle=(n,e)=>{let r=0;for(;r<n.length&&r<e.length&&n[r]===e[r];r++);return[(n.length-r).toString(),...e.slice(r)].join("/")},Sle=(n,e,r)=>(n.description&&(r.description=n.description,e.markdownDescription&&(r.markdownDescription=n.description)),r)});var KB=te(HB=>{"use strict";Object.defineProperty(HB,"__esModule",{value:!0})});var X7=te(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});yy.zodToJsonSchema=void 0;var ZB=Qa(),Cle=_7(),Ale=(n,e)=>{let r=(0,Cle.getRefs)(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,c])=>({...l,[d]:(0,ZB.parseDef)(c._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,s=(0,ZB.parseDef)(n._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},t=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;t!==void 0&&(s.title=t);let o=i===void 0?a?{...s,[r.definitionPath]:a}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...a,[i]:s}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};yy.zodToJsonSchema=Ale});var gc=te(pr=>{"use strict";var Ele=pr&&pr.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Lr=pr&&pr.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ele(e,n,r)};Object.defineProperty(pr,"__esModule",{value:!0});Lr(Nv(),pr);Lr(_7(),pr);Lr(fc(),pr);Lr(Qa(),pr);Lr(KB(),pr);Lr(x7(),pr);Lr(w7(),pr);Lr(S7(),pr);Lr(C7(),pr);Lr(Vv(),pr);Lr(A7(),pr);Lr(E7(),pr);Lr(P7(),pr);Lr(T7(),pr);Lr(O7(),pr);Lr(F7(),pr);Lr(k7(),pr);Lr(D7(),pr);Lr(N7(),pr);Lr(M7(),pr);Lr(j7(),pr);Lr(B7(),pr);Lr(L7(),pr);Lr(q7(),pr);Lr(U7(),pr);Lr($7(),pr);Lr(V7(),pr);Lr(Z7(),pr);Lr(Qv(),pr);Lr(z7(),pr);Lr(Xv(),pr);Lr(G7(),pr);Lr(H7(),pr);Lr(ny(),pr);Lr(K7(),pr);Lr(J7(),pr);Lr(X7(),pr);var Ple=X7();pr.default=Ple.zodToJsonSchema});var JB=te(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.drawMermaidPng=n0.drawMermaid=void 0;function Y7(n){return n.replace(/[^a-zA-Z-_0-9]/g,"_")}var Tle=["*","_","`"];function Ole(n){let e="";for(let[r,a]of Object.entries(n))e+=`	classDef ${r} ${a};
`;return e}function Fle(n,e,r){let{firstNode:a,lastNode:i,nodeColors:s,withStyles:t=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=r??{},d=t?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(t){let S="default",V={[S]:"{0}({1})"};a!==void 0&&(V[a]="{0}([{1}]):::first"),i!==void 0&&(V[i]="{0}([{1}]):::last");for(let[U,z]of Object.entries(n)){let D=z.name.split(":").pop()??"",T=Tle.some(g=>D.startsWith(g)&&D.endsWith(g))?`<p>${D}</p>`:D;Object.keys(z.metadata??{}).length&&(T+=`<hr/><small><em>${Object.entries(z.metadata??{}).map(([g,m])=>`${g} = ${m}`).join(`
`)}</em></small>`);let R=(V[U]??V[S]).replace("{0}",Y7(U)).replace("{1}",T);d+=`	${R}
`}}let c={};for(let S of e){let V=S.source.split(":"),U=S.target.split(":"),z=V.filter((D,k)=>D===U[k]).join(":");c[z]||(c[z]=[]),c[z].push(S)}let y=new Set;function u(S,V){let U=S.length===1&&S[0].source===S[0].target;if(V&&!U){let z=V.split(":").pop();if(y.has(z))throw new Error(`Found duplicate subgraph '${z}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(z),d+=`	subgraph ${z}
`}for(let z of S){let{source:D,target:k,data:T,conditional:R}=z,g="";if(T!==void 0){let m=T,v=m.split(" ");v.length>l&&(m=Array.from({length:Math.ceil(v.length/l)},(b,f)=>v.slice(f*l,(f+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),g=R?` -. &nbsp;${m}&nbsp; .-> `:` -- &nbsp;${m}&nbsp; --> `}else g=R?" -.-> ":" --> ";d+=`	${Y7(D)}${g}${Y7(k)};
`}for(let z in c)z.startsWith(`${V}:`)&&z!==V&&u(c[z],z);V&&!U&&(d+=`	end
`)}u(c[""]??[],"");for(let S in c)!S.includes(":")&&S!==""&&u(c[S],S);return t&&(d+=Ole(s??{})),d}n0.drawMermaid=Fle;async function kle(n,e){let{backgroundColor:r="white"}=e??{},a=btoa(n);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let i=`https://mermaid.ink/img/${a}?bgColor=${r}`,s=await fetch(i);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}n0.drawMermaidPng=kle});var eS=te(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});_y.Graph=void 0;var Rle=gc(),s1=(Xa(),fs(Tn)),eL=y7(),XB=JB();function Ile(n,e){if(n!==void 0&&!(0,s1.validate)(n))return n;if((0,eL.isRunnableInterface)(e))try{let r=e.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return e.getName()}else return e.name??"UnknownSchema"}function Dle(n){return(0,eL.isRunnableInterface)(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:{...(0,Rle.zodToJsonSchema)(n.data.schema),title:n.data.name}}}var Q7=class n{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((r,a)=>{e[r.id]=(0,s1.validate)(r.id)?a:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...Dle(r)})),edges:this.edges.map(r=>{let a={source:e[r.source],target:e[r.target]};return typeof r.data<"u"&&(a.data=r.data),typeof r.conditional<"u"&&(a.conditional=r.conditional),a})}}addNode(e,r,a){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);let i=r??(0,s1.v4)(),s={id:i,data:e,name:Ile(r,e),metadata:a};return this.nodes[i]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,a,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);let s={source:e.id,target:r.id,data:a,conditional:i};return this.edges.push(s),s}firstNode(){return YB(this)}lastNode(){return QB(this)}extend(e,r=""){let a=r;Object.values(e.nodes).map(d=>d.id).every(s1.validate)&&(a="");let s=d=>a?`${a}:${d}`:d;Object.entries(e.nodes).forEach(([d,c])=>{this.nodes[s(d)]={...c,id:s(d)}});let t=e.edges.map(d=>({...d,source:s(d.source),target:s(d.target)}));this.edges=[...this.edges,...t];let o=e.firstNode(),l=e.lastNode();return[o?{id:s(o.id),data:o.data}:void 0,l?{id:s(l.id),data:l.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&YB(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&QB(this,[e.id])&&this.removeNode(e)}reid(){let e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),r=new Map;Object.values(e).forEach(i=>{r.set(i,(r.get(i)||0)+1)});let a=i=>{let s=e[i];return(0,s1.validate)(i)&&r.get(s)===1?s:i};return new n({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,s])=>[a(i),{...s,id:a(i)}])),edges:this.edges.map(i=>({...i,source:a(i.source),target:a(i.target)}))})}drawMermaid(e){let{withStyles:r,curveStyle:a,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},t=this.reid(),o=t.firstNode(),l=t.lastNode();return(0,XB.drawMermaid)(t.nodes,t.edges,{firstNode:o?.id,lastNode:l?.id,withStyles:r,curveStyle:a,nodeColors:i,wrapLabelNWords:s})}async drawMermaidPng(e){let r=this.drawMermaid(e);return(0,XB.drawMermaidPng)(r,{backgroundColor:e?.backgroundColor})}};_y.Graph=Q7;function YB(n,e=[]){let r=new Set(n.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),a=[];for(let i of Object.values(n.nodes))!e.includes(i.id)&&!r.has(i.id)&&a.push(i);return a.length===1?a[0]:void 0}function QB(n,e=[]){let r=new Set(n.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),a=[];for(let i of Object.values(n.nodes))!e.includes(i.id)&&!r.has(i.id)&&a.push(i);return a.length===1?a[0]:void 0}});var tL=te(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.convertToHttpEventStream=void 0;var Nle=vo();function Mle(n){let e=new TextEncoder,r=new ReadableStream({async start(a){for await(let i of n)a.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));a.enqueue(e.encode(`event: end

`)),a.close()}});return Nle.IterableReadableStream.fromReadableStream(r)}xy.convertToHttpEventStream=Mle});var nL=te(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.consumeAsyncIterableInContext=Ps.consumeIteratorInContext=Ps.isAsyncIterable=Ps.isIterator=Ps.isIterableIterator=void 0;var rL=Nd(),aL=au();function jle(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}Ps.isIterableIterator=jle;var Ble=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function";Ps.isIterator=Ble;function Lle(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}Ps.isAsyncIterable=Lle;function*qle(n,e){for(;;){let{value:r,done:a}=rL.AsyncLocalStorageProviderSingleton.runWithConfig((0,aL.pickRunnableConfigKeys)(n),e.next.bind(e),!0);if(a)break;yield r}}Ps.consumeIteratorInContext=qle;async function*Ule(n,e){let r=e[Symbol.asyncIterator]();for(;;){let{value:a,done:i}=await rL.AsyncLocalStorageProviderSingleton.runWithConfig((0,aL.pickRunnableConfigKeys)(n),r.next.bind(e),!0);if(i)break;yield a}}Ps.consumeAsyncIterableInContext=Ule});var kn=te(Gr=>{"use strict";var $le=Gr&&Gr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.convertRunnableToTool=Gr.RunnableToolLike=Gr.RunnablePick=Gr.RunnableAssign=Gr._coerceToRunnable=Gr.RunnableWithFallbacks=Gr.RunnableParallel=Gr.RunnableLambda=Gr.RunnableTraceable=Gr.RunnableMap=Gr.RunnableSequence=Gr.RunnableRetry=Gr.RunnableEach=Gr.RunnableBinding=Gr.Runnable=Gr._coerceToDict=void 0;var u1=oi(),iL=$le(Ed()),Vle=(Xa(),fs(Tn)),aS=_9(),o1=p7(),sL=FB(),zle=co(),Da=vo(),rp=u7(),Mt=au(),Wle=t0(),lL=RB(),oL=y7(),tS=Nd(),cL=eS(),Gle=tL(),_o=nL(),uL=$2();function cn(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}Gr._coerceToDict=cn;var Fn=class extends zle.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){let r=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${r}${e}`:r}bind(e){return new vc({bound:this,kwargs:e,config:{}})}map(){return new wy({bound:this})}withRetry(e){return new l1({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new vc({bound:this,config:e,kwargs:{}})}withFallbacks(e){let r=Array.isArray(e)?e:e.fallbacks;return new Cy({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(Mt.ensureConfig);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let a=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:r},(i,s)=>(0,Mt.ensureConfig)(s===0?e:a))}return Array.from({length:r},()=>(0,Mt.ensureConfig)(e))}async batch(e,r,a){let i=this._getOptionsList(r??{},e.length),s=i[0]?.maxConcurrency??a?.maxConcurrency,t=new Wle.AsyncCaller({maxConcurrency:s,onFailedAttempt:l=>{throw l}}),o=e.map((l,d)=>t.call(async()=>{try{return await this.invoke(l,i[d])}catch(c){if(a?.returnExceptions)return c;throw c}}));return Promise.all(o)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){let a=(0,Mt.ensureConfig)(r),i=new Da.AsyncGeneratorWithSetup({generator:this._streamIterator(e,a),config:a});return await i.setup,Da.IterableReadableStream.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=(0,Mt.ensureConfig)(e):r=(0,Mt.ensureConfig)({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let a={...e};return delete a.callbacks,delete a.tags,delete a.metadata,delete a.runName,delete a.configurable,delete a.recursionLimit,delete a.maxConcurrency,delete a.runId,delete a.timeout,delete a.signal,[r,a]}async _callWithConfig(e,r,a){let i=(0,Mt.ensureConfig)(a),t=await(await(0,Mt.getCallbackManagerForConfig)(i))?.handleChainStart(this.toJSON(),cn(r,"input"),i.runId,i?.runType,void 0,void 0,i?.runName??this.getName());delete i.runId;let o;try{let l=e.call(this,r,i,t);o=await(0,rp.raceWithSignal)(l,a?.signal)}catch(l){throw await t?.handleChainError(l),l}return await t?.handleChainEnd(cn(o,"output")),o}async _batchWithConfig(e,r,a,i){let s=this._getOptionsList(a??{},r.length),t=await Promise.all(s.map(Mt.getCallbackManagerForConfig)),o=await Promise.all(t.map(async(d,c)=>{let y=await d?.handleChainStart(this.toJSON(),cn(r[c],"input"),s[c].runId,s[c].runType,void 0,void 0,s[c].runName??this.getName());return delete s[c].runId,y})),l;try{let d=e.call(this,r,s,o,i);l=await(0,rp.raceWithSignal)(d,s?.[0]?.signal)}catch(d){throw await Promise.all(o.map(c=>c?.handleChainError(d))),d}return await Promise.all(o.map(d=>d?.handleChainEnd(cn(l,"output")))),l}async*_transformStreamWithConfig(e,r,a){let i,s=!0,t,o=!0,l=(0,Mt.ensureConfig)(a),d=await(0,Mt.getCallbackManagerForConfig)(l);async function*c(){for await(let u of e){if(s)if(i===void 0)i=u;else try{i=(0,Da.concat)(i,u)}catch{i=void 0,s=!1}yield u}}let y;try{let u=await(0,Da.pipeGeneratorWithSetup)(r.bind(this),c(),async()=>d?.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),a?.signal,l);delete l.runId,y=u.setup;let S=y?.handlers.find(sL.isStreamEventsHandler),V=u.output;S!==void 0&&y!==void 0&&(V=S.tapOutputIterable(y.runId,V));let U=y?.handlers.find(o1.isLogStreamHandler);U!==void 0&&y!==void 0&&(V=U.tapOutputIterable(y.runId,V));for await(let z of V)if(yield z,o)if(t===void 0)t=z;else try{t=(0,Da.concat)(t,z)}catch{t=void 0,o=!1}}catch(u){throw await y?.handleChainError(u,void 0,void 0,void 0,{inputs:cn(i,"input")}),u}await y?.handleChainEnd(t??{},void 0,void 0,void 0,{inputs:cn(i,"input")})}getGraph(e){let r=new cL.Graph,a=r.addNode({name:`${this.getName()}Input`,schema:u1.z.any()}),i=r.addNode(this),s=r.addNode({name:`${this.getName()}Output`,schema:u1.z.any()});return r.addEdge(a,i),r.addEdge(i,s),r}pipe(e){return new c1({first:this,last:bc(e)})}pick(e){return this.pipe(new Ey(e))}assign(e){return this.pipe(new Ay(new ap({steps:e})))}async*transform(e,r){let a;for await(let i of e)a===void 0?a=i:a=(0,Da.concat)(a,i);yield*this._streamIterator(a,(0,Mt.ensureConfig)(r))}async*streamLog(e,r,a){let i=new o1.LogStreamCallbackHandler({...a,autoClose:!1,_schemaFormat:"original"}),s=(0,Mt.ensureConfig)(r);yield*this._streamLog(e,i,s)}async*_streamLog(e,r,a){let{callbacks:i}=a;if(i===void 0)a.callbacks=[r];else if(Array.isArray(i))a.callbacks=i.concat([r]);else{let l=i.copy();l.addHandler(r,!0),a.callbacks=l}let s=this.stream(e,a);async function t(){try{let l=await s;for await(let d of l){let c=new o1.RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:d}]});await r.writer.write(c)}}finally{await r.writer.close()}}let o=t();try{for await(let l of r)yield l}finally{await o}}streamEvents(e,r,a){let i;if(r.version==="v1")i=this._streamEventsV1(e,r,a);else if(r.version==="v2")i=this._streamEventsV2(e,r,a);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?(0,Gle.convertToHttpEventStream)(i):Da.IterableReadableStream.fromAsyncGenerator(i)}async*_streamEventsV2(e,r,a){let i=new sL.EventStreamCallbackHandler({...a,autoClose:!1}),s=(0,Mt.ensureConfig)(r),t=s.runId??(0,Vle.v4)();s.runId=t;let o=s.callbacks;if(o===void 0)s.callbacks=[i];else if(Array.isArray(o))s.callbacks=o.concat(i);else{let V=o.copy();V.addHandler(i,!0),s.callbacks=V}let l=new AbortController,d=this;async function c(){try{let V;r?.signal?"any"in AbortSignal?V=AbortSignal.any([l.signal,r.signal]):(V=r.signal,r.signal.addEventListener("abort",()=>{l.abort()},{once:!0})):V=l.signal;let U=await d.stream(e,{...s,signal:V}),z=i.tapOutputIterable(t,U);for await(let D of z)if(l.signal.aborted)break}finally{await i.finish()}}let y=c(),u=!1,S;try{for await(let V of i){if(!u){V.data.input=e,u=!0,S=V.run_id,yield V;continue}V.run_id===S&&V.event.endsWith("_end")&&V.data?.input&&delete V.data.input,yield V}}finally{l.abort(),await y}}async*_streamEventsV1(e,r,a){let i,s=!1,t=(0,Mt.ensureConfig)(r),o=t.tags??[],l=t.metadata??{},d=t.runName??this.getName(),c=new o1.LogStreamCallbackHandler({...a,autoClose:!1,_schemaFormat:"streaming_events"}),y=new oL._RootEventFilter({...a}),u=this._streamLog(e,c,t);for await(let V of u){if(i?i=i.concat(V):i=o1.RunLog.fromRunLogPatch(V),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;let k={...i.state},T={run_id:k.id,event:`on_${k.type}_start`,name:d,tags:o,metadata:l,data:{input:e}};y.includeEvent(T,k.type)&&(yield T)}let U=V.ops.filter(k=>k.path.startsWith("/logs/")).map(k=>k.path.split("/")[2]),z=[...new Set(U)];for(let k of z){let T,R={},g=i.state.logs[k];if(g.end_time===void 0?g.streamed_output.length>0?T="stream":T="start":T="end",T==="start")g.inputs!==void 0&&(R.input=g.inputs);else if(T==="end")g.inputs!==void 0&&(R.input=g.inputs),R.output=g.final_output;else if(T==="stream"){let m=g.streamed_output.length;if(m!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${m} instead. Encountered in: "${g.name}"`);R={chunk:g.streamed_output[0]},g.streamed_output=[]}yield{event:`on_${g.type}_${T}`,name:g.name,run_id:g.id,tags:g.tags,metadata:g.metadata,data:R}}let{state:D}=i;if(D.streamed_output.length>0){let k=D.streamed_output.length;if(k!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${k} instead. Encountered in: "${D.name}"`);let T={chunk:D.streamed_output[0]};D.streamed_output=[];let R={event:`on_${D.type}_stream`,run_id:D.id,tags:o,metadata:l,name:d,data:T};y.includeEvent(R,D.type)&&(yield R)}}let S=i?.state;if(S!==void 0){let V={event:`on_${S.type}_end`,name:d,run_id:S.id,tags:o,metadata:l,data:{output:S.final_output}};y.includeEvent(V,S.type)&&(yield V)}}static isRunnable(e){return(0,oL.isRunnableInterface)(e)}withListeners({onStart:e,onEnd:r,onError:a}){return new vc({bound:this,config:{},configFactories:[i=>({callbacks:[new lL.RootListenersTracer({config:i,onStart:e,onEnd:r,onError:a})]})]})}asTool(e){return dL(this,e)}};Gr.Runnable=Fn;var vc=class n extends Fn{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let r=(0,Mt.mergeConfigs)(this.config,...e);return(0,Mt.mergeConfigs)(r,...this.configFactories?await Promise.all(this.configFactories.map(async a=>await a(r))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new l1({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,r){return this.bound.invoke(e,await this._mergeConfig((0,Mt.ensureConfig)(r),this.kwargs))}async batch(e,r,a){let i=Array.isArray(r)?await Promise.all(r.map(async s=>this._mergeConfig((0,Mt.ensureConfig)(s),this.kwargs))):await this._mergeConfig((0,Mt.ensureConfig)(r),this.kwargs);return this.bound.batch(e,i,a)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,await this._mergeConfig((0,Mt.ensureConfig)(r),this.kwargs))}async stream(e,r){return this.bound.stream(e,await this._mergeConfig((0,Mt.ensureConfig)(r),this.kwargs))}async*transform(e,r){yield*this.bound.transform(e,await this._mergeConfig((0,Mt.ensureConfig)(r),this.kwargs))}streamEvents(e,r,a){let i=this,s=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig((0,Mt.ensureConfig)(r),i.kwargs),version:r.version},a)};return Da.IterableReadableStream.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&Fn.isRunnable(e.bound)}withListeners({onStart:e,onEnd:r,onError:a}){return new n({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new lL.RootListenersTracer({config:i,onStart:e,onEnd:r,onError:a})]})]})}};Gr.RunnableBinding=vc;var wy=class n extends Fn{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new n({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _invoke(e,r,a){return this.bound.batch(e,(0,Mt.patchConfig)(r,{callbacks:a?.getChild()}))}withListeners({onStart:e,onEnd:r,onError:a}){return new n({bound:this.bound.withListeners({onStart:e,onEnd:r,onError:a})})}};Gr.RunnableEach=wy;var l1=class extends vc{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,a){let i=e>1?`retry:attempt:${e}`:void 0;return(0,Mt.patchConfig)(r,{callbacks:a?.getChild(i)})}async _invoke(e,r,a){return(0,iL.default)(i=>super.invoke(e,this._patchConfigForRetry(i,r,a)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,a,i){let s={};try{await(0,iL.default)(async t=>{let o=e.map((u,S)=>S).filter(u=>s[u.toString()]===void 0||s[u.toString()]instanceof Error),l=o.map(u=>e[u]),d=o.map(u=>this._patchConfigForRetry(t,r?.[u],a?.[u])),c=await super.batch(l,d,{...i,returnExceptions:!0}),y;for(let u=0;u<c.length;u+=1){let S=c[u],V=o[u];S instanceof Error&&y===void 0&&(y=S,y.input=l[u]),s[V.toString()]=S}if(y)throw y;return c},{onFailedAttempt:t=>this.onFailedAttempt(t,t.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(t){if(i?.returnExceptions!==!0)throw t}return Object.keys(s).sort((t,o)=>parseInt(t,10)-parseInt(o,10)).map(t=>s[parseInt(t,10)])}async batch(e,r,a){return this._batchWithConfig(this._batch.bind(this),e,r,a)}};Gr.RunnableRetry=l1;var c1=class n extends Fn{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){let a=(0,Mt.ensureConfig)(r),s=await(await(0,Mt.getCallbackManagerForConfig)(a))?.handleChainStart(this.toJSON(),cn(e,"input"),a.runId,void 0,void 0,void 0,a?.runName);delete a.runId;let t=e,o;try{let l=[this.first,...this.middle];for(let d=0;d<l.length;d+=1){let y=l[d].invoke(t,(0,Mt.patchConfig)(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`)}));t=await(0,rp.raceWithSignal)(y,r?.signal)}if(r?.signal?.aborted)throw new Error("Aborted");o=await this.last.invoke(t,(0,Mt.patchConfig)(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await s?.handleChainError(l),l}return await s?.handleChainEnd(cn(o,"output")),o}async batch(e,r,a){let i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(Mt.getCallbackManagerForConfig)),t=await Promise.all(s.map(async(l,d)=>{let c=await l?.handleChainStart(this.toJSON(),cn(e[d],"input"),i[d].runId,void 0,void 0,void 0,i[d].runName);return delete i[d].runId,c})),o=e;try{for(let l=0;l<this.steps.length;l+=1){let c=this.steps[l].batch(o,t.map((y,u)=>{let S=y?.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return(0,Mt.patchConfig)(i[u],{callbacks:S})}),a);o=await(0,rp.raceWithSignal)(c,i[0]?.signal)}}catch(l){throw await Promise.all(t.map(d=>d?.handleChainError(l))),l}return await Promise.all(t.map(l=>l?.handleChainEnd(cn(o,"output")))),o}async*_streamIterator(e,r){let a=await(0,Mt.getCallbackManagerForConfig)(r),{runId:i,...s}=r??{},t=await a?.handleChainStart(this.toJSON(),cn(e,"input"),i,void 0,void 0,void 0,s?.runName),o=[this.first,...this.middle,this.last],l=!0,d;async function*c(){yield e}try{let y=o[0].transform(c(),(0,Mt.patchConfig)(s,{callbacks:t?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let u=1;u<o.length;u+=1)y=await o[u].transform(y,(0,Mt.patchConfig)(s,{callbacks:t?.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`)}));for await(let u of y)if(r?.signal?.throwIfAborted(),yield u,l)if(d===void 0)d=u;else try{d=(0,Da.concat)(d,u)}catch{d=void 0,l=!1}}catch(y){throw await t?.handleChainError(y),y}await t?.handleChainEnd(cn(d,"output"))}getGraph(e){let r=new cL.Graph,a=null;return this.steps.forEach((i,s)=>{let t=i.getGraph(e);s!==0&&t.trimFirstNode(),s!==this.steps.length-1&&t.trimLastNode(),r.extend(t);let o=t.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);a&&r.addEdge(a,o),a=t.lastNode()}),r}pipe(e){return n.isRunnableSequence(e)?new n({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new n({first:this.first,middle:[...this.middle,this.last],last:bc(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Fn.isRunnable(e)}static from([e,...r],a){let i={};return typeof a=="string"?i.name=a:a!==void 0&&(i=a),new n({...i,first:bc(e),middle:r.slice(0,-1).map(bc),last:bc(r[r.length-1])})}};Gr.RunnableSequence=c1;var ap=class n extends Fn{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,a]of Object.entries(e.steps))this.steps[r]=bc(a)}static from(e){return new n({steps:e})}async invoke(e,r){let a=(0,Mt.ensureConfig)(r),s=await(await(0,Mt.getCallbackManagerForConfig)(a))?.handleChainStart(this.toJSON(),{input:e},a.runId,void 0,void 0,void 0,a?.runName);delete a.runId;let t={};try{let o=Object.entries(this.steps).map(async([l,d])=>{t[l]=await d.invoke(e,(0,Mt.patchConfig)(a,{callbacks:s?.getChild(`map:key:${l}`)}))});await(0,rp.raceWithSignal)(Promise.all(o),r?.signal)}catch(o){throw await s?.handleChainError(o),o}return await s?.handleChainEnd(t),t}async*_transform(e,r,a){let i={...this.steps},s=(0,Da.atee)(e,Object.keys(i).length),t=new Map(Object.entries(i).map(([o,l],d)=>{let c=l.transform(s[d],(0,Mt.patchConfig)(a,{callbacks:r?.getChild(`map:key:${o}`)}));return[o,c.next().then(y=>({key:o,gen:c,result:y}))]}));for(;t.size;){let o=Promise.race(t.values()),{key:l,result:d,gen:c}=await(0,rp.raceWithSignal)(o,a?.signal);t.delete(l),d.done||(yield{[l]:d.value},t.set(l,c.next().then(y=>({key:l,gen:c,result:y}))))}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=(0,Mt.ensureConfig)(r),s=new Da.AsyncGeneratorWithSetup({generator:this.transform(a(),i),config:i});return await s.setup,Da.IterableReadableStream.fromAsyncGenerator(s)}};Gr.RunnableMap=ap;var Sy=class n extends Fn{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!(0,aS.isTraceableFunction)(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,r){let[a]=this._getOptionsList(r??{},1),i=await(0,Mt.getCallbackManagerForConfig)(a),s=this.func((0,Mt.patchConfig)(a,{callbacks:i}),e);return(0,rp.raceWithSignal)(s,a?.signal)}async*_streamIterator(e,r){let[a]=this._getOptionsList(r??{},1),i=await this.invoke(e,r);if((0,_o.isAsyncIterable)(i)){for await(let s of i)a?.signal?.throwIfAborted(),yield s;return}if((0,_o.isIterator)(i)){for(;;){a?.signal?.throwIfAborted();let s=i.next();if(s.done)break;yield s.value}return}yield i}static from(e){return new n({func:e})}};Gr.RunnableTraceable=Sy;function Hle(n){if((0,aS.isTraceableFunction)(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var d1=class n extends Fn{static lc_name(){return"RunnableLambda"}constructor(e){if((0,aS.isTraceableFunction)(e.func))return Sy.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Hle(e.func),this.func=e.func}static from(e){return new n({func:e})}async _invoke(e,r,a){return new Promise((i,s)=>{let t=(0,Mt.patchConfig)(r,{callbacks:a?.getChild(),recursionLimit:(r?.recursionLimit??Mt.DEFAULT_RECURSION_LIMIT)-1});tS.AsyncLocalStorageProviderSingleton.runWithConfig((0,Mt.pickRunnableConfigKeys)(t),async()=>{try{let o=await this.func(e,{...t});if(o&&Fn.isRunnable(o)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");o=await o.invoke(e,{...t,recursionLimit:(t.recursionLimit??Mt.DEFAULT_RECURSION_LIMIT)-1})}else if((0,_o.isAsyncIterable)(o)){let l;for await(let d of(0,_o.consumeAsyncIterableInContext)(t,o))if(r?.signal?.throwIfAborted(),l===void 0)l=d;else try{l=(0,Da.concat)(l,d)}catch{l=d}o=l}else if((0,_o.isIterableIterator)(o)){let l;for(let d of(0,_o.consumeIteratorInContext)(t,o))if(r?.signal?.throwIfAborted(),l===void 0)l=d;else try{l=(0,Da.concat)(l,d)}catch{l=d}o=l}i(o)}catch(o){s(o)}})})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async*_transform(e,r,a){let i;for await(let o of e)if(i===void 0)i=o;else try{i=(0,Da.concat)(i,o)}catch{i=o}let s=(0,Mt.patchConfig)(a,{callbacks:r?.getChild(),recursionLimit:(a?.recursionLimit??Mt.DEFAULT_RECURSION_LIMIT)-1}),t=await new Promise((o,l)=>{tS.AsyncLocalStorageProviderSingleton.runWithConfig((0,Mt.pickRunnableConfigKeys)(s),async()=>{try{let d=await this.func(i,{...s,config:s});o(d)}catch(d){l(d)}})});if(t&&Fn.isRunnable(t)){if(a?.recursionLimit===0)throw new Error("Recursion limit reached.");let o=await t.stream(i,s);for await(let l of o)yield l}else if((0,_o.isAsyncIterable)(t))for await(let o of(0,_o.consumeAsyncIterableInContext)(s,t))a?.signal?.throwIfAborted(),yield o;else if((0,_o.isIterableIterator)(t))for(let o of(0,_o.consumeIteratorInContext)(s,t))a?.signal?.throwIfAborted(),yield o;else yield t}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=(0,Mt.ensureConfig)(r),s=new Da.AsyncGeneratorWithSetup({generator:this.transform(a(),i),config:i});return await s.setup,Da.IterableReadableStream.fromAsyncGenerator(s)}};Gr.RunnableLambda=d1;var rS=class extends ap{};Gr.RunnableParallel=rS;var Cy=class extends Fn{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,r){let a=(0,Mt.ensureConfig)(r),i=await(0,Mt.getCallbackManagerForConfig)(a),{runId:s,...t}=a,o=await i?.handleChainStart(this.toJSON(),cn(e,"input"),s,void 0,void 0,void 0,t?.runName),l=(0,Mt.patchConfig)(t,{callbacks:o?.getChild()});return await tS.AsyncLocalStorageProviderSingleton.runWithConfig(l,async()=>{let c;for(let y of this.runnables()){a?.signal?.throwIfAborted();try{let u=await y.invoke(e,l);return await o?.handleChainEnd(cn(u,"output")),u}catch(u){c===void 0&&(c=u)}}throw c===void 0?new Error("No error stored at end of fallback."):(await o?.handleChainError(c),c)})}async*_streamIterator(e,r){let a=(0,Mt.ensureConfig)(r),i=await(0,Mt.getCallbackManagerForConfig)(a),{runId:s,...t}=a,o=await i?.handleChainStart(this.toJSON(),cn(e,"input"),s,void 0,void 0,void 0,t?.runName),l,d;for(let y of this.runnables()){a?.signal?.throwIfAborted();let u=(0,Mt.patchConfig)(t,{callbacks:o?.getChild()});try{let S=await y.stream(e,u);d=(0,_o.consumeAsyncIterableInContext)(u,S);break}catch(S){l===void 0&&(l=S)}}if(d===void 0){let y=l??new Error("No error stored at end of fallback.");throw await o?.handleChainError(y),y}let c;try{for await(let y of d){yield y;try{c=c===void 0?c:(0,Da.concat)(c,y)}catch{c=void 0}}}catch(y){throw await o?.handleChainError(y),y}await o?.handleChainEnd(cn(c,"output"))}async batch(e,r,a){if(a?.returnExceptions)throw new Error("Not implemented.");let i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(l=>(0,Mt.getCallbackManagerForConfig)(l))),t=await Promise.all(s.map(async(l,d)=>{let c=await l?.handleChainStart(this.toJSON(),cn(e[d],"input"),i[d].runId,void 0,void 0,void 0,i[d].runName);return delete i[d].runId,c})),o;for(let l of this.runnables()){i[0].signal?.throwIfAborted();try{let d=await l.batch(e,t.map((c,y)=>(0,Mt.patchConfig)(i[y],{callbacks:c?.getChild()})),a);return await Promise.all(t.map((c,y)=>c?.handleChainEnd(cn(d[y],"output")))),d}catch(d){o===void 0&&(o=d)}}throw o?(await Promise.all(t.map(l=>l?.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};Gr.RunnableWithFallbacks=Cy;function bc(n){if(typeof n=="function")return new d1({func:n});if(Fn.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){let e={};for(let[r,a]of Object.entries(n))e[r]=bc(a);return new ap({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}Gr._coerceToRunnable=bc;var Ay=class extends Fn{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof ap&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,r){let a=await this.mapper.invoke(e,r);return{...e,...a}}async*_transform(e,r,a){let i=this.mapper.getStepsKeys(),[s,t]=(0,Da.atee)(e),o=this.mapper.transform(t,(0,Mt.patchConfig)(a,{callbacks:r?.getChild()})),l=o.next();for await(let d of s){if(typeof d!="object"||Array.isArray(d))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof d}`);let c=Object.fromEntries(Object.entries(d).filter(([y])=>!i.includes(y)));Object.keys(c).length>0&&(yield c)}yield(await l).value;for await(let d of o)yield d}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=(0,Mt.ensureConfig)(r),s=new Da.AsyncGeneratorWithSetup({generator:this.transform(a(),i),config:i});return await s.setup,Da.IterableReadableStream.fromAsyncGenerator(s)}};Gr.RunnableAssign=Ay;var Ey=class extends Fn{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let r=this.keys.map(a=>[a,e[a]]).filter(a=>a[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(let r of e){let a=await this._pick(r);a!==void 0&&(yield a)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=(0,Mt.ensureConfig)(r),s=new Da.AsyncGeneratorWithSetup({generator:this.transform(a(),i),config:i});return await s.setup,Da.IterableReadableStream.fromAsyncGenerator(s)}};Gr.RunnablePick=Ey;var p1=class extends vc{constructor(e){let r=c1.from([d1.from(async a=>{let i;if((0,uL._isToolCall)(a))try{i=await this.schema.parseAsync(a.args)}catch{throw new uL.ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(a.args))}else i=a;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};Gr.RunnableToolLike=p1;function dL(n,e){let r=e.name??n.getName(),a=e.description??e.schema?.description;return e.schema.constructor===u1.z.ZodString?new p1({name:r,description:a,schema:u1.z.object({input:u1.z.string()}).transform(i=>i.input),bound:n}):new p1({name:r,description:a,schema:e.schema,bound:n})}Gr.convertRunnableToTool=dL});var iS=te(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});Py.RemoveMessage=void 0;var Kle=ys(),nS=class extends Kle.BaseMessage{constructor(e){super({...e,content:""}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id}_getType(){return"remove"}get _printableFields(){return{...super._printableFields,id:this.id}}};Py.RemoveMessage=nS});var _L=te(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.defaultTextSplitter=su.trimMessages=su.mergeMessageRuns=su.filterMessages=void 0;var sS=kn(),Ty=kd(),Zle=ys(),Oy=G2(),Fy=H2(),ky=Gm(),pL=iS(),yc=K2(),Ry=jf(),fL=bl(),Iy=(n,e)=>{let r=[...new Set(e?.map(i=>{if(typeof i=="string")return i;let s=new i({});if(!("getType"in s)||typeof s.getType!="function")throw new Error("Invalid type provided.");return s.getType()}))],a=n.getType();return r.some(i=>i===a)};function Jle(n,e){return Array.isArray(n)?hL(n,e):sS.RunnableLambda.from(r=>hL(r,n))}su.filterMessages=Jle;function hL(n,e={}){let{includeNames:r,excludeNames:a,includeTypes:i,excludeTypes:s,includeIds:t,excludeIds:o}=e,l=[];for(let d of n)if(!(a&&d.name&&a.includes(d.name))){{if(s&&Iy(d,s))continue;if(o&&d.id&&o.includes(d.id))continue}i||t||r?(r&&d.name&&r.some(c=>c===d.name)||i&&Iy(d,i)||t&&d.id&&t.some(c=>c===d.id))&&l.push(d):l.push(d)}return l}function Xle(n){return Array.isArray(n)?mL(n):sS.RunnableLambda.from(mL)}su.mergeMessageRuns=Xle;function mL(n){if(!n.length)return[];let e=[];for(let r of n){let a=r,i=e.pop();if(!i)e.push(a);else if(a.getType()==="tool"||a.getType()!==i.getType())e.push(i,a);else{let s=(0,fL.convertToChunk)(i),t=(0,fL.convertToChunk)(a),o=s.concat(t);typeof s.content=="string"&&typeof t.content=="string"&&(o.content=`${s.content}
${t.content}`),e.push(ece(o))}}return e}function Yle(n,e){if(Array.isArray(n)){let r=n;if(!e)throw new Error("Options parameter is required when providing messages.");return gL(r,e)}else{let r=n;return sS.RunnableLambda.from(a=>gL(a,r)).withConfig({runName:"trim_messages"})}}su.trimMessages=Yle;async function gL(n,e){let{maxTokens:r,tokenCounter:a,strategy:i="last",allowPartial:s=!1,endOn:t,startOn:o,includeSystem:l=!1,textSplitter:d}=e;if(o&&i==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&i==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let c;"getNumTokens"in a?c=async u=>(await Promise.all(u.map(V=>a.getNumTokens(V.content)))).reduce((V,U)=>V+U,0):c=async u=>a(u);let y=yL;if(d&&("splitText"in d?y=d.splitText:y=async u=>d(u)),i==="first")return vL(n,{maxTokens:r,tokenCounter:c,textSplitter:y,partialStrategy:s?"first":void 0,endOn:t});if(i==="last")return Qle(n,{maxTokens:r,tokenCounter:c,textSplitter:y,allowPartial:s,includeSystem:l,startOn:o,endOn:t});throw new Error(`Unrecognized strategy: '${i}'. Must be one of 'first' or 'last'.`)}async function vL(n,e){let{maxTokens:r,tokenCounter:a,textSplitter:i,partialStrategy:s,endOn:t}=e,o=[...n],l=0;for(let d=0;d<o.length;d+=1){let c=d>0?o.slice(0,-d):o;if(await a(c)<=r){l=o.length-d;break}}if(l<o.length-1&&s){let d=!1;if(Array.isArray(o[l].content)){let c=o[l];if(typeof c.content=="string")throw new Error("Expected content to be an array.");let y=c.content.length,u=s==="last"?[...c.content].reverse():c.content;for(let S=1;S<=y;S+=1){let V=s==="first"?u.slice(0,S):u.slice(-S),U=Object.fromEntries(Object.entries(c).filter(([k])=>k!=="type"&&!k.startsWith("lc_"))),z=oS(c.getType(),{...U,content:V}),D=[...o.slice(0,l),z];if(await a(D)<=r)o=D,l+=1,d=!0;else break}d&&s==="last"&&(c.content=[...u].reverse())}if(!d){let c=o[l],y;if(Array.isArray(c.content)&&c.content.some(u=>typeof u=="string"||u.type==="text")?y=c.content.find(S=>S.type==="text"&&S.text)?.text:typeof c.content=="string"&&(y=c.content),y){let u=await i(y),S=u.length;s==="last"&&u.reverse();for(let V=0;V<S-1;V+=1)if(u.pop(),c.content=u.join(""),await a([...o.slice(0,l),c])<=r){s==="last"&&(c.content=[...u].reverse().join("")),o=[...o.slice(0,l),c],l+=1;break}}}}if(t){let d=Array.isArray(t)?t:[t];for(;l>0&&!Iy(o[l-1],d);)l-=1}return o.slice(0,l)}async function Qle(n,e){let{allowPartial:r=!1,includeSystem:a=!1,endOn:i,startOn:s,...t}=e,o=n.map(c=>{let y=Object.fromEntries(Object.entries(c).filter(([u])=>u!=="type"&&!u.startsWith("lc_")));return oS(c.getType(),y,(0,Zle.isBaseMessageChunk)(c))});if(i){let c=Array.isArray(i)?i:[i];for(;o.length>0&&!Iy(o[o.length-1],c);)o=o.slice(0,-1)}let l=a&&o[0]?.getType()==="system",d=l?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return d=await vL(d,{...t,partialStrategy:r?"last":void 0,endOn:s}),l?[d[0],...d.slice(1).reverse()]:d.reverse()}var bL={human:{message:ky.HumanMessage,messageChunk:ky.HumanMessageChunk},ai:{message:Ty.AIMessage,messageChunk:Ty.AIMessageChunk},system:{message:yc.SystemMessage,messageChunk:yc.SystemMessageChunk},developer:{message:yc.SystemMessage,messageChunk:yc.SystemMessageChunk},tool:{message:Ry.ToolMessage,messageChunk:Ry.ToolMessageChunk},function:{message:Fy.FunctionMessage,messageChunk:Fy.FunctionMessageChunk},generic:{message:Oy.ChatMessage,messageChunk:Oy.ChatMessageChunk},remove:{message:pL.RemoveMessage,messageChunk:pL.RemoveMessage}};function oS(n,e,r){let a,i;switch(n){case"human":r?a=new ky.HumanMessageChunk(e):i=new ky.HumanMessage(e);break;case"ai":if(r){let s={...e};"tool_calls"in s&&(s={...s,tool_call_chunks:s.tool_calls?.map(t=>({...t,type:"tool_call_chunk",index:void 0,args:JSON.stringify(t.args)}))}),a=new Ty.AIMessageChunk(s)}else i=new Ty.AIMessage(e);break;case"system":r?a=new yc.SystemMessageChunk(e):i=new yc.SystemMessage(e);break;case"developer":r?a=new yc.SystemMessageChunk({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}}):i=new yc.SystemMessage({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in e)r?a=new Ry.ToolMessageChunk(e):i=new Ry.ToolMessage(e);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(r)a=new Fy.FunctionMessageChunk(e);else{if(!e.name)throw new Error("FunctionMessage must have a 'name' field");i=new Fy.FunctionMessage(e)}break;case"generic":if("role"in e)r?a=new Oy.ChatMessageChunk(e):i=new Oy.ChatMessage(e);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${n}`)}if(r&&a)return a;if(i)return i;throw new Error(`Unrecognized message type ${n}`)}function ece(n){let e=n.getType(),r,a=Object.fromEntries(Object.entries(n).filter(([i])=>!["type","tool_call_chunks"].includes(i)&&!i.startsWith("lc_")));if(e in bL&&(r=oS(e,a)),!r)throw new Error(`Unrecognized message chunk class ${e}. Supported classes are ${Object.keys(bL)}`);return r}function yL(n){let e=n.split(`
`);return Promise.resolve([...e.slice(0,-1).map(r=>`${r}
`),e[e.length-1]])}su.defaultTextSplitter=yL});var xl=te(Fa=>{"use strict";var tce=Fa&&Fa.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),ou=Fa&&Fa.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tce(e,n,r)};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.isToolMessageChunk=Fa.isToolMessage=Fa.ToolMessageChunk=Fa.ToolMessage=void 0;ou(kd(),Fa);ou(ys(),Fa);ou(G2(),Fa);ou(H2(),Fa);ou(Gm(),Fa);ou(K2(),Fa);ou(bl(),Fa);ou(_L(),Fa);ou(iS(),Fa);ou(e9(),Fa);var Dy=jf();Object.defineProperty(Fa,"ToolMessage",{enumerable:!0,get:function(){return Dy.ToolMessage}});Object.defineProperty(Fa,"ToolMessageChunk",{enumerable:!0,get:function(){return Dy.ToolMessageChunk}});Object.defineProperty(Fa,"isToolMessage",{enumerable:!0,get:function(){return Dy.isToolMessage}});Object.defineProperty(Fa,"isToolMessageChunk",{enumerable:!0,get:function(){return Dy.isToolMessageChunk}})});var dS=te(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.InMemoryChatMessageHistory=_c.BaseListChatMessageHistory=_c.BaseChatMessageHistory=void 0;var xL=co(),uS=xl(),lS=class extends xL.Serializable{async addMessages(e){for(let r of e)await this.addMessage(r)}};_c.BaseChatMessageHistory=lS;var Ny=class extends xL.Serializable{addUserMessage(e){return this.addMessage(new uS.HumanMessage(e))}addAIChatMessage(e){return this.addMessage(new uS.AIMessage(e))}addAIMessage(e){return this.addMessage(new uS.AIMessage(e))}async addMessages(e){for(let r of e)await this.addMessage(r)}clear(){throw new Error("Not implemented.")}};_c.BaseListChatMessageHistory=Ny;var cS=class extends Ny{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}};_c.InMemoryChatMessageHistory=cS});var jy=te(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.Document=void 0;var pS=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}};My.Document=pS});var wL=te(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});i0.MappingDocumentTransformer=i0.BaseDocumentTransformer=void 0;var rce=kn(),By=class extends rce.Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,r){return this.transformDocuments(e)}};i0.BaseDocumentTransformer=By;var fS=class extends By{async transformDocuments(e){let r=[];for(let a of e){let i=await this._transformDocument(a);r.push(i)}return r}};i0.MappingDocumentTransformer=fS});var hS=te(xc=>{"use strict";var ace=xc&&xc.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),SL=xc&&xc.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ace(e,n,r)};Object.defineProperty(xc,"__esModule",{value:!0});SL(jy(),xc);SL(wL(),xc)});var qy=te(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.Embeddings=void 0;var nce=t0(),mS=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new nce.AsyncCaller(e??{})}};Ly.Embeddings=mS});var $y=te(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.BaseExampleSelector=void 0;var ice=co(),gS=class extends ice.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","example_selectors","base"]})}};Uy.BaseExampleSelector=gS});var CL=te(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.isChatModel=uu.isLLM=uu.ConditionalPromptSelector=uu.BasePromptSelector=void 0;var Vy=class{async getPromptAsync(e,r){return this.getPrompt(e).partial(r?.partialVariables??{})}};uu.BasePromptSelector=Vy;var bS=class extends Vy{constructor(e,r=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=r}getPrompt(e){for(let[r,a]of this.conditionals)if(r(e))return a;return this.defaultPrompt}};uu.ConditionalPromptSelector=bS;function sce(n){return n._modelType()==="base_llm"}uu.isLLM=sce;function oce(n){return n._modelType()==="base_chat_model"}uu.isChatModel=oce});var EL=te(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});zy.LengthBasedExampleSelector=void 0;var uce=$y();function AL(n){return n.split(/\n| /).length}var vS=class n extends uce.BaseExampleSelector{constructor(e){super(e),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getTextLength",{enumerable:!0,configurable:!0,writable:!0,value:AL}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"exampleTextLengths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.examplePrompt=e.examplePrompt,this.maxLength=e.maxLength??2048,this.getTextLength=e.getTextLength??AL}async addExample(e){this.examples.push(e);let r=await this.examplePrompt.format(e);this.exampleTextLengths.push(this.getTextLength(r))}async calculateExampleTextLengths(e,r){if(e.length>0)return e;let{examples:a,examplePrompt:i}=r;return(await Promise.all(a.map(t=>i.format(t)))).map(t=>this.getTextLength(t))}async selectExamples(e){let r=Object.values(e).join(" "),a=this.maxLength-this.getTextLength(r),i=0,s=[];for(;a>0&&i<this.examples.length;){let t=a-this.exampleTextLengths[i];if(t<0)break;s.push(this.examples[i]),a=t,i+=1}return s}static async fromExamples(e,r){let a=new n(r);return await Promise.all(e.map(i=>a.addExample(i))),a}};zy.LengthBasedExampleSelector=vS});var PL=te(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});Wy.SemanticSimilarityExampleSelector=void 0;var lce=jy(),cce=$y();function yS(n){return Object.keys(n).sort().map(e=>n[e])}var _S=class n extends cce.BaseExampleSelector{constructor(e){if(super(e),Object.defineProperty(this,"vectorStoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleKeys=e.exampleKeys,this.inputKeys=e.inputKeys,e.vectorStore!==void 0)this.vectorStoreRetriever=e.vectorStore.asRetriever({k:e.k??4,filter:e.filter});else if(e.vectorStoreRetriever)this.vectorStoreRetriever=e.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}async addExample(e){let r=this.inputKeys??Object.keys(e),a=yS(r.reduce((i,s)=>({...i,[s]:e[s]}),{})).join(" ");await this.vectorStoreRetriever.addDocuments([new lce.Document({pageContent:a,metadata:e})])}async selectExamples(e){let r=this.inputKeys??Object.keys(e),a=yS(r.reduce((t,o)=>({...t,[o]:e[o]}),{})).join(" "),s=(await this.vectorStoreRetriever.invoke(a)).map(t=>t.metadata);return this.exampleKeys?s.map(t=>this.exampleKeys.reduce((o,l)=>({...o,[l]:t[l]}),{})):s}static async fromExamples(e,r,a,i={}){let s=i.inputKeys??null,t=e.map(l=>yS(s?s.reduce((d,c)=>({...d,[c]:l[c]}),{}):l).join(" ")),o=await a.fromTexts(t,e,r,i);return new n({vectorStore:o,k:i.k??4,exampleKeys:i.exampleKeys,inputKeys:i.inputKeys})}};Wy.SemanticSimilarityExampleSelector=_S});var TL=te(lu=>{"use strict";var dce=lu&&lu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Gy=lu&&lu.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dce(e,n,r)};Object.defineProperty(lu,"__esModule",{value:!0});Gy($y(),lu);Gy(CL(),lu);Gy(EL(),lu);Gy(PL(),lu)});var o0=te(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.ImagePromptValue=cu.ChatPromptValue=cu.StringPromptValue=cu.BasePromptValue=void 0;var pce=co(),OL=Gm(),fce=bl(),s0=class extends pce.Serializable{};cu.BasePromptValue=s0;var xS=class extends s0{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new OL.HumanMessage(this.value)]}};cu.StringPromptValue=xS;var wS=class extends s0{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return(0,fce.getBufferString)(this.messages)}toChatMessages(){return this.messages}};cu.ChatPromptValue=wS;var SS=class extends s0{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new OL.HumanMessage({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}};cu.ImagePromptValue=SS});var RL=te(Hy=>{"use strict";Hy.byteLength=mce;Hy.toByteArray=bce;Hy.fromByteArray=_ce;var du=[],Ts=[],hce=typeof Uint8Array<"u"?Uint8Array:Array,CS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(np=0,FL=CS.length;np<FL;++np)du[np]=CS[np],Ts[CS.charCodeAt(np)]=np;var np,FL;Ts[45]=62;Ts[95]=63;function kL(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=n.indexOf("=");r===-1&&(r=e);var a=r===e?0:4-r%4;return[r,a]}function mce(n){var e=kL(n),r=e[0],a=e[1];return(r+a)*3/4-a}function gce(n,e,r){return(e+r)*3/4-r}function bce(n){var e,r=kL(n),a=r[0],i=r[1],s=new hce(gce(n,a,i)),t=0,o=i>0?a-4:a,l;for(l=0;l<o;l+=4)e=Ts[n.charCodeAt(l)]<<18|Ts[n.charCodeAt(l+1)]<<12|Ts[n.charCodeAt(l+2)]<<6|Ts[n.charCodeAt(l+3)],s[t++]=e>>16&255,s[t++]=e>>8&255,s[t++]=e&255;return i===2&&(e=Ts[n.charCodeAt(l)]<<2|Ts[n.charCodeAt(l+1)]>>4,s[t++]=e&255),i===1&&(e=Ts[n.charCodeAt(l)]<<10|Ts[n.charCodeAt(l+1)]<<4|Ts[n.charCodeAt(l+2)]>>2,s[t++]=e>>8&255,s[t++]=e&255),s}function vce(n){return du[n>>18&63]+du[n>>12&63]+du[n>>6&63]+du[n&63]}function yce(n,e,r){for(var a,i=[],s=e;s<r;s+=3)a=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(vce(a));return i.join("")}function _ce(n){for(var e,r=n.length,a=r%3,i=[],s=16383,t=0,o=r-a;t<o;t+=s)i.push(yce(n,t,t+s>o?o:t+s));return a===1?(e=n[r-1],i.push(du[e>>2]+du[e<<4&63]+"==")):a===2&&(e=(n[r-2]<<8)+n[r-1],i.push(du[e>>10]+du[e>>4&63]+du[e<<2&63]+"=")),i.join("")}});var DL=te(ES=>{"use strict";var xce=RL();function wce(n){return n&&n.__esModule?n:{default:n}}var Sce=wce(xce),Cce=Object.defineProperty,Ace=(n,e,r)=>e in n?Cce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ece=(n,e,r)=>(Ace(n,typeof e!="symbol"?e+"":e,r),r);function Pce(n,e){let r=Array.from({length:n.length},(a,i)=>({start:i,end:i+1}));for(;r.length>1;){let a=null;for(let i=0;i<r.length-1;i++){let s=n.slice(r[i].start,r[i+1].end),t=e.get(s.join(","));t!=null&&(a==null||t<a[0])&&(a=[t,i])}if(a!=null){let i=a[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function Tce(n,e){return n.length===1?[e.get(n.join(","))]:Pce(n,e).map(r=>e.get(n.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function Oce(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var AS=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(n,e){this.patStr=n.pat_str;let r=n.bpe_ranks.split(`
`).filter(Boolean).reduce((a,i)=>{let[s,t,...o]=i.split(" "),l=Number.parseInt(t,10);return o.forEach((d,c)=>a[d]=l+c),a},{});for(let[a,i]of Object.entries(r)){let s=Sce.default.toByteArray(a);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...n.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((a,[i,s])=>(a[s]=this.textEncoder.encode(i),a),{})}encode(n,e=[],r="all"){let a=new RegExp(this.patStr,"ug"),i=AS.specialTokenRegex(Object.keys(this.specialTokens)),s=[],t=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(d=>!t.has(d)):r);if(o.size>0){let d=AS.specialTokenRegex([...o]),c=n.match(d);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let l=0;for(;;){let d=null,c=l;for(;i.lastIndex=c,d=i.exec(n),!(d==null||t.has(d[0]));)c=d.index+1;let y=d?.index??n.length;for(let S of n.substring(l,y).matchAll(a)){let V=this.textEncoder.encode(S[0]),U=this.rankMap.get(V.join(","));if(U!=null){s.push(U);continue}s.push(...Tce(V,this.rankMap))}if(d==null)break;let u=this.specialTokens[d[0]];s.push(u),l=d.index+d[0].length}return s}decode(n){let e=[],r=0;for(let s=0;s<n.length;++s){let t=n[s],o=this.textMap.get(t)??this.inverseSpecialTokens[t];o!=null&&(e.push(o),r+=o.length)}let a=new Uint8Array(r),i=0;for(let s of e)a.set(s,i),i+=s.length;return this.textDecoder.decode(a)}},IL=AS;Ece(IL,"specialTokenRegex",n=>new RegExp(n.map(e=>Oce(e)).join("|"),"g"));function Fce(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}ES.Tiktoken=IL;ES.getEncodingNameForModel=Fce});var Zy=te(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});u0.encodingForModel=u0.getEncoding=void 0;var NL=DL(),kce=t0(),Ky={},Rce=new kce.AsyncCaller({});async function ML(n){return n in Ky||(Ky[n]=Rce.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new NL.Tiktoken(e)).catch(e=>{throw delete Ky[n],e})),await Ky[n]}u0.getEncoding=ML;async function Ice(n){return ML((0,NL.getEncodingNameForModel)(n))}u0.encodingForModel=Ice});var l0=te(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.BaseLanguageModel=en.BaseLangChain=en.calculateMaxTokens=en.isOpenAITool=en.getModelContextSize=en.getEmbeddingContextSize=en.getModelNameForTiktoken=void 0;var Dce=U9(),jL=o0(),Nce=bl(),Mce=t0(),BL=Zy(),jce=kn(),Bce=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n;en.getModelNameForTiktoken=Bce;var Lce=n=>{switch(n){case"text-embedding-ada-002":return 8191;default:return 2046}};en.getEmbeddingContextSize=Lce;var qce=n=>{switch((0,en.getModelNameForTiktoken)(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}};en.getModelContextSize=qce;function Uce(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}en.isOpenAITool=Uce;var $ce=async({prompt:n,modelName:e})=>{let r;try{r=(await(0,BL.encodingForModel)((0,en.getModelNameForTiktoken)(e))).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(n.length/4)}return(0,en.getModelContextSize)(e)-r};en.calculateMaxTokens=$ce;var Vce=()=>!1,Jy=class extends jce.Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??Vce(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}};en.BaseLangChain=Jy;var PS=class extends Jy{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...a}){let{cache:i,...s}=a;super({callbacks:e??r,...s}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=Dce.InMemoryCache.global():this.cache=void 0,this.caller=new Mce.AsyncCaller(a??{})}async getNumTokens(e){if(typeof e!="string")return 0;let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await(0,BL.encodingForModel)("modelName"in this?(0,en.getModelNameForTiktoken)(this.modelName):"gpt2")}catch(a){console.warn("Failed to calculate number of tokens, falling back to approximate count",a)}if(this._encoding)try{r=this._encoding.encode(e).length}catch(a){console.warn("Failed to calculate number of tokens, falling back to approximate count",a)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new jL.StringPromptValue(e):Array.isArray(e)?new jL.ChatPromptValue(e.map(Nce.coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...r}){let a={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(a).filter(([t,o])=>o!==void 0).map(([t,o])=>`${t}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}};en.BaseLanguageModel=PS});var Yy=te(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});Xy.RunnablePassthrough=void 0;var zce=vo(),TS=kn(),LL=au(),OS=class extends TS.Runnable{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,r){let a=(0,LL.ensureConfig)(r);return this.func&&await this.func(e,a),this._callWithConfig(i=>Promise.resolve(i),e,a)}async*transform(e,r){let a=(0,LL.ensureConfig)(r),i,s=!0;for await(let t of this._transformStreamWithConfig(e,o=>o,a))if(yield t,s)if(i===void 0)i=t;else try{i=(0,zce.concat)(i,t)}catch{i=void 0,s=!1}this.func&&i!==void 0&&await this.func(i,a)}static assign(e){return new TS.RunnableAssign(new TS.RunnableMap({steps:e}))}};Xy.RunnablePassthrough=OS});var c0=te(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.isZodSchema=void 0;var Wce=oi();function Gce(n){if(!n||typeof n!="object"||Array.isArray(n))return!1;let e=n;return e._def||Object.values(Wce.z.ZodFirstPartyTypeKind).includes(e.constructor?.name??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}Qy.isZodSchema=Gce});var t6=te(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.SimpleChatModel=wc.BaseChatModel=wc.createChatMessageChunkEncoderStream=void 0;var Hce=gc(),es=xl(),qL=pc(),Kce=l0(),FS=nc(),UL=kn(),Zce=vo(),$L=Yy(),Jce=c0(),Xce=Od();function Yce(){let n=new TextEncoder;return new TransformStream({transform(e,r){r.enqueue(n.encode(typeof e.content=="string"?e.content:JSON.stringify(e.content)))}})}wc.createChatMessageChunkEncoderStream=Yce;function kS(n){let e=[];for(let r of n){let a=r;if(Array.isArray(r.content))for(let i=0;i<r.content.length;i++){let s=r.content[i];((0,es.isURLContentBlock)(s)||(0,es.isBase64ContentBlock)(s))&&a===r&&(a=new r.constructor({...a,content:[...r.content.slice(0,i),(0,es.convertToOpenAIImageBlock)(s),...r.content.slice(i+1)]}))}e.push(a)}return e}var e6=class n extends Kce.BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){let[r,a]=super._separateRunnableConfigFromCallOptions(e);return a.signal=r.signal,[r,a]}async invoke(e,r){let a=n._convertInputToPromptValue(e);return(await this.generatePrompt([a],r,r?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,a){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===n.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,r);else{let i=n._convertInputToPromptValue(e).toChatMessages(),[s,t]=this._separateRunnableConfigFromCallOptionsCompat(r),o={...s.metadata,...this.getLsParams(t)},l=await FS.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,o,this.metadata,{verbose:this.verbose}),d={options:t,invocation_params:this?.invocationParams(t),batch_size:1},c=await l?.handleChatModelStart(this.toJSON(),[kS(i)],s.runId,void 0,d,void 0,void 0,s.runName),y,u;try{for await(let S of this._streamResponseChunks(i,t,c?.[0])){if(S.message.id==null){let V=c?.at(0)?.runId;V!=null&&S.message._updateId(`run-${V}`)}S.message.response_metadata={...S.generationInfo,...S.message.response_metadata},yield S.message,y?y=y.concat(S):y=S,(0,es.isAIMessageChunk)(S.message)&&S.message.usage_metadata!==void 0&&(u={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}}catch(S){throw await Promise.all((c??[]).map(V=>V?.handleLLMError(S))),S}await Promise.all((c??[]).map(S=>S?.handleLLMEnd({generations:[[y]],llmOutput:u})))}}getLsParams(e){let r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:r}}async _generateUncached(e,r,a,i){let s=e.map(y=>y.map(es.coerceMessageLikeToMessage)),t;if(i!==void 0&&i.length===s.length)t=i;else{let y={...a.metadata,...this.getLsParams(r)},u=await FS.CallbackManager.configure(a.callbacks,this.callbacks,a.tags,this.tags,y,this.metadata,{verbose:this.verbose}),S={options:r,invocation_params:this?.invocationParams(r),batch_size:1};t=await u?.handleChatModelStart(this.toJSON(),s.map(kS),a.runId,void 0,S,void 0,void 0,a.runName)}let o=[],l=[];if(!!t?.[0].handlers.find(Xce.callbackHandlerPrefersStreaming)&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let y=await this._streamResponseChunks(s[0],r,t?.[0]),u,S;for await(let V of y){if(V.message.id==null){let U=t?.at(0)?.runId;U!=null&&V.message._updateId(`run-${U}`)}u===void 0?u=V:u=(0,Zce.concat)(u,V),(0,es.isAIMessageChunk)(V.message)&&V.message.usage_metadata!==void 0&&(S={tokenUsage:{promptTokens:V.message.usage_metadata.input_tokens,completionTokens:V.message.usage_metadata.output_tokens,totalTokens:V.message.usage_metadata.total_tokens}})}if(u===void 0)throw new Error("Received empty response from chat model call.");o.push([u]),await t?.[0].handleLLMEnd({generations:o,llmOutput:S})}catch(y){throw await t?.[0].handleLLMError(y),y}else{let y=await Promise.allSettled(s.map((u,S)=>this._generate(u,{...r,promptIndex:S},t?.[S])));await Promise.all(y.map(async(u,S)=>{if(u.status==="fulfilled"){let V=u.value;for(let U of V.generations){if(U.message.id==null){let z=t?.at(0)?.runId;z!=null&&U.message._updateId(`run-${z}`)}U.message.response_metadata={...U.generationInfo,...U.message.response_metadata}}return V.generations.length===1&&(V.generations[0].message.response_metadata={...V.llmOutput,...V.generations[0].message.response_metadata}),o[S]=V.generations,l[S]=V.llmOutput,t?.[S]?.handleLLMEnd({generations:[V.generations],llmOutput:V.llmOutput})}else return await t?.[S]?.handleLLMError(u.reason),Promise.reject(u.reason)}))}let c={generations:o,llmOutput:l.length?this._combineLLMOutput?.(...l):void 0};return Object.defineProperty(c,qL.RUN_KEY,{value:t?{runIds:t?.map(y=>y.runId)}:void 0,configurable:!0}),c}async _generateCached({messages:e,cache:r,llmStringKey:a,parsedOptions:i,handledOptions:s}){let t=e.map(z=>z.map(es.coerceMessageLikeToMessage)),o={...s.metadata,...this.getLsParams(i)},l=await FS.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,o,this.metadata,{verbose:this.verbose}),d={options:i,invocation_params:this?.invocationParams(i),batch_size:1},c=await l?.handleChatModelStart(this.toJSON(),t.map(kS),s.runId,void 0,d,void 0,void 0,s.runName),y=[],S=(await Promise.allSettled(t.map(async(z,D)=>{let k=n._convertInputToPromptValue(z).toString(),T=await r.lookup(k,a);return T==null&&y.push(D),T}))).map((z,D)=>({result:z,runManager:c?.[D]})).filter(({result:z})=>z.status==="fulfilled"&&z.value!=null||z.status==="rejected"),V=[];await Promise.all(S.map(async({result:z,runManager:D},k)=>{if(z.status==="fulfilled"){let T=z.value;return V[k]=T.map(R=>("message"in R&&(0,es.isBaseMessage)(R.message)&&(0,es.isAIMessage)(R.message)&&(R.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),R.generationInfo={...R.generationInfo,tokenUsage:{}},R)),T.length&&await D?.handleLLMNewToken(T[0].text),D?.handleLLMEnd({generations:[T]},void 0,void 0,void 0,{cached:!0})}else return await D?.handleLLMError(z.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(z.reason)}));let U={generations:V,missingPromptIndices:y,startedRunManagers:c};return Object.defineProperty(U,qL.RUN_KEY,{value:c?{runIds:c?.map(z=>z.runId)}:void 0,configurable:!0}),U}async generate(e,r,a){let i;Array.isArray(r)?i={stop:r}:i=r;let s=e.map(V=>V.map(es.coerceMessageLikeToMessage)),[t,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(t.callbacks=t.callbacks??a,!this.cache)return this._generateUncached(s,o,t);let{cache:l}=this,d=this._getSerializedCacheKeyParametersForCall(o),{generations:c,missingPromptIndices:y,startedRunManagers:u}=await this._generateCached({messages:s,cache:l,llmStringKey:d,parsedOptions:o,handledOptions:t}),S={};if(y.length>0){let V=await this._generateUncached(y.map(U=>s[U]),o,t,u!==void 0?y.map(U=>u?.[U]):void 0);await Promise.all(V.generations.map(async(U,z)=>{let D=y[z];c[D]=U;let k=n._convertInputToPromptValue(s[D]).toString();return l.update(k,d,U)})),S=V.llmOutput??{}}return{generations:c,llmOutput:S}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,a){let i=e.map(s=>s.toChatMessages());return this.generate(i,r,a)}async call(e,r,a){return(await this.generate([e.map(es.coerceMessageLikeToMessage)],r,a)).generations[0][0].message}async callPrompt(e,r,a){let i=e.toChatMessages();return this.call(i,r,a)}async predictMessages(e,r,a){return this.call(e,r,a)}async predict(e,r,a){let i=new es.HumanMessage(e),s=await this.call([i],r,a);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r?.strict)throw new Error('"strict" mode is not supported for this model by default.');let a=e,i=r?.name,s=a.description??"A function available to call.",t=r?.method,o=r?.includeRaw;if(t==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=i??"extract",d;(0,Jce.isZodSchema)(a)?d=[{type:"function",function:{name:l,description:s,parameters:(0,Hce.zodToJsonSchema)(a)}}]:("name"in a&&(l=a.name),d=[{type:"function",function:{name:l,description:s,parameters:a}}]);let c=this.bindTools(d),y=UL.RunnableLambda.from(U=>{if(!U.tool_calls||U.tool_calls.length===0)throw new Error("No tool calls found in the response.");let z=U.tool_calls.find(D=>D.name===l);if(!z)throw new Error(`No tool call found with name ${l}.`);return z.args});if(!o)return c.pipe(y).withConfig({runName:"StructuredOutput"});let u=$L.RunnablePassthrough.assign({parsed:(U,z)=>y.invoke(U.raw,z)}),S=$L.RunnablePassthrough.assign({parsed:()=>null}),V=u.withFallbacks({fallbacks:[S]});return UL.RunnableSequence.from([{raw:c},V]).withConfig({runName:"StructuredOutputRunnable"})}};wc.BaseChatModel=e6;var RS=class extends e6{async _generate(e,r,a){let i=await this._call(e,r,a),s=new es.AIMessage(i);if(typeof s.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:s.content,message:s}]}}};wc.SimpleChatModel=RS});var a6=te(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.LLM=d0.BaseLLM=void 0;var VL=xl(),IS=pc(),DS=nc(),Qce=l0(),ede=vo(),tde=Od(),r6=class n extends Qce.BaseLanguageModel{constructor({concurrency:e,...r}){super(e?{maxConcurrency:e,...r}:r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,r){let a=n._convertInputToPromptValue(e);return(await this.generatePrompt([a],r,r?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,r,a){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){let[r,a]=super._separateRunnableConfigFromCallOptions(e);return a.signal=r.signal,[r,a]}async*_streamIterator(e,r){if(this._streamResponseChunks===n.prototype._streamResponseChunks)yield this.invoke(e,r);else{let a=n._convertInputToPromptValue(e),[i,s]=this._separateRunnableConfigFromCallOptionsCompat(r),t=await DS.CallbackManager.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),o={options:s,invocation_params:this?.invocationParams(s),batch_size:1},l=await t?.handleLLMStart(this.toJSON(),[a.toString()],i.runId,void 0,o,void 0,void 0,i.runName),d=new IS.GenerationChunk({text:""});try{for await(let c of this._streamResponseChunks(a.toString(),s,l?.[0]))d?d=d.concat(c):d=c,typeof c.text=="string"&&(yield c.text)}catch(c){throw await Promise.all((l??[]).map(y=>y?.handleLLMError(c))),c}await Promise.all((l??[]).map(c=>c?.handleLLMEnd({generations:[[d]]})))}}async generatePrompt(e,r,a){let i=e.map(s=>s.toString());return this.generate(i,r,a)}invocationParams(e){return{}}_flattenLLMResult(e){let r=[];for(let a=0;a<e.generations.length;a+=1){let i=e.generations[a];if(a===0)r.push({generations:[i],llmOutput:e.llmOutput});else{let s=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[i],llmOutput:s})}}return r}async _generateUncached(e,r,a,i){let s;if(i!==void 0&&i.length===e.length)s=i;else{let d=await DS.CallbackManager.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),c={options:r,invocation_params:this?.invocationParams(r),batch_size:e.length};s=await d?.handleLLMStart(this.toJSON(),e,a.runId,void 0,c,void 0,void 0,a?.runName)}let t=!!s?.[0].handlers.find(tde.callbackHandlerPrefersStreaming),o;if(t&&e.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let d=await this._streamResponseChunks(e[0],r,s?.[0]),c;for await(let y of d)c===void 0?c=y:c=(0,ede.concat)(c,y);if(c===void 0)throw new Error("Received empty response from chat model call.");o={generations:[[c]],llmOutput:{}},await s?.[0].handleLLMEnd(o)}catch(d){throw await s?.[0].handleLLMError(d),d}else{try{o=await this._generate(e,r,s?.[0])}catch(c){throw await Promise.all((s??[]).map(y=>y?.handleLLMError(c))),c}let d=this._flattenLLMResult(o);await Promise.all((s??[]).map((c,y)=>c?.handleLLMEnd(d[y])))}let l=s?.map(d=>d.runId)||void 0;return Object.defineProperty(o,IS.RUN_KEY,{value:l?{runIds:l}:void 0,configurable:!0}),o}async _generateCached({prompts:e,cache:r,llmStringKey:a,parsedOptions:i,handledOptions:s,runId:t}){let o=await DS.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l={options:i,invocation_params:this?.invocationParams(i),batch_size:e.length},d=await o?.handleLLMStart(this.toJSON(),e,t,void 0,l,void 0,void 0,s?.runName),c=[],u=(await Promise.allSettled(e.map(async(U,z)=>{let D=await r.lookup(U,a);return D==null&&c.push(z),D}))).map((U,z)=>({result:U,runManager:d?.[z]})).filter(({result:U})=>U.status==="fulfilled"&&U.value!=null||U.status==="rejected"),S=[];await Promise.all(u.map(async({result:U,runManager:z},D)=>{if(U.status==="fulfilled"){let k=U.value;return S[D]=k.map(T=>(T.generationInfo={...T.generationInfo,tokenUsage:{}},T)),k.length&&await z?.handleLLMNewToken(k[0].text),z?.handleLLMEnd({generations:[k]},void 0,void 0,void 0,{cached:!0})}else return await z?.handleLLMError(U.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(U.reason)}));let V={generations:S,missingPromptIndices:c,startedRunManagers:d};return Object.defineProperty(V,IS.RUN_KEY,{value:d?{runIds:d?.map(U=>U.runId)}:void 0,configurable:!0}),V}async generate(e,r,a){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;let[s,t]=this._separateRunnableConfigFromCallOptionsCompat(i);if(s.callbacks=s.callbacks??a,!this.cache)return this._generateUncached(e,t,s);let{cache:o}=this,l=this._getSerializedCacheKeyParametersForCall(t),{generations:d,missingPromptIndices:c,startedRunManagers:y}=await this._generateCached({prompts:e,cache:o,llmStringKey:l,parsedOptions:t,handledOptions:s,runId:s.runId}),u={};if(c.length>0){let S=await this._generateUncached(c.map(V=>e[V]),t,s,y!==void 0?c.map(V=>y?.[V]):void 0);await Promise.all(S.generations.map(async(V,U)=>{let z=c[U];return d[z]=V,o.update(e[z],l,V)})),u=S.llmOutput??{}}return{generations:d,llmOutput:u}}async call(e,r,a){let{generations:i}=await this.generate([e],r,a);return i[0][0].text}async predict(e,r,a){return this.call(e,r,a)}async predictMessages(e,r,a){let i=(0,VL.getBufferString)(e),s=await this.call(i,r,a);return new VL.AIMessage(s)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}};d0.BaseLLM=r6;var NS=class extends r6{async _generate(e,r,a){return{generations:await Promise.all(e.map((s,t)=>this._call(s,{...r,promptIndex:t},a).then(o=>[{text:o}])))}}};d0.LLM=NS});var WL=te(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.getPromptInputKey=pu.getOutputValue=pu.getInputValue=pu.BaseMemory=void 0;var MS=class{};pu.BaseMemory=MS;var zL=(n,e)=>{if(e!==void 0)return n[e];let r=Object.keys(n);if(r.length===1)return n[r[0]]},rde=(n,e)=>{let r=zL(n,e);if(!r){let a=Object.keys(n);throw new Error(`input values have ${a.length} keys, you must specify an input key or pass only 1 key as input`)}return r};pu.getInputValue=rde;var ade=(n,e)=>{let r=zL(n,e);if(!r&&r!==""){let a=Object.keys(n);throw new Error(`output values have ${a.length} keys, you must specify an output key or pass only 1 key as output`)}return r};pu.getOutputValue=ade;function nde(n,e){let r=Object.keys(n).filter(a=>!e.includes(a)&&a!=="stop");if(r.length!==1)throw new Error(`One input key expected, but got ${r.length}`);return r[0]}pu.getPromptInputKey=nde});var GL=te(n6=>{"use strict";Object.defineProperty(n6,"__esModule",{value:!0});n6.RouterRunnable=void 0;var ide=kn(),sde=au(),jS=class extends ide.Runnable{static lc_name(){return"RouterRunnable"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnables=e.runnables}async invoke(e,r){let{key:a,input:i}=e,s=this.runnables[a];if(s===void 0)throw new Error(`No runnable associated with key "${a}".`);return s.invoke(i,(0,sde.ensureConfig)(r))}async batch(e,r,a){let i=e.map(u=>u.key),s=e.map(u=>u.input);if(i.find(u=>this.runnables[u]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");let o=i.map(u=>this.runnables[u]),l=this._getOptionsList(r??{},e.length),d=l[0]?.maxConcurrency??a?.maxConcurrency,c=d&&d>0?d:e.length,y=[];for(let u=0;u<s.length;u+=c){let S=s.slice(u,u+c).map((U,z)=>o[z].invoke(U,l[z])),V=await Promise.all(S);y.push(V)}return y.flat()}async stream(e,r){let{key:a,input:i}=e,s=this.runnables[a];if(s===void 0)throw new Error(`No runnable associated with key "${a}".`);return s.stream(i,r)}};n6.RouterRunnable=jS});var KL=te(i6=>{"use strict";Object.defineProperty(i6,"__esModule",{value:!0});i6.RunnableBranch=void 0;var f1=kn(),ip=au(),HL=vo(),BS=class extends f1.Runnable{static lc_name(){return"RunnableBranch"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"default",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");let a=e.slice(0,-1).map(([s,t])=>[(0,f1._coerceToRunnable)(s),(0,f1._coerceToRunnable)(t)]),i=(0,f1._coerceToRunnable)(e[e.length-1]);return new this({branches:a,default:i})}async _invoke(e,r,a){let i;for(let s=0;s<this.branches.length;s+=1){let[t,o]=this.branches[s];if(await t.invoke(e,(0,ip.patchConfig)(r,{callbacks:a?.getChild(`condition:${s+1}`)}))){i=await o.invoke(e,(0,ip.patchConfig)(r,{callbacks:a?.getChild(`branch:${s+1}`)}));break}}return i||(i=await this.default.invoke(e,(0,ip.patchConfig)(r,{callbacks:a?.getChild("branch:default")}))),i}async invoke(e,r={}){return this._callWithConfig(this._invoke,e,r)}async*_streamIterator(e,r){let i=await(await(0,ip.getCallbackManagerForConfig)(r))?.handleChainStart(this.toJSON(),(0,f1._coerceToDict)(e,"input"),r?.runId,void 0,void 0,void 0,r?.runName),s,t=!0,o;try{for(let l=0;l<this.branches.length;l+=1){let[d,c]=this.branches[l];if(await d.invoke(e,(0,ip.patchConfig)(r,{callbacks:i?.getChild(`condition:${l+1}`)}))){o=await c.stream(e,(0,ip.patchConfig)(r,{callbacks:i?.getChild(`branch:${l+1}`)}));for await(let u of o)if(yield u,t)if(s===void 0)s=u;else try{s=(0,HL.concat)(s,u)}catch{s=void 0,t=!1}break}}if(o===void 0){o=await this.default.stream(e,(0,ip.patchConfig)(r,{callbacks:i?.getChild("branch:default")}));for await(let l of o)if(yield l,t)if(s===void 0)s=l;else try{s=(0,HL.concat)(s,l)}catch{s=void 0,t=!1}}}catch(l){throw await i?.handleChainError(l),l}await i?.handleChainEnd(s??{})}};i6.RunnableBranch=BS});var JL=te(s6=>{"use strict";Object.defineProperty(s6,"__esModule",{value:!0});s6.RunnableWithMessageHistory=void 0;var p0=xl(),ZL=kn(),ode=Yy(),LS=class extends ZL.RunnableBinding{constructor(e){let r=ZL.RunnableLambda.from((t,o)=>this._enterHistory(t,o??{})).withConfig({runName:"loadHistory"}),a=e.historyMessagesKey??e.inputMessagesKey;a&&(r=ode.RunnablePassthrough.assign({[a]:r}).withConfig({runName:"insertHistory"}));let i=r.pipe(e.runnable.withListeners({onEnd:(t,o)=>this._exitHistory(t,o??{})})).withConfig({runName:"RunnableWithMessageHistory"}),s=e.config??{};super({...e,config:s,bound:i}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getMessageHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let r;if(typeof e=="object"&&!Array.isArray(e)&&!(0,p0.isBaseMessage)(e)){let a;this.inputMessagesKey?a=this.inputMessagesKey:Object.keys(e).length===1?a=Object.keys(e)[0]:a="input",Array.isArray(e[a])&&Array.isArray(e[a][0])?r=e[a][0]:r=e[a]}else r=e;if(typeof r=="string")return[new p0.HumanMessage(r)];if(Array.isArray(r))return r;if((0,p0.isBaseMessage)(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(r,null,2)}`)}_getOutputMessages(e){let r;if(!Array.isArray(e)&&!(0,p0.isBaseMessage)(e)&&typeof e!="string"){let a;this.outputMessagesKey!==void 0?a=this.outputMessagesKey:Object.keys(e).length===1?a=Object.keys(e)[0]:a="output",e.generations!==void 0?r=e.generations[0][0].message:r=e[a]}else r=e;if(typeof r=="string")return[new p0.AIMessage(r)];if(Array.isArray(r))return r;if((0,p0.isBaseMessage)(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(r,null,2)}`)}async _enterHistory(e,r){let i=await(r?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(e)):i}async _exitHistory(e,r){let a=r.configurable?.messageHistory,i;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?i=e.inputs[0]:i=e.inputs;let s=this._getInputMessages(i);if(this.historyMessagesKey===void 0){let l=await a.getMessages();s=s.slice(l.length)}let t=e.outputs;if(!t)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);let o=this._getOutputMessages(t);await a.addMessages([...s,...o])}async _mergeConfig(...e){let r=await super._mergeConfig(...e);if(!r.configurable||!r.configurable.sessionId){let i={[this.inputMessagesKey??"input"]:"foo"},s={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(i)}, ${JSON.stringify(s)})`)}let{sessionId:a}=r.configurable;return r.configurable.messageHistory=await this.getMessageHistory(a),r}};s6.RunnableWithMessageHistory=LS});var o6=te(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.RunnableWithMessageHistory=ur.RunnableBranch=ur.RouterRunnable=ur.RunnablePassthrough=ur.pickRunnableConfigKeys=ur.mergeConfigs=ur.ensureConfig=ur.patchConfig=ur.getCallbackManagerForConfig=ur.RunnableToolLike=ur._coerceToRunnable=ur.RunnablePick=ur.RunnableAssign=ur.RunnableWithFallbacks=ur.RunnableLambda=ur.RunnableParallel=ur.RunnableMap=ur.RunnableSequence=ur.RunnableRetry=ur.RunnableEach=ur.RunnableBinding=ur.Runnable=void 0;var ts=kn();Object.defineProperty(ur,"Runnable",{enumerable:!0,get:function(){return ts.Runnable}});Object.defineProperty(ur,"RunnableBinding",{enumerable:!0,get:function(){return ts.RunnableBinding}});Object.defineProperty(ur,"RunnableEach",{enumerable:!0,get:function(){return ts.RunnableEach}});Object.defineProperty(ur,"RunnableRetry",{enumerable:!0,get:function(){return ts.RunnableRetry}});Object.defineProperty(ur,"RunnableSequence",{enumerable:!0,get:function(){return ts.RunnableSequence}});Object.defineProperty(ur,"RunnableMap",{enumerable:!0,get:function(){return ts.RunnableMap}});Object.defineProperty(ur,"RunnableParallel",{enumerable:!0,get:function(){return ts.RunnableParallel}});Object.defineProperty(ur,"RunnableLambda",{enumerable:!0,get:function(){return ts.RunnableLambda}});Object.defineProperty(ur,"RunnableWithFallbacks",{enumerable:!0,get:function(){return ts.RunnableWithFallbacks}});Object.defineProperty(ur,"RunnableAssign",{enumerable:!0,get:function(){return ts.RunnableAssign}});Object.defineProperty(ur,"RunnablePick",{enumerable:!0,get:function(){return ts.RunnablePick}});Object.defineProperty(ur,"_coerceToRunnable",{enumerable:!0,get:function(){return ts._coerceToRunnable}});Object.defineProperty(ur,"RunnableToolLike",{enumerable:!0,get:function(){return ts.RunnableToolLike}});var h1=au();Object.defineProperty(ur,"getCallbackManagerForConfig",{enumerable:!0,get:function(){return h1.getCallbackManagerForConfig}});Object.defineProperty(ur,"patchConfig",{enumerable:!0,get:function(){return h1.patchConfig}});Object.defineProperty(ur,"ensureConfig",{enumerable:!0,get:function(){return h1.ensureConfig}});Object.defineProperty(ur,"mergeConfigs",{enumerable:!0,get:function(){return h1.mergeConfigs}});Object.defineProperty(ur,"pickRunnableConfigKeys",{enumerable:!0,get:function(){return h1.pickRunnableConfigKeys}});var ude=Yy();Object.defineProperty(ur,"RunnablePassthrough",{enumerable:!0,get:function(){return ude.RunnablePassthrough}});var lde=GL();Object.defineProperty(ur,"RouterRunnable",{enumerable:!0,get:function(){return lde.RouterRunnable}});var cde=KL();Object.defineProperty(ur,"RunnableBranch",{enumerable:!0,get:function(){return cde.RunnableBranch}});var dde=JL();Object.defineProperty(ur,"RunnableWithMessageHistory",{enumerable:!0,get:function(){return dde.RunnableWithMessageHistory}})});var sp=te(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.OutputParserException=Sc.BaseOutputParser=Sc.BaseLLMOutputParser=void 0;var pde=o6(),fde=$m(),u6=class extends pde.Runnable{parseResultWithPrompt(e,r,a){return this.parseResult(e,a)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async(a,i)=>this.parseResult([{text:a}],i?.callbacks),e,{...r,runType:"parser"}):this._callWithConfig(async(a,i)=>this.parseResult([{message:a,text:this._baseMessageToString(a)}],i?.callbacks),e,{...r,runType:"parser"})}};Sc.BaseLLMOutputParser=u6;var qS=class extends u6{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,a){return this.parse(e,a)}_type(){throw new Error("_type not implemented")}};Sc.BaseOutputParser=qS;var US=class extends Error{constructor(e,r,a,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=r,this.observation=a,this.sendToLLM=i,i&&(a===void 0||r===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");(0,fde.addLangChainErrorFields)(this,"OUTPUT_PARSING_FAILURE")}};Sc.OutputParserException=US});var zS=te(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});VS.deepCompareStrict=$S;function $S(n,e){let r=typeof n;if(r!==typeof e)return!1;if(Array.isArray(n)){if(!Array.isArray(e))return!1;let a=n.length;if(a!==e.length)return!1;for(let i=0;i<a;i++)if(!$S(n[i],e[i]))return!1;return!0}if(r==="object"){if(!n||!e)return n===e;let a=Object.keys(n),i=Object.keys(e);if(a.length!==i.length)return!1;for(let t of a)if(!$S(n[t],e[t]))return!1;return!0}return n===e}});var c6=te(l6=>{"use strict";Object.defineProperty(l6,"__esModule",{value:!0});l6.encodePointer=hde;l6.escapePointer=XL;function hde(n){return encodeURI(XL(n))}function XL(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}});var d6=te(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.initialBaseURI=Rn.ignoredKeyword=Rn.schemaMapKeyword=Rn.schemaArrayKeyword=Rn.schemaKeyword=void 0;Rn.dereference=m1;var YL=c6();Rn.schemaKeyword={additionalItems:!0,unevaluatedItems:!0,items:!0,contains:!0,additionalProperties:!0,unevaluatedProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Rn.schemaArrayKeyword={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0};Rn.schemaMapKeyword={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0};Rn.ignoredKeyword={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};Rn.initialBaseURI=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function m1(n,e=Object.create(null),r=Rn.initialBaseURI,a=""){if(n&&typeof n=="object"&&!Array.isArray(n)){let s=n.$id||n.id;if(s){let t=new URL(s,r.href);t.hash.length>1?e[t.href]=n:(t.hash="",a===""?r=t:m1(n,e,r))}}else if(n!==!0&&n!==!1)return e;let i=r.href+(a?"#"+a:"");if(e[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(e[i]=n,n===!0||n===!1)return e;if(n.__absolute_uri__===void 0&&Object.defineProperty(n,"__absolute_uri__",{enumerable:!1,value:i}),n.$ref&&n.__absolute_ref__===void 0){let s=new URL(n.$ref,r.href);s.hash=s.hash,Object.defineProperty(n,"__absolute_ref__",{enumerable:!1,value:s.href})}if(n.$recursiveRef&&n.__absolute_recursive_ref__===void 0){let s=new URL(n.$recursiveRef,r.href);s.hash=s.hash,Object.defineProperty(n,"__absolute_recursive_ref__",{enumerable:!1,value:s.href})}if(n.$anchor){let s=new URL("#"+n.$anchor,r.href);e[s.href]=n}for(let s in n){if(Rn.ignoredKeyword[s])continue;let t=`${a}/${(0,YL.encodePointer)(s)}`,o=n[s];if(Array.isArray(o)){if(Rn.schemaArrayKeyword[s]){let l=o.length;for(let d=0;d<l;d++)m1(o[d],e,r,`${t}/${d}`)}}else if(Rn.schemaMapKeyword[s])for(let l in o)m1(o[l],e,r,`${t}/${(0,YL.encodePointer)(l)}`);else m1(o,e,r,t)}return e}});var WS=te(p6=>{"use strict";Object.defineProperty(p6,"__esModule",{value:!0});p6.format=void 0;var mde=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,gde=[0,31,28,31,30,31,30,31,31,30,31,30,31],bde=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,vde=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,yde=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,_de=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,xde=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,wde=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Sde=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Cde=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ade=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Ede=n=>{if(n[0]==='"')return!1;let[e,r,...a]=n.split("@");return!e||!r||a.length!==0||e.length>64||r.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:r.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},Pde=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Tde=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Ode=n=>n.length>1&&n.length<80&&(/^P\d+([.,]\d+)?W$/.test(n)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(n)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(n));function fu(n){return n.test.bind(n)}p6.format={date:QL,time:eq.bind(void 0,!1),"date-time":Rde,duration:Ode,uri:Nde,"uri-reference":fu(yde),"uri-template":fu(_de),url:fu(xde),email:Ede,hostname:fu(vde),ipv4:fu(Pde),ipv6:fu(Tde),regex:jde,uuid:fu(wde),"json-pointer":fu(Sde),"json-pointer-uri-fragment":fu(Cde),"relative-json-pointer":fu(Ade)};function Fde(n){return n%4===0&&(n%100!==0||n%400===0)}function QL(n){let e=n.match(mde);if(!e)return!1;let r=+e[1],a=+e[2],i=+e[3];return a>=1&&a<=12&&i>=1&&i<=(a==2&&Fde(r)?29:gde[a])}function eq(n,e){let r=e.match(bde);if(!r)return!1;let a=+r[1],i=+r[2],s=+r[3],t=!!r[5];return(a<=23&&i<=59&&s<=59||a==23&&i==59&&s==60)&&(!n||t)}var kde=/t|\s/i;function Rde(n){let e=n.split(kde);return e.length==2&&QL(e[0])&&eq(!0,e[1])}var Ide=/\/|:/,Dde=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Nde(n){return Ide.test(n)&&Dde.test(n)}var Mde=/[^\\]\\Z/;function jde(n){if(Mde.test(n))return!1;try{return new RegExp(n,"u"),!0}catch{return!1}}});var rq=te(f6=>{"use strict";Object.defineProperty(f6,"__esModule",{value:!0});f6.OutputFormat=void 0;var tq;(function(n){n[n.Flag=1]="Flag",n[n.Basic=2]="Basic",n[n.Detailed=4]="Detailed"})(tq||(f6.OutputFormat=tq={}))});var HS=te(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});GS.ucs2length=Bde;function Bde(n){let e=0,r=n.length,a=0,i;for(;a<r;)e++,i=n.charCodeAt(a++),i>=55296&&i<=56319&&a<r&&(i=n.charCodeAt(a),(i&64512)==56320&&a++);return e}});var JS=te(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});ZS.validate=Na;var KS=zS(),Lde=d6(),aq=WS(),wl=c6(),qde=HS();function Na(n,e,r="2019-09",a=(0,Lde.dereference)(e),i=!0,s=null,t="#",o="#",l=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:t,keyword:"false",keywordLocation:t,error:"False boolean schema."}]};let d=typeof n,c;switch(d){case"boolean":case"number":case"string":c=d;break;case"object":n===null?c="null":Array.isArray(n)?c="array":c="object";break;default:throw new Error(`Instances of "${d}" type are not supported.`)}let{$ref:y,$recursiveRef:u,$recursiveAnchor:S,type:V,const:U,enum:z,required:D,not:k,anyOf:T,allOf:R,oneOf:g,if:m,then:v,else:b,format:f,properties:p,patternProperties:h,additionalProperties:_,unevaluatedProperties:I,minProperties:W,maxProperties:q,propertyNames:B,dependentRequired:N,dependentSchemas:L,dependencies:P,prefixItems:O,items:E,additionalItems:w,unevaluatedItems:A,contains:M,minContains:j,maxContains:C,minItems:x,maxItems:F,uniqueItems:$,minimum:G,maximum:Z,exclusiveMinimum:J,exclusiveMaximum:Y,multipleOf:ee,minLength:ae,maxLength:pe,pattern:se,__absolute_ref__:ue,__absolute_recursive_ref__:le}=e,ie=[];if(S===!0&&s===null&&(s=e),u==="#"){let fe=s===null?a[le]:s,he=`${o}/$recursiveRef`,Se=Na(n,s===null?e:s,r,a,i,fe,t,he,l);Se.valid||ie.push({instanceLocation:t,keyword:"$recursiveRef",keywordLocation:he,error:"A subschema had errors."},...Se.errors)}if(y!==void 0){let he=a[ue||y];if(he===void 0){let Ae=`Unresolved $ref "${y}".`;throw ue&&ue!==y&&(Ae+=`  Absolute URI "${ue}".`),Ae+=`
Known schemas:
- ${Object.keys(a).join(`
- `)}`,new Error(Ae)}let Se=`${o}/$ref`,Ce=Na(n,he,r,a,i,s,t,Se,l);if(Ce.valid||ie.push({instanceLocation:t,keyword:"$ref",keywordLocation:Se,error:"A subschema had errors."},...Ce.errors),r==="4"||r==="7")return{valid:ie.length===0,errors:ie}}if(Array.isArray(V)){let fe=V.length,he=!1;for(let Se=0;Se<fe;Se++)if(c===V[Se]||V[Se]==="integer"&&c==="number"&&n%1===0&&n===n){he=!0;break}he||ie.push({instanceLocation:t,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${V.join('", "')}".`})}else V==="integer"?(c!=="number"||n%1||n!==n)&&ie.push({instanceLocation:t,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${V}".`}):V!==void 0&&c!==V&&ie.push({instanceLocation:t,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${V}".`});if(U!==void 0&&(c==="object"||c==="array"?(0,KS.deepCompareStrict)(n,U)||ie.push({instanceLocation:t,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(U)}.`}):n!==U&&ie.push({instanceLocation:t,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(U)}.`})),z!==void 0&&(c==="object"||c==="array"?z.some(fe=>(0,KS.deepCompareStrict)(n,fe))||ie.push({instanceLocation:t,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(z)}.`}):z.some(fe=>n===fe)||ie.push({instanceLocation:t,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(z)}.`})),k!==void 0){let fe=`${o}/not`;Na(n,k,r,a,i,s,t,fe).valid&&ie.push({instanceLocation:t,keyword:"not",keywordLocation:fe,error:'Instance matched "not" schema.'})}let de=[];if(T!==void 0){let fe=`${o}/anyOf`,he=ie.length,Se=!1;for(let Ce=0;Ce<T.length;Ce++){let Ae=T[Ce],Ee=Object.create(l),ke=Na(n,Ae,r,a,i,S===!0?s:null,t,`${fe}/${Ce}`,Ee);ie.push(...ke.errors),Se=Se||ke.valid,ke.valid&&de.push(Ee)}Se?ie.length=he:ie.splice(he,0,{instanceLocation:t,keyword:"anyOf",keywordLocation:fe,error:"Instance does not match any subschemas."})}if(R!==void 0){let fe=`${o}/allOf`,he=ie.length,Se=!0;for(let Ce=0;Ce<R.length;Ce++){let Ae=R[Ce],Ee=Object.create(l),ke=Na(n,Ae,r,a,i,S===!0?s:null,t,`${fe}/${Ce}`,Ee);ie.push(...ke.errors),Se=Se&&ke.valid,ke.valid&&de.push(Ee)}Se?ie.length=he:ie.splice(he,0,{instanceLocation:t,keyword:"allOf",keywordLocation:fe,error:"Instance does not match every subschema."})}if(g!==void 0){let fe=`${o}/oneOf`,he=ie.length,Se=g.filter((Ce,Ae)=>{let Ee=Object.create(l),ke=Na(n,Ce,r,a,i,S===!0?s:null,t,`${fe}/${Ae}`,Ee);return ie.push(...ke.errors),ke.valid&&de.push(Ee),ke.valid}).length;Se===1?ie.length=he:ie.splice(he,0,{instanceLocation:t,keyword:"oneOf",keywordLocation:fe,error:`Instance does not match exactly one subschema (${Se} matches).`})}if((c==="object"||c==="array")&&Object.assign(l,...de),m!==void 0){let fe=`${o}/if`;if(Na(n,m,r,a,i,s,t,fe,l).valid){if(v!==void 0){let Se=Na(n,v,r,a,i,s,t,`${o}/then`,l);Se.valid||ie.push({instanceLocation:t,keyword:"if",keywordLocation:fe,error:'Instance does not match "then" schema.'},...Se.errors)}}else if(b!==void 0){let Se=Na(n,b,r,a,i,s,t,`${o}/else`,l);Se.valid||ie.push({instanceLocation:t,keyword:"if",keywordLocation:fe,error:'Instance does not match "else" schema.'},...Se.errors)}}if(c==="object"){if(D!==void 0)for(let Ce of D)Ce in n||ie.push({instanceLocation:t,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${Ce}".`});let fe=Object.keys(n);if(W!==void 0&&fe.length<W&&ie.push({instanceLocation:t,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${W} properties.`}),q!==void 0&&fe.length>q&&ie.push({instanceLocation:t,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${q} properties.`}),B!==void 0){let Ce=`${o}/propertyNames`;for(let Ae in n){let Ee=`${t}/${(0,wl.encodePointer)(Ae)}`,ke=Na(Ae,B,r,a,i,s,Ee,Ce);ke.valid||ie.push({instanceLocation:t,keyword:"propertyNames",keywordLocation:Ce,error:`Property name "${Ae}" does not match schema.`},...ke.errors)}}if(N!==void 0){let Ce=`${o}/dependantRequired`;for(let Ae in N)if(Ae in n){let Ee=N[Ae];for(let ke of Ee)ke in n||ie.push({instanceLocation:t,keyword:"dependentRequired",keywordLocation:Ce,error:`Instance has "${Ae}" but does not have "${ke}".`})}}if(L!==void 0)for(let Ce in L){let Ae=`${o}/dependentSchemas`;if(Ce in n){let Ee=Na(n,L[Ce],r,a,i,s,t,`${Ae}/${(0,wl.encodePointer)(Ce)}`,l);Ee.valid||ie.push({instanceLocation:t,keyword:"dependentSchemas",keywordLocation:Ae,error:`Instance has "${Ce}" but does not match dependant schema.`},...Ee.errors)}}if(P!==void 0){let Ce=`${o}/dependencies`;for(let Ae in P)if(Ae in n){let Ee=P[Ae];if(Array.isArray(Ee))for(let ke of Ee)ke in n||ie.push({instanceLocation:t,keyword:"dependencies",keywordLocation:Ce,error:`Instance has "${Ae}" but does not have "${ke}".`});else{let ke=Na(n,Ee,r,a,i,s,t,`${Ce}/${(0,wl.encodePointer)(Ae)}`);ke.valid||ie.push({instanceLocation:t,keyword:"dependencies",keywordLocation:Ce,error:`Instance has "${Ae}" but does not match dependant schema.`},...ke.errors)}}}let he=Object.create(null),Se=!1;if(p!==void 0){let Ce=`${o}/properties`;for(let Ae in p){if(!(Ae in n))continue;let Ee=`${t}/${(0,wl.encodePointer)(Ae)}`,ke=Na(n[Ae],p[Ae],r,a,i,s,Ee,`${Ce}/${(0,wl.encodePointer)(Ae)}`);if(ke.valid)l[Ae]=he[Ae]=!0;else if(Se=i,ie.push({instanceLocation:t,keyword:"properties",keywordLocation:Ce,error:`Property "${Ae}" does not match schema.`},...ke.errors),Se)break}}if(!Se&&h!==void 0){let Ce=`${o}/patternProperties`;for(let Ae in h){let Ee=new RegExp(Ae,"u"),ke=h[Ae];for(let Fe in n){if(!Ee.test(Fe))continue;let Pe=`${t}/${(0,wl.encodePointer)(Fe)}`,Ie=Na(n[Fe],ke,r,a,i,s,Pe,`${Ce}/${(0,wl.encodePointer)(Ae)}`);Ie.valid?l[Fe]=he[Fe]=!0:(Se=i,ie.push({instanceLocation:t,keyword:"patternProperties",keywordLocation:Ce,error:`Property "${Fe}" matches pattern "${Ae}" but does not match associated schema.`},...Ie.errors))}}}if(!Se&&_!==void 0){let Ce=`${o}/additionalProperties`;for(let Ae in n){if(he[Ae])continue;let Ee=`${t}/${(0,wl.encodePointer)(Ae)}`,ke=Na(n[Ae],_,r,a,i,s,Ee,Ce);ke.valid?l[Ae]=!0:(Se=i,ie.push({instanceLocation:t,keyword:"additionalProperties",keywordLocation:Ce,error:`Property "${Ae}" does not match additional properties schema.`},...ke.errors))}}else if(!Se&&I!==void 0){let Ce=`${o}/unevaluatedProperties`;for(let Ae in n)if(!l[Ae]){let Ee=`${t}/${(0,wl.encodePointer)(Ae)}`,ke=Na(n[Ae],I,r,a,i,s,Ee,Ce);ke.valid?l[Ae]=!0:ie.push({instanceLocation:t,keyword:"unevaluatedProperties",keywordLocation:Ce,error:`Property "${Ae}" does not match unevaluated properties schema.`},...ke.errors)}}}else if(c==="array"){F!==void 0&&n.length>F&&ie.push({instanceLocation:t,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${n.length} > ${F}).`}),x!==void 0&&n.length<x&&ie.push({instanceLocation:t,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${n.length} < ${x}).`});let fe=n.length,he=0,Se=!1;if(O!==void 0){let Ce=`${o}/prefixItems`,Ae=Math.min(O.length,fe);for(;he<Ae;he++){let Ee=Na(n[he],O[he],r,a,i,s,`${t}/${he}`,`${Ce}/${he}`);if(l[he]=!0,!Ee.valid&&(Se=i,ie.push({instanceLocation:t,keyword:"prefixItems",keywordLocation:Ce,error:"Items did not match schema."},...Ee.errors),Se))break}}if(E!==void 0){let Ce=`${o}/items`;if(Array.isArray(E)){let Ae=Math.min(E.length,fe);for(;he<Ae;he++){let Ee=Na(n[he],E[he],r,a,i,s,`${t}/${he}`,`${Ce}/${he}`);if(l[he]=!0,!Ee.valid&&(Se=i,ie.push({instanceLocation:t,keyword:"items",keywordLocation:Ce,error:"Items did not match schema."},...Ee.errors),Se))break}}else for(;he<fe;he++){let Ae=Na(n[he],E,r,a,i,s,`${t}/${he}`,Ce);if(l[he]=!0,!Ae.valid&&(Se=i,ie.push({instanceLocation:t,keyword:"items",keywordLocation:Ce,error:"Items did not match schema."},...Ae.errors),Se))break}if(!Se&&w!==void 0){let Ae=`${o}/additionalItems`;for(;he<fe;he++){let Ee=Na(n[he],w,r,a,i,s,`${t}/${he}`,Ae);l[he]=!0,Ee.valid||(Se=i,ie.push({instanceLocation:t,keyword:"additionalItems",keywordLocation:Ae,error:"Items did not match additional items schema."},...Ee.errors))}}}if(M!==void 0)if(fe===0&&j===void 0)ie.push({instanceLocation:t,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(j!==void 0&&fe<j)ie.push({instanceLocation:t,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${fe}) than minContains (${j}).`});else{let Ce=`${o}/contains`,Ae=ie.length,Ee=0;for(let ke=0;ke<fe;ke++){let Fe=Na(n[ke],M,r,a,i,s,`${t}/${ke}`,Ce);Fe.valid?(l[ke]=!0,Ee++):ie.push(...Fe.errors)}Ee>=(j||0)&&(ie.length=Ae),j===void 0&&C===void 0&&Ee===0?ie.splice(Ae,0,{instanceLocation:t,keyword:"contains",keywordLocation:Ce,error:"Array does not contain item matching schema."}):j!==void 0&&Ee<j?ie.push({instanceLocation:t,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${j} items matching schema. Only ${Ee} items were found.`}):C!==void 0&&Ee>C&&ie.push({instanceLocation:t,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${C} items matching schema. ${Ee} items were found.`})}if(!Se&&A!==void 0){let Ce=`${o}/unevaluatedItems`;for(he;he<fe;he++){if(l[he])continue;let Ae=Na(n[he],A,r,a,i,s,`${t}/${he}`,Ce);l[he]=!0,Ae.valid||ie.push({instanceLocation:t,keyword:"unevaluatedItems",keywordLocation:Ce,error:"Items did not match unevaluated items schema."},...Ae.errors)}}if($)for(let Ce=0;Ce<fe;Ce++){let Ae=n[Ce],Ee=typeof Ae=="object"&&Ae!==null;for(let ke=0;ke<fe;ke++){if(Ce===ke)continue;let Fe=n[ke];(Ae===Fe||Ee&&(typeof Fe=="object"&&Fe!==null)&&(0,KS.deepCompareStrict)(Ae,Fe))&&(ie.push({instanceLocation:t,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${Ce} and ${ke}.`}),Ce=Number.MAX_SAFE_INTEGER,ke=Number.MAX_SAFE_INTEGER)}}}else if(c==="number"){if(r==="4"?(G!==void 0&&(J===!0&&n<=G||n<G)&&ie.push({instanceLocation:t,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${n} is less than ${J?"or equal to ":""} ${G}.`}),Z!==void 0&&(Y===!0&&n>=Z||n>Z)&&ie.push({instanceLocation:t,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${n} is greater than ${Y?"or equal to ":""} ${Z}.`})):(G!==void 0&&n<G&&ie.push({instanceLocation:t,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${n} is less than ${G}.`}),Z!==void 0&&n>Z&&ie.push({instanceLocation:t,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${n} is greater than ${Z}.`}),J!==void 0&&n<=J&&ie.push({instanceLocation:t,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${n} is less than ${J}.`}),Y!==void 0&&n>=Y&&ie.push({instanceLocation:t,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${n} is greater than or equal to ${Y}.`})),ee!==void 0){let fe=n%ee;Math.abs(0-fe)>=11920929e-14&&Math.abs(ee-fe)>=11920929e-14&&ie.push({instanceLocation:t,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${n} is not a multiple of ${ee}.`})}}else if(c==="string"){let fe=ae===void 0&&pe===void 0?0:(0,qde.ucs2length)(n);ae!==void 0&&fe<ae&&ie.push({instanceLocation:t,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${fe} < ${ae}).`}),pe!==void 0&&fe>pe&&ie.push({instanceLocation:t,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${fe} > ${pe}).`}),se!==void 0&&!new RegExp(se,"u").test(n)&&ie.push({instanceLocation:t,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),f!==void 0&&aq.format[f]&&!aq.format[f](n)&&ie.push({instanceLocation:t,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${f}".`})}return{valid:ie.length===0,errors:ie}}});var iq=te(h6=>{"use strict";Object.defineProperty(h6,"__esModule",{value:!0});h6.Validator=void 0;var nq=d6(),Ude=JS(),XS=class{schema;draft;shortCircuit;lookup;constructor(e,r="2019-09",a=!0){this.schema=e,this.draft=r,this.shortCircuit=a,this.lookup=(0,nq.dereference)(e)}validate(e){return(0,Ude.validate)(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,r){r&&(e={...e,$id:r}),(0,nq.dereference)(e,this.lookup)}};h6.Validator=XS});var g1=te(Ei=>{"use strict";var $de=Ei&&Ei.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Cc=Ei&&Ei.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$de(e,n,r)};Object.defineProperty(Ei,"__esModule",{value:!0});Cc(zS(),Ei);Cc(d6(),Ei);Cc(WS(),Ei);Cc(c6(),Ei);Cc(rq(),Ei);Cc(HS(),Ei);Cc(JS(),Ei);Cc(iq(),Ei)});var Ac=te(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});f0.BaseCumulativeTransformOutputParser=f0.BaseTransformOutputParser=void 0;var Vde=g1(),zde=sp(),sq=ys(),Wde=bl(),YS=pc(),m6=class extends zde.BaseOutputParser{async*_transform(e){for await(let r of e)typeof r=="string"?yield this.parseResult([{text:r}]):yield this.parseResult([{message:r,text:this._baseMessageToString(r)}])}async*transform(e,r){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...r,runType:"parser"})}};f0.BaseTransformOutputParser=m6;var QS=class extends m6{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let r,a;for await(let i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let s;if((0,sq.isBaseMessageChunk)(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new YS.ChatGenerationChunk({message:i,text:i.content})}else if((0,sq.isBaseMessage)(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new YS.ChatGenerationChunk({message:(0,Wde.convertToChunk)(i),text:i.content})}else s=new YS.GenerationChunk({text:i});a===void 0?a=s:a=a.concat(s);let t=await this.parsePartialResult([a]);t!=null&&!(0,Vde.deepCompareStrict)(t,r)&&(this.diff?yield this._diff(r,t):yield t,r=t)}}getFormatInstructions(){return""}};f0.BaseCumulativeTransformOutputParser=QS});var oq=te(g6=>{"use strict";Object.defineProperty(g6,"__esModule",{value:!0});g6.BytesOutputParser=void 0;var Gde=Ac(),eC=class extends Gde.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","bytes"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"textEncoder",{enumerable:!0,configurable:!0,writable:!0,value:new TextEncoder})}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}};g6.BytesOutputParser=eC});var uq=te(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.MarkdownListOutputParser=Os.NumberedListOutputParser=Os.CustomListOutputParser=Os.CommaSeparatedListOutputParser=Os.ListOutputParser=void 0;var b6=sp(),Hde=Ac(),op=class extends Hde.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async*_transform(e){let r="";for await(let a of e)if(typeof a=="string"?r+=a:r+=a.content,this.re){let i=[...r.matchAll(this.re)];if(i.length>1){let s=0;for(let t of i.slice(0,-1))yield[t[1]],s+=(t.index??0)+t[0].length;r=r.slice(s)}}else{let i=await this.parse(r);if(i.length>1){for(let s of i.slice(0,-1))yield[s];r=i[i.length-1]}}for(let a of await this.parse(r))yield[a]}};Os.ListOutputParser=op;var tC=class extends op{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(r=>r.trim())}catch{throw new b6.OutputParserException(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}};Os.CommaSeparatedListOutputParser=tC;var rC=class extends op{constructor({length:e,separator:r}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.length=e,this.separator=r||","}async parse(e){try{let r=e.trim().split(this.separator).map(a=>a.trim());if(this.length!==void 0&&r.length!==this.length)throw new b6.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${r.length}.`);return r}catch(r){throw Object.getPrototypeOf(r)===b6.OutputParserException.prototype?r:new b6.OutputParserException(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}};Os.CustomListOutputParser=rC;var aC=class extends op{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/\d+\.\s([^\n]+)/g})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(r=>r[1])}};Os.NumberedListOutputParser=aC;var nC=class extends op{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/^\s*[-*]\s([^\n]+)$/gm})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(r=>r[1])}};Os.MarkdownListOutputParser=nC});var lq=te(v6=>{"use strict";Object.defineProperty(v6,"__esModule",{value:!0});v6.StringOutputParser=void 0;var Kde=Ac(),iC=class extends Kde.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((r,a)=>r+this._messageContentComplexToString(a),"")}};v6.StringOutputParser=iC});var dq=te(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.AsymmetricStructuredOutputParser=Ec.JsonMarkdownStructuredOutputParser=Ec.StructuredOutputParser=void 0;var y6=oi(),cq=gc(),_6=sp(),x6=class extends _6.BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let r=y6.z.object(Object.fromEntries(Object.entries(e).map(([a,i])=>[a,y6.z.string().describe(i)])));return new this(r)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify((0,cq.zodToJsonSchema)(this.schema))}
\`\`\`
`}async parse(e){try{let a=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,s)=>`"${s.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(a))}catch(r){throw new _6.OutputParserException(`Failed to parse. Text: "${e}". Error: ${r}`,e)}}};Ec.StructuredOutputParser=x6;var w6=class extends x6{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let r=e?.interpolationDepth??1;if(r<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction((0,cq.zodToJsonSchema)(this.schema)).replaceAll("{","{".repeat(r)).replaceAll("}","}".repeat(r))}
\`\`\``}_schemaToInstruction(e,r=2){let a=e;if("type"in a){let i=!1,s;if(Array.isArray(a.type)){let l=a.type.findIndex(d=>d==="null");l!==-1&&(i=!0,a.type.splice(l,1)),s=a.type.join(" | ")}else s=a.type;if(a.type==="object"&&a.properties){let l=a.description?` // ${a.description}`:"";return`{
${Object.entries(a.properties).map(([c,y])=>{let u=a.required?.includes(c)?"":" (optional)";return`${" ".repeat(r)}"${c}": ${this._schemaToInstruction(y,r+2)}${u}`}).join(`
`)}
${" ".repeat(r-2)}}${l}`}if(a.type==="array"&&a.items){let l=a.description?` // ${a.description}`:"";return`array[
${" ".repeat(r)}${this._schemaToInstruction(a.items,r+2)}
${" ".repeat(r-2)}] ${l}`}let t=i?" (nullable)":"",o=a.description?` // ${a.description}`:"";return`${s}${o}${t}`}if("anyOf"in a)return a.anyOf.map(i=>this._schemaToInstruction(i,r)).join(`
${" ".repeat(r-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let r=y6.z.object(Object.fromEntries(Object.entries(e).map(([a,i])=>[a,y6.z.string().describe(i)])));return new this(r)}};Ec.JsonMarkdownStructuredOutputParser=w6;var sC=class extends _6.BaseOutputParser{constructor({inputSchema:e}){super(...arguments),Object.defineProperty(this,"structuredInputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.structuredInputParser=new w6(e)}async parse(e){let r;try{r=await this.structuredInputParser.parse(e)}catch(a){throw new _6.OutputParserException(`Failed to parse. Text: "${e}". Error: ${a}`,e)}return this.outputProcessor(r)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};Ec.AsymmetricStructuredOutputParser=sC});var S6=te(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.applyPatch=h0.compare=void 0;var pq=o7();Object.defineProperty(h0,"compare",{enumerable:!0,get:function(){return pq.compare}});Object.defineProperty(h0,"applyPatch",{enumerable:!0,get:function(){return pq.applyPatch}})});var uC=te(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.parseJsonMarkdown=Pc.parsePartialJson=Pc.JsonOutputParser=void 0;var Zde=Ac(),Jde=S6(),C6=Q8();Object.defineProperty(Pc,"parseJsonMarkdown",{enumerable:!0,get:function(){return C6.parseJsonMarkdown}});Object.defineProperty(Pc,"parsePartialJson",{enumerable:!0,get:function(){return C6.parsePartialJson}});var oC=class extends Zde.BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,r){if(r)return e?(0,Jde.compare)(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return(0,C6.parseJsonMarkdown)(e[0].text)}async parse(e){return(0,C6.parseJsonMarkdown)(e,JSON.parse)}getFormatInstructions(){return""}};Pc.JsonOutputParser=oC});var fq=te(A6=>{"use strict";Object.defineProperty(A6,"__esModule",{value:!0});A6.sax=void 0;var Xde=function(){let n={};n.parser=function(C,x){return new r(C,x)},n.SAXParser=r,n.SAXStream=d,n.createStream=l,n.MAX_BUFFER_LENGTH=64*1024;let e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(C,x){if(!(this instanceof r))return new r(C,x);var F=this;i(F),F.q=F.c="",F.bufferCheckPosition=n.MAX_BUFFER_LENGTH,F.opt=x||{},F.opt.lowercase=F.opt.lowercase||F.opt.lowercasetags,F.looseCase=F.opt.lowercase?"toLowerCase":"toUpperCase",F.tags=[],F.closed=F.closedRoot=F.sawRoot=!1,F.tag=F.error=null,F.strict=!!C,F.noscript=!!(C||F.opt.noscript),F.state=b.BEGIN,F.strictEntities=F.opt.strictEntities,F.ENTITIES=F.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),F.attribList=[],F.opt.xmlns&&(F.ns=Object.create(V)),F.trackPosition=F.opt.position!==!1,F.trackPosition&&(F.position=F.line=F.column=0),p(F,"onready")}Object.create||(Object.create=function(C){function x(){}x.prototype=C;var F=new x;return F}),Object.keys||(Object.keys=function(C){var x=[];for(var F in C)C.hasOwnProperty(F)&&x.push(F);return x});function a(C){for(var x=Math.max(n.MAX_BUFFER_LENGTH,10),F=0,$=0,G=e.length;$<G;$++){var Z=C[e[$]].length;if(Z>x)switch(e[$]){case"textNode":_(C);break;case"cdata":h(C,"oncdata",C.cdata),C.cdata="";break;case"script":h(C,"onscript",C.script),C.script="";break;default:W(C,"Max buffer length exceeded: "+e[$])}F=Math.max(F,Z)}var J=n.MAX_BUFFER_LENGTH-F;C.bufferCheckPosition=J+C.position}function i(C){for(var x=0,F=e.length;x<F;x++)C[e[x]]=""}function s(C){_(C),C.cdata!==""&&(h(C,"oncdata",C.cdata),C.cdata=""),C.script!==""&&(h(C,"onscript",C.script),C.script="")}r.prototype={end:function(){q(this)},write:j,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var t=ReadableStream;t||(t=function(){});var o=n.EVENTS.filter(function(C){return C!=="error"&&C!=="end"});function l(C,x){return new d(C,x)}function d(C,x){if(!(this instanceof d))return new d(C,x);t.apply(this),this._parser=new r(C,x),this.writable=!0,this.readable=!0;var F=this;this._parser.onend=function(){F.emit("end")},this._parser.onerror=function($){F.emit("error",$),F._parser.error=null},this._decoder=null,o.forEach(function($){Object.defineProperty(F,"on"+$,{get:function(){return F._parser["on"+$]},set:function(G){if(!G)return F.removeAllListeners($),F._parser["on"+$]=G,G;F.on($,G)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(t.prototype,{constructor:{value:d}}),d.prototype.write=function(C){return this._parser.write(C.toString()),this.emit("data",C),!0},d.prototype.end=function(C){return C&&C.length&&this.write(C),this._parser.end(),!0},d.prototype.on=function(C,x){var F=this;return!F._parser["on"+C]&&o.indexOf(C)!==-1&&(F._parser["on"+C]=function(){var $=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,C),F.emit.apply(F,$)}),t.prototype.on.call(F,C,x)};var c="[CDATA[",y="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",S="http://www.w3.org/2000/xmlns/",V={xml:u,xmlns:S},U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(C){return C===" "||C===`
`||C==="\r"||C==="	"}function R(C){return C==='"'||C==="'"}function g(C){return C===">"||T(C)}function m(C,x){return C.test(x)}function v(C,x){return!m(C,x)}var b=0;n.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(C){var x=n.ENTITIES[C],F=typeof x=="number"?String.fromCharCode(x):x;n.ENTITIES[C]=F});for(var f in n.STATE)n.STATE[n.STATE[f]]=f;b=n.STATE;function p(C,x,F){C[x]&&C[x](F)}function h(C,x,F){C.textNode&&_(C),p(C,x,F)}function _(C){C.textNode=I(C.opt,C.textNode),C.textNode&&p(C,"ontext",C.textNode),C.textNode=""}function I(C,x){return C.trim&&(x=x.trim()),C.normalize&&(x=x.replace(/\s+/g," ")),x}function W(C,x){return _(C),C.trackPosition&&(x+=`
Line: `+C.line+`
Column: `+C.column+`
Char: `+C.c),x=new Error(x),C.error=x,p(C,"onerror",x),C}function q(C){return C.sawRoot&&!C.closedRoot&&B(C,"Unclosed root tag"),C.state!==b.BEGIN&&C.state!==b.BEGIN_WHITESPACE&&C.state!==b.TEXT&&W(C,"Unexpected end"),_(C),C.c="",C.closed=!0,p(C,"onend"),r.call(C,C.strict,C.opt),C}function B(C,x){if(typeof C!="object"||!(C instanceof r))throw new Error("bad call to strictFail");C.strict&&W(C,x)}function N(C){C.strict||(C.tagName=C.tagName[C.looseCase]());var x=C.tags[C.tags.length-1]||C,F=C.tag={name:C.tagName,attributes:{}};C.opt.xmlns&&(F.ns=x.ns),C.attribList.length=0,h(C,"onopentagstart",F)}function L(C,x){var F=C.indexOf(":"),$=F<0?["",C]:C.split(":"),G=$[0],Z=$[1];return x&&C==="xmlns"&&(G="xmlns",Z=""),{prefix:G,local:Z}}function P(C){if(C.strict||(C.attribName=C.attribName[C.looseCase]()),C.attribList.indexOf(C.attribName)!==-1||C.tag.attributes.hasOwnProperty(C.attribName)){C.attribName=C.attribValue="";return}if(C.opt.xmlns){var x=L(C.attribName,!0),F=x.prefix,$=x.local;if(F==="xmlns")if($==="xml"&&C.attribValue!==u)B(C,"xml: prefix must be bound to "+u+`
Actual: `+C.attribValue);else if($==="xmlns"&&C.attribValue!==S)B(C,"xmlns: prefix must be bound to "+S+`
Actual: `+C.attribValue);else{var G=C.tag,Z=C.tags[C.tags.length-1]||C;G.ns===Z.ns&&(G.ns=Object.create(Z.ns)),G.ns[$]=C.attribValue}C.attribList.push([C.attribName,C.attribValue])}else C.tag.attributes[C.attribName]=C.attribValue,h(C,"onattribute",{name:C.attribName,value:C.attribValue});C.attribName=C.attribValue=""}function O(C,x){if(C.opt.xmlns){var F=C.tag,$=L(C.tagName);F.prefix=$.prefix,F.local=$.local,F.uri=F.ns[$.prefix]||"",F.prefix&&!F.uri&&(B(C,"Unbound namespace prefix: "+JSON.stringify(C.tagName)),F.uri=$.prefix);var G=C.tags[C.tags.length-1]||C;F.ns&&G.ns!==F.ns&&Object.keys(F.ns).forEach(function(de){h(C,"onopennamespace",{prefix:de,uri:F.ns[de]})});for(var Z=0,J=C.attribList.length;Z<J;Z++){var Y=C.attribList[Z],ee=Y[0],ae=Y[1],pe=L(ee,!0),se=pe.prefix,ue=pe.local,le=se===""?"":F.ns[se]||"",ie={name:ee,value:ae,prefix:se,local:ue,uri:le};se&&se!=="xmlns"&&!le&&(B(C,"Unbound namespace prefix: "+JSON.stringify(se)),ie.uri=se),C.tag.attributes[ee]=ie,h(C,"onattribute",ie)}C.attribList.length=0}C.tag.isSelfClosing=!!x,C.sawRoot=!0,C.tags.push(C.tag),h(C,"onopentag",C.tag),x||(!C.noscript&&C.tagName.toLowerCase()==="script"?C.state=b.SCRIPT:C.state=b.TEXT,C.tag=null,C.tagName=""),C.attribName=C.attribValue="",C.attribList.length=0}function E(C){if(!C.tagName){B(C,"Weird empty close tag."),C.textNode+="</>",C.state=b.TEXT;return}if(C.script){if(C.tagName!=="script"){C.script+="</"+C.tagName+">",C.tagName="",C.state=b.SCRIPT;return}h(C,"onscript",C.script),C.script=""}var x=C.tags.length,F=C.tagName;C.strict||(F=F[C.looseCase]());for(var $=F;x--;){var G=C.tags[x];if(G.name!==$)B(C,"Unexpected close tag");else break}if(x<0){B(C,"Unmatched closing tag: "+C.tagName),C.textNode+="</"+C.tagName+">",C.state=b.TEXT;return}C.tagName=F;for(var Z=C.tags.length;Z-- >x;){var J=C.tag=C.tags.pop();C.tagName=C.tag.name,h(C,"onclosetag",C.tagName);var Y={};for(var ee in J.ns)Y[ee]=J.ns[ee];var ae=C.tags[C.tags.length-1]||C;C.opt.xmlns&&J.ns!==ae.ns&&Object.keys(J.ns).forEach(function(pe){var se=J.ns[pe];h(C,"onclosenamespace",{prefix:pe,uri:se})})}x===0&&(C.closedRoot=!0),C.tagName=C.attribValue=C.attribName="",C.attribList.length=0,C.state=b.TEXT}function w(C){var x=C.entity,F=x.toLowerCase(),$,G="";return C.ENTITIES[x]?C.ENTITIES[x]:C.ENTITIES[F]?C.ENTITIES[F]:(x=F,x.charAt(0)==="#"&&(x.charAt(1)==="x"?(x=x.slice(2),$=parseInt(x,16),G=$.toString(16)):(x=x.slice(1),$=parseInt(x,10),G=$.toString(10))),x=x.replace(/^0+/,""),isNaN($)||G.toLowerCase()!==x?(B(C,"Invalid character entity"),"&"+C.entity+";"):String.fromCodePoint($))}function A(C,x){x==="<"?(C.state=b.OPEN_WAKA,C.startTagPosition=C.position):T(x)||(B(C,"Non-whitespace before first tag."),C.textNode=x,C.state=b.TEXT)}function M(C,x){var F="";return x<C.length&&(F=C.charAt(x)),F}function j(C){var x=this;if(this.error)throw this.error;if(x.closed)return W(x,"Cannot write after close. Assign an onready handler.");if(C===null)return q(x);typeof C=="object"&&(C=C.toString());for(var F=0,$="";$=M(C,F++),x.c=$,!!$;)switch(x.trackPosition&&(x.position++,$===`
`?(x.line++,x.column=0):x.column++),x.state){case b.BEGIN:if(x.state=b.BEGIN_WHITESPACE,$==="\uFEFF")continue;A(x,$);continue;case b.BEGIN_WHITESPACE:A(x,$);continue;case b.TEXT:if(x.sawRoot&&!x.closedRoot){for(var G=F-1;$&&$!=="<"&&$!=="&";)$=M(C,F++),$&&x.trackPosition&&(x.position++,$===`
`?(x.line++,x.column=0):x.column++);x.textNode+=C.substring(G,F-1)}$==="<"&&!(x.sawRoot&&x.closedRoot&&!x.strict)?(x.state=b.OPEN_WAKA,x.startTagPosition=x.position):(!T($)&&(!x.sawRoot||x.closedRoot)&&B(x,"Text data outside of root node."),$==="&"?x.state=b.TEXT_ENTITY:x.textNode+=$);continue;case b.SCRIPT:$==="<"?x.state=b.SCRIPT_ENDING:x.script+=$;continue;case b.SCRIPT_ENDING:$==="/"?x.state=b.CLOSE_TAG:(x.script+="<"+$,x.state=b.SCRIPT);continue;case b.OPEN_WAKA:if($==="!")x.state=b.SGML_DECL,x.sgmlDecl="";else if(!T($))if(m(U,$))x.state=b.OPEN_TAG,x.tagName=$;else if($==="/")x.state=b.CLOSE_TAG,x.tagName="";else if($==="?")x.state=b.PROC_INST,x.procInstName=x.procInstBody="";else{if(B(x,"Unencoded <"),x.startTagPosition+1<x.position){var Z=x.position-x.startTagPosition;$=new Array(Z).join(" ")+$}x.textNode+="<"+$,x.state=b.TEXT}continue;case b.SGML_DECL:(x.sgmlDecl+$).toUpperCase()===c?(h(x,"onopencdata"),x.state=b.CDATA,x.sgmlDecl="",x.cdata=""):x.sgmlDecl+$==="--"?(x.state=b.COMMENT,x.comment="",x.sgmlDecl=""):(x.sgmlDecl+$).toUpperCase()===y?(x.state=b.DOCTYPE,(x.doctype||x.sawRoot)&&B(x,"Inappropriately located doctype declaration"),x.doctype="",x.sgmlDecl=""):$===">"?(h(x,"onsgmldeclaration",x.sgmlDecl),x.sgmlDecl="",x.state=b.TEXT):(R($)&&(x.state=b.SGML_DECL_QUOTED),x.sgmlDecl+=$);continue;case b.SGML_DECL_QUOTED:$===x.q&&(x.state=b.SGML_DECL,x.q=""),x.sgmlDecl+=$;continue;case b.DOCTYPE:$===">"?(x.state=b.TEXT,h(x,"ondoctype",x.doctype),x.doctype=!0):(x.doctype+=$,$==="["?x.state=b.DOCTYPE_DTD:R($)&&(x.state=b.DOCTYPE_QUOTED,x.q=$));continue;case b.DOCTYPE_QUOTED:x.doctype+=$,$===x.q&&(x.q="",x.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:x.doctype+=$,$==="]"?x.state=b.DOCTYPE:R($)&&(x.state=b.DOCTYPE_DTD_QUOTED,x.q=$);continue;case b.DOCTYPE_DTD_QUOTED:x.doctype+=$,$===x.q&&(x.state=b.DOCTYPE_DTD,x.q="");continue;case b.COMMENT:$==="-"?x.state=b.COMMENT_ENDING:x.comment+=$;continue;case b.COMMENT_ENDING:$==="-"?(x.state=b.COMMENT_ENDED,x.comment=I(x.opt,x.comment),x.comment&&h(x,"oncomment",x.comment),x.comment=""):(x.comment+="-"+$,x.state=b.COMMENT);continue;case b.COMMENT_ENDED:$!==">"?(B(x,"Malformed comment"),x.comment+="--"+$,x.state=b.COMMENT):x.state=b.TEXT;continue;case b.CDATA:$==="]"?x.state=b.CDATA_ENDING:x.cdata+=$;continue;case b.CDATA_ENDING:$==="]"?x.state=b.CDATA_ENDING_2:(x.cdata+="]"+$,x.state=b.CDATA);continue;case b.CDATA_ENDING_2:$===">"?(x.cdata&&h(x,"oncdata",x.cdata),h(x,"onclosecdata"),x.cdata="",x.state=b.TEXT):$==="]"?x.cdata+="]":(x.cdata+="]]"+$,x.state=b.CDATA);continue;case b.PROC_INST:$==="?"?x.state=b.PROC_INST_ENDING:T($)?x.state=b.PROC_INST_BODY:x.procInstName+=$;continue;case b.PROC_INST_BODY:if(!x.procInstBody&&T($))continue;$==="?"?x.state=b.PROC_INST_ENDING:x.procInstBody+=$;continue;case b.PROC_INST_ENDING:$===">"?(h(x,"onprocessinginstruction",{name:x.procInstName,body:x.procInstBody}),x.procInstName=x.procInstBody="",x.state=b.TEXT):(x.procInstBody+="?"+$,x.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:m(z,$)?x.tagName+=$:(N(x),$===">"?O(x):$==="/"?x.state=b.OPEN_TAG_SLASH:(T($)||B(x,"Invalid character in tag name"),x.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:$===">"?(O(x,!0),E(x)):(B(x,"Forward-slash in opening tag not followed by >"),x.state=b.ATTRIB);continue;case b.ATTRIB:if(T($))continue;$===">"?O(x):$==="/"?x.state=b.OPEN_TAG_SLASH:m(U,$)?(x.attribName=$,x.attribValue="",x.state=b.ATTRIB_NAME):B(x,"Invalid attribute name");continue;case b.ATTRIB_NAME:$==="="?x.state=b.ATTRIB_VALUE:$===">"?(B(x,"Attribute without value"),x.attribValue=x.attribName,P(x),O(x)):T($)?x.state=b.ATTRIB_NAME_SAW_WHITE:m(z,$)?x.attribName+=$:B(x,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if($==="=")x.state=b.ATTRIB_VALUE;else{if(T($))continue;B(x,"Attribute without value"),x.tag.attributes[x.attribName]="",x.attribValue="",h(x,"onattribute",{name:x.attribName,value:""}),x.attribName="",$===">"?O(x):m(U,$)?(x.attribName=$,x.state=b.ATTRIB_NAME):(B(x,"Invalid attribute name"),x.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(T($))continue;R($)?(x.q=$,x.state=b.ATTRIB_VALUE_QUOTED):(B(x,"Unquoted attribute value"),x.state=b.ATTRIB_VALUE_UNQUOTED,x.attribValue=$);continue;case b.ATTRIB_VALUE_QUOTED:if($!==x.q){$==="&"?x.state=b.ATTRIB_VALUE_ENTITY_Q:x.attribValue+=$;continue}P(x),x.q="",x.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:T($)?x.state=b.ATTRIB:$===">"?O(x):$==="/"?x.state=b.OPEN_TAG_SLASH:m(U,$)?(B(x,"No whitespace between attributes"),x.attribName=$,x.attribValue="",x.state=b.ATTRIB_NAME):B(x,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!g($)){$==="&"?x.state=b.ATTRIB_VALUE_ENTITY_U:x.attribValue+=$;continue}P(x),$===">"?O(x):x.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(x.tagName)$===">"?E(x):m(z,$)?x.tagName+=$:x.script?(x.script+="</"+x.tagName,x.tagName="",x.state=b.SCRIPT):(T($)||B(x,"Invalid tagname in closing tag"),x.state=b.CLOSE_TAG_SAW_WHITE);else{if(T($))continue;v(U,$)?x.script?(x.script+="</"+$,x.state=b.SCRIPT):B(x,"Invalid tagname in closing tag."):x.tagName=$}continue;case b.CLOSE_TAG_SAW_WHITE:if(T($))continue;$===">"?E(x):B(x,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var J,Y;switch(x.state){case b.TEXT_ENTITY:J=b.TEXT,Y="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:J=b.ATTRIB_VALUE_QUOTED,Y="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:J=b.ATTRIB_VALUE_UNQUOTED,Y="attribValue";break}if($===";")if(x.opt.unparsedEntities){var ee=w(x);x.entity="",x.state=J,x.write(ee)}else x[Y]+=w(x),x.entity="",x.state=J;else m(x.entity.length?k:D,$)?x.entity+=$:(B(x,"Invalid character in entity name"),x[Y]+="&"+x.entity+$,x.entity="",x.state=J);continue;default:throw new Error(x,"Unknown state: "+x.state)}return x.position>=x.bufferCheckPosition&&a(x),x}return String.fromCodePoint||function(){var C=String.fromCharCode,x=Math.floor,F=function(){var $=16384,G=[],Z,J,Y=-1,ee=arguments.length;if(!ee)return"";for(var ae="";++Y<ee;){var pe=Number(arguments[Y]);if(!isFinite(pe)||pe<0||pe>1114111||x(pe)!==pe)throw RangeError("Invalid code point: "+pe);pe<=65535?G.push(pe):(pe-=65536,Z=(pe>>10)+55296,J=pe%1024+56320,G.push(Z,J)),(Y+1===ee||G.length>$)&&(ae+=C.apply(null,G),G.length=0)}return ae};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:F,configurable:!0,writable:!0}):String.fromCodePoint=F}(),n},Yde=Xde();A6.sax=Yde});var mq=te(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.parseXMLMarkdown=hu.XMLOutputParser=hu.XML_FORMAT_INSTRUCTIONS=void 0;var Qde=Ac(),epe=S6(),tpe=fq();hu.XML_FORMAT_INSTRUCTIONS=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var lC=class extends Qde.BaseCumulativeTransformOutputParser{constructor(e){super(e),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}_diff(e,r){if(r)return e?(0,epe.compare)(e,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(e){return cC(e[0].text)}async parse(e){return cC(e)}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?hu.XML_FORMAT_INSTRUCTIONS.replace("{tags}",this.tags?.join(", ")??""):hu.XML_FORMAT_INSTRUCTIONS}};hu.XMLOutputParser=lC;var rpe=n=>n.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),hq=n=>{if(Object.keys(n).length===0)return{};let e={};return n.children.length>0?(e[n.name]=n.children.map(hq),e):(e[n.name]=n.text??void 0,e)};function cC(n){let e=rpe(n),r=tpe.sax.parser(!0),a={},i=[];r.onopentag=o=>{let l={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};i.length>0?i[i.length-1].children.push(l):a=l,o.isSelfClosing||i.push(l)},r.onclosetag=()=>{if(i.length>0){let o=i.pop();i.length===0&&o&&(a=o)}},r.ontext=o=>{if(i.length>0){let l=i[i.length-1];l.text+=o}},r.onattribute=o=>{if(i.length>0){let l=i[i.length-1];l.attributes[o.name]=o.value}};let s=/```(xml)?(.*)```/s.exec(e),t=s?s[2]:e;return r.write(t).close(),a&&a.name==="?xml"&&(a=a.children[0]),hq(a)}hu.parseXMLMarkdown=cC});var dC=te(Pi=>{"use strict";var ape=Pi&&Pi.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Tc=Pi&&Pi.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ape(e,n,r)};Object.defineProperty(Pi,"__esModule",{value:!0});Tc(sp(),Pi);Tc(oq(),Pi);Tc(uq(),Pi);Tc(lq(),Pi);Tc(dq(),Pi);Tc(Ac(),Pi);Tc(uC(),Pi);Tc(mq(),Pi)});function bq(n,e){return e?.[n]||(0,gq.default)(n)}function vq(n,e,r){let a={};for(let i in n)Object.hasOwn(n,i)&&(a[e(i,r)]=n[i]);return a}var gq,npe,yq=Ve(()=>{gq=gn(B8(),1),npe=gn(q8(),1)});function _q(n){return Array.isArray(n)?[...n]:{...n}}function ipe(n,e){let r=_q(n);for(let[a,i]of Object.entries(e)){let[s,...t]=a.split(".").reverse(),o=r;for(let l of t.reverse()){if(o[l]===void 0)break;o[l]=_q(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function pC(n){let e=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof e.lc_name!="function"||n.lc_name()!==e.lc_name())?n.lc_name():n.name}var xo,b1=Ve(()=>{yq();xo=class n{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,pC(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([a])=>this.lc_serializable_keys?.includes(a))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof n||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},a=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(a,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,t=a,[o,...l]=i.split(".").reverse();for(let d of l.reverse()){if(!(d in s)||s[d]===void 0)return;(!(d in t)||t[d]===void 0)&&(typeof s[d]=="object"&&s[d]!=null?t[d]={}:Array.isArray(s[d])&&(t[d]=[])),s=s[d],t=t[d]}o in s&&s[o]!==void 0&&(t[o]=t[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:vq(Object.keys(r).length?ipe(a,r):a,bq,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}});function fC(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"&&"source_type"in n&&(n.source_type==="url"||n.source_type==="base64"||n.source_type==="text"||n.source_type==="id")}var hC=Ve(()=>{});function up(n,e){return typeof n=="string"?n===""?e:typeof e=="string"?n+e:Array.isArray(e)&&e.some(r=>fC(r))?[{type:"text",source_type:"text",text:n},...e]:[{type:"text",text:n},...e]:Array.isArray(e)?E6(n,e)??[...n,...e]:e===""?n:Array.isArray(n)&&n.some(r=>fC(r))?[...n,{type:"file",source_type:"text",text:e}]:[...n,{type:"text",text:e}]}function spe(n,e){function r(a,i){if(typeof a!="object"||a===null||a===void 0)return a;if(i>=e)return Array.isArray(a)?"[Array]":"[Object]";if(Array.isArray(a))return a.map(t=>r(t,i+1));let s={};for(let t of Object.keys(a))s[t]=r(a[t],i+1);return s}return JSON.stringify(r(n,0),null,2)}function mu(n,e){let r={...n};for(let[a,i]of Object.entries(e))if(r[a]==null)r[a]=i;else{if(i==null)continue;if(typeof r[a]!=typeof i||Array.isArray(r[a])!==Array.isArray(i))throw new Error(`field[${a}] already exists in the message chunk, but with a different type.`);if(typeof r[a]=="string"){if(a==="type")continue;r[a]+=i}else if(typeof r[a]=="object"&&!Array.isArray(r[a]))r[a]=mu(r[a],i);else if(Array.isArray(r[a]))r[a]=E6(r[a],i);else{if(r[a]===i)continue;console.warn(`field[${a}] already exists in this message chunk and value has unsupported type.`)}}return r}function E6(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0||e===void 0)return n||e;{let r=[...n];for(let a of e)if(typeof a=="object"&&"index"in a&&typeof a.index=="number"){let i=r.findIndex(s=>s.index===a.index);i!==-1?r[i]=mu(r[i],a):r.push(a)}else{if(typeof a=="object"&&"text"in a&&a.text==="")continue;r.push(a)}return r}}}var Fs,Sl,wo=Ve(()=>{b1();hC();Fs=class extends xo{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let r=spe(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}};Sl=class extends Fs{}});var lp,v1=Ve(()=>{wo();lp=class extends Fs{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,r){super(e,r)}}});function P6(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}var T6=Ve(()=>{});function mC(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="tool_call")}var O6,gC=Ve(()=>{O6=class extends Error{constructor(e,r){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=r}}});function xq(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let e="",r=[],a=!1,i=!1;for(let s of n){if(a)s==='"'&&!i?a=!1:s===`
`&&!i?s="\\n":s==="\\"?i=!i:i=!1;else if(s==='"')a=!0,i=!1;else if(s==="{")r.push("}");else if(s==="[")r.push("]");else if(s==="}"||s==="]")if(r&&r[r.length-1]===s)r.pop();else return null;e+=s}a&&(e+='"');for(let s=r.length-1;s>=0;s-=1)e+=r[s];try{return JSON.parse(e)}catch{return null}}var wq=Ve(()=>{});var y1=Ve(()=>{wo()});var Oc,m0=Ve(()=>{wq();wo();y1();Oc=class n extends Sl{constructor(e){let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)r={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{let a=[],i=[];for(let s of e.tool_call_chunks){let t={};try{if(t=xq(s.args||"{}"),t===null||typeof t!="object"||Array.isArray(t))throw new Error("Malformed tool call chunk args.");a.push({name:s.name??"",args:t,id:s.id,type:"tool_call"})}catch{i.push({name:s.name,args:s.args,id:s.id,error:"Malformed args.",type:"invalid_tool_call"})}}r={...e,tool_calls:a,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=r.tool_call_chunks??this.tool_call_chunks,this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){let r={content:up(this.content,e.content),additional_kwargs:mu(this.additional_kwargs,e.additional_kwargs),response_metadata:mu(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let a=E6(this.tool_call_chunks,e.tool_call_chunks);a!==void 0&&a.length>0&&(r.tool_call_chunks=a)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){let a={...(this.usage_metadata?.input_token_details?.audio!==void 0||e.usage_metadata?.input_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(e.usage_metadata?.input_token_details?.audio??0)},...(this.usage_metadata?.input_token_details?.cache_read!==void 0||e.usage_metadata?.input_token_details?.cache_read!==void 0)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(e.usage_metadata?.input_token_details?.cache_read??0)},...(this.usage_metadata?.input_token_details?.cache_creation!==void 0||e.usage_metadata?.input_token_details?.cache_creation!==void 0)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(e.usage_metadata?.input_token_details?.cache_creation??0)}},i={...(this.usage_metadata?.output_token_details?.audio!==void 0||e.usage_metadata?.output_token_details?.audio!==void 0)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(e.usage_metadata?.output_token_details?.audio??0)},...(this.usage_metadata?.output_token_details?.reasoning!==void 0||e.usage_metadata?.output_token_details?.reasoning!==void 0)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(e.usage_metadata?.output_token_details?.reasoning??0)}},s=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},t=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},o={input_tokens:s.input_tokens+t.input_tokens,output_tokens:s.output_tokens+t.output_tokens,total_tokens:s.total_tokens+t.total_tokens,...Object.keys(a).length>0&&{input_token_details:a},...Object.keys(i).length>0&&{output_token_details:i}};r.usage_metadata=o}return new n(r)}}});var F6=Ve(()=>{wo()});var k6=Ve(()=>{wo()});var R6=Ve(()=>{wo()});function I6(n,e="Human",r="AI"){let a=[];for(let i of n){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let t=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);a.push(`${s}: ${t}${o}`)}return a.join(`
`)}var _1=Ve(()=>{T6();gC();m0();wo();F6();k6();v1();R6();y1()});var D6,N6,M6,j6=Ve(()=>{b1();v1();_1();D6=class extends xo{},N6=class extends D6{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new lp(this.value)]}},M6=class extends D6{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return I6(this.messages)}toChatMessages(){return this.messages}}});var qr,bC,Ot,gu,x1=Ve(()=>{(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function r(i){throw new Error}n.assertNever=r,n.arrayToEnum=i=>{let s={};for(let t of i)s[t]=t;return s},n.getValidEnumValues=i=>{let s=n.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),t={};for(let o of s)t[o]=i[o];return n.objectValues(t)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&s.push(t);return s},n.find=(i,s)=>{for(let t of i)if(s(t))return t},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function a(i,s=" | "){return i.map(t=>typeof t=="string"?`'${t}'`:t).join(s)}n.joinValues=a,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(qr||(qr={}));(function(n){n.mergeShapes=(e,r)=>({...e,...r})})(bC||(bC={}));Ot=qr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gu=n=>{switch(typeof n){case"undefined":return Ot.undefined;case"string":return Ot.string;case"number":return Number.isNaN(n)?Ot.nan:Ot.number;case"boolean":return Ot.boolean;case"function":return Ot.function;case"bigint":return Ot.bigint;case"symbol":return Ot.symbol;case"object":return Array.isArray(n)?Ot.array:n===null?Ot.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ot.promise:typeof Map<"u"&&n instanceof Map?Ot.map:typeof Set<"u"&&n instanceof Set?Ot.set:typeof Date<"u"&&n instanceof Date?Ot.date:Ot.object;default:return Ot.unknown}}});var lt,fpe,Ti,B6=Ve(()=>{x1();lt=qr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fpe=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:"),Ti=class n extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},a={_errors:[]},i=s=>{for(let t of s.issues)if(t.code==="invalid_union")t.unionErrors.map(i);else if(t.code==="invalid_return_type")i(t.returnTypeError);else if(t.code==="invalid_arguments")i(t.argumentsError);else if(t.path.length===0)a._errors.push(r(t));else{let o=a,l=0;for(;l<t.path.length;){let d=t.path[l];l===t.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(t))):o[d]=o[d]||{_errors:[]},o=o[d],l++}}};return i(this),a}static assert(e){if(!(e instanceof n))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},a=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):a.push(e(i));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};Ti.create=n=>new Ti(n)});var hpe,Cl,vC=Ve(()=>{B6();x1();hpe=(n,e)=>{let r;switch(n.code){case lt.invalid_type:n.received===Ot.undefined?r="Required":r=`Expected ${n.expected}, received ${n.received}`;break;case lt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(n.expected,qr.jsonStringifyReplacer)}`;break;case lt.unrecognized_keys:r=`Unrecognized key(s) in object: ${qr.joinValues(n.keys,", ")}`;break;case lt.invalid_union:r="Invalid input";break;case lt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qr.joinValues(n.options)}`;break;case lt.invalid_enum_value:r=`Invalid enum value. Expected ${qr.joinValues(n.options)}, received '${n.received}'`;break;case lt.invalid_arguments:r="Invalid function arguments";break;case lt.invalid_return_type:r="Invalid function return type";break;case lt.invalid_date:r="Invalid date";break;case lt.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(r=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?r=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?r=`Invalid input: must end with "${n.validation.endsWith}"`:qr.assertNever(n.validation):n.validation!=="regex"?r=`Invalid ${n.validation}`:r="Invalid";break;case lt.too_small:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:r="Invalid input";break;case lt.too_big:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?r=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:r="Invalid input";break;case lt.custom:r="Invalid input";break;case lt.invalid_intersection_types:r="Intersection results could not be merged";break;case lt.not_multiple_of:r=`Number must be a multiple of ${n.multipleOf}`;break;case lt.not_finite:r="Number must be finite";break;default:r=e.defaultError,qr.assertNever(n)}return{message:r}},Cl=hpe});function mpe(n){Pq=n}function g0(){return Pq}var Pq,L6=Ve(()=>{vC();Pq=Cl});function Pt(n,e){let r=g0(),a=w1({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,r,r===Cl?void 0:Cl].filter(i=>!!i)});n.common.issues.push(a)}var w1,gpe,In,Xt,cp,Hn,q6,U6,Fc,b0,yC=Ve(()=>{L6();vC();w1=n=>{let{data:e,path:r,errorMaps:a,issueData:i}=n,s=[...r,...i.path||[]],t={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="",l=a.filter(d=>!!d).slice().reverse();for(let d of l)o=d(t,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},gpe=[];In=class n{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let a=[];for(let i of r){if(i.status==="aborted")return Xt;i.status==="dirty"&&e.dirty(),a.push(i.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){let a=[];for(let i of r){let s=await i.key,t=await i.value;a.push({key:s,value:t})}return n.mergeObjectSync(e,a)}static mergeObjectSync(e,r){let a={};for(let i of r){let{key:s,value:t}=i;if(s.status==="aborted"||t.status==="aborted")return Xt;s.status==="dirty"&&e.dirty(),t.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof t.value<"u"||i.alwaysSet)&&(a[s.value]=t.value)}return{status:e.value,value:a}}},Xt=Object.freeze({status:"aborted"}),cp=n=>({status:"dirty",value:n}),Hn=n=>({status:"valid",value:n}),q6=n=>n.status==="aborted",U6=n=>n.status==="dirty",Fc=n=>n.status==="valid",b0=n=>typeof Promise<"u"&&n instanceof Promise});var Tq=Ve(()=>{});var jt,Oq=Ve(()=>{(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(jt||(jt={}))});function Sr(n){if(!n)return{};let{errorMap:e,invalid_type_error:r,required_error:a,description:i}=n;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(t,o)=>{let{message:l}=n;return t.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??a??o.defaultError}:t.code!=="invalid_type"?{message:o.defaultError}:{message:l??r??o.defaultError}},description:i}}function Iq(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);let r=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Ipe(n){return new RegExp(`^${Iq(n)}$`)}function Dq(n){let e=`${Rq}T${Iq(n)}`,r=[];return r.push(n.local?"Z?":"Z"),n.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Dpe(n,e){return!!((e==="v4"||!e)&&Epe.test(n)||(e==="v6"||!e)&&Tpe.test(n))}function Npe(n,e){if(!wpe.test(n))return!1;try{let[r]=n.split("."),a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(a));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Mpe(n,e){return!!((e==="v4"||!e)&&Ppe.test(n)||(e==="v6"||!e)&&Ope.test(n))}function jpe(n,e){let r=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,i=r>a?r:a,s=Number.parseInt(n.toFixed(i).replace(".","")),t=Number.parseInt(e.toFixed(i).replace(".",""));return s%t/10**i}function v0(n){if(n instanceof Fi){let e={};for(let r in n.shape){let a=n.shape[r];e[r]=Oi.create(v0(a))}return new Fi({...n._def,shape:()=>e})}else return n instanceof Pl?new Pl({...n._def,type:v0(n.element)}):n instanceof Oi?Oi.create(v0(n.unwrap())):n instanceof vu?vu.create(v0(n.unwrap())):n instanceof bu?bu.create(n.items.map(e=>v0(e))):n}function xC(n,e){let r=gu(n),a=gu(e);if(n===e)return{valid:!0,data:n};if(r===Ot.object&&a===Ot.object){let i=qr.objectKeys(e),s=qr.objectKeys(n).filter(o=>i.indexOf(o)!==-1),t={...n,...e};for(let o of s){let l=xC(n[o],e[o]);if(!l.valid)return{valid:!1};t[o]=l.data}return{valid:!0,data:t}}else if(r===Ot.array&&a===Ot.array){if(n.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<n.length;s++){let t=n[s],o=e[s],l=xC(t,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Ot.date&&a===Ot.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}function Nq(n,e){return new xp({values:n,typeName:pt.ZodEnum,...Sr(e)})}function kq(n,e){let r=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof r=="string"?{message:r}:r}function Mq(n,e={},r){return n?Rc.create().superRefine((a,i)=>{let s=n(a);if(s instanceof Promise)return s.then(t=>{if(!t){let o=kq(e,a),l=o.fatal??r??!0;i.addIssue({code:"custom",...o,fatal:l})}});if(!s){let t=kq(e,a),o=t.fatal??r??!0;i.addIssue({code:"custom",...t,fatal:o})}}):Rc.create()}var ks,Fq,Dr,bpe,vpe,ype,_pe,xpe,wpe,Spe,Cpe,Ape,_C,Epe,Ppe,Tpe,Ope,Fpe,kpe,Rq,Rpe,kc,dp,pp,fp,hp,y0,mp,gp,Rc,El,So,_0,Pl,Fi,bp,Al,$6,vp,bu,V6,x0,w0,z6,yp,_p,xp,wp,Ic,Rs,Oi,vu,Sp,Cp,S0,Bpe,S1,C1,Ap,Lpe,pt,qpe,jq,Bq,Upe,$pe,Lq,Vpe,zpe,Wpe,Gpe,Hpe,Kpe,Zpe,Jpe,Xpe,Ype,Qpe,efe,tfe,rfe,afe,nfe,ife,sfe,ofe,ufe,lfe,cfe,dfe,pfe,ffe,hfe,mfe,gfe,bfe,vfe,yfe,_fe,xfe,wfe,qq=Ve(()=>{B6();L6();Oq();yC();x1();ks=class{constructor(e,r,a,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=a,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Fq=(n,e)=>{if(Fc(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ti(n.common.issues);return this._error=r,this._error}}};Dr=class{get description(){return this._def.description}_getType(e){return gu(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:gu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new In,ctx:{common:e.parent.common,data:e.data,parsedType:gu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(b0(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let a=this.safeParse(e,r);if(a.success)return a.data;throw a.error}safeParse(e,r){let a={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gu(e)},i=this._parseSync({data:e,path:a.path,parent:a});return Fq(a,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gu(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:r});return Fc(a)?{value:a.value}:{issues:r.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Fc(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,r){let a=await this.safeParseAsync(e,r);if(a.success)return a.data;throw a.error}async safeParseAsync(e,r){let a={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gu(e)},i=this._parse({data:e,path:a.path,parent:a}),s=await(b0(i)?i:Promise.resolve(i));return Fq(a,s)}refine(e,r){let a=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{let t=e(i),o=()=>s.addIssue({code:lt.custom,...a(i)});return typeof Promise<"u"&&t instanceof Promise?t.then(l=>l?!0:(o(),!1)):t?!0:(o(),!1)})}refinement(e,r){return this._refinement((a,i)=>e(a)?!0:(i.addIssue(typeof r=="function"?r(a,i):r),!1))}_refinement(e){return new Rs({schema:this,typeName:pt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Oi.create(this,this._def)}nullable(){return vu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pl.create(this)}promise(){return Ic.create(this,this._def)}or(e){return bp.create([this,e],this._def)}and(e){return vp.create(this,e,this._def)}transform(e){return new Rs({...Sr(this._def),schema:this,typeName:pt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Sp({...Sr(this._def),innerType:this,defaultValue:r,typeName:pt.ZodDefault})}brand(){return new S1({typeName:pt.ZodBranded,type:this,...Sr(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Cp({...Sr(this._def),innerType:this,catchValue:r,typeName:pt.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return C1.create(this,e)}readonly(){return Ap.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},bpe=/^c[^\s-]{8,}$/i,vpe=/^[0-9a-z]+$/,ype=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_pe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xpe=/^[a-z0-9_-]{21}$/i,wpe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Spe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cpe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ape="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Epe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ppe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Tpe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ope=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Fpe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kpe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rq="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Rpe=new RegExp(`^${Rq}$`);kc=class n extends Dr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ot.string){let s=this._getOrReturnCtx(e);return Pt(s,{code:lt.invalid_type,expected:Ot.string,received:s.parsedType}),Xt}let a=new In,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="length"){let t=e.data.length>s.value,o=e.data.length<s.value;(t||o)&&(i=this._getOrReturnCtx(e,i),t?Pt(i,{code:lt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&Pt(i,{code:lt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),a.dirty())}else if(s.kind==="email")Cpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"email",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="emoji")_C||(_C=new RegExp(Ape,"u")),_C.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"emoji",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="uuid")_pe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"uuid",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="nanoid")xpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"nanoid",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid")bpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"cuid",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid2")vpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"cuid2",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="ulid")ype.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"ulid",code:lt.invalid_string,message:s.message}),a.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Pt(i,{validation:"url",code:lt.invalid_string,message:s.message}),a.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"regex",code:lt.invalid_string,message:s.message}),a.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),a.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:{startsWith:s.value},message:s.message}),a.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:{endsWith:s.value},message:s.message}),a.dirty()):s.kind==="datetime"?Dq(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:"datetime",message:s.message}),a.dirty()):s.kind==="date"?Rpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:"date",message:s.message}),a.dirty()):s.kind==="time"?Ipe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.invalid_string,validation:"time",message:s.message}),a.dirty()):s.kind==="duration"?Spe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"duration",code:lt.invalid_string,message:s.message}),a.dirty()):s.kind==="ip"?Dpe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"ip",code:lt.invalid_string,message:s.message}),a.dirty()):s.kind==="jwt"?Npe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"jwt",code:lt.invalid_string,message:s.message}),a.dirty()):s.kind==="cidr"?Mpe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"cidr",code:lt.invalid_string,message:s.message}),a.dirty()):s.kind==="base64"?Fpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"base64",code:lt.invalid_string,message:s.message}),a.dirty()):s.kind==="base64url"?kpe.test(e.data)||(i=this._getOrReturnCtx(e,i),Pt(i,{validation:"base64url",code:lt.invalid_string,message:s.message}),a.dirty()):qr.assertNever(s);return{status:a.value,value:e.data}}_regex(e,r,a){return this.refinement(i=>e.test(i),{validation:r,code:lt.invalid_string,...jt.errToObj(a)})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...jt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...jt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...jt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...jt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...jt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...jt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...jt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...jt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...jt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...jt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...jt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...jt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...jt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...jt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...jt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...jt.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...jt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...jt.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...jt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...jt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...jt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...jt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...jt.errToObj(r)})}nonempty(e){return this.min(1,jt.errToObj(e))}trim(){return new n({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new n({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};kc.create=n=>new kc({checks:[],typeName:pt.ZodString,coerce:n?.coerce??!1,...Sr(n)});dp=class n extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ot.number){let s=this._getOrReturnCtx(e);return Pt(s,{code:lt.invalid_type,expected:Ot.number,received:s.parsedType}),Xt}let a,i=new In;for(let s of this._def.checks)s.kind==="int"?qr.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?jpe(e.data,s.value)!==0&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.not_finite,message:s.message}),i.dirty()):qr.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,jt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jt.toString(r))}setLimit(e,r,a,i){return new n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:jt.toString(i)}]})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:jt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:jt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:jt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:jt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:jt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:jt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:jt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:jt.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}};dp.create=n=>new dp({checks:[],typeName:pt.ZodNumber,coerce:n?.coerce||!1,...Sr(n)});pp=class n extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ot.bigint)return this._getInvalidInput(e);let a,i=new In;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),Pt(a,{code:lt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):qr.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return Pt(r,{code:lt.invalid_type,expected:Ot.bigint,received:r.parsedType}),Xt}gte(e,r){return this.setLimit("min",e,!0,jt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jt.toString(r))}setLimit(e,r,a,i){return new n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:jt.toString(i)}]})}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:jt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:jt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:jt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:jt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jt.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};pp.create=n=>new pp({checks:[],typeName:pt.ZodBigInt,coerce:n?.coerce??!1,...Sr(n)});fp=class extends Dr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ot.boolean){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.boolean,received:a.parsedType}),Xt}return Hn(e.data)}};fp.create=n=>new fp({typeName:pt.ZodBoolean,coerce:n?.coerce||!1,...Sr(n)});hp=class n extends Dr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ot.date){let s=this._getOrReturnCtx(e);return Pt(s,{code:lt.invalid_type,expected:Ot.date,received:s.parsedType}),Xt}if(Number.isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return Pt(s,{code:lt.invalid_date}),Xt}let a=new In,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),a.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Pt(i,{code:lt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),a.dirty()):qr.assertNever(s);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new n({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:jt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:jt.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};hp.create=n=>new hp({checks:[],coerce:n?.coerce||!1,typeName:pt.ZodDate,...Sr(n)});y0=class extends Dr{_parse(e){if(this._getType(e)!==Ot.symbol){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.symbol,received:a.parsedType}),Xt}return Hn(e.data)}};y0.create=n=>new y0({typeName:pt.ZodSymbol,...Sr(n)});mp=class extends Dr{_parse(e){if(this._getType(e)!==Ot.undefined){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.undefined,received:a.parsedType}),Xt}return Hn(e.data)}};mp.create=n=>new mp({typeName:pt.ZodUndefined,...Sr(n)});gp=class extends Dr{_parse(e){if(this._getType(e)!==Ot.null){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.null,received:a.parsedType}),Xt}return Hn(e.data)}};gp.create=n=>new gp({typeName:pt.ZodNull,...Sr(n)});Rc=class extends Dr{constructor(){super(...arguments),this._any=!0}_parse(e){return Hn(e.data)}};Rc.create=n=>new Rc({typeName:pt.ZodAny,...Sr(n)});El=class extends Dr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hn(e.data)}};El.create=n=>new El({typeName:pt.ZodUnknown,...Sr(n)});So=class extends Dr{_parse(e){let r=this._getOrReturnCtx(e);return Pt(r,{code:lt.invalid_type,expected:Ot.never,received:r.parsedType}),Xt}};So.create=n=>new So({typeName:pt.ZodNever,...Sr(n)});_0=class extends Dr{_parse(e){if(this._getType(e)!==Ot.undefined){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.void,received:a.parsedType}),Xt}return Hn(e.data)}};_0.create=n=>new _0({typeName:pt.ZodVoid,...Sr(n)});Pl=class n extends Dr{_parse(e){let{ctx:r,status:a}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ot.array)return Pt(r,{code:lt.invalid_type,expected:Ot.array,received:r.parsedType}),Xt;if(i.exactLength!==null){let t=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(t||o)&&(Pt(r,{code:t?lt.too_big:lt.too_small,minimum:o?i.exactLength.value:void 0,maximum:t?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),a.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Pt(r,{code:lt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),a.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Pt(r,{code:lt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((t,o)=>i.type._parseAsync(new ks(r,t,r.path,o)))).then(t=>In.mergeArray(a,t));let s=[...r.data].map((t,o)=>i.type._parseSync(new ks(r,t,r.path,o)));return In.mergeArray(a,s)}get element(){return this._def.type}min(e,r){return new n({...this._def,minLength:{value:e,message:jt.toString(r)}})}max(e,r){return new n({...this._def,maxLength:{value:e,message:jt.toString(r)}})}length(e,r){return new n({...this._def,exactLength:{value:e,message:jt.toString(r)}})}nonempty(e){return this.min(1,e)}};Pl.create=(n,e)=>new Pl({type:n,minLength:null,maxLength:null,exactLength:null,typeName:pt.ZodArray,...Sr(e)});Fi=class n extends Dr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=qr.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Ot.object){let d=this._getOrReturnCtx(e);return Pt(d,{code:lt.invalid_type,expected:Ot.object,received:d.parsedType}),Xt}let{status:a,ctx:i}=this._processInputParams(e),{shape:s,keys:t}=this._getCached(),o=[];if(!(this._def.catchall instanceof So&&this._def.unknownKeys==="strip"))for(let d in i.data)t.includes(d)||o.push(d);let l=[];for(let d of t){let c=s[d],y=i.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new ks(i,y,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof So){let d=this._def.unknownKeys;if(d==="passthrough")for(let c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(d==="strict")o.length>0&&(Pt(i,{code:lt.unrecognized_keys,keys:o}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let c of o){let y=i.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new ks(i,y,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let d=[];for(let c of l){let y=await c.key,u=await c.value;d.push({key:y,value:u,alwaysSet:c.alwaysSet})}return d}).then(d=>In.mergeObjectSync(a,d)):In.mergeObjectSync(a,l)}get shape(){return this._def.shape()}strict(e){return jt.errToObj,new n({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{let i=this._def.errorMap?.(r,a).message??a.defaultError;return r.code==="unrecognized_keys"?{message:jt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new n({...this._def,unknownKeys:"strip"})}passthrough(){return new n({...this._def,unknownKeys:"passthrough"})}extend(e){return new n({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new n({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pt.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new n({...this._def,catchall:e})}pick(e){let r={};for(let a of qr.objectKeys(e))e[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new n({...this._def,shape:()=>r})}omit(e){let r={};for(let a of qr.objectKeys(this.shape))e[a]||(r[a]=this.shape[a]);return new n({...this._def,shape:()=>r})}deepPartial(){return v0(this)}partial(e){let r={};for(let a of qr.objectKeys(this.shape)){let i=this.shape[a];e&&!e[a]?r[a]=i:r[a]=i.optional()}return new n({...this._def,shape:()=>r})}required(e){let r={};for(let a of qr.objectKeys(this.shape))if(e&&!e[a])r[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof Oi;)s=s._def.innerType;r[a]=s}return new n({...this._def,shape:()=>r})}keyof(){return Nq(qr.objectKeys(this.shape))}};Fi.create=(n,e)=>new Fi({shape:()=>n,unknownKeys:"strip",catchall:So.create(),typeName:pt.ZodObject,...Sr(e)});Fi.strictCreate=(n,e)=>new Fi({shape:()=>n,unknownKeys:"strict",catchall:So.create(),typeName:pt.ZodObject,...Sr(e)});Fi.lazycreate=(n,e)=>new Fi({shape:n,unknownKeys:"strip",catchall:So.create(),typeName:pt.ZodObject,...Sr(e)});bp=class extends Dr{_parse(e){let{ctx:r}=this._processInputParams(e),a=this._def.options;function i(s){for(let o of s)if(o.result.status==="valid")return o.result;for(let o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let t=s.map(o=>new Ti(o.ctx.common.issues));return Pt(r,{code:lt.invalid_union,unionErrors:t}),Xt}if(r.common.async)return Promise.all(a.map(async s=>{let t={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(i);{let s,t=[];for(let l of a){let d={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:d});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:d}),d.common.issues.length&&t.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let o=t.map(l=>new Ti(l));return Pt(r,{code:lt.invalid_union,unionErrors:o}),Xt}}get options(){return this._def.options}};bp.create=(n,e)=>new bp({options:n,typeName:pt.ZodUnion,...Sr(e)});Al=n=>n instanceof yp?Al(n.schema):n instanceof Rs?Al(n.innerType()):n instanceof _p?[n.value]:n instanceof xp?n.options:n instanceof wp?qr.objectValues(n.enum):n instanceof Sp?Al(n._def.innerType):n instanceof mp?[void 0]:n instanceof gp?[null]:n instanceof Oi?[void 0,...Al(n.unwrap())]:n instanceof vu?[null,...Al(n.unwrap())]:n instanceof S1||n instanceof Ap?Al(n.unwrap()):n instanceof Cp?Al(n._def.innerType):[],$6=class n extends Dr{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.object)return Pt(r,{code:lt.invalid_type,expected:Ot.object,received:r.parsedType}),Xt;let a=this.discriminator,i=r.data[a],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Pt(r,{code:lt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),Xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,a){let i=new Map;for(let s of r){let t=Al(s.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of t){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new n({typeName:pt.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Sr(a)})}};vp=class extends Dr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e),i=(s,t)=>{if(q6(s)||q6(t))return Xt;let o=xC(s.value,t.value);return o.valid?((U6(s)||U6(t))&&r.dirty(),{status:r.value,value:o.data}):(Pt(a,{code:lt.invalid_intersection_types}),Xt)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([s,t])=>i(s,t)):i(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}};vp.create=(n,e,r)=>new vp({left:n,right:e,typeName:pt.ZodIntersection,...Sr(r)});bu=class n extends Dr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ot.array)return Pt(a,{code:lt.invalid_type,expected:Ot.array,received:a.parsedType}),Xt;if(a.data.length<this._def.items.length)return Pt(a,{code:lt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xt;!this._def.rest&&a.data.length>this._def.items.length&&(Pt(a,{code:lt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...a.data].map((t,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new ks(a,t,a.path,o)):null}).filter(t=>!!t);return a.common.async?Promise.all(s).then(t=>In.mergeArray(r,t)):In.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new n({...this._def,rest:e})}};bu.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bu({items:n,typeName:pt.ZodTuple,rest:null,...Sr(e)})};V6=class n extends Dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ot.object)return Pt(a,{code:lt.invalid_type,expected:Ot.object,received:a.parsedType}),Xt;let i=[],s=this._def.keyType,t=this._def.valueType;for(let o in a.data)i.push({key:s._parse(new ks(a,o,a.path,o)),value:t._parse(new ks(a,a.data[o],a.path,o)),alwaysSet:o in a.data});return a.common.async?In.mergeObjectAsync(r,i):In.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,a){return r instanceof Dr?new n({keyType:e,valueType:r,typeName:pt.ZodRecord,...Sr(a)}):new n({keyType:kc.create(),valueType:e,typeName:pt.ZodRecord,...Sr(r)})}},x0=class extends Dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ot.map)return Pt(a,{code:lt.invalid_type,expected:Ot.map,received:a.parsedType}),Xt;let i=this._def.keyType,s=this._def.valueType,t=[...a.data.entries()].map(([o,l],d)=>({key:i._parse(new ks(a,o,a.path,[d,"key"])),value:s._parse(new ks(a,l,a.path,[d,"value"]))}));if(a.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of t){let d=await l.key,c=await l.value;if(d.status==="aborted"||c.status==="aborted")return Xt;(d.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(d.value,c.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let l of t){let d=l.key,c=l.value;if(d.status==="aborted"||c.status==="aborted")return Xt;(d.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(d.value,c.value)}return{status:r.value,value:o}}}};x0.create=(n,e,r)=>new x0({valueType:e,keyType:n,typeName:pt.ZodMap,...Sr(r)});w0=class n extends Dr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==Ot.set)return Pt(a,{code:lt.invalid_type,expected:Ot.set,received:a.parsedType}),Xt;let i=this._def;i.minSize!==null&&a.data.size<i.minSize.value&&(Pt(a,{code:lt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&a.data.size>i.maxSize.value&&(Pt(a,{code:lt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let s=this._def.valueType;function t(l){let d=new Set;for(let c of l){if(c.status==="aborted")return Xt;c.status==="dirty"&&r.dirty(),d.add(c.value)}return{status:r.value,value:d}}let o=[...a.data.values()].map((l,d)=>s._parse(new ks(a,l,a.path,d)));return a.common.async?Promise.all(o).then(l=>t(l)):t(o)}min(e,r){return new n({...this._def,minSize:{value:e,message:jt.toString(r)}})}max(e,r){return new n({...this._def,maxSize:{value:e,message:jt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};w0.create=(n,e)=>new w0({valueType:n,minSize:null,maxSize:null,typeName:pt.ZodSet,...Sr(e)});z6=class n extends Dr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.function)return Pt(r,{code:lt.invalid_type,expected:Ot.function,received:r.parsedType}),Xt;function a(o,l){return w1({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,g0(),Cl].filter(d=>!!d),issueData:{code:lt.invalid_arguments,argumentsError:l}})}function i(o,l){return w1({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,g0(),Cl].filter(d=>!!d),issueData:{code:lt.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},t=r.data;if(this._def.returns instanceof Ic){let o=this;return Hn(async function(...l){let d=new Ti([]),c=await o._def.args.parseAsync(l,s).catch(S=>{throw d.addIssue(a(l,S)),d}),y=await Reflect.apply(t,this,c);return await o._def.returns._def.type.parseAsync(y,s).catch(S=>{throw d.addIssue(i(y,S)),d})})}else{let o=this;return Hn(function(...l){let d=o._def.args.safeParse(l,s);if(!d.success)throw new Ti([a(l,d.error)]);let c=Reflect.apply(t,this,d.data),y=o._def.returns.safeParse(c,s);if(!y.success)throw new Ti([i(c,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new n({...this._def,args:bu.create(e).rest(El.create())})}returns(e){return new n({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,a){return new n({args:e||bu.create([]).rest(El.create()),returns:r||El.create(),typeName:pt.ZodFunction,...Sr(a)})}},yp=class extends Dr{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};yp.create=(n,e)=>new yp({getter:n,typeName:pt.ZodLazy,...Sr(e)});_p=class extends Dr{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return Pt(r,{received:r.data,code:lt.invalid_literal,expected:this._def.value}),Xt}return{status:"valid",value:e.data}}get value(){return this._def.value}};_p.create=(n,e)=>new _p({value:n,typeName:pt.ZodLiteral,...Sr(e)});xp=class n extends Dr{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),a=this._def.values;return Pt(r,{expected:qr.joinValues(a),received:r.parsedType,code:lt.invalid_type}),Xt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),a=this._def.values;return Pt(r,{received:r.data,code:lt.invalid_enum_value,options:a}),Xt}return Hn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return n.create(e,{...this._def,...r})}exclude(e,r=this._def){return n.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}};xp.create=Nq;wp=class extends Dr{_parse(e){let r=qr.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==Ot.string&&a.parsedType!==Ot.number){let i=qr.objectValues(r);return Pt(a,{expected:qr.joinValues(i),received:a.parsedType,code:lt.invalid_type}),Xt}if(this._cache||(this._cache=new Set(qr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=qr.objectValues(r);return Pt(a,{received:a.data,code:lt.invalid_enum_value,options:i}),Xt}return Hn(e.data)}get enum(){return this._def.values}};wp.create=(n,e)=>new wp({values:n,typeName:pt.ZodNativeEnum,...Sr(e)});Ic=class extends Dr{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ot.promise&&r.common.async===!1)return Pt(r,{code:lt.invalid_type,expected:Ot.promise,received:r.parsedType}),Xt;let a=r.parsedType===Ot.promise?r.data:Promise.resolve(r.data);return Hn(a.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Ic.create=(n,e)=>new Ic({type:n,typeName:pt.ZodPromise,...Sr(e)});Rs=class extends Dr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:a}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:t=>{Pt(a,t),t.fatal?r.abort():r.dirty()},get path(){return a.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let t=i.transform(a.data,s);if(a.common.async)return Promise.resolve(t).then(async o=>{if(r.value==="aborted")return Xt;let l=await this._def.schema._parseAsync({data:o,path:a.path,parent:a});return l.status==="aborted"?Xt:l.status==="dirty"?cp(l.value):r.value==="dirty"?cp(l.value):l});{if(r.value==="aborted")return Xt;let o=this._def.schema._parseSync({data:t,path:a.path,parent:a});return o.status==="aborted"?Xt:o.status==="dirty"?cp(o.value):r.value==="dirty"?cp(o.value):o}}if(i.type==="refinement"){let t=o=>{let l=i.refinement(o,s);if(a.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(a.common.async===!1){let o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?Xt:(o.status==="dirty"&&r.dirty(),t(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>o.status==="aborted"?Xt:(o.status==="dirty"&&r.dirty(),t(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(a.common.async===!1){let t=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Fc(t))return Xt;let o=i.transform(t.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(t=>Fc(t)?Promise.resolve(i.transform(t.value,s)).then(o=>({status:r.value,value:o})):Xt);qr.assertNever(i)}};Rs.create=(n,e,r)=>new Rs({schema:n,typeName:pt.ZodEffects,effect:e,...Sr(r)});Rs.createWithPreprocess=(n,e,r)=>new Rs({schema:e,effect:{type:"preprocess",transform:n},typeName:pt.ZodEffects,...Sr(r)});Oi=class extends Dr{_parse(e){return this._getType(e)===Ot.undefined?Hn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Oi.create=(n,e)=>new Oi({innerType:n,typeName:pt.ZodOptional,...Sr(e)});vu=class extends Dr{_parse(e){return this._getType(e)===Ot.null?Hn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};vu.create=(n,e)=>new vu({innerType:n,typeName:pt.ZodNullable,...Sr(e)});Sp=class extends Dr{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return r.parsedType===Ot.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Sp.create=(n,e)=>new Sp({innerType:n,typeName:pt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sr(e)});Cp=class extends Dr{_parse(e){let{ctx:r}=this._processInputParams(e),a={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return b0(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ti(a.common.issues)},input:a.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ti(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}};Cp.create=(n,e)=>new Cp({innerType:n,typeName:pt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sr(e)});S0=class extends Dr{_parse(e){if(this._getType(e)!==Ot.nan){let a=this._getOrReturnCtx(e);return Pt(a,{code:lt.invalid_type,expected:Ot.nan,received:a.parsedType}),Xt}return{status:"valid",value:e.data}}};S0.create=n=>new S0({typeName:pt.ZodNaN,...Sr(n)});Bpe=Symbol("zod_brand"),S1=class extends Dr{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}},C1=class n extends Dr{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?Xt:s.status==="dirty"?(r.dirty(),cp(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{let i=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?Xt:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:a.path,parent:a})}}static create(e,r){return new n({in:e,out:r,typeName:pt.ZodPipeline})}},Ap=class extends Dr{_parse(e){let r=this._def.innerType._parse(e),a=i=>(Fc(i)&&(i.value=Object.freeze(i.value)),i);return b0(r)?r.then(i=>a(i)):a(r)}unwrap(){return this._def.innerType}};Ap.create=(n,e)=>new Ap({innerType:n,typeName:pt.ZodReadonly,...Sr(e)});Lpe={object:Fi.lazycreate};(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(pt||(pt={}));qpe=(n,e={message:`Input not instance of ${n.name}`})=>Mq(r=>r instanceof n,e),jq=kc.create,Bq=dp.create,Upe=S0.create,$pe=pp.create,Lq=fp.create,Vpe=hp.create,zpe=y0.create,Wpe=mp.create,Gpe=gp.create,Hpe=Rc.create,Kpe=El.create,Zpe=So.create,Jpe=_0.create,Xpe=Pl.create,Ype=Fi.create,Qpe=Fi.strictCreate,efe=bp.create,tfe=$6.create,rfe=vp.create,afe=bu.create,nfe=V6.create,ife=x0.create,sfe=w0.create,ofe=z6.create,ufe=yp.create,lfe=_p.create,cfe=xp.create,dfe=wp.create,pfe=Ic.create,ffe=Rs.create,hfe=Oi.create,mfe=vu.create,gfe=Rs.createWithPreprocess,bfe=C1.create,vfe=()=>jq().optional(),yfe=()=>Bq().optional(),_fe=()=>Lq().optional(),xfe={string:n=>kc.create({...n,coerce:!0}),number:n=>dp.create({...n,coerce:!0}),boolean:n=>fp.create({...n,coerce:!0}),bigint:n=>pp.create({...n,coerce:!0}),date:n=>hp.create({...n,coerce:!0})},wfe=Xt});var Dc={};Am(Dc,{BRAND:()=>Bpe,DIRTY:()=>cp,EMPTY_PATH:()=>gpe,INVALID:()=>Xt,NEVER:()=>wfe,OK:()=>Hn,ParseStatus:()=>In,Schema:()=>Dr,ZodAny:()=>Rc,ZodArray:()=>Pl,ZodBigInt:()=>pp,ZodBoolean:()=>fp,ZodBranded:()=>S1,ZodCatch:()=>Cp,ZodDate:()=>hp,ZodDefault:()=>Sp,ZodDiscriminatedUnion:()=>$6,ZodEffects:()=>Rs,ZodEnum:()=>xp,ZodError:()=>Ti,ZodFirstPartyTypeKind:()=>pt,ZodFunction:()=>z6,ZodIntersection:()=>vp,ZodIssueCode:()=>lt,ZodLazy:()=>yp,ZodLiteral:()=>_p,ZodMap:()=>x0,ZodNaN:()=>S0,ZodNativeEnum:()=>wp,ZodNever:()=>So,ZodNull:()=>gp,ZodNullable:()=>vu,ZodNumber:()=>dp,ZodObject:()=>Fi,ZodOptional:()=>Oi,ZodParsedType:()=>Ot,ZodPipeline:()=>C1,ZodPromise:()=>Ic,ZodReadonly:()=>Ap,ZodRecord:()=>V6,ZodSchema:()=>Dr,ZodSet:()=>w0,ZodString:()=>kc,ZodSymbol:()=>y0,ZodTransformer:()=>Rs,ZodTuple:()=>bu,ZodType:()=>Dr,ZodUndefined:()=>mp,ZodUnion:()=>bp,ZodUnknown:()=>El,ZodVoid:()=>_0,addIssueToContext:()=>Pt,any:()=>Hpe,array:()=>Xpe,bigint:()=>$pe,boolean:()=>Lq,coerce:()=>xfe,custom:()=>Mq,date:()=>Vpe,datetimeRegex:()=>Dq,defaultErrorMap:()=>Cl,discriminatedUnion:()=>tfe,effect:()=>ffe,enum:()=>cfe,function:()=>ofe,getErrorMap:()=>g0,getParsedType:()=>gu,instanceof:()=>qpe,intersection:()=>rfe,isAborted:()=>q6,isAsync:()=>b0,isDirty:()=>U6,isValid:()=>Fc,late:()=>Lpe,lazy:()=>ufe,literal:()=>lfe,makeIssue:()=>w1,map:()=>ife,nan:()=>Upe,nativeEnum:()=>dfe,never:()=>Zpe,null:()=>Gpe,nullable:()=>mfe,number:()=>Bq,object:()=>Ype,objectUtil:()=>bC,oboolean:()=>_fe,onumber:()=>yfe,optional:()=>hfe,ostring:()=>vfe,pipeline:()=>bfe,preprocess:()=>gfe,promise:()=>pfe,quotelessJson:()=>fpe,record:()=>nfe,set:()=>sfe,setErrorMap:()=>mpe,strictObject:()=>Qpe,string:()=>jq,symbol:()=>zpe,transformer:()=>ffe,tuple:()=>afe,undefined:()=>Wpe,union:()=>efe,unknown:()=>Kpe,util:()=>qr,void:()=>Jpe});var wC=Ve(()=>{L6();yC();Tq();x1();qq();B6()});var SC=Ve(()=>{wC();wC()});var C0=Ve(()=>{SC();SC()});var Sfe,Uq,$q,Lt,W6=Ve(()=>{A1();Sfe=(...n)=>fetch(...n),Uq=Symbol.for("ls:fetch_implementation"),$q=()=>{let n=globalThis[Uq];return n?typeof n=="function"&&"Headers"in n&&"Request"in n&&"Response"in n:!1},Lt=n=>async(...e)=>{if(n||ki("DEBUG")==="true"){let[a,i]=e;console.log(`\u2192 ${i?.method||"GET"} ${a}`)}let r=await(globalThis[Uq]??Sfe)(...e);return(n||ki("DEBUG")==="true")&&console.log(`\u2190 ${r.status} ${r.statusText} ${r.url}`),r}});var Vq,G6,Cfe,Afe,E1,zq=Ve(()=>{Vq=gn(Ed(),1),G6=gn(Pd(),1);W6();Cfe=[400,401,403,404,405,406,407,408],Afe=[409],E1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in G6.default?this.queue=new G6.default.default({concurrency:this.maxConcurrency}):this.queue=new G6.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...r){let a=this.onFailedResponseHook;return this.queue.add(()=>(0,Vq.default)(()=>e(...r).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||i?.code==="ECONNABORTED")throw i;let s=i?.response,t=s?.status;if(t){if(Cfe.includes(+t))throw i;if(Afe.includes(+t))return;a&&await a(s)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...a){return e.signal?Promise.race([this.call(r,...a),new Promise((i,s)=>{e.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...a)}fetch(...e){return this.call(()=>Lt(this.debug)(...e).then(r=>r.ok?r:Promise.reject(r)))}}});function CC(n){return typeof n?._getType=="function"}function AC(n){let e={type:n._getType(),data:{content:n.content}};return n?.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(e.data.additional_kwargs={...n.additional_kwargs}),e}var Wq=Ve(()=>{});function br(n,e){if(!ti(n)){let r=e!==void 0?`Invalid UUID for ${e}: ${n}`:`Invalid UUID: ${n}`;throw new Error(r)}return n}var Gq=Ve(()=>{Xa()});function H6(n){Hq[n]||(console.warn(n),Hq[n]=!0)}var Hq,EC=Ve(()=>{Hq={}});function Tl(n){if(!n||n.split("/").length>2||n.startsWith("/")||n.endsWith("/")||n.split(":").length>2)throw new Error(`Invalid identifier format: ${n}`);let[e,r]=n.split(":"),a=r||"latest";if(e.includes("/")){let[i,s]=e.split("/",2);if(!i||!s)throw new Error(`Invalid identifier format: ${n}`);return[i,s,a]}else{if(!e)throw new Error(`Invalid identifier format: ${n}`);return["-",e,a]}}var Efe,Kq=Ve(()=>{Efe=gn(T8(),1)});async function Cr(n,e,r){let a;if(n.ok){r&&(a=await n.text());return}a=await n.text();let i=`Failed to ${e}. Received status [${n.status}]: ${n.statusText}. Server response: ${a}`;if(n.status===409)throw new PC(i);let s=new Error(i);throw s.status=n.status,s}var PC,Zq=Ve(()=>{PC=class extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}});function Ofe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function K6(n){return Tfe.encode(n)}function Ri(n,e,r,a,i){try{let s=JSON.stringify(n,r,a);return K6(s)}catch(s){if(!s.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),K6("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=Ofe()),OC(n,"",0,[],void 0,0,i);let t;try{A0.length===0?t=JSON.stringify(n,r,a):t=JSON.stringify(n,Ffe(r),a)}catch{return K6("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Z6.length!==0;){let o=Z6.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return K6(t)}}function TC(n,e,r,a){var i=Object.getOwnPropertyDescriptor(a,r);i.get!==void 0?i.configurable?(Object.defineProperty(a,r,{value:n}),Z6.push([a,r,e,i])):A0.push([e,r,n]):(a[r]=n,Z6.push([a,r,e]))}function OC(n,e,r,a,i,s,t){s+=1;var o;if(typeof n=="object"&&n!==null){for(o=0;o<a.length;o++)if(a[o]===n){TC(Pfe,n,e,i);return}if(typeof t.depthLimit<"u"&&s>t.depthLimit){TC(Jq,n,e,i);return}if(typeof t.edgesLimit<"u"&&r+1>t.edgesLimit){TC(Jq,n,e,i);return}if(a.push(n),Array.isArray(n))for(o=0;o<n.length;o++)OC(n[o],o,o,a,n,s,t);else{var l=Object.keys(n);for(o=0;o<l.length;o++){var d=l[o];OC(n[d],d,o,a,n,s,t)}}a.pop()}}function Ffe(n){return n=typeof n<"u"?n:function(e,r){return r},function(e,r){if(A0.length>0)for(var a=0;a<A0.length;a++){var i=A0[a];if(i[1]===e&&i[0]===r){r=i[2],A0.splice(a,1);break}}return n.call(this,e,r)}}var Jq,Pfe,Z6,A0,Tfe,Xq=Ve(()=>{Jq="[...]",Pfe={result:"[Circular]"},Z6=[],A0=[],Tfe=new TextEncoder});function Yq(n){let e=Y6(),r=tU(),a=n.extra??{},i=a.metadata;return n.extra={...a,runtime:{...e,...a?.runtime},metadata:{...r,...r.revision_id||n.revision_id?{revision_id:n.revision_id??r.revision_id}:{},...i}},n}async function Ife(n){let e=[];for await(let r of n)e.push(r);return e}function FC(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function Qq(n){return typeof n=="number"?Number(n.toFixed(4)):n}function eU(n){return"dataset_id"in n||"dataset_name"in n}var kfe,Rfe,Dfe,kC,Nfe,Mfe,Ep,RC=Ve(()=>{Xa();zq();Wq();A1();X6();Gq();EC();Kq();Zq();W6();Xq();kfe=n=>{let e=n?.toString()??ki("TRACING_SAMPLING_RATE");if(e===void 0)return;let r=parseFloat(e);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},Rfe=n=>{let r=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};Dfe=async n=>{if(n?.status===429){let e=parseInt(n.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(r=>setTimeout(r,e)),!0}return!1};kC=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let r,a=new Promise(s=>{r=s}),i=Ri(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:r,itemPromise:a,size:i}),this.sizeBytes+=i,a}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");let r=[],a=0;for(;a+(this.peek()?.size??0)<e&&this.items.length>0;){let i=this.items.shift();i&&(r.push(i),a+=i.size,this.sizeBytes-=i.size)}if(r.length===0&&this.items.length>0){let i=this.items.shift();r.push(i),a+=i.size,this.sizeBytes-=i.size}return[r.map(i=>({action:i.action,item:i.payload})),()=>r.forEach(i=>i.itemPromiseResolve())]}},Nfe=20971520,Mfe=2500,Ep=class n{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new kC}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:yu("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:yu("LANGSMITH_DEBUG")==="true"});let r=n.getDefaultClientConfig();if(this.tracingSampleRate=kfe(e.tracingSamplingRate),this.apiUrl=FC(e.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=FC(e.apiKey??r.apiKey),this.webUrl=FC(e.webUrl??r.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new E1({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new E1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:Dfe,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??r.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??r.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){let e=ki("API_KEY"),r=ki("ENDPOINT")??"https://api.smith.langchain.com",a=ki("HIDE_INPUTS")==="true",i=ki("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:a,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:Rfe(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${J6}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let r={...e};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(e,r){let a=r?.toString()??"",i=`${this.apiUrl}${e}?${a}`,s=await this.caller.call(Lt(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(s,`Failed to fetch ${e}`),s}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,a){let i=Number(r.get("offset"))||0,s=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(s));let t=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(Lt(this.debug),t,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(o,`Failed to fetch ${e}`);let l=a?a(await o.json()):await o.json();if(l.length===0||(yield l,l.length<s))break;i+=l.length}}async*_getCursorPaginatedList(e,r=null,a="POST",i="runs"){let s=r?{...r}:{};for(;;){let o=await(await this.caller.call(Lt(this.debug),`${this.apiUrl}${e}`,{method:a,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(s)})).json();if(!o||!o[i])break;yield o[i];let l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,r=!1){if(this.tracingSampleRate===void 0)return e;if(r){let a=[];for(let i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):a.push(i);return a}else{let a=[];for(let i of e){let s=i.trace_id??i.id;this.filteredPostUuids.has(s)||(i.id===s?this._shouldSample()?a.push(i):this.filteredPostUuids.add(s):a.push(i))}return a}}async _getBatchSizeLimitBytes(){let e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??Nfe}async _getMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){let r=[];for(;this.autoBatchQueue.items.length>0;){let[a,i]=this.autoBatchQueue.pop(e);if(!a.length){i();break}let s=this._processBatch(a,i).catch(console.error);r.push(s)}return Promise.all(r)}async _processBatch(e,r){if(!e.length){r();return}try{let a={runCreates:e.filter(s=>s.action==="create").map(s=>s.item),runUpdates:e.filter(s=>s.action==="update").map(s=>s.item)};(await this._ensureServerInfo())?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(a):await this.batchIngestRuns(a)}finally{r()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=Yq(e.item));let r=this.autoBatchQueue.push(e);if(this.manualFlushMode)return r;let a=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>a&&this.drainAutoBatchQueue(a),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(a)},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){let e=await this.caller.call(Lt(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(Mfe),...this.fetchOptions});await Cr(e,"get server info");let r=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;let r={...this.headers,"Content-Type":"application/json"},a=e.project_name;delete e.project_name;let i=await this.prepareRunCreateOrUpdateInputs({session_name:a,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}let s=Yq(i),t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:r,body:Ri(s,`Creating run with id: ${s.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(t,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let a=await Promise.all(e?.map(o=>this.prepareRunCreateOrUpdateInputs(o))??[]),i=await Promise.all(r?.map(o=>this.prepareRunCreateOrUpdateInputs(o))??[]);if(a.length>0&&i.length>0){let o=a.reduce((d,c)=>(c.id&&(d[c.id]=c),d),{}),l=[];for(let d of i)d.id!==void 0&&o[d.id]?o[d.id]={...o[d.id],...d}:l.push(d);a=Object.values(o),i=l}let s={post:a,patch:i};if(!s.post.length&&!s.patch.length)return;let t={post:[],patch:[]};for(let o of["post","patch"]){let l=o,d=s[l].reverse(),c=d.pop();for(;c!==void 0;)t[l].push(c),c=d.pop()}if(t.post.length>0||t.patch.length>0){let o=t.post.map(l=>l.id).concat(t.patch.map(l=>l.id)).join(",");await this._postBatchIngestRuns(Ri(t,`Ingesting runs with ids: ${o}`))}}async _postBatchIngestRuns(e){let r={...this.headers,"Content-Type":"application/json",Accept:"application/json"},a=await this.batchIngestCaller.call(Lt(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(a,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:r}){if(e===void 0&&r===void 0)return;let a={},i=[];for(let c of e??[]){let y=await this.prepareRunCreateOrUpdateInputs(c);y.id!==void 0&&y.attachments!==void 0&&(a[y.id]=y.attachments),delete y.attachments,i.push(y)}let s=[];for(let c of r??[])s.push(await this.prepareRunCreateOrUpdateInputs(c));if(i.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&s.length>0){let c=i.reduce((u,S)=>(S.id&&(u[S.id]=S),u),{}),y=[];for(let u of s)u.id!==void 0&&c[u.id]?c[u.id]={...c[u.id],...u}:y.push(u);i=Object.values(c),s=y}if(i.length===0&&s.length===0)return;let l=[],d=[];for(let[c,y]of[["post",i],["patch",s]])for(let u of y){let{inputs:S,outputs:V,events:U,attachments:z,...D}=u,k={inputs:S,outputs:V,events:U},T=Ri(D,`Serializing for multipart ingestion of run with id: ${D.id}`);d.push({name:`${c}.${D.id}`,payload:new Blob([T],{type:`application/json; length=${T.length}`})});for(let[R,g]of Object.entries(k)){if(g===void 0)continue;let m=Ri(g,`Serializing ${R} for multipart ingestion of run with id: ${D.id}`);d.push({name:`${c}.${D.id}.${R}`,payload:new Blob([m],{type:`application/json; length=${m.length}`})})}if(D.id!==void 0){let R=a[D.id];if(R){delete a[D.id];for(let[g,m]of Object.entries(R)){let v,b;if(Array.isArray(m)?[v,b]=m:(v=m.mimeType,b=m.data),g.includes(".")){console.warn(`Skipping attachment '${g}' for run ${D.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}d.push({name:`attachment.${D.id}.${g}`,payload:new Blob([b],{type:`${v}; length=${b.byteLength}`})})}}}l.push(`trace=${D.trace_id},id=${D.id}`)}await this._sendMultipartRequest(d,l.join("; "))}async _createNodeFetchBody(e,r){let a=[];for(let t of e)a.push(new Blob([`--${r}\r
`])),a.push(new Blob([`Content-Disposition: form-data; name="${t.name}"\r
`,`Content-Type: ${t.payload.type}\r
\r
`])),a.push(t.payload),a.push(new Blob([`\r
`]));return a.push(new Blob([`--${r}--\r
`])),await new Blob(a).arrayBuffer()}async _createMultipartStream(e,r){let a=new TextEncoder;return new ReadableStream({async start(s){let t=async o=>{typeof o=="string"?s.enqueue(a.encode(o)):s.enqueue(o)};for(let o of e){await t(`--${r}\r
`),await t(`Content-Disposition: form-data; name="${o.name}"\r
`),await t(`Content-Type: ${o.payload.type}\r
\r
`);let d=o.payload.stream().getReader();try{let c;for(;!(c=await d.read()).done;)s.enqueue(c.value)}finally{d.releaseLock()}await t(`\r
`)}await t(`--${r}--\r
`),s.close()}})}async _sendMultipartRequest(e,r){try{let a="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=await($q()?this._createNodeFetchBody(e,a):this._createMultipartStream(e,a)),s=await this.batchIngestCaller.call(Lt(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${a}`},body:i,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(s,"ingest multipart runs",!0)}catch(a){console.warn(`${a.message.trim()}

Context: ${r}`)}}async updateRun(e,r){br(e),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));let a={...r,id:e};if(!this._filterForSampling([a],!0).length)return;if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){if(r.end_time!==void 0&&a.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:a}).catch(console.error);return}else this.processRunOperation({action:"update",item:a}).catch(console.error);return}let i={...this.headers,"Content-Type":"application/json"},s=await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:Ri(r,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(s,"update run",!0)}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){br(e);let a=await this._get(`/runs/${e}`);return r&&a.child_run_ids&&(a=await this._loadChildRuns(a)),a}async getRunUrl({runId:e,run:r,projectOpts:a}){if(r!==void 0){let i;r.session_id?i=r.session_id:a?.projectName?i=(await this.readProject({projectName:a?.projectName})).id:a?.projectId?i=a?.projectId:i=(await this.readProject({projectName:ki("PROJECT")||"default"})).id;let s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){let i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){let r=await Ife(this.listRuns({id:e.child_run_ids})),a={},i={};r.sort((s,t)=>(s?.dotted_order??"").localeCompare(t?.dotted_order??""));for(let s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in a||(a[s.parent_run_id]=[]),a[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=a[e.id]||[];for(let s in a)s!==e.id&&(i[s].child_runs=a[s]);return e}async*listRuns(e){let{projectId:r,projectName:a,parentRunId:i,traceId:s,referenceExampleId:t,startTime:o,executionOrder:l,isRoot:d,runType:c,error:y,id:u,query:S,filter:V,traceFilter:U,treeFilter:z,limit:D,select:k,order:T}=e,R=[];if(r&&(R=Array.isArray(r)?r:[r]),a){let b=Array.isArray(a)?a:[a],f=await Promise.all(b.map(p=>this.readProject({projectName:p}).then(h=>h.id)));R.push(...f)}let g=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],m={session:R.length?R:null,run_type:c,reference_example:t,query:S,filter:V,trace_filter:U,tree_filter:z,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:y,id:u,limit:D,trace:s,select:k||g,is_root:d,order:T},v=0;for await(let b of this._getCursorPaginatedList("/runs/query",m))if(D){if(v>=D)break;if(b.length+v>D){yield*b.slice(0,D-v);break}v+=b.length,yield*b}else yield*b}async*listGroupRuns(e){let{projectId:r,projectName:a,groupBy:i,filter:s,startTime:t,endTime:o,limit:l,offset:d}=e,y={session_id:r||(await this.readProject({projectName:a})).id,group_by:i,filter:s,start_time:t?t.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100},u=Number(d)||0,S="/runs/group",V=`${this.apiUrl}${S}`;for(;;){let U={...y,offset:u},z=Object.fromEntries(Object.entries(U).filter(([g,m])=>m!==void 0)),D=await this.caller.call(Lt(),V,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(z),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(D,`Failed to fetch ${S}`);let k=await D.json(),{groups:T,total:R}=k;if(T.length===0)break;for(let g of T)yield g;if(u+=T.length,u>=R)break}}async getRunStats({id:e,trace:r,parentRun:a,runType:i,projectNames:s,projectIds:t,referenceExampleIds:o,startTime:l,endTime:d,error:c,query:y,filter:u,traceFilter:S,treeFilter:V,isRoot:U,dataSourceType:z}){let D=t||[];s&&(D=[...t||[],...await Promise.all(s.map(m=>this.readProject({projectName:m}).then(v=>v.id)))]);let T=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:a,run_type:i,session:D,reference_example:o,start_time:l,end_time:d,error:c,query:y,filter:u,trace_filter:S,tree_filter:V,is_root:U,data_source_type:z}).filter(([m,v])=>v!==void 0));return await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:r}={}){let a={run_id:e,share_token:r||Ia()};br(e);let s=await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){br(e);let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(r,"unshare run",!0)}async readRunSharedLink(e){br(e);let a=await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(a===null||!("share_token"in a)))return`${this.getHostUrl()}/public/${a.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){let a=new URLSearchParams({share_token:e});if(r!==void 0)for(let t of r)a.append("id",t);return br(e),await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/public/${e}/runs${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),br(e);let i=await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);let a={dataset_id:e};br(e);let s=await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){br(e);let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(r,"unshare dataset",!0)}async readSharedDataset(e){return br(e),await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,r){let a={};r?.exampleIds&&(a.id=r.exampleIds);let i=new URLSearchParams;Object.entries(a).forEach(([o,l])=>{Array.isArray(l)?l.forEach(d=>i.append(o,d)):i.append(o,l)});let s=await this.caller.call(Lt(this.debug),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),t=await s.json();if(!s.ok)throw"detail"in t?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${Array.isArray(t.detail)?t.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return t.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:a=null,upsert:i=!1,projectExtra:s=null,referenceDatasetId:t=null}){let o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,d=s||{};a&&(d.metadata=a);let c={name:e,extra:d,description:r};t!==null&&(c.reference_dataset_id=t);let y=await this.caller.call(Lt(this.debug),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(y,"create project"),await y.json()}async updateProject(e,{name:r=null,description:a=null,metadata:i=null,projectExtra:s=null,endTime:t=null}){let o=`${this.apiUrl}/sessions/${e}`,l=s;i&&(l={...l||{},metadata:i});let d={name:r,extra:l,description:a,end_time:t?new Date(t).toISOString():null},c=await this.caller.call(Lt(this.debug),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:r}){let a="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)br(e),a+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let s=await this.caller.call(Lt(this.debug),`${this.apiUrl}${a}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{let t=await s.json();return s.ok?Array.isArray(t)?t.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:r,includeStats:a}){let i="/sessions",s=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)br(e),i+=`/${e}`;else if(r!==void 0)s.append("name",r);else throw new Error("Must provide projectName or projectId");a!==void 0&&s.append("include_stats",a.toString());let t=await this._get(i,s),o;if(Array.isArray(t)){if(t.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);o=t[0]}else o=t;return o}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");let a=await this.readProject({projectId:e,projectName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${a.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");let a=await this.readDataset({datasetId:e,datasetName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${a.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:a,referenceDatasetId:i,referenceDatasetName:s,referenceFree:t,metadata:o}={}){let l=new URLSearchParams;if(e!==void 0)for(let d of e)l.append("id",d);if(r!==void 0&&l.append("name",r),a!==void 0&&l.append("name_contains",a),i!==void 0)l.append("reference_dataset",i);else if(s!==void 0){let d=await this.readDataset({datasetName:s});l.append("reference_dataset",d.id)}t!==void 0&&l.append("reference_free",t.toString()),o!==void 0&&l.append("metadata",JSON.stringify(o));for await(let d of this._getPaginated("/sessions",l))yield*d}async deleteProject({projectId:e,projectName:r}){let a;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?a=(await this.readProject({projectName:r})).id:a=e,br(a);let i=await this.caller.call(Lt(this.debug),`${this.apiUrl}/sessions/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(i,`delete session ${a} (${r})`,!0)}async uploadCsv({csvFile:e,fileName:r,inputKeys:a,outputKeys:i,description:s,dataType:t,name:o}){let l=`${this.apiUrl}/datasets/upload`,d=new FormData;d.append("file",e,r),a.forEach(u=>{d.append("input_keys",u)}),i.forEach(u=>{d.append("output_keys",u)}),s&&d.append("description",s),t&&d.append("data_type",t),o&&d.append("name",o);let c=await this.caller.call(Lt(this.debug),l,{method:"POST",headers:this.headers,body:d,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(c,"upload CSV"),await c.json()}async createDataset(e,{description:r,dataType:a,inputsSchema:i,outputsSchema:s,metadata:t}={}){let o={name:e,description:r,extra:t?{metadata:t}:void 0};a&&(o.data_type=a),i&&(o.inputs_schema_definition=i),s&&(o.outputs_schema_definition=s);let l=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(l,"create dataset"),await l.json()}async readDataset({datasetId:e,datasetName:r}){let a="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)br(e),a+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let s=await this._get(a,i),t;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);t=s[0]}else t=s;return t}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(a){if(a instanceof Error&&a.message.toLocaleLowerCase().includes("not found"))return!1;throw a}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:a,toVersion:i}){let s=e;if(s===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:r})).id);let t=new URLSearchParams({from_version:typeof a=="string"?a:a.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,t)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){let a="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${a}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:a,datasetName:i,datasetNameContains:s,metadata:t}={}){let o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(a!==void 0)for(let d of a)l.append("id",d);i!==void 0&&l.append("name",i),s!==void 0&&l.append("name_contains",s),t!==void 0&&l.append("metadata",JSON.stringify(t));for await(let d of this._getPaginated(o,l))yield*d}async updateDataset(e){let{datasetId:r,datasetName:a,...i}=e;if(!r&&!a)throw new Error("Must provide either datasetName or datasetId");let s=r??(await this.readDataset({datasetName:a})).id;br(s);let t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(t,"update dataset"),await t.json()}async updateDatasetTag(e){let{datasetId:r,datasetName:a,asOf:i,tag:s}=e;if(!r&&!a)throw new Error("Must provide either datasetName or datasetId");let t=r??(await this.readDataset({datasetName:a})).id;br(t);let o=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${t}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:s}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(o,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:r}){let a="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)br(i),a+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let s=await this.caller.call(Lt(this.debug),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(s,`delete ${a}`),await s.json()}async indexDataset({datasetId:e,datasetName:r,tag:a}){let i=e;if(!i&&!r)throw new Error("Must provide either datasetName or datasetId");if(i&&r)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:r})).id),br(i);let s={tag:a},t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(t,"index dataset"),await t.json()}async similarExamples(e,r,a,{filter:i}={}){let s={limit:a,inputs:e};i!==void 0&&(s.filter=i),br(r);let t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${r}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(t,"fetch similar examples"),(await t.json()).examples}async createExample(e,r,a){if(eU(e)&&(r!==void 0||a!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=r?a?.datasetId:e.dataset_id,s=r?a?.datasetName:e.dataset_name;if(i===void 0&&s===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&s!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:s})).id);let t=(r?a?.createdAt:e.created_at)||new Date,o;eU(e)?o=e:o={inputs:e,outputs:r,created_at:t?.toISOString(),id:a?.exampleId,metadata:a?.metadata,split:a?.split,source_run_id:a?.sourceRunId,use_source_run_io:a?.useSourceRunIO,use_source_run_attachments:a?.useSourceRunAttachments,attachments:a?.attachments};let l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(l.example_ids?.[0]??Ia())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];let k=e,T=k[0].dataset_id,R=k[0].dataset_name;if(T===void 0&&R===void 0)throw new Error("Must provide either datasetName or datasetId");if(T!==void 0&&R!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");T===void 0&&(T=(await this.readDataset({datasetName:R})).id);let g=await this._uploadExamplesMultipart(T,k);return await Promise.all(g.example_ids.map(v=>this.readExample(v)))}let{inputs:r,outputs:a,metadata:i,splits:s,sourceRunIds:t,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:d,exampleIds:c,datasetId:y,datasetName:u}=e;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let S=y,V=u;if(S===void 0&&V===void 0)throw new Error("Must provide either datasetName or datasetId");if(S!==void 0&&V!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");S===void 0&&(S=(await this.readDataset({datasetName:V})).id);let U=r.map((k,T)=>({dataset_id:S,inputs:k,outputs:a?.[T],metadata:i?.[T],split:s?.[T],id:c?.[T],attachments:d?.[T],source_run_id:t?.[T],use_source_run_io:o?.[T],use_source_run_attachments:l?.[T]})),z=await this._uploadExamplesMultipart(S,U);return await Promise.all(z.example_ids.map(k=>this.readExample(k)))}async createLLMExample(e,r,a){return this.createExample({input:e},{output:r},a)}async createChatExample(e,r,a){let i=e.map(t=>CC(t)?AC(t):t),s=CC(r)?AC(r):r;return this.createExample({input:i},{output:s},a)}async readExample(e){br(e);let r=`/examples/${e}`,a=await this._get(r),{attachment_urls:i,...s}=a,t=s;return i&&(t.attachments=Object.entries(i).reduce((o,[l,d])=>(o[l.slice(11)]={presigned_url:d.presigned_url,mime_type:d.mime_type},o),{})),t}async*listExamples({datasetId:e,datasetName:r,exampleIds:a,asOf:i,splits:s,inlineS3Urls:t,metadata:o,limit:l,offset:d,filter:c,includeAttachments:y}={}){let u;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)u=e;else if(r!==void 0)u=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let S=new URLSearchParams({dataset:u}),V=i?typeof i=="string"?i:i?.toISOString():void 0;V&&S.append("as_of",V);let U=t??!0;if(S.append("inline_s3_urls",U.toString()),a!==void 0)for(let D of a)S.append("id",D);if(s!==void 0)for(let D of s)S.append("splits",D);if(o!==void 0){let D=JSON.stringify(o);S.append("metadata",D)}l!==void 0&&S.append("limit",l.toString()),d!==void 0&&S.append("offset",d.toString()),c!==void 0&&S.append("filter",c),y===!0&&["attachment_urls","outputs","metadata"].forEach(D=>S.append("select",D));let z=0;for await(let D of this._getPaginated("/examples",S)){for(let k of D){let{attachment_urls:T,...R}=k,g=R;T&&(g.attachments=Object.entries(T).reduce((m,[v,b])=>(m[v.slice(11)]={presigned_url:b.presigned_url,mime_type:b.mime_type||void 0},m),{})),yield g,z++}if(l!==void 0&&z>=l)break}}async deleteExample(e){br(e);let r=`/examples/${e}`,a=await this.caller.call(Lt(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(a,`delete ${r}`),await a.json()}async updateExample(e,r){let a;r?a=e:a=e.id,br(a);let i;r?i={id:a,...r}:i=e;let s;return i.dataset_id!==void 0?s=i.dataset_id:s=(await this.readExample(a)).dataset_id,this._updateExamplesMultipart(s,[i])}async updateExamples(e){let r;return e[0].dataset_id===void 0?r=(await this.readExample(e[0].id)).dataset_id:r=e[0].dataset_id,this._updateExamplesMultipart(r,e)}async readDatasetVersion({datasetId:e,datasetName:r,asOf:a,tag:i}){let s;if(e?s=e:s=(await this.readDataset({datasetName:r})).id,br(s),a&&i||!a&&!i)throw new Error("Exactly one of asOf and tag must be specified.");let t=new URLSearchParams;a!==void 0&&t.append("as_of",typeof a=="string"?a:a.toISOString()),i!==void 0&&t.append("tag",i);let o=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${s}/version?${t.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(o,"read dataset version"),await o.json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:a}){let i;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:r})).id:i=e,br(i);let s=new URLSearchParams,t=a?typeof a=="string"?a:a?.toISOString():void 0;return t&&s.append("as_of",t),await this._get(`/datasets/${i}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:a,exampleIds:i,remove:s=!1}){let t;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?t=(await this.readDataset({datasetName:r})).id:t=e,br(t);let o={split_name:a,examples:i.map(d=>(br(d),d)),remove:s},l=await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/${t}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(l,"update dataset splits",!0)}async evaluateRun(e,r,{sourceInfo:a,loadChildRuns:i,referenceExample:s}={loadChildRuns:!1}){H6("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let t;if(typeof e=="string")t=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)t=e;else throw new Error(`Invalid run type: ${typeof e}`);t.reference_example_id!==null&&t.reference_example_id!==void 0&&(s=await this.readExample(t.reference_example_id));let o=await r.evaluateRun(t,s),[l,d]=await this._logEvaluationFeedback(o,t,a);return d[0]}async createFeedback(e,r,{score:a,value:i,correction:s,comment:t,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:d,feedbackId:c,feedbackConfig:y,projectId:u,comparativeExperimentId:S}){if(!e&&!u)throw new Error("One of runId or projectId must be provided");if(e&&u)throw new Error("Only one of runId or projectId can be provided");let V={type:l??"api",metadata:o??{}};d!==void 0&&V?.metadata!==void 0&&!V.metadata.__run&&(V.metadata.__run={run_id:d}),V?.metadata!==void 0&&V.metadata.__run?.run_id!==void 0&&br(V.metadata.__run.run_id);let U={id:c??Ia(),run_id:e,key:r,score:Qq(a),value:i,correction:s,comment:t,feedback_source:V,comparative_experiment_id:S,feedbackConfig:y,session_id:u},z=`${this.apiUrl}/feedback`,D=await this.caller.call(Lt(this.debug),z,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(U),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(D,"create feedback",!0),U}async updateFeedback(e,{score:r,value:a,correction:i,comment:s}){let t={};r!=null&&(t.score=Qq(r)),a!=null&&(t.value=a),i!=null&&(t.correction=i),s!=null&&(t.comment=s),br(e);let o=await this.caller.call(Lt(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(o,"update feedback",!0)}async readFeedback(e){br(e);let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){br(e);let r=`/feedback/${e}`,a=await this.caller.call(Lt(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(a,`delete ${r}`),await a.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:a}={}){let i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(let s of r)i.append("key",s);if(a)for(let s of a)i.append("source",s);for await(let s of this._getPaginated("/feedback",i))yield*s}async createPresignedFeedbackToken(e,r,{expiration:a,feedbackConfig:i}={}){let s={run_id:e,feedback_key:r,feedback_config:i};return a?typeof a=="string"?s.expires_at=a:(a?.hours||a?.minutes||a?.days)&&(s.expires_in=a):s.expires_in={hours:3},await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:a,createdAt:i,description:s,metadata:t,id:o}){if(r.length===0)throw new Error("At least one experiment is required");if(a||(a=(await this.readProject({projectId:r[0]})).reference_dataset_id),!a==null)throw new Error("A reference dataset is required");let l={id:o,name:e,experiment_ids:r,reference_dataset_id:a,description:s,created_at:(i??new Date)?.toISOString(),extra:{}};return t&&(l.extra.metadata=t),await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){br(e);let r=new URLSearchParams({run_id:e});for await(let a of this._getPaginated("/feedback/tokens",r))yield*a}_selectEvalResults(e){let r;return"results"in e?r=e.results:Array.isArray(e)?r=e:r=[e],r}async _logEvaluationFeedback(e,r,a){let i=this._selectEvalResults(e),s=[];for(let t of i){let o=a||{};t.evaluatorInfo&&(o={...t.evaluatorInfo,...o});let l=null;t.targetRunId?l=t.targetRunId:r&&(l=r.id),s.push(await this.createFeedback(l,t.key,{score:t.score,value:t.value,comment:t.comment,correction:t.correction,sourceInfo:o,sourceRunId:t.sourceRunId,feedbackConfig:t.feedbackConfig,feedbackSourceType:"model"}))}return[i,s]}async logEvaluationFeedback(e,r,a){let[i]=await this._logEvaluationFeedback(e,r,a);return i}async*listAnnotationQueues(e={}){let{queueIds:r,name:a,nameContains:i,limit:s}=e,t=new URLSearchParams;r&&r.forEach((l,d)=>{br(l,`queueIds[${d}]`),t.append("ids",l)}),a&&t.append("name",a),i&&t.append("name_contains",i),t.append("limit",(s!==void 0?Math.min(s,100):100).toString());let o=0;for await(let l of this._getPaginated("/annotation-queues",t))if(yield*l,o++,s!==void 0&&o>=s)break}async createAnnotationQueue(e){let{name:r,description:a,queueId:i,rubricInstructions:s}=e,t={name:r,description:a,id:i||Ia(),rubric_instructions:s},o=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(t).filter(([d,c])=>c!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(o,"create annotation queue"),await o.json()}async readAnnotationQueue(e){let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(r,"read annotation queue"),await r.json()}async updateAnnotationQueue(e,r){let{name:a,description:i,rubricInstructions:s}=r,t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:a,description:i,rubric_instructions:s}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(t,"update annotation queue")}async deleteAnnotationQueue(e){let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(r,"delete annotation queue")}async addRunsToAnnotationQueue(e,r){let a=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r.map((i,s)=>br(i,`runIds[${s}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(a,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,r){let a=`/annotation-queues/${br(e,"queueId")}/run`,i=await this.caller.call(Lt(this.debug),`${this.apiUrl}${a}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(i,"get run from annotation queue"),await i.json()}async deleteRunFromAnnotationQueue(e,r){let a=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}/runs/${br(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(a,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/annotation-queues/${br(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(r,"get size from annotation queue"),await r.json()}async _currentTenantIsOwner(e){let r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){let a=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${a.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){let r=await this.caller.call(Lt(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await r.json();if(!r.ok){let i=typeof a.detail=="string"?a.detail:JSON.stringify(a.detail),s=new Error(`Error ${r.status}: ${r.statusText}
${i}`);throw s.statusCode=r.status,s}if(a.commits.length!==0)return a.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){let[a,i,s]=Tl(e),t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/likes/${a}/${i}`,{method:"POST",body:JSON.stringify({like:r}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(t,`${r?"like":"unlike"} prompt`),await t.json()}async _getPromptUrl(e){let[r,a,i]=Tl(e);if(await this._currentTenantIsOwner(r)){let s=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${a}/${i.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${a}?organizationId=${s.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${r}/${a}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${a}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let r of this._getPaginated(`/commits/${e}/`,new URLSearchParams,a=>a.commits))yield*r}async*listPrompts(e){let r=new URLSearchParams;r.append("sort_field",e?.sortField??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!e?.isArchived).toString()),e?.isPublic!==void 0&&r.append("is_public",e.isPublic.toString()),e?.query&&r.append("query",e.query);for await(let a of this._getPaginated("/repos",r,i=>i.repos))yield*a}async getPrompt(e){let[r,a,i]=Tl(e),s=await this.caller.call(Lt(this.debug),`${this.apiUrl}/repos/${r}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(s.status===404)return null;await Cr(s,"get prompt");let t=await s.json();return t.repo?t.repo:null}async createPrompt(e,r){let a=await this._getSettings();if(r?.isPublic&&!a.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,s,t]=Tl(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);let o={repo_handle:s,...r?.description&&{description:r.description},...r?.readme&&{readme:r.readme},...r?.tags&&{tags:r.tags},is_public:!!r?.isPublic},l=await this.caller.call(Lt(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(l,"create prompt");let{repo:d}=await l.json();return d}async createCommit(e,r,a){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[i,s,t]=Tl(e),o=a?.parentCommitHash==="latest"||!a?.parentCommitHash?await this._getLatestCommitHash(`${i}/${s}`):a?.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(r)),parent_commit:o},d=await this.caller.call(Lt(this.debug),`${this.apiUrl}/commits/${i}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(d,"create commit");let c=await d.json();return this._getPromptUrl(`${i}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,r=[]){return this._updateExamplesMultipart(e,r)}async _updateExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let a=new FormData;for(let o of r){let l=o.id,d={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},c=Ri(d,`Serializing body for example with id: ${l}`),y=new Blob([c],{type:"application/json"});if(a.append(l,y),o.inputs){let u=Ri(o.inputs,`Serializing inputs for example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.inputs`,S)}if(o.outputs){let u=Ri(o.outputs,`Serializing outputs whle updating example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.outputs`,S)}if(o.attachments)for(let[u,S]of Object.entries(o.attachments)){let V,U;Array.isArray(S)?[V,U]=S:(V=S.mimeType,U=S.data);let z=new Blob([U],{type:`${V}; length=${U.byteLength}`});a.append(`${l}.attachment.${u}`,z)}if(o.attachments_operations){let u=Ri(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),S=new Blob([u],{type:"application/json"});a.append(`${l}.attachments_operations`,S)}}let i=e??r[0]?.dataset_id;return await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/v1/platform/datasets/${i}/examples`,{method:"PATCH",headers:this.headers,body:a})).json()}async uploadExamplesMultipart(e,r=[]){return this._uploadExamplesMultipart(e,r)}async _uploadExamplesMultipart(e,r=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let a=new FormData;for(let t of r){let o=(t.id??Ia()).toString(),l={created_at:t.created_at,...t.metadata&&{metadata:t.metadata},...t.split&&{split:t.split},...t.source_run_id&&{source_run_id:t.source_run_id},...t.use_source_run_io&&{use_source_run_io:t.use_source_run_io},...t.use_source_run_attachments&&{use_source_run_attachments:t.use_source_run_attachments}},d=Ri(l,`Serializing body for uploaded example with id: ${o}`),c=new Blob([d],{type:"application/json"});if(a.append(o,c),t.inputs){let y=Ri(t.inputs,`Serializing inputs for uploaded example with id: ${o}`),u=new Blob([y],{type:"application/json"});a.append(`${o}.inputs`,u)}if(t.outputs){let y=Ri(t.outputs,`Serializing outputs for uploaded example with id: ${o}`),u=new Blob([y],{type:"application/json"});a.append(`${o}.outputs`,u)}if(t.attachments)for(let[y,u]of Object.entries(t.attachments)){let S,V;Array.isArray(u)?[S,V]=u:(S=u.mimeType,V=u.data);let U=new Blob([V],{type:`${S}; length=${V.byteLength}`});a.append(`${o}.attachment.${y}`,U)}}let i=await this.caller.call(Lt(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:a});return await Cr(i,"upload examples"),await i.json()}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[a,i]=Tl(e);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("update a prompt",a);let s={};if(r?.description!==void 0&&(s.description=r.description),r?.readme!==void 0&&(s.readme=r.readme),r?.tags!==void 0&&(s.tags=r.tags),r?.isPublic!==void 0&&(s.is_public=r.isPublic),r?.isArchived!==void 0&&(s.is_archived=r.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");let t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/repos/${a}/${i}`,{method:"PATCH",body:JSON.stringify(s),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Cr(t,"update prompt"),t.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[r,a,i]=Tl(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return await(await this.caller.call(Lt(this.debug),`${this.apiUrl}/repos/${r}/${a}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,r){let[a,i,s]=Tl(e),t=await this.caller.call(Lt(this.debug),`${this.apiUrl}/commits/${a}/${i}/${s}${r?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Cr(t,"pull prompt commit");let o=await t.json();return{owner:a,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,r){let a=await this.pullPromptCommit(e,{includeModel:r?.includeModel});return JSON.stringify(a.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(i=>i!=="object")&&await this.updatePrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}):await this.createPrompt(e,{description:r?.description,readme:r?.readme,tags:r?.tags,isPublic:r?.isPublic}),r?.object?await this.createCommit(e,r?.object,{parentCommitHash:r?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){let{sourceApiUrl:a=this.apiUrl,datasetName:i}=r,[s,t]=this.parseTokenOrUrl(e,a),o=new n({apiUrl:s,apiKey:"placeholder"}),l=await o.readSharedDataset(t),d=i||l.name;try{if(await this.hasDataset({datasetId:d})){console.log(`Dataset ${d} already exists in your tenant. Skipping.`);return}}catch{}let c=await o.listSharedExamples(t),y=await this.createDataset(d,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(u=>u.inputs),outputs:c.flatMap(u=>u.outputs?[u.outputs]:[]),datasetId:y.id})}catch(u){throw console.error(`An error occurred while creating dataset ${d}. You should delete it manually.`),u}}parseTokenOrUrl(e,r,a=2,i="dataset"){try{return br(e),[r,e]}catch{}try{let t=new URL(e).pathname.split("/").filter(o=>o!=="");if(t.length>=a){let o=t[t.length-a];return[r,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}});var J6,X6=Ve(()=>{RC();Q6();W6();J6="0.3.29"});function Y6(){if(IC===void 0){let n=Ufe(),e=Vfe();IC={library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:J6,...e}}return IC}function tU(){let n=$fe()||{},e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[a,i]of Object.entries(n))(a.startsWith("LANGCHAIN_")||a.startsWith("LANGSMITH_"))&&typeof i=="string"&&!r.includes(a)&&!a.toLowerCase().includes("key")&&!a.toLowerCase().includes("secret")&&!a.toLowerCase().includes("token")&&(a==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[a]=i);return e}function $fe(){try{return typeof process<"u"&&process.env?Object.entries(process.env).reduce((n,[e,r])=>(n[e]=String(r),n),{}):void 0}catch{return}}function yu(n){try{return typeof process<"u"?process.env?.[n]:void 0}catch{return}}function ki(n){return yu(`LANGSMITH_${n}`)||yu(`LANGCHAIN_${n}`)}function Vfe(){if(DC!==void 0)return DC;let n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of n){let a=yu(r);a!==void 0&&(e[r]=a)}return DC=e,e}var Fl,jfe,Bfe,Lfe,rU,qfe,Ufe,IC,DC,A1=Ve(()=>{X6();jfe=()=>typeof window<"u"&&typeof window.document<"u",Bfe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Lfe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),rU=()=>typeof Deno<"u",qfe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!rU(),Ufe=()=>Fl||(jfe()?Fl="browser":qfe()?Fl="node":Bfe()?Fl="webworker":Lfe()?Fl="jsdom":rU()?Fl="deno":Fl="other",Fl)});var aU,nU=Ve(()=>{A1();aU=n=>n!==void 0?n:!!["TRACING_V2","TRACING"].find(r=>ki(r)==="true")});var e4,iU=Ve(()=>{e4=Symbol.for("lc:context_variables")});function zfe(n){return n.replace(/[-:.]/g,"")}function Wfe(n,e,r=1){let a=r.toFixed(0).slice(0,3).padStart(3,"0");return zfe(`${new Date(n).toISOString().slice(0,-1)}${a}Z`)+e}function r4(n){return n!==void 0&&typeof n.createChild=="function"&&typeof n.postRun=="function"}function oU(n){return typeof n=="object"&&n!=null&&typeof n.name=="string"&&n.name==="langchain_tracer"}function sU(n){return Array.isArray(n)&&n.some(e=>oU(e))}function Gfe(n){return typeof n=="object"&&n!=null&&Array.isArray(n.handlers)}function Hfe(n){return n!==void 0&&typeof n.callbacks=="object"&&(sU(n.callbacks?.handlers)||sU(n.callbacks))}var t4,Ol,Q6=Ve(()=>{Xa();A1();RC();nU();EC();iU();t4=class n{constructor(e,r,a){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r,this.project_name=a}static fromHeader(e){let r=e.split(","),a={},i=[],s;for(let t of r){let[o,l]=t.split("="),d=decodeURIComponent(l);o==="langsmith-metadata"?a=JSON.parse(d):o==="langsmith-tags"?i=d.split(","):o==="langsmith-project"&&(s=d)}return new n(a,i,s)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}},Ol=class n{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r4(e)){Object.assign(this,{...e});return}let r=n.getDefaultConfig(),{metadata:a,...i}=e,s=i.client??n.getSharedClient(),t={...a,...i?.extra?.metadata};if(i.extra={...i.extra,metadata:t},Object.assign(this,{...r,...i,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){let o=Wfe(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+o:this.dotted_order=o}}static getDefaultConfig(){return{id:Ia(),run_type:"chain",project_name:ki("PROJECT")??yu("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:yu("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:yu("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return n.sharedClient||(n.sharedClient=new Ep),n.sharedClient}createChild(e){let r=this.child_execution_order+1,a=new n({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});e4 in this&&(a[e4]=this[e4]);let i=Symbol.for("lc:child_config"),s=e.extra?.[i]??this.extra[i];if(Hfe(s)){let l={...s},d=Gfe(l.callbacks)?l.callbacks.copy?.():void 0;d&&(Object.assign(d,{_parentRunId:a.id}),d.handlers?.find(oU)?.updateFromRunTree?.(a),l.callbacks=d),a.extra[i]=l}let t=new Set,o=this;for(;o!=null&&!t.has(o.id);)t.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,r),o=o.parent_run;return this.child_runs.push(a),a}async end(e,r,a=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??r,this.end_time=this.end_time??a,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,r,a=!0){let i=e.extra??{};if(i.runtime||(i.runtime={}),r)for(let[l,d]of Object.entries(r))i.runtime[l]||(i.runtime[l]=d);let s,t;return a?(t=e.parent_run?.id,s=[]):(s=e.child_runs.map(l=>this._convertToCreate(l,r,a)),t=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:t,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{let r=Y6(),a=await this._convertToCreate(this,r,!0);if(await this.client.createRun(a),!e){H6("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let i of this.child_runs)await i.postRun(!1)}}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(){try{let e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,r){let a=e?.callbacks,i,s,t,o=aU();if(a){let d=a?.getParentRunId?.()??"",c=a?.handlers?.find(y=>y?.name=="langchain_tracer");i=c?.getRun?.(d),s=c?.projectName,t=c?.client,o=o||!!c}return i?new n({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:t,tracingEnabled:o,project_name:s,tags:[...new Set((i?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...i?.extra?.metadata,...e?.metadata}}}).createChild(r):new n({...r,client:t,tracingEnabled:o,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){let a="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=a["langsmith-trace"];if(!i||typeof i!="string")return;let s=i.trim(),t=s.split(".").map(d=>{let[c,y]=d.split("Z");return{strTime:c,time:Date.parse(c+"Z"),uuid:y}}),o=t[0].uuid,l={...r,name:r?.name??"parent",run_type:r?.run_type??"chain",start_time:r?.start_time??Date.now(),id:t.at(-1)?.uuid,trace_id:o,dotted_order:s};if(a.baggage&&typeof a.baggage=="string"){let d=t4.fromHeader(a.baggage);l.metadata=d.metadata,l.tags=d.tags,l.project_name=d.project_name}return new n(l)}toHeaders(e){let r={"langsmith-trace":this.dotted_order,baggage:new t4(this.extra?.metadata,this.tags,this.project_name).toHeader()};if(e)for(let[a,i]of Object.entries(r))e.set(a,i);return r}};Object.defineProperty(Ol,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null})});function uU(n=!1){let e=Zfe.getInstance().getStore();if(!n&&!r4(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function a4(n){return typeof n=="function"&&"langsmith:traceable"in n}var MC,NC,Kfe,jC,Zfe,mke,lU=Ve(()=>{Q6();MC=class{getStore(){}run(e,r){return r()}},NC=Symbol.for("ls:tracing_async_local_storage"),Kfe=new MC,jC=class{getInstance(){return globalThis[NC]??Kfe}initializeGlobalInstance(e){globalThis[NC]===void 0&&(globalThis[NC]=e)}},Zfe=new jC;mke=Symbol.for("langsmith:traceable:root")});var BC=Ve(()=>{lU()});function dU(n,e){return Jfe.call(n,e)}function pU(n){if(Array.isArray(n)){let r=new Array(n.length);for(let a=0;a<r.length;a++)r[a]=""+a;return r}if(Object.keys)return Object.keys(n);let e=[];for(let r in n)dU(n,r)&&e.push(r);return e}function Is(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function i4(n){let e=0,r=n.length,a;for(;e<r;){if(a=n.charCodeAt(e),a>=48&&a<=57){e++;continue}return!1}return!0}function s4(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function P1(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function n4(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let r=0,a=n.length;r<a;r++)if(n4(n[r]))return!0}else if(typeof n=="object"){let r=pU(n),a=r.length;for(var e=0;e<a;e++)if(n4(n[r[e]]))return!0}}return!1}function cU(n,e){let r=[n];for(let a in e){let i=typeof e[a]=="object"?JSON.stringify(e[a],null,2):e[a];typeof i<"u"&&r.push(`${a}: ${i}`)}return r.join(`
`)}var Jfe,Pp,T1=Ve(()=>{Jfe=Object.prototype.hasOwnProperty;Pp=class extends Error{constructor(e,r,a,i,s){super(cU(e,{name:r,index:a,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=cU(e,{name:r,index:a,operation:i,tree:s})}}});var LC={};Am(LC,{JsonPatchError:()=>La,_areEquals:()=>O1,applyOperation:()=>Tp,applyPatch:()=>Op,applyReducer:()=>Qfe,deepClone:()=>Xfe,getValueByPointer:()=>o4,validate:()=>fU,validator:()=>u4});function o4(n,e){if(e=="")return n;var r={op:"_get",path:e};return Tp(n,r),r.value}function Tp(n,e,r=!1,a=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,n,e.path):u4(e,0)),e.path===""){let t={newDocument:n};if(e.op==="add")return t.newDocument=e.value,t;if(e.op==="replace")return t.newDocument=e.value,t.removed=n,t;if(e.op==="move"||e.op==="copy")return t.newDocument=o4(n,e.from),e.op==="move"&&(t.removed=n),t;if(e.op==="test"){if(t.test=O1(n,e.value),t.test===!1)throw new La("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return t.newDocument=n,t}else{if(e.op==="remove")return t.removed=n,t.newDocument=null,t;if(e.op==="_get")return e.value=n,t;if(r)throw new La("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,n);return t}}else{a||(n=Is(n));let o=(e.path||"").split("/"),l=n,d=1,c=o.length,y,u,S;for(typeof r=="function"?S=r:S=u4;;){if(u=o[d],u&&u.indexOf("~")!=-1&&(u=P1(u)),i&&(u=="__proto__"||u=="prototype"&&d>0&&o[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&y===void 0&&(l[u]===void 0?y=o.slice(0,d).join("/"):d==c-1&&(y=e.path),y!==void 0&&S(e,0,n,y)),d++,Array.isArray(l)){if(u==="-")u=l.length;else{if(r&&!i4(u))throw new La("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,n);i4(u)&&(u=~~u)}if(d>=c){if(r&&e.op==="add"&&u>l.length)throw new La("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,n);let V=Yfe[e.op].call(e,l,u,n);if(V.test===!1)throw new La("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return V}}else if(d>=c){let V=E0[e.op].call(e,l,u,n);if(V.test===!1)throw new La("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return V}if(l=l[u],r&&d<c&&(!l||typeof l!="object"))throw new La("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,n)}}}function Op(n,e,r,a=!0,i=!0){if(r&&!Array.isArray(e))throw new La("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");a||(n=Is(n));let s=new Array(e.length);for(let t=0,o=e.length;t<o;t++)s[t]=Tp(n,e[t],r,!0,i,t),n=s[t].newDocument;return s.newDocument=n,s}function Qfe(n,e,r){let a=Tp(n,e);if(a.test===!1)throw new La("Test operation failed","TEST_OPERATION_FAILED",r,e,n);return a.newDocument}function u4(n,e,r,a){if(typeof n!="object"||n===null||Array.isArray(n))throw new La("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,r);if(E0[n.op]){if(typeof n.path!="string")throw new La("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,r);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new La('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,r);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new La("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new La("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,r);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n4(n.value))throw new La("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,r);if(r){if(n.op=="add"){var i=n.path.split("/").length,s=a.split("/").length;if(i!==s+1&&i!==s)throw new La("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,r)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==a)throw new La("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,r)}else if(n.op==="move"||n.op==="copy"){var t={op:"_get",path:n.from,value:void 0},o=fU([t],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new La("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,r)}}}else throw new La("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,r)}function fU(n,e,r){try{if(!Array.isArray(n))throw new La("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Op(Is(e),Is(n),r||!0);else{r=r||u4;for(var a=0;a<n.length;a++)r(n[a],a,e,void 0)}}catch(i){if(i instanceof La)return i;throw i}}function O1(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var r=Array.isArray(n),a=Array.isArray(e),i,s,t;if(r&&a){if(s=n.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!O1(n[i],e[i]))return!1;return!0}if(r!=a)return!1;var o=Object.keys(n);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(t=o[i],!O1(n[t],e[t]))return!1;return!0}return n!==n&&e!==e}var La,Xfe,E0,Yfe,l4=Ve(()=>{T1();La=Pp,Xfe=Is,E0={add:function(n,e,r){return n[e]=this.value,{newDocument:r}},remove:function(n,e,r){var a=n[e];return delete n[e],{newDocument:r,removed:a}},replace:function(n,e,r){var a=n[e];return n[e]=this.value,{newDocument:r,removed:a}},move:function(n,e,r){let a=o4(r,this.path);a&&(a=Is(a));let i=Tp(r,{op:"remove",path:this.from}).removed;return Tp(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:a}},copy:function(n,e,r){let a=o4(r,this.from);return Tp(r,{op:"add",path:this.path,value:Is(a)}),{newDocument:r}},test:function(n,e,r){return{newDocument:r,test:O1(n[e],this.value)}},_get:function(n,e,r){return this.value=n[e],{newDocument:r}}},Yfe={add:function(n,e,r){return i4(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:r,index:e}},remove:function(n,e,r){var a=n.splice(e,1);return{newDocument:r,removed:a[0]}},replace:function(n,e,r){var a=n[e];return n[e]=this.value,{newDocument:r,removed:a}},move:E0.move,copy:E0.copy,test:E0.test,_get:E0._get}});var hU=Ve(()=>{T1();l4();});var Ake,mU=Ve(()=>{l4();hU();T1();l4();T1();Ake={...LC,JsonPatchError:Pp,deepClone:Is,escapePathComponent:s4,unescapePathComponent:P1}});async function gU(){return qC===void 0&&(qC={library:"langchain-js",runtime:n0e()}),qC}function rs(n){try{return typeof process<"u"?process.env?.[n]:UC()?Deno?.env.get(n):void 0}catch{return}}var e0e,t0e,r0e,UC,a0e,n0e,qC,P0=Ve(()=>{e0e=()=>typeof window<"u"&&typeof window.document<"u",t0e=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",r0e=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),UC=()=>typeof Deno<"u",a0e=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!UC(),n0e=()=>{let n;return e0e()?n="browser":a0e()?n="node":t0e()?n="webworker":r0e()?n="jsdom":UC()?n="deno":n="other",n}});var $C,Fp,bU,VC=Ve(()=>{Xa();b1();P0();$C=class{},Fp=class n extends $C{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,pC(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:rs("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return xo.prototype.toJSON.call(this)}toJSONNotImplemented(){return xo.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends n{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Ia()}),Object.assign(this,e)}}return new r}},bU=n=>{let e=n;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"}});function zC(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}function i0e(n){return n.replace(/[-:.]/g,"")}function s0e(n,e,r){let a=r.toFixed(0).slice(0,3).padStart(3,"0");return i0e(`${new Date(n).toISOString().slice(0,-1)}${a}Z`)+e}function T0(n){return typeof n._addRunToRunMap=="function"}var Ds,kp=Ve(()=>{VC();Ds=class extends Fp{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){let r=s0e(e.start_time,e.id,e.execution_order),a={...e};if(a.parent_run_id!==void 0){let i=this.runMap.get(a.parent_run_id);i&&(this._addChildRun(i,a),i.child_execution_order=Math.max(i.child_execution_order,a.child_execution_order),a.trace_id=i.trace_id,i.dotted_order!==void 0&&(a.dotted_order=[i.dotted_order,r].join(".")))}else a.trace_id=a.id,a.dotted_order=r;return this.runMap.set(a.id,a),a}async _endTrace(e){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await this.onRunUpdate?.(e)}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y=o?{...s,metadata:o}:s,u={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:y??{},tags:t||[]};return this._addRunToRunMap(u)}async handleLLMStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForLLMStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}_createRunForChatModelStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y=o?{...s,metadata:o}:s,u={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:d,child_runs:[],child_execution_order:d,run_type:"llm",extra:y??{},tags:t||[]};return this._addRunToRunMap(u)}async handleChatModelStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForChatModelStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onLLMStart?.(d),d}async handleLLMEnd(e,r,a,i,s){let t=this.runMap.get(r);if(!t||t?.run_type!=="llm")throw new Error("No LLM run to end.");return t.end_time=Date.now(),t.outputs=e,t.events.push({name:"end",time:new Date(t.end_time).toISOString()}),t.extra={...t.extra,...s},await this.onLLMEnd?.(t),await this._endTrace(t),t}async handleLLMError(e,r,a,i,s){let t=this.runMap.get(r);if(!t||t?.run_type!=="llm")throw new Error("No LLM run to end.");return t.end_time=Date.now(),t.error=this.stringifyError(e),t.events.push({name:"error",time:new Date(t.end_time).toISOString()}),t.extra={...t.extra,...s},await this.onLLMError?.(t),await this._endTrace(t),t}_createRunForChainStart(e,r,a,i,s,t,o,l){let d=this._getExecutionOrder(i),c=Date.now(),y={id:a,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:d,child_execution_order:d,run_type:o??"chain",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(y)}async handleChainStart(e,r,a,i,s,t,o,l){let d=this.runMap.get(a)??this._createRunForChainStart(e,r,a,i,s,t,o,l);return await this.onRunCreate?.(d),await this.onChainStart?.(d),d}async handleChainEnd(e,r,a,i,s){let t=this.runMap.get(r);if(!t)throw new Error("No chain run to end.");return t.end_time=Date.now(),t.outputs=zC(e,"output"),t.events.push({name:"end",time:new Date(t.end_time).toISOString()}),s?.inputs!==void 0&&(t.inputs=zC(s.inputs,"input")),await this.onChainEnd?.(t),await this._endTrace(t),t}async handleChainError(e,r,a,i,s){let t=this.runMap.get(r);if(!t)throw new Error("No chain run to end.");return t.end_time=Date.now(),t.error=this.stringifyError(e),t.events.push({name:"error",time:new Date(t.end_time).toISOString()}),s?.inputs!==void 0&&(t.inputs=zC(s.inputs,"input")),await this.onChainError?.(t),await this._endTrace(t),t}_createRunForToolStart(e,r,a,i,s,t,o){let l=this._getExecutionOrder(i),d=Date.now(),c={id:a,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleToolStart(e,r,a,i,s,t,o){let l=this.runMap.get(a)??this._createRunForToolStart(e,r,a,i,s,t,o);return await this.onRunCreate?.(l),await this.onToolStart?.(l),l}async handleToolEnd(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.outputs={output:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await this.onToolEnd?.(a),await this._endTrace(a),a}async handleToolError(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="tool")throw new Error("No tool run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await this.onToolError?.(a),await this._endTrace(a),a}async handleAgentAction(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="chain")return;let i=a;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(a)}async handleAgentEnd(e,r){let a=this.runMap.get(r);!a||a?.run_type!=="chain"||(a.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(a))}_createRunForRetrieverStart(e,r,a,i,s,t,o){let l=this._getExecutionOrder(i),d=Date.now(),c={id:a,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:t?{metadata:t}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,r,a,i,s,t,o){let l=this.runMap.get(a)??this._createRunForRetrieverStart(e,r,a,i,s,t,o);return await this.onRunCreate?.(l),await this.onRetrieverStart?.(l),l}async handleRetrieverEnd(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.outputs={documents:e},a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),await this.onRetrieverEnd?.(a),await this._endTrace(a),a}async handleRetrieverError(e,r){let a=this.runMap.get(r);if(!a||a?.run_type!=="retriever")throw new Error("No retriever run to end");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),await this.onRetrieverError?.(a),await this._endTrace(a),a}async handleText(e,r){let a=this.runMap.get(r);!a||a?.run_type!=="chain"||(a.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(a))}async handleLLMNewToken(e,r,a,i,s,t){let o=this.runMap.get(a);if(!o||o?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:t?.chunk}}),await this.onLLMNewToken?.(o,e,{chunk:t?.chunk}),o}}});function ci(n,e){return`${n.open}${e}${n.close}`}function Ns(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function vU(n){return typeof n=="string"?n.trim():n==null?n:Ns(n,n.toString())}function Nc(n){if(!n.end_time)return"";let e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var WC,Ii,F1,yU=Ve(()=>{WC=gn(H8(),1);kp();({color:Ii}=WC.default),F1=class extends Ds{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],a=e;for(;a.parent_run_id;){let i=this.runMap.get(a.parent_run_id);if(i)r.push(i),a=i;else break}return r}getBreadcrumbs(e){let a=[...this.getParents(e).reverse(),e].map((i,s,t)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===t.length-1?ci(WC.default.bold,o):o}).join(" > ");return ci(Ii.grey,a)}onChainStart(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.green,"[chain/start]")} [${r}] Entering Chain run with input: ${Ns(e.inputs,"[inputs]")}`)}onChainEnd(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.cyan,"[chain/end]")} [${r}] [${Nc(e)}] Exiting Chain run with output: ${Ns(e.outputs,"[outputs]")}`)}onChainError(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.red,"[chain/error]")} [${r}] [${Nc(e)}] Chain run errored with error: ${Ns(e.error,"[error]")}`)}onLLMStart(e){let r=this.getBreadcrumbs(e),a="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${ci(Ii.green,"[llm/start]")} [${r}] Entering LLM run with input: ${Ns(a,"[inputs]")}`)}onLLMEnd(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.cyan,"[llm/end]")} [${r}] [${Nc(e)}] Exiting LLM run with output: ${Ns(e.outputs,"[response]")}`)}onLLMError(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.red,"[llm/error]")} [${r}] [${Nc(e)}] LLM run errored with error: ${Ns(e.error,"[error]")}`)}onToolStart(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.green,"[tool/start]")} [${r}] Entering Tool run with input: "${vU(e.inputs.input)}"`)}onToolEnd(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.cyan,"[tool/end]")} [${r}] [${Nc(e)}] Exiting Tool run with output: "${vU(e.outputs?.output)}"`)}onToolError(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.red,"[tool/error]")} [${r}] [${Nc(e)}] Tool run errored with error: ${Ns(e.error,"[error]")}`)}onRetrieverStart(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${Ns(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.cyan,"[retriever/end]")} [${r}] [${Nc(e)}] Exiting Retriever run with output: ${Ns(e.outputs,"[outputs]")}`)}onRetrieverError(e){let r=this.getBreadcrumbs(e);console.log(`${ci(Ii.red,"[retriever/error]")} [${r}] [${Nc(e)}] Retriever run errored with error: ${Ns(e.error,"[error]")}`)}onAgentAction(e){let r=e,a=this.getBreadcrumbs(e);console.log(`${ci(Ii.blue,"[agent/action]")} [${a}] Agent selected action: ${Ns(r.actions[r.actions.length-1],"[action]")}`)}}});var GC=Ve(()=>{Q6()});var HC=Ve(()=>{X6()});var KC,_U,xU=Ve(()=>{HC();P0();_U=()=>{if(KC===void 0){let n=rs("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};KC=new Ep(n)}return KC}});var O0,wU=Ve(()=>{GC();BC();P0();kp();xU();O0=class n extends Ds{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:a,client:i}=e;this.projectName=a??rs("LANGCHAIN_PROJECT")??rs("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??_U();let s=n.getTraceableRunTree();s&&this.updateFromRunTree(s)}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await gU()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async onRunCreate(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async onRunUpdate(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,r)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let r=e,a=new Set;for(;r.parent_run&&!(a.has(r.id)||(a.add(r.id),!r.parent_run));)r=r.parent_run;a.clear();let i=[r];for(;i.length>0;){let s=i.shift();!s||a.has(s.id)||(a.add(s.id),this.runMap.set(s.id,s),s.child_runs&&i.push(...s.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){let r={},a=[];for(let[i,s]of this.runMap){let t=new Ol({...s,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});r[i]=t,a.push([i,s.dotted_order])}a.sort((i,s)=>!i[1]||!s[1]?0:i[1].localeCompare(s[1]));for(let[i]of a){let s=this.runMap.get(i),t=r[i];if(!(!s||!t)&&s.parent_run_id){let o=r[s.parent_run_id];o&&(o.child_runs.push(t),t.parent_run=o)}}return r[e]}static getTraceableRunTree(){try{return uU(!0)}catch{return}}}});var SU,Rp,CU,Mc,k1=Ve(()=>{SU=Symbol.for("ls:tracing_async_local_storage"),Rp=Symbol.for("lc:context_variables"),CU=n=>{globalThis[SU]=n},Mc=()=>globalThis[SU]});function o0e(){let n="default"in c4.default?c4.default.default:c4.default;return new n({autoStart:!0,concurrency:1})}function u0e(){return typeof R1>"u"&&(R1=o0e()),R1}async function Ka(n,e){if(e===!0){let r=Mc();r!==void 0?await r.run(void 0,async()=>n()):await n()}else R1=u0e(),R1.add(async()=>{let r=Mc();r!==void 0?await r.run(void 0,async()=>n()):await n()})}var c4,R1,AU=Ve(()=>{c4=gn(Pd(),1);k1()});var EU=Ve(()=>{AU()});var PU,TU=Ve(()=>{P0();PU=n=>n!==void 0?n:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>rs(r)==="true")});function ZC(n){let e=Mc();return e===void 0?void 0:e.getStore()?.[Rp]?.[n]}var l0e,OU,FU=Ve(()=>{GC();k1();l0e=Symbol("lc:configure_hooks"),OU=()=>ZC(l0e)||[]});function I1(n){return"name"in n?n:Fp.fromMethods(n)}var JC,F0,XC,d4,YC,QC,_u,eA=Ve(()=>{Xa();VC();yU();_1();P0();wU();EU();TU();kp();FU();JC=class{setHandler(e){return this.setHandlers([e])}},F0=class{constructor(e,r,a,i,s,t,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{try{await r.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleText: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleCustomEvent(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{try{await t.handleCustomEvent?.(e,r,this.runId,this.tags,this.metadata)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleCustomEvent: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}},XC=class extends F0{getChild(e){let r=new _u(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetriever`),r.raiseError)throw a}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetrieverError: ${a}`),r.raiseError)throw e}},r.awaitHandlers)))}},d4=class extends F0{async handleLLMNewToken(e,r,a,i,s,t){await Promise.all(this.handlers.map(o=>Ka(async()=>{if(!o.ignoreLLM)try{await o.handleLLMNewToken?.(e,r??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,t)}catch(l){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${l}`),o.raiseError)throw l}},o.awaitHandlers)))}async handleLLMError(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleLLMEnd(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}},YC=class extends F0{getChild(e){let r=new _u(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleChainEnd(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,s)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreAgent)try{await r.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentAction: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreAgent)try{await r.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentEnd: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}},QC=class extends F0{getChild(e){let r=new _u(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreAgent)try{await r.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolError: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>Ka(async()=>{if(!r.ignoreAgent)try{await r.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(a){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolEnd: ${a}`),r.raiseError)throw a}},r.awaitHandlers)))}},_u=class n extends JC{constructor(e,r){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=r?.handlers??this.handlers,this.inheritableHandlers=r?.inheritableHandlers??this.inheritableHandlers,this.tags=r?.tags??this.tags,this.inheritableTags=r?.inheritableTags??this.inheritableTags,this.metadata=r?.metadata??this.metadata,this.inheritableMetadata=r?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,r,a=void 0,i=void 0,s=void 0,t=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(d,c)=>{let y=c===0&&a?a:Ia();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return T0(u)&&u._createRunForLLMStart(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l),Ka(async()=>{try{await u.handleLLMStart?.(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l)}catch(S){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${S}`),u.raiseError)throw S}},u.awaitHandlers)})),new d4(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,a=void 0,i=void 0,s=void 0,t=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(d,c)=>{let y=c===0&&a?a:Ia();return await Promise.all(this.handlers.map(u=>{if(!u.ignoreLLM)return T0(u)&&u._createRunForChatModelStart(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l),Ka(async()=>{try{if(u.handleChatModelStart)await u.handleChatModelStart?.(e,[d],y,this._parentRunId,s,this.tags,this.metadata,l);else if(u.handleLLMStart){let S=I6(d);await u.handleLLMStart?.(e,[S],y,this._parentRunId,s,this.tags,this.metadata,l)}}catch(S){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMStart: ${S}`),u.raiseError)throw S}},u.awaitHandlers)})),new d4(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,a=Ia(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreChain)return T0(l)&&l._createRunForChainStart(e,r,a,this._parentRunId,this.tags,this.metadata,i,o),Ka(async()=>{try{await l.handleChainStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,i,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new YC(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,a=Ia(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreAgent)return T0(l)&&l._createRunForToolStart(e,r,a,this._parentRunId,this.tags,this.metadata,o),Ka(async()=>{try{await l.handleToolStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleToolStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new QC(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,a=Ia(),i=void 0,s=void 0,t=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreRetriever)return T0(l)&&l._createRunForRetrieverStart(e,r,a,this._parentRunId,this.tags,this.metadata,o),Ka(async()=>{try{await l.handleRetrieverStart?.(e,r,a,this._parentRunId,this.tags,this.metadata,o)}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${d}`),l.raiseError)throw d}},l.awaitHandlers)})),new XC(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,r,a,i,s){await Promise.all(this.handlers.map(t=>Ka(async()=>{if(!t.ignoreCustomEvent)try{await t.handleCustomEvent?.(e,r,a,this.tags,this.metadata)}catch(o){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleCustomEvent: ${o}`),t.raiseError)throw o}},t.awaitHandlers)))}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let a of e)this.addHandler(a,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let a=new n(this._parentRunId);for(let i of this.handlers){let s=this.inheritableHandlers.includes(i);a.addHandler(i,s)}for(let i of this.tags){let s=this.inheritableTags.includes(i);a.addTags([i],s)}for(let i of Object.keys(this.metadata)){let s=Object.keys(this.inheritableMetadata).includes(i);a.addMetadata({[i]:this.metadata[i]},s)}for(let i of e)a.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||a.addHandler(i,r);return a}static fromHandlers(e){class r extends Fp{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Ia()}),Object.assign(this,e)}}let a=new this;return a.addHandler(new r),a}static configure(e,r,a,i,s,t,o){return this._configureSync(e,r,a,i,s,t,o)}static _configureSync(e,r,a,i,s,t,o){let l;(e||r)&&(Array.isArray(e)||!e?(l=new n,l.setHandlers(e?.map(I1)??[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(I1):r?.handlers,!1));let d=rs("LANGCHAIN_VERBOSE")==="true"||o?.verbose,c=O0.getTraceableRunTree()?.tracingEnabled||PU(),y=c||(rs("LANGCHAIN_TRACING")??!1);if(d||y){if(l||(l=new n),d&&!l.handlers.some(u=>u.name===F1.prototype.name)){let u=new F1;l.addHandler(u,!0)}if(y&&!l.handlers.some(u=>u.name==="langchain_tracer")&&c){let u=new O0;l.addHandler(u,!0),l._parentRunId=O0.getTraceableRunTree()?.id??l._parentRunId}}for(let{contextVar:u,inheritable:S=!0,handlerClass:V,envVar:U}of OU()){let z=U&&rs(U)==="true"&&V,D,k=u!==void 0?ZC(u):void 0;k&&bU(k)?D=k:z&&(D=new V({})),D!==void 0&&(l||(l=new n),l.handlers.some(T=>T.name===D.name)||l.addHandler(D,S))}return(a||i)&&l&&(l.addTags(a??[]),l.addTags(i??[],!1)),(s||t)&&l&&(l.addMetadata(s??{}),l.addMetadata(t??{},!1)),l}}});var p4,c0e,kU,tA,as,RU=Ve(()=>{HC();k1();eA();p4=class{getStore(){}run(e,r){return r()}enterWith(e){}},c0e=new p4,kU=Symbol.for("lc:child_config"),tA=class{getInstance(){return Mc()??c0e}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[kU]}runWithConfig(e,r,a){let i=_u._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),s=this.getInstance(),t=s.getStore(),o=i?.getParentRunId(),l=i?.handlers?.find(c=>c?.name==="langchain_tracer"),d;return l&&o?d=l.convertToRunTree(o):a||(d=new Ol({name:"<runnable_lambda>",tracingEnabled:!1})),d&&(d.extra={...d.extra,[kU]:e}),t!==void 0&&t[Rp]!==void 0&&(d===void 0&&(d={}),d[Rp]=t[Rp]),s.run(d,r)}initializeGlobalInstance(e){Mc()===void 0&&CU(e)}},as=new tA});var D1=Ve(()=>{RU();k1()});async function Ms(n){return _u._configureSync(n?.callbacks,void 0,n?.tags,void 0,n?.metadata)}function rA(...n){let e={};for(let r of n.filter(a=>!!a))for(let a of Object.keys(r))if(a==="metadata")e[a]={...e[a],...r[a]};else if(a==="tags"){let i=e[a]??[];e[a]=[...new Set(i.concat(r[a]??[]))]}else if(a==="configurable")e[a]={...e[a],...r[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=r.timeout:r.timeout!==void 0&&(e.timeout=Math.min(e.timeout,r.timeout));else if(a==="signal")e.signal===void 0?e.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,r.signal]):e.signal=r.signal);else if(a==="callbacks"){let i=e.callbacks,s=r.callbacks;if(Array.isArray(s))if(!i)e.callbacks=s;else if(Array.isArray(i))e.callbacks=i.concat(s);else{let t=i.copy();for(let o of s)t.addHandler(I1(o),!0);e.callbacks=t}else if(s)if(!i)e.callbacks=s;else if(Array.isArray(i)){let t=s.copy();for(let o of i)t.addHandler(I1(o),!0);e.callbacks=t}else e.callbacks=new _u(s._parentRunId,{handlers:i.handlers.concat(s.handlers),inheritableHandlers:i.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(s.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(s.inheritableTags))),metadata:{...i.metadata,...s.metadata}})}else{let i=a;e[i]=r[i]??e[i]}return e}function pa(n){let e=as.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:a,runName:i,...s}=e;r=Object.entries(s).reduce((t,[o,l])=>(l!==void 0&&(t[o]=l),t),r)}if(n&&(r=Object.entries(n).reduce((a,[i,s])=>(s!==void 0&&(a[i]=s),a),r)),r?.configurable)for(let a of Object.keys(r.configurable))d0e.has(typeof r.configurable[a])&&!r.metadata?.[a]&&(r.metadata||(r.metadata={}),r.metadata[a]=r.configurable[a]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");let a=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,a])):r.signal=a,delete r.timeout}return r}function Dn(n={},{callbacks:e,maxConcurrency:r,recursionLimit:a,runName:i,configurable:s,runId:t}={}){let o=pa(n);return e!==void 0&&(delete o.runName,o.callbacks=e),a!==void 0&&(o.recursionLimit=a),r!==void 0&&(o.maxConcurrency=r),i!==void 0&&(o.runName=i),s!==void 0&&(o.configurable={...o.configurable,...s}),t!==void 0&&delete o.runId,o}function kl(n){return n?{configurable:n.configurable,recursionLimit:n.recursionLimit,callbacks:n.callbacks,tags:n.tags,metadata:n.metadata,maxConcurrency:n.maxConcurrency,timeout:n.timeout,signal:n.signal}:void 0}var f4,d0e,h4=Ve(()=>{eA();D1();f4=25;d0e=new Set(["string","number","boolean"])});async function xu(n,e){if(e===void 0)return n;let r;return Promise.race([n.catch(a=>{if(!e?.aborted)throw a}),new Promise((a,i)=>{r=()=>{i(new Error("Aborted"))},e.addEventListener("abort",r),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",r))}var aA=Ve(()=>{});function nA(n,e=2){let r=Array.from({length:e},()=>[]);return r.map(async function*(i){for(;;)if(i.length===0){let s=await n.next();for(let t of r)t.push(s)}else{if(i[0].done)return;yield i.shift().value}})}function wu(n,e){if(Array.isArray(n)&&Array.isArray(e))return n.concat(e);if(typeof n=="string"&&typeof e=="string")return n+e;if(typeof n=="number"&&typeof e=="number")return n+e;if("concat"in n&&typeof n.concat=="function")return n.concat(e);if(typeof n=="object"&&typeof e=="object"){let r={...n};for(let[a,i]of Object.entries(e))a in r&&!Array.isArray(r[a])?r[a]=wu(r[a],i):r[a]=i;return r}else throw new Error(`Cannot concat ${typeof n} and ${typeof e}`)}async function IU(n,e,r,a,...i){let s=new Rl({generator:e,startSetup:r,signal:a}),t=await s.setup;return{output:n(s,t,...i),setup:t}}var Kn,Rl,N1=Ve(()=>{h4();D1();aA();Kn=class n extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let r=this.reader.cancel();this.reader.releaseLock(),await r}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){let r=e.getReader();return new n({start(a){return i();function i(){return r.read().then(({done:s,value:t})=>{if(s){a.close();return}return a.enqueue(t),i()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(e){return new n({async pull(r){let{value:a,done:i}=await e.next();i&&r.close(),r.enqueue(a)},async cancel(r){await e.return(r)}})}};Rl=class{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((r,a)=>{as.runWithConfig(kl(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,a):this.firstResult.then(i=>r(void 0),a)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?as.runWithConfig(kl(this.config),this.signal?async()=>xu(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}});async function DU(n,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=n;if(["retriever","llm","prompt"].includes(n.run_type))return r;if(!(Object.keys(r).length===1&&r?.input===""))return r.input}async function NU(n,e){let{outputs:r}=n;return e==="original"||["retriever","llm","prompt"].includes(n.run_type)?r:r!==void 0&&Object.keys(r).length===1&&r?.output!==void 0?r.output:r}function p0e(n){return n!==void 0&&n.message!==void 0}var Co,M1,MU,j1,jU=Ve(()=>{mU();kp();N1();m0();Co=class{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){let r=this.ops.concat(e.ops),a=Op({},r);return new M1({ops:r,state:a[a.length-1].newDocument})}},M1=class n extends Co{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let r=this.ops.concat(e.ops),a=Op(this.state,e.ops);return new n({ops:r,state:a[a.length-1].newDocument})}static fromRunLogPatch(e){let r=Op({},e.ops);return new n({ops:e.ops,state:r[r.length-1].newDocument})}},MU=n=>n.name==="log_stream_tracer";j1=class extends Ds{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Kn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;let r=e.tags??[],a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(a=a||r.find(i=>this.includeTags?.includes(i))!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(a=a&&r.every(i=>!this.excludeTags?.includes(i))),a}async*tapOutputIterable(e,r){for await(let a of r){if(e!==this.rootId){let i=this.keyMapByRunId[e];i&&await this.writer.write(new Co({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]}))}yield a}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Co({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;let a={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(a.inputs=await DU(e,this._schemaFormat)),await this.writer.write(new Co({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:a}]}))}async onRunUpdate(e){try{let r=this.keyMapByRunId[e.id];if(r===void 0)return;let a=[];this._schemaFormat==="streaming_events"&&a.push({op:"replace",path:`/logs/${r}/inputs`,value:await DU(e,this._schemaFormat)}),a.push({op:"add",path:`/logs/${r}/final_output`,value:await NU(e,this._schemaFormat)}),e.end_time!==void 0&&a.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});let i=new Co({ops:a});await this.writer.write(i)}finally{if(e.id===this.rootId){let r=new Co({ops:[{op:"replace",path:"/final_output",value:await NU(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,a){let i=this.keyMapByRunId[e.id];if(i===void 0)return;let s=e.inputs.messages!==void 0,t;s?p0e(a?.chunk)?t=a?.chunk:t=new Oc({id:`run-${e.id}`,content:r}):t=r;let o=new Co({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${i}/streamed_output/-`,value:t}]});await this.writer.write(o)}}});var B1,BU=Ve(()=>{B1=class n{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new n({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}});function m4({name:n,serialized:e}){return n!==void 0?n:e?.name!==void 0?e.name:e?.id!==void 0&&Array.isArray(e?.id)?e.id[e.id.length-1]:"Unnamed"}var LU,g4,qU=Ve(()=>{kp();N1();m0();BU();LU=n=>n.name==="event_stream_tracer",g4=class extends Ds{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Kn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){let r=e.tags??[],a=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(a=a||r.find(i=>this.includeTags?.includes(i))!==void 0),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(a=a&&r.every(i=>!this.excludeTags?.includes(i))),a}async*tapOutputIterable(e,r){let a=await r.next();if(a.done)return;let i=this.runInfoMap.get(e);if(i===void 0){yield a.value;return}function s(o,l){return o==="llm"&&typeof l=="string"?new B1({text:l}):l}let t=this.tappedPromises.get(e);if(t===void 0){let o;t=new Promise(l=>{o=l}),this.tappedPromises.set(e,t);try{let l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:s(i.runType,a.value)}},i),yield a.value;for await(let d of r)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:s(i.runType,d)}},i),yield d}finally{o()}}else{yield a.value;for await(let o of r)yield o}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){let a=this.tappedPromises.get(e.run_id);a!==void 0?a.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){let r=m4(e),a=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:a,inputs:e.inputs};this.runInfoMap.set(e.id,i);let s=`on_${a}_start`;await this.send({event:s,data:{input:e.inputs},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onLLMNewToken(e,r,a){let i=this.runInfoMap.get(e.id),s,t;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")t="on_chat_model_stream",a?.chunk===void 0?s=new Oc({content:r,id:`run-${e.id}`}):s=a.chunk.message;else if(i.runType==="llm")t="on_llm_stream",a?.chunk===void 0?s=new B1({text:r}):s=a.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:t,data:{chunk:s},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){let r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let a;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=e.outputs?.generations,s;if(r.runType==="chat_model"){for(let t of i??[]){if(s!==void 0)break;s=t[0]?.message}a="on_chat_model_end"}else if(r.runType==="llm")s={generations:i?.map(t=>t.map(o=>({text:o.text,generationInfo:o.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},a="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:a,data:{output:s,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){let r=m4(e),a=e.run_type??"chain",i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:e.run_type},s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},i.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,i.inputs=e.inputs.input):(s.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${a}_start`,data:s,name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onChainEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let a=`on_${e.run_type}_end`,i=e.inputs??r.inputs??{},t={output:e.outputs?.output??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(t.input=i.input,r.inputs=i.input),await this.sendEndEvent({event:a,data:t,run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata??{}},r)}async onToolStart(e){let r=m4(e),a={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,a),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:r,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},a)}async onToolEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let a=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:a,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){let r=m4(e),i={tags:e.tags??[],metadata:e.extra?.metadata??{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},i)}async onRetrieverEnd(e){let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,a){let i=this.runInfoMap.get(a);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${a} not found in run map.`);await this.send({event:"on_custom_event",run_id:a,name:e,tags:i.tags,metadata:i.metadata,data:r},i)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}});var UU,b4,f0e,h0e,v4,$U=Ve(()=>{UU=gn(Ed(),1),b4=gn(Pd(),1),f0e=[400,401,402,403,404,405,406,407,409],h0e=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n?.code==="ECONNABORTED")throw n;let e=n?.response?.status??n?.status;if(e&&f0e.includes(+e))throw n;if(n?.error?.code==="insufficient_quota"){let r=new Error(n?.message);throw r.name="InsufficientQuotaError",r}},v4=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??h0e;let r="default"in b4.default?b4.default.default:b4.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,UU.default)(()=>e(...r).catch(a=>{throw a instanceof Error?a:new Error(a)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...a){return e.signal?Promise.race([this.call(r,...a),new Promise((i,s)=>{e.signal?.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...a)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});var L1,VU=Ve(()=>{kp();L1=class extends Ds{constructor({config:e,onStart:r,onEnd:a,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=r,this.argOnEnd=a,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}});function q1(n){return n?n.lc_runnable:!1}var y4,iA=Ve(()=>{y4=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,r){let a=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,i=e.tags??[];return this.includeNames!==void 0&&(a=a||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(a=a||this.includeTypes.includes(r)),this.includeTags!==void 0&&(a=a||i.some(s=>this.includeTags?.includes(s))),this.excludeNames!==void 0&&(a=a&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(a=a&&!this.excludeTypes.includes(r)),this.excludeTags!==void 0&&(a=a&&i.every(s=>!this.excludeTags?.includes(s))),a}}});var WU,zU,GU,_4=Ve(()=>{WU=Symbol("Let zodToJsonSchema decide on which parser to use"),zU={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},GU=n=>typeof n=="string"?{...zU,name:n}:{...zU,...n}});var HU,sA=Ve(()=>{_4();HU=n=>{let e=GU(n),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([a,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}}});function oA(n,e,r,a){a?.errorMessages&&r&&(n.errorMessage={...n.errorMessage,[e]:r})}function Jr(n,e,r,a,i){n[e]=r,oA(n,e,a,i)}var jc=Ve(()=>{});function KU(){return{}}var uA=Ve(()=>{});function ZU(n,e){let r={type:"array"};return n.type?._def&&n.type?._def?.typeName!==pt.ZodAny&&(r.items=Qt(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&Jr(r,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&Jr(r,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(Jr(r,"minItems",n.exactLength.value,n.exactLength.message,e),Jr(r,"maxItems",n.exactLength.value,n.exactLength.message,e)),r}var lA=Ve(()=>{C0();jc();tn()});function JU(n,e){let r={type:"integer",format:"int64"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?Jr(r,"minimum",a.value,a.message,e):Jr(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),Jr(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?Jr(r,"maximum",a.value,a.message,e):Jr(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),Jr(r,"maximum",a.value,a.message,e));break;case"multipleOf":Jr(r,"multipleOf",a.value,a.message,e);break}return r}var cA=Ve(()=>{jc()});function XU(){return{type:"boolean"}}var dA=Ve(()=>{});function x4(n,e){return Qt(n.type._def,e)}var w4=Ve(()=>{tn()});var YU,pA=Ve(()=>{tn();YU=(n,e)=>Qt(n.innerType._def,e)});function fA(n,e,r){let a=r??e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((i,s)=>fA(n,e,i))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return m0e(n,e)}}var m0e,hA=Ve(()=>{jc();m0e=(n,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let a of n.checks)switch(a.kind){case"min":Jr(r,"minimum",a.value,a.message,e);break;case"max":Jr(r,"maximum",a.value,a.message,e);break}return r}});function QU(n,e){return{...Qt(n.innerType._def,e),default:n.defaultValue()}}var mA=Ve(()=>{tn()});function e$(n,e){return e.effectStrategy==="input"?Qt(n.schema._def,e):{}}var gA=Ve(()=>{tn()});function t$(n){return{type:"string",enum:Array.from(n.values)}}var bA=Ve(()=>{});function r$(n,e){let r=[Qt(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Qt(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(s=>{if(g0e(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(a=void 0);else{let t=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:o,...l}=s;t=l}else a=void 0;i.push(t)}}),i.length?{allOf:i,...a}:void 0}var g0e,vA=Ve(()=>{tn();g0e=n=>"type"in n&&n.type==="string"?!1:"allOf"in n});function a$(n,e){let r=typeof n.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[n.value]}:{type:r==="bigint"?"integer":r,const:n.value}}var yA=Ve(()=>{});function S4(n,e){let r={type:"string"};if(n.checks)for(let a of n.checks)switch(a.kind){case"min":Jr(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e);break;case"max":Jr(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Eo(r,"email",a.message,e);break;case"format:idn-email":Eo(r,"idn-email",a.message,e);break;case"pattern:zod":di(r,Ao.email,a.message,e);break}break;case"url":Eo(r,"uri",a.message,e);break;case"uuid":Eo(r,"uuid",a.message,e);break;case"regex":di(r,a.regex,a.message,e);break;case"cuid":di(r,Ao.cuid,a.message,e);break;case"cuid2":di(r,Ao.cuid2,a.message,e);break;case"startsWith":di(r,RegExp(`^${xA(a.value,e)}`),a.message,e);break;case"endsWith":di(r,RegExp(`${xA(a.value,e)}$`),a.message,e);break;case"datetime":Eo(r,"date-time",a.message,e);break;case"date":Eo(r,"date",a.message,e);break;case"time":Eo(r,"time",a.message,e);break;case"duration":Eo(r,"duration",a.message,e);break;case"length":Jr(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e),Jr(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"includes":{di(r,RegExp(xA(a.value,e)),a.message,e);break}case"ip":{a.version!=="v6"&&Eo(r,"ipv4",a.message,e),a.version!=="v4"&&Eo(r,"ipv6",a.message,e);break}case"base64url":di(r,Ao.base64url,a.message,e);break;case"jwt":di(r,Ao.jwt,a.message,e);break;case"cidr":{a.version!=="v6"&&di(r,Ao.ipv4Cidr,a.message,e),a.version!=="v4"&&di(r,Ao.ipv6Cidr,a.message,e);break}case"emoji":di(r,Ao.emoji(),a.message,e);break;case"ulid":{di(r,Ao.ulid,a.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Eo(r,"binary",a.message,e);break}case"contentEncoding:base64":{Jr(r,"contentEncoding","base64",a.message,e);break}case"pattern:zod":{di(r,Ao.base64,a.message,e);break}}break}case"nanoid":di(r,Ao.nanoid,a.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function xA(n,e){return e.patternStrategy==="escape"?v0e(n):n}function v0e(n){let e="";for(let r=0;r<n.length;r++)b0e.has(n[r])||(e+="\\"),e+=n[r];return e}function Eo(n,e,r,a){n.format||n.anyOf?.some(i=>i.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&a.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...r&&a.errorMessages&&{errorMessage:{format:r}}})):Jr(n,"format",e,r,a)}function di(n,e,r,a){n.pattern||n.allOf?.some(i=>i.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&a.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:n$(e,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):Jr(n,"pattern",n$(e,a),r,a)}function n$(n,e){if(!e.applyRegexFlags||!n.flags)return n.source;let r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},a=r.i?n.source.toLowerCase():n.source,i="",s=!1,t=!1,o=!1;for(let l=0;l<a.length;l++){if(s){i+=a[l],s=!1;continue}if(r.i){if(t){if(a[l].match(/[a-z]/)){o?(i+=a[l],i+=`${a[l-2]}-${a[l]}`.toUpperCase(),o=!1):a[l+1]==="-"&&a[l+2]?.match(/[a-z]/)?(i+=a[l],o=!0):i+=`${a[l]}${a[l].toUpperCase()}`;continue}}else if(a[l].match(/[a-z]/)){i+=`[${a[l]}${a[l].toUpperCase()}]`;continue}}if(r.m){if(a[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(a[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&a[l]==="."){i+=t?`${a[l]}\r
`:`[${a[l]}\r
]`;continue}i+=a[l],a[l]==="\\"?s=!0:t&&a[l]==="]"?t=!1:!t&&a[l]==="["&&(t=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i}var _A,Ao,b0e,C4=Ve(()=>{jc();Ao={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(_A===void 0&&(_A=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_A),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};b0e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789")});function A4(n,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&n.keyType?._def.typeName===pt.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((a,i)=>({...a,[i]:Qt(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",i]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Qt(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(n.keyType?._def.typeName===pt.ZodString&&n.keyType._def.checks?.length){let{type:a,...i}=S4(n.keyType._def,e);return{...r,propertyNames:i}}else{if(n.keyType?._def.typeName===pt.ZodEnum)return{...r,propertyNames:{enum:n.keyType._def.values}};if(n.keyType?._def.typeName===pt.ZodBranded&&n.keyType._def.type._def.typeName===pt.ZodString&&n.keyType._def.type._def.checks?.length){let{type:a,...i}=x4(n.keyType._def,e);return{...r,propertyNames:i}}}return r}var E4=Ve(()=>{C0();tn();C4();w4()});function i$(n,e){if(e.mapStrategy==="record")return A4(n,e);let r=Qt(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},a=Qt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}var wA=Ve(()=>{tn();E4()});function s$(n){let e=n.values,a=Object.keys(n.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(a.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:a}}var SA=Ve(()=>{});function o$(){return{not:{}}}var CA=Ve(()=>{});function u$(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var AA=Ve(()=>{});function c$(n,e){if(e.target==="openApi3")return l$(n,e);let r=n.options instanceof Map?Array.from(n.options.values()):n.options;if(r.every(a=>a._def.typeName in U1&&(!a._def.checks||!a._def.checks.length))){let a=r.reduce((i,s)=>{let t=U1[s._def.typeName];return t&&!i.includes(t)?[...i,t]:i},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){let a=r.reduce((i,s)=>{let t=typeof s._def.value;switch(t){case"string":case"number":case"boolean":return[...i,t];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(a.length===r.length){let i=a.filter((s,t,o)=>o.indexOf(s)===t);return{type:i.length>1?i:i[0],enum:r.reduce((s,t)=>s.includes(t._def.value)?s:[...s,t._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,i)=>[...a,...i._def.values.filter(s=>!a.includes(s))],[])};return l$(n,e)}var U1,l$,P4=Ve(()=>{tn();U1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};l$=(n,e)=>{let r=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((a,i)=>Qt(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0}});function d$(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"?{type:U1[n.innerType._def.typeName],nullable:!0}:{type:[U1[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let a=Qt(n.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let r=Qt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}var EA=Ve(()=>{tn();P4()});function p$(n,e){let r={type:"number"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"int":r.type="integer",oA(r,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?Jr(r,"minimum",a.value,a.message,e):Jr(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),Jr(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?Jr(r,"maximum",a.value,a.message,e):Jr(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),Jr(r,"maximum",a.value,a.message,e));break;case"multipleOf":Jr(r,"multipleOf",a.value,a.message,e);break}return r}var PA=Ve(()=>{jc()});function f$(n,e){let r=e.target==="openAi",a={type:"object",properties:{}},i=[],s=n.shape();for(let o in s){let l=s[o];if(l===void 0||l._def===void 0)continue;let d=_0e(l);d&&r&&(l instanceof Oi&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),d=!1);let c=Qt(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});c!==void 0&&(a.properties[o]=c,d||i.push(o))}i.length&&(a.required=i);let t=y0e(n,e);return t!==void 0&&(a.additionalProperties=t),a}function y0e(n,e){if(n.catchall._def.typeName!=="ZodNever")return Qt(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function _0e(n){try{return n.isOptional()}catch{return!0}}var TA=Ve(()=>{C0();tn()});var h$,OA=Ve(()=>{tn();h$=(n,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Qt(n.innerType._def,e);let r=Qt(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}}});var m$,FA=Ve(()=>{tn();m$=(n,e)=>{if(e.pipeStrategy==="input")return Qt(n.in._def,e);if(e.pipeStrategy==="output")return Qt(n.out._def,e);let r=Qt(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),a=Qt(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(i=>i!==void 0)}}});function g$(n,e){return Qt(n.type._def,e)}var kA=Ve(()=>{tn()});function b$(n,e){let a={type:"array",uniqueItems:!0,items:Qt(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&Jr(a,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&Jr(a,"maxItems",n.maxSize.value,n.maxSize.message,e),a}var RA=Ve(()=>{jc();tn()});function v$(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((r,a)=>Qt(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:Qt(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((r,a)=>Qt(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}var IA=Ve(()=>{tn()});function y$(){return{not:{}}}var DA=Ve(()=>{});function _$(){return{}}var NA=Ve(()=>{});var x$,MA=Ve(()=>{tn();x$=(n,e)=>Qt(n.innerType._def,e)});var w$,jA=Ve(()=>{C0();uA();lA();cA();dA();w4();pA();hA();mA();gA();bA();vA();yA();wA();SA();CA();AA();EA();PA();TA();OA();FA();kA();E4();RA();C4();IA();DA();P4();NA();MA();w$=(n,e,r)=>{switch(e){case pt.ZodString:return S4(n,r);case pt.ZodNumber:return p$(n,r);case pt.ZodObject:return f$(n,r);case pt.ZodBigInt:return JU(n,r);case pt.ZodBoolean:return XU();case pt.ZodDate:return fA(n,r);case pt.ZodUndefined:return y$();case pt.ZodNull:return u$(r);case pt.ZodArray:return ZU(n,r);case pt.ZodUnion:case pt.ZodDiscriminatedUnion:return c$(n,r);case pt.ZodIntersection:return r$(n,r);case pt.ZodTuple:return v$(n,r);case pt.ZodRecord:return A4(n,r);case pt.ZodLiteral:return a$(n,r);case pt.ZodEnum:return t$(n);case pt.ZodNativeEnum:return s$(n);case pt.ZodNullable:return d$(n,r);case pt.ZodOptional:return h$(n,r);case pt.ZodMap:return i$(n,r);case pt.ZodSet:return b$(n,r);case pt.ZodLazy:return()=>n.getter()._def;case pt.ZodPromise:return g$(n,r);case pt.ZodNaN:case pt.ZodNever:return o$();case pt.ZodEffects:return e$(n,r);case pt.ZodAny:return KU();case pt.ZodUnknown:return _$();case pt.ZodDefault:return QU(n,r);case pt.ZodBranded:return x4(n,r);case pt.ZodReadonly:return x$(n,r);case pt.ZodCatch:return YU(n,r);case pt.ZodPipeline:return m$(n,r);case pt.ZodFunction:case pt.ZodVoid:case pt.ZodSymbol:return;default:return(a=>{})(e)}}});function Qt(n,e,r=!1){let a=e.seen.get(n);if(e.override){let o=e.override?.(n,e,a,r);if(o!==WU)return o}if(a&&!r){let o=x0e(a,e);if(o!==void 0)return o}let i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);let s=w$(n,n.typeName,e),t=typeof s=="function"?Qt(s(),e):s;if(t&&S0e(n,e,t),e.postProcess){let o=e.postProcess(t,n,e);return i.jsonSchema=t,o}return i.jsonSchema=t,t}var x0e,w0e,S0e,tn=Ve(()=>{_4();jA();x0e=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:w0e(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,a)=>e.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},w0e=(n,e)=>{let r=0;for(;r<n.length&&r<e.length&&n[r]===e[r];r++);return[(n.length-r).toString(),...e.slice(r)].join("/")},S0e=(n,e,r)=>(n.description&&(r.description=n.description,e.markdownDescription&&(r.markdownDescription=n.description)),r)});var S$=Ve(()=>{});var BA,LA=Ve(()=>{tn();sA();BA=(n,e)=>{let r=HU(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[d,c])=>({...l,[d]:Qt(c._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,s=Qt(n._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},t=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;t!==void 0&&(s.title=t);let o=i===void 0?a?{...s,[r.definitionPath]:a}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...a,[i]:s}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o}});var C$=Ve(()=>{_4();sA();jc();tn();S$();uA();lA();cA();dA();w4();pA();hA();mA();gA();bA();vA();yA();wA();SA();CA();AA();EA();PA();TA();OA();FA();kA();MA();E4();RA();C4();IA();DA();P4();NA();jA();LA();LA()});function qA(n){return n.replace(/[^a-zA-Z-_0-9]/g,"_")}function A0e(n){let e="";for(let[r,a]of Object.entries(n))e+=`	classDef ${r} ${a};
`;return e}function A$(n,e,r){let{firstNode:a,lastNode:i,nodeColors:s,withStyles:t=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=r??{},d=t?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(t){let S="default",V={[S]:"{0}({1})"};a!==void 0&&(V[a]="{0}([{1}]):::first"),i!==void 0&&(V[i]="{0}([{1}]):::last");for(let[U,z]of Object.entries(n)){let D=z.name.split(":").pop()??"",T=C0e.some(g=>D.startsWith(g)&&D.endsWith(g))?`<p>${D}</p>`:D;Object.keys(z.metadata??{}).length&&(T+=`<hr/><small><em>${Object.entries(z.metadata??{}).map(([g,m])=>`${g} = ${m}`).join(`
`)}</em></small>`);let R=(V[U]??V[S]).replace("{0}",qA(U)).replace("{1}",T);d+=`	${R}
`}}let c={};for(let S of e){let V=S.source.split(":"),U=S.target.split(":"),z=V.filter((D,k)=>D===U[k]).join(":");c[z]||(c[z]=[]),c[z].push(S)}let y=new Set;function u(S,V){let U=S.length===1&&S[0].source===S[0].target;if(V&&!U){let z=V.split(":").pop();if(y.has(z))throw new Error(`Found duplicate subgraph '${z}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);y.add(z),d+=`	subgraph ${z}
`}for(let z of S){let{source:D,target:k,data:T,conditional:R}=z,g="";if(T!==void 0){let m=T,v=m.split(" ");v.length>l&&(m=Array.from({length:Math.ceil(v.length/l)},(b,f)=>v.slice(f*l,(f+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),g=R?` -. &nbsp;${m}&nbsp; .-> `:` -- &nbsp;${m}&nbsp; --> `}else g=R?" -.-> ":" --> ";d+=`	${qA(D)}${g}${qA(k)};
`}for(let z in c)z.startsWith(`${V}:`)&&z!==V&&u(c[z],z);V&&!U&&(d+=`	end
`)}u(c[""]??[],"");for(let S in c)!S.includes(":")&&S!==""&&u(c[S],S);return t&&(d+=A0e(s??{})),d}async function E$(n,e){let{backgroundColor:r="white"}=e??{},a=btoa(n);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let i=`https://mermaid.ink/img/${a}?bgColor=${r}`,s=await fetch(i);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}var C0e,P$=Ve(()=>{C0e=["*","_","`"]});function E0e(n,e){if(n!==void 0&&!ti(n))return n;if(q1(e))try{let r=e.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return e.getName()}else return e.name??"UnknownSchema"}function P0e(n){return q1(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:{...BA(n.data.schema),title:n.data.name}}}function T$(n,e=[]){let r=new Set(n.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),a=[];for(let i of Object.values(n.nodes))!e.includes(i.id)&&!r.has(i.id)&&a.push(i);return a.length===1?a[0]:void 0}function O$(n,e=[]){let r=new Set(n.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),a=[];for(let i of Object.values(n.nodes))!e.includes(i.id)&&!r.has(i.id)&&a.push(i);return a.length===1?a[0]:void 0}var $1,F$=Ve(()=>{C$();Xa();iA();P$();$1=class n{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((r,a)=>{e[r.id]=ti(r.id)?a:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...P0e(r)})),edges:this.edges.map(r=>{let a={source:e[r.source],target:e[r.target]};return typeof r.data<"u"&&(a.data=r.data),typeof r.conditional<"u"&&(a.conditional=r.conditional),a})}}addNode(e,r,a){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);let i=r??Ia(),s={id:i,data:e,name:E0e(r,e),metadata:a};return this.nodes[i]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,a,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);let s={source:e.id,target:r.id,data:a,conditional:i};return this.edges.push(s),s}firstNode(){return T$(this)}lastNode(){return O$(this)}extend(e,r=""){let a=r;Object.values(e.nodes).map(d=>d.id).every(ti)&&(a="");let s=d=>a?`${a}:${d}`:d;Object.entries(e.nodes).forEach(([d,c])=>{this.nodes[s(d)]={...c,id:s(d)}});let t=e.edges.map(d=>({...d,source:s(d.source),target:s(d.target)}));this.edges=[...this.edges,...t];let o=e.firstNode(),l=e.lastNode();return[o?{id:s(o.id),data:o.data}:void 0,l?{id:s(l.id),data:l.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&T$(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&O$(this,[e.id])&&this.removeNode(e)}reid(){let e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),r=new Map;Object.values(e).forEach(i=>{r.set(i,(r.get(i)||0)+1)});let a=i=>{let s=e[i];return ti(i)&&r.get(s)===1?s:i};return new n({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,s])=>[a(i),{...s,id:a(i)}])),edges:this.edges.map(i=>({...i,source:a(i.source),target:a(i.target)}))})}drawMermaid(e){let{withStyles:r,curveStyle:a,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},t=this.reid(),o=t.firstNode(),l=t.lastNode();return A$(t.nodes,t.edges,{firstNode:o?.id,lastNode:l?.id,withStyles:r,curveStyle:a,nodeColors:i,wrapLabelNWords:s})}async drawMermaidPng(e){let r=this.drawMermaid(e);return E$(r,{backgroundColor:e?.backgroundColor})}}});function k$(n){let e=new TextEncoder,r=new ReadableStream({async start(a){for await(let i of n)a.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));a.enqueue(e.encode(`event: end

`)),a.close()}});return Kn.fromReadableStream(r)}var R$=Ve(()=>{N1()});function UA(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}function T4(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}function*$A(n,e){for(;;){let{value:r,done:a}=as.runWithConfig(kl(n),e.next.bind(e),!0);if(a)break;yield r}}async function*O4(n,e){let r=e[Symbol.asyncIterator]();for(;;){let{value:a,done:i}=await as.runWithConfig(kl(n),r.next.bind(e),!0);if(i)break;yield a}}var I$,D$=Ve(()=>{D1();h4();I$=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function"});function vn(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}function T0e(n){if(a4(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}function Ip(n){if(typeof n=="function")return new z1({func:n});if(rn.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){let e={};for(let[r,a]of Object.entries(n))e[r]=Ip(a);return new V1({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}function O0e(n,e){let r=e.name??n.getName(),a=e.description??e.schema?.description;return e.schema.constructor===Dc.ZodString?new R4({name:r,description:a,schema:Dc.object({input:Dc.string()}).transform(i=>i.input),bound:n}):new R4({name:r,description:a,schema:e.schema,bound:n})}var VA,rn,Dp,zA,F4,k4,V1,WA,z1,GA,HA,KA,R4,W1=Ve(()=>{C0();VA=gn(Ed(),1);Xa();BC();jU();qU();b1();N1();aA();h4();$U();VU();iA();D1();F$();R$();D$();gC();rn=class extends xo{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){let r=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${r}${e}`:r}bind(e){return new Dp({bound:this,kwargs:e,config:{}})}map(){return new zA({bound:this})}withRetry(e){return new F4({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new Dp({bound:this,config:e,kwargs:{}})}withFallbacks(e){let r=Array.isArray(e)?e:e.fallbacks;return new GA({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(pa);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let a=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:r},(i,s)=>pa(s===0?e:a))}return Array.from({length:r},()=>pa(e))}async batch(e,r,a){let i=this._getOptionsList(r??{},e.length),s=i[0]?.maxConcurrency??a?.maxConcurrency,t=new v4({maxConcurrency:s,onFailedAttempt:l=>{throw l}}),o=e.map((l,d)=>t.call(async()=>{try{return await this.invoke(l,i[d])}catch(c){if(a?.returnExceptions)return c;throw c}}));return Promise.all(o)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){let a=pa(r),i=new Rl({generator:this._streamIterator(e,a),config:a});return await i.setup,Kn.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=pa(e):r=pa({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let a={...e};return delete a.callbacks,delete a.tags,delete a.metadata,delete a.runName,delete a.configurable,delete a.recursionLimit,delete a.maxConcurrency,delete a.runId,delete a.timeout,delete a.signal,[r,a]}async _callWithConfig(e,r,a){let i=pa(a),t=await(await Ms(i))?.handleChainStart(this.toJSON(),vn(r,"input"),i.runId,i?.runType,void 0,void 0,i?.runName??this.getName());delete i.runId;let o;try{let l=e.call(this,r,i,t);o=await xu(l,a?.signal)}catch(l){throw await t?.handleChainError(l),l}return await t?.handleChainEnd(vn(o,"output")),o}async _batchWithConfig(e,r,a,i){let s=this._getOptionsList(a??{},r.length),t=await Promise.all(s.map(Ms)),o=await Promise.all(t.map(async(d,c)=>{let y=await d?.handleChainStart(this.toJSON(),vn(r[c],"input"),s[c].runId,s[c].runType,void 0,void 0,s[c].runName??this.getName());return delete s[c].runId,y})),l;try{let d=e.call(this,r,s,o,i);l=await xu(d,s?.[0]?.signal)}catch(d){throw await Promise.all(o.map(c=>c?.handleChainError(d))),d}return await Promise.all(o.map(d=>d?.handleChainEnd(vn(l,"output")))),l}async*_transformStreamWithConfig(e,r,a){let i,s=!0,t,o=!0,l=pa(a),d=await Ms(l);async function*c(){for await(let u of e){if(s)if(i===void 0)i=u;else try{i=wu(i,u)}catch{i=void 0,s=!1}yield u}}let y;try{let u=await IU(r.bind(this),c(),async()=>d?.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),a?.signal,l);delete l.runId,y=u.setup;let S=y?.handlers.find(LU),V=u.output;S!==void 0&&y!==void 0&&(V=S.tapOutputIterable(y.runId,V));let U=y?.handlers.find(MU);U!==void 0&&y!==void 0&&(V=U.tapOutputIterable(y.runId,V));for await(let z of V)if(yield z,o)if(t===void 0)t=z;else try{t=wu(t,z)}catch{t=void 0,o=!1}}catch(u){throw await y?.handleChainError(u,void 0,void 0,void 0,{inputs:vn(i,"input")}),u}await y?.handleChainEnd(t??{},void 0,void 0,void 0,{inputs:vn(i,"input")})}getGraph(e){let r=new $1,a=r.addNode({name:`${this.getName()}Input`,schema:Dc.any()}),i=r.addNode(this),s=r.addNode({name:`${this.getName()}Output`,schema:Dc.any()});return r.addEdge(a,i),r.addEdge(i,s),r}pipe(e){return new k4({first:this,last:Ip(e)})}pick(e){return this.pipe(new KA(e))}assign(e){return this.pipe(new HA(new V1({steps:e})))}async*transform(e,r){let a;for await(let i of e)a===void 0?a=i:a=wu(a,i);yield*this._streamIterator(a,pa(r))}async*streamLog(e,r,a){let i=new j1({...a,autoClose:!1,_schemaFormat:"original"}),s=pa(r);yield*this._streamLog(e,i,s)}async*_streamLog(e,r,a){let{callbacks:i}=a;if(i===void 0)a.callbacks=[r];else if(Array.isArray(i))a.callbacks=i.concat([r]);else{let l=i.copy();l.addHandler(r,!0),a.callbacks=l}let s=this.stream(e,a);async function t(){try{let l=await s;for await(let d of l){let c=new Co({ops:[{op:"add",path:"/streamed_output/-",value:d}]});await r.writer.write(c)}}finally{await r.writer.close()}}let o=t();try{for await(let l of r)yield l}finally{await o}}streamEvents(e,r,a){let i;if(r.version==="v1")i=this._streamEventsV1(e,r,a);else if(r.version==="v2")i=this._streamEventsV2(e,r,a);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?k$(i):Kn.fromAsyncGenerator(i)}async*_streamEventsV2(e,r,a){let i=new g4({...a,autoClose:!1}),s=pa(r),t=s.runId??Ia();s.runId=t;let o=s.callbacks;if(o===void 0)s.callbacks=[i];else if(Array.isArray(o))s.callbacks=o.concat(i);else{let V=o.copy();V.addHandler(i,!0),s.callbacks=V}let l=new AbortController,d=this;async function c(){try{let V;r?.signal?"any"in AbortSignal?V=AbortSignal.any([l.signal,r.signal]):(V=r.signal,r.signal.addEventListener("abort",()=>{l.abort()},{once:!0})):V=l.signal;let U=await d.stream(e,{...s,signal:V}),z=i.tapOutputIterable(t,U);for await(let D of z)if(l.signal.aborted)break}finally{await i.finish()}}let y=c(),u=!1,S;try{for await(let V of i){if(!u){V.data.input=e,u=!0,S=V.run_id,yield V;continue}V.run_id===S&&V.event.endsWith("_end")&&V.data?.input&&delete V.data.input,yield V}}finally{l.abort(),await y}}async*_streamEventsV1(e,r,a){let i,s=!1,t=pa(r),o=t.tags??[],l=t.metadata??{},d=t.runName??this.getName(),c=new j1({...a,autoClose:!1,_schemaFormat:"streaming_events"}),y=new y4({...a}),u=this._streamLog(e,c,t);for await(let V of u){if(i?i=i.concat(V):i=M1.fromRunLogPatch(V),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;let k={...i.state},T={run_id:k.id,event:`on_${k.type}_start`,name:d,tags:o,metadata:l,data:{input:e}};y.includeEvent(T,k.type)&&(yield T)}let U=V.ops.filter(k=>k.path.startsWith("/logs/")).map(k=>k.path.split("/")[2]),z=[...new Set(U)];for(let k of z){let T,R={},g=i.state.logs[k];if(g.end_time===void 0?g.streamed_output.length>0?T="stream":T="start":T="end",T==="start")g.inputs!==void 0&&(R.input=g.inputs);else if(T==="end")g.inputs!==void 0&&(R.input=g.inputs),R.output=g.final_output;else if(T==="stream"){let m=g.streamed_output.length;if(m!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${m} instead. Encountered in: "${g.name}"`);R={chunk:g.streamed_output[0]},g.streamed_output=[]}yield{event:`on_${g.type}_${T}`,name:g.name,run_id:g.id,tags:g.tags,metadata:g.metadata,data:R}}let{state:D}=i;if(D.streamed_output.length>0){let k=D.streamed_output.length;if(k!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${k} instead. Encountered in: "${D.name}"`);let T={chunk:D.streamed_output[0]};D.streamed_output=[];let R={event:`on_${D.type}_stream`,run_id:D.id,tags:o,metadata:l,name:d,data:T};y.includeEvent(R,D.type)&&(yield R)}}let S=i?.state;if(S!==void 0){let V={event:`on_${S.type}_end`,name:d,run_id:S.id,tags:o,metadata:l,data:{output:S.final_output}};y.includeEvent(V,S.type)&&(yield V)}}static isRunnable(e){return q1(e)}withListeners({onStart:e,onEnd:r,onError:a}){return new Dp({bound:this,config:{},configFactories:[i=>({callbacks:[new L1({config:i,onStart:e,onEnd:r,onError:a})]})]})}asTool(e){return O0e(this,e)}},Dp=class n extends rn{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let r=rA(this.config,...e);return rA(r,...this.configFactories?await Promise.all(this.configFactories.map(async a=>await a(r))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new F4({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,r){return this.bound.invoke(e,await this._mergeConfig(pa(r),this.kwargs))}async batch(e,r,a){let i=Array.isArray(r)?await Promise.all(r.map(async s=>this._mergeConfig(pa(s),this.kwargs))):await this._mergeConfig(pa(r),this.kwargs);return this.bound.batch(e,i,a)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,await this._mergeConfig(pa(r),this.kwargs))}async stream(e,r){return this.bound.stream(e,await this._mergeConfig(pa(r),this.kwargs))}async*transform(e,r){yield*this.bound.transform(e,await this._mergeConfig(pa(r),this.kwargs))}streamEvents(e,r,a){let i=this,s=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(pa(r),i.kwargs),version:r.version},a)};return Kn.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&rn.isRunnable(e.bound)}withListeners({onStart:e,onEnd:r,onError:a}){return new n({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new L1({config:i,onStart:e,onEnd:r,onError:a})]})]})}},zA=class n extends rn{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new n({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _invoke(e,r,a){return this.bound.batch(e,Dn(r,{callbacks:a?.getChild()}))}withListeners({onStart:e,onEnd:r,onError:a}){return new n({bound:this.bound.withListeners({onStart:e,onEnd:r,onError:a})})}},F4=class extends Dp{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,r,a){let i=e>1?`retry:attempt:${e}`:void 0;return Dn(r,{callbacks:a?.getChild(i)})}async _invoke(e,r,a){return(0,VA.default)(i=>super.invoke(e,this._patchConfigForRetry(i,r,a)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,a,i){let s={};try{await(0,VA.default)(async t=>{let o=e.map((u,S)=>S).filter(u=>s[u.toString()]===void 0||s[u.toString()]instanceof Error),l=o.map(u=>e[u]),d=o.map(u=>this._patchConfigForRetry(t,r?.[u],a?.[u])),c=await super.batch(l,d,{...i,returnExceptions:!0}),y;for(let u=0;u<c.length;u+=1){let S=c[u],V=o[u];S instanceof Error&&y===void 0&&(y=S,y.input=l[u]),s[V.toString()]=S}if(y)throw y;return c},{onFailedAttempt:t=>this.onFailedAttempt(t,t.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(t){if(i?.returnExceptions!==!0)throw t}return Object.keys(s).sort((t,o)=>parseInt(t,10)-parseInt(o,10)).map(t=>s[parseInt(t,10)])}async batch(e,r,a){return this._batchWithConfig(this._batch.bind(this),e,r,a)}},k4=class n extends rn{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){let a=pa(r),s=await(await Ms(a))?.handleChainStart(this.toJSON(),vn(e,"input"),a.runId,void 0,void 0,void 0,a?.runName);delete a.runId;let t=e,o;try{let l=[this.first,...this.middle];for(let d=0;d<l.length;d+=1){let y=l[d].invoke(t,Dn(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`)}));t=await xu(y,r?.signal)}if(r?.signal?.aborted)throw new Error("Aborted");o=await this.last.invoke(t,Dn(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await s?.handleChainError(l),l}return await s?.handleChainEnd(vn(o,"output")),o}async batch(e,r,a){let i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(Ms)),t=await Promise.all(s.map(async(l,d)=>{let c=await l?.handleChainStart(this.toJSON(),vn(e[d],"input"),i[d].runId,void 0,void 0,void 0,i[d].runName);return delete i[d].runId,c})),o=e;try{for(let l=0;l<this.steps.length;l+=1){let c=this.steps[l].batch(o,t.map((y,u)=>{let S=y?.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return Dn(i[u],{callbacks:S})}),a);o=await xu(c,i[0]?.signal)}}catch(l){throw await Promise.all(t.map(d=>d?.handleChainError(l))),l}return await Promise.all(t.map(l=>l?.handleChainEnd(vn(o,"output")))),o}async*_streamIterator(e,r){let a=await Ms(r),{runId:i,...s}=r??{},t=await a?.handleChainStart(this.toJSON(),vn(e,"input"),i,void 0,void 0,void 0,s?.runName),o=[this.first,...this.middle,this.last],l=!0,d;async function*c(){yield e}try{let y=o[0].transform(c(),Dn(s,{callbacks:t?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let u=1;u<o.length;u+=1)y=await o[u].transform(y,Dn(s,{callbacks:t?.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`)}));for await(let u of y)if(r?.signal?.throwIfAborted(),yield u,l)if(d===void 0)d=u;else try{d=wu(d,u)}catch{d=void 0,l=!1}}catch(y){throw await t?.handleChainError(y),y}await t?.handleChainEnd(vn(d,"output"))}getGraph(e){let r=new $1,a=null;return this.steps.forEach((i,s)=>{let t=i.getGraph(e);s!==0&&t.trimFirstNode(),s!==this.steps.length-1&&t.trimLastNode(),r.extend(t);let o=t.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);a&&r.addEdge(a,o),a=t.lastNode()}),r}pipe(e){return n.isRunnableSequence(e)?new n({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new n({first:this.first,middle:[...this.middle,this.last],last:Ip(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&rn.isRunnable(e)}static from([e,...r],a){let i={};return typeof a=="string"?i.name=a:a!==void 0&&(i=a),new n({...i,first:Ip(e),middle:r.slice(0,-1).map(Ip),last:Ip(r[r.length-1])})}},V1=class n extends rn{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,a]of Object.entries(e.steps))this.steps[r]=Ip(a)}static from(e){return new n({steps:e})}async invoke(e,r){let a=pa(r),s=await(await Ms(a))?.handleChainStart(this.toJSON(),{input:e},a.runId,void 0,void 0,void 0,a?.runName);delete a.runId;let t={};try{let o=Object.entries(this.steps).map(async([l,d])=>{t[l]=await d.invoke(e,Dn(a,{callbacks:s?.getChild(`map:key:${l}`)}))});await xu(Promise.all(o),r?.signal)}catch(o){throw await s?.handleChainError(o),o}return await s?.handleChainEnd(t),t}async*_transform(e,r,a){let i={...this.steps},s=nA(e,Object.keys(i).length),t=new Map(Object.entries(i).map(([o,l],d)=>{let c=l.transform(s[d],Dn(a,{callbacks:r?.getChild(`map:key:${o}`)}));return[o,c.next().then(y=>({key:o,gen:c,result:y}))]}));for(;t.size;){let o=Promise.race(t.values()),{key:l,result:d,gen:c}=await xu(o,a?.signal);t.delete(l),d.done||(yield{[l]:d.value},t.set(l,c.next().then(y=>({key:l,gen:c,result:y}))))}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=pa(r),s=new Rl({generator:this.transform(a(),i),config:i});return await s.setup,Kn.fromAsyncGenerator(s)}},WA=class n extends rn{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!a4(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,r){let[a]=this._getOptionsList(r??{},1),i=await Ms(a),s=this.func(Dn(a,{callbacks:i}),e);return xu(s,a?.signal)}async*_streamIterator(e,r){let[a]=this._getOptionsList(r??{},1),i=await this.invoke(e,r);if(T4(i)){for await(let s of i)a?.signal?.throwIfAborted(),yield s;return}if(I$(i)){for(;;){a?.signal?.throwIfAborted();let s=i.next();if(s.done)break;yield s.value}return}yield i}static from(e){return new n({func:e})}};z1=class n extends rn{static lc_name(){return"RunnableLambda"}constructor(e){if(a4(e.func))return WA.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),T0e(e.func),this.func=e.func}static from(e){return new n({func:e})}async _invoke(e,r,a){return new Promise((i,s)=>{let t=Dn(r,{callbacks:a?.getChild(),recursionLimit:(r?.recursionLimit??f4)-1});as.runWithConfig(kl(t),async()=>{try{let o=await this.func(e,{...t});if(o&&rn.isRunnable(o)){if(r?.recursionLimit===0)throw new Error("Recursion limit reached.");o=await o.invoke(e,{...t,recursionLimit:(t.recursionLimit??f4)-1})}else if(T4(o)){let l;for await(let d of O4(t,o))if(r?.signal?.throwIfAborted(),l===void 0)l=d;else try{l=wu(l,d)}catch{l=d}o=l}else if(UA(o)){let l;for(let d of $A(t,o))if(r?.signal?.throwIfAborted(),l===void 0)l=d;else try{l=wu(l,d)}catch{l=d}o=l}i(o)}catch(o){s(o)}})})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async*_transform(e,r,a){let i;for await(let o of e)if(i===void 0)i=o;else try{i=wu(i,o)}catch{i=o}let s=Dn(a,{callbacks:r?.getChild(),recursionLimit:(a?.recursionLimit??f4)-1}),t=await new Promise((o,l)=>{as.runWithConfig(kl(s),async()=>{try{let d=await this.func(i,{...s,config:s});o(d)}catch(d){l(d)}})});if(t&&rn.isRunnable(t)){if(a?.recursionLimit===0)throw new Error("Recursion limit reached.");let o=await t.stream(i,s);for await(let l of o)yield l}else if(T4(t))for await(let o of O4(s,t))a?.signal?.throwIfAborted(),yield o;else if(UA(t))for(let o of $A(s,t))a?.signal?.throwIfAborted(),yield o;else yield t}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=pa(r),s=new Rl({generator:this.transform(a(),i),config:i});return await s.setup,Kn.fromAsyncGenerator(s)}},GA=class extends rn{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,r){let a=pa(r),i=await Ms(a),{runId:s,...t}=a,o=await i?.handleChainStart(this.toJSON(),vn(e,"input"),s,void 0,void 0,void 0,t?.runName),l=Dn(t,{callbacks:o?.getChild()});return await as.runWithConfig(l,async()=>{let c;for(let y of this.runnables()){a?.signal?.throwIfAborted();try{let u=await y.invoke(e,l);return await o?.handleChainEnd(vn(u,"output")),u}catch(u){c===void 0&&(c=u)}}throw c===void 0?new Error("No error stored at end of fallback."):(await o?.handleChainError(c),c)})}async*_streamIterator(e,r){let a=pa(r),i=await Ms(a),{runId:s,...t}=a,o=await i?.handleChainStart(this.toJSON(),vn(e,"input"),s,void 0,void 0,void 0,t?.runName),l,d;for(let y of this.runnables()){a?.signal?.throwIfAborted();let u=Dn(t,{callbacks:o?.getChild()});try{let S=await y.stream(e,u);d=O4(u,S);break}catch(S){l===void 0&&(l=S)}}if(d===void 0){let y=l??new Error("No error stored at end of fallback.");throw await o?.handleChainError(y),y}let c;try{for await(let y of d){yield y;try{c=c===void 0?c:wu(c,y)}catch{c=void 0}}}catch(y){throw await o?.handleChainError(y),y}await o?.handleChainEnd(vn(c,"output"))}async batch(e,r,a){if(a?.returnExceptions)throw new Error("Not implemented.");let i=this._getOptionsList(r??{},e.length),s=await Promise.all(i.map(l=>Ms(l))),t=await Promise.all(s.map(async(l,d)=>{let c=await l?.handleChainStart(this.toJSON(),vn(e[d],"input"),i[d].runId,void 0,void 0,void 0,i[d].runName);return delete i[d].runId,c})),o;for(let l of this.runnables()){i[0].signal?.throwIfAborted();try{let d=await l.batch(e,t.map((c,y)=>Dn(i[y],{callbacks:c?.getChild()})),a);return await Promise.all(t.map((c,y)=>c?.handleChainEnd(vn(d[y],"output")))),d}catch(d){o===void 0&&(o=d)}}throw o?(await Promise.all(t.map(l=>l?.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};HA=class extends rn{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof V1&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,r){let a=await this.mapper.invoke(e,r);return{...e,...a}}async*_transform(e,r,a){let i=this.mapper.getStepsKeys(),[s,t]=nA(e),o=this.mapper.transform(t,Dn(a,{callbacks:r?.getChild()})),l=o.next();for await(let d of s){if(typeof d!="object"||Array.isArray(d))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof d}`);let c=Object.fromEntries(Object.entries(d).filter(([y])=>!i.includes(y)));Object.keys(c).length>0&&(yield c)}yield(await l).value;for await(let d of o)yield d}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=pa(r),s=new Rl({generator:this.transform(a(),i),config:i});return await s.setup,Kn.fromAsyncGenerator(s)}},KA=class extends rn{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let r=this.keys.map(a=>[a,e[a]]).filter(a=>a[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(let r of e){let a=await this._pick(r);a!==void 0&&(yield a)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*a(){yield e}let i=pa(r),s=new Rl({generator:this.transform(a(),i),config:i});return await s.setup,Kn.fromAsyncGenerator(s)}},R4=class extends Dp{constructor(e){let r=k4.from([z1.from(async a=>{let i;if(mC(a))try{i=await this.schema.parseAsync(a.args)}catch{throw new O6("Received tool input did not match expected schema",JSON.stringify(a.args))}else i=a;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}});function JA(n){return typeof n=="function"}function k0e(n){return R0(n)?"array":typeof n}function ZA(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function N$(n,e){return n!=null&&typeof n=="object"&&e in n}function R0e(n,e){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(e)}function D0e(n,e){return I0e.call(n,e)}function M0e(n){return!D0e(N0e,n)}function B0e(n){return String(n).replace(/[&<>"'`=\/]/g,function(r){return j0e[r]})}function V0e(n,e){if(!n)return[];var r=!1,a=[],i=[],s=[],t=!1,o=!1,l="",d=0;function c(){if(t&&!o)for(;s.length;)delete i[s.pop()];else s=[];t=!1,o=!1}var y,u,S;function V(b){if(typeof b=="string"&&(b=b.split(q0e,2)),!R0(b)||b.length!==2)throw new Error("Invalid tags: "+b);y=new RegExp(ZA(b[0])+"\\s*"),u=new RegExp("\\s*"+ZA(b[1])),S=new RegExp("\\s*"+ZA("}"+b[1]))}V(e||js.tags);for(var U=new H1(n),z,D,k,T,R,g;!U.eos();){if(z=U.pos,k=U.scanUntil(y),k)for(var m=0,v=k.length;m<v;++m)T=k.charAt(m),M0e(T)?(s.push(i.length),l+=T):(o=!0,r=!0,l+=" "),i.push(["text",T,z,z+1]),z+=1,T===`
`&&(c(),l="",d=0,r=!1);if(!U.scan(y))break;if(t=!0,D=U.scan($0e)||"name",U.scan(L0e),D==="="?(k=U.scanUntil(M$),U.scan(M$),U.scanUntil(u)):D==="{"?(k=U.scanUntil(S),U.scan(U0e),U.scanUntil(u),D="&"):k=U.scanUntil(u),!U.scan(u))throw new Error("Unclosed tag at "+U.pos);if(D==">"?R=[D,k,z,U.pos,l,d,r]:R=[D,k,z,U.pos],d++,i.push(R),D==="#"||D==="^")a.push(R);else if(D==="/"){if(g=a.pop(),!g)throw new Error('Unopened section "'+k+'" at '+z);if(g[1]!==k)throw new Error('Unclosed section "'+g[1]+'" at '+z)}else D==="name"||D==="{"||D==="&"?o=!0:D==="="&&V(k)}if(c(),g=a.pop(),g)throw new Error('Unclosed section "'+g[1]+'" at '+U.pos);return W0e(z0e(i))}function z0e(n){for(var e=[],r,a,i=0,s=n.length;i<s;++i)r=n[i],r&&(r[0]==="text"&&a&&a[0]==="text"?(a[1]+=r[1],a[3]=r[3]):(e.push(r),a=r));return e}function W0e(n){for(var e=[],r=e,a=[],i,s,t=0,o=n.length;t<o;++t)switch(i=n[t],i[0]){case"#":case"^":r.push(i),a.push(i),r=i[4]=[];break;case"/":s=a.pop(),s[5]=i[2],r=a.length>0?a[a.length-1][4]:e;break;default:r.push(i)}return e}function H1(n){this.string=n,this.tail=n,this.pos=0}function k0(n,e){this.view=n,this.cache={".":this.view},this.parent=e}function pi(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}var F0e,R0,I0e,N0e,j0e,L0e,q0e,M$,U0e,$0e,js,G1,I4,j$=Ve(()=>{F0e=Object.prototype.toString,R0=Array.isArray||function(e){return F0e.call(e)==="[object Array]"};I0e=RegExp.prototype.test;N0e=/\S/;j0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};L0e=/\s*/,q0e=/\s+/,M$=/\s*=/,U0e=/\s*\}/,$0e=/#|\^|\/|>|\{|&|=|!/;H1.prototype.eos=function(){return this.tail===""};H1.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var a=r[0];return this.tail=this.tail.substring(a.length),this.pos+=a.length,a};H1.prototype.scanUntil=function(e){var r=this.tail.search(e),a;switch(r){case-1:a=this.tail,this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=a.length,a};k0.prototype.push=function(e){return new k0(e,this)};k0.prototype.lookup=function(e){var r=this.cache,a;if(r.hasOwnProperty(e))a=r[e];else{for(var i=this,s,t,o,l=!1;i;){if(e.indexOf(".")>0)for(s=i.view,t=e.split("."),o=0;s!=null&&o<t.length;)o===t.length-1&&(l=N$(s,t[o])||R0e(s,t[o])),s=s[t[o++]];else s=i.view[e],l=N$(i.view,e);if(l){a=s;break}i=i.parent}r[e]=a}return JA(a)&&(a=a.call(this.view)),a};pi.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};pi.prototype.parse=function(e,r){var a=this.templateCache,i=e+":"+(r||js.tags).join(":"),s=typeof a<"u",t=s?a.get(i):void 0;return t==null&&(t=V0e(e,r),s&&a.set(i,t)),t};pi.prototype.render=function(e,r,a,i){var s=this.getConfigTags(i),t=this.parse(e,s),o=r instanceof k0?r:new k0(r,void 0);return this.renderTokens(t,o,a,e,i)};pi.prototype.renderTokens=function(e,r,a,i,s){for(var t="",o,l,d,c=0,y=e.length;c<y;++c)d=void 0,o=e[c],l=o[0],l==="#"?d=this.renderSection(o,r,a,i,s):l==="^"?d=this.renderInverted(o,r,a,i,s):l===">"?d=this.renderPartial(o,r,a,s):l==="&"?d=this.unescapedValue(o,r):l==="name"?d=this.escapedValue(o,r,s):l==="text"&&(d=this.rawValue(o)),d!==void 0&&(t+=d);return t};pi.prototype.renderSection=function(e,r,a,i,s){var t=this,o="",l=r.lookup(e[1]);function d(u){return t.render(u,r,a,s)}if(l){if(R0(l))for(var c=0,y=l.length;c<y;++c)o+=this.renderTokens(e[4],r.push(l[c]),a,i,s);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],r.push(l),a,i,s);else if(JA(l)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(r.view,i.slice(e[3],e[5]),d),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],r,a,i,s);return o}};pi.prototype.renderInverted=function(e,r,a,i,s){var t=r.lookup(e[1]);if(!t||R0(t)&&t.length===0)return this.renderTokens(e[4],r,a,i,s)};pi.prototype.indentPartial=function(e,r,a){for(var i=r.replace(/[^ \t]/g,""),s=e.split(`
`),t=0;t<s.length;t++)s[t].length&&(t>0||!a)&&(s[t]=i+s[t]);return s.join(`
`)};pi.prototype.renderPartial=function(e,r,a,i){if(a){var s=this.getConfigTags(i),t=JA(a)?a(e[1]):a[e[1]];if(t!=null){var o=e[6],l=e[5],d=e[4],c=t;l==0&&d&&(c=this.indentPartial(t,d,o));var y=this.parse(c,s);return this.renderTokens(y,r,a,c,i)}}};pi.prototype.unescapedValue=function(e,r){var a=r.lookup(e[1]);if(a!=null)return a};pi.prototype.escapedValue=function(e,r,a){var i=this.getConfigEscape(a)||js.escape,s=r.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===js.escape?String(s):i(s)};pi.prototype.rawValue=function(e){return e[1]};pi.prototype.getConfigTags=function(e){return R0(e)?e:e&&typeof e=="object"?e.tags:void 0};pi.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!R0(e))return e.escape};js={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(n){G1.templateCache=n},get templateCache(){return G1.templateCache}},G1=new pi;js.clearCache=function(){return G1.clearCache()};js.parse=function(e,r){return G1.parse(e,r)};js.render=function(e,r,a,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+k0e(e)+'" was given as the first argument for mustache#render(template, view, partials)');return G1.render(e,r,a,i)};js.escape=B0e;js.Scanner=H1;js.Context=k0;js.Writer=pi;I4=js});function B$(){I4.escape=n=>n}var YA,G0e,L$,H0e,K0e,XA,Z0e,Po,QA,I0,D0=Ve(()=>{j$();T6();YA=n=>{let e=n.split(""),r=[],a=(s,t)=>{for(let o=t;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let s=a("}",i);if(s<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let s=a("{}",i),t=(s<0?e.slice(i):e.slice(i,s)).join("");r.push({type:"literal",text:t}),i=s<0?e.length:s}}return r},G0e=n=>n.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),L$=n=>{B$();let e=I4.parse(n);return G0e(e)},H0e=(n,e)=>YA(n).reduce((r,a)=>{if(a.type==="variable"){if(a.name in e){let i=typeof e[a.name]=="string"?e[a.name]:JSON.stringify(e[a.name]);return r+i}throw new Error(`(f-string) Missing value for input ${a.name}`)}return r+a.text},""),K0e=(n,e)=>(B$(),I4.render(n,e)),XA={"f-string":H0e,mustache:K0e},Z0e={"f-string":YA,mustache:L$},Po=(n,e,r)=>{try{return XA[e](n,r)}catch(a){throw P6(a,"INVALID_PROMPT_INPUT")}},QA=(n,e)=>Z0e[e](n),I0=(n,e,r)=>{if(!(e in XA)){let a=Object.keys(XA);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${a}`)}try{let a=r.reduce((i,s)=>(i[s]="foo",i),{});Array.isArray(n)?n.forEach(i=>{if(i.type==="text")Po(i.text,e,a);else if(i.type==="image_url")if(typeof i.image_url=="string")Po(i.image_url,e,a);else{let s=i.image_url.url;Po(s,e,a)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Po(n,e,a)}catch(a){throw new Error(`Invalid prompt schema: ${a.message}`)}}});var eE=Ve(()=>{wo()});var q$=Ve(()=>{W1();m0();wo();F6();k6();v1();eE();R6();y1();_1()});var U$=Ve(()=>{m0();wo();F6();k6();v1();R6();_1();q$();eE();hC();y1()});var $$=Ve(()=>{j6();D4();D0()});var V$=Ve(()=>{W1();D0()});var N4,z$=Ve(()=>{U$();j6();W1();M4();D4();jp();$$();D0();T6();V$();N4=class extends Np{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let r=await this.formatMessages(e);return new M6(r)}}});var aE={};Am(aE,{FewShotChatMessagePromptTemplate:()=>rE,FewShotPromptTemplate:()=>tE});var tE,rE,nE=Ve(()=>{M4();D0();jp();z$();tE=class n extends Mp{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),I0(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}async format(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r),i=await Promise.all(a.map(t=>this.examplePrompt.format(t))),s=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return Po(s,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let a=await N0.deserialize(r),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new n({inputVariables:e.input_variables,examplePrompt:a,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}},rE=class n extends N4{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??`

`,this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),I0(this.prefix+this.suffix,this.templateFormat,r)}}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r);a=a.map(s=>{let t={};return this.examplePrompt.inputVariables.forEach(o=>{t[o]=s[o]}),t});let i=[];for(let s of a){let t=await this.examplePrompt.formatMessages(s);i.push(...t)}return i}async format(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r),s=(await Promise.all(a.map(o=>this.examplePrompt.formatMessages(o)))).flat().map(o=>o.content),t=[this.prefix,...s,this.suffix].join(this.exampleSeparator);return Po(t,this.templateFormat,r)}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}}});var Np,D4=Ve(()=>{W1();Np=class extends rn{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let r=this.partialVariables??{},a={};for(let[s,t]of Object.entries(r))typeof t=="string"?a[s]=t:a[s]=await t();return{...a,...e}}async invoke(e,r){let a={...this.metadata,...r?.metadata},i=[...this.tags??[],...r?.tags??[]];return this._callWithConfig(s=>this.formatPromptValue(s),e,{...r,tags:i,metadata:a,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:r}=await Promise.resolve().then(()=>(jp(),K1));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=await Promise.resolve().then(()=>(jp(),K1));return r.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await Promise.resolve().then(()=>(nE(),aE));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});var Mp,M4=Ve(()=>{j6();D4();Mp=class extends Np{async formatPromptValue(e){let r=await this.format(e);return new N6(r)}}});var K1={};Am(K1,{PromptTemplate:()=>N0});var N0,jp=Ve(()=>{M4();D0();N0=class n extends Mp{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),I0(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){let r=await this.mergePartialAndUserVariables(e);return Po(this.template,this.templateFormat,r)}static fromExamples(e,r,a,i=`

`,s=""){let t=[s,...e,r].join(i);return new n({inputVariables:a,template:t})}static fromTemplate(e,r){let{templateFormat:a="f-string",...i}=r??{},s=new Set;return QA(e,a).forEach(t=>{t.type==="variable"&&s.add(t.name)}),new n({inputVariables:[...s],templateFormat:a,template:e,...i})}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new n({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var M0=te(j4=>{"use strict";Object.defineProperty(j4,"__esModule",{value:!0});j4.BasePromptTemplate=void 0;var X0e=kn(),iE=class extends X0e.Runnable{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let r=this.partialVariables??{},a={};for(let[s,t]of Object.entries(r))typeof t=="string"?a[s]=t:a[s]=await t();return{...a,...e}}async invoke(e,r){let a={...this.metadata,...r?.metadata},i=[...this.tags??[],...r?.tags??[]];return this._callWithConfig(s=>this.formatPromptValue(s),e,{...r,tags:i,metadata:a,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:r}=await Promise.resolve().then(()=>(jp(),K1));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=await Promise.resolve().then(()=>(jp(),K1));return r.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await Promise.resolve().then(()=>(nE(),aE));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}};j4.BasePromptTemplate=iE});var Z1=te(B4=>{"use strict";Object.defineProperty(B4,"__esModule",{value:!0});B4.BaseStringPromptTemplate=void 0;var Y0e=o0(),Q0e=M0(),sE=class extends Q0e.BasePromptTemplate{async formatPromptValue(e){let r=await this.format(e);return new Y0e.StringPromptValue(r)}};B4.BaseStringPromptTemplate=sE});var W$=te((oE,uE)=>{(function(n,e){typeof oE=="object"&&typeof uE<"u"?uE.exports=e():typeof define=="function"&&define.amd?define(e):(n=n||self,n.Mustache=e())})(oE,function(){"use strict";var n=Object.prototype.toString,e=Array.isArray||function(h){return n.call(h)==="[object Array]"};function r(p){return typeof p=="function"}function a(p){return e(p)?"array":typeof p}function i(p){return p.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(p,h){return p!=null&&typeof p=="object"&&h in p}function t(p,h){return p!=null&&typeof p!="object"&&p.hasOwnProperty&&p.hasOwnProperty(h)}var o=RegExp.prototype.test;function l(p,h){return o.call(p,h)}var d=/\S/;function c(p){return!l(d,p)}var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function u(p){return String(p).replace(/[&<>"'`=\/]/g,function(_){return y[_]})}var S=/\s*/,V=/\s+/,U=/\s*=/,z=/\s*\}/,D=/#|\^|\/|>|\{|&|=|!/;function k(p,h){if(!p)return[];var _=!1,I=[],W=[],q=[],B=!1,N=!1,L="",P=0;function O(){if(B&&!N)for(;q.length;)delete W[q.pop()];else q=[];B=!1,N=!1}var E,w,A;function M(ee){if(typeof ee=="string"&&(ee=ee.split(V,2)),!e(ee)||ee.length!==2)throw new Error("Invalid tags: "+ee);E=new RegExp(i(ee[0])+"\\s*"),w=new RegExp("\\s*"+i(ee[1])),A=new RegExp("\\s*"+i("}"+ee[1]))}M(h||b.tags);for(var j=new g(p),C,x,F,$,G,Z;!j.eos();){if(C=j.pos,F=j.scanUntil(E),F)for(var J=0,Y=F.length;J<Y;++J)$=F.charAt(J),c($)?(q.push(W.length),L+=$):(N=!0,_=!0,L+=" "),W.push(["text",$,C,C+1]),C+=1,$===`
`&&(O(),L="",P=0,_=!1);if(!j.scan(E))break;if(B=!0,x=j.scan(D)||"name",j.scan(S),x==="="?(F=j.scanUntil(U),j.scan(U),j.scanUntil(w)):x==="{"?(F=j.scanUntil(A),j.scan(z),j.scanUntil(w),x="&"):F=j.scanUntil(w),!j.scan(w))throw new Error("Unclosed tag at "+j.pos);if(x==">"?G=[x,F,C,j.pos,L,P,_]:G=[x,F,C,j.pos],P++,W.push(G),x==="#"||x==="^")I.push(G);else if(x==="/"){if(Z=I.pop(),!Z)throw new Error('Unopened section "'+F+'" at '+C);if(Z[1]!==F)throw new Error('Unclosed section "'+Z[1]+'" at '+C)}else x==="name"||x==="{"||x==="&"?N=!0:x==="="&&M(F)}if(O(),Z=I.pop(),Z)throw new Error('Unclosed section "'+Z[1]+'" at '+j.pos);return R(T(W))}function T(p){for(var h=[],_,I,W=0,q=p.length;W<q;++W)_=p[W],_&&(_[0]==="text"&&I&&I[0]==="text"?(I[1]+=_[1],I[3]=_[3]):(h.push(_),I=_));return h}function R(p){for(var h=[],_=h,I=[],W,q,B=0,N=p.length;B<N;++B)switch(W=p[B],W[0]){case"#":case"^":_.push(W),I.push(W),_=W[4]=[];break;case"/":q=I.pop(),q[5]=W[2],_=I.length>0?I[I.length-1][4]:h;break;default:_.push(W)}return h}function g(p){this.string=p,this.tail=p,this.pos=0}g.prototype.eos=function(){return this.tail===""},g.prototype.scan=function(h){var _=this.tail.match(h);if(!_||_.index!==0)return"";var I=_[0];return this.tail=this.tail.substring(I.length),this.pos+=I.length,I},g.prototype.scanUntil=function(h){var _=this.tail.search(h),I;switch(_){case-1:I=this.tail,this.tail="";break;case 0:I="";break;default:I=this.tail.substring(0,_),this.tail=this.tail.substring(_)}return this.pos+=I.length,I};function m(p,h){this.view=p,this.cache={".":this.view},this.parent=h}m.prototype.push=function(h){return new m(h,this)},m.prototype.lookup=function(h){var _=this.cache,I;if(_.hasOwnProperty(h))I=_[h];else{for(var W=this,q,B,N,L=!1;W;){if(h.indexOf(".")>0)for(q=W.view,B=h.split("."),N=0;q!=null&&N<B.length;)N===B.length-1&&(L=s(q,B[N])||t(q,B[N])),q=q[B[N++]];else q=W.view[h],L=s(W.view,h);if(L){I=q;break}W=W.parent}_[h]=I}return r(I)&&(I=I.call(this.view)),I};function v(){this.templateCache={_cache:{},set:function(h,_){this._cache[h]=_},get:function(h){return this._cache[h]},clear:function(){this._cache={}}}}v.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},v.prototype.parse=function(h,_){var I=this.templateCache,W=h+":"+(_||b.tags).join(":"),q=typeof I<"u",B=q?I.get(W):void 0;return B==null&&(B=k(h,_),q&&I.set(W,B)),B},v.prototype.render=function(h,_,I,W){var q=this.getConfigTags(W),B=this.parse(h,q),N=_ instanceof m?_:new m(_,void 0);return this.renderTokens(B,N,I,h,W)},v.prototype.renderTokens=function(h,_,I,W,q){for(var B="",N,L,P,O=0,E=h.length;O<E;++O)P=void 0,N=h[O],L=N[0],L==="#"?P=this.renderSection(N,_,I,W,q):L==="^"?P=this.renderInverted(N,_,I,W,q):L===">"?P=this.renderPartial(N,_,I,q):L==="&"?P=this.unescapedValue(N,_):L==="name"?P=this.escapedValue(N,_,q):L==="text"&&(P=this.rawValue(N)),P!==void 0&&(B+=P);return B},v.prototype.renderSection=function(h,_,I,W,q){var B=this,N="",L=_.lookup(h[1]);function P(w){return B.render(w,_,I,q)}if(L){if(e(L))for(var O=0,E=L.length;O<E;++O)N+=this.renderTokens(h[4],_.push(L[O]),I,W,q);else if(typeof L=="object"||typeof L=="string"||typeof L=="number")N+=this.renderTokens(h[4],_.push(L),I,W,q);else if(r(L)){if(typeof W!="string")throw new Error("Cannot use higher-order sections without the original template");L=L.call(_.view,W.slice(h[3],h[5]),P),L!=null&&(N+=L)}else N+=this.renderTokens(h[4],_,I,W,q);return N}},v.prototype.renderInverted=function(h,_,I,W,q){var B=_.lookup(h[1]);if(!B||e(B)&&B.length===0)return this.renderTokens(h[4],_,I,W,q)},v.prototype.indentPartial=function(h,_,I){for(var W=_.replace(/[^ \t]/g,""),q=h.split(`
`),B=0;B<q.length;B++)q[B].length&&(B>0||!I)&&(q[B]=W+q[B]);return q.join(`
`)},v.prototype.renderPartial=function(h,_,I,W){if(I){var q=this.getConfigTags(W),B=r(I)?I(h[1]):I[h[1]];if(B!=null){var N=h[6],L=h[5],P=h[4],O=B;L==0&&P&&(O=this.indentPartial(B,P,N));var E=this.parse(O,q);return this.renderTokens(E,_,I,O,W)}}},v.prototype.unescapedValue=function(h,_){var I=_.lookup(h[1]);if(I!=null)return I},v.prototype.escapedValue=function(h,_,I){var W=this.getConfigEscape(I)||b.escape,q=_.lookup(h[1]);if(q!=null)return typeof q=="number"&&W===b.escape?String(q):W(q)},v.prototype.rawValue=function(h){return h[1]},v.prototype.getConfigTags=function(h){return e(h)?h:h&&typeof h=="object"?h.tags:void 0},v.prototype.getConfigEscape=function(h){if(h&&typeof h=="object"&&!e(h))return h.escape};var b={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(p){f.templateCache=p},get templateCache(){return f.templateCache}},f=new v;return b.clearCache=function(){return f.clearCache()},b.parse=function(h,_){return f.parse(h,_)},b.render=function(h,_,I,W){if(typeof h!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+a(h)+'" was given as the first argument for mustache#render(template, view, partials)');return f.render(h,_,I,W)},b.escape=u,b.Scanner=g,b.Context=m,b.Writer=v,b})});var Bp=te(Xr=>{"use strict";var ehe=Xr&&Xr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.checkValidTemplate=Xr.parseTemplate=Xr.renderTemplate=Xr.DEFAULT_PARSER_MAPPING=Xr.DEFAULT_FORMATTER_MAPPING=Xr.interpolateMustache=Xr.interpolateFString=Xr.parseMustache=Xr.parseFString=void 0;var lE=ehe(W$()),the=$m();function G$(){lE.default.escape=n=>n}var rhe=n=>{let e=n.split(""),r=[],a=(s,t)=>{for(let o=t;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let s=a("}",i);if(s<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let s=a("{}",i),t=(s<0?e.slice(i):e.slice(i,s)).join("");r.push({type:"literal",text:t}),i=s<0?e.length:s}}return r};Xr.parseFString=rhe;var ahe=n=>n.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),nhe=n=>{G$();let e=lE.default.parse(n);return ahe(e)};Xr.parseMustache=nhe;var ihe=(n,e)=>(0,Xr.parseFString)(n).reduce((r,a)=>{if(a.type==="variable"){if(a.name in e){let i=typeof e[a.name]=="string"?e[a.name]:JSON.stringify(e[a.name]);return r+i}throw new Error(`(f-string) Missing value for input ${a.name}`)}return r+a.text},"");Xr.interpolateFString=ihe;var she=(n,e)=>(G$(),lE.default.render(n,e));Xr.interpolateMustache=she;Xr.DEFAULT_FORMATTER_MAPPING={"f-string":Xr.interpolateFString,mustache:Xr.interpolateMustache};Xr.DEFAULT_PARSER_MAPPING={"f-string":Xr.parseFString,mustache:Xr.parseMustache};var ohe=(n,e,r)=>{try{return Xr.DEFAULT_FORMATTER_MAPPING[e](n,r)}catch(a){throw(0,the.addLangChainErrorFields)(a,"INVALID_PROMPT_INPUT")}};Xr.renderTemplate=ohe;var uhe=(n,e)=>Xr.DEFAULT_PARSER_MAPPING[e](n);Xr.parseTemplate=uhe;var lhe=(n,e,r)=>{if(!(e in Xr.DEFAULT_FORMATTER_MAPPING)){let a=Object.keys(Xr.DEFAULT_FORMATTER_MAPPING);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${a}`)}try{let a=r.reduce((i,s)=>(i[s]="foo",i),{});Array.isArray(n)?n.forEach(i=>{if(i.type==="text")(0,Xr.renderTemplate)(i.text,e,a);else if(i.type==="image_url")if(typeof i.image_url=="string")(0,Xr.renderTemplate)(i.image_url,e,a);else{let s=i.image_url.url;(0,Xr.renderTemplate)(s,e,a)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):(0,Xr.renderTemplate)(n,e,a)}catch(a){throw new Error(`Invalid prompt schema: ${a.message}`)}};Xr.checkValidTemplate=lhe});var q4=te(L4=>{"use strict";Object.defineProperty(L4,"__esModule",{value:!0});L4.PromptTemplate=void 0;var che=Z1(),cE=Bp(),dE=class n extends che.BaseStringPromptTemplate{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),(0,cE.checkValidTemplate)(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){let r=await this.mergePartialAndUserVariables(e);return(0,cE.renderTemplate)(this.template,this.templateFormat,r)}static fromExamples(e,r,a,i=`

`,s=""){let t=[s,...e,r].join(i);return new n({inputVariables:a,template:t})}static fromTemplate(e,r){let{templateFormat:a="f-string",...i}=r??{},s=new Set;return(0,cE.parseTemplate)(e,a).forEach(t=>{t.type==="variable"&&s.add(t.name)}),new n({inputVariables:[...s],templateFormat:a,template:e,...i})}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new n({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};L4.PromptTemplate=dE});var fE=te(U4=>{"use strict";Object.defineProperty(U4,"__esModule",{value:!0});U4.ImagePromptTemplate=void 0;var dhe=o0(),phe=M0(),H$=Bp(),pE=class n extends phe.BasePromptTemplate{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),(0,H$.checkValidTemplate)([{type:"image_url",image_url:this.template}],this.templateFormat,r)}}_getPromptType(){return"prompt"}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}async format(e){let r={};for(let[t,o]of Object.entries(this.template))typeof o=="string"?r[t]=(0,H$.renderTemplate)(o,this.templateFormat,e):r[t]=o;let a=e.url||r.url,i=e.detail||r.detail;if(!a)throw new Error("Must provide either an image URL.");if(typeof a!="string")throw new Error("url must be a string.");let s={url:a};return i&&(s.detail=i),s}async formatPromptValue(e){let r=await this.format(e);return new dhe.ImagePromptValue(r)}};U4.ImagePromptTemplate=pE});var bE=te(V4=>{"use strict";Object.defineProperty(V4,"__esModule",{value:!0});V4.DictPromptTemplate=void 0;var fhe=kn(),$4=Bp(),hE=class extends fhe.Runnable{static lc_name(){return"DictPromptTemplate"}constructor(e){let r=e.templateFormat??"f-string",a=mE(e.template,r);super({inputVariables:a,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=r,this.inputVariables=a}async format(e){return gE(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}};V4.DictPromptTemplate=hE;function mE(n,e){let r=[];for(let a of Object.values(n))if(typeof a=="string")(0,$4.parseTemplate)(a,e).forEach(i=>{i.type==="variable"&&r.push(i.name)});else if(Array.isArray(a))for(let i of a)typeof i=="string"?(0,$4.parseTemplate)(i,e).forEach(s=>{s.type==="variable"&&r.push(s.name)}):typeof i=="object"&&r.push(...mE(i,e));else typeof a=="object"&&a!==null&&r.push(...mE(a,e));return Array.from(new Set(r))}function gE(n,e,r){let a={};for(let[i,s]of Object.entries(n))if(typeof s=="string")a[i]=(0,$4.renderTemplate)(s,r,e);else if(Array.isArray(s)){let t=[];for(let o of s)typeof o=="string"?t.push((0,$4.renderTemplate)(o,r,e)):typeof o=="object"&&t.push(gE(o,e,r));a[i]=t}else typeof s=="object"&&s!==null?a[i]=gE(s,e,r):a[i]=s;return a}});var Q1=te(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.ChatPromptTemplate=an.SystemMessagePromptTemplate=an.AIMessagePromptTemplate=an.HumanMessagePromptTemplate=an.ChatMessagePromptTemplate=an.BaseChatPromptTemplate=an.BaseMessageStringPromptTemplate=an.MessagesPlaceholder=an.BaseMessagePromptTemplate=void 0;var Bs=xl(),hhe=o0(),mhe=kn(),K$=Z1(),ghe=M0(),j0=q4(),vE=fE(),z4=Bp(),bhe=$m(),Z$=bE(),B0=class extends mhe.Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,r){return this._callWithConfig(a=>this.formatMessages(a),e,{...r,runType:"prompt"})}};an.BaseMessagePromptTemplate=B0;var J1=class extends B0{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){let r=e[this.variableName];if(this.optional&&!r)return[];if(!r){let i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let a;try{Array.isArray(r)?a=r.map(Bs.coerceMessageLikeToMessage):a=[(0,Bs.coerceMessageLikeToMessage)(r)]}catch(i){let s=typeof r=="string"?r:JSON.stringify(r,null,2),t=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${s}`,`Additional message: ${i.message}`].join(`

`));throw t.name="InputFormatError",t.lc_error_code=i.lc_error_code,t}return a}};an.MessagesPlaceholder=J1;var W4=class extends B0{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}};an.BaseMessageStringPromptTemplate=W4;var G4=class extends ghe.BasePromptTemplate{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let r=await this.formatMessages(e);return new hhe.ChatPromptValue(r)}};an.BaseChatPromptTemplate=G4;var H4=class extends W4{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,r){"prompt"in e||(e={prompt:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Bs.ChatMessage(await this.prompt.format(e),this.role)}static fromTemplate(e,r,a){return new this(j0.PromptTemplate.fromTemplate(e,{templateFormat:a?.templateFormat}),r)}};an.ChatMessagePromptTemplate=H4;function vhe(n){return n===null||typeof n!="object"||Array.isArray(n)?!1:Object.keys(n).length===1&&"text"in n&&typeof n.text=="string"}function yhe(n){return n===null||typeof n!="object"||Array.isArray(n)?!1:"image_url"in n&&(typeof n.image_url=="string"||typeof n.image_url=="object"&&n.image_url!==null&&"url"in n.image_url&&typeof n.image_url.url=="string")}var X1=class extends B0{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,r){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let a=[];this.prompt.forEach(i=>{"inputVariables"in i&&(a=a.concat(i.inputVariables))}),this.inputVariables=a}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=r??this.additionalOptions}createMessage(e){let r=this.constructor;if(r._messageClass()){let a=r._messageClass();return new a({content:e})}else if(r.chatMessageClass){let a=r.chatMessageClass();return new a({content:e,role:this.getRoleFromMessageClass(a.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,r){if(typeof e=="string")return new this(j0.PromptTemplate.fromTemplate(e,r));let a=[];for(let i of e)if(typeof i=="string")a.push(j0.PromptTemplate.fromTemplate(i,r));else if(i!==null)if(vhe(i)){let s="";typeof i.text=="string"&&(s=i.text??"");let t={...r,additionalContentFields:i};a.push(j0.PromptTemplate.fromTemplate(s,t))}else if(yhe(i)){let s=i.image_url??"",t,o=[];if(typeof s=="string"){let l;r?.templateFormat==="mustache"?l=(0,z4.parseMustache)(s):l=(0,z4.parseFString)(s);let d=l.flatMap(c=>c.type==="variable"?[c.name]:[]);if((d?.length??0)>0){if(d.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${d}
From: ${s}`);o=[d[0]]}else o=[];s={url:s},t=new vE.ImagePromptTemplate({template:s,inputVariables:o,templateFormat:r?.templateFormat,additionalContentFields:i})}else if(typeof s=="object"){if("url"in s){let l;r?.templateFormat==="mustache"?l=(0,z4.parseMustache)(s.url):l=(0,z4.parseFString)(s.url),o=l.flatMap(d=>d.type==="variable"?[d.name]:[])}else o=[];t=new vE.ImagePromptTemplate({template:s,inputVariables:o,templateFormat:r?.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");a.push(t)}else typeof i=="object"&&a.push(new Z$.DictPromptTemplate({template:i,templateFormat:r?.templateFormat}));return new this({prompt:a,additionalOptions:r})}async format(e){if(this.prompt instanceof K$.BaseStringPromptTemplate){let r=await this.prompt.format(e);return this.createMessage(r)}else{let r=[];for(let a of this.prompt){let i={};if(!("inputVariables"in a))throw new Error(`Prompt ${a} does not have inputVariables defined.`);for(let s of a.inputVariables)i||(i={[s]:e[s]}),i={...i,[s]:e[s]};if(a instanceof K$.BaseStringPromptTemplate){let s=await a.format(i),t;"additionalContentFields"in a&&(t=a.additionalContentFields),r.push({...t,type:"text",text:s})}else if(a instanceof vE.ImagePromptTemplate){let s=await a.format(i),t;"additionalContentFields"in a&&(t=a.additionalContentFields),r.push({...t,type:"image_url",image_url:s})}else if(a instanceof Z$.DictPromptTemplate){let s=await a.format(i),t;"additionalContentFields"in a&&(t=a.additionalContentFields),r.push({...t,...s})}}return this.createMessage(r)}}async formatMessages(e){return[await this.format(e)]}},Y1=class extends X1{static _messageClass(){return Bs.HumanMessage}static lc_name(){return"HumanMessagePromptTemplate"}};an.HumanMessagePromptTemplate=Y1;var K4=class extends X1{static _messageClass(){return Bs.AIMessage}static lc_name(){return"AIMessagePromptTemplate"}};an.AIMessagePromptTemplate=K4;var Z4=class extends X1{static _messageClass(){return Bs.SystemMessage}static lc_name(){return"SystemMessagePromptTemplate"}};an.SystemMessagePromptTemplate=Z4;function _he(n){return typeof n.formatMessages=="function"}function xhe(n,e){if(_he(n)||(0,Bs.isBaseMessage)(n))return n;if(Array.isArray(n)&&n[0]==="placeholder"){let i=n[1];if(e?.templateFormat==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){let s=i.slice(2,-2);return new J1({variableName:s,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){let s=i.slice(1,-1);return new J1({variableName:s,optional:!0})}throw new Error(`Invalid placeholder template for format ${e?.templateFormat??'"f-string"'}: "${n[1]}". Expected a variable name surrounded by ${e?.templateFormat==="mustache"?"double":"single"} curly braces.`)}let r=(0,Bs.coerceMessageLikeToMessage)(n),a;if(typeof r.content=="string"?a=r.content:a=r.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),r._getType()==="human")return Y1.fromTemplate(a,e);if(r._getType()==="ai")return K4.fromTemplate(a,e);if(r._getType()==="system")return Z4.fromTemplate(a,e);if(Bs.ChatMessage.isInstance(r))return H4.fromTemplate(r.content,r.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${r._getType()}".`)}function whe(n){return n.constructor.lc_name()==="MessagesPlaceholder"}var yE=class n extends G4{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){let r=new Set;for(let o of this.promptMessages)if(!(o instanceof Bs.BaseMessage))for(let l of o.inputVariables)r.add(l);let a=this.inputVariables,i=new Set(this.partialVariables?a.concat(Object.keys(this.partialVariables)):a),s=new Set([...i].filter(o=>!r.has(o)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);let t=new Set([...r].filter(o=>!i.has(o)));if(t.size>0)throw new Error(`Input variables \`${[...t]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,r){if(typeof e.content=="string")return e;let a=await Promise.all(e.content.map(async i=>{if(i.type!=="image_url")return i;let s="";typeof i.image_url=="string"?s=i.image_url:s=i.image_url.url;let o=await j0.PromptTemplate.fromTemplate(s,{templateFormat:this.templateFormat}).format(r);return typeof i.image_url!="string"&&"url"in i.image_url?i.image_url.url=o:i.image_url=o,i}));return e.content=a,e}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),a=[];for(let i of this.promptMessages)if(i instanceof Bs.BaseMessage)a.push(await this._parseImagePrompts(i,r));else{let s=i.inputVariables.reduce((o,l)=>{if(!(l in r)&&!(whe(i)&&i.optional))throw(0,bhe.addLangChainErrorFields)(new Error(`Missing value for input variable \`${l.toString()}\``),"INVALID_PROMPT_INPUT");return o[l]=r[l],o},{}),t=await i.formatMessages(s);a=a.concat(t)}return a}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}static fromTemplate(e,r){let a=j0.PromptTemplate.fromTemplate(e,r),i=new Y1({prompt:a});return this.fromMessages([i])}static fromMessages(e,r){let a=e.reduce((t,o)=>t.concat(o instanceof n?o.promptMessages:[xhe(o,r)]),[]),i=e.reduce((t,o)=>o instanceof n?Object.assign(t,o.partialVariables):t,Object.create(null)),s=new Set;for(let t of a)if(!(t instanceof Bs.BaseMessage))for(let o of t.inputVariables)o in i||s.add(o);return new this({...r,inputVariables:[...s],promptMessages:a,partialVariables:i,templateFormat:r?.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}};an.ChatPromptTemplate=yE});var J$=te(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});L0.FewShotChatMessagePromptTemplate=L0.FewShotPromptTemplate=void 0;var She=Z1(),J4=Bp(),Che=q4(),Ahe=Q1(),_E=class n extends She.BaseStringPromptTemplate{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),(0,J4.checkValidTemplate)(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}async format(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r),i=await Promise.all(a.map(t=>this.examplePrompt.format(t))),s=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return(0,J4.renderTemplate)(s,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let a=await Che.PromptTemplate.deserialize(r),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new n({inputVariables:e.input_variables,examplePrompt:a,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}};L0.FewShotPromptTemplate=_E;var xE=class n extends Ahe.BaseChatPromptTemplate{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??`

`,this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),(0,J4.checkValidTemplate)(this.prefix+this.suffix,this.templateFormat,r)}}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r);a=a.map(s=>{let t={};return this.examplePrompt.inputVariables.forEach(o=>{t[o]=s[o]}),t});let i=[];for(let s of a){let t=await this.examplePrompt.formatMessages(s);i.push(...t)}return i}async format(e){let r=await this.mergePartialAndUserVariables(e),a=await this.getExamples(r),s=(await Promise.all(a.map(o=>this.examplePrompt.formatMessages(o)))).flat().map(o=>o.content),t=[this.prefix,...s,this.suffix].join(this.exampleSeparator);return(0,J4.renderTemplate)(t,this.templateFormat,r)}async partial(e){let r=this.inputVariables.filter(s=>!(s in e)),a={...this.partialVariables??{},...e},i={...this,inputVariables:r,partialVariables:a};return new n(i)}};L0.FewShotChatMessagePromptTemplate=xE});var X$=te(X4=>{"use strict";Object.defineProperty(X4,"__esModule",{value:!0});X4.PipelinePromptTemplate=void 0;var Ehe=M0(),Phe=Q1(),wE=class n extends Ehe.BasePromptTemplate{static lc_name(){return"PipelinePromptTemplate"}constructor(e){super({...e,inputVariables:[]}),Object.defineProperty(this,"pipelinePrompts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finalPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pipelinePrompts=e.pipelinePrompts,this.finalPrompt=e.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let e=this.pipelinePrompts.map(a=>a.name),r=this.pipelinePrompts.map(a=>a.prompt.inputVariables.filter(i=>!e.includes(i))).flat();return[...new Set(r)]}static extractRequiredInputValues(e,r){return r.reduce((a,i)=>(a[i]=e[i],a),{})}async formatPipelinePrompts(e){let r=await this.mergePartialAndUserVariables(e);for(let{name:a,prompt:i}of this.pipelinePrompts){let s=n.extractRequiredInputValues(r,i.inputVariables);i instanceof Phe.ChatPromptTemplate?r[a]=await i.formatMessages(s):r[a]=await i.format(s)}return n.extractRequiredInputValues(r,this.finalPrompt.inputVariables)}async formatPromptValue(e){return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(e))}async format(e){return this.finalPrompt.format(await this.formatPipelinePrompts(e))}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(a=>!(a in e)),r.partialVariables={...this.partialVariables??{},...e},new n(r)}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};X4.PipelinePromptTemplate=wE});var Q$=te(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0})});var tV=te(Y4=>{"use strict";Object.defineProperty(Y4,"__esModule",{value:!0});Y4.StructuredPrompt=void 0;var The=kn(),Ohe=Q1();function eV(n){return typeof n=="object"&&n!=null&&"withStructuredOutput"in n&&typeof n.withStructuredOutput=="function"}function Fhe(n){return typeof n=="object"&&n!=null&&"lc_id"in n&&Array.isArray(n.lc_id)&&n.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var SE=class n extends Ohe.ChatPromptTemplate{get lc_aliases(){return{...super.lc_aliases,schema:"schema_"}}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"method",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","structured"]}),this.schema=e.schema,this.method=e.method}pipe(e){if(eV(e))return super.pipe(e.withStructuredOutput(this.schema));if(Fhe(e)&&eV(e.bound))return super.pipe(new The.RunnableBinding({bound:e.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:e.kwargs??{},config:e.config,configFactories:e.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(e,r,a){return n.fromMessages(e,{schema:r,method:a})}};Y4.StructuredPrompt=SE});var CE=te(Nn=>{"use strict";var khe=Nn&&Nn.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),To=Nn&&Nn.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&khe(e,n,r)};Object.defineProperty(Nn,"__esModule",{value:!0});To(M0(),Nn);To(Q1(),Nn);To(J$(),Nn);To(X$(),Nn);To(q4(),Nn);To(Q$(),Nn);To(Z1(),Nn);To(Bp(),Nn);To(fE(),Nn);To(tV(),Nn);To(bE(),Nn)});var e3=te(Q4=>{"use strict";Object.defineProperty(Q4,"__esModule",{value:!0});Q4.BaseRetriever=void 0;var rV=nc(),Rhe=kn(),aV=au(),AE=class extends Rhe.Runnable{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,r){throw new Error("Not implemented!")}async invoke(e,r){return this.getRelevantDocuments(e,(0,aV.ensureConfig)(r))}async getRelevantDocuments(e,r){let a=(0,aV.ensureConfig)((0,rV.parseCallbackConfigArg)(r)),s=await(await rV.CallbackManager.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,a.runId,void 0,void 0,void 0,a.runName);try{let t=await this._getRelevantDocuments(e,s);return await s?.handleRetrieverEnd(t),t}catch(t){throw await s?.handleRetrieverError(t),t}}};Q4.BaseRetriever=AE});var nV=te(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.InMemoryStore=q0.BaseStore=void 0;var Ihe=co(),t3=class extends Ihe.Serializable{};q0.BaseStore=t3;var EE=class extends t3{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","storage"]}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}async mget(e){return e.map(r=>this.store[r])}async mset(e){for(let[r,a]of e)this.store[r]=a}async mdelete(e){for(let r of e)delete this.store[r]}async*yieldKeys(e){let r=Object.keys(this.store);for(let a of r)(e===void 0||a.startsWith(e))&&(yield a)}};q0.InMemoryStore=EE});var eg=te(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.validatesOnlyStrings=Su.toJsonSchema=Su.Validator=Su.deepCompareStrict=void 0;var Dhe=gc(),Nhe=g1(),Mhe=c0(),iV=g1();Object.defineProperty(Su,"deepCompareStrict",{enumerable:!0,get:function(){return iV.deepCompareStrict}});Object.defineProperty(Su,"Validator",{enumerable:!0,get:function(){return iV.Validator}});function jhe(n){return(0,Mhe.isZodSchema)(n)?(0,Dhe.zodToJsonSchema)(n):n}Su.toJsonSchema=jhe;function r3(n){if(!n||typeof n!="object"||Object.keys(n).length===0||Array.isArray(n))return!1;if("type"in n)return typeof n.type=="string"?n.type==="string":Array.isArray(n.type)?n.type.every(e=>e==="string"):!1;if("enum"in n)return Array.isArray(n.enum)&&n.enum.length>0&&n.enum.every(e=>typeof e=="string");if("const"in n)return typeof n.const=="string";if("allOf"in n&&Array.isArray(n.allOf))return n.allOf.some(e=>r3(e));if("anyOf"in n&&Array.isArray(n.anyOf)||"oneOf"in n&&Array.isArray(n.oneOf)){let e="anyOf"in n?n.anyOf:n.oneOf;return e.length>0&&e.every(r=>r3(r))}if("not"in n)return!1;if("$ref"in n&&typeof n.$ref=="string"){let e=n.$ref,r=(0,Nhe.dereference)(n);return r[e]?r3(r[e]):!1}return!1}Su.validatesOnlyStrings=r3});var a3=te(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.isLangChainTool=Cu.isStructuredToolParams=Cu.isRunnableToolLike=Cu.isStructuredTool=void 0;var Bhe=kn(),Lhe=c0();function sV(n){return n!==void 0&&Array.isArray(n.lc_namespace)}Cu.isStructuredTool=sV;function oV(n){return n!==void 0&&Bhe.Runnable.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}Cu.isRunnableToolLike=oV;function uV(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&((0,Lhe.isZodSchema)(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}Cu.isStructuredToolParams=uV;function qhe(n){return uV(n)||oV(n)||sV(n)}Cu.isLangChainTool=qhe});var l3=te(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.tool=ka.BaseToolkit=ka.DynamicStructuredTool=ka.DynamicTool=ka.Tool=ka.StructuredTool=ka.ToolInputParsingException=ka.isStructuredToolParams=ka.isStructuredTool=ka.isRunnableToolLike=ka.isLangChainTool=void 0;var lV=oi(),Uhe=g1(),n3=nc(),$he=l0(),tg=au(),PE=jf(),cV=Nd(),Lp=$2();Object.defineProperty(ka,"ToolInputParsingException",{enumerable:!0,get:function(){return Lp.ToolInputParsingException}});var dV=c0(),Vhe=eg(),u3=a3();Object.defineProperty(ka,"isLangChainTool",{enumerable:!0,get:function(){return u3.isLangChainTool}});Object.defineProperty(ka,"isRunnableToolLike",{enumerable:!0,get:function(){return u3.isRunnableToolLike}});Object.defineProperty(ka,"isStructuredTool",{enumerable:!0,get:function(){return u3.isStructuredTool}});Object.defineProperty(ka,"isStructuredToolParams",{enumerable:!0,get:function(){return u3.isStructuredToolParams}});var rg=class extends $he.BaseLangChain{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat}async invoke(e,r){let a,i=(0,tg.ensureConfig)(r);return(0,Lp._isToolCall)(e)?(a=e.args,i={...i,toolCall:e}):a=e,this.call(a,i)}async call(e,r,a){let i=(0,Lp._isToolCall)(e)?e.args:e,s;if((0,dV.isZodSchema)(this.schema))try{s=await this.schema.parseAsync(i)}catch(V){let U="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(U=`${U}
Details: ${V.message}`),new Lp.ToolInputParsingException(U,JSON.stringify(e))}else{let V=(0,Uhe.validate)(i,this.schema);if(!V.valid){let U="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(U=`${U}
Details: ${V.errors.map(z=>`${z.keywordLocation}: ${z.error}`).join(`
`)}`),new Lp.ToolInputParsingException(U,JSON.stringify(e))}s=i}let t=(0,n3.parseCallbackConfigArg)(r),l=await n3.CallbackManager.configure(t.callbacks,this.callbacks,t.tags||a,this.tags,t.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),t.runId,void 0,void 0,void 0,t.runName);delete t.runId;let d;try{d=await this._call(s,l,t)}catch(V){throw await l?.handleToolError(V),V}let c,y;if(this.responseFormat==="content_and_artifact")if(Array.isArray(d)&&d.length===2)[c,y]=d;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(d)}`);else c=d;let u;(0,Lp._isToolCall)(e)&&(u=e.id),!u&&(0,Lp._configHasToolCallId)(t)&&(u=t.toolCall.id);let S=Whe({content:c,artifact:y,toolCallId:u,name:this.name});return await l?.handleToolEnd(S),S}};ka.StructuredTool=rg;var i3=class extends rg{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:lV.z.object({input:lV.z.string().optional()}).transform(r=>r.input)})}call(e,r){let a=typeof e=="string"||e==null?{input:e}:e;return super.call(a,r)}};ka.Tool=i3;var s3=class extends i3{static lc_name(){return"DynamicTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,r){let a=(0,n3.parseCallbackConfigArg)(r);return a.runName===void 0&&(a.runName=this.name),super.call(e,a)}async _call(e,r,a){return this.func(e,r,a)}};ka.DynamicTool=s3;var o3=class extends rg{static lc_name(){return"DynamicStructuredTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,r,a){let i=(0,n3.parseCallbackConfigArg)(r);return i.runName===void 0&&(i.runName=this.name),super.call(e,i,a)}_call(e,r,a){return this.func(e,r,a)}};ka.DynamicStructuredTool=o3;var TE=class{getTools(){return this.tools}};ka.BaseToolkit=TE;function zhe(n,e){let r=e.schema&&(0,dV.isZodSchema)(e.schema)&&(!("shape"in e.schema)||!e.schema.shape),a=(0,Vhe.validatesOnlyStrings)(e.schema);if(!e.schema||r||a)return new s3({...e,description:e.description??e.schema?.description??`${e.name} tool`,func:async(t,o,l)=>new Promise((d,c)=>{let y=(0,tg.patchConfig)(l,{callbacks:o?.getChild()});cV.AsyncLocalStorageProviderSingleton.runWithConfig((0,tg.pickRunnableConfigKeys)(y),async()=>{try{d(n(t,y))}catch(u){c(u)}})})});let i=e.schema,s=e.description??e.schema.description??`${e.name} tool`;return new o3({...e,description:s,schema:i,func:async(t,o,l)=>new Promise((d,c)=>{let y=(0,tg.patchConfig)(l,{callbacks:o?.getChild()});cV.AsyncLocalStorageProviderSingleton.runWithConfig((0,tg.pickRunnableConfigKeys)(y),async()=>{try{d(n(t,y))}catch(u){c(u)}})})})}ka.tool=zhe;function Whe(n){let{content:e,artifact:r,toolCallId:a}=n;return a&&!(0,PE.isDirectToolOutput)(e)?typeof e=="string"||Array.isArray(e)&&e.every(i=>typeof i=="object")?new PE.ToolMessage({content:e,artifact:r,tool_call_id:a,name:n.name}):new PE.ToolMessage({content:Ghe(e),artifact:r,tool_call_id:a,name:n.name}):e}function Ghe(n){try{return JSON.stringify(n,null,2)??""}catch{return`${n}`}}});var FE=te(c3=>{"use strict";Object.defineProperty(c3,"__esModule",{value:!0});c3.LangChainTracerV1=void 0;var Hhe=bl(),pV=Go(),Khe=po(),OE=class extends Khe.BaseTracer{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(0,pV.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=(0,pV.getEnvironmentVariable)("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){let r={start_time:Date.now(),name:e},a=await this.persistSession(r);return this.session=a,a}async loadSession(e){let r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){let r=this.session??await this.loadDefaultSession(),a=e.serialized,i;if(e.run_type==="llm"){let s=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(o=>(0,Hhe.getBufferString)(o));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:a,type:e.run_type,session_id:r.id,prompts:s,response:e.outputs}}else if(e.run_type==="chain"){let s=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:a,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:s.filter(o=>o.type==="llm"),child_chain_runs:s.filter(o=>o.type==="chain"),child_tool_runs:s.filter(o=>o.type==="tool")}}else if(e.run_type==="tool"){let s=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:a,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(a),child_llm_runs:s.filter(o=>o.type==="llm"),child_chain_runs:s.filter(o=>o.type==="chain"),child_tool_runs:s.filter(o=>o.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,a;e.run_type!==void 0?a=await this.convertV2RunToRun(e):a=e,a.type==="llm"?r=`${this.endpoint}/llm-runs`:a.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`;let i=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(a)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)}async persistSession(e){let r=`${this.endpoint}/sessions`,a=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return a.ok?{id:(await a.json()).id,...e}:(console.error(`Failed to persist session: ${a.status} ${a.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){let r=await fetch(e,{method:"GET",headers:this.headers}),a;if(!r.ok)return console.error(`Failed to load session: ${r.status} ${r.statusText}`),a={id:1,start_time:Date.now()},this.session=a,a;let i=await r.json();return i.length===0?(a={id:1,start_time:Date.now()},this.session=a,a):([a]=i,this.session=a,a)}};c3.LangChainTracerV1=OE});var fV=te(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.getTracingV2CallbackHandler=U0.getTracingCallbackHandler=void 0;var Zhe=ev(),Jhe=FE();async function Xhe(n){let e=new Jhe.LangChainTracerV1;return n?await e.loadSession(n):await e.loadDefaultSession(),e}U0.getTracingCallbackHandler=Xhe;async function Yhe(){return new Zhe.LangChainTracer}U0.getTracingV2CallbackHandler=Yhe});var hV=te(d3=>{"use strict";Object.defineProperty(d3,"__esModule",{value:!0});d3.RunCollectorCallbackHandler=void 0;var Qhe=po(),kE=class extends Qhe.BaseTracer{constructor({exampleId:e}={}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"run_collector"}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracedRuns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleId=e,this.tracedRuns=[]}async persistRun(e){let r={...e};r.reference_example_id=this.exampleId,this.tracedRuns.push(r)}};d3.RunCollectorCallbackHandler=kE});var RE=te(p3=>{"use strict";Object.defineProperty(p3,"__esModule",{value:!0});p3.chunkArray=void 0;var eme=(n,e)=>n.reduce((r,a,i)=>{let s=Math.floor(i/e),t=r[s]||[];return r[s]=t.concat([a]),r},[]);p3.chunkArray=eme});var IE=te(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.convertToOpenAITool=Di.convertToOpenAIFunction=Di.isLangChainTool=Di.isRunnableToolLike=Di.isStructuredToolParams=Di.isStructuredTool=void 0;var tme=a3(),rme=eg(),f3=a3();Object.defineProperty(Di,"isStructuredTool",{enumerable:!0,get:function(){return f3.isStructuredTool}});Object.defineProperty(Di,"isStructuredToolParams",{enumerable:!0,get:function(){return f3.isStructuredToolParams}});Object.defineProperty(Di,"isRunnableToolLike",{enumerable:!0,get:function(){return f3.isRunnableToolLike}});Object.defineProperty(Di,"isLangChainTool",{enumerable:!0,get:function(){return f3.isLangChainTool}});function mV(n,e){let r=typeof e=="number"?void 0:e;return{name:n.name,description:n.description,parameters:(0,rme.toJsonSchema)(n.schema),...r?.strict!==void 0?{strict:r.strict}:{}}}Di.convertToOpenAIFunction=mV;function ame(n,e){let r=typeof e=="number"?void 0:e,a;return(0,tme.isLangChainTool)(n)?a={type:"function",function:mV(n)}:a=n,r?.strict!==void 0&&(a.function.strict=r.strict),a}Di.convertToOpenAITool=ame});var DE=te(h3=>{"use strict";Object.defineProperty(h3,"__esModule",{value:!0});h3.cosine=void 0;function nme(n,e){let r=0,a=0,i=0;for(let s=0;s<n.length;s++)r+=n[s]*e[s],a+=n[s]*n[s],i+=e[s]*e[s];return r/(Math.sqrt(a)*Math.sqrt(i))}h3.cosine=nme});var gV=te(m3=>{"use strict";Object.defineProperty(m3,"__esModule",{value:!0});m3.innerProduct=void 0;function ime(n,e){let r=0;for(let a=0;a<n.length;a++)r+=n[a]*e[a];return r}m3.innerProduct=ime});var vV=te($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.euclidean=$0.squaredEuclidean=void 0;function bV(n,e){let r=0;for(let a=0;a<n.length;a++)r+=(n[a]-e[a])*(n[a]-e[a]);return r}$0.squaredEuclidean=bV;function sme(n,e){return Math.sqrt(bV(n,e))}$0.euclidean=sme});var ME=te(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.maximalMarginalRelevance=Ni.euclideanDistance=Ni.innerProduct=Ni.cosineSimilarity=Ni.normalize=Ni.matrixFunc=void 0;var ome=DE(),ume=gV(),lme=vV();function g3(n,e,r){if(n.length===0||n[0].length===0||e.length===0||e[0].length===0)return[[]];if(n[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[n.length,n[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return n.map(a=>e.map(i=>r(a,i)).map(i=>Number.isNaN(i)?0:i))}Ni.matrixFunc=g3;function cme(n,e=!1){let r=hme(n);return n.map(a=>a.map(i=>e?1-i/r:i/r))}Ni.normalize=cme;function NE(n,e){return g3(n,e,ome.cosine)}Ni.cosineSimilarity=NE;function dme(n,e){return g3(n,e,ume.innerProduct)}Ni.innerProduct=dme;function pme(n,e){return g3(n,e,lme.euclidean)}Ni.euclideanDistance=pme;function fme(n,e,r=.5,a=4){if(Math.min(a,e.length)<=0)return[];let i=Array.isArray(n[0])?n:[n],s=NE(i,e)[0],t=yV(s).maxIndex,o=[e[t]],l=[t];for(;l.length<Math.min(a,e.length);){let d=-1/0,c=-1,y=NE(e,o);s.forEach((u,S)=>{if(l.includes(S))return;let V=Math.max(...y[S]),U=r*u-(1-r)*V;U>d&&(d=U,c=S)}),o.push(e[c]),l.push(c)}return l}Ni.maximalMarginalRelevance=fme;function yV(n){if(n.length===0)return{maxIndex:-1,maxValue:NaN};let e=n[0],r=0;for(let a=1;a<n.length;a+=1)n[a]>e&&(r=a,e=n[a]);return{maxIndex:r,maxValue:e}}function hme(n){return n.reduce((e,r)=>Math.max(e,yV(r).maxValue),0)}});var v3=te(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.SaveableVectorStore=Bc.VectorStore=Bc.VectorStoreRetriever=void 0;var mme=e3(),gme=co(),V0=class extends mme.BaseRetriever{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,r){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},r?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,r?.getChild("vectorstore"))}async addDocuments(e,r){return this.vectorStore.addDocuments(e,r)}};Bc.VectorStoreRetriever=V0;var b3=class extends gme.Serializable{constructor(e,r){super(r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,r=4,a=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,a)).map(t=>t[0])}async similaritySearchWithScore(e,r=4,a=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,a)}static fromTexts(e,r,a,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,r,a){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,r,a,i,s,t){if(typeof e=="number")return new V0({vectorStore:this,k:e,filter:r,tags:[...i??[],this._vectorstoreType()],metadata:s,verbose:t,callbacks:a});{let o={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new V0({...o,searchKwargs:e.searchKwargs}):new V0({...o})}}};Bc.VectorStore=b3;var jE=class extends b3{static load(e,r){throw new Error("Not implemented")}};Bc.SaveableVectorStore=jE});var AV=te(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.FakeVectorStore=ea.SingleRunExtractor=ea.SyntheticEmbeddings=ea.FakeEmbeddings=ea.FakeTool=ea.FakeTracer=ea.FakeListChatMessageHistory=ea.FakeChatMessageHistory=ea.FakeListChatModel=ea.FakeRetriever=ea.FakeStreamingChatModel=ea.FakeChatModel=ea.FakeStreamingLLM=ea.FakeLLM=ea.FakeRunnable=ea.FakeSplitIntoListParser=void 0;var _V=dS(),ag=jy(),tP=t6(),xV=a6(),Au=xl(),bme=sp(),BE=pc(),vme=e3(),wV=kn(),yme=l3(),SV=po(),CV=qy(),y3=eg(),_me=v3(),xme=DE(),LE=class extends bme.BaseOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]})}getFormatInstructions(){return""}async parse(e){return e.split(",").map(r=>r.trim())}};ea.FakeSplitIntoListParser=LE;var qE=class extends wV.Runnable{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]}),Object.defineProperty(this,"returnOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.returnOptions=e.returnOptions}async invoke(e,r){return this.returnOptions?r??{}:{input:e}}};ea.FakeRunnable=qE;var UE=class extends xV.LLM{constructor(e){super(e),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e,r,a){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.response??e;return await a?.handleLLMNewToken(i),i}};ea.FakeLLM=UE;var $E=class extends xV.LLM{constructor(e){super(e),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let r=this.responses?.[0];return this.responses=this.responses?.slice(1),r??e}async*_streamResponseChunks(e,r,a){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0];this.responses=this.responses?.slice(1);for(let s of i??e)await new Promise(t=>setTimeout(t,this.sleep)),yield{text:s,generationInfo:{}},await a?.handleLLMNewToken(s)}};ea.FakeStreamingLLM=$E;var VE=class extends tP.BaseChatModel{_combineLLMOutput(){return[]}_llmType(){return"fake"}async _generate(e,r,a){if(r?.stop?.length)return{generations:[{message:new Au.AIMessage(r.stop[0]),text:r.stop[0]}]};let i=e.map(s=>typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2)).join(`
`);return await a?.handleLLMNewToken(i),{generations:[{message:new Au.AIMessage(i),text:i}],llmOutput:{}}}};ea.FakeChatModel=VE;var zE=class n extends tP.BaseChatModel{constructor({sleep:e=50,responses:r=[],chunks:a=[],toolStyle:i="openai",thrownErrorString:s,...t}){super(t),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"toolStyle",{enumerable:!0,configurable:!0,writable:!0,value:"openai"}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.sleep=e,this.responses=r,this.chunks=a,this.toolStyle=i,this.thrownErrorString=s}_llmType(){return"fake"}bindTools(e){let r=[...this.tools,...e],a=r.map(t=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:t.name,description:t.description,parameters:(0,y3.toJsonSchema)(t.schema)}};case"anthropic":return{name:t.name,description:t.description,input_schema:(0,y3.toJsonSchema)(t.schema)};case"bedrock":return{toolSpec:{name:t.name,description:t.description,inputSchema:(0,y3.toJsonSchema)(t.schema)}};case"google":return{name:t.name,description:t.description,parameters:(0,y3.toJsonSchema)(t.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),i=this.toolStyle==="google"?[{functionDeclarations:a}]:a,s=new n({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return s.tools=r,s.withConfig({tools:i})}async _generate(e,r,a){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0]?.content??e[0].content??"";return{generations:[{text:"",message:new Au.AIMessage({content:i,tool_calls:this.chunks?.[0]?.tool_calls})}]}}async*_streamResponseChunks(e,r,a){if(this.thrownErrorString)throw new Error(this.thrownErrorString);if(this.chunks?.length){for(let t of this.chunks){let o=new BE.ChatGenerationChunk({message:new Au.AIMessageChunk({content:t.content,tool_calls:t.tool_calls,additional_kwargs:t.additional_kwargs??{}}),text:t.content?.toString()??""});yield o,await a?.handleLLMNewToken(t.content,void 0,void 0,void 0,void 0,{chunk:o})}return}let i=this.responses?.[0]??new Au.AIMessage(typeof e[0].content=="string"?e[0].content:""),s=typeof i.content=="string"?i.content:"";for(let t of s){await new Promise(l=>setTimeout(l,this.sleep));let o=new BE.ChatGenerationChunk({message:new Au.AIMessageChunk({content:t}),text:t});yield o,await a?.handleLLMNewToken(t,void 0,void 0,void 0,void 0,{chunk:o})}}};ea.FakeStreamingChatModel=zE;var WE=class extends vme.BaseRetriever{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["test","fake"]}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:[new ag.Document({pageContent:"foo"}),new ag.Document({pageContent:"bar"})]}),this.output=e?.output??this.output}async _getRelevantDocuments(e){return this.output}};ea.FakeRetriever=WE;var GE=class extends tP.BaseChatModel{static lc_name(){return"FakeListChatModel"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"i",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"emitCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1});let{responses:r,sleep:a,emitCustomEvent:i}=e;this.responses=r,this.sleep=a,this.emitCustomEvent=i??this.emitCustomEvent}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}async _generate(e,r,a){if(await this._sleepIfRequested(),r?.thrownErrorString)throw new Error(r.thrownErrorString);if(this.emitCustomEvent&&await a?.handleCustomEvent("some_test_event",{someval:!0}),r?.stop?.length)return{generations:[this._formatGeneration(r.stop[0])]};{let i=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(i)],llmOutput:{}}}}_formatGeneration(e){return{message:new Au.AIMessage(e),text:e}}async*_streamResponseChunks(e,r,a){let i=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&await a?.handleCustomEvent("some_test_event",{someval:!0});for await(let s of i){if(await this._sleepIfRequested(),r?.thrownErrorString)throw new Error(r.thrownErrorString);yield this._createResponseChunk(s),a?.handleLLMNewToken(s)}}async _sleepIfRequested(){this.sleep!==void 0&&await this._sleep()}async _sleep(){return new Promise(e=>{setTimeout(()=>e(),this.sleep)})}_createResponseChunk(e){return new BE.ChatGenerationChunk({message:new Au.AIMessageChunk({content:e}),text:e})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}withStructuredOutput(e,r){return wV.RunnableLambda.from(async a=>{let i=await this.invoke(a);if(i.tool_calls?.[0]?.args)return i.tool_calls[0].args;if(typeof i.content=="string")return JSON.parse(i.content);throw new Error("No structured output found")})}};ea.FakeListChatModel=GE;var HE=class extends _V.BaseChatMessageHistory{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async addUserMessage(e){this.messages.push(new Au.HumanMessage(e))}async addAIChatMessage(e){this.messages.push(new Au.AIMessage(e))}async clear(){this.messages=[]}};ea.FakeChatMessageHistory=HE;var KE=class extends _V.BaseListChatMessageHistory{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}async addMessage(e){this.messages.push(e)}async getMessages(){return this.messages}};ea.FakeListChatMessageHistory=KE;var ZE=class extends SV.BaseTracer{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"fake_tracer"}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}persistRun(e){return this.runs.push(e),Promise.resolve()}};ea.FakeTracer=ZE;var JE=class extends yme.StructuredTool{constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}async _call(e,r){return JSON.stringify(e)}};ea.FakeTool=JE;var XE=class extends CV.Embeddings{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}};ea.FakeEmbeddings=XE;var YE=class extends CV.Embeddings{constructor(e){super(e??{}),Object.defineProperty(this,"vectorSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorSize=e?.vectorSize??4}async embedDocuments(e){return Promise.all(e.map(r=>this.embedQuery(r)))}async embedQuery(e){let r=e;r=r.toLowerCase().replaceAll(/[^a-z ]/g,"");let a=r.length%this.vectorSize,i=a===0?0:this.vectorSize-a,s=r.length+i;r=r.padEnd(s," ");let t=r.length/this.vectorSize,o=[];for(let d=0;d<r.length;d+=t)o.push(r.slice(d,d+t));return o.map(d=>{let c=0;for(let u=0;u<d.length;u+=1)c+=d===" "?0:d.charCodeAt(u);return c%26/26})}};ea.SyntheticEmbeddings=YE;var QE=class extends SV.BaseTracer{constructor(){super(),Object.defineProperty(this,"runPromiseResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"single_run_extractor"}),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}async persistRun(e){this.runPromiseResolver(e)}async extract(){return this.runPromise}};ea.SingleRunExtractor=QE;var eP=class n extends _me.VectorStore{_vectorstoreType(){return"memory"}constructor(e,{similarity:r,...a}={}){super(e,a),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=r??xme.cosine}async addDocuments(e){let r=e.map(({pageContent:a})=>a);return this.addVectors(await this.embeddings.embedDocuments(r),e)}async addVectors(e,r){let a=e.map((i,s)=>({content:r[s].pageContent,embedding:i,metadata:r[s].metadata}));this.memoryVectors=this.memoryVectors.concat(a)}async similaritySearchVectorWithScore(e,r,a){let i=l=>{if(!a)return!0;let d=new ag.Document({metadata:l.metadata,pageContent:l.content});return a(d)},s=this.memoryVectors.filter(i);return s.map((l,d)=>({similarity:this.similarity(e,l.embedding),index:d})).sort((l,d)=>l.similarity>d.similarity?-1:0).slice(0,r).map(l=>[new ag.Document({metadata:s[l.index].metadata,pageContent:s[l.index].content}),l.similarity])}static async fromTexts(e,r,a,i){let s=[];for(let t=0;t<e.length;t+=1){let o=Array.isArray(r)?r[t]:r,l=new ag.Document({pageContent:e[t],metadata:o});s.push(l)}return n.fromDocuments(s,a,i)}static async fromDocuments(e,r,a){let i=new this(r,a);return await i.addDocuments(e),i}static async fromExistingIndex(e,r){return new this(e,r)}};ea.FakeVectorStore=eP});var rP=te(qp=>{"use strict";var wme=qp&&qp.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Sme=qp&&qp.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wme(e,n,r)};Object.defineProperty(qp,"__esModule",{value:!0});Sme(c0(),qp)});var EV=te(ft=>{"use strict";var Cme=ft&&ft.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Ame=ft&&ft.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),vr=ft&&ft.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Cme(e,n,r);return Ame(e,n),e};Object.defineProperty(ft,"__esModule",{value:!0});ft.vectorstores=ft.utils__types=ft.utils__tiktoken=ft.utils__testing=ft.utils__stream=ft.utils__math=ft.utils__json_schema=ft.utils__json_patch=ft.utils__hash=ft.utils__function_calling=ft.utils__env=ft.utils__chunk_array=ft.utils__async_caller=ft.tracers__tracer_langchain_v1=ft.tracers__tracer_langchain=ft.tracers__run_collector=ft.tracers__log_stream=ft.tracers__initialize=ft.tracers__console=ft.tracers__base=ft.tools=ft.stores=ft.retrievers=ft.runnables=ft.prompt_values=ft.prompts=ft.outputs=ft.output_parsers=ft.messages=ft.memory=ft.load__serializable=ft.language_models__llms=ft.language_models__chat_models=ft.language_models__base=ft.example_selectors=ft.embeddings=ft.documents=ft.chat_history=ft.callbacks__promises=ft.callbacks__manager=ft.callbacks__base=ft.caches=ft.agents=void 0;ft.agents=vr(Wj());ft.caches=vr(U9());ft.callbacks__base=vr(Od());ft.callbacks__manager=vr(nc());ft.callbacks__promises=vr(C9());ft.chat_history=vr(dS());ft.documents=vr(hS());ft.embeddings=vr(qy());ft.example_selectors=vr(TL());ft.language_models__base=vr(l0());ft.language_models__chat_models=vr(t6());ft.language_models__llms=vr(a6());ft.load__serializable=vr(co());ft.memory=vr(WL());ft.messages=vr(xl());ft.output_parsers=vr(dC());ft.outputs=vr(pc());ft.prompts=vr(CE());ft.prompt_values=vr(o0());ft.runnables=vr(o6());ft.retrievers=vr(e3());ft.stores=vr(nV());ft.tools=vr(l3());ft.tracers__base=vr(po());ft.tracers__console=vr(X8());ft.tracers__initialize=vr(fV());ft.tracers__log_stream=vr(p7());ft.tracers__run_collector=vr(hV());ft.tracers__tracer_langchain=vr(ev());ft.tracers__tracer_langchain_v1=vr(FE());ft.utils__async_caller=vr(t0());ft.utils__chunk_array=vr(RE());ft.utils__env=vr(Go());ft.utils__function_calling=vr(IE());ft.utils__hash=vr(L9());ft.utils__json_patch=vr(S6());ft.utils__json_schema=vr(eg());ft.utils__math=vr(ME());ft.utils__stream=vr(vo());ft.utils__testing=vr(AV());ft.utils__tiktoken=vr(Zy());ft.utils__types=vr(rP());ft.vectorstores=vr(v3())});var TV=te(Eu=>{"use strict";var Eme=Eu&&Eu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Pme=Eu&&Eu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Tme=Eu&&Eu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Eme(e,n,r);return Pme(e,n),e};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.load=void 0;var Ome=co(),Fme=Vj(),kme=Tme(EV()),PV=U8(),Rme=Go();function Ime(n){let e={};for(let r=n;r&&r.prototype;r=Object.getPrototypeOf(r))Object.assign(e,Reflect.get(r.prototype,"lc_aliases"));return Object.entries(e).reduce((r,[a,i])=>(r[i]=a,r),{})}async function _3(n){let{optionalImportsMap:e={},optionalImportEntrypoints:r=[],importMap:a={},secretsMap:i={},path:s=["$"]}=this,t=s.join(".");if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="secret"){let o=n,[l]=o.id;if(l in i)return i[l];{let d=(0,Rme.getEnvironmentVariable)(l);if(d)return d;throw new Error(`Missing key "${l}" for ${t} in load(secretsMap={})`)}}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="not_implemented"){let l=JSON.stringify(n);throw new Error(`Trying to load an object that doesn't implement serialization: ${t} -> ${l}`)}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&"kwargs"in n&&n.lc===1){let o=n,l=JSON.stringify(o),[d,...c]=o.id.slice().reverse(),y=c.reverse(),u={langchain_core:kme,langchain:a},S=null,V=[y.join("/")];y[0]==="langchain_community"&&V.push(["langchain",...y.slice(1)].join("/"));let U=V.find(k=>k in e);if(Fme.optionalImportEntrypoints.concat(r).includes(y.join("/"))||U)if(U!==void 0)S=await e[U];else throw new Error(`Missing key "${y.join("/")}" for ${t} in load(optionalImportsMap={})`);else{let k;if(y[0]==="langchain"||y[0]==="langchain_core")k=u[y[0]],y.shift();else throw new Error(`Invalid namespace: ${t} -> ${l}`);if(y.length===0)throw new Error(`Invalid namespace: ${t} -> ${l}`);let T;do{if(T=y.join("__"),T in k)break;y.pop()}while(y.length>0);T in k&&(S=k[T])}if(typeof S!="object"||S===null)throw new Error(`Invalid namespace: ${t} -> ${l}`);let z=S[d]??Object.values(S).find(k=>typeof k=="function"&&(0,Ome.get_lc_unique_name)(k)===d);if(typeof z!="function")throw new Error(`Invalid identifer: ${t} -> ${l}`);let D=await _3.call({...this,path:[...s,"kwargs"]},o.kwargs);if(o.type==="constructor"){let k=new z((0,PV.mapKeys)(D,PV.keyFromJson,Ime(z)));return Object.defineProperty(k.constructor,"name",{value:d}),k}else throw new Error(`Invalid type: ${t} -> ${l}`)}else if(typeof n=="object"&&n!==null)return Array.isArray(n)?Promise.all(n.map((o,l)=>_3.call({...this,path:[...s,`${l}`]},o))):Object.fromEntries(await Promise.all(Object.entries(n).map(async([o,l])=>[o,await _3.call({...this,path:[...s,o]},l)])));return n}async function Dme(n,e){let r=JSON.parse(n);return _3.call({...e},r)}Eu.load=Dme});var FV=te((Hje,OV)=>{OV.exports=TV()});var RV=te(w3=>{"use strict";Object.defineProperty(w3,"__esModule",{value:!0});w3.stringify=void 0;var kV="[...]",Nme="[Circular]",x3=[],z0=[];function Mme(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function jme(n,e,r,a){typeof a>"u"&&(a=Mme()),nP(n,"",0,[],void 0,0,a);var i;try{z0.length===0?i=JSON.stringify(n,e,r):i=JSON.stringify(n,Bme(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;x3.length!==0;){var s=x3.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}w3.stringify=jme;function aP(n,e,r,a){var i=Object.getOwnPropertyDescriptor(a,r);i.get!==void 0?i.configurable?(Object.defineProperty(a,r,{value:n}),x3.push([a,r,e,i])):z0.push([e,r,n]):(a[r]=n,x3.push([a,r,e]))}function nP(n,e,r,a,i,s,t){s+=1;var o;if(typeof n=="object"&&n!==null){for(o=0;o<a.length;o++)if(a[o]===n){aP(Nme,n,e,i);return}if(typeof t.depthLimit<"u"&&s>t.depthLimit){aP(kV,n,e,i);return}if(typeof t.edgesLimit<"u"&&r+1>t.edgesLimit){aP(kV,n,e,i);return}if(a.push(n),Array.isArray(n))for(o=0;o<n.length;o++)nP(n[o],o,o,a,n,s,t);else{var l=Object.keys(n);for(o=0;o<l.length;o++){var d=l[o];nP(n[d],d,o,a,n,s,t)}}a.pop()}}function Bme(n){return n=typeof n<"u"?n:function(e,r){return r},function(e,r){if(z0.length>0)for(var a=0;a<z0.length;a++){var i=z0[a];if(i[1]===e&&i[0]===r){r=i[2],z0.splice(a,1);break}}return n.call(this,e,r)}}});var IV=te(S3=>{"use strict";Object.defineProperty(S3,"__esModule",{value:!0});S3.JsonPlusSerializer=void 0;var Lme=FV(),qme=RV();function Ume(n){return n!==null&&n.lc===1&&n.type==="constructor"&&Array.isArray(n.id)}async function sP(n){if(n&&typeof n=="object"){if(Array.isArray(n))return await Promise.all(n.map(r=>sP(r)));{let e={};for(let[r,a]of Object.entries(n))e[r]=await sP(a);if(e.lc===2&&e.type==="undefined")return;if(e.lc===2&&e.type==="constructor"&&Array.isArray(e.id))try{let r=e.id[e.id.length-1],a;switch(r){case"Set":a=Set;break;case"Map":a=Map;break;case"RegExp":a=RegExp;break;case"Error":a=Error;break;default:return e}return e.method?a[e.method](...e.args||[]):new a(...e.args||[])}catch{return e}else if(Ume(e))return(0,Lme.load)(JSON.stringify(e));return e}}return n}function iP(n,e,r,a){return{lc:2,type:"constructor",id:[n.name],method:e??null,args:r??[],kwargs:a??{}}}function $me(n){return n===void 0?{lc:2,type:"undefined"}:n instanceof Set||n instanceof Map?iP(n.constructor,void 0,[Array.from(n)]):n instanceof RegExp?iP(RegExp,void 0,[n.source,n.flags]):n instanceof Error?iP(n.constructor,void 0,[n.message]):n?.lg_name==="Send"?{node:n.node,args:n.args}:n}var oP=class{_dumps(e){return new TextEncoder().encode((0,qme.stringify)(e,(a,i)=>$me(i)))}dumpsTyped(e){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]}async _loads(e){let r=JSON.parse(e);return sP(r)}async loadsTyped(e,r){if(e==="bytes")return typeof r=="string"?new TextEncoder().encode(r):r;if(e==="json")return this._loads(typeof r=="string"?r:new TextDecoder().decode(r));throw new Error(`Unknown serialization type: ${e}`)}};S3.JsonPlusSerializer=oP});var cP=te(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.getCheckpointId=yn.WRITES_IDX_MAP=yn.maxChannelVersion=yn.compareChannelVersions=yn.BaseCheckpointSaver=yn.copyCheckpoint=yn.emptyCheckpoint=yn.deepCopy=void 0;var Vme=B9(),C3=dv(),zme=IV();function lP(n){if(typeof n!="object"||n===null)return n;let e=Array.isArray(n)?[]:{};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=lP(n[r]));return e}yn.deepCopy=lP;function Wme(){return{v:1,id:(0,Vme.uuid6)(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{},pending_sends:[]}}yn.emptyCheckpoint=Wme;function Gme(n){return{v:n.v,id:n.id,ts:n.ts,channel_values:{...n.channel_values},channel_versions:{...n.channel_versions},versions_seen:lP(n.versions_seen),pending_sends:[...n.pending_sends]}}yn.copyCheckpoint=Gme;var uP=class{constructor(e){Object.defineProperty(this,"serde",{enumerable:!0,configurable:!0,writable:!0,value:new zme.JsonPlusSerializer}),this.serde=e||this.serde}async get(e){let r=await this.getTuple(e);return r?r.checkpoint:void 0}getNextVersion(e,r){if(typeof e=="string")throw new Error("Please override this method to use string versions.");return e!==void 0&&typeof e=="number"?e+1:1}};yn.BaseCheckpointSaver=uP;function DV(n,e){return typeof n=="number"&&typeof e=="number"?Math.sign(n-e):String(n).localeCompare(String(e))}yn.compareChannelVersions=DV;function Hme(...n){return n.reduce((e,r,a)=>a===0?r:DV(e,r)>=0?e:r)}yn.maxChannelVersion=Hme;yn.WRITES_IDX_MAP={[C3.ERROR]:-1,[C3.SCHEDULED]:-2,[C3.INTERRUPT]:-3,[C3.RESUME]:-4};function Kme(n){return n.configurable?.checkpoint_id||n.configurable?.thread_ts||""}yn.getCheckpointId=Kme});var NV=te(E3=>{"use strict";Object.defineProperty(E3,"__esModule",{value:!0});E3.MemorySaver=void 0;var A3=cP(),Zme=dv();function ng(n,e,r){return JSON.stringify([n,e,r])}var dP=class extends A3.BaseCheckpointSaver{constructor(e){super(e),Object.defineProperty(this,"storage",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"writes",{enumerable:!0,configurable:!0,writable:!0,value:{}})}async _getPendingSends(e,r,a){let i=[];if(a!==void 0){let s=ng(e,r,a);i=await Promise.all(Object.values(this.writes[s]||{})?.filter(([t,o])=>o===Zme.TASKS).map(([t,o,l])=>this.serde.loadsTyped("json",l))??[])}return i}async getTuple(e){let r=e.configurable?.thread_id,a=e.configurable?.checkpoint_ns??"",i=(0,A3.getCheckpointId)(e);if(i){let s=this.storage[r]?.[a]?.[i];if(s!==void 0){let[t,o,l]=s,d=ng(r,a,i),c=await this._getPendingSends(r,a,l),y={...await this.serde.loadsTyped("json",t),pending_sends:c},u=await Promise.all(Object.values(this.writes[d]||{}).map(async([V,U,z])=>[V,U,await this.serde.loadsTyped("json",z)])),S={config:e,checkpoint:y,metadata:await this.serde.loadsTyped("json",o),pendingWrites:u};return l!==void 0&&(S.parentConfig={configurable:{thread_id:r,checkpoint_ns:a,checkpoint_id:l}}),S}}else{let s=this.storage[r]?.[a];if(s!==void 0){i=Object.keys(s).sort((U,z)=>z.localeCompare(U))[0];let t=s[i],[o,l,d]=t,c=ng(r,a,i),y=await this._getPendingSends(r,a,d),u={...await this.serde.loadsTyped("json",o),pending_sends:y},S=await Promise.all(Object.values(this.writes[c]||{}).map(async([U,z,D])=>[U,z,await this.serde.loadsTyped("json",D)])),V={config:{configurable:{thread_id:r,checkpoint_id:i,checkpoint_ns:a}},checkpoint:u,metadata:await this.serde.loadsTyped("json",l),pendingWrites:S};return d!==void 0&&(V.parentConfig={configurable:{thread_id:r,checkpoint_ns:a,checkpoint_id:d}}),V}}}async*list(e,r){let{before:a,limit:i,filter:s}=r??{},t=e.configurable?.thread_id?[e.configurable?.thread_id]:Object.keys(this.storage),o=e.configurable?.checkpoint_ns,l=e.configurable?.checkpoint_id;for(let d of t)for(let c of Object.keys(this.storage[d]??{})){if(o!==void 0&&c!==o)continue;let y=this.storage[d]?.[c]??{},u=Object.entries(y).sort((S,V)=>V[0].localeCompare(S[0]));for(let[S,[V,U,z]]of u){if(l&&S!==l||a&&a.configurable?.checkpoint_id&&S>=a.configurable.checkpoint_id)continue;let D=await this.serde.loadsTyped("json",U);if(s&&!Object.entries(s).every(([b,f])=>D[b]===f))continue;if(i!==void 0){if(i<=0)break;i-=1}let k=ng(d,c,S),T=Object.values(this.writes[k]||{}),R=await this._getPendingSends(d,c,z),g=await Promise.all(T.map(async([b,f,p])=>[b,f,await this.serde.loadsTyped("json",p)])),m={...await this.serde.loadsTyped("json",V),pending_sends:R},v={config:{configurable:{thread_id:d,checkpoint_ns:c,checkpoint_id:S}},checkpoint:m,metadata:D,pendingWrites:g};z!==void 0&&(v.parentConfig={configurable:{thread_id:d,checkpoint_ns:c,checkpoint_id:z}}),yield v}}}async put(e,r,a){let i=(0,A3.copyCheckpoint)(r);delete i.pending_sends;let s=e.configurable?.thread_id,t=e.configurable?.checkpoint_ns??"";if(s===void 0)throw new Error('Failed to put checkpoint. The passed RunnableConfig is missing a required "thread_id" field in its "configurable" property.');this.storage[s]||(this.storage[s]={}),this.storage[s][t]||(this.storage[s][t]={});let[,o]=this.serde.dumpsTyped(i),[,l]=this.serde.dumpsTyped(a);return this.storage[s][t][r.id]=[o,l,e.configurable?.checkpoint_id],{configurable:{thread_id:s,checkpoint_ns:t,checkpoint_id:r.id}}}async putWrites(e,r,a){let i=e.configurable?.thread_id,s=e.configurable?.checkpoint_ns,t=e.configurable?.checkpoint_id;if(i===void 0)throw new Error('Failed to put writes. The passed RunnableConfig is missing a required "thread_id" field in its "configurable" property');if(t===void 0)throw new Error('Failed to put writes. The passed RunnableConfig is missing a required "checkpoint_id" field in its "configurable" property.');let o=ng(i,s,t),l=this.writes[o];this.writes[o]===void 0&&(this.writes[o]={}),r.forEach(([d,c],y)=>{let[,u]=this.serde.dumpsTyped(c),S=[a,A3.WRITES_IDX_MAP[d]||y],V=`${S[0]},${S[1]}`;S[1]>=0&&l&&V in l||(this.writes[o][V]=[a,d,u])})}};E3.MemorySaver=dP});var jV=te(MV=>{"use strict";Object.defineProperty(MV,"__esModule",{value:!0})});var LV=te(BV=>{"use strict";Object.defineProperty(BV,"__esModule",{value:!0})});var P3=te(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.BaseStore=Pu.tokenizePath=Pu.getTextAtPath=Pu.InvalidNamespaceError=void 0;var Lc=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};Pu.InvalidNamespaceError=Lc;function Jme(n){if(n.length===0)throw new Lc("Namespace cannot be empty.");for(let e of n){if(typeof e!="string")throw new Lc(`Invalid namespace label '${e}' found in ${n}. Namespace labels must be strings, but got ${typeof e}.`);if(e.includes("."))throw new Lc(`Invalid namespace label '${e}' found in ${n}. Namespace labels cannot contain periods ('.').`);if(e==="")throw new Lc(`Namespace labels cannot be empty strings. Got ${e} in ${n}`)}if(n[0]==="langgraph")throw new Lc(`Root label for namespace cannot be "langgraph". Got: ${n}`)}function Xme(n,e){let r=e.split("."),a=n;for(let i of r){if(i.includes("[")){let[s,t]=i.split("["),o=t.replace("]","");if(!a[s])return[];if(o==="*"){let d=[];for(let c of a[s])typeof c=="string"&&d.push(c);return d}let l=parseInt(o,10);if(Number.isNaN(l))return[];a=a[s][l]}else a=a[i];if(a===void 0)return[]}return typeof a=="string"?[a]:[]}Pu.getTextAtPath=Xme;function Yme(n){return n.split(".")}Pu.tokenizePath=Yme;var pP=class{async get(e,r){return(await this.batch([{namespace:e,key:r}]))[0]}async search(e,r={}){let{filter:a,limit:i=10,offset:s=0,query:t}=r;return(await this.batch([{namespacePrefix:e,filter:a,limit:i,offset:s,query:t}]))[0]}async put(e,r,a,i){Jme(e),await this.batch([{namespace:e,key:r,value:a,index:i}])}async delete(e,r){await this.batch([{namespace:e,key:r,value:null}])}async listNamespaces(e={}){let{prefix:r,suffix:a,maxDepth:i,limit:s=100,offset:t=0}=e,o=[];return r&&o.push({matchType:"prefix",path:r}),a&&o.push({matchType:"suffix",path:a}),(await this.batch([{matchConditions:o.length?o:void 0,maxDepth:i,limit:s,offset:t}]))[0]}start(){}stop(){}};Pu.BaseStore=pP});var qV=te(T3=>{"use strict";Object.defineProperty(T3,"__esModule",{value:!0});T3.AsyncBatchedStore=void 0;var Qme=P3(),e1e=n=>"lg_name"in n&&n.lg_name==="AsyncBatchedStore"?n.store:n,fP=class extends Qme.BaseStore{constructor(e){super(),Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"AsyncBatchedStore"}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"nextKey",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"processingTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.store=e1e(e)}get isRunning(){return this.running}async batch(e){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")}async get(e,r){return this.enqueueOperation({namespace:e,key:r})}async search(e,r){let{filter:a,limit:i=10,offset:s=0,query:t}=r||{};return this.enqueueOperation({namespacePrefix:e,filter:a,limit:i,offset:s,query:t})}async put(e,r,a){return this.enqueueOperation({namespace:e,key:r,value:a})}async delete(e,r){return this.enqueueOperation({namespace:e,key:r,value:null})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}async stop(){this.running=!1,this.processingTask&&await this.processingTask}enqueueOperation(e){return new Promise((r,a)=>{let i=this.nextKey;this.nextKey+=1,this.queue.set(i,{operation:e,resolve:r,reject:a})})}async processBatchQueue(){for(;this.running;){if(await new Promise(r=>{setTimeout(r,0)}),this.queue.size===0)continue;let e=new Map(this.queue);this.queue.clear();try{let r=Array.from(e.values()).map(({operation:i})=>i),a=await this.store.batch(r);e.forEach(({resolve:i},s)=>{let t=Array.from(e.keys()).indexOf(s);i(a[t])})}catch(r){e.forEach(({reject:a})=>{a(r)})}}}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};T3.AsyncBatchedStore=fP});var UV=te(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.cosineSimilarity=Tu.getTextAtPath=Tu.compareValues=Tu.tokenizePath=void 0;function hP(n){if(!n)return[];let e=[],r=[],a=0;for(;a<n.length;){let i=n[a];if(i==="["){r.length&&(e.push(r.join("")),r=[]);let s=1,t=["["];for(a+=1;a<n.length&&s>0;)n[a]==="["?s+=1:n[a]==="]"&&(s-=1),t.push(n[a]),a+=1;e.push(t.join(""));continue}else if(i==="{"){r.length&&(e.push(r.join("")),r=[]);let s=1,t=["{"];for(a+=1;a<n.length&&s>0;)n[a]==="{"?s+=1:n[a]==="}"&&(s-=1),t.push(n[a]),a+=1;e.push(t.join(""));continue}else i==="."?r.length&&(e.push(r.join("")),r=[]):r.push(i);a+=1}return r.length&&e.push(r.join("")),e}Tu.tokenizePath=hP;function t1e(n){return typeof n=="object"&&n!==null&&Object.keys(n).every(e=>e==="$eq"||e==="$ne"||e==="$gt"||e==="$gte"||e==="$lt"||e==="$lte"||e==="$in"||e==="$nin")}function r1e(n,e){return t1e(e)?Object.keys(e).filter(a=>a.startsWith("$")).every(a=>{let i=e[a];switch(a){case"$eq":return n===i;case"$ne":return n!==i;case"$gt":return Number(n)>Number(i);case"$gte":return Number(n)>=Number(i);case"$lt":return Number(n)<Number(i);case"$lte":return Number(n)<=Number(i);case"$in":return Array.isArray(i)?i.includes(n):!1;case"$nin":return Array.isArray(i)?!i.includes(n):!0;default:return!1}}):n===e}Tu.compareValues=r1e;function a1e(n,e){if(!e||e==="$")return[JSON.stringify(n,null,2)];let r=Array.isArray(e)?e:hP(e);function a(i,s,t){if(t>=s.length)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?[String(i)]:i==null?[]:Array.isArray(i)||typeof i=="object"?[JSON.stringify(i,null,2)]:[];let o=s[t],l=[];if(t===0&&o==="$"&&l.push(JSON.stringify(i,null,2)),o.startsWith("[")&&o.endsWith("]")){if(!Array.isArray(i))return[];let d=o.slice(1,-1);if(d==="*")for(let c of i)l.push(...a(c,s,t+1));else try{let c=parseInt(d,10);c<0&&(c=i.length+c),c>=0&&c<i.length&&l.push(...a(i[c],s,t+1))}catch{return[]}}else if(o.startsWith("{")&&o.endsWith("}")){if(typeof i!="object"||i===null)return[];let d=o.slice(1,-1).split(",").map(c=>c.trim());for(let c of d){let y=hP(c);if(y.length){let u=i;for(let S of y)if(u&&typeof u=="object"&&S in u)u=u[S];else{u=void 0;break}u!==void 0&&(typeof u=="string"||typeof u=="number"||typeof u=="boolean"?l.push(String(u)):(Array.isArray(u)||typeof u=="object")&&l.push(JSON.stringify(u,null,2)))}}}else if(o==="*"){if(Array.isArray(i))for(let d of i)l.push(...a(d,s,t+1));else if(typeof i=="object"&&i!==null)for(let d of Object.values(i))l.push(...a(d,s,t+1))}else typeof i=="object"&&i!==null&&o in i&&l.push(...a(i[o],s,t+1));return l}return a(n,r,0)}Tu.getTextAtPath=a1e;function n1e(n,e){if(n.length!==e.length)throw new Error("Vectors must have the same length");let r=n.reduce((s,t,o)=>s+t*e[o],0),a=Math.sqrt(n.reduce((s,t)=>s+t*t,0)),i=Math.sqrt(e.reduce((s,t)=>s+t*t,0));return a===0||i===0?0:r/(a*i)}Tu.cosineSimilarity=n1e});var $V=te(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});W0.MemoryStore=W0.InMemoryStore=void 0;var i1e=P3(),O3=UV(),F3=class extends i1e.BaseStore{constructor(e){super(),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"vectors",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_indexConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e?.index&&(this._indexConfig={...e.index,__tokenizedFields:(e.index.fields??["$"]).map(r=>[r,r==="$"?[r]:(0,O3.tokenizePath)(r)])})}async batch(e){let r=[],a=new Map,i=new Map;for(let s=0;s<e.length;s+=1){let t=e[s];if("key"in t&&"namespace"in t&&!("value"in t))r.push(this.getOperation(t));else if("namespacePrefix"in t){let o=this.filterItems(t);i.set(s,[t,o]),r.push(null)}else if("value"in t){let o=`${t.namespace.join(":")}:${t.key}`;a.set(o,t),r.push(null)}else"matchConditions"in t&&r.push(this.listNamespacesOperation(t))}if(i.size>0)if(this._indexConfig?.embeddings){let s=new Set;for(let[l]of i.values())l.query&&s.add(l.query);let t=s.size>0?await Promise.all(Array.from(s).map(l=>this._indexConfig.embeddings.embedQuery(l))):[],o=Object.fromEntries(Array.from(s).map((l,d)=>[l,t[d]]));for(let[l,[d,c]]of i.entries())if(d.query&&o[d.query]){let y=o[d.query],u=this.scoreResults(c,y,d.offset??0,d.limit??10);r[l]=u}else r[l]=this.paginateResults(c.map(y=>({...y,score:void 0})),d.offset??0,d.limit??10)}else for(let[s,[t,o]]of i.entries())r[s]=this.paginateResults(o.map(l=>({...l,score:void 0})),t.offset??0,t.limit??10);if(a.size>0&&this._indexConfig?.embeddings){let s=this.extractTexts(Array.from(a.values()));if(Object.keys(s).length>0){let t=await this._indexConfig.embeddings.embedDocuments(Object.keys(s));this.insertVectors(s,t)}}for(let s of a.values())this.putOperation(s);return r}getOperation(e){let r=e.namespace.join(":");return this.data.get(r)?.get(e.key)??null}putOperation(e){let r=e.namespace.join(":");this.data.has(r)||this.data.set(r,new Map);let a=this.data.get(r);if(e.value===null)a.delete(e.key);else{let i=new Date;if(a.has(e.key)){let s=a.get(e.key);s.value=e.value,s.updatedAt=i}else a.set(e.key,{value:e.value,key:e.key,namespace:e.namespace,createdAt:i,updatedAt:i})}}listNamespacesOperation(e){let a=Array.from(this.data.keys()).map(i=>i.split(":"));return e.matchConditions&&e.matchConditions.length>0&&(a=a.filter(i=>e.matchConditions.every(s=>this.doesMatch(s,i)))),e.maxDepth!==void 0&&(a=Array.from(new Set(a.map(i=>i.slice(0,e.maxDepth).join(":")))).map(i=>i.split(":"))),a.sort((i,s)=>i.join(":").localeCompare(s.join(":"))),a.slice(e.offset??0,(e.offset??0)+(e.limit??a.length))}doesMatch(e,r){let{matchType:a,path:i}=e;if(a==="prefix")return i.length>r.length?!1:i.every((s,t)=>{let o=r[t];return s==="*"||o===s});if(a==="suffix")return i.length>r.length?!1:i.every((s,t)=>{let o=r[r.length-i.length+t];return s==="*"||o===s});throw new Error(`Unsupported match type: ${a}`)}filterItems(e){let r=[];for(let[i,s]of this.data.entries())i.startsWith(e.namespacePrefix.join(":"))&&r.push(...s.values());let a=r;return e.filter&&(a=r.filter(i=>Object.entries(e.filter).every(([s,t])=>(0,O3.compareValues)(i.value[s],t)))),a}scoreResults(e,r,a=0,i=10){let s=[],t=[],o=[];for(let u of e){let S=this.getVectors(u);if(S.length)for(let V of S)s.push(u),t.push(V);else o.push(u)}let d=this.cosineSimilarity(r,t).map((u,S)=>[u,s[S]]).sort((u,S)=>S[0]-u[0]),c=new Set,y=[];for(let[u,S]of d){let V=`${S.namespace.join(":")}:${S.key}`;if(c.has(V))continue;let U=c.size;if(U>=a+i)break;if(U<a){c.add(V);continue}c.add(V),y.push([u,S])}if(o.length&&y.length<i)for(let u of o.slice(0,i-y.length)){let S=`${u.namespace.join(":")}:${u.key}`;c.has(S)||(c.add(S),y.push([void 0,u]))}return y.map(([u,S])=>({...S,score:u}))}paginateResults(e,r,a){return e.slice(r,r+a)}extractTexts(e){if(!e.length||!this._indexConfig)return{};let r={};for(let a of e)if(a.value!==null&&a.index!==!1){let i=a.index===null||a.index===void 0?this._indexConfig.__tokenizedFields??[]:a.index.map(s=>[s,(0,O3.tokenizePath)(s)]);for(let[s,t]of i){let o=(0,O3.getTextAtPath)(a.value,t);o.length&&(o.length>1?o.forEach((l,d)=>{r[l]||(r[l]=[]),r[l].push([a.namespace,a.key,`${s}.${d}`])}):(r[o[0]]||(r[o[0]]=[]),r[o[0]].push([a.namespace,a.key,s])))}}return r}insertVectors(e,r){for(let[a,i]of Object.entries(e)){let s=r.shift();if(!s)throw new Error(`No embedding found for text: ${a}`);for(let[t,o,l]of i){let d=t.join(":");this.vectors.has(d)||this.vectors.set(d,new Map);let c=this.vectors.get(d);c.has(o)||c.set(o,new Map),c.get(o).set(l,s)}}}getVectors(e){let r=e.namespace.join(":"),a=e.key;if(!this.vectors.has(r))return[];let i=this.vectors.get(r);if(!i.has(a))return[];let s=i.get(a),t=Array.from(s.values());return t.length?t:[]}cosineSimilarity(e,r){if(!r.length)return[];let a=r.map(t=>t.reduce((o,l,d)=>o+l*e[d],0)),i=Math.sqrt(e.reduce((t,o)=>t+o*o,0)),s=r.map(t=>Math.sqrt(t.reduce((o,l)=>o+l*l,0)));return a.map((t,o)=>{let l=s[o];return i&&l?t/(i*l):0})}get indexConfig(){return this._indexConfig}};W0.InMemoryStore=F3;var mP=class extends F3{};W0.MemoryStore=mP});var VV=te(Il=>{"use strict";var s1e=Il&&Il.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),gP=Il&&Il.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&s1e(e,n,r)};Object.defineProperty(Il,"__esModule",{value:!0});gP(P3(),Il);gP(qV(),Il);gP($V(),Il)});var zV=te(Mi=>{"use strict";var o1e=Mi&&Mi.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),G0=Mi&&Mi.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&o1e(e,n,r)};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.MemorySaver=void 0;var u1e=NV();Object.defineProperty(Mi,"MemorySaver",{enumerable:!0,get:function(){return u1e.MemorySaver}});G0(cP(),Mi);G0(B9(),Mi);G0(jV(),Mi);G0(LV(),Mi);G0(dv(),Mi);G0(VV(),Mi)});var H0=te((sBe,WV)=>{WV.exports=zV()});var Dl=te(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.BaseChannel=void 0;Up.isBaseChannel=HV;Up.emptyChannels=c1e;Up.createCheckpoint=d1e;var GV=H0(),l1e=ln();function HV(n){return n!=null&&n.lg_is_channel===!0}var bP=class{constructor(){Object.defineProperty(this,"ValueType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"UpdateType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lg_is_channel",{enumerable:!0,configurable:!0,writable:!0,value:!0})}consume(){return!1}};Up.BaseChannel=bP;function c1e(n,e){let r=Object.fromEntries(Object.entries(n).filter(([,i])=>HV(i))),a={};for(let i in r)if(Object.prototype.hasOwnProperty.call(r,i)){let s=e.channel_values[i];a[i]=r[i].fromCheckpoint(s)}return a}function d1e(n,e,r){let a;if(e===void 0)a=n.channel_values;else{a={};for(let i of Object.keys(e))try{a[i]=e[i].checkpoint()}catch(s){if(s.name!==l1e.EmptyChannelError.unminifiable_name)throw s}}return{v:1,id:(0,GV.uuid6)(r),ts:new Date().toISOString(),channel_values:a,channel_versions:{...n.channel_versions},versions_seen:(0,GV.deepCopy)(n.versions_seen),pending_sends:n.pending_sends??[]}}});var R3=te(k3=>{"use strict";Object.defineProperty(k3,"__esModule",{value:!0});k3.BinaryOperatorAggregate=void 0;var KV=ln(),p1e=Dl(),vP=class n extends p1e.BaseChannel{constructor(e,r){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"BinaryOperatorAggregate"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"operator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"initialValueFactory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.operator=e,this.initialValueFactory=r,this.value=r?.()}fromCheckpoint(e){let r=new n(this.operator,this.initialValueFactory);return typeof e<"u"&&(r.value=e),r}update(e){let r=e;if(!r.length)return!1;this.value===void 0&&([this.value]=r,r=r.slice(1));for(let a of r)this.value!==void 0&&(this.value=this.operator(this.value,a));return!0}get(){if(this.value===void 0)throw new KV.EmptyChannelError;return this.value}checkpoint(){if(this.value===void 0)throw new KV.EmptyChannelError;return this.value}};k3.BinaryOperatorAggregate=vP});var D3=te(I3=>{"use strict";Object.defineProperty(I3,"__esModule",{value:!0});I3.LastValue=void 0;var yP=ln(),f1e=Dl(),_P=class n extends f1e.BaseChannel{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValue"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]})}fromCheckpoint(e){let r=new n;return typeof e<"u"&&(r.value=[e]),r}update(e){if(e.length===0)return!1;if(e.length!==1)throw new yP.InvalidUpdateError("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new yP.EmptyChannelError;return this.value[0]}checkpoint(){if(this.value.length===0)throw new yP.EmptyChannelError;return this.value[0]}};I3.LastValue=_P});var qa=te(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.Command=nt.Send=nt.CHECKPOINT_NAMESPACE_END=nt.CHECKPOINT_NAMESPACE_SEPARATOR=nt.RESERVED=nt.NULL_TASK_ID=nt.TASK_NAMESPACE=nt.PULL=nt.PUSH=nt.TASKS=nt.SELF=nt.TAG_NOSTREAM=nt.TAG_HIDDEN=nt.RECURSION_LIMIT_DEFAULT=nt.RUNTIME_PLACEHOLDER=nt.PREVIOUS=nt.RETURN=nt.NO_WRITES=nt.RESUME=nt.INTERRUPT=nt.CONFIG_KEY_ABORT_SIGNALS=nt.CONFIG_KEY_CHECKPOINT_MAP=nt.CONFIG_KEY_NODE_FINISHED=nt.CONFIG_KEY_CHECKPOINT_NS=nt.CONFIG_KEY_CHECKPOINT_ID=nt.CONFIG_KEY_PREVIOUS_STATE=nt.CONFIG_KEY_SCRATCHPAD=nt.CONFIG_KEY_RESUME_VALUE=nt.CONFIG_KEY_STREAM=nt.CONFIG_KEY_TASK_ID=nt.CONFIG_KEY_RESUMING=nt.CONFIG_KEY_CHECKPOINTER=nt.CONFIG_KEY_READ=nt.CONFIG_KEY_CALL=nt.CONFIG_KEY_SEND=nt.ERROR=nt.COPY=nt.INPUT=nt.END=nt.START=void 0;nt._isSendInterface=ZV;nt._isSend=wP;nt.isCommand=xP;nt._deserializeCommandSendObjectGraph=J0;nt.START="__start__";nt.END="__end__";nt.INPUT="__input__";nt.COPY="__copy__";nt.ERROR="__error__";nt.CONFIG_KEY_SEND="__pregel_send";nt.CONFIG_KEY_CALL="__pregel_call";nt.CONFIG_KEY_READ="__pregel_read";nt.CONFIG_KEY_CHECKPOINTER="__pregel_checkpointer";nt.CONFIG_KEY_RESUMING="__pregel_resuming";nt.CONFIG_KEY_TASK_ID="__pregel_task_id";nt.CONFIG_KEY_STREAM="__pregel_stream";nt.CONFIG_KEY_RESUME_VALUE="__pregel_resume_value";nt.CONFIG_KEY_SCRATCHPAD="__pregel_scratchpad";nt.CONFIG_KEY_PREVIOUS_STATE="__pregel_previous";nt.CONFIG_KEY_CHECKPOINT_ID="checkpoint_id";nt.CONFIG_KEY_CHECKPOINT_NS="checkpoint_ns";nt.CONFIG_KEY_NODE_FINISHED="__pregel_node_finished";nt.CONFIG_KEY_CHECKPOINT_MAP="checkpoint_map";nt.CONFIG_KEY_ABORT_SIGNALS="__pregel_abort_signals";nt.INTERRUPT="__interrupt__";nt.RESUME="__resume__";nt.NO_WRITES="__no_writes__";nt.RETURN="__return__";nt.PREVIOUS="__previous__";nt.RUNTIME_PLACEHOLDER="__pregel_runtime_placeholder__";nt.RECURSION_LIMIT_DEFAULT=25;nt.TAG_HIDDEN="langsmith:hidden";nt.TAG_NOSTREAM="langsmith:nostream";nt.SELF="__self__";nt.TASKS="__pregel_tasks";nt.PUSH="__pregel_push";nt.PULL="__pregel_pull";nt.TASK_NAMESPACE="6ba7b831-9dad-11d1-80b4-00c04fd430c8";nt.NULL_TASK_ID="00000000-0000-0000-0000-000000000000";nt.RESERVED=[nt.TAG_HIDDEN,nt.INPUT,nt.INTERRUPT,nt.RESUME,nt.ERROR,nt.NO_WRITES,nt.TASKS,nt.CONFIG_KEY_SEND,nt.CONFIG_KEY_READ,nt.CONFIG_KEY_CHECKPOINTER,nt.CONFIG_KEY_STREAM,nt.CONFIG_KEY_RESUMING,nt.CONFIG_KEY_TASK_ID,nt.CONFIG_KEY_CALL,nt.CONFIG_KEY_RESUME_VALUE,nt.CONFIG_KEY_SCRATCHPAD,nt.CONFIG_KEY_PREVIOUS_STATE,nt.CONFIG_KEY_CHECKPOINT_MAP,nt.CONFIG_KEY_CHECKPOINT_NS,nt.CONFIG_KEY_CHECKPOINT_ID];nt.CHECKPOINT_NAMESPACE_SEPARATOR="|";nt.CHECKPOINT_NAMESPACE_END=":";function ZV(n){let e=n;return e!=null&&typeof e.node=="string"&&e.args!==void 0}var K0=class{constructor(e,r){Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Send"}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=e,this.args=J0(r)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};nt.Send=K0;function wP(n){return n instanceof K0}var Z0=class{constructor(e){Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Command"}),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"goto",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.resume=e.resume,this.graph=e.graph,this.update=e.update,e.goto&&(this.goto=Array.isArray(e.goto)?J0(e.goto):[J0(e.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let e;return typeof this.goto=="string"?e=this.goto:wP(this.goto)?e=this.goto.toJSON():e=this.goto?.map(r=>typeof r=="string"?r:r.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:e}}};nt.Command=Z0;Object.defineProperty(Z0,"PARENT",{enumerable:!0,configurable:!0,writable:!0,value:"__parent__"});function xP(n){return typeof n!="object"||n==null?!1:"lg_name"in n&&n.lg_name==="Command"}function J0(n,e=new Map){if(n!=null&&typeof n=="object"){if(e.has(n))return e.get(n);let r;if(Array.isArray(n))r=[],e.set(n,r),n.forEach((a,i)=>{r[i]=J0(a,e)});else if(xP(n)&&!(n instanceof Z0))r=new Z0(n),e.set(n,r);else if(ZV(n)&&!(n instanceof K0))r=new K0(n.node,n.args),e.set(n,r);else if(xP(n)||wP(n))r=n,e.set(n,r);else if("lc_serializable"in n&&n.lc_serializable)r=n,e.set(n,r);else{r={},e.set(n,r);for(let[a,i]of Object.entries(n))r[a]=J0(i,e)}return r}return n}});var $p=te(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.NoopManagedValue=ji.ManagedValueMapping=ji.ChannelKeyPlaceholder=ji.WritableManagedValue=ji.ManagedValue=void 0;ji.isManagedValue=h1e;ji.isConfiguredManagedValue=m1e;var X0=qa(),ig=class{constructor(e,r){Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lg_is_managed_value",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.config=e}static async initialize(e,r){throw new Error("Not implemented")}async promises(){return Promise.all(this._promises)}addPromise(e){this._promises.push(e)}};ji.ManagedValue=ig;var SP=class extends ig{};ji.WritableManagedValue=SP;ji.ChannelKeyPlaceholder="__channel_key_placeholder__";var CP=class extends Map{constructor(e){super(e?Array.from(e):void 0)}replaceRuntimeValues(e,r){if(!(this.size===0||!r)&&!Array.from(this.values()).every(a=>!a.runtime)){if(typeof r=="object"&&!Array.isArray(r))for(let[a,i]of Object.entries(r))for(let[s,t]of this.entries())t.runtime&&t.call(e)===i&&(r[a]={[X0.RUNTIME_PLACEHOLDER]:s});else if(typeof r=="object"&&"constructor"in r)for(let a of Object.getOwnPropertyNames(Object.getPrototypeOf(r)))try{let i=r[a];for(let[s,t]of this.entries())t.runtime&&t.call(e)===i&&(r[a]={[X0.RUNTIME_PLACEHOLDER]:s})}catch(i){if(i.name!==TypeError.name)throw i}}}replaceRuntimePlaceholders(e,r){if(!(this.size===0||!r)&&!Array.from(this.values()).every(a=>!a.runtime)){if(typeof r=="object"&&!Array.isArray(r)){for(let[a,i]of Object.entries(r))if(typeof i=="object"&&i!==null&&X0.RUNTIME_PLACEHOLDER in i){let s=i[X0.RUNTIME_PLACEHOLDER];typeof s=="string"&&(r[a]=this.get(s)?.call(e))}}else if(typeof r=="object"&&"constructor"in r)for(let a of Object.getOwnPropertyNames(Object.getPrototypeOf(r)))try{let i=r[a];if(typeof i=="object"&&i!==null&&X0.RUNTIME_PLACEHOLDER in i){let s=this.get(i[X0.RUNTIME_PLACEHOLDER]);s&&(r[a]=s.call(e))}}catch(i){if(i.name!==TypeError.name)throw i}}}};ji.ManagedValueMapping=CP;function h1e(n){return!!(typeof n=="object"&&n&&"lg_is_managed_value"in n)}function m1e(n){return!!(typeof n=="object"&&n&&"cls"in n&&"params"in n)}var AP=class n extends ig{call(){}static async initialize(e,r){return Promise.resolve(new n(e))}};ji.NoopManagedValue=AP});var M3=te(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.Annotation=qc.AnnotationRoot=void 0;qc.getChannel=YV;var JV=R3(),XV=D3(),g1e=$p(),N3=class{constructor(e){Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"AnnotationRoot"}),Object.defineProperty(this,"spec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.spec=e}};qc.AnnotationRoot=N3;qc.Annotation=function(n){return(0,g1e.isConfiguredManagedValue)(n)?n:n?YV(n):new XV.LastValue};qc.Annotation.Root=n=>new N3(n);function YV(n){return typeof n=="object"&&n&&"reducer"in n&&n.reducer?new JV.BinaryOperatorAggregate(n.reducer,n.default):typeof n=="object"&&n&&"value"in n&&n.value?new JV.BinaryOperatorAggregate(n.value,n.default):new XV.LastValue}});var Oo=te((fBe,QV)=>{QV.exports=o6()});var tz=te((hBe,ez)=>{ez.exports=eS()});var Y0=te(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ensureLangGraphConfig=_1e;Nl.getStore=x1e;Nl.getWriter=w1e;Nl.getConfig=S1e;Nl.getCurrentTaskInput=C1e;Nl.recastCheckpointNamespace=A1e;Nl.getParentCheckpointNamespace=E1e;var sg=Md(),Vp=qa(),b1e=["tags","metadata","callbacks","configurable"],v1e=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interruptBefore","interruptAfter","signal"],y1e=25;function _1e(...n){let e={tags:[],metadata:{},callbacks:void 0,recursionLimit:y1e,configurable:{}},r=sg.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(r!==void 0){for(let[a,i]of Object.entries(r))if(i!==void 0)if(b1e.includes(a)){let s;Array.isArray(i)?s=[...i]:typeof i=="object"?a==="callbacks"&&"copy"in i&&typeof i.copy=="function"?s=i.copy():s={...i}:s=i,e[a]=s}else e[a]=i}for(let a of n)if(a!==void 0)for(let[i,s]of Object.entries(a))s!==void 0&&v1e.includes(i)&&(e[i]=s);for(let[a,i]of Object.entries(e.configurable))e.metadata=e.metadata??{},!a.startsWith("__")&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&!(a in e.metadata)&&(e.metadata[a]=i);return e}function x1e(n){let e=n??sg.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(e===void 0)throw new Error(["Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.","If you're running `getStore` in such environment, pass the `config` from the node function directly."].join(`
`));return e?.store}function w1e(n){let e=n??sg.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(e===void 0)throw new Error(["Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.","If you're running `getWriter` in such environment, pass the `config` from the node function directly."].join(`
`));return e?.configurable?.writer}function S1e(){return sg.AsyncLocalStorageProviderSingleton.getRunnableConfig()}function C1e(n){let e=n??sg.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(e===void 0)throw new Error(["Config not retrievable. This is likely because you are running in an environment without support for AsyncLocalStorage.","If you're running `getCurrentTaskInput` in such environment, pass the `config` from the node function directly."].join(`
`));if(e.configurable?.[Vp.CONFIG_KEY_SCRATCHPAD]?.currentTaskInput===void 0)throw new Error("BUG: internal scratchpad not initialized.");return e.configurable[Vp.CONFIG_KEY_SCRATCHPAD].currentTaskInput}function A1e(n){return n.split(Vp.CHECKPOINT_NAMESPACE_SEPARATOR).filter(e=>!e.match(/^\d+$/)).map(e=>e.split(Vp.CHECKPOINT_NAMESPACE_END)[0]).join(Vp.CHECKPOINT_NAMESPACE_SEPARATOR)}function E1e(n){let e=n.split(Vp.CHECKPOINT_NAMESPACE_SEPARATOR);for(;e.length>1&&e[e.length-1].match(/^\d+$/);)e.pop();return e.slice(0,-1).join(Vp.CHECKPOINT_NAMESPACE_SEPARATOR)}});var Ml=te(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.RunnableCallable=void 0;Ou.prefixGenerator=T1e;Ou.gatherIterator=O1e;Ou.gatherIteratorSync=F1e;Ou.patchConfigurable=k1e;Ou.isAsyncGeneratorFunction=R1e;Ou.isGeneratorFunction=I1e;var j3=Oo(),EP=Md(),P1e=Y0(),PP=class extends j3.Runnable{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"recurse",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}async _tracedInvoke(e,r,a){return new Promise((i,s)=>{let t=(0,j3.patchConfig)(r,{callbacks:a?.getChild()});EP.AsyncLocalStorageProviderSingleton.runWithConfig(t,async()=>{try{let o=await this.func(e,t);i(o)}catch(o){s(o)}})})}async invoke(e,r){let a,i=(0,P1e.ensureLangGraphConfig)(r),s=(0,j3.mergeConfigs)(this.config,i);return this.trace?a=await this._callWithConfig(this._tracedInvoke,e,s):a=await EP.AsyncLocalStorageProviderSingleton.runWithConfig(s,async()=>this.func(e,s)),j3.Runnable.isRunnable(a)&&this.recurse?await EP.AsyncLocalStorageProviderSingleton.runWithConfig(s,async()=>a.invoke(e,s)):a}};Ou.RunnableCallable=PP;function*T1e(n,e){if(e===void 0)yield*n;else for(let r of n)yield[e,r]}async function O1e(n){let e=[];for await(let r of await n)e.push(r);return e}function F1e(n){let e=[];for(let r of n)e.push(r);return e}function k1e(n,e){return n?"configurable"in n?{...n,configurable:{...n.configurable,...e}}:{...n,configurable:e}:{configurable:e}}function R1e(n){return n!=null&&typeof n=="function"&&n instanceof Object.getPrototypeOf(async function*(){}).constructor}function I1e(n){return n!=null&&typeof n=="function"&&n instanceof Object.getPrototypeOf(function*(){}).constructor}});var zp=te(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.ChannelWrite=Uc.PASSTHROUGH=Uc.SKIP_WRITE=void 0;var D1e=Oo(),og=qa(),N1e=Ml(),TP=ln();Uc.SKIP_WRITE={[Symbol.for("LG_SKIP_WRITE")]:!0};function M1e(n){return typeof n=="object"&&n?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}Uc.PASSTHROUGH={[Symbol.for("LG_PASSTHROUGH")]:!0};function B3(n){return typeof n=="object"&&n?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}var OP=Symbol("IS_WRITER"),kP=class n extends N1e.RunnableCallable{constructor(e,r){let a=`ChannelWrite<${e.map(i=>(0,og._isSend)(i)?i.node:"channel"in i?i.channel:"...").join(",")}>`;super({writes:e,name:a,tags:r,func:async(i,s)=>this._write(i,s??{})}),Object.defineProperty(this,"writes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.writes=e}async _write(e,r){let a=this.writes.map(i=>FP(i)&&B3(i.value)?{mapper:i.mapper,value:e}:L3(i)&&B3(i.value)?{channel:i.channel,value:e,skipNone:i.skipNone,mapper:i.mapper}:i);return await n.doWrite(r,a),e}static async doWrite(e,r){for(let s of r){if(L3(s)){if(s.channel===og.TASKS)throw new TP.InvalidUpdateError("Cannot write to the reserved channel TASKS");if(B3(s.value))throw new TP.InvalidUpdateError("PASSTHROUGH value must be replaced")}if(FP(s)&&B3(s.value))throw new TP.InvalidUpdateError("PASSTHROUGH value must be replaced")}let a=[];for(let s of r)if((0,og._isSend)(s))a.push([og.TASKS,s]);else if(FP(s)){let t=await s.mapper.invoke(s.value,e);t!=null&&t.length>0&&a.push(...t)}else if(L3(s)){let t=s.mapper!==void 0?await s.mapper.invoke(s.value,e):s.value;if(M1e(t)||s.skipNone&&t===void 0)continue;a.push([s.channel,t])}else throw new Error(`Invalid write entry: ${JSON.stringify(s)}`);let i=e.configurable?.[og.CONFIG_KEY_SEND];i(a)}static isWriter(e){return e instanceof n||OP in e&&!!e[OP]}static registerWriter(e){return Object.defineProperty(e,OP,{value:!0})}};Uc.ChannelWrite=kP;function L3(n){return n!==void 0&&typeof n.channel=="string"}function FP(n){return n!==void 0&&!L3(n)&&D1e.Runnable.isRunnable(n.mapper)}});var th=te(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.PregelNode=eh.ChannelRead=void 0;var ug=Oo(),j1e=qa(),q3=zp(),B1e=Ml(),RP=class n extends B1e.RunnableCallable{constructor(e,r,a=!1){super({func:(i,s)=>n.doRead(s,this.channel,this.fresh,this.mapper)}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"ChannelRead"}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fresh",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fresh=a,this.mapper=r,this.channel=e,this.name=Array.isArray(e)?`ChannelRead<${e.join(",")}>`:`ChannelRead<${e}>`}static doRead(e,r,a,i){let s=e.configurable?.[j1e.CONFIG_KEY_READ];if(!s)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return i?i(s(r,a)):s(r,a)}};eh.ChannelRead=RP;var Q0=new ug.RunnablePassthrough,IP=class n extends ug.RunnableBinding{constructor(e){let{channels:r,triggers:a,mapper:i,writers:s,bound:t,kwargs:o,metadata:l,retryPolicy:d,tags:c,subgraphs:y,ends:u}=e,S=[...e.config?.tags?e.config.tags:[],...c??[]];super({...e,bound:e.bound??Q0,config:{...e.config?e.config:{},tags:S}}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"PregelNode"}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:Q0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subgraphs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=r,this.triggers=a,this.mapper=i,this.writers=s??this.writers,this.bound=t??this.bound,this.kwargs=o??this.kwargs,this.metadata=l??this.metadata,this.tags=S,this.retryPolicy=d,this.subgraphs=y,this.ends=u}getWriters(){let e=[...this.writers];for(;e.length>1&&e[e.length-1]instanceof q3.ChannelWrite&&e[e.length-2]instanceof q3.ChannelWrite;){let r=e.slice(-2),a=r[0].writes.concat(r[1].writes);e[e.length-2]=new q3.ChannelWrite(a,r[0].config?.tags),e.pop()}return e}getNode(){let e=this.getWriters();if(!(this.bound===Q0&&e.length===0))return this.bound===Q0&&e.length===1?e[0]:this.bound===Q0?new ug.RunnableSequence({first:e[0],middle:e.slice(1,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):e.length>0?new ug.RunnableSequence({first:this.bound,middle:e.slice(0,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):this.bound}join(e){if(!Array.isArray(e))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new n({channels:{...this.channels,...Object.fromEntries(e.map(r=>[r,r]))},triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy})}pipe(e){return q3.ChannelWrite.isWriter(e)?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,e],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy}):this.bound===Q0?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:(0,ug._coerceToRunnable)(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy}):new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy})}};eh.PregelNode=IP});var az=te(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.GraphValidationError=void 0;rh.validateGraph=q1e;rh.validateKeys=U1e;var rz=qa(),L1e=th(),Ls=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};rh.GraphValidationError=Ls;function q1e({nodes:n,channels:e,inputChannels:r,outputChannels:a,streamChannels:i,interruptAfterNodes:s,interruptBeforeNodes:t}){if(!e)throw new Ls("Channels not provided");let o=new Set,l=new Set;for(let[d,c]of Object.entries(n)){if(d===rz.INTERRUPT)throw new Ls(`"Node name ${rz.INTERRUPT} is reserved"`);if(c.constructor===L1e.PregelNode)c.triggers.forEach(y=>o.add(y));else throw new Ls(`Invalid node type ${typeof c}, expected PregelNode`)}for(let d of o)if(!(d in e))throw new Ls(`Subcribed channel '${String(d)}' not in channels`);if(Array.isArray(r)){if(r.every(d=>!o.has(d)))throw new Ls(`None of the input channels ${r} are subscribed to by any node`)}else if(!o.has(r))throw new Ls(`Input channel ${String(r)} is not subscribed to by any node`);Array.isArray(a)?a.forEach(d=>l.add(d)):l.add(a),i&&!Array.isArray(i)?l.add(i):Array.isArray(i)&&i.forEach(d=>l.add(d));for(let d of l)if(!(d in e))throw new Ls(`Output channel '${String(d)}' not in channels`);if(s&&s!=="*"){for(let d of s)if(!(d in n))throw new Ls(`Node ${String(d)} not in nodes`)}if(t&&t!=="*"){for(let d of t)if(!(d in n))throw new Ls(`Node ${String(d)} not in nodes`)}}function U1e(n,e){if(Array.isArray(n)){for(let r of n)if(!(r in e))throw new Error(`Key ${String(r)} not found in channels`)}else if(!(n in e))throw new Error(`Key ${String(n)} not found in channels`)}});var lg=te(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.readChannel=U3;jl.readChannels=nz;jl.mapCommand=V1e;jl.mapInput=z1e;jl.mapOutputValues=W1e;jl.mapOutputUpdates=G1e;jl.single=H1e;var $1e=(Xa(),fs(Tn)),Zn=qa(),DP=ln();function U3(n,e,r=!0,a=!1){try{return n[e].get()}catch(i){if(i.name===DP.EmptyChannelError.unminifiable_name){if(a)return i;if(r)return null}throw i}}function nz(n,e,r=!0){if(Array.isArray(e)){let a={};for(let i of e)try{a[i]=U3(n,i,!r)}catch(s){if(s.name===DP.EmptyChannelError.unminifiable_name)continue}return a}else return U3(n,e)}function*V1e(n,e){if(n.graph===Zn.Command.PARENT)throw new DP.InvalidUpdateError("There is no parent graph.");if(n.goto){let r;Array.isArray(n.goto)?r=n.goto:r=[n.goto];for(let a of r)if((0,Zn._isSend)(a))yield[Zn.NULL_TASK_ID,Zn.TASKS,a];else if(typeof a=="string")yield[Zn.NULL_TASK_ID,`branch:to:${a}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof a}`)}if(n.resume)if(typeof n.resume=="object"&&Object.keys(n.resume).length&&Object.keys(n.resume).every($1e.validate))for(let[r,a]of Object.entries(n.resume)){let i=e.filter(s=>s[0]===r&&s[1]===Zn.RESUME).map(s=>s[2]).slice(0,1)??[];i.push(a),yield[r,Zn.RESUME,i]}else yield[Zn.NULL_TASK_ID,Zn.RESUME,n.resume];if(n.update){if(typeof n.update!="object"||!n.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(n.update))for(let[r,a]of n.update)yield[Zn.NULL_TASK_ID,r,a];else for(let[r,a]of Object.entries(n.update))yield[Zn.NULL_TASK_ID,r,a]}}function*z1e(n,e){if(e!=null)if(Array.isArray(n)&&typeof e=="object"&&!Array.isArray(e))for(let r in e)n.includes(r)&&(yield[r,e[r]]);else{if(Array.isArray(n))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[n,e]}}function*W1e(n,e,r){Array.isArray(n)?(e===!0||e.find(([a,i])=>n.includes(a)))&&(yield nz(r,n)):(e===!0||e.some(([a,i])=>a===n))&&(yield U3(r,n))}function*G1e(n,e,r){let a=e.filter(([o,l])=>(o.config===void 0||!o.config.tags?.includes(Zn.TAG_HIDDEN))&&l[0][0]!==Zn.ERROR&&l[0][0]!==Zn.INTERRUPT);if(!a.length)return;let i;a.some(([o])=>o.writes.some(([l,d])=>l===Zn.RETURN))?i=a.flatMap(([o])=>o.writes.filter(([l,d])=>l===Zn.RETURN).map(([l,d])=>[o.name,d])):Array.isArray(n)?i=a.flatMap(([o])=>{let{writes:l}=o,d={};for(let[c]of l)n.includes(c)&&(d[c]=(d[c]||0)+1);return Object.values(d).some(c=>c>1)?l.filter(([c])=>n.includes(c)).map(([c,y])=>[o.name,{[c]:y}]):[[o.name,Object.fromEntries(l.filter(([c])=>n.includes(c)))]]}):i=a.flatMap(([o])=>o.writes.filter(([l,d])=>l===n).map(([l,d])=>[o.name,d]));let s={};for(let[o,l]of i)o in s||(s[o]=[]),s[o].push(l);let t={};for(let o in s)if(s[o].length===1){let[l]=s[o];t[o]=l}else t[o]=s[o];r&&(t.__metadata__={cached:r}),yield t}function H1e(n){for(let e of n)return e;return null}});var cg=te($3=>{"use strict";Object.defineProperty($3,"__esModule",{value:!0});$3.isPregelLike=iz;$3.findSubgraphPregel=Z1e;function K1e(n){return"steps"in n&&Array.isArray(n.steps)}function iz(n){return"lg_is_pregel"in n&&n.lg_is_pregel===!0}function Z1e(n){let e=[n];for(let r of e){if(iz(r))return r;K1e(r)&&e.push(...r.steps)}}});var NP=te(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.wrap=void 0;dn.printCheckpoint=Q1e;dn._readChannels=oz;dn.mapDebugTasks=ege;dn.mapDebugTaskResults=tge;dn.mapDebugCheckpoint=rge;dn.tasksWithWrites=uz;dn.printStepCheckpoint=age;dn.printStepTasks=nge;dn.printStepWrites=ige;var ah=qa(),J1e=ln(),sz=lg(),X1e=cg(),nh={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},Y1e=(n,e)=>`${n.start}${e}${n.end}`;dn.wrap=Y1e;function Q1e(n,e){console.log([`${(0,dn.wrap)(nh.blue,"[langgraph/checkpoint]")}`,`Finishing step ${n}. Channel values:
`,`
${JSON.stringify(Object.fromEntries(oz(e)),null,2)}`].join(""))}function*oz(n){for(let[e,r]of Object.entries(n))try{yield[e,r.get()]}catch(a){if(a.name===J1e.EmptyChannelError.unminifiable_name)continue;throw a}}function*ege(n,e){let r=new Date().toISOString();for(let{id:a,name:i,input:s,config:t,triggers:o,writes:l}of e){if(t?.tags?.includes(ah.TAG_HIDDEN))continue;let d=l.filter(([c,y])=>c===a&&y===ah.INTERRUPT).map(([,c])=>c);yield{type:"task",timestamp:r,step:n,payload:{id:a,name:i,input:s,triggers:o,interrupts:d}}}}function*tge(n,e,r){let a=new Date().toISOString();for(let[{id:i,name:s,config:t},o]of e)t?.tags?.includes(ah.TAG_HIDDEN)||(yield{type:"task_result",timestamp:a,step:n,payload:{id:i,name:s,result:o.filter(([l])=>Array.isArray(r)?r.includes(l):l===r),interrupts:o.filter(l=>l[0]===ah.INTERRUPT).map(l=>l[1])}})}function*rge(n,e,r,a,i,s,t,o){function l(u){let S={};return u.callbacks!=null&&(S.callbacks=u.callbacks),u.configurable!=null&&(S.configurable=u.configurable),u.maxConcurrency!=null&&(S.max_concurrency=u.maxConcurrency),u.metadata!=null&&(S.metadata=u.metadata),u.recursionLimit!=null&&(S.recursion_limit=u.recursionLimit),u.runId!=null&&(S.run_id=u.runId),u.runName!=null&&(S.run_name=u.runName),u.tags!=null&&(S.tags=u.tags),S}let d=e.configurable?.checkpoint_ns,c={};for(let u of s){if(!(u.subgraphs?.length?u.subgraphs:[u.proc]).find(X1e.findSubgraphPregel))continue;let V=`${u.name}:${u.id}`;d&&(V=`${d}|${V}`),c[u.id]={configurable:{thread_id:e.configurable?.thread_id,checkpoint_ns:V}}}yield{type:"checkpoint",timestamp:new Date().toISOString(),step:n,payload:{config:l(e),values:(0,sz.readChannels)(r,a),metadata:i,next:s.map(u=>u.name),tasks:uz(s,t,c),parentConfig:o?l(o):void 0}}}function uz(n,e,r){return n.map(a=>{let i=e.find(([o,l])=>o===a.id&&l===ah.ERROR)?.[2],s=e.filter(([o,l])=>o===a.id&&l===ah.INTERRUPT).map(([,,o])=>o);if(i)return{id:a.id,name:a.name,path:a.path,error:i,interrupts:s};let t=r?.[a.id];return{id:a.id,name:a.name,path:a.path,interrupts:s,...t!==void 0?{state:t}:{}}})}function age(n,e,r){console.log([`${(0,dn.wrap)(nh.blue,`[${n}:checkpoint]`)}`,`\x1B[1m State at the end of step ${n}:\x1B[0m
`,JSON.stringify((0,sz.readChannels)(e,r),null,2)].join(""))}function nge(n,e){let r=e.length;console.log([`${(0,dn.wrap)(nh.blue,`[${n}:tasks]`)}`,`\x1B[1m Starting step ${n} with ${r} task${r===1?"":"s"}:\x1B[0m
`,e.map(a=>`- ${(0,dn.wrap)(nh.green,String(a.name))} -> ${JSON.stringify(a.input,null,2)}`).join(`
`)].join(""))}function ige(n,e,r){let a={};for(let[i,s]of e)r.includes(i)&&(a[i]||(a[i]=[]),a[i].push(s));console.log([`${(0,dn.wrap)(nh.blue,`[${n}:writes]`)}`,`\x1B[1m Finished step ${n} with writes to ${Object.keys(a).length} channel${Object.keys(a).length!==1?"s":""}:\x1B[0m
`,Object.entries(a).map(([i,s])=>`- ${(0,dn.wrap)(nh.yellow,i)} -> ${s.map(t=>JSON.stringify(t)).join(", ")}`).join(`
`)].join(""))}});var jP=te(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});dg.Call=void 0;dg.isCall=sge;var MP=class{constructor({func:e,name:r,input:a,retry:i,callbacks:s}){Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__lg_type",{enumerable:!0,configurable:!0,writable:!0,value:"call"}),this.func=e,this.name=r,this.input=a,this.retry=i,this.callbacks=s}};dg.Call=MP;function sge(n){return typeof n=="object"&&n!==null&&"__lg_type"in n&&n.__lg_type==="call"}});var ih=te($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.getNullChannelVersion=lz;$c.getNewChannelVersions=uge;$c._coerceToDict=lge;$c.patchConfigurable=cz;$c.patchCheckpointMap=cge;$c.combineAbortSignals=dge;var oge=qa();function lz(n){let e=Object.values(n),r=e.length>0?typeof e[0]:void 0,a;return r==="number"?a=0:r==="string"&&(a=""),a}function uge(n,e){if(Object.keys(n).length>0){let r=lz(e);return Object.fromEntries(Object.entries(e).filter(([a,i])=>i>(n[a]??r)))}else return e}function lge(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}function cz(n,e){return n===null?{configurable:e}:n?.configurable===void 0?{...n,configurable:e}:{...n,configurable:{...n.configurable,...e}}}function cge(n,e){let r=e?.parents??{};return Object.keys(r).length>0?cz(n,{[oge.CONFIG_KEY_CHECKPOINT_MAP]:{...r,[n.configurable?.checkpoint_ns??""]:n.configurable?.checkpoint_id}}):n}function dge(...n){if(n.length===1)return n[0];let e=new AbortController,r=()=>{e.abort(),n.forEach(a=>a.removeEventListener("abort",r))};return n.forEach(a=>a.addEventListener("abort",r)),n.some(a=>a.aborted)&&e.abort(),e.signal}});var BP=te(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});pg.getRunnableForFunc=hge;pg.getRunnableForEntrypoint=mge;pg.call=gge;var pge=Oo(),fge=Md(),V3=qa(),dz=zp(),pz=Ml();function hge(n,e){let r=new pz.RunnableCallable({func:a=>e(...a),name:n,trace:!1,recurse:!1});return new pge.RunnableSequence({name:n,first:r,last:new dz.ChannelWrite([{channel:V3.RETURN,value:dz.PASSTHROUGH}],[V3.TAG_HIDDEN])})}function mge(n,e){return new pz.RunnableCallable({func:(a,i)=>e(a,i),name:n,trace:!1,recurse:!1})}function gge({func:n,name:e,retry:r},...a){let i=fge.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(typeof i.configurable?.[V3.CONFIG_KEY_CALL]=="function")return i.configurable[V3.CONFIG_KEY_CALL](n,e,a,{retry:r,callbacks:i.callbacks});throw new Error("Async local storage not initialized. Please call initializeAsyncLocalStorageSingleton() before using this function.")}});var $P=te(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.increment=void 0;Fu.shouldInterrupt=xge;Fu._localRead=z3;Fu._localWrite=W3;Fu._applyWrites=fz;Fu._prepareNextTasks=Sge;Fu._prepareSingleTask=UP;var sh=Oo(),Wp=H0(),qP=Dl(),oh=lg(),Ft=qa(),bge=jP(),Vc=ln(),vge=ih(),yge=BP(),_ge=n=>n!==void 0?n+1:1;Fu.increment=_ge;function xge(n,e,r){let a=Object.values(n.channel_versions),i=a.length>0?typeof a[0]:void 0,s;i==="number"?s=0:i==="string"&&(s="");let t=n.versions_seen[Ft.INTERRUPT]??{},o=Object.entries(n.channel_versions).some(([d,c])=>c>(t[d]??s)),l=r.some(d=>e==="*"?!d.config?.tags?.includes(Ft.TAG_HIDDEN):e.includes(d.name));return o&&l}function z3(n,e,r,a,i,s,t=!1){let o=[],l=new Set;if(Array.isArray(s))o=s.filter(c=>a.get(c)),s=s.filter(c=>!a.get(c)),l=new Set(s.filter(c=>i.writes.some(([y,u])=>y===c)));else{for(let[c]of i.writes)if(c===s){l=new Set([c]);break}l=l||new Set}let d;if(t&&l.size>0){let c=Object.fromEntries(Object.entries(r).filter(([S,V])=>l.has(S))),y=(0,qP.createCheckpoint)(e,c,-1),u=(0,qP.emptyChannels)(c,y);fz((0,Wp.copyCheckpoint)(y),u,[i]),d=(0,oh.readChannels)({...r,...u},s)}else d=(0,oh.readChannels)(r,s);if(o.length>0)for(let c of o){let y=a.get(c);if(y){let u=y.call(n);d[c]=u}}return d}function W3(n,e,r,a,i){for(let[s,t]of i)if([Ft.PUSH,Ft.TASKS].includes(s)&&t!=null){if(!(0,Ft._isSend)(t))throw new Vc.InvalidUpdateError(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(t)}`);if(!(t.node in r))throw new Vc.InvalidUpdateError(`Invalid node name "${t.node}" in Send packet`);a.replaceRuntimeValues(n,t.args)}e(i)}var wge=new Set([Ft.NO_WRITES,Ft.PUSH,Ft.RESUME,Ft.INTERRUPT,Ft.RETURN,Ft.ERROR]);function fz(n,e,r,a){r.sort((y,u)=>{let S=y.path?.slice(0,3)||[],V=u.path?.slice(0,3)||[];for(let U=0;U<Math.min(S.length,V.length);U+=1){if(S[U]<V[U])return-1;if(S[U]>V[U])return 1}return S.length-V.length});let i=r.some(y=>y.triggers.length>0),s=Object.fromEntries(Object.entries(e).filter(([y,u])=>(0,qP.isBaseChannel)(u)));for(let y of r){n.versions_seen[y.name]===void 0&&(n.versions_seen[y.name]={});for(let u of y.triggers)u in n.channel_versions&&(n.versions_seen[y.name][u]=n.channel_versions[u])}let t;Object.keys(n.channel_versions).length>0&&(t=(0,Wp.maxChannelVersion)(...Object.values(n.channel_versions)));let o=new Set(r.flatMap(y=>y.triggers).filter(y=>!Ft.RESERVED.includes(y)));for(let y of o)y in s&&s[y].consume()&&a!==void 0&&(n.channel_versions[y]=a(t,s[y]));n.pending_sends?.length&&i&&(n.pending_sends=[]);let l={},d={};for(let y of r)for(let[u,S]of y.writes)wge.has(u)||(u===Ft.TASKS?n.pending_sends.push({node:S.node,args:S.args}):u in s?u in l?l[u].push(S):l[u]=[S]:u in d?d[u].push(S):d[u]=[S]);t=void 0,Object.keys(n.channel_versions).length>0&&(t=(0,Wp.maxChannelVersion)(...Object.values(n.channel_versions)));let c=new Set;for(let[y,u]of Object.entries(l))if(y in s){let S;try{S=s[y].update(u)}catch(V){if(V.name===Vc.InvalidUpdateError.unminifiable_name){let U=new Vc.InvalidUpdateError(`Invalid update for channel "${y}" with values ${JSON.stringify(u)}: ${V.message}`);throw U.lc_error_code=V.lc_error_code,U}else throw V}S&&a!==void 0&&(n.channel_versions[y]=a(t,s[y])),c.add(y)}if(i)for(let y of Object.keys(s))c.has(y)||s[y].update([])&&a!==void 0&&(n.channel_versions[y]=a(t,s[y]));return d}function Sge(n,e,r,a,i,s,t,o){let l={};for(let d=0;d<n.pending_sends.length;d+=1){let c=UP([Ft.PUSH,d],n,e,r,a,i,s,t,o);c!==void 0&&(l[c.id]=c)}for(let d of Object.keys(r)){let c=UP([Ft.PULL,d],n,e,r,a,i,s,t,o);c!==void 0&&(l[c.id]=c)}return l}function UP(n,e,r,a,i,s,t,o,l){let{step:d,checkpointer:c,manager:y}=l,u=t.configurable??{},S=u.checkpoint_ns??"";if(n[0]===Ft.PUSH&&(0,bge.isCall)(n[n.length-1])){let V=n[n.length-1],U=(0,yge.getRunnableForFunc)(V.name,V.func),z=[Ft.PUSH],D=S===""?V.name:`${S}${Ft.CHECKPOINT_NAMESPACE_SEPARATOR}${V.name}`,k=(0,Wp.uuid5)(JSON.stringify([D,d.toString(),V.name,Ft.PUSH,n[1],n[2]]),e.id),T=`${D}${Ft.CHECKPOINT_NAMESPACE_END}${k}`,R={langgraph_step:d,langgraph_node:V.name,langgraph_triggers:z,langgraph_path:n.slice(0,3),langgraph_checkpoint_ns:T};if(o){let g=[];return{name:V.name,input:V.input,proc:U,writes:g,config:(0,sh.patchConfig)((0,sh.mergeConfigs)(t,{metadata:R,store:l.store??t.store}),{runName:V.name,callbacks:y?.getChild(`graph:step:${d}`),configurable:{[Ft.CONFIG_KEY_TASK_ID]:k,[Ft.CONFIG_KEY_SEND]:v=>W3(d,b=>g.push(...b),a,s,v),[Ft.CONFIG_KEY_READ]:(v,b=!1)=>z3(d,e,i,s,{name:V.name,writes:g,triggers:z,path:n.slice(0,3)},v,b),[Ft.CONFIG_KEY_CHECKPOINTER]:c??u[Ft.CONFIG_KEY_CHECKPOINTER],[Ft.CONFIG_KEY_CHECKPOINT_MAP]:{...u[Ft.CONFIG_KEY_CHECKPOINT_MAP],[S]:e.id},[Ft.CONFIG_KEY_SCRATCHPAD]:LP({pendingWrites:r??[],taskId:k,currentTaskInput:V.input}),[Ft.CONFIG_KEY_PREVIOUS_STATE]:e.channel_values[Ft.PREVIOUS],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:z,retry_policy:V.retry,id:k,path:n.slice(0,3),writers:[]}}else return{id:k,name:V.name,interrupts:[],path:n.slice(0,3)}}else if(n[0]===Ft.PUSH){let V=typeof n[1]=="number"?n[1]:parseInt(n[1],10);if(V>=e.pending_sends.length)return;let U=(0,Ft._isSendInterface)(e.pending_sends[V])&&!(0,Ft._isSend)(e.pending_sends[V])?new Ft.Send(e.pending_sends[V].node,e.pending_sends[V].args):e.pending_sends[V];if(!(0,Ft._isSendInterface)(U)){console.warn(`Ignoring invalid packet ${JSON.stringify(U)} in pending sends.`);return}if(!(U.node in a)){console.warn(`Ignoring unknown node name ${U.node} in pending sends.`);return}let z=[Ft.PUSH],D=S===""?U.node:`${S}${Ft.CHECKPOINT_NAMESPACE_SEPARATOR}${U.node}`,k=(0,Wp.uuid5)(JSON.stringify([D,d.toString(),U.node,Ft.PUSH,V.toString()]),e.id),T=`${D}${Ft.CHECKPOINT_NAMESPACE_END}${k}`,R={langgraph_step:d,langgraph_node:U.node,langgraph_triggers:z,langgraph_path:n.slice(0,3),langgraph_checkpoint_ns:T};if(o){let g=a[U.node],m=g.getNode();if(m!==void 0){s.replaceRuntimePlaceholders(d,U.args),g.metadata!==void 0&&(R={...R,...g.metadata});let v=[];return{name:U.node,input:U.args,proc:m,subgraphs:g.subgraphs,writes:v,config:(0,sh.patchConfig)((0,sh.mergeConfigs)(t,{metadata:R,tags:g.tags,store:l.store??t.store}),{runName:U.node,callbacks:y?.getChild(`graph:step:${d}`),configurable:{[Ft.CONFIG_KEY_TASK_ID]:k,[Ft.CONFIG_KEY_SEND]:b=>W3(d,f=>v.push(...f),a,s,b),[Ft.CONFIG_KEY_READ]:(b,f=!1)=>z3(d,e,i,s,{name:U.node,writes:v,triggers:z,path:n},b,f),[Ft.CONFIG_KEY_CHECKPOINTER]:c??u[Ft.CONFIG_KEY_CHECKPOINTER],[Ft.CONFIG_KEY_CHECKPOINT_MAP]:{...u[Ft.CONFIG_KEY_CHECKPOINT_MAP],[S]:e.id},[Ft.CONFIG_KEY_SCRATCHPAD]:LP({pendingWrites:r??[],taskId:k,currentTaskInput:U.args}),[Ft.CONFIG_KEY_PREVIOUS_STATE]:e.channel_values[Ft.PREVIOUS],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:z,retry_policy:g.retryPolicy,id:k,path:n,writers:g.getWriters()}}}else return{id:k,name:U.node,interrupts:[],path:n}}else if(n[0]===Ft.PULL){let V=n[1].toString(),U=a[V];if(U===void 0)return;if(r?.length){let T=S===""?V:`${S}${Ft.CHECKPOINT_NAMESPACE_SEPARATOR}${V}`,R=(0,Wp.uuid5)(JSON.stringify([T,d.toString(),V,Ft.PULL,V]),e.id);if(r.some(m=>m[0]===R&&m[1]!==Ft.ERROR))return}let z=(0,vge.getNullChannelVersion)(e.channel_versions);if(z===void 0)return;let D=e.versions_seen[V]??{},k=U.triggers.filter(T=>{let R=(0,oh.readChannel)(i,T,!1,!0);return!(R instanceof Error&&R.name===Vc.EmptyChannelError.unminifiable_name)&&(e.channel_versions[T]??z)>(D[T]??z)}).sort();if(k.length>0){let T=Cge(d,U,s,i,o);if(T===void 0)return;let R=S===""?V:`${S}${Ft.CHECKPOINT_NAMESPACE_SEPARATOR}${V}`,g=(0,Wp.uuid5)(JSON.stringify([R,d.toString(),V,Ft.PULL,k]),e.id),m=`${R}${Ft.CHECKPOINT_NAMESPACE_END}${g}`,v={langgraph_step:d,langgraph_node:V,langgraph_triggers:k,langgraph_path:n,langgraph_checkpoint_ns:m};if(o){let b=U.getNode();if(b!==void 0){U.metadata!==void 0&&(v={...v,...U.metadata});let f=[];return{name:V,input:T,proc:b,subgraphs:U.subgraphs,writes:f,config:(0,sh.patchConfig)((0,sh.mergeConfigs)(t,{metadata:v,tags:U.tags,store:l.store??t.store}),{runName:V,callbacks:y?.getChild(`graph:step:${d}`),configurable:{[Ft.CONFIG_KEY_TASK_ID]:g,[Ft.CONFIG_KEY_SEND]:p=>W3(d,h=>{f.push(...h)},a,s,p),[Ft.CONFIG_KEY_READ]:(p,h=!1)=>z3(d,e,i,s,{name:V,writes:f,triggers:k,path:n},p,h),[Ft.CONFIG_KEY_CHECKPOINTER]:c??u[Ft.CONFIG_KEY_CHECKPOINTER],[Ft.CONFIG_KEY_CHECKPOINT_MAP]:{...u[Ft.CONFIG_KEY_CHECKPOINT_MAP],[S]:e.id},[Ft.CONFIG_KEY_SCRATCHPAD]:LP({pendingWrites:r??[],taskId:g,currentTaskInput:T}),[Ft.CONFIG_KEY_PREVIOUS_STATE]:e.channel_values[Ft.PREVIOUS],checkpoint_id:void 0,checkpoint_ns:m}}),triggers:k,retry_policy:U.retryPolicy,id:g,path:n,writers:U.getWriters()}}}else return{id:g,name:V,interrupts:[],path:n}}}}function Cge(n,e,r,a,i){let s;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){s={};for(let[t,o]of Object.entries(e.channels))if(e.triggers.includes(o))try{s[t]=(0,oh.readChannel)(a,o,!1)}catch(l){if(l.name===Vc.EmptyChannelError.unminifiable_name)return;throw l}else if(o in a)try{s[t]=(0,oh.readChannel)(a,o,!1)}catch(l){if(l.name===Vc.EmptyChannelError.unminifiable_name)continue;throw l}else s[t]=r.get(t)?.call(n)}else if(Array.isArray(e.channels)){let t=!1;for(let o of e.channels)try{s=(0,oh.readChannel)(a,o,!1),t=!0;break}catch(l){if(l.name===Vc.EmptyChannelError.unminifiable_name)continue;throw l}if(!t)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return i&&e.mapper!==void 0&&(s=e.mapper(s)),s}function LP({pendingWrites:n,taskId:e,currentTaskInput:r}){let a=n.find(([s,t])=>s===Ft.NULL_TASK_ID&&t===Ft.RESUME)?.[2],i={callCounter:0,interruptCounter:-1,resume:n.filter(([s,t])=>s===e&&t===Ft.RESUME).flatMap(([s,t,o])=>o),nullResume:a,subgraphCounter:0,currentTaskInput:r,consumeNullResume:()=>{if(i.nullResume)return delete i.nullResume,n.splice(n.findIndex(([s,t])=>s===Ft.NULL_TASK_ID&&t===Ft.RESUME),1),a}};return i}});var VP=te((PBe,hz)=>{hz.exports=vo()});var GP=te(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.IterableReadableWritableStream=uh.IterableReadableStreamWithAbortSignal=void 0;var mz=VP(),zP=class extends mz.IterableReadableStream{constructor(e,r){let a=e.getReader(),i=r??new AbortController;super({start(s){return t();function t(){return a.read().then(({done:o,value:l})=>{if(o){s.close();return}return s.enqueue(l),t()})}}}),Object.defineProperty(this,"_abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._abortController=i,this._reader=a}async cancel(e){this._abortController.abort(e),this._reader.releaseLock()}get signal(){return this._abortController.signal}};uh.IterableReadableStreamWithAbortSignal=zP;var WP=class extends mz.IterableReadableStream{get closed(){return this._closed}constructor(e){let r,a=new Promise(i=>{r=i});super({start:i=>{r(i)}}),Object.defineProperty(this,"modes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"passthroughFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),a.then(i=>{this.controller=i}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};uh.IterableReadableWritableStream=WP});var bz=te(H3=>{"use strict";Object.defineProperty(H3,"__esModule",{value:!0});H3.PregelLoop=void 0;var lh=H0(),gz=Dl(),Nr=qa(),qs=$P(),Mn=Ml(),zc=lg(),ch=ln(),fg=ih(),hg=NP(),Age=GP(),G3=Symbol.for("INPUT_DONE"),HP=Symbol.for("INPUT_RESUMING"),Ege=25;function Pge(...n){return new Age.IterableReadableWritableStream({passthroughFn:e=>{for(let r of n)r.modes.has(e[1])&&r.push(e)},modes:new Set(n.flatMap(e=>Array.from(e.modes)))})}var KP=class n{get isResuming(){let e=Object.keys(this.checkpoint.channel_versions).length!==0,a=this.config.configurable?.[Nr.CONFIG_KEY_RESUMING]!==void 0&&this.config.configurable?.[Nr.CONFIG_KEY_RESUMING],i=this.input===null||this.input===void 0,s=(0,Nr.isCommand)(this.input)&&this.input.resume!=null,t=this.input===HP;return e&&(a||i||s||t)}constructor(e){Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerGetNextVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"managed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointNamespace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointPendingWrites",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"checkpointPreviousVersions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"step",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipDoneTasks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(this,"tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerPromises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"isNested",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_checkpointerChainedPromise",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toInterrupt",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.input=e.input,this.checkpointer=e.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=qs.increment,this.checkpoint=e.checkpoint,this.checkpointMetadata=e.checkpointMetadata,this.checkpointPreviousVersions=e.checkpointPreviousVersions,this.channels=e.channels,this.managed=e.managed,this.checkpointPendingWrites=e.checkpointPendingWrites,this.step=e.step,this.stop=e.stop,this.config=e.config,this.checkpointConfig=e.checkpointConfig,this.isNested=e.isNested,this.manager=e.manager,this.outputKeys=e.outputKeys,this.streamKeys=e.streamKeys,this.nodes=e.nodes,this.skipDoneTasks=e.skipDoneTasks,this.store=e.store,this.stream=e.stream,this.checkpointNamespace=e.checkpointNamespace,this.prevCheckpointConfig=e.prevCheckpointConfig,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.debug=e.debug}static async initialize(e){let{config:r,stream:a}=e;a!==void 0&&r.configurable?.[Nr.CONFIG_KEY_STREAM]!==void 0&&(a=Pge(a,r.configurable[Nr.CONFIG_KEY_STREAM]));let i=r.configurable?!("checkpoint_id"in r.configurable):!0,s=r.configurable?.[Nr.CONFIG_KEY_SCRATCHPAD];r.configurable&&s&&(s.subgraphCounter>0&&(r=(0,fg.patchConfigurable)(r,{[Nr.CONFIG_KEY_CHECKPOINT_NS]:[r.configurable[Nr.CONFIG_KEY_CHECKPOINT_NS],s.subgraphCounter.toString()].join(Nr.CHECKPOINT_NAMESPACE_SEPARATOR)})),s.subgraphCounter+=1);let t=Nr.CONFIG_KEY_READ in(r.configurable??{});!t&&r.configurable?.checkpoint_ns!==void 0&&r.configurable?.checkpoint_ns!==""&&(r=(0,fg.patchConfigurable)(r,{checkpoint_ns:"",checkpoint_id:void 0}));let o=r;r.configurable?.[Nr.CONFIG_KEY_CHECKPOINT_MAP]!==void 0&&r.configurable?.[Nr.CONFIG_KEY_CHECKPOINT_MAP]?.[r.configurable?.checkpoint_ns]&&(o=(0,fg.patchConfigurable)(r,{checkpoint_id:r.configurable[Nr.CONFIG_KEY_CHECKPOINT_MAP][r.configurable?.checkpoint_ns]}));let l=r.configurable?.checkpoint_ns?.split(Nr.CHECKPOINT_NAMESPACE_SEPARATOR)??[],d=await e.checkpointer?.getTuple(o)??{config:r,checkpoint:(0,lh.emptyCheckpoint)(),metadata:{source:"input",step:-2,writes:null,parents:{}},pendingWrites:[]};o={...r,...d.config,configurable:{checkpoint_ns:"",...r.configurable,...d.config.configurable}};let c=d.parentConfig,y=(0,lh.copyCheckpoint)(d.checkpoint),u={...d.metadata},S=d.pendingWrites??[],V=(0,gz.emptyChannels)(e.channelSpecs,y),U=(u.step??0)+1,z=U+(r.recursionLimit??Ege)+1,D={...y.channel_versions},k=e.store?new lh.AsyncBatchedStore(e.store):void 0;return k&&k.start(),new n({input:e.input,config:r,checkpointer:e.checkpointer,checkpoint:y,checkpointMetadata:u,checkpointConfig:o,prevCheckpointConfig:c,checkpointNamespace:l,channels:V,managed:e.managed,isNested:t,manager:e.manager,skipDoneTasks:i,step:U,stop:z,checkpointPreviousVersions:D,checkpointPendingWrites:S,outputKeys:e.outputKeys??[],streamKeys:e.streamKeys??[],nodes:e.nodes,stream:a,store:k,interruptAfter:e.interruptAfter,interruptBefore:e.interruptBefore,debug:e.debug})}_checkpointerPutAfterPrevious(e){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(e.config,e.checkpoint,e.metadata,e.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}async updateManagedValues(e,r){let a=this.managed.get(e);a&&"update"in a&&typeof a.update=="function"&&await a.update(r)}putWrites(e,r){let a=r;if(a.length===0)return;a.every(([s])=>s in lh.WRITES_IDX_MAP)&&(a=Array.from(new Map(a.map(s=>[s[0],s])).values()));for(let[s,t]of a){let o=this.checkpointPendingWrites.findIndex(l=>l[0]===e&&l[1]===s);s in lh.WRITES_IDX_MAP&&o!==-1?this.checkpointPendingWrites[o]=[e,s,t]:this.checkpointPendingWrites.push([e,s,t])}let i=this.checkpointer?.putWrites({...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_ns:this.config.configurable?.checkpoint_ns??"",checkpoint_id:this.checkpoint.id}},a,e);i!==void 0&&this.checkpointerPromises.push(i),this.tasks&&this._outputWrites(e,a)}_outputWrites(e,r,a=!1){let i=this.tasks[e];if(i!==void 0){if(i.config!==void 0&&(i.config.tags??[]).includes(Nr.TAG_HIDDEN))return;r.length>0&&r[0][0]!==Nr.ERROR&&r[0][0]!==Nr.INTERRUPT&&this._emit((0,Mn.gatherIteratorSync)((0,Mn.prefixGenerator)((0,zc.mapOutputUpdates)(this.outputKeys,[[i,r]],a),"updates"))),a||this._emit((0,Mn.gatherIteratorSync)((0,Mn.prefixGenerator)((0,hg.mapDebugTaskResults)(this.step,[[i,r]],this.streamKeys),"debug")))}}async tick(e){this.store&&!this.store.isRunning&&this.store?.start();let{inputKeys:r=[]}=e;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![G3,HP].includes(this.input))await this._first(r);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new ch.GraphInterrupt;if(Object.values(this.tasks).every(s=>s.writes.length>0)){let s=Object.values(this.tasks).flatMap(l=>l.writes),t=(0,qs._applyWrites)(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion);for(let[l,d]of Object.entries(t))await this.updateManagedValues(l,d);let o=await(0,Mn.gatherIterator)((0,Mn.prefixGenerator)((0,zc.mapOutputValues)(this.outputKeys,s,this.channels),"values"));if(this._emit(o),this.checkpointPendingWrites=[],await this._putCheckpoint({source:"loop",writes:(0,zc.mapOutputUpdates)(this.outputKeys,Object.values(this.tasks).map(l=>[l,l.writes])).next().value??null}),(0,qs.shouldInterrupt)(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new ch.GraphInterrupt;this.config.configurable?.[Nr.CONFIG_KEY_RESUMING]!==void 0&&delete this.config.configurable?.[Nr.CONFIG_KEY_RESUMING]}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;let a=(0,qs._prepareNextTasks)(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream});if(this.tasks=a,this.checkpointer&&this._emit(await(0,Mn.gatherIterator)((0,Mn.prefixGenerator)((0,hg.mapDebugCheckpoint)(this.step-1,this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig),"debug"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[s,t,o]of this.checkpointPendingWrites){if(t===Nr.ERROR||t===Nr.INTERRUPT||t===Nr.RESUME)continue;let l=Object.values(this.tasks).find(d=>d.id===s);l&&l.writes.push([t,o])}for(let s of Object.values(this.tasks))s.writes.length>0&&this._outputWrites(s.id,s.writes,!0)}if(Object.values(this.tasks).every(s=>s.writes.length>0))return this.tick({inputKeys:r});if((0,qs.shouldInterrupt)(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new ch.GraphInterrupt;let i=await(0,Mn.gatherIterator)((0,Mn.prefixGenerator)((0,hg.mapDebugTasks)(this.step,Object.values(this.tasks)),"debug"));return this._emit(i),!0}async finishAndHandleError(e){let r=this._suppressInterrupt(e);if((r||e===void 0)&&(this.output=(0,zc.readChannels)(this.channels,this.outputKeys)),r){if(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(a=>a.writes.length>0)){let a=(0,qs._applyWrites)(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion);for(let[i,s]of Object.entries(a))await this.updateManagedValues(i,s);this._emit((0,Mn.gatherIteratorSync)((0,Mn.prefixGenerator)((0,zc.mapOutputValues)(this.outputKeys,Object.values(this.tasks).flatMap(i=>i.writes),this.channels),"values")))}this._emit([["updates",{[Nr.INTERRUPT]:e.interrupts}]])}return r}acceptPush(e,r,a){if(this.interruptAfter?.length>0&&(0,qs.shouldInterrupt)(this.checkpoint,this.interruptAfter,[e])){this.toInterrupt.push(e);return}let i=(0,qs._prepareSingleTask)([Nr.PUSH,e.path??[],r,e.id,a],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,e.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(i){if(this.interruptBefore?.length>0&&(0,qs.shouldInterrupt)(this.checkpoint,this.interruptBefore,[i])){this.toInterrupt.push(i);return}return this._emit((0,Mn.gatherIteratorSync)((0,Mn.prefixGenerator)((0,hg.mapDebugTasks)(this.step,[i]),"debug"))),this.debug&&(0,hg.printStepTasks)(this.step,[i]),this.tasks[i.id]=i,this.skipDoneTasks&&this._matchWrites({[i.id]:i}),i}}_suppressInterrupt(e){return(0,ch.isGraphInterrupt)(e)&&!this.isNested}async _first(e){let{configurable:r}=this.config,a=r?.[Nr.CONFIG_KEY_SCRATCHPAD];if(a&&a.nullResume!==void 0&&this.putWrites(Nr.NULL_TASK_ID,[[Nr.RESUME,a.nullResume]]),(0,Nr.isCommand)(this.input)){if(this.input.resume!=null&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");let o={};for(let[l,d,c]of(0,zc.mapCommand)(this.input,this.checkpointPendingWrites))o[l]===void 0&&(o[l]=[]),o[l].push([d,c]);if(Object.keys(o).length===0)throw new ch.EmptyInputError("Received empty Command input");for(let[l,d]of Object.entries(o))this.putWrites(l,d)}let i=(this.checkpointPendingWrites??[]).filter(t=>t[0]===Nr.NULL_TASK_ID).map(t=>t.slice(1));i.length>0&&(0,qs._applyWrites)(this.checkpoint,this.channels,[{name:Nr.INPUT,writes:i,triggers:[]}],this.checkpointerGetNextVersion);let s=(0,Nr.isCommand)(this.input)&&i.length>0;if(this.isResuming||s){for(let o of Object.keys(this.channels))if(this.checkpoint.channel_versions[o]!==void 0){let l=this.checkpoint.channel_versions[o];this.checkpoint.versions_seen[Nr.INTERRUPT]={...this.checkpoint.versions_seen[Nr.INTERRUPT],[o]:l}}let t=await(0,Mn.gatherIterator)((0,Mn.prefixGenerator)((0,zc.mapOutputValues)(this.outputKeys,!0,this.channels),"values"));this._emit(t)}if(this.isResuming)this.input=HP;else if(s)await this._putCheckpoint({source:"input",writes:{}}),this.input=G3;else{let t=await(0,Mn.gatherIterator)((0,zc.mapInput)(e,this.input));if(t.length>0){let o=(0,qs._prepareNextTasks)(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step});(0,qs._applyWrites)(this.checkpoint,this.channels,Object.values(o).concat([{name:Nr.INPUT,writes:t,triggers:[]}]),this.checkpointerGetNextVersion),await this._putCheckpoint({source:"input",writes:Object.fromEntries(t)}),this.input=G3}else if(Nr.CONFIG_KEY_RESUMING in(this.config.configurable??{}))this.input=G3;else throw new ch.EmptyInputError(`Received no input writes for ${JSON.stringify(e,null,2)}`)}this.isNested||(this.config=(0,fg.patchConfigurable)(this.config,{[Nr.CONFIG_KEY_RESUMING]:this.isResuming}))}_emit(e){for(let r of e)this.stream.modes.has(r[0])&&this.stream.push([this.checkpointNamespace,...r])}async _putCheckpoint(e){let r={...e,step:this.step,parents:this.config.configurable?.[Nr.CONFIG_KEY_CHECKPOINT_MAP]??{}};if(this.checkpointer!==void 0){this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointMetadata=r,this.checkpoint=(0,gz.createCheckpoint)(this.checkpoint,this.channels,this.step),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_ns:this.config.configurable?.checkpoint_ns??""}};let a={...this.checkpoint.channel_versions},i=(0,fg.getNewChannelVersions)(this.checkpointPreviousVersions,a);this.checkpointPreviousVersions=a,this._checkpointerPutAfterPrevious({config:{...this.checkpointConfig},checkpoint:(0,lh.copyCheckpoint)(this.checkpoint),metadata:{...this.checkpointMetadata},newVersions:i}),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_id:this.checkpoint.id}}}this.step+=1}_matchWrites(e){for(let[r,a,i]of this.checkpointPendingWrites){if(a===Nr.ERROR||a===Nr.INTERRUPT||a===Nr.RESUME)continue;let s=Object.values(e).find(t=>t.id===r);s&&s.writes.push([a,i])}for(let r of Object.values(e))r.writes.length>0&&this._outputWrites(r.id,r.writes,!0)}};H3.PregelLoop=KP});var yz=te((FBe,vz)=>{vz.exports=Od()});var Gp=te((kBe,_z)=>{_z.exports=xl()});var wz=te(K3=>{"use strict";Object.defineProperty(K3,"__esModule",{value:!0});K3.StreamMessagesHandler=void 0;var Tge=yz(),Us=Gp(),xz=qa();function Oge(n){return(0,Us.isBaseMessage)(n?.message)}var ZP=class extends Tge.BaseCallbackHandler{constructor(e){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"StreamMessagesHandler"}),Object.defineProperty(this,"streamFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadatas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"emittedChatModelRunIds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stableMessageIdMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.streamFn=e}_emit(e,r,a,i=!1){if(i&&r.id!==void 0&&this.seen[r.id]!==void 0)return;let s=r.id;a!=null&&((0,Us.isToolMessage)(r)?s??=`run-${a}-tool-${r.tool_call_id}`:((s==null||s===`run-${a}`)&&(s=this.stableMessageIdMap[a]??s??`run-${a}`),this.stableMessageIdMap[a]??=s)),s!==r.id&&(r.id=s,r.lc_kwargs.id=s),r.id!=null&&(this.seen[r.id]=r),this.streamFn([e[0],"messages",[r,e[1]]])}handleChatModelStart(e,r,a,i,s,t,o,l){o&&(!t||!t.includes(xz.TAG_NOSTREAM)&&!t.includes("nostream"))&&(this.metadatas[a]=[o.langgraph_checkpoint_ns.split("|"),{tags:t,name:l,...o}])}handleLLMNewToken(e,r,a,i,s,t){let o=t?.chunk;this.emittedChatModelRunIds[a]=!0,this.metadatas[a]!==void 0&&(Oge(o)?this._emit(this.metadatas[a],o.message,a):this._emit(this.metadatas[a],new Us.AIMessageChunk({content:e}),a))}handleLLMEnd(e,r){if(!this.emittedChatModelRunIds[r]){let a=e.generations?.[0]?.[0];(0,Us.isBaseMessage)(a?.message)&&this._emit(this.metadatas[r],a?.message,r,!0),delete this.emittedChatModelRunIds[r]}delete this.metadatas[r],delete this.stableMessageIdMap[r]}handleLLMError(e,r){delete this.metadatas[r]}handleChainStart(e,r,a,i,s,t,o,l){if(t!==void 0&&l===t.langgraph_node&&(s===void 0||!s.includes(xz.TAG_HIDDEN))&&(this.metadatas[a]=[t.langgraph_checkpoint_ns.split("|"),{tags:s,name:l,...t}],typeof r=="object")){for(let d of Object.values(r))if(((0,Us.isBaseMessage)(d)||(0,Us.isBaseMessageChunk)(d))&&d.id!==void 0)this.seen[d.id]=d;else if(Array.isArray(d))for(let c of d)((0,Us.isBaseMessage)(c)||(0,Us.isBaseMessageChunk)(c))&&c.id!==void 0&&(this.seen[c.id]=c)}}handleChainEnd(e,r){let a=this.metadatas[r];if(delete this.metadatas[r],a!==void 0){if((0,Us.isBaseMessage)(e))this._emit(a,e,r,!0);else if(Array.isArray(e))for(let i of e)(0,Us.isBaseMessage)(i)&&this._emit(a,i,r,!0);else if(e!=null&&typeof e=="object"){for(let i of Object.values(e))if((0,Us.isBaseMessage)(i))this._emit(a,i,r,!0);else if(Array.isArray(i))for(let s of i)(0,Us.isBaseMessage)(s)&&this._emit(a,s,r,!0)}}}handleChainError(e,r){delete this.metadatas[r]}};K3.StreamMessagesHandler=ZP});var Az=te(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.DEFAULT_MAX_RETRIES=fi.DEFAULT_MAX_INTERVAL=fi.DEFAULT_BACKOFF_FACTOR=fi.DEFAULT_INITIAL_INTERVAL=void 0;fi._runWithRetry=Ige;var JP=qa(),Sz=ln(),Fge=Y0(),Cz=ih();fi.DEFAULT_INITIAL_INTERVAL=500;fi.DEFAULT_BACKOFF_FACTOR=2;fi.DEFAULT_MAX_INTERVAL=128e3;fi.DEFAULT_MAX_RETRIES=3;var kge=[400,401,402,403,404,405,406,407,409],Rge=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n?.code==="ECONNABORTED")return!1;let e=n?.response?.status??n?.status;return!(e&&kge.includes(+e)||n?.error?.code==="insufficient_quota")};async function Ige(n,e,r,a){let i=n.retry_policy??e,s=i!==void 0?i.initialInterval??fi.DEFAULT_INITIAL_INTERVAL:0,t=0,o,l,{config:d}=n;for(r&&(d=(0,Cz.patchConfigurable)(d,r)),d={...d,signal:a};!a?.aborted;){n.writes.splice(0,n.writes.length),o=void 0;try{l=await n.proc.invoke(n.input,d);break}catch(c){if(o=c,o.pregelTaskId=n.id,(0,Sz.isParentCommand)(o)){let V=d?.configurable?.checkpoint_ns,U=o.command;if(U.graph===V){for(let z of n.writers)await z.invoke(U,d);o=void 0;break}else if(U.graph===JP.Command.PARENT){let z=(0,Fge.getParentCheckpointNamespace)(V);o.command=new JP.Command({...o.command,graph:z})}}if((0,Sz.isGraphBubbleUp)(o)||i===void 0||(t+=1,t>=(i.maxAttempts??fi.DEFAULT_MAX_RETRIES))||!(i.retryOn??Rge)(o))break;s=Math.min(i.maxInterval??fi.DEFAULT_MAX_INTERVAL,s*(i.backoffFactor??fi.DEFAULT_BACKOFF_FACTOR));let u=i.jitter?Math.floor(s+Math.random()*1e3):s;await new Promise(V=>setTimeout(V,u));let S=o.name??o.constructor.unminifiable_name??o.constructor.name;(i?.logWarning??!0)&&console.log(`Retrying task "${String(n.name)}" after ${s.toFixed(2)}ms (attempt ${t}) after ${S}: ${o}`),d=(0,Cz.patchConfigurable)(d,{[JP.CONFIG_KEY_RESUMING]:!0})}}return{task:n,result:l,error:o,signalAborted:a?.aborted}}});var Tz=te(Z3=>{"use strict";Object.defineProperty(Z3,"__esModule",{value:!0});Z3.PregelRunner=void 0;var Dge=jP(),mg=ih(),$s=qa(),Hp=ln(),Ez=Az(),XP=Symbol.for("promiseAdded");function Nge(){let n={next:()=>{},wait:Promise.resolve(XP)};function e(r){n.next=()=>{n.wait=new Promise(e),r(XP)}}return n.wait=new Promise(e),n}var YP=class{constructor({loop:e,nodeFinished:r}){Object.defineProperty(this,"nodeFinished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.loop=e,this.nodeFinished=r}async tick(e={}){let{timeout:r,retryPolicy:a,onStepWrite:i,maxConcurrency:s}=e,t=new Set,o,l=new AbortController,d=Object.values(this.loop.tasks).filter(u=>u.writes.length===0),c=this._initializeAbortSignals({exceptionSignalController:l,timeout:r,signal:e.signal}),y=this._executeTasksWithRetry(d,{signals:c,retryPolicy:a,maxConcurrency:s});for await(let{task:u,error:S,signalAborted:V}of y)this._commit(u,S),(0,Hp.isGraphInterrupt)(S)||(0,Hp.isGraphBubbleUp)(S)&&!(0,Hp.isGraphInterrupt)(o)?o=S:S&&(t.size===0||!V)&&(l.abort(),t.add(S));if(i?.(this.loop.step,Object.values(this.loop.tasks).map(u=>u.writes).flat()),t.size===1)throw Array.from(t)[0];if(t.size>1)throw new AggregateError(Array.from(t),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if((0,Hp.isGraphInterrupt)(o)||(0,Hp.isGraphBubbleUp)(o)&&this.loop.isNested)throw o}_initializeAbortSignals({exceptionSignalController:e,timeout:r,signal:a}){let i=this.loop.config.configurable?.[$s.CONFIG_KEY_ABORT_SIGNALS]??{},t=a&&i.composedAbortSignal&&a!==i.composedAbortSignal?(0,mg.combineAbortSignals)(i.externalAbortSignal,a):i.externalAbortSignal??a,o=i.errorAbortSignal?(0,mg.combineAbortSignals)(i.errorAbortSignal,e.signal):e.signal,l=r?AbortSignal.timeout(r):void 0,d=(0,mg.combineAbortSignals)(...t?[t]:[],...l?[l]:[],o),c={externalAbortSignal:t,errorAbortSignal:o,timeoutAbortSignal:l,composedAbortSignal:d};return this.loop.config=(0,mg.patchConfigurable)(this.loop.config,{[$s.CONFIG_KEY_ABORT_SIGNALS]:c}),c}async*_executeTasksWithRetry(e,r){let{retryPolicy:a,maxConcurrency:i,signals:s}=r??{},t=Nge(),o={},l={executingTasksMap:o,barrier:t,retryPolicy:a,scheduleTask:async(S,V,U)=>this.loop.acceptPush(S,V,U)};if(s?.composedAbortSignal?.aborted)throw new Error("Abort");let d=0,c,y=s?.externalAbortSignal||s?.timeoutAbortSignal?(0,mg.combineAbortSignals)(...s.externalAbortSignal?[s.externalAbortSignal]:[],...s.timeoutAbortSignal?[s.timeoutAbortSignal]:[]):void 0,u=y?new Promise((S,V)=>{c=()=>V(new Error("Abort")),y.addEventListener("abort",c,{once:!0})}):void 0;for(;(d===0||Object.keys(o).length>0)&&e.length;){for(;Object.values(o).length<(i??e.length)&&d<e.length;d+=1){let V=e[d];o[V.id]=(0,Ez._runWithRetry)(V,a,{[$s.CONFIG_KEY_CALL]:Pz?.bind(l,this,V)},s?.composedAbortSignal).catch(U=>({task:V,error:U,signalAborted:s?.composedAbortSignal?.aborted}))}let S=await Promise.race([...Object.values(o),...u?[u]:[],t.wait]);S!==XP&&(yield S,delete o[S.task.id])}}_commit(e,r){if(r!==void 0)if((0,Hp.isGraphInterrupt)(r)){if(r.interrupts.length){let a=r.interrupts.map(s=>[$s.INTERRUPT,s]),i=e.writes.filter(s=>s[0]===$s.RESUME);i.length&&a.push(...i),this.loop.putWrites(e.id,a)}}else(0,Hp.isGraphBubbleUp)(r)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[$s.ERROR,{message:r.message,name:r.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes($s.TAG_HIDDEN))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([$s.NO_WRITES,null]),this.loop.putWrites(e.id,e.writes)}};Z3.PregelRunner=YP;async function Pz(n,e,r,a,i,s={}){let t=e.config?.configurable?.[$s.CONFIG_KEY_SCRATCHPAD];if(!t)throw new Error(`BUG: No scratchpad found on task ${e.name}__${e.id}`);let o=t.callCounter;t.callCounter+=1;let l=new Dge.Call({func:r,name:a,input:i,retry:s.retry,callbacks:s.callbacks}),d=await this.scheduleTask(e,o,l);if(!d)return;let c=this.executingTasksMap[d.id];if(c!==void 0)return c;if(d.writes.length>0){let y=d.writes.filter(([S])=>S===$s.RETURN),u=d.writes.filter(([S])=>S===$s.ERROR);if(y.length>0){if(y.length===1)return Promise.resolve(y[0][1]);throw new Error(`BUG: multiple returns found for task ${d.name}__${d.id}`)}if(u.length>0){if(u.length===1){let S=u[0][1],V=S instanceof Error?S:new Error(String(S));return Promise.reject(V)}throw new Error(`BUG: multiple errors found for task ${d.name}__${d.id}`)}return}else{let y=(0,Ez._runWithRetry)(d,s.retry,{[$s.CONFIG_KEY_CALL]:Pz.bind(this,n,d)});return this.executingTasksMap[d.id]=y,this.barrier.next(),y.then(({result:u,error:S})=>S?Promise.reject(S):u)}}});var nT=te(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.Pregel=dh.Channel=void 0;var ku=Oo(),Wc=H0(),Gc=Dl(),Mge=th(),QP=az(),Oz=lg(),J3=NP(),eT=zp(),kr=qa(),Vs=ln(),zs=$P(),Fo=ih(),jge=cg(),Bge=bz(),X3=$p(),Kp=Ml(),Y3=Y0(),Lge=wz(),qge=Tz(),tT=GP();function Uge(n){return typeof n=="string"}var rT=class{static subscribeTo(e,r){let{key:a,tags:i}={key:void 0,tags:void 0,...r??{}};if(Array.isArray(e)&&a!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let s;Uge(e)?a?s={[a]:e}:s=[e]:s=Object.fromEntries(e.map(o=>[o,o]));let t=Array.isArray(e)?e:[e];return new Mge.PregelNode({channels:s,triggers:t,tags:i})}static writeTo(e,r){let a=[];for(let i of e)a.push({channel:i,value:eT.PASSTHROUGH,skipNone:!1});for(let[i,s]of Object.entries(r??{}))ku.Runnable.isRunnable(s)||typeof s=="function"?a.push({channel:i,value:eT.PASSTHROUGH,skipNone:!0,mapper:(0,ku._coerceToRunnable)(s)}):a.push({channel:i,value:s,skipNone:!1});return new eT.ChannelWrite(a)}};dh.Channel=rT;var aT=class extends ku.Runnable{static lc_name(){return"LangGraph"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]}),Object.defineProperty(this,"lg_is_pregel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoValidate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"streamMode",{enumerable:!0,configurable:!0,writable:!0,value:["values"]}),Object.defineProperty(this,"streamChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{streamMode:r}=e;r!=null&&!Array.isArray(r)&&(r=[r]),this.nodes=e.nodes,this.channels=e.channels,this.autoValidate=e.autoValidate??this.autoValidate,this.streamMode=r??this.streamMode,this.inputChannels=e.inputChannels,this.outputChannels=e.outputChannels,this.streamChannels=e.streamChannels??this.streamChannels,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.stepTimeout=e.stepTimeout??this.stepTimeout,this.debug=e.debug??this.debug,this.checkpointer=e.checkpointer,this.retryPolicy=e.retryPolicy,this.config=e.config,this.store=e.store,this.name=e.name,this.autoValidate&&this.validate()}withConfig(e){let r=(0,ku.mergeConfigs)(this.config,e);return new this.constructor({...this,config:r})}validate(){return(0,QP.validateGraph)({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore}),this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}async getGraphAsync(e){return this.getGraph(e)}*getSubgraphs(e,r){for(let[a,i]of Object.entries(this.nodes)){if(e!==void 0&&!e.startsWith(a))continue;let s=i.subgraphs?.length?i.subgraphs:[i.bound];for(let t of s){let o=(0,jge.findSubgraphPregel)(t);if(o!==void 0){if(a===e){yield[a,o];return}if(e===void 0&&(yield[a,o]),r){let l=e;e!==void 0&&(l=e.slice(a.length+1));for(let[d,c]of o.getSubgraphs(l,r))yield[`${a}${kr.CHECKPOINT_NAMESPACE_SEPARATOR}${d}`,c]}}}}}async*getSubgraphsAsync(e,r){yield*this.getSubgraphs(e,r)}async _prepareStateSnapshot({config:e,saved:r,subgraphCheckpointer:a,applyPendingWrites:i=!1}){if(r===void 0)return{values:{},next:[],config:e,tasks:[]};let{managed:s}=await this.prepareSpecs(e,{skipManaged:!0}),t=(0,Gc.emptyChannels)(this.channels,r.checkpoint);if(r.pendingWrites?.length){let S=r.pendingWrites.filter(([V,U])=>V===kr.NULL_TASK_ID).map(([V,U,z])=>[String(U),z]);S.length>0&&(0,zs._applyWrites)(r.checkpoint,t,[{name:kr.INPUT,writes:S,triggers:[]}])}let o=Object.values((0,zs._prepareNextTasks)(r.checkpoint,r.pendingWrites,this.nodes,t,s,r.config,!0,{step:(r.metadata?.step??-1)+1,store:this.store})),l=await(0,Kp.gatherIterator)(this.getSubgraphsAsync()),d=r.config.configurable?.checkpoint_ns??"",c={};for(let S of o){let V=l.find(([z])=>z===S.name);if(!V)continue;let U=`${String(S.name)}${kr.CHECKPOINT_NAMESPACE_END}${S.id}`;if(d&&(U=`${d}${kr.CHECKPOINT_NAMESPACE_SEPARATOR}${U}`),a===void 0){let z={configurable:{thread_id:r.config.configurable?.thread_id,checkpoint_ns:U}};c[S.id]=z}else{let z={configurable:{[kr.CONFIG_KEY_CHECKPOINTER]:a,thread_id:r.config.configurable?.thread_id,checkpoint_ns:U}},D=V[1];c[S.id]=await D.getState(z,{subgraphs:!0})}}if(i&&r.pendingWrites?.length){let S=Object.fromEntries(o.map(U=>[U.id,U]));for(let[U,z,D]of r.pendingWrites)[kr.ERROR,kr.INTERRUPT,Wc.SCHEDULED].includes(z)||U in S&&S[U].writes.push([String(z),D]);let V=o.filter(U=>U.writes.length>0);V.length>0&&(0,zs._applyWrites)(r.checkpoint,t,V)}let y=r?.metadata;y&&r?.config?.configurable?.thread_id&&(y={...y,thread_id:r.config.configurable.thread_id});let u=o.filter(S=>S.writes.length===0).map(S=>S.name);return{values:(0,Oz.readChannels)(t,this.streamChannelsAsIs),next:u,tasks:(0,J3.tasksWithWrites)(o,r?.pendingWrites??[],c),metadata:y,config:(0,Fo.patchCheckpointMap)(r.config,r.metadata),createdAt:r.checkpoint.ts,parentConfig:r.parentConfig}}async getState(e,r){let a=e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]??this.checkpointer;if(!a)throw new Vs.GraphValueError("No checkpointer set");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]===void 0){let l=(0,Y3.recastCheckpointNamespace)(i);for await(let[d,c]of this.getSubgraphsAsync(l,!0))if(d===l)return await c.getState((0,Kp.patchConfigurable)(e,{[kr.CONFIG_KEY_CHECKPOINTER]:a}),{subgraphs:r?.subgraphs});throw new Error(`Subgraph with namespace "${l}" not found.`)}let s=(0,ku.mergeConfigs)(this.config,e),t=await a.getTuple(e);return await this._prepareStateSnapshot({config:s,saved:t,subgraphCheckpointer:r?.subgraphs?a:void 0,applyPendingWrites:!e.configurable?.checkpoint_id})}async*getStateHistory(e,r){let a=e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]??this.checkpointer;if(!a)throw new Error("No checkpointer set");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]===void 0){let t=(0,Y3.recastCheckpointNamespace)(i);for await(let[o,l]of this.getSubgraphsAsync(t,!0))if(o===t){yield*l.getStateHistory((0,Kp.patchConfigurable)(e,{[kr.CONFIG_KEY_CHECKPOINTER]:a}),r);return}throw new Error(`Subgraph with namespace "${t}" not found.`)}let s=(0,ku.mergeConfigs)(this.config,e,{configurable:{checkpoint_ns:i}});for await(let t of a.list(s,r))yield this._prepareStateSnapshot({config:t.config,saved:t})}async bulkUpdateState(e,r){let a=e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]??this.checkpointer;if(!a)throw new Vs.GraphValueError("No checkpointer set");if(r.length===0)throw new Error("No supersteps provided");if(r.some(o=>o.updates.length===0))throw new Error("No updates provided");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]===void 0){let o=(0,Y3.recastCheckpointNamespace)(i);for await(let[,l]of this.getSubgraphsAsync(o,!0))return await l.bulkUpdateState((0,Kp.patchConfigurable)(e,{[kr.CONFIG_KEY_CHECKPOINTER]:a}),r);throw new Error(`Subgraph "${o}" not found`)}let s=async(o,l)=>{let d=this.config?(0,ku.mergeConfigs)(this.config,o):o,c=await a.getTuple(d),y=c!==void 0?(0,Wc.copyCheckpoint)(c.checkpoint):(0,Wc.emptyCheckpoint)(),u={...c?.checkpoint.channel_versions},S=c?.metadata?.step??-1,V=(0,Kp.patchConfigurable)(d,{checkpoint_ns:d.configurable?.checkpoint_ns??""}),U=d.metadata??{};c?.config.configurable&&(V=(0,Kp.patchConfigurable)(d,c.config.configurable),U={...c.metadata,...U});let{values:z,asNode:D}=l[0];if(z==null&&D===void 0){if(l.length>1)throw new Vs.InvalidUpdateError("Cannot create empty checkpoint with multiple updates");let f=await a.put(V,(0,Gc.createCheckpoint)(y,void 0,S),{source:"update",step:S+1,writes:{},parents:c?.metadata?.parents??{}},{});return(0,Fo.patchCheckpointMap)(f,c?c.metadata:void 0)}let k=(0,Gc.emptyChannels)(this.channels,y),{managed:T}=await this.prepareSpecs(d,{skipManaged:!0});if(z===null&&D===kr.END){if(l.length>1)throw new Vs.InvalidUpdateError("Cannot apply multiple updates when clearing state");if(c){let p=(0,zs._prepareNextTasks)(y,c.pendingWrites||[],this.nodes,k,T,c.config,!0,{step:(c.metadata?.step??-1)+1,checkpointer:this.checkpointer||void 0,store:this.store}),h=(c.pendingWrites||[]).filter(_=>_[0]===kr.NULL_TASK_ID).map(_=>_.slice(1));h.length>0&&(0,zs._applyWrites)(c.checkpoint,k,[{name:kr.INPUT,writes:h,triggers:[]}]);for(let[_,I,W]of c.pendingWrites||[])[kr.ERROR,kr.INTERRUPT,Wc.SCHEDULED].includes(I)||_ in p&&p[_].writes.push([I,W]);(0,zs._applyWrites)(y,k,Object.values(p))}let f=await a.put(V,(0,Gc.createCheckpoint)(y,void 0,S),{...U,source:"update",step:S+1,writes:{},parents:c?.metadata?.parents??{}},{});return(0,Fo.patchCheckpointMap)(f,c?c.metadata:void 0)}if(z==null&&D===kr.COPY){if(l.length>1)throw new Vs.InvalidUpdateError("Cannot copy checkpoint with multiple updates");let f=await a.put(c?.parentConfig??V,(0,Gc.createCheckpoint)(y,void 0,S),{source:"fork",step:S+1,writes:{},parents:c?.metadata?.parents??{}},{});return(0,Fo.patchCheckpointMap)(f,c?c.metadata:void 0)}if(D===kr.INPUT){if(l.length>1)throw new Vs.InvalidUpdateError("Cannot apply multiple updates when updating as input");let f=await(0,Kp.gatherIterator)((0,Oz.mapInput)(this.inputChannels,z));if(f.length===0)throw new Vs.InvalidUpdateError(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);(0,zs._applyWrites)(y,k,[{name:kr.INPUT,writes:f,triggers:[]}],a.getNextVersion.bind(this.checkpointer));let p=c?.metadata?.step!=null?c.metadata.step+1:-1,h=await a.put(V,(0,Gc.createCheckpoint)(y,k,p),{source:"input",step:p,writes:Object.fromEntries(f),parents:c?.metadata?.parents??{}},(0,Fo.getNewChannelVersions)(u,y.channel_versions));return await a.putWrites(h,f,(0,Wc.uuid5)(kr.INPUT,y.id)),(0,Fo.patchCheckpointMap)(h,c?c.metadata:void 0)}if(d.configurable?.checkpoint_id===void 0&&c?.pendingWrites!==void 0&&c.pendingWrites.length>0){let f=(0,zs._prepareNextTasks)(y,c.pendingWrites,this.nodes,k,T,c.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(c.metadata?.step??-1)+1}),p=(c.pendingWrites??[]).filter(_=>_[0]===kr.NULL_TASK_ID).map(_=>_.slice(1));p.length>0&&(0,zs._applyWrites)(c.checkpoint,k,[{name:kr.INPUT,writes:p,triggers:[]}]);for(let[_,I,W]of c.pendingWrites)[kr.ERROR,kr.INTERRUPT,Wc.SCHEDULED].includes(I)||f[_]===void 0||f[_].writes.push([I,W]);let h=Object.values(f).filter(_=>_.writes.length>0);h.length>0&&(0,zs._applyWrites)(y,k,h)}let R=Object.values(y.versions_seen).map(f=>Object.values(f)).flat().find(f=>!!f),g=[];if(l.length===1){let{values:f,asNode:p}=l[0];if(p===void 0&&Object.keys(this.nodes).length===1)[p]=Object.keys(this.nodes);else if(p===void 0&&R===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(p=this.inputChannels);else if(p===void 0){let h=Object.entries(y.versions_seen).map(([_,I])=>Object.values(I).map(W=>[W,_])).flat().sort(([_],[I])=>(0,Wc.compareChannelVersions)(_,I));h&&(h.length===1?p=h[0][1]:h[h.length-1][0]!==h[h.length-2][0]&&(p=h[h.length-1][1]))}if(p===void 0)throw new Vs.InvalidUpdateError('Ambiguous update, specify "asNode"');g.push({values:f,asNode:p})}else for(let{asNode:f,values:p}of l){if(f==null)throw new Vs.InvalidUpdateError('"asNode" is required when applying multiple updates');g.push({values:p,asNode:f})}let m=[];for(let{asNode:f,values:p}of g){if(this.nodes[f]===void 0)throw new Vs.InvalidUpdateError(`Node "${f.toString()}" does not exist`);let h=this.nodes[f].getWriters();if(!h.length)throw new Vs.InvalidUpdateError(`No writers found for node "${f.toString()}"`);m.push({name:f,input:p,proc:h.length>1?ku.RunnableSequence.from(h,{omitSequenceTags:!0}):h[0],writes:[],triggers:[kr.INTERRUPT],id:(0,Wc.uuid5)(kr.INTERRUPT,y.id),writers:[]})}for(let f of m)await f.proc.invoke(f.input,(0,ku.patchConfig)({...d,store:d?.store??this.store},{runName:d.runName??`${this.getName()}UpdateState`,configurable:{[kr.CONFIG_KEY_SEND]:p=>f.writes.push(...p),[kr.CONFIG_KEY_READ]:(p,h=!1)=>(0,zs._localRead)(S,y,k,T,f,p,h)}}));for(let f of m){let p=f.writes.filter(h=>h[0]!==kr.PUSH);c!==void 0&&p.length>0&&await a.putWrites(V,p,f.id)}(0,zs._applyWrites)(y,k,m,a.getNextVersion.bind(this.checkpointer));let v=(0,Fo.getNewChannelVersions)(u,y.channel_versions),b=await a.put(V,(0,Gc.createCheckpoint)(y,k,S+1),{source:"update",step:S+1,writes:Object.fromEntries(g.map(f=>[f.asNode,f.values])),parents:c?.metadata?.parents??{}},v);for(let f of m){let p=f.writes.filter(h=>h[0]===kr.PUSH);p.length>0&&await a.putWrites(b,p,f.id)}return(0,Fo.patchCheckpointMap)(b,c?c.metadata:void 0)},t=e;for(let{updates:o}of r)t=await s(t,o);return t}async updateState(e,r,a){return this.bulkUpdateState(e,[{updates:[{values:r,asNode:a}]}])}_defaults(e){let{debug:r,streamMode:a,inputKeys:i,outputKeys:s,interruptAfter:t,interruptBefore:o,...l}=e,d=!0,c=r!==void 0?r:this.debug,y=s;y===void 0?y=this.streamChannelsAsIs:(0,QP.validateKeys)(y,this.channels);let u=i;u===void 0?u=this.inputChannels:(0,QP.validateKeys)(u,this.channels);let S=o??this.interruptBefore??[],V=t??this.interruptAfter??[],U;a!==void 0?(U=Array.isArray(a)?a:[a],d=typeof a=="string"):(U=this.streamMode,d=!0),e.configurable?.[kr.CONFIG_KEY_TASK_ID]!==void 0&&(U=["values"]);let z;this.checkpointer===!1?z=void 0:e!==void 0&&e.configurable?.[kr.CONFIG_KEY_CHECKPOINTER]!==void 0?z=e.configurable[kr.CONFIG_KEY_CHECKPOINTER]:z=this.checkpointer;let D=e.store??this.store;return[c,U,u,y,l,S,V,z,D,d]}async stream(e,r){let a=new AbortController,i={recursionLimit:this.config?.recursionLimit,...r,signal:r?.signal?(0,Fo.combineAbortSignals)(r.signal,a.signal):a.signal};return new tT.IterableReadableStreamWithAbortSignal(await super.stream(e,i),a)}streamEvents(e,r,a){let i=new AbortController,s={recursionLimit:this.config?.recursionLimit,callbacks:this.config?.callbacks,...r,signal:r?.signal?(0,Fo.combineAbortSignals)(r.signal,i.signal):i.signal};return new tT.IterableReadableStreamWithAbortSignal(super.streamEvents(e,s,a),i)}async prepareSpecs(e,r){let a={...e,store:this.store},i={},s={};for(let[o,l]of Object.entries(this.channels))(0,Gc.isBaseChannel)(l)?i[o]=l:r?.skipManaged?s[o]={cls:X3.NoopManagedValue,params:{config:{}}}:s[o]=l;let t=new X3.ManagedValueMapping(await Object.entries(s).reduce(async(o,[l,d])=>{let c=await o,y;return(0,X3.isConfiguredManagedValue)(d)?("key"in d.params&&d.params.key===X3.ChannelKeyPlaceholder&&(d.params.key=l),y=await d.cls.initialize(a,d.params)):y=await d.initialize(a),y!==void 0&&c.push([l,y]),c},Promise.resolve([])));return{channelSpecs:i,managed:t}}async _validateInput(e){return e}async _validateConfigurable(e){return e}async*_streamIterator(e,r){let a=r?.subgraphs,i=(0,Y3.ensureLangGraphConfig)(this.config,r);if(i.recursionLimit===void 0||i.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&i.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let s=await this._validateInput(e),{runId:t,...o}=i,[l,d,,c,y,u,S,V,U,z]=this._defaults(o);y.configurable=await this._validateConfigurable(y.configurable);let D=new tT.IterableReadableWritableStream({modes:new Set(d)});if(d.includes("messages")){let p=new Lge.StreamMessagesHandler(_=>D.push(_)),{callbacks:h}=y;if(h===void 0)y.callbacks=[p];else if(Array.isArray(h))y.callbacks=h.concat(p);else{let _=h.copy();_.addHandler(p,!0),y.callbacks=_}}d.includes("custom")&&(y.writer=p=>D.push([[],"custom",p]));let T=await(await(0,ku.getCallbackManagerForConfig)(y))?.handleChainStart(this.toJSON(),(0,Fo._coerceToDict)(e,"input"),t,void 0,void 0,void 0,y?.runName??this.getName()),{channelSpecs:R,managed:g}=await this.prepareSpecs(y),m,v,f=(async()=>{try{m=await Bge.PregelLoop.initialize({input:s,config:y,checkpointer:V,nodes:this.nodes,channelSpecs:R,managed:g,outputKeys:c,streamKeys:this.streamChannelsAsIs,store:U,stream:D,interruptAfter:S,interruptBefore:u,manager:T,debug:this.debug});let p=new qge.PregelRunner({loop:m,nodeFinished:y.configurable?.[kr.CONFIG_KEY_NODE_FINISHED]});r?.subgraphs&&(m.config.configurable={...m.config.configurable,[kr.CONFIG_KEY_STREAM]:m.stream}),await this._runLoop({loop:m,runner:p,debug:l,config:y})}catch(p){v=p}finally{try{m&&await m.store?.stop(),await Promise.all([...m?.checkpointerPromises??[],...Array.from(g.values()).map(p=>p.promises())])}catch(p){v=v??p}v?D.error(v):D.close()}})();try{for await(let p of D){if(p===void 0)throw new Error("Data structure error.");let[h,_,I]=p;d.includes(_)&&(a&&!z?yield[h,_,I]:z?a?yield[h,I]:yield I:yield[_,I])}}catch(p){throw await T?.handleChainError(v),p}finally{await f}await T?.handleChainEnd(m?.output??{},t,void 0,void 0,void 0)}async invoke(e,r){let a=r?.streamMode??"values",i={...r,outputKeys:r?.outputKeys??this.outputChannels,streamMode:a},s=[],t=await this.stream(e,i);for await(let o of t)s.push(o);return a==="values"?s[s.length-1]:s}async _runLoop(e){let{loop:r,runner:a,debug:i,config:s}=e,t;try{for(;await r.tick({inputKeys:this.inputChannels});)i&&(0,J3.printStepCheckpoint)(r.checkpointMetadata.step,r.channels,this.streamChannelsList),i&&(0,J3.printStepTasks)(r.step,Object.values(r.tasks)),await a.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(o,l)=>{i&&(0,J3.printStepWrites)(o,l,this.streamChannelsList)},maxConcurrency:s.maxConcurrency,signal:s.signal});if(r.status==="out_of_steps")throw new Vs.GraphRecursionError([`Recursion limit of ${s.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(o){if(t=o,!await r.finishAndHandleError(t))throw o}finally{t===void 0&&await r.finishAndHandleError()}}};dh.Pregel=aT});var sT=te(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.BinaryOperatorAggregate=Ru.empty=Ru.createCheckpoint=Ru.BaseChannel=void 0;var iT=Dl();Object.defineProperty(Ru,"BaseChannel",{enumerable:!0,get:function(){return iT.BaseChannel}});Object.defineProperty(Ru,"createCheckpoint",{enumerable:!0,get:function(){return iT.createCheckpoint}});Object.defineProperty(Ru,"empty",{enumerable:!0,get:function(){return iT.emptyChannels}});var $ge=R3();Object.defineProperty(Ru,"BinaryOperatorAggregate",{enumerable:!0,get:function(){return $ge.BinaryOperatorAggregate}})});var e_=te(Q3=>{"use strict";Object.defineProperty(Q3,"__esModule",{value:!0});Q3.EphemeralValue=void 0;var oT=ln(),Vge=sT(),uT=class n extends Vge.BaseChannel{constructor(e=!0){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"EphemeralValue"}),Object.defineProperty(this,"guard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.guard=e}fromCheckpoint(e){let r=new n(this.guard);return typeof e<"u"&&(r.value=[e]),r}update(e){if(e.length===0){let r=this.value.length>0;return this.value=[],r}if(e.length!==1&&this.guard)throw new oT.InvalidUpdateError("EphemeralValue can only receive one value per step.");return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new oT.EmptyChannelError;return this.value[0]}checkpoint(){if(this.value.length===0)throw new oT.EmptyChannelError;return this.value[0]}};Q3.EphemeralValue=uT});var pT=te(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.CompiledGraph=Hc.Graph=Hc.Branch=void 0;var gg=Oo(),Fz=tz(),t_=oi(),kz=(Xa(),fs(Tn)),zge=th(),Rz=nT(),r_=e_(),Zp=zp(),nr=qa(),lT=Ml(),cT=ln(),Wge=cg(),a_=class{constructor(e){Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),gg.Runnable.isRunnable(e.path)?this.path=e.path:this.path=(0,gg._coerceToRunnable)(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((r,a)=>(r[a]=a,r),{}):e.pathMap}run(e,r){return Zp.ChannelWrite.registerWriter(new lT.RunnableCallable({name:"<branch_run>",trace:!1,func:async(a,i)=>{try{return await this._route(a,i,e,r)}catch(s){throw s.name===cT.NodeInterrupt.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),s}}}))}async _route(e,r,a,i){let s=await this.path.invoke(i?i(r):e,r);Array.isArray(s)||(s=[s]);let t;if(this.ends?t=s.map(l=>(0,nr._isSend)(l)?l:this.ends[l]):t=s,t.some(l=>!l))throw new Error("Branch condition returned unknown or null destination");if(t.filter(nr._isSend).some(l=>l.node===nr.END))throw new cT.InvalidUpdateError("Cannot send a packet to the END node");return await a(t,r)??e}};Hc.Branch=a_;var dT=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compiled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function r(i){return i.length>=1&&typeof i[0]!="string"}let a=r(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(a.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,s,t]of a){for(let l of[nr.CHECKPOINT_NAMESPACE_SEPARATOR,nr.CHECKPOINT_NAMESPACE_END])if(i.includes(l))throw new Error(`"${l}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===nr.END)throw new Error(`Node \`${i}\` is reserved.`);let o=(0,gg._coerceToRunnable)(s);this.nodes[i]={runnable:o,metadata:t?.metadata,subgraphs:(0,Wge.isPregelLike)(o)?[o]:t?.subgraphs,ends:t?.ends}}return this}addEdge(e,r){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===nr.END)throw new Error("END cannot be a start node");if(r===nr.START)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([a])=>a===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,r]),this}addConditionalEdges(e,r,a){let i=typeof e=="object"?e:{source:e,path:r,pathMap:a};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!gg.Runnable.isRunnable(i.path)){let t=Array.isArray(i.pathMap)?i.pathMap.join(","):Object.keys(i.pathMap??{}).join(",");i.path=(0,gg._coerceToRunnable)(i.path).withConfig({runName:`Branch<${i.source}${t!==""?`,${t}`:""}>`.slice(0,63)})}let s=i.path.getName()==="RunnableLambda"?"condition":i.path.getName();if(this.branches[i.source]&&this.branches[i.source][s])throw new Error(`Condition \`${s}\` already present for node \`${e}\``);return this.branches[i.source]??={},this.branches[i.source][s]=new a_(i),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(nr.START,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,nr.END)}compile({checkpointer:e,interruptBefore:r,interruptAfter:a,name:i}={}){this.validate([...Array.isArray(r)?r:[],...Array.isArray(a)?a:[]]);let s=new n_({builder:this,checkpointer:e,interruptAfter:a,interruptBefore:r,autoValidate:!1,nodes:{},channels:{[nr.START]:new r_.EphemeralValue,[nr.END]:new r_.EphemeralValue},inputChannels:nr.START,outputChannels:nr.END,streamChannels:[],streamMode:"values",name:i});for(let[t,o]of Object.entries(this.nodes))s.attachNode(t,o);for(let[t,o]of this.edges)s.attachEdge(t,o);for(let[t,o]of Object.entries(this.branches))for(let[l,d]of Object.entries(o))s.attachBranch(t,l,d);return s.validate()}validate(e){let r=new Set([...this.allEdges].map(([i,s])=>i));for(let[i]of Object.entries(this.branches))r.add(i);for(let i of r)if(i!==nr.START&&!(i in this.nodes))throw new Error(`Found edge starting at unknown node \`${i}\``);let a=new Set([...this.allEdges].map(([i,s])=>s));for(let[i,s]of Object.entries(this.branches))for(let t of Object.values(s))if(t.ends!=null)for(let o of Object.values(t.ends))a.add(o);else{a.add(nr.END);for(let o of Object.keys(this.nodes))o!==i&&a.add(o)}for(let i of Object.values(this.nodes))for(let s of i.ends??[])a.add(s);for(let i of Object.keys(this.nodes))if(!a.has(i))throw new cT.UnreachableNodeError([`Node \`${i}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(let i of a)if(i!==nr.END&&!(i in this.nodes))throw new Error(`Found edge ending at unknown node \`${i}\``);if(e){for(let i of e)if(!(i in this.nodes))throw new Error(`Interrupt node \`${i}\` is not present`)}this.compiled=!0}};Hc.Graph=dT;var n_=class extends Rz.Pregel{constructor({builder:e,...r}){super(r),Object.defineProperty(this,"builder",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.builder=e}attachNode(e,r){this.channels[e]=new r_.EphemeralValue,this.nodes[e]=new zge.PregelNode({channels:[],triggers:[],metadata:r.metadata,subgraphs:r.subgraphs,ends:r.ends}).pipe(r.runnable).pipe(new Zp.ChannelWrite([{channel:e,value:Zp.PASSTHROUGH}],[nr.TAG_HIDDEN])),this.streamChannels.push(e)}attachEdge(e,r){if(r===nr.END){if(e===nr.START)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new Zp.ChannelWrite([{channel:nr.END,value:Zp.PASSTHROUGH}],[nr.TAG_HIDDEN]))}else this.nodes[r].triggers.push(e),this.nodes[r].channels.push(e)}attachBranch(e,r,a){e===nr.START&&!this.nodes[nr.START]&&(this.nodes[nr.START]=Rz.Channel.subscribeTo(nr.START,{tags:[nr.TAG_HIDDEN]})),this.nodes[e].pipe(a.run(s=>{let t=s.map(o=>(0,nr._isSend)(o)?o:{channel:o===nr.END?nr.END:`branch:${e}:${r}:${o}`,value:Zp.PASSTHROUGH});return new Zp.ChannelWrite(t,[nr.TAG_HIDDEN])}));let i=a.ends?Object.values(a.ends):Object.keys(this.nodes);for(let s of i)if(s!==nr.END){let t=`branch:${e}:${r}:${s}`;this.channels[t]=new r_.EphemeralValue,this.nodes[s].triggers.push(t),this.nodes[s].channels.push(t)}}async getGraphAsync(e){let r=e?.xray,a=new Fz.Graph,i={[nr.START]:a.addNode({schema:t_.z.any()},nr.START)},s={},t={};r&&(t=Object.fromEntries((await(0,lT.gatherIterator)(this.getSubgraphsAsync())).filter(d=>Iz(d[1]))));function o(d,c,y,u=!1){if(c===nr.END&&s[nr.END]===void 0&&(s[nr.END]=a.addNode({schema:t_.z.any()},nr.END)),i[d]!==void 0){if(s[c]===void 0)throw new Error(`End node ${c} not found!`);return a.addEdge(i[d],s[c],y!==c?y:void 0,u)}}for(let[d,c]of Object.entries(this.builder.nodes)){let y=Jn(d),u=c.runnable,S=c.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?S.__interrupt="before,after":this.interruptBefore?.includes(d)?S.__interrupt="before":this.interruptAfter?.includes(d)&&(S.__interrupt="after"),r){let V=typeof r=="number"?r-1:r,U=t[d]!==void 0?await t[d].getGraphAsync({...e,xray:V}):u.getGraph(e);if(U.trimFirstNode(),U.trimLastNode(),Object.keys(U.nodes).length>1){let k=function(R){return R?R.lc_runnable:!1},T=function(R,g){if(R!==void 0&&!(0,kz.validate)(R))return R;if(k(g))try{let m=g.getName();return m=m.startsWith("Runnable")?m.slice(8):m,m}catch{return g.getName()}else return g.name??"UnknownSchema"},[z,D]=a.extend(U,y);if(z===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);D!==void 0&&(i[y]={name:T(D.id,D.data),...D}),s[y]={name:T(z.id,z.data),...z}}else{let z=a.addNode(u,y,S);i[y]=z,s[y]=z}}else{let V=a.addNode(u,y,S);i[y]=V,s[y]=V}}let l=[...this.builder.allEdges].sort(([d],[c])=>d<c?-1:c>d?1:0);for(let[d,c]of l)o(Jn(d),Jn(c));for(let[d,c]of Object.entries(this.builder.branches)){let y={...Object.fromEntries(Object.keys(this.builder.nodes).filter(u=>u!==d).map(u=>[Jn(u),Jn(u)])),[nr.END]:nr.END};for(let u of Object.values(c)){let S;u.ends!==void 0?S=u.ends:S=y;for(let[V,U]of Object.entries(S))o(Jn(d),Jn(U),V,!0)}}for(let[d,c]of Object.entries(this.builder.nodes))if(c.ends!==void 0)for(let y of c.ends)o(Jn(d),Jn(y),void 0,!0);return a}getGraph(e){let r=e?.xray,a=new Fz.Graph,i={[nr.START]:a.addNode({schema:t_.z.any()},nr.START)},s={},t={};r&&(t=Object.fromEntries((0,lT.gatherIteratorSync)(this.getSubgraphs()).filter(d=>Iz(d[1]))));function o(d,c,y,u=!1){return c===nr.END&&s[nr.END]===void 0&&(s[nr.END]=a.addNode({schema:t_.z.any()},nr.END)),a.addEdge(i[d],s[c],y!==c?y:void 0,u)}for(let[d,c]of Object.entries(this.builder.nodes)){let y=Jn(d),u=c.runnable,S=c.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?S.__interrupt="before,after":this.interruptBefore?.includes(d)?S.__interrupt="before":this.interruptAfter?.includes(d)&&(S.__interrupt="after"),r){let V=typeof r=="number"?r-1:r,U=t[d]!==void 0?t[d].getGraph({...e,xray:V}):u.getGraph(e);if(U.trimFirstNode(),U.trimLastNode(),Object.keys(U.nodes).length>1){let k=function(R){return R?R.lc_runnable:!1},T=function(R,g){if(R!==void 0&&!(0,kz.validate)(R))return R;if(k(g))try{let m=g.getName();return m=m.startsWith("Runnable")?m.slice(8):m,m}catch{return g.getName()}else return g.name??"UnknownSchema"},[z,D]=a.extend(U,y);if(z===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);D!==void 0&&(i[y]={name:T(D.id,D.data),...D}),s[y]={name:T(z.id,z.data),...z}}else{let z=a.addNode(u,y,S);i[y]=z,s[y]=z}}else{let V=a.addNode(u,y,S);i[y]=V,s[y]=V}}let l=[...this.builder.allEdges].sort(([d],[c])=>d<c?-1:c>d?1:0);for(let[d,c]of l)o(Jn(d),Jn(c));for(let[d,c]of Object.entries(this.builder.branches)){let y={...Object.fromEntries(Object.keys(this.builder.nodes).filter(u=>u!==d).map(u=>[Jn(u),Jn(u)])),[nr.END]:nr.END};for(let u of Object.values(c)){let S;u.ends!==void 0?S=u.ends:S=y;for(let[V,U]of Object.entries(S))o(Jn(d),Jn(U),V,!0)}}return a}};Hc.CompiledGraph=n_;function Iz(n){return typeof n.attachNode=="function"&&typeof n.attachEdge=="function"}function Jn(n){return n==="subgraph"?`"${n}"`:n}});var Nz=te(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.NamedBarrierValue=Kc.areSetsEqual=void 0;var Dz=ln(),Gge=Dl(),Hge=(n,e)=>n.size===e.size&&[...n].every(r=>e.has(r));Kc.areSetsEqual=Hge;var fT=class n extends Gge.BaseChannel{constructor(e){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValue"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=e,this.seen=new Set}fromCheckpoint(e){let r=new n(this.names);return typeof e<"u"&&(r.seen=new Set(e)),r}update(e){let r=!1;for(let a of e)if(this.names.has(a))this.seen.has(a)||(this.seen.add(a),r=!0);else throw new Dz.InvalidUpdateError(`Value ${JSON.stringify(a)} not in names ${JSON.stringify(this.names)}`);return r}get(){if(!(0,Kc.areSetsEqual)(this.names,this.seen))throw new Dz.EmptyChannelError}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&(0,Kc.areSetsEqual)(this.seen,this.names)?(this.seen=new Set,!0):!1}};Kc.NamedBarrierValue=fT});var gT=te(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.isZodDefault=jz;Zc.isAnyZodObject=Jge;Zc.withLangGraph=Xge;Zc.getMeta=mT;Zc.extendMeta=Yge;Zc.getChannelsFromZod=Qge;var Kge=R3(),Zge=D3(),hT=new WeakMap;function Mz(n){return typeof n=="object"&&n!=null&&"_parse"in n&&typeof n._parse=="function"}function jz(n){return Mz(n)&&"removeDefault"in n&&typeof n.removeDefault=="function"}function Jge(n){return Mz(n)&&"partial"in n&&typeof n.partial=="function"}function Xge(n,e){if(e.reducer&&!e.default){let r=jz(n)?n._def.defaultValue:void 0;r!=null&&(e.default=r)}return hT.set(n,e),n}function mT(n){return hT.get(n)}function Yge(n,e){let r=mT(n),a=e(r);hT.set(n,a)}function Qge(n){let e={};for(let r in n.shape)if(Object.prototype.hasOwnProperty.call(n.shape,r)){let a=n.shape[r],i=mT(a);i?.reducer?e[r]=new Kge.BinaryOperatorAggregate(i.reducer.fn,i.default):e[r]=new Zge.LastValue}return e}});var xT=te(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.CompiledStateGraph=fh.StateGraph=void 0;var Bz=Oo(),ebe=Dl(),yT=pT(),ph=zp(),bT=th(),tbe=Nz(),$z=e_(),_T=Ml(),Ar=qa(),Vz=ln(),Lz=M3(),zz=$p(),rbe=cg(),Bi=gT(),Bl="__root__",vT=class extends yT.Graph{constructor(e,r){if(super(),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"waitingEdges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_schemaDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_configSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_configRuntimeSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ube(e)){let a=(0,Bi.getChannelsFromZod)(e.state),i=e.input!=null?(0,Bi.getChannelsFromZod)(e.input):a,s=e.output!=null?(0,Bi.getChannelsFromZod)(e.output):a;this._schemaDefinition=a,this._schemaRuntimeDefinition=e.state,this._inputDefinition=i,this._inputRuntimeDefinition=e.input??e.state.partial(),this._outputDefinition=s,this._outputRuntimeDefinition=e.output??e.state}else if((0,Bi.isAnyZodObject)(e)){let a=(0,Bi.getChannelsFromZod)(e);this._schemaDefinition=a,this._schemaRuntimeDefinition=e,this._inputDefinition=a,this._inputRuntimeDefinition=e.partial(),this._outputDefinition=a,this._outputRuntimeDefinition=e}else if(obe(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if(sbe(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(nbe(e)||qz(e)){let a=qz(e)?e.spec:e;this._schemaDefinition=a}else if(ibe(e)){let a=abe(e.channels);this._schemaDefinition=a}else throw new Error("Invalid StateGraph input.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),(0,Bi.isAnyZodObject)(r)&&(this._configRuntimeSchema=r.passthrough())}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,r])=>e.map(a=>[a,r]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(let[r,a]of Object.entries(e)){let i;if(typeof a=="function"?i=a():i=a,this.channels[r]!==void 0){if(this.channels[r]!==i&&!(0,zz.isConfiguredManagedValue)(i)&&i.lc_graph_name!=="LastValue")throw new Error(`Channel "${r}" already exists with a different type.`)}else this.channels[r]=i}}}addNode(...e){function r(i){return i.length>=1&&typeof i[0]!="string"}let a=r(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(a.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,s,t]of a){if(i in this.channels)throw new Error(`${i} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let c of[Ar.CHECKPOINT_NAMESPACE_SEPARATOR,Ar.CHECKPOINT_NAMESPACE_END])if(i.includes(c))throw new Error(`"${c}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===Ar.END||i===Ar.START)throw new Error(`Node \`${i}\` is reserved.`);let o=this._schemaDefinition;t?.input!==void 0&&((0,Bi.isAnyZodObject)(t.input)?o=(0,Bi.getChannelsFromZod)(t.input):t.input.spec!==void 0&&(o=t.input.spec)),o!==void 0&&this._addSchema(o);let l;Bz.Runnable.isRunnable(s)?l=s:typeof s=="function"?l=new _T.RunnableCallable({func:s,name:i,trace:!1}):l=(0,Bz._coerceToRunnable)(s);let d={runnable:l,retryPolicy:t?.retryPolicy,metadata:t?.metadata,input:o??this._schemaDefinition,subgraphs:(0,rbe.isPregelLike)(l)?[l]:t?.subgraphs,ends:t?.ends};this.nodes[i]=d}return this}addEdge(e,r){if(typeof e=="string")return super.addEdge(e,r);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(let a of e){if(a===Ar.END)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(i=>i===a))throw new Error(`Need to add a node named "${a}" first`)}if(r===Ar.END)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(a=>a===r))throw new Error(`Need to add a node named "${r}" first`);return this.waitingEdges.add([e,r]),this}addSequence(e){let r=Array.isArray(e)?e:Object.entries(e);if(r.length===0)throw new Error("Sequence requires at least one node.");let a;for(let[i,s,t]of r){if(i in this.nodes)throw new Error(`Node names must be unique: node with the name "${i}" already exists.`);let o=i;this.addNode(o,s,t),a!=null&&this.addEdge(a,o),a=o}return this}compile({checkpointer:e,store:r,interruptBefore:a,interruptAfter:i,name:s}={}){this.validate([...Array.isArray(a)?a:[],...Array.isArray(i)?i:[]]);let t=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),o=t.length===1&&t[0]===Bl?Bl:t,l=Object.keys(this.channels),d=l.length===1&&l[0]===Bl?Bl:l,c=new i_({builder:this,checkpointer:e,interruptAfter:i,interruptBefore:a,autoValidate:!1,nodes:{},channels:{...this.channels,[Ar.START]:new $z.EphemeralValue},inputChannels:Ar.START,outputChannels:o,streamChannels:d,streamMode:"updates",store:r,name:s});c.attachNode(Ar.START);for(let[y,u]of Object.entries(this.nodes))c.attachNode(y,u);c.attachBranch(Ar.START,Ar.SELF,Uz(),{withReader:!1});for(let[y]of Object.entries(this.nodes))c.attachBranch(y,Ar.SELF,Uz(),{withReader:!1});for(let[y,u]of this.edges)c.attachEdge(y,u);for(let[y,u]of this.waitingEdges)c.attachEdge(y,u);for(let[y,u]of Object.entries(this.branches))for(let[S,V]of Object.entries(u))c.attachBranch(y,S,V);return c.validate()}};fh.StateGraph=vT;function abe(n){let e={};for(let[r,a]of Object.entries(n))if(r===Bl)e[r]=(0,Lz.getChannel)(a);else{let i=r;e[r]=(0,Lz.getChannel)(a)}return e}var i_=class extends yT.CompiledGraph{attachNode(e,r){let a;e===Ar.START?a=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).filter(([l,d])=>!(0,zz.isConfiguredManagedValue)(d)).map(([l])=>l):a=Object.keys(this.builder.channels);function i(l){if((0,Ar.isCommand)(l))return l.graph===Ar.Command.PARENT?null:l._updateAsTuples();if(Array.isArray(l)&&l.length>0&&l.some(d=>(0,Ar.isCommand)(d))){let d=[];for(let c of l)if((0,Ar.isCommand)(c)){if(c.graph===Ar.Command.PARENT)continue;d.push(...c._updateAsTuples())}else d.push([Bl,c]);return d}else if(l!=null)return[[Bl,l]];return null}let s=e;function t(l){if(l){if((0,Ar.isCommand)(l))return l.graph===Ar.Command.PARENT?null:l._updateAsTuples().filter(([d])=>a.includes(d));if(Array.isArray(l)&&l.length>0&&l.some(Ar.isCommand)){let d=[];for(let c of l)if((0,Ar.isCommand)(c)){if(c.graph===Ar.Command.PARENT)continue;d.push(...c._updateAsTuples().filter(([y])=>a.includes(y)))}else{let y=t(c);y&&d.push(...y??[])}return d}else{if(typeof l=="object"&&!Array.isArray(l))return Object.entries(l).filter(([d])=>a.includes(d));{let d=Array.isArray(l)?"array":typeof l;throw new Vz.InvalidUpdateError(`Expected node "${s.toString()}" to return an object or an array containing at least one Command object, received ${d}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}let o=[{value:ph.PASSTHROUGH,mapper:new _T.RunnableCallable({func:a.length&&a[0]===Bl?i:t,trace:!1,recurse:!1})}];if(e===Ar.START)this.nodes[e]=new bT.PregelNode({tags:[Ar.TAG_HIDDEN],triggers:[Ar.START],channels:[Ar.START],writers:[new ph.ChannelWrite(o,[Ar.TAG_HIDDEN])]});else{let l=r?.input??this.builder._schemaDefinition,d=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(l)).map(u=>[u,u])),c=Object.keys(d).length===1&&Bl in d,y=`branch:to:${e}`;this.channels[y]=new $z.EphemeralValue(!1),this.nodes[e]=new bT.PregelNode({triggers:[y],channels:c?Object.keys(d):d,writers:[new ph.ChannelWrite(o,[Ar.TAG_HIDDEN])],mapper:c?void 0:u=>Object.fromEntries(Object.entries(u).filter(([S])=>S in d)),bound:r?.runnable,metadata:r?.metadata,retryPolicy:r?.retryPolicy,subgraphs:r?.subgraphs,ends:r?.ends})}}attachEdge(e,r){if(r!==Ar.END){if(typeof e=="string")this.nodes[e].writers.push(new ph.ChannelWrite([{channel:`branch:to:${r}`,value:null}],[Ar.TAG_HIDDEN]));else if(Array.isArray(e)){let a=`join:${e.join("+")}:${r}`;this.channels[a]=new tbe.NamedBarrierValue(new Set(e)),this.nodes[r].triggers.push(a);for(let i of e)this.nodes[i].writers.push(new ph.ChannelWrite([{channel:a,value:i}],[Ar.TAG_HIDDEN]))}}}attachBranch(e,r,a,i={withReader:!0}){let s=async(t,o)=>{let l=t.filter(c=>c!==Ar.END);if(!l.length)return;let d=l.map(c=>(0,Ar._isSend)(c)?c:{channel:`branch:to:${c}`,value:e});await ph.ChannelWrite.doWrite({...o,tags:(o.tags??[]).concat([Ar.TAG_HIDDEN])},d)};this.nodes[e].writers.push(a.run(s,i.withReader?t=>bT.ChannelRead.doRead(t,this.streamChannels??this.outputChannels,!0):void 0))}async _validateInput(e){let r=this.builder._inputRuntimeDefinition;if((0,Ar.isCommand)(e)){let a=e;return e.update&&(0,Bi.isAnyZodObject)(r)&&(a.update=r.parse(e.update)),a}return(0,Bi.isAnyZodObject)(r)?r.parse(e):e}async _validateConfigurable(e){let r=this.builder._configRuntimeSchema;return(0,Bi.isAnyZodObject)(r)&&r.parse(e),e}};fh.CompiledStateGraph=i_;function nbe(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Object.keys(n).length>0&&Object.values(n).every(e=>typeof e=="function"||(0,ebe.isBaseChannel)(e))}function qz(n){return typeof n=="object"&&n!==null&&"lc_graph_name"in n&&n.lc_graph_name==="AnnotationRoot"}function ibe(n){return typeof n=="object"&&n!==null&&n.channels!==void 0}function sbe(n){return typeof n=="object"&&n!==null&&n.stateSchema!==void 0}function obe(n){return typeof n=="object"&&n!==null&&n.stateSchema===void 0&&n.input!==void 0&&n.output!==void 0}function ube(n){return!(typeof n!="object"||n==null||!("state"in n)||!(0,Bi.isAnyZodObject)(n.state)||"input"in n&&!(0,Bi.isAnyZodObject)(n.input)||"output"in n&&!(0,Bi.isAnyZodObject)(n.output))}function lbe(n){if((0,Ar._isSend)(n))return[n];let e=[];(0,Ar.isCommand)(n)?e.push(n):Array.isArray(n)&&e.push(...n.filter(Ar.isCommand));let r=[];for(let a of e){if(a.graph===Ar.Command.PARENT)throw new Vz.ParentCommand(a);(0,Ar._isSend)(a.goto)||typeof a.goto=="string"?r.push(a.goto):Array.isArray(a.goto)&&r.push(...a.goto)}return r}function Uz(){let n=new _T.RunnableCallable({func:lbe,tags:[Ar.TAG_HIDDEN],trace:!1,recurse:!1,name:"<control_branch>"});return new yT.Branch({path:n})}});var CT=te(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.MessageGraph=Ll.REMOVE_ALL_MESSAGES=void 0;Ll.messagesStateReducer=Gz;Ll.pushMessage=dbe;var wT=Gp(),Wz=(Xa(),fs(Tn)),cbe=xT();Ll.REMOVE_ALL_MESSAGES="__remove_all__";function Gz(n,e){let r=Array.isArray(n)?n:[n],a=Array.isArray(e)?e:[e],i=r.map(wT.coerceMessageLikeToMessage),s=a.map(wT.coerceMessageLikeToMessage);for(let c of i)(c.id===null||c.id===void 0)&&(c.id=(0,Wz.v4)(),c.lc_kwargs.id=c.id);let t;for(let c=0;c<s.length;c+=1){let y=s[c];(y.id===null||y.id===void 0)&&(y.id=(0,Wz.v4)(),y.lc_kwargs.id=y.id),y.getType()==="remove"&&y.id===Ll.REMOVE_ALL_MESSAGES&&(t=c)}if(t!=null)return s.slice(t+1);let o=[...i],l=new Map(o.map((c,y)=>[c.id,y])),d=new Set;for(let c of s){let y=l.get(c.id);if(y!==void 0)c.getType()==="remove"?d.add(c.id):(d.delete(c.id),o[y]=c);else{if(c.getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${c.id}')`);l.set(c.id,o.length),o.push(c)}}return o.filter(c=>!d.has(c.id))}var ST=class extends cbe.StateGraph{constructor(){super({channels:{__root__:{reducer:Gz,default:()=>[]}}})}};Ll.MessageGraph=ST;function dbe(n,e,r){let a=r?.stateKey??"messages";r?.stateKey===null&&(a=void 0);let i=(0,wT.coerceMessageLikeToMessage)(n);if(!i.id)throw new Error("Message ID is required.");let t=(Array.isArray(e.callbacks)?e.callbacks:typeof e.callbacks<"u"?e.callbacks.handlers:[]).find(o=>"name"in o&&o.name==="StreamMessagesHandler");if(t){let o=e.metadata??{},l=(o.langgraph_checkpoint_ns??"").split("|");t._emit([l,o],i,void 0,!1)}return a&&e.configurable?.__pregel_send?.([[a,i]]),i}});var Zz=te(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.REMOVE_ALL_MESSAGES=_n.messagesStateReducer=_n.MessageGraph=_n.CompiledStateGraph=_n.StateGraph=_n.Graph=_n.AnnotationRoot=_n.Annotation=void 0;var Hz=M3();Object.defineProperty(_n,"Annotation",{enumerable:!0,get:function(){return Hz.Annotation}});Object.defineProperty(_n,"AnnotationRoot",{enumerable:!0,get:function(){return Hz.AnnotationRoot}});var pbe=pT();Object.defineProperty(_n,"Graph",{enumerable:!0,get:function(){return pbe.Graph}});var Kz=xT();Object.defineProperty(_n,"StateGraph",{enumerable:!0,get:function(){return Kz.StateGraph}});Object.defineProperty(_n,"CompiledStateGraph",{enumerable:!0,get:function(){return Kz.CompiledStateGraph}});var AT=CT();Object.defineProperty(_n,"MessageGraph",{enumerable:!0,get:function(){return AT.MessageGraph}});Object.defineProperty(_n,"messagesStateReducer",{enumerable:!0,get:function(){return AT.messagesStateReducer}});Object.defineProperty(_n,"REMOVE_ALL_MESSAGES",{enumerable:!0,get:function(){return AT.REMOVE_ALL_MESSAGES}})});var Jz=te(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.IsLastStepManager=void 0;var fbe=qa(),hbe=$p(),ET=class extends hbe.ManagedValue{call(e){return e===(this.config.recursionLimit??fbe.RECURSION_LIMIT_DEFAULT)-1}};s_.IsLastStepManager=ET});var Yz=te(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.SharedValue=void 0;var Xz=$p(),mbe=ln(),PT=class n extends Xz.WritableManagedValue{constructor(e,r){if(super(e,r),Object.defineProperty(this,"scope",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this.scope=r.scope,this.store=e.store||null,!this.store)this.ns=null;else if(e.configurable?.[this.scope]){let a=e.configurable[this.scope],i=typeof a=="string"?a:JSON.stringify(a);this.ns=["scoped",this.scope,r.key,i]}else throw new Error(`Required scope "${this.scope}" for shared state key was not passed in "config.configurable".`)}static async initialize(e,r){let a=new this(e,r);return await a.loadStore(),a}static on(e){return{cls:n,params:{scope:e,key:Xz.ChannelKeyPlaceholder}}}call(e){return{...this.value}}processUpdate(e){let r=[];for(let a of e)for(let[i,s]of Object.entries(a))if(s===null)i in this.value&&(delete this.value[i],this.ns&&r.push({namespace:this.ns,key:i,value:null}));else{if(typeof s!="object"||s===null)throw new mbe.InvalidUpdateError("Received a non-object value");this.value[i]=s,this.ns&&r.push({namespace:this.ns,key:i,value:s})}return r}async update(e){this.store?await this.store.batch(this.processUpdate(e)):this.processUpdate(e)}async loadStore(){if(this.store&&this.ns){let e=await this.store.search(this.ns);this.value=e.reduce((r,a)=>(r[a.key]=a.value,r),{})}return!1}};o_.SharedValue=PT});var Qz=te(ql=>{"use strict";var gbe=ql&&ql.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),TT=ql&&ql.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gbe(e,n,r)};Object.defineProperty(ql,"__esModule",{value:!0});TT($p(),ql);TT(Jz(),ql);TT(Yz(),ql)});var FT=te(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.entrypoint=void 0;Jp.task=xbe;Jp.getPreviousState=wbe;var bbe=Md(),vbe=nT(),ybe=th(),Ws=qa(),_be=e_(),tW=BP(),eW=D3(),hh=Ml(),OT=zp();function xbe(n,e){let{name:r,retry:a}=typeof n=="string"?{name:n,retry:void 0}:n;if((0,hh.isAsyncGeneratorFunction)(e)||(0,hh.isGeneratorFunction)(e))throw new Error("Generators are disallowed as tasks. For streaming responses, use config.write.");return(...i)=>(0,tW.call)({func:e,name:r,retry:a},...i)}Jp.entrypoint=function(e,r){let{name:a,checkpointer:i,store:s}=typeof e=="string"?{name:e,checkpointer:void 0,store:void 0}:e;if((0,hh.isAsyncGeneratorFunction)(r)||(0,hh.isGeneratorFunction)(r))throw new Error("Generators are disallowed as entrypoints. For streaming responses, use config.write.");let t="updates",o=(0,tW.getRunnableForEntrypoint)(a,r);function l(u){return typeof u=="object"&&u!==null&&"__lg_type"in u&&u.__lg_type==="__pregel_final"}let d=new hh.RunnableCallable({name:"pluckReturnValue",func:u=>l(u)?u.value:u}),c=new hh.RunnableCallable({name:"pluckSaveValue",func:u=>l(u)?u.save:u}),y=new ybe.PregelNode({bound:o,triggers:[Ws.START],channels:[Ws.START],writers:[new OT.ChannelWrite([{channel:Ws.END,value:OT.PASSTHROUGH,mapper:d},{channel:Ws.PREVIOUS,value:OT.PASSTHROUGH,mapper:c}],[Ws.TAG_HIDDEN])]});return new vbe.Pregel({name:a,checkpointer:i,nodes:{[a]:y},channels:{[Ws.START]:new _be.EphemeralValue,[Ws.END]:new eW.LastValue,[Ws.PREVIOUS]:new eW.LastValue},inputChannels:Ws.START,outputChannels:Ws.END,streamChannels:Ws.END,streamMode:t,store:s})};Jp.entrypoint.final=function({value:e,save:r}){return{value:e,save:r,__lg_type:"__pregel_final"}};function wbe(){return bbe.AsyncLocalStorageProviderSingleton.getRunnableConfig().configurable?.[Ws.CONFIG_KEY_PREVIOUS_STATE]}});var nW=te(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.MessagesZodState=mh.MessagesAnnotation=void 0;var kT=oi(),rW=M3(),aW=CT(),Sbe=gT();mh.MessagesAnnotation=rW.Annotation.Root({messages:(0,rW.Annotation)({reducer:aW.messagesStateReducer,default:()=>[]})});mh.MessagesZodState=kT.z.object({messages:(0,Sbe.withLangGraph)(kT.z.custom(),{reducer:{schema:kT.z.custom(),fn:aW.messagesStateReducer},default:()=>[]})})});var lW=te(Bt=>{"use strict";var Cbe=Bt&&Bt.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),iW=Bt&&Bt.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cbe(e,n,r)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.MessagesZodState=Bt.MessagesAnnotation=Bt.task=Bt.entrypoint=Bt.InMemoryStore=Bt.AsyncBatchedStore=Bt.BaseStore=Bt.BaseCheckpointSaver=Bt.emptyCheckpoint=Bt.copyCheckpoint=Bt.MemorySaver=Bt.END=Bt.START=Bt.isCommand=Bt.Command=Bt.Send=Bt.BinaryOperatorAggregate=Bt.BaseChannel=Bt.Annotation=Bt.REMOVE_ALL_MESSAGES=Bt.addMessages=Bt.messagesStateReducer=Bt.MessageGraph=Bt.CompiledStateGraph=Bt.StateGraph=Bt.Graph=void 0;var Jc=Zz();Object.defineProperty(Bt,"Graph",{enumerable:!0,get:function(){return Jc.Graph}});Object.defineProperty(Bt,"StateGraph",{enumerable:!0,get:function(){return Jc.StateGraph}});Object.defineProperty(Bt,"CompiledStateGraph",{enumerable:!0,get:function(){return Jc.CompiledStateGraph}});Object.defineProperty(Bt,"MessageGraph",{enumerable:!0,get:function(){return Jc.MessageGraph}});Object.defineProperty(Bt,"messagesStateReducer",{enumerable:!0,get:function(){return Jc.messagesStateReducer}});Object.defineProperty(Bt,"addMessages",{enumerable:!0,get:function(){return Jc.messagesStateReducer}});Object.defineProperty(Bt,"REMOVE_ALL_MESSAGES",{enumerable:!0,get:function(){return Jc.REMOVE_ALL_MESSAGES}});Object.defineProperty(Bt,"Annotation",{enumerable:!0,get:function(){return Jc.Annotation}});iW(ln(),Bt);var sW=sT();Object.defineProperty(Bt,"BaseChannel",{enumerable:!0,get:function(){return sW.BaseChannel}});Object.defineProperty(Bt,"BinaryOperatorAggregate",{enumerable:!0,get:function(){return sW.BinaryOperatorAggregate}});var bg=qa();Object.defineProperty(Bt,"Send",{enumerable:!0,get:function(){return bg.Send}});Object.defineProperty(Bt,"Command",{enumerable:!0,get:function(){return bg.Command}});Object.defineProperty(Bt,"isCommand",{enumerable:!0,get:function(){return bg.isCommand}});Object.defineProperty(Bt,"START",{enumerable:!0,get:function(){return bg.START}});Object.defineProperty(Bt,"END",{enumerable:!0,get:function(){return bg.END}});var Xp=H0();Object.defineProperty(Bt,"MemorySaver",{enumerable:!0,get:function(){return Xp.MemorySaver}});Object.defineProperty(Bt,"copyCheckpoint",{enumerable:!0,get:function(){return Xp.copyCheckpoint}});Object.defineProperty(Bt,"emptyCheckpoint",{enumerable:!0,get:function(){return Xp.emptyCheckpoint}});Object.defineProperty(Bt,"BaseCheckpointSaver",{enumerable:!0,get:function(){return Xp.BaseCheckpointSaver}});Object.defineProperty(Bt,"BaseStore",{enumerable:!0,get:function(){return Xp.BaseStore}});Object.defineProperty(Bt,"AsyncBatchedStore",{enumerable:!0,get:function(){return Xp.AsyncBatchedStore}});Object.defineProperty(Bt,"InMemoryStore",{enumerable:!0,get:function(){return Xp.InMemoryStore}});iW(Qz(),Bt);var oW=FT();Object.defineProperty(Bt,"entrypoint",{enumerable:!0,get:function(){return oW.entrypoint}});Object.defineProperty(Bt,"task",{enumerable:!0,get:function(){return oW.task}});var uW=nW();Object.defineProperty(Bt,"MessagesAnnotation",{enumerable:!0,get:function(){return uW.MessagesAnnotation}});Object.defineProperty(Bt,"MessagesZodState",{enumerable:!0,get:function(){return uW.MessagesZodState}})});var cW=te(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.interrupt=Pbe;var Abe=Md(),Ebe=ln(),vg=qa();function Pbe(n){let e=Abe.AsyncLocalStorageProviderSingleton.getRunnableConfig();if(!e)throw new Error("Called interrupt() outside the context of a graph.");let r=e.configurable;if(!r)throw new Error("No configurable found in config");let a=r[vg.CONFIG_KEY_SCRATCHPAD];a.interruptCounter+=1;let i=a.interruptCounter;if(a.resume.length>0&&i<a.resume.length)return a.resume[i];if(a.nullResume!==void 0){if(a.resume.length!==i)throw new Error(`Resume length mismatch: ${a.resume.length} !== ${i}`);let s=a.consumeNullResume();a.resume.push(s);let t=r[vg.CONFIG_KEY_SEND];return t&&t([[vg.RESUME,a.resume]]),s}throw new Ebe.GraphInterrupt([{value:n,when:"during",resumable:!0,ns:r[vg.CONFIG_KEY_CHECKPOINT_NS]?.split(vg.CHECKPOINT_NAMESPACE_SEPARATOR)}])}});var dW=te(pn=>{"use strict";var Tbe=pn&&pn.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Obe=pn&&pn.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tbe(e,n,r)};Object.defineProperty(pn,"__esModule",{value:!0});pn.getCurrentTaskInput=pn.getPreviousState=pn.getConfig=pn.getWriter=pn.getStore=pn.interrupt=void 0;var Fbe=Uj();(0,Fbe.initializeAsyncLocalStorageSingleton)();Obe(lW(),pn);var kbe=cW();Object.defineProperty(pn,"interrupt",{enumerable:!0,get:function(){return kbe.interrupt}});var IT=Y0();Object.defineProperty(pn,"getStore",{enumerable:!0,get:function(){return IT.getStore}});Object.defineProperty(pn,"getWriter",{enumerable:!0,get:function(){return IT.getWriter}});Object.defineProperty(pn,"getConfig",{enumerable:!0,get:function(){return IT.getConfig}});var Rbe=FT();Object.defineProperty(pn,"getPreviousState",{enumerable:!0,get:function(){return Rbe.getPreviousState}});var Ibe=Y0();Object.defineProperty(pn,"getCurrentTaskInput",{enumerable:!0,get:function(){return Ibe.getCurrentTaskInput}})});var u_=te((YBe,pW)=>{pW.exports=dW()});var l_=te((QBe,fW)=>{var{Annotation:Li}=u_(),Dbe=Li.Root({document:Li(),inputCode:Li(),userProfile:Li(),importedConstructs:Li(),outputString:Li(),outputStructure:Li(),syntaxCheckMessage:Li(),critique:Li(),modelName:Li(),llmType:Li(),maxAttempts:Li(),currentAttemptNumber:Li(),llmAPI:Li()}),DT=class{static OPENAI="OpenAIModel";static HUGGINGFACE="HuggingFaceModel";static OLLAMA="OllamaModel";static DEEPSEEK="DeepSeek"};fW.exports={agentState:Dbe,LLMType:DT}});var mW=te((eLe,hW)=>{hW.exports=CE()});var NT=te((tLe,gW)=>{gW.exports=t6()});var vW=te((c_,bW)=>{(function(n,e){typeof c_=="object"&&typeof bW<"u"?e(c_):typeof define=="function"&&define.amd?define(["exports"],e):e(n.WHATWGFetch={})})(c_,function(n){"use strict";var e=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function a(f){return f&&DataView.prototype.isPrototypeOf(f)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(f){return f&&i.indexOf(Object.prototype.toString.call(f))>-1};function t(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(f)||f==="")throw new TypeError('Invalid character in header field name: "'+f+'"');return f.toLowerCase()}function o(f){return typeof f!="string"&&(f=String(f)),f}function l(f){var p={next:function(){var h=f.shift();return{done:h===void 0,value:h}}};return r.iterable&&(p[Symbol.iterator]=function(){return p}),p}function d(f){this.map={},f instanceof d?f.forEach(function(p,h){this.append(h,p)},this):Array.isArray(f)?f.forEach(function(p){if(p.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+p.length);this.append(p[0],p[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(p){this.append(p,f[p])},this)}d.prototype.append=function(f,p){f=t(f),p=o(p);var h=this.map[f];this.map[f]=h?h+", "+p:p},d.prototype.delete=function(f){delete this.map[t(f)]},d.prototype.get=function(f){return f=t(f),this.has(f)?this.map[f]:null},d.prototype.has=function(f){return this.map.hasOwnProperty(t(f))},d.prototype.set=function(f,p){this.map[t(f)]=o(p)},d.prototype.forEach=function(f,p){for(var h in this.map)this.map.hasOwnProperty(h)&&f.call(p,this.map[h],h,this)},d.prototype.keys=function(){var f=[];return this.forEach(function(p,h){f.push(h)}),l(f)},d.prototype.values=function(){var f=[];return this.forEach(function(p){f.push(p)}),l(f)},d.prototype.entries=function(){var f=[];return this.forEach(function(p,h){f.push([h,p])}),l(f)},r.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function c(f){if(!f._noBody){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}}function y(f){return new Promise(function(p,h){f.onload=function(){p(f.result)},f.onerror=function(){h(f.error)}})}function u(f){var p=new FileReader,h=y(p);return p.readAsArrayBuffer(f),h}function S(f){var p=new FileReader,h=y(p),_=/charset=([A-Za-z0-9_-]+)/.exec(f.type),I=_?_[1]:"utf-8";return p.readAsText(f,I),h}function V(f){for(var p=new Uint8Array(f),h=new Array(p.length),_=0;_<p.length;_++)h[_]=String.fromCharCode(p[_]);return h.join("")}function U(f){if(f.slice)return f.slice(0);var p=new Uint8Array(f.byteLength);return p.set(new Uint8Array(f)),p.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(f){this.bodyUsed=this.bodyUsed,this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:r.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:r.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():r.arrayBuffer&&r.blob&&a(f)?(this._bodyArrayBuffer=U(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||s(f))?this._bodyArrayBuffer=U(f):this._bodyText=f=Object.prototype.toString.call(f):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var f=c(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var f=c(this);return f||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(r.blob)return this.blob().then(u);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var f=c(this);if(f)return f;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(V(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function k(f){var p=f.toUpperCase();return D.indexOf(p)>-1?p:f}function T(f,p){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');p=p||{};var h=p.body;if(f instanceof T){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,p.headers||(this.headers=new d(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!h&&f._bodyInit!=null&&(h=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new d(p.headers)),this.method=k(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal||function(){if("AbortController"in e){var W=new AbortController;return W.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(h),(this.method==="GET"||this.method==="HEAD")&&(p.cache==="no-store"||p.cache==="no-cache")){var _=/([?&])_=[^&]*/;if(_.test(this.url))this.url=this.url.replace(_,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function R(f){var p=new FormData;return f.trim().split("&").forEach(function(h){if(h){var _=h.split("="),I=_.shift().replace(/\+/g," "),W=_.join("=").replace(/\+/g," ");p.append(decodeURIComponent(I),decodeURIComponent(W))}}),p}function g(f){var p=new d,h=f.replace(/\r?\n[\t ]+/g," ");return h.split("\r").map(function(_){return _.indexOf(`
`)===0?_.substr(1,_.length):_}).forEach(function(_){var I=_.split(":"),W=I.shift().trim();if(W){var q=I.join(":").trim();try{p.append(W,q)}catch(B){console.warn("Response "+B.message)}}}),p}z.call(T.prototype);function m(f,p){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=p.statusText===void 0?"":""+p.statusText,this.headers=new d(p.headers),this.url=p.url||"",this._initBody(f)}z.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},m.error=function(){var f=new m(null,{status:200,statusText:""});return f.ok=!1,f.status=0,f.type="error",f};var v=[301,302,303,307,308];m.redirect=function(f,p){if(v.indexOf(p)===-1)throw new RangeError("Invalid status code");return new m(null,{status:p,headers:{location:f}})},n.DOMException=e.DOMException;try{new n.DOMException}catch{n.DOMException=function(p,h){this.message=p,this.name=h;var _=Error(p);this.stack=_.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function b(f,p){return new Promise(function(h,_){var I=new T(f,p);if(I.signal&&I.signal.aborted)return _(new n.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function q(){W.abort()}W.onload=function(){var L={statusText:W.statusText,headers:g(W.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(W.status<200||W.status>599)?L.status=200:L.status=W.status,L.url="responseURL"in W?W.responseURL:L.headers.get("X-Request-URL");var P="response"in W?W.response:W.responseText;setTimeout(function(){h(new m(P,L))},0)},W.onerror=function(){setTimeout(function(){_(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){_(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){_(new n.DOMException("Aborted","AbortError"))},0)};function B(L){try{return L===""&&e.location.href?e.location.href:L}catch{return L}}if(W.open(I.method,B(I.url),!0),I.credentials==="include"?W.withCredentials=!0:I.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(r.blob?W.responseType="blob":r.arrayBuffer&&(W.responseType="arraybuffer")),p&&typeof p.headers=="object"&&!(p.headers instanceof d||e.Headers&&p.headers instanceof e.Headers)){var N=[];Object.getOwnPropertyNames(p.headers).forEach(function(L){N.push(t(L)),W.setRequestHeader(L,o(p.headers[L]))}),I.headers.forEach(function(L,P){N.indexOf(P)===-1&&W.setRequestHeader(P,L)})}else I.headers.forEach(function(L,P){W.setRequestHeader(P,L)});I.signal&&(I.signal.addEventListener("abort",q),W.onreadystatechange=function(){W.readyState===4&&I.signal.removeEventListener("abort",q)}),W.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}b.polyfill=!0,e.fetch||(e.fetch=b,e.Headers=d,e.Request=T,e.Response=m),n.Headers=d,n.Request=T,n.Response=m,n.fetch=b,Object.defineProperty(n,"__esModule",{value:!0})})});var p_=te(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});vW();var _W="11434",xW=`http://127.0.0.1:${_W}`,Nbe="0.5.16",Mbe=Object.defineProperty,jbe=(n,e,r)=>e in n?Mbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,MT=(n,e,r)=>(jbe(n,typeof e!="symbol"?e+"":e,r),r),BT=class n extends Error{constructor(e,r){super(e),this.error=e,this.status_code=r,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,n)}},LT=class{constructor(e,r,a){MT(this,"abortController"),MT(this,"itr"),MT(this,"doneCallback"),this.abortController=e,this.itr=r,this.doneCallback=a}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(let e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}},qT=async n=>{if(n.ok)return;let e=`Error ${n.status}: ${n.statusText}`,r=null;if(n.headers.get("content-type")?.includes("application/json"))try{r=await n.json(),e=r.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await n.text()||e}catch{console.log("Failed to get text from error response")}throw new BT(e,n.status)};function Bbe(){if(typeof window<"u"&&window.navigator){let n=navigator;return"userAgentData"in n&&n.userAgentData?.platform?`${n.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function Lbe(n){if(n instanceof Headers){let e={};return n.forEach((r,a)=>{e[a]=r}),e}else return Array.isArray(n)?Object.fromEntries(n):n||{}}var UT=async(n,e,r={})=>{let a={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${Nbe} (${Bbe()})`};r.headers=Lbe(r.headers);let i=Object.fromEntries(Object.entries(r.headers).filter(([s])=>!Object.keys(a).some(t=>t.toLowerCase()===s.toLowerCase())));return r.headers={...a,...i},n(e,r)},yW=async(n,e,r)=>{let a=await UT(n,e,{headers:r?.headers});return await qT(a),a},gh=async(n,e,r,a)=>{let s=(o=>o!==null&&typeof o=="object"&&!Array.isArray(o))(r)?JSON.stringify(r):r,t=await UT(n,e,{method:"POST",body:s,signal:a?.signal,headers:a?.headers});return await qT(t),t},qbe=async(n,e,r,a)=>{let i=await UT(n,e,{method:"DELETE",body:JSON.stringify(r),headers:a?.headers});return await qT(i),i},Ube=async function*(n){let e=new TextDecoder("utf-8"),r="",a=n.getReader();for(;;){let{done:i,value:s}=await a.read();if(i)break;r+=e.decode(s);let t=r.split(`
`);r=t.pop()??"";for(let o of t)try{yield JSON.parse(o)}catch{console.warn("invalid json: ",o)}}for(let i of r.split(`
`).filter(s=>s!==""))try{yield JSON.parse(i)}catch{console.warn("invalid json: ",i)}},$be=n=>{if(!n)return xW;let e=n.includes("://");n.startsWith(":")&&(n=`http://127.0.0.1${n}`,e=!0),e||(n=`http://${n}`);let r=new URL(n),a=r.port;a||(e?a=r.protocol==="https:"?"443":"80":a=_W);let i="";r.username&&(i=r.username,r.password&&(i+=`:${r.password}`),i+="@");let s=`${r.protocol}//${i}${r.hostname}:${a}${r.pathname}`;return s.endsWith("/")&&(s=s.slice(0,-1)),s},Vbe=Object.defineProperty,zbe=(n,e,r)=>e in n?Vbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,jT=(n,e,r)=>(zbe(n,typeof e!="symbol"?e+"":e,r),r),wW=class{constructor(e){jT(this,"config"),jT(this,"fetch"),jT(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e?.headers},e?.proxy||(this.config.host=$be(e?.host??xW)),this.fetch=e?.fetch??fetch}abort(){for(let e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,r){r.stream=r.stream??!1;let a=`${this.config.host}/api/${e}`;if(r.stream){let s=new AbortController,t=await gh(this.fetch,a,r,{signal:s.signal,headers:this.config.headers});if(!t.body)throw new Error("Missing body");let o=Ube(t.body),l=new LT(s,o,()=>{let d=this.ongoingStreamedRequests.indexOf(l);d>-1&&this.ongoingStreamedRequests.splice(d,1)});return this.ongoingStreamedRequests.push(l),l}return await(await gh(this.fetch,a,r,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){let r=new Uint8Array(e),a="",i=r.byteLength;for(let s=0;s<i;s++)a+=String.fromCharCode(r[s]);return btoa(a)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(let r of e.messages)r.images&&(r.images=await Promise.all(r.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await qbe(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await gh(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await yW(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await gh(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await gh(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await gh(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await yW(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}},Wbe=new wW;d_.Ollama=wW;d_.default=Wbe});var yg=te((nLe,SW)=>{SW.exports=pc()});var f_=te((iLe,CW)=>{CW.exports=IE()});var $T=te((sLe,AW)=>{AW.exports=dC()});var PW=te((oLe,EW)=>{EW.exports=rP()});var OW=te(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.convertToOllamaMessages=bh.convertOllamaMessagesToLangChain=void 0;var Gbe=Gp(),Hbe=(Xa(),fs(Tn));function Kbe(n,e){return new Gbe.AIMessageChunk({content:n.content??"",tool_call_chunks:n.tool_calls?.map(r=>({name:r.function.name,args:JSON.stringify(r.function.arguments),type:"tool_call_chunk",index:0,id:(0,Hbe.v4)()})),response_metadata:e?.responseMetadata,usage_metadata:e?.usageMetadata})}bh.convertOllamaMessagesToLangChain=Kbe;function TW(n){let e=n.match(/^data:.*?;base64,(.*)$/);return e?e[1]:""}function Zbe(n){if(typeof n.content=="string")return[{role:"assistant",content:n.content}];let r=n.content.filter(i=>i.type==="text"&&typeof i.text=="string").map(i=>({role:"assistant",content:i.text})),a;if(n.content.find(i=>i.type==="tool_use")&&n.tool_calls?.length){let i=n.tool_calls?.map(s=>({id:s.id,type:"function",function:{name:s.name,arguments:s.args}}));i&&(a={role:"assistant",tool_calls:i,content:""})}else if(n.content.find(i=>i.type==="tool_use")&&!n.tool_calls?.length)throw new Error("'tool_use' content type is not supported without tool calls.");return[...r,...a?[a]:[]]}function Jbe(n){return typeof n.content=="string"?[{role:"user",content:n.content}]:n.content.map(e=>{if(e.type==="text")return{role:"user",content:e.text};if(e.type==="image_url"){if(typeof e.image_url=="string")return{role:"user",content:"",images:[TW(e.image_url)]};if(e.image_url.url&&typeof e.image_url.url=="string")return{role:"user",content:"",images:[TW(e.image_url.url)]}}throw new Error(`Unsupported content type: ${e.type}`)})}function Xbe(n){if(typeof n.content=="string")return[{role:"system",content:n.content}];if(n.content.every(e=>e.type==="text"&&typeof e.text=="string"))return n.content.map(e=>({role:"system",content:e.text}));throw new Error(`Unsupported content type(s): ${n.content.map(e=>e.type).join(", ")}`)}function Ybe(n){if(typeof n.content!="string")throw new Error("Non string tool message content is not supported");return[{role:"tool",content:n.content}]}function Qbe(n){return n.flatMap(e=>{if(["human","generic"].includes(e._getType()))return Jbe(e);if(e._getType()==="ai")return Zbe(e);if(e._getType()==="system")return Xbe(e);if(e._getType()==="tool")return Ybe(e);throw new Error(`Unsupported message type: ${e._getType()}`)})}bh.convertToOllamaMessages=Qbe});var RW=te(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.ChatOllama=void 0;var e2e=Gp(),t2e=NT(),r2e=p_(),VT=yg(),a2e=Gp(),zT=Oo(),FW=f_(),n2e=VP(),kW=$T(),i2e=PW(),s2e=gc(),WT=OW(),GT=class extends t2e.BaseChatModel{static lc_name(){return"ChatOllama"}constructor(e){super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"numa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16Kv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMmap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkOrPullModel",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://127.0.0.1:11434"}),this.client=new r2e.Ollama({host:e?.baseUrl,headers:e?.headers}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.numa=e?.numa,this.numCtx=e?.numCtx,this.numBatch=e?.numBatch,this.numGpu=e?.numGpu,this.mainGpu=e?.mainGpu,this.lowVram=e?.lowVram,this.f16Kv=e?.f16Kv,this.logitsAll=e?.logitsAll,this.vocabOnly=e?.vocabOnly,this.useMmap=e?.useMmap,this.useMlock=e?.useMlock,this.embeddingOnly=e?.embeddingOnly,this.numThread=e?.numThread,this.numKeep=e?.numKeep,this.seed=e?.seed,this.numPredict=e?.numPredict,this.topK=e?.topK,this.topP=e?.topP,this.tfsZ=e?.tfsZ,this.typicalP=e?.typicalP,this.repeatLastN=e?.repeatLastN,this.temperature=e?.temperature,this.repeatPenalty=e?.repeatPenalty,this.presencePenalty=e?.presencePenalty,this.frequencyPenalty=e?.frequencyPenalty,this.mirostat=e?.mirostat,this.mirostatTau=e?.mirostatTau,this.mirostatEta=e?.mirostatEta,this.penalizeNewline=e?.penalizeNewline,this.streaming=e?.streaming,this.format=e?.format,this.keepAlive=e?.keepAlive,this.checkOrPullModel=e?.checkOrPullModel??this.checkOrPullModel}_llmType(){return"ollama"}async pull(e,r){let{stream:a,insecure:i,logProgress:s}={stream:!0,...r};if(a)for await(let t of await this.client.pull({model:e,insecure:i,stream:a}))s&&console.log(t);else{let t=await this.client.pull({model:e,insecure:i});s&&console.log(t)}}bindTools(e,r){return this.bind({tools:e.map(a=>(0,FW.convertToOpenAITool)(a)),...r})}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"ollama",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.options?.temperature??void 0,ls_max_tokens:r.options?.num_predict??void 0,ls_stop:e.stop}}invocationParams(e){if(e?.tool_choice)throw new Error("Tool choice is not supported for ChatOllama.");return{model:this.model,format:e?.format??this.format,keep_alive:this.keepAlive,options:{numa:this.numa,num_ctx:this.numCtx,num_batch:this.numBatch,num_gpu:this.numGpu,main_gpu:this.mainGpu,low_vram:this.lowVram,f16_kv:this.f16Kv,logits_all:this.logitsAll,vocab_only:this.vocabOnly,use_mmap:this.useMmap,use_mlock:this.useMlock,embedding_only:this.embeddingOnly,num_thread:this.numThread,num_keep:this.numKeep,seed:this.seed,num_predict:this.numPredict,top_k:this.topK,top_p:this.topP,tfs_z:this.tfsZ,typical_p:this.typicalP,repeat_last_n:this.repeatLastN,temperature:this.temperature,repeat_penalty:this.repeatPenalty,presence_penalty:this.presencePenalty,frequency_penalty:this.frequencyPenalty,mirostat:this.mirostat,mirostat_tau:this.mirostatTau,mirostat_eta:this.mirostatEta,penalize_newline:this.penalizeNewline,stop:e?.stop},tools:e?.tools?.length?e.tools.map(r=>(0,FW.convertToOpenAITool)(r)):void 0}}async checkModelExistsOnMachine(e){let{models:r}=await this.client.list();return!!r.find(a=>a.name===e||a.name===`${e}:latest`)}async _generate(e,r,a){this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));let i;for await(let t of this._streamResponseChunks(e,r,a))i?i=(0,n2e.concat)(i,t.message):i=t.message;let s=new e2e.AIMessage({id:i?.id,content:i?.content??"",tool_calls:i?.tool_calls,response_metadata:i?.response_metadata,usage_metadata:i?.usage_metadata});return{generations:[{text:typeof s.content=="string"?s.content:"",message:s}]}}async*_streamResponseChunks(e,r,a){this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));let i=this.invocationParams(r),s=(0,WT.convertToOllamaMessages)(e),t={input_tokens:0,output_tokens:0,total_tokens:0};if(i.tools&&i.tools.length>0){let d=await this.client.chat({...i,messages:s,stream:!1}),{message:c,...y}=d;return t.input_tokens+=y.prompt_eval_count??0,t.output_tokens+=y.eval_count??0,t.total_tokens=t.input_tokens+t.output_tokens,yield new VT.ChatGenerationChunk({text:c.content,message:(0,WT.convertOllamaMessagesToLangChain)(c,{responseMetadata:y,usageMetadata:t})}),a?.handleLLMNewToken(c.content)}let o=await this.client.chat({...i,messages:s,stream:!0}),l;for await(let d of o){r.signal?.aborted&&this.client.abort();let{message:c,...y}=d;t.input_tokens+=y.prompt_eval_count??0,t.output_tokens+=y.eval_count??0,t.total_tokens=t.input_tokens+t.output_tokens,l=y,yield new VT.ChatGenerationChunk({text:c.content??"",message:(0,WT.convertOllamaMessagesToLangChain)(c)}),await a?.handleLLMNewToken(c.content??"")}yield new VT.ChatGenerationChunk({text:"",message:new a2e.AIMessageChunk({content:"",response_metadata:l,usage_metadata:t})})}withStructuredOutput(e,r){if(r?.method===void 0||r?.method==="jsonSchema"){let a=(0,i2e.isZodSchema)(e),i=a?(0,s2e.zodToJsonSchema)(e):e,s=this.bind({format:i}),t=a?kW.StructuredOutputParser.fromZodSchema(e):new kW.JsonOutputParser;if(!r?.includeRaw)return s.pipe(t);let o=zT.RunnablePassthrough.assign({parsed:(c,y)=>t.invoke(c.raw,y)}),l=zT.RunnablePassthrough.assign({parsed:()=>null}),d=o.withFallbacks({fallbacks:[l]});return zT.RunnableSequence.from([{raw:s},d])}else return super.withStructuredOutput(e,r)}};h_.ChatOllama=GT});var HT=te((cLe,IW)=>{IW.exports=qy()});var DW=te(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.OllamaEmbeddings=void 0;var o2e=HT(),u2e=p_(),KT=class extends o2e.Embeddings{constructor(e){super({maxConcurrency:1,...e}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mxbai-embed-large"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"truncate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.client=new u2e.Ollama({host:e?.baseUrl,headers:e?.headers?new Headers(e.headers):void 0}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.keepAlive=e?.keepAlive,this.truncate=e?.truncate??this.truncate,this.requestOptions=e?.requestOptions?this._convertOptions(e?.requestOptions):void 0}_convertOptions(e){let r={},a={embeddingOnly:"embedding_only",frequencyPenalty:"frequency_penalty",keepAlive:"keep_alive",logitsAll:"logits_all",lowVram:"low_vram",mainGpu:"main_gpu",mirostat:"mirostat",mirostatEta:"mirostat_eta",mirostatTau:"mirostat_tau",numBatch:"num_batch",numCtx:"num_ctx",numGpu:"num_gpu",numKeep:"num_keep",numPredict:"num_predict",numThread:"num_thread",penalizeNewline:"penalize_newline",presencePenalty:"presence_penalty",repeatLastN:"repeat_last_n",repeatPenalty:"repeat_penalty",temperature:"temperature",stop:"stop",tfsZ:"tfs_z",topK:"top_k",topP:"top_p",typicalP:"typical_p",useMlock:"use_mlock",useMmap:"use_mmap",vocabOnly:"vocab_only",f16Kv:"f16_kv",numa:"numa",seed:"seed"};for(let[i,s]of Object.entries(e)){let t=a[i];t?r[t]=s:r[i]=s}return r}async embedDocuments(e){return this.embeddingWithRetry(e)}async embedQuery(e){return(await this.embeddingWithRetry([e]))[0]}async embeddingWithRetry(e){return(await this.caller.call(()=>this.client.embed({model:this.model,input:e,keep_alive:this.keepAlive,options:this.requestOptions,truncate:this.truncate}))).embeddings}};m_.OllamaEmbeddings=KT});var MW=te(NW=>{"use strict";Object.defineProperty(NW,"__esModule",{value:!0})});var ZT=te((fLe,jW)=>{jW.exports=a6()});var LW=te(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.Ollama=void 0;var BW=yg(),l2e=ZT(),c2e=p_(),JT=class extends l2e.LLM{static lc_name(){return"Ollama"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=e?.model??this.model,this.baseUrl=e?.baseUrl?.endsWith("/")?e?.baseUrl.slice(0,-1):e?.baseUrl??this.baseUrl,this.client=new c2e.Ollama({host:this.baseUrl,headers:e?.headers}),this.keepAlive=e?.keepAlive,this.embeddingOnly=e?.embeddingOnly,this.f16KV=e?.f16Kv,this.frequencyPenalty=e?.frequencyPenalty,this.logitsAll=e?.logitsAll,this.lowVram=e?.lowVram,this.mainGpu=e?.mainGpu,this.mirostat=e?.mirostat,this.mirostatEta=e?.mirostatEta,this.mirostatTau=e?.mirostatTau,this.numBatch=e?.numBatch,this.numCtx=e?.numCtx,this.numGpu=e?.numGpu,this.numKeep=e?.numKeep,this.numPredict=e?.numPredict,this.numThread=e?.numThread,this.penalizeNewline=e?.penalizeNewline,this.presencePenalty=e?.presencePenalty,this.repeatLastN=e?.repeatLastN,this.repeatPenalty=e?.repeatPenalty,this.temperature=e?.temperature,this.stop=e?.stop,this.tfsZ=e?.tfsZ,this.topK=e?.topK,this.topP=e?.topP,this.typicalP=e?.typicalP,this.useMLock=e?.useMlock,this.useMMap=e?.useMmap,this.vocabOnly=e?.vocabOnly,this.format=e?.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e?.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:e?.stop??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,r,a){let i=await this.caller.call(async()=>this.client.generate({...this.invocationParams(r),prompt:e,stream:!0}));for await(let s of i){if(r.signal?.aborted)throw new Error("This operation was aborted");s.done?yield new BW.GenerationChunk({text:"",generationInfo:{model:s.model,total_duration:s.total_duration,load_duration:s.load_duration,prompt_eval_count:s.prompt_eval_count,prompt_eval_duration:s.prompt_eval_duration,eval_count:s.eval_count,eval_duration:s.eval_duration}}):(yield new BW.GenerationChunk({text:s.response,generationInfo:{...s,response:void 0}}),await a?.handleLLMNewToken(s.response??""))}}async _call(e,r,a){let i=[];for await(let s of this._streamResponseChunks(e,r,a))i.push(s.text);return i.join("")}};g_.Ollama=JT});var qW=te(Iu=>{"use strict";var d2e=Iu&&Iu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),b_=Iu&&Iu.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&d2e(e,n,r)};Object.defineProperty(Iu,"__esModule",{value:!0});b_(RW(),Iu);b_(DW(),Iu);b_(MW(),Iu);b_(LW(),Iu)});var XT=te((gLe,UW)=>{UW.exports=qW()});var v_=te(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.RFC3986=Du.RFC1738=Du.formatters=Du.default_format=void 0;Du.default_format="RFC3986";Du.formatters={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)};Du.RFC1738="RFC1738";Du.RFC3986="RFC3986"});var $W=te(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.maybe_map=nn.combine=nn.is_buffer=nn.is_regexp=nn.compact=nn.encode=nn.decode=nn.assign_single_source=nn.merge=void 0;var p2e=v_(),YT=Object.prototype.hasOwnProperty,Yp=Array.isArray,Nu=(()=>{let n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})();function f2e(n){for(;n.length>1;){let e=n.pop();if(!e)continue;let r=e.obj[e.prop];if(Yp(r)){let a=[];for(let i=0;i<r.length;++i)typeof r[i]<"u"&&a.push(r[i]);e.obj[e.prop]=a}}}function h2e(n,e){let r=e&&e.plainObjects?Object.create(null):{};for(let a=0;a<n.length;++a)typeof n[a]<"u"&&(r[a]=n[a]);return r}function eO(n,e,r={}){if(!e)return n;if(typeof e!="object"){if(Yp(n))n.push(e);else if(n&&typeof n=="object")(r&&(r.plainObjects||r.allowPrototypes)||!YT.call(Object.prototype,e))&&(n[e]=!0);else return[n,e];return n}if(!n||typeof n!="object")return[n].concat(e);let a=n;return Yp(n)&&!Yp(e)&&(a=h2e(n,r)),Yp(n)&&Yp(e)?(e.forEach(function(i,s){if(YT.call(n,s)){let t=n[s];t&&typeof t=="object"&&i&&typeof i=="object"?n[s]=eO(t,i,r):n.push(i)}else n[s]=i}),n):Object.keys(e).reduce(function(i,s){let t=e[s];return YT.call(i,s)?i[s]=eO(i[s],t,r):i[s]=t,i},a)}nn.merge=eO;function m2e(n,e){return Object.keys(e).reduce(function(r,a){return r[a]=e[a],r},n)}nn.assign_single_source=m2e;function g2e(n,e,r){let a=n.replace(/\+/g," ");if(r==="iso-8859-1")return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch{return a}}nn.decode=g2e;var QT=1024,b2e=(n,e,r,a,i)=>{if(n.length===0)return n;let s=n;if(typeof n=="symbol"?s=Symbol.prototype.toString.call(n):typeof n!="string"&&(s=String(n)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let t="";for(let o=0;o<s.length;o+=QT){let l=s.length>=QT?s.slice(o,o+QT):s,d=[];for(let c=0;c<l.length;++c){let y=l.charCodeAt(c);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||i===p2e.RFC1738&&(y===40||y===41)){d[d.length]=l.charAt(c);continue}if(y<128){d[d.length]=Nu[y];continue}if(y<2048){d[d.length]=Nu[192|y>>6]+Nu[128|y&63];continue}if(y<55296||y>=57344){d[d.length]=Nu[224|y>>12]+Nu[128|y>>6&63]+Nu[128|y&63];continue}c+=1,y=65536+((y&1023)<<10|l.charCodeAt(c)&1023),d[d.length]=Nu[240|y>>18]+Nu[128|y>>12&63]+Nu[128|y>>6&63]+Nu[128|y&63]}t+=d.join("")}return t};nn.encode=b2e;function v2e(n){let e=[{obj:{o:n},prop:"o"}],r=[];for(let a=0;a<e.length;++a){let i=e[a],s=i.obj[i.prop],t=Object.keys(s);for(let o=0;o<t.length;++o){let l=t[o],d=s[l];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(e.push({obj:s,prop:l}),r.push(d))}}return f2e(e),n}nn.compact=v2e;function y2e(n){return Object.prototype.toString.call(n)==="[object RegExp]"}nn.is_regexp=y2e;function _2e(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}nn.is_buffer=_2e;function x2e(n,e){return[].concat(n,e)}nn.combine=x2e;function w2e(n,e){if(Yp(n)){let r=[];for(let a=0;a<n.length;a+=1)r.push(e(n[a]));return r}return e(n)}nn.maybe_map=w2e});var GW=te(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.stringify=void 0;var y_=$W(),vh=v_(),S2e=Object.prototype.hasOwnProperty,VW={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Mu=Array.isArray,C2e=Array.prototype.push,zW=function(n,e){C2e.apply(n,Mu(e)?e:[e])},A2e=Date.prototype.toISOString,fn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:y_.encode,encodeValuesOnly:!1,format:vh.default_format,formatter:vh.formatters[vh.default_format],indices:!1,serializeDate(n){return A2e.call(n)},skipNulls:!1,strictNullHandling:!1};function E2e(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}var tO={};function WW(n,e,r,a,i,s,t,o,l,d,c,y,u,S,V,U,z,D){let k=n,T=D,R=0,g=!1;for(;(T=T.get(tO))!==void 0&&!g;){let p=T.get(n);if(R+=1,typeof p<"u"){if(p===R)throw new RangeError("Cyclic object value");g=!0}typeof T.get(tO)>"u"&&(R=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=u?.(k):r==="comma"&&Mu(k)&&(k=(0,y_.maybe_map)(k,function(p){return p instanceof Date?u?.(p):p})),k===null){if(s)return l&&!U?l(e,fn.encoder,z,"key",S):e;k=""}if(E2e(k)||(0,y_.is_buffer)(k)){if(l){let p=U?e:l(e,fn.encoder,z,"key",S);return[V?.(p)+"="+V?.(l(k,fn.encoder,z,"value",S))]}return[V?.(e)+"="+V?.(String(k))]}let m=[];if(typeof k>"u")return m;let v;if(r==="comma"&&Mu(k))U&&l&&(k=(0,y_.maybe_map)(k,l)),v=[{value:k.length>0?k.join(",")||null:void 0}];else if(Mu(d))v=d;else{let p=Object.keys(k);v=c?p.sort(c):p}let b=o?String(e).replace(/\./g,"%2E"):String(e),f=a&&Mu(k)&&k.length===1?b+"[]":b;if(i&&Mu(k)&&k.length===0)return f+"[]";for(let p=0;p<v.length;++p){let h=v[p],_=typeof h=="object"&&typeof h.value<"u"?h.value:k[h];if(t&&_===null)continue;let I=y&&o?h.replace(/\./g,"%2E"):h,W=Mu(k)?typeof r=="function"?r(f,I):f:f+(y?"."+I:"["+I+"]");D.set(n,R);let q=new WeakMap;q.set(tO,D),zW(m,WW(_,W,r,a,i,s,t,o,r==="comma"&&U&&Mu(k)?null:l,d,c,y,u,S,V,U,z,q))}return m}function P2e(n=fn){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=n.charset||fn.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=vh.default_format;if(typeof n.format<"u"){if(!S2e.call(vh.formatters,n.format))throw new TypeError("Unknown format option provided.");r=n.format}let a=vh.formatters[r],i=fn.filter;(typeof n.filter=="function"||Mu(n.filter))&&(i=n.filter);let s;if(n.arrayFormat&&n.arrayFormat in VW?s=n.arrayFormat:"indices"in n?s=n.indices?"indices":"repeat":s=fn.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let t=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:fn.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:fn.addQueryPrefix,allowDots:t,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:fn.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:fn.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?fn.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:fn.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:fn.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:fn.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:fn.encodeValuesOnly,filter:i,format:r,formatter:a,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:fn.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:fn.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:fn.strictNullHandling}}function T2e(n,e={}){let r=n,a=P2e(e),i,s;typeof a.filter=="function"?(s=a.filter,r=s("",r)):Mu(a.filter)&&(s=a.filter,i=s);let t=[];if(typeof r!="object"||r===null)return"";let o=VW[a.arrayFormat],l=o==="comma"&&a.commaRoundTrip;i||(i=Object.keys(r)),a.sort&&i.sort(a.sort);let d=new WeakMap;for(let u=0;u<i.length;++u){let S=i[u];a.skipNulls&&r[S]===null||zW(t,WW(r[S],S,o,l,a.allowEmptyArrays,a.strictNullHandling,a.skipNulls,a.encodeDotInKeys,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,d))}let c=t.join(a.delimiter),y=a.addQueryPrefix===!0?"?":"";return a.charsetSentinel&&(a.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),c.length>0?y+c:""}__.stringify=T2e});var HW=te(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.formats=yh.stringify=void 0;var x_=v_(),O2e={formatters:x_.formatters,RFC1738:x_.RFC1738,RFC3986:x_.RFC3986,default:x_.default_format};yh.formats=O2e;var F2e=GW();Object.defineProperty(yh,"stringify",{enumerable:!0,get:function(){return F2e.stringify}})});var KW=te(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});w_.VERSION=void 0;w_.VERSION="4.104.0"});var ZW=te(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.setShims=er.isFsReadStream=er.fileFromPath=er.getDefaultAgent=er.getMultipartRequestOptions=er.ReadableStream=er.File=er.Blob=er.FormData=er.Headers=er.Response=er.Request=er.fetch=er.kind=er.auto=void 0;er.auto=!1;er.kind=void 0;er.fetch=void 0;er.Request=void 0;er.Response=void 0;er.Headers=void 0;er.FormData=void 0;er.Blob=void 0;er.File=void 0;er.ReadableStream=void 0;er.getMultipartRequestOptions=void 0;er.getDefaultAgent=void 0;er.fileFromPath=void 0;er.isFsReadStream=void 0;function k2e(n,e={auto:!1}){if(er.auto)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(er.kind)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${er.kind}'\``);er.auto=e.auto,er.kind=n.kind,er.fetch=n.fetch,er.Request=n.Request,er.Response=n.Response,er.Headers=n.Headers,er.FormData=n.FormData,er.Blob=n.Blob,er.File=n.File,er.ReadableStream=n.ReadableStream,er.getMultipartRequestOptions=n.getMultipartRequestOptions,er.getDefaultAgent=n.getDefaultAgent,er.fileFromPath=n.fileFromPath,er.isFsReadStream=n.isFsReadStream}er.setShims=k2e});var YW=te((SLe,XW)=>{"use strict";var Ua={};XW.exports=Ua;function JW(n){return n<0?-1:1}function R2e(n){return n%1===.5&&(n&1)===0?Math.floor(n):Math.round(n)}function Xc(n,e){e.unsigned||--n;let r=e.unsigned?0:-Math.pow(2,n),a=Math.pow(2,n)-1,i=e.moduloBitLength?Math.pow(2,e.moduloBitLength):Math.pow(2,n),s=e.moduloBitLength?Math.pow(2,e.moduloBitLength-1):Math.pow(2,n-1);return function(t,o){o||(o={});let l=+t;if(o.enforceRange){if(!Number.isFinite(l))throw new TypeError("Argument is not a finite number");if(l=JW(l)*Math.floor(Math.abs(l)),l<r||l>a)throw new TypeError("Argument is not in byte range");return l}if(!isNaN(l)&&o.clamp)return l=R2e(l),l<r&&(l=r),l>a&&(l=a),l;if(!Number.isFinite(l)||l===0)return 0;if(l=JW(l)*Math.floor(Math.abs(l)),l=l%i,!e.unsigned&&l>=s)return l-i;if(e.unsigned){if(l<0)l+=i;else if(l===-0)return 0}return l}}Ua.void=function(){};Ua.boolean=function(n){return!!n};Ua.byte=Xc(8,{unsigned:!1});Ua.octet=Xc(8,{unsigned:!0});Ua.short=Xc(16,{unsigned:!1});Ua["unsigned short"]=Xc(16,{unsigned:!0});Ua.long=Xc(32,{unsigned:!1});Ua["unsigned long"]=Xc(32,{unsigned:!0});Ua["long long"]=Xc(32,{unsigned:!1,moduloBitLength:64});Ua["unsigned long long"]=Xc(32,{unsigned:!0,moduloBitLength:64});Ua.double=function(n){let e=+n;if(!Number.isFinite(e))throw new TypeError("Argument is not a finite floating-point value");return e};Ua["unrestricted double"]=function(n){let e=+n;if(isNaN(e))throw new TypeError("Argument is NaN");return e};Ua.float=Ua.double;Ua["unrestricted float"]=Ua["unrestricted double"];Ua.DOMString=function(n,e){return e||(e={}),e.treatNullAsEmptyString&&n===null?"":String(n)};Ua.ByteString=function(n,e){let r=String(n),a;for(let i=0;(a=r.codePointAt(i))!==void 0;++i)if(a>255)throw new TypeError("Argument is not a valid bytestring");return r};Ua.USVString=function(n){let e=String(n),r=e.length,a=[];for(let i=0;i<r;++i){let s=e.charCodeAt(i);if(s<55296||s>57343)a.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)a.push(String.fromCodePoint(65533));else if(i===r-1)a.push(String.fromCodePoint(65533));else{let t=e.charCodeAt(i+1);if(56320<=t&&t<=57343){let o=s&1023,l=t&1023;a.push(String.fromCodePoint(65536+1024*o+l)),++i}else a.push(String.fromCodePoint(65533))}}return a.join("")};Ua.Date=function(n,e){if(!(n instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(n))return n};Ua.RegExp=function(n,e){return n instanceof RegExp||(n=new RegExp(n)),n}});var QW=te((CLe,Yc)=>{"use strict";Yc.exports.mixin=function(e,r){let a=Object.getOwnPropertyNames(r);for(let i=0;i<a.length;++i)Object.defineProperty(e,a[i],Object.getOwnPropertyDescriptor(r,a[i]))};Yc.exports.wrapperSymbol=Symbol("wrapper");Yc.exports.implSymbol=Symbol("impl");Yc.exports.wrapperForImpl=function(n){return n[Yc.exports.wrapperSymbol]};Yc.exports.implForWrapper=function(n){return n[Yc.exports.implSymbol]}});var eG=te((ALe,I2e)=>{I2e.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var sG=te((ELe,C_)=>{"use strict";var rG=require("punycode"),tG=eG(),_h={TRANSITIONAL:0,NONTRANSITIONAL:1};function aG(n){return n.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function nG(n){for(var e=0,r=tG.length-1;e<=r;){var a=Math.floor((e+r)/2),i=tG[a];if(i[0][0]<=n&&i[0][1]>=n)return i;i[0][0]>n?r=a-1:e=a+1}return null}var D2e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function iG(n){return n.replace(D2e,"_").length}function N2e(n,e,r){for(var a=!1,i="",s=iG(n),t=0;t<s;++t){var o=n.codePointAt(t),l=nG(o);switch(l[1]){case"disallowed":a=!0,i+=String.fromCodePoint(o);break;case"ignored":break;case"mapped":i+=String.fromCodePoint.apply(String,l[2]);break;case"deviation":r===_h.TRANSITIONAL?i+=String.fromCodePoint.apply(String,l[2]):i+=String.fromCodePoint(o);break;case"valid":i+=String.fromCodePoint(o);break;case"disallowed_STD3_mapped":e?(a=!0,i+=String.fromCodePoint(o)):i+=String.fromCodePoint.apply(String,l[2]);break;case"disallowed_STD3_valid":e&&(a=!0),i+=String.fromCodePoint(o);break}}return{string:i,error:a}}var M2e=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function j2e(n,e){n.substr(0,4)==="xn--"&&(n=rG.toUnicode(n),e=_h.NONTRANSITIONAL);var r=!1;(aG(n)!==n||n[3]==="-"&&n[4]==="-"||n[0]==="-"||n[n.length-1]==="-"||n.indexOf(".")!==-1||n.search(M2e)===0)&&(r=!0);for(var a=iG(n),i=0;i<a;++i){var s=nG(n.codePointAt(i));if(S_===_h.TRANSITIONAL&&s[1]!=="valid"||S_===_h.NONTRANSITIONAL&&s[1]!=="valid"&&s[1]!=="deviation"){r=!0;break}}return{label:n,error:r}}function S_(n,e,r){var a=N2e(n,e,r);a.string=aG(a.string);for(var i=a.string.split("."),s=0;s<i.length;++s)try{var t=j2e(i[s]);i[s]=t.label,a.error=a.error||t.error}catch{a.error=!0}return{string:i.join("."),error:a.error}}C_.exports.toASCII=function(n,e,r,a){var i=S_(n,e,r),s=i.string.split(".");if(s=s.map(function(l){try{return rG.toASCII(l)}catch{return i.error=!0,l}}),a){var t=s.slice(0,s.length-1).join(".").length;(t.length>253||t.length===0)&&(i.error=!0);for(var o=0;o<s.length;++o)if(s.length>63||s.length===0){i.error=!0;break}}return i.error?null:s.join(".")};C_.exports.toUnicode=function(n,e){var r=S_(n,e,_h.NONTRANSITIONAL);return{domain:r.string,error:r.error}};C_.exports.PROCESSING_OPTIONS=_h});var ju=te((PLe,ns)=>{"use strict";var xh=require("punycode"),oG=sG(),dG={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Ur=Symbol("failure");function uG(n){return xh.ucs2.decode(n).length}function lG(n,e){let r=n[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function _g(n){return n>=48&&n<=57}function xg(n){return n>=65&&n<=90||n>=97&&n<=122}function B2e(n){return xg(n)||_g(n)}function ko(n){return _g(n)||n>=65&&n<=70||n>=97&&n<=102}function cG(n){return n==="."||n.toLowerCase()==="%2e"}function L2e(n){return n=n.toLowerCase(),n===".."||n==="%2e."||n===".%2e"||n==="%2e%2e"}function q2e(n,e){return xg(n)&&(e===58||e===124)}function pG(n){return n.length===2&&xg(n.codePointAt(0))&&(n[1]===":"||n[1]==="|")}function U2e(n){return n.length===2&&xg(n.codePointAt(0))&&n[1]===":"}function $2e(n){return n.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function V2e(n){return n.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function rO(n){return dG[n]!==void 0}function hn(n){return rO(n.scheme)}function z2e(n){return dG[n]}function fG(n){let e=n.toString(16).toUpperCase();return e.length===1&&(e="0"+e),"%"+e}function W2e(n){let e=new Buffer(n),r="";for(let a=0;a<e.length;++a)r+=fG(e[a]);return r}function G2e(n){let e=new Buffer(n),r=[];for(let a=0;a<e.length;++a)e[a]!==37?r.push(e[a]):e[a]===37&&ko(e[a+1])&&ko(e[a+2])?(r.push(parseInt(e.slice(a+1,a+3).toString(),16)),a+=2):r.push(e[a]);return new Buffer(r).toString()}function A_(n){return n<=31||n>126}var H2e=new Set([32,34,35,60,62,63,96,123,125]);function hG(n){return A_(n)||H2e.has(n)}var K2e=new Set([47,58,59,61,64,91,92,93,94,124]);function nO(n){return hG(n)||K2e.has(n)}function Qp(n,e){let r=String.fromCodePoint(n);return e(n)?W2e(r):r}function Z2e(n){let e=10;return n.length>=2&&n.charAt(0)==="0"&&n.charAt(1).toLowerCase()==="x"?(n=n.substring(2),e=16):n.length>=2&&n.charAt(0)==="0"&&(n=n.substring(1),e=8),n===""?0:(e===10?/[^0-9]/:e===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(n)?Ur:parseInt(n,e)}function J2e(n){let e=n.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return n;let r=[];for(let s of e){if(s==="")return n;let t=Z2e(s);if(t===Ur)return n;r.push(t)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return Ur;if(r[r.length-1]>=Math.pow(256,5-r.length))return Ur;let a=r.pop(),i=0;for(let s of r)a+=s*Math.pow(256,3-i),++i;return a}function X2e(n){let e="",r=n;for(let a=1;a<=4;++a)e=String(r%256)+e,a!==4&&(e="."+e),r=Math.floor(r/256);return e}function Y2e(n){let e=[0,0,0,0,0,0,0,0],r=0,a=null,i=0;if(n=xh.ucs2.decode(n),n[i]===58){if(n[i+1]!==58)return Ur;i+=2,++r,a=r}for(;i<n.length;){if(r===8)return Ur;if(n[i]===58){if(a!==null)return Ur;++i,++r,a=r;continue}let s=0,t=0;for(;t<4&&ko(n[i]);)s=s*16+parseInt(lG(n,i),16),++i,++t;if(n[i]===46){if(t===0||(i-=t,r>6))return Ur;let o=0;for(;n[i]!==void 0;){let l=null;if(o>0)if(n[i]===46&&o<4)++i;else return Ur;if(!_g(n[i]))return Ur;for(;_g(n[i]);){let d=parseInt(lG(n,i));if(l===null)l=d;else{if(l===0)return Ur;l=l*10+d}if(l>255)return Ur;++i}e[r]=e[r]*256+l,++o,(o===2||o===4)&&++r}if(o!==4)return Ur;break}else if(n[i]===58){if(++i,n[i]===void 0)return Ur}else if(n[i]!==void 0)return Ur;e[r]=s,++r}if(a!==null){let s=r-a;for(r=7;r!==0&&s>0;){let t=e[a+s-1];e[a+s-1]=e[r],e[r]=t,--r,--s}}else if(a===null&&r!==8)return Ur;return e}function Q2e(n){let e="",a=tve(n).idx,i=!1;for(let s=0;s<=7;++s)if(!(i&&n[s]===0)){if(i&&(i=!1),a===s){e+=s===0?"::":":",i=!0;continue}e+=n[s].toString(16),s!==7&&(e+=":")}return e}function aO(n,e){if(n[0]==="[")return n[n.length-1]!=="]"?Ur:Y2e(n.substring(1,n.length-1));if(!e)return eve(n);let r=G2e(n),a=oG.toASCII(r,!1,oG.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(a===null||$2e(a))return Ur;let i=J2e(a);return typeof i=="number"||i===Ur?i:a}function eve(n){if(V2e(n))return Ur;let e="",r=xh.ucs2.decode(n);for(let a=0;a<r.length;++a)e+=Qp(r[a],A_);return e}function tve(n){let e=null,r=1,a=null,i=0;for(let s=0;s<n.length;++s)n[s]!==0?(i>r&&(e=a,r=i),a=null,i=0):(a===null&&(a=s),++i);return i>r&&(e=a,r=i),{idx:e,len:r}}function iO(n){return typeof n=="number"?X2e(n):n instanceof Array?"["+Q2e(n)+"]":n}function rve(n){return n.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function ave(n){return n.replace(/\u0009|\u000A|\u000D/g,"")}function mG(n){let e=n.path;e.length!==0&&(n.scheme==="file"&&e.length===1&&ive(e[0])||e.pop())}function gG(n){return n.username!==""||n.password!==""}function nve(n){return n.host===null||n.host===""||n.cannotBeABaseURL||n.scheme==="file"}function ive(n){return/^[A-Za-z]:$/.test(n)}function $a(n,e,r,a,i){if(this.pointer=0,this.input=n,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=a,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let t=rve(this.input);t!==this.input&&(this.parseError=!0),this.input=t}let s=ave(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=xh.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let t=this.input[this.pointer],o=isNaN(t)?void 0:String.fromCodePoint(t),l=this["parse "+this.state](t,o);if(l){if(l===Ur){this.failure=!0;break}}else break}}$a.prototype["parse scheme start"]=function(e,r){if(xg(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Ur;return!0};$a.prototype["parse scheme"]=function(e,r){if(B2e(e)||e===43||e===45||e===46)this.buffer+=r.toLowerCase();else if(e===58){if(this.stateOverride&&(hn(this.url)&&!rO(this.buffer)||!hn(this.url)&&rO(this.buffer)||(gG(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):hn(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":hn(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Ur;return!0};$a.prototype["parse no scheme"]=function(e){return this.base===null||this.base.cannotBeABaseURL&&e!==35?Ur:(this.base.cannotBeABaseURL&&e===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};$a.prototype["parse special relative or authority"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};$a.prototype["parse path or authority"]=function(e){return e===47?this.state="authority":(this.state="path",--this.pointer),!0};$a.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===47?this.state="relative slash":e===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):hn(this.url)&&e===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};$a.prototype["parse relative slash"]=function(e){return hn(this.url)&&(e===47||e===92)?(e===92&&(this.parseError=!0),this.state="special authority ignore slashes"):e===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};$a.prototype["parse special authority slashes"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};$a.prototype["parse special authority ignore slashes"]=function(e){return e!==47&&e!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};$a.prototype["parse authority"]=function(e,r){if(e===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let a=uG(this.buffer);for(let i=0;i<a;++i){let s=this.buffer.codePointAt(i);if(s===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let t=Qp(s,nO);this.passwordTokenSeenFlag?this.url.password+=t:this.url.username+=t}this.buffer=""}else if(isNaN(e)||e===47||e===63||e===35||hn(this.url)&&e===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Ur;this.pointer-=uG(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};$a.prototype["parse hostname"]=$a.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Ur;let a=aO(this.buffer,hn(this.url));if(a===Ur)return Ur;if(this.url.host=a,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(e)||e===47||e===63||e===35||hn(this.url)&&e===92){if(--this.pointer,hn(this.url)&&this.buffer==="")return this.parseError=!0,Ur;if(this.stateOverride&&this.buffer===""&&(gG(this.url)||this.url.port!==null))return this.parseError=!0,!1;let a=aO(this.buffer,hn(this.url));if(a===Ur)return Ur;if(this.url.host=a,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===91?this.arrFlag=!0:e===93&&(this.arrFlag=!1),this.buffer+=r;return!0};$a.prototype["parse port"]=function(e,r){if(_g(e))this.buffer+=r;else if(isNaN(e)||e===47||e===63||e===35||hn(this.url)&&e===92||this.stateOverride){if(this.buffer!==""){let a=parseInt(this.buffer);if(a>Math.pow(2,16)-1)return this.parseError=!0,Ur;this.url.port=a===z2e(this.url.scheme)?null:a,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Ur;return!0};var sve=new Set([47,92,63,35]);$a.prototype["parse file"]=function(e){return this.url.scheme="file",e===47||e===92?(e===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!q2e(e,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!sve.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),mG(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};$a.prototype["parse file slash"]=function(e){return e===47||e===92?(e===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(U2e(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};$a.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===47||e===92||e===63||e===35)if(--this.pointer,!this.stateOverride&&pG(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let a=aO(this.buffer,hn(this.url));if(a===Ur)return Ur;if(a==="localhost"&&(a=""),this.url.host=a,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};$a.prototype["parse path start"]=function(e){return hn(this.url)?(e===92&&(this.parseError=!0),this.state="path",e!==47&&e!==92&&--this.pointer):!this.stateOverride&&e===63?(this.url.query="",this.state="query"):!this.stateOverride&&e===35?(this.url.fragment="",this.state="fragment"):e!==void 0&&(this.state="path",e!==47&&--this.pointer),!0};$a.prototype["parse path"]=function(e){if(isNaN(e)||e===47||hn(this.url)&&e===92||!this.stateOverride&&(e===63||e===35)){if(hn(this.url)&&e===92&&(this.parseError=!0),L2e(this.buffer)?(mG(this.url),e!==47&&!(hn(this.url)&&e===92)&&this.url.path.push("")):cG(this.buffer)&&e!==47&&!(hn(this.url)&&e===92)?this.url.path.push(""):cG(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&pG(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(e===void 0||e===63||e===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();e===63&&(this.url.query="",this.state="query"),e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!ko(this.input[this.pointer+1])||!ko(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=Qp(e,hG);return!0};$a.prototype["parse cannot-be-a-base-URL path"]=function(e){return e===63?(this.url.query="",this.state="query"):e===35?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==37&&(this.parseError=!0),e===37&&(!ko(this.input[this.pointer+1])||!ko(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+Qp(e,A_))),!0};$a.prototype["parse query"]=function(e,r){if(isNaN(e)||!this.stateOverride&&e===35){(!hn(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let a=new Buffer(this.buffer);for(let i=0;i<a.length;++i)a[i]<33||a[i]>126||a[i]===34||a[i]===35||a[i]===60||a[i]===62?this.url.query+=fG(a[i]):this.url.query+=String.fromCodePoint(a[i]);this.buffer="",e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!ko(this.input[this.pointer+1])||!ko(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r;return!0};$a.prototype["parse fragment"]=function(e){return isNaN(e)||(e===0?this.parseError=!0:(e===37&&(!ko(this.input[this.pointer+1])||!ko(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=Qp(e,A_))),!0};function ove(n,e){let r=n.scheme+":";if(n.host!==null?(r+="//",(n.username!==""||n.password!=="")&&(r+=n.username,n.password!==""&&(r+=":"+n.password),r+="@"),r+=iO(n.host),n.port!==null&&(r+=":"+n.port)):n.host===null&&n.scheme==="file"&&(r+="//"),n.cannotBeABaseURL)r+=n.path[0];else for(let a of n.path)r+="/"+a;return n.query!==null&&(r+="?"+n.query),!e&&n.fragment!==null&&(r+="#"+n.fragment),r}function uve(n){let e=n.scheme+"://";return e+=iO(n.host),n.port!==null&&(e+=":"+n.port),e}ns.exports.serializeURL=ove;ns.exports.serializeURLOrigin=function(n){switch(n.scheme){case"blob":try{return ns.exports.serializeURLOrigin(ns.exports.parseURL(n.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return uve({scheme:n.scheme,host:n.host,port:n.port});case"file":return"file://";default:return"null"}};ns.exports.basicURLParse=function(n,e){e===void 0&&(e={});let r=new $a(n,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?"failure":r.url};ns.exports.setTheUsername=function(n,e){n.username="";let r=xh.ucs2.decode(e);for(let a=0;a<r.length;++a)n.username+=Qp(r[a],nO)};ns.exports.setThePassword=function(n,e){n.password="";let r=xh.ucs2.decode(e);for(let a=0;a<r.length;++a)n.password+=Qp(r[a],nO)};ns.exports.serializeHost=iO;ns.exports.cannotHaveAUsernamePasswordPort=nve;ns.exports.serializeInteger=function(n){return String(n)};ns.exports.parseURL=function(n,e){return e===void 0&&(e={}),ns.exports.basicURLParse(n,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var vG=te(bG=>{"use strict";var Va=ju();bG.implementation=class{constructor(e){let r=e[0],a=e[1],i=null;if(a!==void 0&&(i=Va.basicURLParse(a),i==="failure"))throw new TypeError("Invalid base URL");let s=Va.basicURLParse(r,{baseURL:i});if(s==="failure")throw new TypeError("Invalid URL");this._url=s}get href(){return Va.serializeURL(this._url)}set href(e){let r=Va.basicURLParse(e);if(r==="failure")throw new TypeError("Invalid URL");this._url=r}get origin(){return Va.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){Va.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){Va.cannotHaveAUsernamePasswordPort(this._url)||Va.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){Va.cannotHaveAUsernamePasswordPort(this._url)||Va.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?Va.serializeHost(e.host):Va.serializeHost(e.host)+":"+Va.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||Va.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":Va.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||Va.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":Va.serializeInteger(this._url.port)}set port(e){Va.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:Va.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],Va.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(e){let r=this._url;if(e===""){r.query=null;return}let a=e[0]==="?"?e.substring(1):e;r.query="",Va.basicURLParse(a,{url:r,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",Va.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var xG=te((FLe,wg)=>{"use strict";var Gs=YW(),_G=QW(),yG=vG(),ya=_G.implSymbol;function xn(n){if(!this||this[ya]||!(this instanceof xn))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let e=[];for(let r=0;r<arguments.length&&r<2;++r)e[r]=arguments[r];e[0]=Gs.USVString(e[0]),e[1]!==void 0&&(e[1]=Gs.USVString(e[1])),wg.exports.setup(this,e)}xn.prototype.toJSON=function(){if(!this||!wg.exports.is(this))throw new TypeError("Illegal invocation");let e=[];for(let r=0;r<arguments.length&&r<0;++r)e[r]=arguments[r];return this[ya].toJSON.apply(this[ya],e)};Object.defineProperty(xn.prototype,"href",{get(){return this[ya].href},set(n){n=Gs.USVString(n),this[ya].href=n},enumerable:!0,configurable:!0});xn.prototype.toString=function(){if(!this||!wg.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(xn.prototype,"origin",{get(){return this[ya].origin},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"protocol",{get(){return this[ya].protocol},set(n){n=Gs.USVString(n),this[ya].protocol=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"username",{get(){return this[ya].username},set(n){n=Gs.USVString(n),this[ya].username=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"password",{get(){return this[ya].password},set(n){n=Gs.USVString(n),this[ya].password=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"host",{get(){return this[ya].host},set(n){n=Gs.USVString(n),this[ya].host=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"hostname",{get(){return this[ya].hostname},set(n){n=Gs.USVString(n),this[ya].hostname=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"port",{get(){return this[ya].port},set(n){n=Gs.USVString(n),this[ya].port=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"pathname",{get(){return this[ya].pathname},set(n){n=Gs.USVString(n),this[ya].pathname=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"search",{get(){return this[ya].search},set(n){n=Gs.USVString(n),this[ya].search=n},enumerable:!0,configurable:!0});Object.defineProperty(xn.prototype,"hash",{get(){return this[ya].hash},set(n){n=Gs.USVString(n),this[ya].hash=n},enumerable:!0,configurable:!0});wg.exports={is(n){return!!n&&n[ya]instanceof yG.implementation},create(n,e){let r=Object.create(xn.prototype);return this.setup(r,n,e),r},setup(n,e,r){r||(r={}),r.wrapper=n,n[ya]=new yG.implementation(e,r),n[ya][_G.wrapperSymbol]=n},interface:xn,expose:{Window:{URL:xn},Worker:{URL:xn}}}});var wG=te(Bu=>{"use strict";Bu.URL=xG().interface;Bu.serializeURL=ju().serializeURL;Bu.serializeURLOrigin=ju().serializeURLOrigin;Bu.basicURLParse=ju().basicURLParse;Bu.setTheUsername=ju().setTheUsername;Bu.setThePassword=ju().setThePassword;Bu.serializeHost=ju().serializeHost;Bu.serializeInteger=ju().serializeInteger;Bu.parseURL=ju().parseURL});var mO=te((Io,IG)=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});function Ah(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var Ro=Ah(require("stream")),EG=Ah(require("http")),P_=Ah(require("url")),PG=Ah(wG()),lve=Ah(require("https")),ef=Ah(require("zlib")),cve=Ro.Readable,Ul=Symbol("buffer"),sO=Symbol("type"),Cg=class n{constructor(){this[sO]="";let e=arguments[0],r=arguments[1],a=[],i=0;if(e){let t=e,o=Number(t.length);for(let l=0;l<o;l++){let d=t[l],c;d instanceof Buffer?c=d:ArrayBuffer.isView(d)?c=Buffer.from(d.buffer,d.byteOffset,d.byteLength):d instanceof ArrayBuffer?c=Buffer.from(d):d instanceof n?c=d[Ul]:c=Buffer.from(typeof d=="string"?d:String(d)),i+=c.length,a.push(c)}}this[Ul]=Buffer.concat(a);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[sO]=s)}get size(){return this[Ul].length}get type(){return this[sO]}text(){return Promise.resolve(this[Ul].toString())}arrayBuffer(){let e=this[Ul],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){let e=new cve;return e._read=function(){},e.push(this[Ul]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,r=arguments[0],a=arguments[1],i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),a===void 0?s=e:a<0?s=Math.max(e+a,0):s=Math.min(a,e);let t=Math.max(s-i,0),l=this[Ul].slice(i,i+t),d=new n([],{type:arguments[2]});return d[Ul]=l,d}};Object.defineProperties(Cg.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(Cg.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function jn(n,e,r){Error.call(this,n),this.message=n,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}jn.prototype=Object.create(Error.prototype);jn.prototype.constructor=jn;jn.prototype.name="FetchError";var cO;try{cO=require("encoding").convert}catch{}var Vl=Symbol("Body internals"),SG=Ro.PassThrough;function wn(n){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.size;let i=a===void 0?0:a;var s=r.timeout;let t=s===void 0?0:s;n==null?n=null:TG(n)?n=Buffer.from(n.toString()):Eg(n)||Buffer.isBuffer(n)||(Object.prototype.toString.call(n)==="[object ArrayBuffer]"?n=Buffer.from(n):ArrayBuffer.isView(n)?n=Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof Ro||(n=Buffer.from(String(n)))),this[Vl]={body:n,disturbed:!1,error:null},this.size=i,this.timeout=t,n instanceof Ro&&n.on("error",function(o){let l=o.name==="AbortError"?o:new jn(`Invalid response body while trying to fetch ${e.url}: ${o.message}`,"system",o);e[Vl].error=l})}wn.prototype={get body(){return this[Vl].body},get bodyUsed(){return this[Vl].disturbed},arrayBuffer(){return wh.call(this).then(function(n){return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)})},blob(){let n=this.headers&&this.headers.get("content-type")||"";return wh.call(this).then(function(e){return Object.assign(new Cg([],{type:n.toLowerCase()}),{[Ul]:e})})},json(){var n=this;return wh.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return wn.Promise.reject(new jn(`invalid json response body at ${n.url} reason: ${r.message}`,"invalid-json"))}})},text(){return wh.call(this).then(function(n){return n.toString()})},buffer(){return wh.call(this)},textConverted(){var n=this;return wh.call(this).then(function(e){return dve(e,n.headers)})}};Object.defineProperties(wn.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});wn.mixIn=function(n){for(let e of Object.getOwnPropertyNames(wn.prototype))if(!(e in n)){let r=Object.getOwnPropertyDescriptor(wn.prototype,e);Object.defineProperty(n,e,r)}};function wh(){var n=this;if(this[Vl].disturbed)return wn.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Vl].disturbed=!0,this[Vl].error)return wn.Promise.reject(this[Vl].error);let e=this.body;if(e===null)return wn.Promise.resolve(Buffer.alloc(0));if(Eg(e)&&(e=e.stream()),Buffer.isBuffer(e))return wn.Promise.resolve(e);if(!(e instanceof Ro))return wn.Promise.resolve(Buffer.alloc(0));let r=[],a=0,i=!1;return new wn.Promise(function(s,t){let o;n.timeout&&(o=setTimeout(function(){i=!0,t(new jn(`Response timeout while trying to fetch ${n.url} (over ${n.timeout}ms)`,"body-timeout"))},n.timeout)),e.on("error",function(l){l.name==="AbortError"?(i=!0,t(l)):t(new jn(`Invalid response body while trying to fetch ${n.url}: ${l.message}`,"system",l))}),e.on("data",function(l){if(!(i||l===null)){if(n.size&&a+l.length>n.size){i=!0,t(new jn(`content size at ${n.url} over limit: ${n.size}`,"max-size"));return}a+=l.length,r.push(l)}}),e.on("end",function(){if(!i){clearTimeout(o);try{s(Buffer.concat(r,a))}catch(l){t(new jn(`Could not create Buffer from response body for ${n.url}: ${l.message}`,"system",l))}}})})}function dve(n,e){if(typeof cO!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let r=e.get("content-type"),a="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=n.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(a=i.pop(),(a==="gb2312"||a==="gbk")&&(a="gb18030")),cO(n,"UTF-8",a).toString()}function TG(n){return typeof n!="object"||typeof n.append!="function"||typeof n.delete!="function"||typeof n.get!="function"||typeof n.getAll!="function"||typeof n.has!="function"||typeof n.set!="function"?!1:n.constructor.name==="URLSearchParams"||Object.prototype.toString.call(n)==="[object URLSearchParams]"||typeof n.sort=="function"}function Eg(n){return typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&typeof n.constructor.name=="string"&&/^(Blob|File)$/.test(n.constructor.name)&&/^(Blob|File)$/.test(n[Symbol.toStringTag])}function OG(n){let e,r,a=n.body;if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof Ro&&typeof a.getBoundary!="function"&&(e=new SG,r=new SG,a.pipe(e),a.pipe(r),n[Vl].body=e,a=r),a}function FG(n){return n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":TG(n)?"application/x-www-form-urlencoded;charset=UTF-8":Eg(n)?n.type||null:Buffer.isBuffer(n)||Object.prototype.toString.call(n)==="[object ArrayBuffer]"||ArrayBuffer.isView(n)?null:typeof n.getBoundary=="function"?`multipart/form-data;boundary=${n.getBoundary()}`:n instanceof Ro?null:"text/plain;charset=UTF-8"}function kG(n){let e=n.body;return e===null?0:Eg(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function pve(n,e){let r=e.body;r===null?n.end():Eg(r)?r.stream().pipe(n):Buffer.isBuffer(r)?(n.write(r),n.end()):r.pipe(n)}wn.Promise=global.Promise;var RG=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,dO=/[^\t\x20-\x7e\x80-\xff]/;function Sg(n){if(n=`${n}`,RG.test(n)||n==="")throw new TypeError(`${n} is not a legal HTTP header name`)}function CG(n){if(n=`${n}`,dO.test(n))throw new TypeError(`${n} is not a legal HTTP header value`)}function Sh(n,e){e=e.toLowerCase();for(let r in n)if(r.toLowerCase()===e)return r}var Za=Symbol("map"),Ks=class n{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Za]=Object.create(null),e instanceof n){let r=e.raw(),a=Object.keys(r);for(let i of a)for(let s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){let r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");let a=[];for(let i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");a.push(Array.from(i))}for(let i of a){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(let a of Object.keys(e)){let i=e[a];this.append(a,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,Sg(e);let r=Sh(this[Za],e);return r===void 0?null:this[Za][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,a=pO(this),i=0;for(;i<a.length;){var s=a[i];let t=s[0],o=s[1];e.call(r,o,t,this),a=pO(this),i++}}set(e,r){e=`${e}`,r=`${r}`,Sg(e),CG(r);let a=Sh(this[Za],e);this[Za][a!==void 0?a:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,Sg(e),CG(r);let a=Sh(this[Za],e);a!==void 0?this[Za][a].push(r):this[Za][e]=[r]}has(e){return e=`${e}`,Sg(e),Sh(this[Za],e)!==void 0}delete(e){e=`${e}`,Sg(e);let r=Sh(this[Za],e);r!==void 0&&delete this[Za][r]}raw(){return this[Za]}keys(){return oO(this,"key")}values(){return oO(this,"value")}[Symbol.iterator](){return oO(this,"key+value")}};Ks.prototype.entries=Ks.prototype[Symbol.iterator];Object.defineProperty(Ks.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Ks.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function pO(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(n[Za]).sort().map(e==="key"?function(a){return a.toLowerCase()}:e==="value"?function(a){return n[Za][a].join(", ")}:function(a){return[a.toLowerCase(),n[Za][a].join(", ")]})}var fO=Symbol("internal");function oO(n,e){let r=Object.create(hO);return r[fO]={target:n,kind:e,index:0},r}var hO=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==hO)throw new TypeError("Value of `this` is not a HeadersIterator");var n=this[fO];let e=n.target,r=n.kind,a=n.index,i=pO(e,r),s=i.length;return a>=s?{value:void 0,done:!0}:(this[fO].index=a+1,{value:i[a],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(hO,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function fve(n){let e=Object.assign({__proto__:null},n[Za]),r=Sh(n[Za],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function hve(n){let e=new Ks;for(let r of Object.keys(n))if(!RG.test(r))if(Array.isArray(n[r]))for(let a of n[r])dO.test(a)||(e[Za][r]===void 0?e[Za][r]=[a]:e[Za][r].push(a));else dO.test(n[r])||(e[Za][r]=[n[r]]);return e}var Qc=Symbol("Response internals"),mve=EG.STATUS_CODES,Hs=class n{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wn.call(this,e,r);let a=r.status||200,i=new Ks(r.headers);if(e!=null&&!i.has("Content-Type")){let s=FG(e);s&&i.append("Content-Type",s)}this[Qc]={url:r.url,status:a,statusText:r.statusText||mve[a],headers:i,counter:r.counter}}get url(){return this[Qc].url||""}get status(){return this[Qc].status}get ok(){return this[Qc].status>=200&&this[Qc].status<300}get redirected(){return this[Qc].counter>0}get statusText(){return this[Qc].statusText}get headers(){return this[Qc].headers}clone(){return new n(OG(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};wn.mixIn(Hs.prototype);Object.defineProperties(Hs.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Hs.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var $l=Symbol("Request internals"),gve=P_.URL||PG.URL,bve=P_.parse,vve=P_.format;function uO(n){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(n)&&(n=new gve(n).toString()),bve(n)}var yve="destroy"in Ro.Readable.prototype;function E_(n){return typeof n=="object"&&typeof n[$l]=="object"}function _ve(n){let e=n&&typeof n=="object"&&Object.getPrototypeOf(n);return!!(e&&e.constructor.name==="AbortSignal")}var td=class n{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a;E_(e)?a=uO(e.url):(e&&e.href?a=uO(e.href):a=uO(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||E_(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:E_(e)&&e.body!==null?OG(e):null;wn.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});let t=new Ks(r.headers||e.headers||{});if(s!=null&&!t.has("Content-Type")){let l=FG(s);l&&t.append("Content-Type",l)}let o=E_(e)?e.signal:null;if("signal"in r&&(o=r.signal),o!=null&&!_ve(o))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[$l]={method:i,redirect:r.redirect||e.redirect||"follow",headers:t,parsedURL:a,signal:o},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[$l].method}get url(){return vve(this[$l].parsedURL)}get headers(){return this[$l].headers}get redirect(){return this[$l].redirect}get signal(){return this[$l].signal}clone(){return new n(this)}};wn.mixIn(td.prototype);Object.defineProperty(td.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(td.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function xve(n){let e=n[$l].parsedURL,r=new Ks(n[$l].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(n.signal&&n.body instanceof Ro.Readable&&!yve)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let a=null;if(n.body==null&&/^(POST|PUT)$/i.test(n.method)&&(a="0"),n.body!=null){let s=kG(n);typeof s=="number"&&(a=String(s))}a&&r.set("Content-Length",a),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),n.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=n.agent;return typeof i=="function"&&(i=i(e)),Object.assign({},e,{method:n.method,headers:fve(r),agent:i})}function Ch(n){Error.call(this,n),this.type="aborted",this.message=n,Error.captureStackTrace(this,this.constructor)}Ch.prototype=Object.create(Error.prototype);Ch.prototype.constructor=Ch;Ch.prototype.name="AbortError";var Ag=P_.URL||PG.URL,AG=Ro.PassThrough,wve=function(e,r){let a=new Ag(r).hostname,i=new Ag(e).hostname;return a===i||a[a.length-i.length-1]==="."&&a.endsWith(i)},Sve=function(e,r){let a=new Ag(r).protocol,i=new Ag(e).protocol;return a===i};function ed(n,e){if(!ed.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return wn.Promise=ed.Promise,new ed.Promise(function(r,a){let i=new td(n,e),s=xve(i),t=(s.protocol==="https:"?lve:EG).request,o=i.signal,l=null,d=function(){let U=new Ch("The user aborted a request.");a(U),i.body&&i.body instanceof Ro.Readable&&lO(i.body,U),!(!l||!l.body)&&l.body.emit("error",U)};if(o&&o.aborted){d();return}let c=function(){d(),S()},y=t(s),u;o&&o.addEventListener("abort",c);function S(){y.abort(),o&&o.removeEventListener("abort",c),clearTimeout(u)}i.timeout&&y.once("socket",function(V){u=setTimeout(function(){a(new jn(`network timeout at: ${i.url}`,"request-timeout")),S()},i.timeout)}),y.on("error",function(V){a(new jn(`request to ${i.url} failed, reason: ${V.message}`,"system",V)),l&&l.body&&lO(l.body,V),S()}),Cve(y,function(V){o&&o.aborted||l&&l.body&&lO(l.body,V)}),parseInt(process.version.substring(1))<14&&y.on("socket",function(V){V.addListener("close",function(U){let z=V.listenerCount("data")>0;if(l&&z&&!U&&!(o&&o.aborted)){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",l.body.emit("error",D)}})}),y.on("response",function(V){clearTimeout(u);let U=hve(V.headers);if(ed.isRedirect(V.statusCode)){let R=U.get("Location"),g=null;try{g=R===null?null:new Ag(R,i.url).toString()}catch{if(i.redirect!=="manual"){a(new jn(`uri requested responds with an invalid redirect URL: ${R}`,"invalid-redirect")),S();return}}switch(i.redirect){case"error":a(new jn(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),S();return;case"manual":if(g!==null)try{U.set("Location",g)}catch(v){a(v)}break;case"follow":if(g===null)break;if(i.counter>=i.follow){a(new jn(`maximum redirect reached at: ${i.url}`,"max-redirect")),S();return}let m={headers:new Ks(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(!wve(i.url,g)||!Sve(i.url,g))for(let v of["authorization","www-authenticate","cookie","cookie2"])m.headers.delete(v);if(V.statusCode!==303&&i.body&&kG(i)===null){a(new jn("Cannot follow redirect with body being a readable stream","unsupported-redirect")),S();return}(V.statusCode===303||(V.statusCode===301||V.statusCode===302)&&i.method==="POST")&&(m.method="GET",m.body=void 0,m.headers.delete("content-length")),r(ed(new td(g,m))),S();return}}V.once("end",function(){o&&o.removeEventListener("abort",c)});let z=V.pipe(new AG),D={url:i.url,status:V.statusCode,statusText:V.statusMessage,headers:U,size:i.size,timeout:i.timeout,counter:i.counter},k=U.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||k===null||V.statusCode===204||V.statusCode===304){l=new Hs(z,D),r(l);return}let T={flush:ef.Z_SYNC_FLUSH,finishFlush:ef.Z_SYNC_FLUSH};if(k=="gzip"||k=="x-gzip"){z=z.pipe(ef.createGunzip(T)),l=new Hs(z,D),r(l);return}if(k=="deflate"||k=="x-deflate"){let R=V.pipe(new AG);R.once("data",function(g){(g[0]&15)===8?z=z.pipe(ef.createInflate()):z=z.pipe(ef.createInflateRaw()),l=new Hs(z,D),r(l)}),R.on("end",function(){l||(l=new Hs(z,D),r(l))});return}if(k=="br"&&typeof ef.createBrotliDecompress=="function"){z=z.pipe(ef.createBrotliDecompress()),l=new Hs(z,D),r(l);return}l=new Hs(z,D),r(l)}),pve(y,i)})}function Cve(n,e){let r;n.on("socket",function(a){r=a}),n.on("response",function(a){let i=a.headers;i["transfer-encoding"]==="chunked"&&!i["content-length"]&&a.once("close",function(s){if(r&&r.listenerCount("data")>0&&!s){let o=new Error("Premature close");o.code="ERR_STREAM_PREMATURE_CLOSE",e(o)}})})}function lO(n,e){n.destroy?n.destroy(e):(n.emit("error",e),n.end())}ed.isRedirect=function(n){return n===301||n===302||n===303||n===307||n===308};ed.Promise=global.Promise;IG.exports=Io=ed;Object.defineProperty(Io,"__esModule",{value:!0});Io.default=Io;Io.Headers=Ks;Io.Request=td;Io.Response=Hs;Io.FetchError=jn;Io.AbortError=Ch});var NG=te((T_,DG)=>{(function(n,e){typeof T_=="object"&&typeof DG<"u"?e(T_):typeof define=="function"&&define.amd?define(["exports"],e):e((n=typeof globalThis<"u"?globalThis:n||self).WebStreamsPolyfill={})})(T_,function(n){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:X=>`Symbol(${X})`;function r(){}function a(X){return typeof X=="object"&&X!==null||typeof X=="function"}let i=r;function s(X,ce){try{Object.defineProperty(X,"name",{value:ce,configurable:!0})}catch{}}let t=Promise,o=Promise.prototype.then,l=Promise.resolve.bind(t),d=Promise.reject.bind(t);function c(X){return new t(X)}function y(X){return l(X)}function u(X){return d(X)}function S(X,ce,be){return o.call(X,ce,be)}function V(X,ce,be){S(S(X,ce,be),void 0,i)}function U(X,ce){V(X,ce)}function z(X,ce){V(X,void 0,ce)}function D(X,ce,be){return S(X,ce,be)}function k(X){S(X,void 0,i)}let T=X=>{if(typeof queueMicrotask=="function")T=queueMicrotask;else{let ce=y(void 0);T=be=>S(ce,be)}return T(X)};function R(X,ce,be){if(typeof X!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(X,ce,be)}function g(X,ce,be){try{return y(R(X,ce,be))}catch(Te){return u(Te)}}class m{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(ce){let be=this._back,Te=be;be._elements.length===16383&&(Te={_elements:[],_next:void 0}),be._elements.push(ce),Te!==be&&(this._back=Te,be._next=Te),++this._size}shift(){let ce=this._front,be=ce,Te=this._cursor,qe=Te+1,Ue=ce._elements,Qe=Ue[Te];return qe===16384&&(be=ce._next,qe=0),--this._size,this._cursor=qe,ce!==be&&(this._front=be),Ue[Te]=void 0,Qe}forEach(ce){let be=this._cursor,Te=this._front,qe=Te._elements;for(;!(be===qe.length&&Te._next===void 0||be===qe.length&&(Te=Te._next,qe=Te._elements,be=0,qe.length===0));)ce(qe[be]),++be}peek(){let ce=this._front,be=this._cursor;return ce._elements[be]}}let v=e("[[AbortSteps]]"),b=e("[[ErrorSteps]]"),f=e("[[CancelSteps]]"),p=e("[[PullSteps]]"),h=e("[[ReleaseSteps]]");function _(X,ce){X._ownerReadableStream=ce,ce._reader=X,ce._state==="readable"?B(X):ce._state==="closed"?function(be){B(be),P(be)}(X):N(X,ce._storedError)}function I(X,ce){return RI(X._ownerReadableStream,ce)}function W(X){let ce=X._ownerReadableStream;ce._state==="readable"?L(X,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(be,Te){N(be,Te)}(X,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),ce._readableStreamController[h](),ce._reader=void 0,X._ownerReadableStream=void 0}function q(X){return new TypeError("Cannot "+X+" a stream using a released reader")}function B(X){X._closedPromise=c((ce,be)=>{X._closedPromise_resolve=ce,X._closedPromise_reject=be})}function N(X,ce){B(X),L(X,ce)}function L(X,ce){X._closedPromise_reject!==void 0&&(k(X._closedPromise),X._closedPromise_reject(ce),X._closedPromise_resolve=void 0,X._closedPromise_reject=void 0)}function P(X){X._closedPromise_resolve!==void 0&&(X._closedPromise_resolve(void 0),X._closedPromise_resolve=void 0,X._closedPromise_reject=void 0)}let O=Number.isFinite||function(X){return typeof X=="number"&&isFinite(X)},E=Math.trunc||function(X){return X<0?Math.ceil(X):Math.floor(X)};function w(X,ce){if(X!==void 0&&typeof(be=X)!="object"&&typeof be!="function")throw new TypeError(`${ce} is not an object.`);var be}function A(X,ce){if(typeof X!="function")throw new TypeError(`${ce} is not a function.`)}function M(X,ce){if(!function(be){return typeof be=="object"&&be!==null||typeof be=="function"}(X))throw new TypeError(`${ce} is not an object.`)}function j(X,ce,be){if(X===void 0)throw new TypeError(`Parameter ${ce} is required in '${be}'.`)}function C(X,ce,be){if(X===void 0)throw new TypeError(`${ce} is required in '${be}'.`)}function x(X){return Number(X)}function F(X){return X===0?0:X}function $(X,ce){let be=Number.MAX_SAFE_INTEGER,Te=Number(X);if(Te=F(Te),!O(Te))throw new TypeError(`${ce} is not a finite number`);if(Te=function(qe){return F(E(qe))}(Te),Te<0||Te>be)throw new TypeError(`${ce} is outside the accepted range of 0 to ${be}, inclusive`);return O(Te)&&Te!==0?Te:0}function G(X){if(!a(X)||typeof X.getReader!="function")return!1;try{return typeof X.locked=="boolean"}catch{return!1}}function Z(X){if(!a(X)||typeof X.getWriter!="function")return!1;try{return typeof X.locked=="boolean"}catch{return!1}}function J(X,ce){if(!wd(X))throw new TypeError(`${ce} is not a ReadableStream.`)}function Y(X,ce){X._reader._readRequests.push(ce)}function ee(X,ce,be){let Te=X._reader._readRequests.shift();be?Te._closeSteps():Te._chunkSteps(ce)}function ae(X){return X._reader._readRequests.length}function pe(X){let ce=X._reader;return ce!==void 0&&!!ue(ce)}class se{constructor(ce){if(j(ce,1,"ReadableStreamDefaultReader"),J(ce,"First parameter"),Af(ce))throw new TypeError("This stream has already been locked for exclusive reading by another reader");_(this,ce),this._readRequests=new m}get closed(){return ue(this)?this._closedPromise:u(ie("closed"))}cancel(ce){return ue(this)?this._ownerReadableStream===void 0?u(q("cancel")):I(this,ce):u(ie("cancel"))}read(){if(!ue(this))return u(ie("read"));if(this._ownerReadableStream===void 0)return u(q("read from"));let ce,be,Te=c((qe,Ue)=>{ce=qe,be=Ue});return function(qe,Ue){let Qe=qe._ownerReadableStream;Qe._disturbed=!0,Qe._state==="closed"?Ue._closeSteps():Qe._state==="errored"?Ue._errorSteps(Qe._storedError):Qe._readableStreamController[p](Ue)}(this,{_chunkSteps:qe=>ce({value:qe,done:!1}),_closeSteps:()=>ce({value:void 0,done:!0}),_errorSteps:qe=>be(qe)}),Te}releaseLock(){if(!ue(this))throw ie("releaseLock");this._ownerReadableStream!==void 0&&function(ce){W(ce);let be=new TypeError("Reader was released");le(ce,be)}(this)}}function ue(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_readRequests")&&X instanceof se}function le(X,ce){let be=X._readRequests;X._readRequests=new m,be.forEach(Te=>{Te._errorSteps(ce)})}function ie(X){return new TypeError(`ReadableStreamDefaultReader.prototype.${X} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(se.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),s(se.prototype.cancel,"cancel"),s(se.prototype.read,"read"),s(se.prototype.releaseLock,"releaseLock"),typeof e.toStringTag=="symbol"&&Object.defineProperty(se.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});class de{constructor(ce,be){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=ce,this._preventCancel=be}next(){let ce=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?D(this._ongoingPromise,ce,ce):ce(),this._ongoingPromise}return(ce){let be=()=>this._returnSteps(ce);return this._ongoingPromise?D(this._ongoingPromise,be,be):be()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let ce=this._reader;return ce===void 0?u(q("iterate")):S(ce.read(),be=>{var Te;return this._ongoingPromise=void 0,be.done&&(this._isFinished=!0,(Te=this._reader)===null||Te===void 0||Te.releaseLock(),this._reader=void 0),be},be=>{var Te;throw this._ongoingPromise=void 0,this._isFinished=!0,(Te=this._reader)===null||Te===void 0||Te.releaseLock(),this._reader=void 0,be})}_returnSteps(ce){if(this._isFinished)return Promise.resolve({value:ce,done:!0});this._isFinished=!0;let be=this._reader;if(be===void 0)return u(q("finish iterating"));if(this._reader=void 0,!this._preventCancel){let Te=be.cancel(ce);return be.releaseLock(),D(Te,()=>({value:ce,done:!0}))}return be.releaseLock(),y({value:ce,done:!0})}}let fe={next(){return he(this)?this._asyncIteratorImpl.next():u(Se("next"))},return(X){return he(this)?this._asyncIteratorImpl.return(X):u(Se("return"))}};function he(X){if(!a(X)||!Object.prototype.hasOwnProperty.call(X,"_asyncIteratorImpl"))return!1;try{return X._asyncIteratorImpl instanceof de}catch{return!1}}function Se(X){return new TypeError(`ReadableStreamAsyncIterator.${X} can only be used on a ReadableSteamAsyncIterator`)}typeof e.asyncIterator=="symbol"&&Object.defineProperty(fe,e.asyncIterator,{value(){return this},writable:!0,configurable:!0});let Ce=Number.isNaN||function(X){return X!=X};function Ae(X,ce,be,Te,qe){new Uint8Array(X).set(new Uint8Array(be,Te,qe),ce)}function Ee(X){let ce=function(be,Te,qe){if(be.slice)return be.slice(Te,qe);let Ue=qe-Te,Qe=new ArrayBuffer(Ue);return Ae(Qe,0,be,Te,Ue),Qe}(X.buffer,X.byteOffset,X.byteOffset+X.byteLength);return new Uint8Array(ce)}function ke(X){let ce=X._queue.shift();return X._queueTotalSize-=ce.size,X._queueTotalSize<0&&(X._queueTotalSize=0),ce.value}function Fe(X,ce,be){if(typeof(Te=be)!="number"||Ce(Te)||Te<0||be===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var Te;X._queue.push({value:ce,size:be}),X._queueTotalSize+=be}function Pe(X){X._queue=new m,X._queueTotalSize=0}class Ie{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Ze(this))throw Je("view");return this._view}respond(ce){if(!Ze(this))throw Je("respond");if(j(ce,1,"respond"),ce=$(ce,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,function(be,Te){let qe=be._pendingPullIntos.peek();if(be._controlledReadableByteStream._state==="closed"){if(Te!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(Te===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(qe.bytesFilled+Te>qe.byteLength)throw new RangeError("bytesWritten out of range")}qe.buffer=qe.buffer,me(be,Te)}(this._associatedReadableByteStreamController,ce)}respondWithNewView(ce){if(!Ze(this))throw Je("respondWithNewView");if(j(ce,1,"respondWithNewView"),!ArrayBuffer.isView(ce))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");ce.buffer,function(be,Te){let qe=be._pendingPullIntos.peek();if(be._controlledReadableByteStream._state==="closed"){if(Te.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(Te.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(qe.byteOffset+qe.bytesFilled!==Te.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(qe.bufferByteLength!==Te.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(qe.bytesFilled+Te.byteLength>qe.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let Ue=Te.byteLength;qe.buffer=Te.buffer,me(be,Ue)}(this._associatedReadableByteStreamController,ce)}}Object.defineProperties(Ie.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),s(Ie.prototype.respond,"respond"),s(Ie.prototype.respondWithNewView,"respondWithNewView"),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ie.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class $e{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ke(this))throw Xe("byobRequest");return function(ce){if(ce._byobRequest===null&&ce._pendingPullIntos.length>0){let be=ce._pendingPullIntos.peek(),Te=new Uint8Array(be.buffer,be.byteOffset+be.bytesFilled,be.byteLength-be.bytesFilled),qe=Object.create(Ie.prototype);(function(Ue,Qe,it){Ue._associatedReadableByteStreamController=Qe,Ue._view=it})(qe,ce,Te),ce._byobRequest=qe}return ce._byobRequest}(this)}get desiredSize(){if(!Ke(this))throw Xe("desiredSize");return Ne(this)}close(){if(!Ke(this))throw Xe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let ce=this._controlledReadableByteStream._state;if(ce!=="readable")throw new TypeError(`The stream (in ${ce} state) is not in the readable state and cannot be closed`);(function(be){let Te=be._controlledReadableByteStream;if(!(be._closeRequested||Te._state!=="readable")){if(be._queueTotalSize>0)return void(be._closeRequested=!0);if(be._pendingPullIntos.length>0&&be._pendingPullIntos.peek().bytesFilled>0){let qe=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ge(be,qe),qe}_e(be),Cm(Te)}})(this)}enqueue(ce){if(!Ke(this))throw Xe("enqueue");if(j(ce,1,"enqueue"),!ArrayBuffer.isView(ce))throw new TypeError("chunk must be an array buffer view");if(ce.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(ce.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let be=this._controlledReadableByteStream._state;if(be!=="readable")throw new TypeError(`The stream (in ${be} state) is not in the readable state and cannot be enqueued to`);(function(Te,qe){let Ue=Te._controlledReadableByteStream;if(Te._closeRequested||Ue._state!=="readable")return;let Qe=qe.buffer,it=qe.byteOffset,vt=qe.byteLength,gt=Qe;if(Te._pendingPullIntos.length>0){let Nt=Te._pendingPullIntos.peek();Nt.buffer,K(Te),Nt.buffer=Nt.buffer,Nt.readerType==="none"&&wt(Te,Nt)}pe(Ue)?(function(Nt){let zt=Nt._controlledReadableByteStream._reader;for(;zt._readRequests.length>0;){if(Nt._queueTotalSize===0)return;ye(Nt,zt._readRequests.shift())}}(Te),ae(Ue)===0?Ge(Te,gt,it,vt):(Te._pendingPullIntos.length>0&&xe(Te),ee(Ue,new Uint8Array(gt,it,vt),!1))):Tt(Ue)?(Ge(Te,gt,it,vt),re(Te)):Ge(Te,gt,it,vt),ot(Te)})(this,ce)}error(ce){if(!Ke(this))throw Xe("error");ge(this,ce)}[f](ce){et(this),Pe(this);let be=this._cancelAlgorithm(ce);return _e(this),be}[p](ce){let be=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void ye(this,ce);let Te=this._autoAllocateChunkSize;if(Te!==void 0){let qe;try{qe=new ArrayBuffer(Te)}catch(Qe){return void ce._errorSteps(Qe)}let Ue={buffer:qe,bufferByteLength:Te,byteOffset:0,byteLength:Te,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Ue)}Y(be,ce),ot(this)}[h](){if(this._pendingPullIntos.length>0){let ce=this._pendingPullIntos.peek();ce.readerType="none",this._pendingPullIntos=new m,this._pendingPullIntos.push(ce)}}}function Ke(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_controlledReadableByteStream")&&X instanceof $e}function Ze(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_associatedReadableByteStreamController")&&X instanceof Ie}function ot(X){if(function(be){let Te=be._controlledReadableByteStream;return Te._state!=="readable"||be._closeRequested||!be._started?!1:!!(pe(Te)&&ae(Te)>0||Tt(Te)&&mt(Te)>0||Ne(be)>0)}(X)){if(X._pulling)return void(X._pullAgain=!0);X._pulling=!0,V(X._pullAlgorithm(),()=>(X._pulling=!1,X._pullAgain&&(X._pullAgain=!1,ot(X)),null),be=>(ge(X,be),null))}}function et(X){K(X),X._pendingPullIntos=new m}function ct(X,ce){let be=!1;X._state==="closed"&&(be=!0);let Te=ht(ce);ce.readerType==="default"?ee(X,Te,be):function(qe,Ue,Qe){let it=qe._reader._readIntoRequests.shift();Qe?it._closeSteps(Ue):it._chunkSteps(Ue)}(X,Te,be)}function ht(X){let ce=X.bytesFilled,be=X.elementSize;return new X.viewConstructor(X.buffer,X.byteOffset,ce/be)}function Ge(X,ce,be,Te){X._queue.push({buffer:ce,byteOffset:be,byteLength:Te}),X._queueTotalSize+=Te}function Be(X,ce,be,Te){let qe;try{qe=ce.slice(be,be+Te)}catch(Ue){throw ge(X,Ue),Ue}Ge(X,qe,0,Te)}function wt(X,ce){ce.bytesFilled>0&&Be(X,ce.buffer,ce.byteOffset,ce.bytesFilled),xe(X)}function At(X,ce){let be=ce.elementSize,Te=ce.bytesFilled-ce.bytesFilled%be,qe=Math.min(X._queueTotalSize,ce.byteLength-ce.bytesFilled),Ue=ce.bytesFilled+qe,Qe=Ue-Ue%be,it=qe,vt=!1;Qe>Te&&(it=Qe-ce.bytesFilled,vt=!0);let gt=X._queue;for(;it>0;){let Nt=gt.peek(),zt=Math.min(it,Nt.byteLength),St=ce.byteOffset+ce.bytesFilled;Ae(ce.buffer,St,Nt.buffer,Nt.byteOffset,zt),Nt.byteLength===zt?gt.shift():(Nt.byteOffset+=zt,Nt.byteLength-=zt),X._queueTotalSize-=zt,Q(X,zt,ce),it-=zt}return vt}function Q(X,ce,be){be.bytesFilled+=ce}function ve(X){X._queueTotalSize===0&&X._closeRequested?(_e(X),Cm(X._controlledReadableByteStream)):ot(X)}function K(X){X._byobRequest!==null&&(X._byobRequest._associatedReadableByteStreamController=void 0,X._byobRequest._view=null,X._byobRequest=null)}function re(X){for(;X._pendingPullIntos.length>0;){if(X._queueTotalSize===0)return;let ce=X._pendingPullIntos.peek();At(X,ce)&&(xe(X),ct(X._controlledReadableByteStream,ce))}}function me(X,ce){let be=X._pendingPullIntos.peek();K(X),X._controlledReadableByteStream._state==="closed"?function(Te,qe){qe.readerType==="none"&&xe(Te);let Ue=Te._controlledReadableByteStream;if(Tt(Ue))for(;mt(Ue)>0;)ct(Ue,xe(Te))}(X,be):function(Te,qe,Ue){if(Q(0,qe,Ue),Ue.readerType==="none")return wt(Te,Ue),void re(Te);if(Ue.bytesFilled<Ue.elementSize)return;xe(Te);let Qe=Ue.bytesFilled%Ue.elementSize;if(Qe>0){let it=Ue.byteOffset+Ue.bytesFilled;Be(Te,Ue.buffer,it-Qe,Qe)}Ue.bytesFilled-=Qe,ct(Te._controlledReadableByteStream,Ue),re(Te)}(X,ce,be),ot(X)}function xe(X){return X._pendingPullIntos.shift()}function _e(X){X._pullAlgorithm=void 0,X._cancelAlgorithm=void 0}function ge(X,ce){let be=X._controlledReadableByteStream;be._state==="readable"&&(et(X),Pe(X),_e(X),II(be,ce))}function ye(X,ce){let be=X._queue.shift();X._queueTotalSize-=be.byteLength,ve(X);let Te=new Uint8Array(be.buffer,be.byteOffset,be.byteLength);ce._chunkSteps(Te)}function Ne(X){let ce=X._controlledReadableByteStream._state;return ce==="errored"?null:ce==="closed"?0:X._strategyHWM-X._queueTotalSize}function Le(X,ce,be){let Te=Object.create($e.prototype),qe,Ue,Qe;qe=ce.start!==void 0?()=>ce.start(Te):()=>{},Ue=ce.pull!==void 0?()=>ce.pull(Te):()=>y(void 0),Qe=ce.cancel!==void 0?vt=>ce.cancel(vt):()=>y(void 0);let it=ce.autoAllocateChunkSize;if(it===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");(function(vt,gt,Nt,zt,St,Zt,cr){gt._controlledReadableByteStream=vt,gt._pullAgain=!1,gt._pulling=!1,gt._byobRequest=null,gt._queue=gt._queueTotalSize=void 0,Pe(gt),gt._closeRequested=!1,gt._started=!1,gt._strategyHWM=Zt,gt._pullAlgorithm=zt,gt._cancelAlgorithm=St,gt._autoAllocateChunkSize=cr,gt._pendingPullIntos=new m,vt._readableStreamController=gt,V(y(Nt()),()=>(gt._started=!0,ot(gt),null),oa=>(ge(gt,oa),null))})(X,Te,qe,Ue,Qe,be,it)}function Je(X){return new TypeError(`ReadableStreamBYOBRequest.prototype.${X} can only be used on a ReadableStreamBYOBRequest`)}function Xe(X){return new TypeError(`ReadableByteStreamController.prototype.${X} can only be used on a ReadableByteStreamController`)}function ut(X,ce){X._reader._readIntoRequests.push(ce)}function mt(X){return X._reader._readIntoRequests.length}function Tt(X){let ce=X._reader;return ce!==void 0&&!!yr(ce)}Object.defineProperties($e.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),s($e.prototype.close,"close"),s($e.prototype.enqueue,"enqueue"),s($e.prototype.error,"error"),typeof e.toStringTag=="symbol"&&Object.defineProperty($e.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Kt{constructor(ce){if(j(ce,1,"ReadableStreamBYOBReader"),J(ce,"First parameter"),Af(ce))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ke(ce._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");_(this,ce),this._readIntoRequests=new m}get closed(){return yr(this)?this._closedPromise:u(hr("closed"))}cancel(ce){return yr(this)?this._ownerReadableStream===void 0?u(q("cancel")):I(this,ce):u(hr("cancel"))}read(ce){if(!yr(this))return u(hr("read"));if(!ArrayBuffer.isView(ce))return u(new TypeError("view must be an array buffer view"));if(ce.byteLength===0)return u(new TypeError("view must have non-zero byteLength"));if(ce.buffer.byteLength===0)return u(new TypeError("view's buffer must have non-zero byteLength"));if(ce.buffer,this._ownerReadableStream===void 0)return u(q("read from"));let be,Te,qe=c((Ue,Qe)=>{be=Ue,Te=Qe});return function(Ue,Qe,it){let vt=Ue._ownerReadableStream;vt._disturbed=!0,vt._state==="errored"?it._errorSteps(vt._storedError):function(gt,Nt,zt){let St=gt._controlledReadableByteStream,Zt=1;Nt.constructor!==DataView&&(Zt=Nt.constructor.BYTES_PER_ELEMENT);let cr=Nt.constructor,oa=Nt.buffer,Qr={buffer:oa,bufferByteLength:oa.byteLength,byteOffset:Nt.byteOffset,byteLength:Nt.byteLength,bytesFilled:0,elementSize:Zt,viewConstructor:cr,readerType:"byob"};if(gt._pendingPullIntos.length>0)return gt._pendingPullIntos.push(Qr),void ut(St,zt);if(St._state!=="closed"){if(gt._queueTotalSize>0){if(At(gt,Qr)){let mr=ht(Qr);return ve(gt),void zt._chunkSteps(mr)}if(gt._closeRequested){let mr=new TypeError("Insufficient bytes to fill elements in the given buffer");return ge(gt,mr),void zt._errorSteps(mr)}}gt._pendingPullIntos.push(Qr),ut(St,zt),ot(gt)}else{let mr=new cr(Qr.buffer,Qr.byteOffset,0);zt._closeSteps(mr)}}(vt._readableStreamController,Qe,it)}(this,ce,{_chunkSteps:Ue=>be({value:Ue,done:!1}),_closeSteps:Ue=>be({value:Ue,done:!0}),_errorSteps:Ue=>Te(Ue)}),qe}releaseLock(){if(!yr(this))throw hr("releaseLock");this._ownerReadableStream!==void 0&&function(ce){W(ce);let be=new TypeError("Reader was released");dr(ce,be)}(this)}}function yr(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_readIntoRequests")&&X instanceof Kt}function dr(X,ce){let be=X._readIntoRequests;X._readIntoRequests=new m,be.forEach(Te=>{Te._errorSteps(ce)})}function hr(X){return new TypeError(`ReadableStreamBYOBReader.prototype.${X} can only be used on a ReadableStreamBYOBReader`)}function Mr(X,ce){let{highWaterMark:be}=X;if(be===void 0)return ce;if(Ce(be)||be<0)throw new RangeError("Invalid highWaterMark");return be}function ra(X){let{size:ce}=X;return ce||(()=>1)}function Kr(X,ce){w(X,ce);let be=X?.highWaterMark,Te=X?.size;return{highWaterMark:be===void 0?void 0:x(be),size:Te===void 0?void 0:Ye(Te,`${ce} has member 'size' that`)}}function Ye(X,ce){return A(X,ce),be=>x(X(be))}function De(X,ce,be){return A(X,be),Te=>g(X,ce,[Te])}function He(X,ce,be){return A(X,be),()=>g(X,ce,[])}function tt(X,ce,be){return A(X,be),Te=>R(X,ce,[Te])}function xt(X,ce,be){return A(X,be),(Te,qe)=>g(X,ce,[Te,qe])}Object.defineProperties(Kt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),s(Kt.prototype.cancel,"cancel"),s(Kt.prototype.read,"read"),s(Kt.prototype.releaseLock,"releaseLock"),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kt.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let lr=typeof AbortController=="function";class Rr{constructor(ce={},be={}){ce===void 0?ce=null:M(ce,"First parameter");let Te=Kr(be,"Second parameter"),qe=function(it,vt){w(it,vt);let gt=it?.abort,Nt=it?.close,zt=it?.start,St=it?.type,Zt=it?.write;return{abort:gt===void 0?void 0:De(gt,it,`${vt} has member 'abort' that`),close:Nt===void 0?void 0:He(Nt,it,`${vt} has member 'close' that`),start:zt===void 0?void 0:tt(zt,it,`${vt} has member 'start' that`),write:Zt===void 0?void 0:xt(Zt,it,`${vt} has member 'write' that`),type:St}}(ce,"First parameter");var Ue;if((Ue=this)._state="writable",Ue._storedError=void 0,Ue._writer=void 0,Ue._writableStreamController=void 0,Ue._writeRequests=new m,Ue._inFlightWriteRequest=void 0,Ue._closeRequest=void 0,Ue._inFlightCloseRequest=void 0,Ue._pendingAbortRequest=void 0,Ue._backpressure=!1,qe.type!==void 0)throw new RangeError("Invalid type is specified");let Qe=ra(Te);(function(it,vt,gt,Nt){let zt=Object.create(ze.prototype),St,Zt,cr,oa;St=vt.start!==void 0?()=>vt.start(zt):()=>{},Zt=vt.write!==void 0?Qr=>vt.write(Qr,zt):()=>y(void 0),cr=vt.close!==void 0?()=>vt.close():()=>y(void 0),oa=vt.abort!==void 0?Qr=>vt.abort(Qr):()=>y(void 0),function(Qr,mr,Pa,Qn,ga,En,gi,Uo){mr._controlledWritableStream=Qr,Qr._writableStreamController=mr,mr._queue=void 0,mr._queueTotalSize=void 0,Pe(mr),mr._abortReason=void 0,mr._abortController=function(){if(lr)return new AbortController}(),mr._started=!1,mr._strategySizeAlgorithm=Uo,mr._strategyHWM=gi,mr._writeAlgorithm=Qn,mr._closeAlgorithm=ga,mr._abortAlgorithm=En;let sr=qt(mr);ne(Qr,sr);let or=Pa();V(y(or),()=>(mr._started=!0,Dt(mr),null),Zr=>(mr._started=!0,fa(Qr,Zr),null))}(it,zt,St,Zt,cr,oa,gt,Nt)})(this,qe,Mr(Te,1),Qe)}get locked(){if(!rt(this))throw Ut("locked");return jr(this)}abort(ce){return rt(this)?jr(this)?u(new TypeError("Cannot abort a stream that already has a writer")):ja(this,ce):u(Ut("abort"))}close(){return rt(this)?jr(this)?u(new TypeError("Cannot close a stream that already has a writer")):st(this)?u(new TypeError("Cannot close an already-closing stream")):_a(this):u(Ut("close"))}getWriter(){if(!rt(this))throw Ut("getWriter");return new oe(this)}}function rt(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_writableStreamController")&&X instanceof Rr}function jr(X){return X._writer!==void 0}function ja(X,ce){var be;if(X._state==="closed"||X._state==="errored")return y(void 0);X._writableStreamController._abortReason=ce,(be=X._writableStreamController._abortController)===null||be===void 0||be.abort(ce);let Te=X._state;if(Te==="closed"||Te==="errored")return y(void 0);if(X._pendingAbortRequest!==void 0)return X._pendingAbortRequest._promise;let qe=!1;Te==="erroring"&&(qe=!0,ce=void 0);let Ue=c((Qe,it)=>{X._pendingAbortRequest={_promise:void 0,_resolve:Qe,_reject:it,_reason:ce,_wasAlreadyErroring:qe}});return X._pendingAbortRequest._promise=Ue,qe||Jt(X,ce),Ue}function _a(X){let ce=X._state;if(ce==="closed"||ce==="errored")return u(new TypeError(`The stream (in ${ce} state) is not in the writable state and cannot be closed`));let be=c((Ue,Qe)=>{let it={_resolve:Ue,_reject:Qe};X._closeRequest=it}),Te=X._writer;var qe;return Te!==void 0&&X._backpressure&&ce==="writable"&&Ca(Te),Fe(qe=X._writableStreamController,Oe,0),Dt(qe),be}function fa(X,ce){X._state!=="writable"?_t(X):Jt(X,ce)}function Jt(X,ce){let be=X._writableStreamController;X._state="erroring",X._storedError=ce;let Te=X._writer;Te!==void 0&&Re(Te,ce),!function(qe){return!(qe._inFlightWriteRequest===void 0&&qe._inFlightCloseRequest===void 0)}(X)&&be._started&&_t(X)}function _t(X){X._state="errored",X._writableStreamController[b]();let ce=X._storedError;if(X._writeRequests.forEach(Te=>{Te._reject(ce)}),X._writeRequests=new m,X._pendingAbortRequest===void 0)return void H(X);let be=X._pendingAbortRequest;if(X._pendingAbortRequest=void 0,be._wasAlreadyErroring)return be._reject(ce),void H(X);V(X._writableStreamController[v](be._reason),()=>(be._resolve(),H(X),null),Te=>(be._reject(Te),H(X),null))}function st(X){return X._closeRequest!==void 0||X._inFlightCloseRequest!==void 0}function H(X){X._closeRequest!==void 0&&(X._closeRequest._reject(X._storedError),X._closeRequest=void 0);let ce=X._writer;ce!==void 0&&ma(ce,X._storedError)}function ne(X,ce){let be=X._writer;be!==void 0&&ce!==X._backpressure&&(ce?function(Te){It(Te)}(be):Ca(be)),X._backpressure=ce}Object.defineProperties(Rr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),s(Rr.prototype.abort,"abort"),s(Rr.prototype.close,"close"),s(Rr.prototype.getWriter,"getWriter"),typeof e.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});class oe{constructor(ce){if(j(ce,1,"WritableStreamDefaultWriter"),function(qe,Ue){if(!rt(qe))throw new TypeError(`${Ue} is not a WritableStream.`)}(ce,"First parameter"),jr(ce))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=ce,ce._writer=this;let be=ce._state;if(be==="writable")!st(ce)&&ce._backpressure?It(this):ua(this),aa(this);else if(be==="erroring")Tr(this,ce._storedError),aa(this);else if(be==="closed")ua(this),aa(Te=this),on(Te);else{let qe=ce._storedError;Tr(this,qe),ir(this,qe)}var Te}get closed(){return we(this)?this._closedPromise:u(Br("closed"))}get desiredSize(){if(!we(this))throw Br("desiredSize");if(this._ownerWritableStream===void 0)throw Yt("desiredSize");return function(ce){let be=ce._ownerWritableStream,Te=be._state;return Te==="errored"||Te==="erroring"?null:Te==="closed"?0:dt(be._writableStreamController)}(this)}get ready(){return we(this)?this._readyPromise:u(Br("ready"))}abort(ce){return we(this)?this._ownerWritableStream===void 0?u(Yt("abort")):function(be,Te){return ja(be._ownerWritableStream,Te)}(this,ce):u(Br("abort"))}close(){if(!we(this))return u(Br("close"));let ce=this._ownerWritableStream;return ce===void 0?u(Yt("close")):st(ce)?u(new TypeError("Cannot close an already-closing stream")):_a(this._ownerWritableStream)}releaseLock(){if(!we(this))throw Br("releaseLock");this._ownerWritableStream!==void 0&&function(ce){let be=ce._ownerWritableStream,Te=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Re(ce,Te),function(qe,Ue){qe._closedPromiseState==="pending"?ma(qe,Ue):function(Qe,it){ir(Qe,it)}(qe,Ue)}(ce,Te),be._writer=void 0,ce._ownerWritableStream=void 0}(this)}write(ce){return we(this)?this._ownerWritableStream===void 0?u(Yt("write to")):function(be,Te){let qe=be._ownerWritableStream,Ue=qe._writableStreamController,Qe=function(gt,Nt){try{return gt._strategySizeAlgorithm(Nt)}catch(zt){return bt(gt,zt),1}}(Ue,Te);if(qe!==be._ownerWritableStream)return u(Yt("write to"));let it=qe._state;if(it==="errored")return u(qe._storedError);if(st(qe)||it==="closed")return u(new TypeError("The stream is closing or closed and cannot be written to"));if(it==="erroring")return u(qe._storedError);let vt=function(gt){return c((Nt,zt)=>{let St={_resolve:Nt,_reject:zt};gt._writeRequests.push(St)})}(qe);return function(gt,Nt,zt){try{Fe(gt,Nt,zt)}catch(Zt){return void bt(gt,Zt)}let St=gt._controlledWritableStream;!st(St)&&St._state==="writable"&&ne(St,qt(gt)),Dt(gt)}(Ue,Te,Qe),vt}(this,ce):u(Br("write"))}}function we(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_ownerWritableStream")&&X instanceof oe}function Re(X,ce){X._readyPromiseState==="pending"?xa(X,ce):function(be,Te){Tr(be,Te)}(X,ce)}Object.defineProperties(oe.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),s(oe.prototype.abort,"abort"),s(oe.prototype.close,"close"),s(oe.prototype.releaseLock,"releaseLock"),s(oe.prototype.write,"write"),typeof e.toStringTag=="symbol"&&Object.defineProperty(oe.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let Oe={};class ze{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!We(this))throw Vt("abortReason");return this._abortReason}get signal(){if(!We(this))throw Vt("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(ce){if(!We(this))throw Vt("error");this._controlledWritableStream._state==="writable"&&Pr(this,ce)}[v](ce){let be=this._abortAlgorithm(ce);return at(this),be}[b](){Pe(this)}}function We(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_controlledWritableStream")&&X instanceof ze}function at(X){X._writeAlgorithm=void 0,X._closeAlgorithm=void 0,X._abortAlgorithm=void 0,X._strategySizeAlgorithm=void 0}function dt(X){return X._strategyHWM-X._queueTotalSize}function Dt(X){let ce=X._controlledWritableStream;if(!X._started||ce._inFlightWriteRequest!==void 0)return;if(ce._state==="erroring")return void _t(ce);if(X._queue.length===0)return;let be=X._queue.peek().value;be===Oe?function(Te){let qe=Te._controlledWritableStream;(function(Qe){Qe._inFlightCloseRequest=Qe._closeRequest,Qe._closeRequest=void 0})(qe),ke(Te);let Ue=Te._closeAlgorithm();at(Te),V(Ue,()=>(function(Qe){Qe._inFlightCloseRequest._resolve(void 0),Qe._inFlightCloseRequest=void 0,Qe._state==="erroring"&&(Qe._storedError=void 0,Qe._pendingAbortRequest!==void 0&&(Qe._pendingAbortRequest._resolve(),Qe._pendingAbortRequest=void 0)),Qe._state="closed";let it=Qe._writer;it!==void 0&&on(it)}(qe),null),Qe=>(function(it,vt){it._inFlightCloseRequest._reject(vt),it._inFlightCloseRequest=void 0,it._pendingAbortRequest!==void 0&&(it._pendingAbortRequest._reject(vt),it._pendingAbortRequest=void 0),fa(it,vt)}(qe,Qe),null))}(X):function(Te,qe){let Ue=Te._controlledWritableStream;(function(Qe){Qe._inFlightWriteRequest=Qe._writeRequests.shift()})(Ue),V(Te._writeAlgorithm(qe),()=>{(function(it){it._inFlightWriteRequest._resolve(void 0),it._inFlightWriteRequest=void 0})(Ue);let Qe=Ue._state;if(ke(Te),!st(Ue)&&Qe==="writable"){let it=qt(Te);ne(Ue,it)}return Dt(Te),null},Qe=>(Ue._state==="writable"&&at(Te),function(it,vt){it._inFlightWriteRequest._reject(vt),it._inFlightWriteRequest=void 0,fa(it,vt)}(Ue,Qe),null))}(X,be)}function bt(X,ce){X._controlledWritableStream._state==="writable"&&Pr(X,ce)}function qt(X){return dt(X)<=0}function Pr(X,ce){let be=X._controlledWritableStream;at(X),Jt(be,ce)}function Ut(X){return new TypeError(`WritableStream.prototype.${X} can only be used on a WritableStream`)}function Vt(X){return new TypeError(`WritableStreamDefaultController.prototype.${X} can only be used on a WritableStreamDefaultController`)}function Br(X){return new TypeError(`WritableStreamDefaultWriter.prototype.${X} can only be used on a WritableStreamDefaultWriter`)}function Yt(X){return new TypeError("Cannot "+X+" a stream using a released writer")}function aa(X){X._closedPromise=c((ce,be)=>{X._closedPromise_resolve=ce,X._closedPromise_reject=be,X._closedPromiseState="pending"})}function ir(X,ce){aa(X),ma(X,ce)}function ma(X,ce){X._closedPromise_reject!==void 0&&(k(X._closedPromise),X._closedPromise_reject(ce),X._closedPromise_resolve=void 0,X._closedPromise_reject=void 0,X._closedPromiseState="rejected")}function on(X){X._closedPromise_resolve!==void 0&&(X._closedPromise_resolve(void 0),X._closedPromise_resolve=void 0,X._closedPromise_reject=void 0,X._closedPromiseState="resolved")}function It(X){X._readyPromise=c((ce,be)=>{X._readyPromise_resolve=ce,X._readyPromise_reject=be}),X._readyPromiseState="pending"}function Tr(X,ce){It(X),xa(X,ce)}function ua(X){It(X),Ca(X)}function xa(X,ce){X._readyPromise_reject!==void 0&&(k(X._readyPromise),X._readyPromise_reject(ce),X._readyPromise_resolve=void 0,X._readyPromise_reject=void 0,X._readyPromiseState="rejected")}function Ca(X){X._readyPromise_resolve!==void 0&&(X._readyPromise_resolve(void 0),X._readyPromise_resolve=void 0,X._readyPromise_reject=void 0,X._readyPromiseState="fulfilled")}Object.defineProperties(ze.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(ze.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});let ps=typeof DOMException<"u"?DOMException:void 0,j5=function(X){if(typeof X!="function"&&typeof X!="object")return!1;try{return new X,!0}catch{return!1}}(ps)?ps:function(){let X=function(ce,be){this.message=ce||"",this.name=be||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return X.prototype=Object.create(Error.prototype),Object.defineProperty(X.prototype,"constructor",{value:X,writable:!0,configurable:!0}),X}();function $b(X,ce,be,Te,qe,Ue){let Qe=X.getReader(),it=ce.getWriter();wd(X)&&(X._disturbed=!0);let vt,gt,Nt,zt=!1,St=!1,Zt="readable",cr="writable",oa=!1,Qr=!1,mr=c(Qn=>{Nt=Qn}),Pa=Promise.resolve(void 0);return c((Qn,ga)=>{let En;function gi(){if(zt)return;let Vr=c((va,zr)=>{(function la(Zi){Zi?va():S(function(){return zt?y(!0):S(it.ready,()=>S(Qe.read(),ei=>!!ei.done||(Pa=it.write(ei.value),k(Pa),!1)))}(),la,zr)})(!1)});k(Vr)}function Uo(){return Zt="closed",be?ba():Zr(()=>(rt(ce)&&(oa=st(ce),cr=ce._state),oa||cr==="closed"?y(void 0):cr==="erroring"||cr==="errored"?u(gt):(oa=!0,it.close())),!1,void 0),null}function sr(Vr){return zt||(Zt="errored",vt=Vr,Te?ba(!0,Vr):Zr(()=>it.abort(Vr),!0,Vr)),null}function or(Vr){return St||(cr="errored",gt=Vr,qe?ba(!0,Vr):Zr(()=>Qe.cancel(Vr),!0,Vr)),null}if(Ue!==void 0&&(En=()=>{let Vr=Ue.reason!==void 0?Ue.reason:new j5("Aborted","AbortError"),va=[];Te||va.push(()=>cr==="writable"?it.abort(Vr):y(void 0)),qe||va.push(()=>Zt==="readable"?Qe.cancel(Vr):y(void 0)),Zr(()=>Promise.all(va.map(zr=>zr())),!0,Vr)},Ue.aborted?En():Ue.addEventListener("abort",En)),wd(X)&&(Zt=X._state,vt=X._storedError),rt(ce)&&(cr=ce._state,gt=ce._storedError,oa=st(ce)),wd(X)&&rt(ce)&&(Qr=!0,Nt()),Zt==="errored")sr(vt);else if(cr==="erroring"||cr==="errored")or(gt);else if(Zt==="closed")Uo();else if(oa||cr==="closed"){let Vr=new TypeError("the destination writable stream closed before all data could be piped to it");qe?ba(!0,Vr):Zr(()=>Qe.cancel(Vr),!0,Vr)}function Zr(Vr,va,zr){function la(){return cr!=="writable"||oa?Zi():U(function(){let ei;return y(function Ef(){if(ei!==Pa)return ei=Pa,D(Pa,Ef,Ef)}())}(),Zi),null}function Zi(){return Vr?V(Vr(),()=>$n(va,zr),ei=>$n(!0,ei)):$n(va,zr),null}zt||(zt=!0,Qr?la():U(mr,la))}function ba(Vr,va){Zr(void 0,Vr,va)}function $n(Vr,va){return St=!0,it.releaseLock(),Qe.releaseLock(),Ue!==void 0&&Ue.removeEventListener("abort",En),Vr?ga(va):Qn(void 0),null}zt||(V(Qe.closed,Uo,sr),V(it.closed,function(){return St||(cr="closed"),null},or)),Qr?gi():T(()=>{Qr=!0,Nt(),gi()})})}function B5(X,ce){return function(be){try{return be.getReader({mode:"byob"}).releaseLock(),!0}catch{return!1}}(X)?function(be){let Te,qe,Ue,Qe,it,vt=be.getReader(),gt=!1,Nt=!1,zt=!1,St=!1,Zt=!1,cr=!1,oa=c(or=>{it=or});function Qr(or){z(or.closed,Zr=>(or!==vt||(Ue.error(Zr),Qe.error(Zr),Zt&&cr||it(void 0)),null))}function mr(){gt&&(vt.releaseLock(),vt=be.getReader(),Qr(vt),gt=!1),V(vt.read(),or=>{var Zr,ba;if(zt=!1,St=!1,or.done)return Zt||Ue.close(),cr||Qe.close(),(Zr=Ue.byobRequest)===null||Zr===void 0||Zr.respond(0),(ba=Qe.byobRequest)===null||ba===void 0||ba.respond(0),Zt&&cr||it(void 0),null;let $n=or.value,Vr=$n,va=$n;if(!Zt&&!cr)try{va=Ee($n)}catch(zr){return Ue.error(zr),Qe.error(zr),it(vt.cancel(zr)),null}return Zt||Ue.enqueue(Vr),cr||Qe.enqueue(va),Nt=!1,zt?Qn():St&&ga(),null},()=>(Nt=!1,null))}function Pa(or,Zr){gt||(vt.releaseLock(),vt=be.getReader({mode:"byob"}),Qr(vt),gt=!0);let ba=Zr?Qe:Ue,$n=Zr?Ue:Qe;V(vt.read(or),Vr=>{var va;zt=!1,St=!1;let zr=Zr?cr:Zt,la=Zr?Zt:cr;if(Vr.done){zr||ba.close(),la||$n.close();let ei=Vr.value;return ei!==void 0&&(zr||ba.byobRequest.respondWithNewView(ei),la||(va=$n.byobRequest)===null||va===void 0||va.respond(0)),zr&&la||it(void 0),null}let Zi=Vr.value;if(la)zr||ba.byobRequest.respondWithNewView(Zi);else{let ei;try{ei=Ee(Zi)}catch(Ef){return ba.error(Ef),$n.error(Ef),it(vt.cancel(Ef)),null}zr||ba.byobRequest.respondWithNewView(Zi),$n.enqueue(ei)}return Nt=!1,zt?Qn():St&&ga(),null},()=>(Nt=!1,null))}function Qn(){if(Nt)return zt=!0,y(void 0);Nt=!0;let or=Ue.byobRequest;return or===null?mr():Pa(or.view,!1),y(void 0)}function ga(){if(Nt)return St=!0,y(void 0);Nt=!0;let or=Qe.byobRequest;return or===null?mr():Pa(or.view,!0),y(void 0)}function En(or){if(Zt=!0,Te=or,cr){let Zr=[Te,qe],ba=vt.cancel(Zr);it(ba)}return oa}function gi(or){if(cr=!0,qe=or,Zt){let Zr=[Te,qe],ba=vt.cancel(Zr);it(ba)}return oa}let Uo=new An({type:"bytes",start(or){Ue=or},pull:Qn,cancel:En}),sr=new An({type:"bytes",start(or){Qe=or},pull:ga,cancel:gi});return Qr(vt),[Uo,sr]}(X):function(be,Te){let qe=be.getReader(),Ue,Qe,it,vt,gt,Nt=!1,zt=!1,St=!1,Zt=!1,cr=c(ga=>{gt=ga});function oa(){return Nt?(zt=!0,y(void 0)):(Nt=!0,V(qe.read(),ga=>{if(zt=!1,ga.done)return St||it.close(),Zt||vt.close(),St&&Zt||gt(void 0),null;let En=ga.value,gi=En,Uo=En;return St||it.enqueue(gi),Zt||vt.enqueue(Uo),Nt=!1,zt&&oa(),null},()=>(Nt=!1,null)),y(void 0))}function Qr(ga){if(St=!0,Ue=ga,Zt){let En=[Ue,Qe],gi=qe.cancel(En);gt(gi)}return cr}function mr(ga){if(Zt=!0,Qe=ga,St){let En=[Ue,Qe],gi=qe.cancel(En);gt(gi)}return cr}let Pa=new An({start(ga){it=ga},pull:oa,cancel:Qr}),Qn=new An({start(ga){vt=ga},pull:oa,cancel:mr});return z(qe.closed,ga=>(it.error(ga),vt.error(ga),St&&Zt||gt(void 0),null)),[Pa,Qn]}(X)}class qo{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Vb(this))throw Wb("desiredSize");return FI(this)}close(){if(!Vb(this))throw Wb("close");if(!Sm(this))throw new TypeError("The stream is not in a state that permits close");(function(ce){if(!Sm(ce))return;let be=ce._controlledReadableStream;ce._closeRequested=!0,ce._queue.length===0&&(zb(ce),Cm(be))})(this)}enqueue(ce){if(!Vb(this))throw Wb("enqueue");if(!Sm(this))throw new TypeError("The stream is not in a state that permits enqueue");return function(be,Te){if(!Sm(be))return;let qe=be._controlledReadableStream;if(Af(qe)&&ae(qe)>0)ee(qe,Te,!1);else{let Ue;try{Ue=be._strategySizeAlgorithm(Te)}catch(Qe){throw wm(be,Qe),Qe}try{Fe(be,Te,Ue)}catch(Qe){throw wm(be,Qe),Qe}}xm(be)}(this,ce)}error(ce){if(!Vb(this))throw Wb("error");wm(this,ce)}[f](ce){Pe(this);let be=this._cancelAlgorithm(ce);return zb(this),be}[p](ce){let be=this._controlledReadableStream;if(this._queue.length>0){let Te=ke(this);this._closeRequested&&this._queue.length===0?(zb(this),Cm(be)):xm(this),ce._chunkSteps(Te)}else Y(be,ce),xm(this)}[h](){}}function Vb(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_controlledReadableStream")&&X instanceof qo}function xm(X){if(function(be){let Te=be._controlledReadableStream;return!Sm(be)||!be._started?!1:!!(Af(Te)&&ae(Te)>0||FI(be)>0)}(X)){if(X._pulling)return void(X._pullAgain=!0);X._pulling=!0,V(X._pullAlgorithm(),()=>(X._pulling=!1,X._pullAgain&&(X._pullAgain=!1,xm(X)),null),be=>(wm(X,be),null))}}function zb(X){X._pullAlgorithm=void 0,X._cancelAlgorithm=void 0,X._strategySizeAlgorithm=void 0}function wm(X,ce){let be=X._controlledReadableStream;be._state==="readable"&&(Pe(X),zb(X),II(be,ce))}function FI(X){let ce=X._controlledReadableStream._state;return ce==="errored"?null:ce==="closed"?0:X._strategyHWM-X._queueTotalSize}function Sm(X){return!X._closeRequested&&X._controlledReadableStream._state==="readable"}function fY(X,ce,be,Te){let qe=Object.create(qo.prototype),Ue,Qe,it;Ue=ce.start!==void 0?()=>ce.start(qe):()=>{},Qe=ce.pull!==void 0?()=>ce.pull(qe):()=>y(void 0),it=ce.cancel!==void 0?vt=>ce.cancel(vt):()=>y(void 0),function(vt,gt,Nt,zt,St,Zt,cr){gt._controlledReadableStream=vt,gt._queue=void 0,gt._queueTotalSize=void 0,Pe(gt),gt._started=!1,gt._closeRequested=!1,gt._pullAgain=!1,gt._pulling=!1,gt._strategySizeAlgorithm=cr,gt._strategyHWM=Zt,gt._pullAlgorithm=zt,gt._cancelAlgorithm=St,vt._readableStreamController=gt,V(y(Nt()),()=>(gt._started=!0,xm(gt),null),oa=>(wm(gt,oa),null))}(X,qe,Ue,Qe,it,be,Te)}function Wb(X){return new TypeError(`ReadableStreamDefaultController.prototype.${X} can only be used on a ReadableStreamDefaultController`)}function hY(X,ce,be){return A(X,be),Te=>g(X,ce,[Te])}function mY(X,ce,be){return A(X,be),Te=>g(X,ce,[Te])}function gY(X,ce,be){return A(X,be),Te=>R(X,ce,[Te])}function bY(X,ce){if((X=`${X}`)!="bytes")throw new TypeError(`${ce} '${X}' is not a valid enumeration value for ReadableStreamType`);return X}function vY(X,ce){if((X=`${X}`)!="byob")throw new TypeError(`${ce} '${X}' is not a valid enumeration value for ReadableStreamReaderMode`);return X}function kI(X,ce){w(X,ce);let be=X?.preventAbort,Te=X?.preventCancel,qe=X?.preventClose,Ue=X?.signal;return Ue!==void 0&&function(Qe,it){if(!function(vt){if(typeof vt!="object"||vt===null)return!1;try{return typeof vt.aborted=="boolean"}catch{return!1}}(Qe))throw new TypeError(`${it} is not an AbortSignal.`)}(Ue,`${ce} has member 'signal' that`),{preventAbort:!!be,preventCancel:!!Te,preventClose:!!qe,signal:Ue}}function yY(X,ce){w(X,ce);let be=X?.readable;C(be,"readable","ReadableWritablePair"),function(qe,Ue){if(!G(qe))throw new TypeError(`${Ue} is not a ReadableStream.`)}(be,`${ce} has member 'readable' that`);let Te=X?.writable;return C(Te,"writable","ReadableWritablePair"),function(qe,Ue){if(!Z(qe))throw new TypeError(`${Ue} is not a WritableStream.`)}(Te,`${ce} has member 'writable' that`),{readable:be,writable:Te}}Object.defineProperties(qo.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),s(qo.prototype.close,"close"),s(qo.prototype.enqueue,"enqueue"),s(qo.prototype.error,"error"),typeof e.toStringTag=="symbol"&&Object.defineProperty(qo.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class An{constructor(ce={},be={}){ce===void 0?ce=null:M(ce,"First parameter");let Te=Kr(be,"Second parameter"),qe=function(Qe,it){w(Qe,it);let vt=Qe,gt=vt?.autoAllocateChunkSize,Nt=vt?.cancel,zt=vt?.pull,St=vt?.start,Zt=vt?.type;return{autoAllocateChunkSize:gt===void 0?void 0:$(gt,`${it} has member 'autoAllocateChunkSize' that`),cancel:Nt===void 0?void 0:hY(Nt,vt,`${it} has member 'cancel' that`),pull:zt===void 0?void 0:mY(zt,vt,`${it} has member 'pull' that`),start:St===void 0?void 0:gY(St,vt,`${it} has member 'start' that`),type:Zt===void 0?void 0:bY(Zt,`${it} has member 'type' that`)}}(ce,"First parameter");var Ue;if((Ue=this)._state="readable",Ue._reader=void 0,Ue._storedError=void 0,Ue._disturbed=!1,qe.type==="bytes"){if(Te.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Le(this,qe,Mr(Te,0))}else{let Qe=ra(Te);fY(this,qe,Mr(Te,1),Qe)}}get locked(){if(!wd(this))throw Sd("locked");return Af(this)}cancel(ce){return wd(this)?Af(this)?u(new TypeError("Cannot cancel a stream that already has a reader")):RI(this,ce):u(Sd("cancel"))}getReader(ce){if(!wd(this))throw Sd("getReader");return function(be,Te){w(be,Te);let qe=be?.mode;return{mode:qe===void 0?void 0:vY(qe,`${Te} has member 'mode' that`)}}(ce,"First parameter").mode===void 0?new se(this):function(be){return new Kt(be)}(this)}pipeThrough(ce,be={}){if(!G(this))throw Sd("pipeThrough");j(ce,1,"pipeThrough");let Te=yY(ce,"First parameter"),qe=kI(be,"Second parameter");if(this.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Te.writable.locked)throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return k($b(this,Te.writable,qe.preventClose,qe.preventAbort,qe.preventCancel,qe.signal)),Te.readable}pipeTo(ce,be={}){if(!G(this))return u(Sd("pipeTo"));if(ce===void 0)return u("Parameter 1 is required in 'pipeTo'.");if(!Z(ce))return u(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let Te;try{Te=kI(be,"Second parameter")}catch(qe){return u(qe)}return this.locked?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ce.locked?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):$b(this,ce,Te.preventClose,Te.preventAbort,Te.preventCancel,Te.signal)}tee(){if(!G(this))throw Sd("tee");if(this.locked)throw new TypeError("Cannot tee a stream that already has a reader");return B5(this)}values(ce){if(!G(this))throw Sd("values");return function(be,Te){let qe=be.getReader(),Ue=new de(qe,Te),Qe=Object.create(fe);return Qe._asyncIteratorImpl=Ue,Qe}(this,function(be,Te){return w(be,Te),{preventCancel:!!be?.preventCancel}}(ce,"First parameter").preventCancel)}}function wd(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_readableStreamController")&&X instanceof An}function Af(X){return X._reader!==void 0}function RI(X,ce){if(X._disturbed=!0,X._state==="closed")return y(void 0);if(X._state==="errored")return u(X._storedError);Cm(X);let be=X._reader;if(be!==void 0&&yr(be)){let Te=be._readIntoRequests;be._readIntoRequests=new m,Te.forEach(qe=>{qe._closeSteps(void 0)})}return D(X._readableStreamController[f](ce),r)}function Cm(X){X._state="closed";let ce=X._reader;if(ce!==void 0&&(P(ce),ue(ce))){let be=ce._readRequests;ce._readRequests=new m,be.forEach(Te=>{Te._closeSteps()})}}function II(X,ce){X._state="errored",X._storedError=ce;let be=X._reader;be!==void 0&&(L(be,ce),ue(be)?le(be,ce):dr(be,ce))}function Sd(X){return new TypeError(`ReadableStream.prototype.${X} can only be used on a ReadableStream`)}function DI(X,ce){w(X,ce);let be=X?.highWaterMark;return C(be,"highWaterMark","QueuingStrategyInit"),{highWaterMark:x(be)}}Object.defineProperties(An.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),s(An.prototype.cancel,"cancel"),s(An.prototype.getReader,"getReader"),s(An.prototype.pipeThrough,"pipeThrough"),s(An.prototype.pipeTo,"pipeTo"),s(An.prototype.tee,"tee"),s(An.prototype.values,"values"),typeof e.toStringTag=="symbol"&&Object.defineProperty(An.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(An.prototype,e.asyncIterator,{value:An.prototype.values,writable:!0,configurable:!0});let NI=X=>X.byteLength;s(NI,"size");class Gb{constructor(ce){j(ce,1,"ByteLengthQueuingStrategy"),ce=DI(ce,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=ce.highWaterMark}get highWaterMark(){if(!jI(this))throw MI("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!jI(this))throw MI("size");return NI}}function MI(X){return new TypeError(`ByteLengthQueuingStrategy.prototype.${X} can only be used on a ByteLengthQueuingStrategy`)}function jI(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_byteLengthQueuingStrategyHighWaterMark")&&X instanceof Gb}Object.defineProperties(Gb.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Gb.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let BI=()=>1;s(BI,"size");class Hb{constructor(ce){j(ce,1,"CountQueuingStrategy"),ce=DI(ce,"First parameter"),this._countQueuingStrategyHighWaterMark=ce.highWaterMark}get highWaterMark(){if(!qI(this))throw LI("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!qI(this))throw LI("size");return BI}}function LI(X){return new TypeError(`CountQueuingStrategy.prototype.${X} can only be used on a CountQueuingStrategy`)}function qI(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_countQueuingStrategyHighWaterMark")&&X instanceof Hb}function _Y(X,ce,be){return A(X,be),Te=>g(X,ce,[Te])}function xY(X,ce,be){return A(X,be),Te=>R(X,ce,[Te])}function wY(X,ce,be){return A(X,be),(Te,qe)=>g(X,ce,[Te,qe])}Object.defineProperties(Hb.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Hb.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Kb{constructor(ce={},be={},Te={}){ce===void 0&&(ce=null);let qe=Kr(be,"Second parameter"),Ue=Kr(Te,"Third parameter"),Qe=function(St,Zt){w(St,Zt);let cr=St?.flush,oa=St?.readableType,Qr=St?.start,mr=St?.transform,Pa=St?.writableType;return{flush:cr===void 0?void 0:_Y(cr,St,`${Zt} has member 'flush' that`),readableType:oa,start:Qr===void 0?void 0:xY(Qr,St,`${Zt} has member 'start' that`),transform:mr===void 0?void 0:wY(mr,St,`${Zt} has member 'transform' that`),writableType:Pa}}(ce,"First parameter");if(Qe.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Qe.writableType!==void 0)throw new RangeError("Invalid writableType specified");let it=Mr(Ue,0),vt=ra(Ue),gt=Mr(qe,1),Nt=ra(qe),zt;(function(St,Zt,cr,oa,Qr,mr){function Pa(){return Zt}function Qn(sr){return function(or,Zr){let ba=or._transformStreamController;return or._backpressure?D(or._backpressureChangePromise,()=>{if((rt(or._writable)?or._writable._state:or._writableState)==="erroring")throw rt(or._writable)?or._writable._storedError:or._writableStoredError;return zI(ba,Zr)}):zI(ba,Zr)}(St,sr)}function ga(sr){return function(or,Zr){return Zb(or,Zr),y(void 0)}(St,sr)}function En(){return function(sr){let or=sr._transformStreamController,Zr=or._flushAlgorithm();return $I(or),D(Zr,()=>{if(sr._readableState==="errored")throw sr._readableStoredError;e2(sr)&&GI(sr)},ba=>{throw Zb(sr,ba),sr._readableStoredError})}(St)}function gi(){return function(sr){return Xb(sr,!1),sr._backpressureChangePromise}(St)}function Uo(sr){return Jb(St,sr),y(void 0)}St._writableState="writable",St._writableStoredError=void 0,St._writableHasInFlightOperation=!1,St._writableStarted=!1,St._writable=function(sr,or,Zr,ba,$n,Vr,va){return new Rr({start(zr){sr._writableController=zr;try{let la=zr.signal;la!==void 0&&la.addEventListener("abort",()=>{sr._writableState==="writable"&&(sr._writableState="erroring",la.reason&&(sr._writableStoredError=la.reason))})}catch{}return D(or(),()=>(sr._writableStarted=!0,ZI(sr),null),la=>{throw sr._writableStarted=!0,L5(sr,la),la})},write:zr=>(function(la){la._writableHasInFlightOperation=!0}(sr),D(Zr(zr),()=>(function(la){la._writableHasInFlightOperation=!1}(sr),ZI(sr),null),la=>{throw function(Zi,ei){Zi._writableHasInFlightOperation=!1,L5(Zi,ei)}(sr,la),la})),close:()=>(function(zr){zr._writableHasInFlightOperation=!0}(sr),D(ba(),()=>(function(zr){zr._writableHasInFlightOperation=!1,zr._writableState==="erroring"&&(zr._writableStoredError=void 0),zr._writableState="closed"}(sr),null),zr=>{throw function(la,Zi){la._writableHasInFlightOperation=!1,la._writableState,L5(la,Zi)}(sr,zr),zr})),abort:zr=>(sr._writableState="errored",sr._writableStoredError=zr,$n(zr))},{highWaterMark:Vr,size:va})}(St,Pa,Qn,En,ga,cr,oa),St._readableState="readable",St._readableStoredError=void 0,St._readableCloseRequested=!1,St._readablePulling=!1,St._readable=function(sr,or,Zr,ba,$n,Vr){return new An({start:va=>(sr._readableController=va,or().catch(zr=>{t2(sr,zr)})),pull:()=>(sr._readablePulling=!0,Zr().catch(va=>{t2(sr,va)})),cancel:va=>(sr._readableState="closed",ba(va))},{highWaterMark:$n,size:Vr})}(St,Pa,gi,Uo,Qr,mr),St._backpressure=void 0,St._backpressureChangePromise=void 0,St._backpressureChangePromise_resolve=void 0,Xb(St,!0),St._transformStreamController=void 0})(this,c(St=>{zt=St}),gt,Nt,it,vt),function(St,Zt){let cr=Object.create(Yl.prototype),oa,Qr;oa=Zt.transform!==void 0?mr=>Zt.transform(mr,cr):mr=>{try{return VI(cr,mr),y(void 0)}catch(Pa){return u(Pa)}},Qr=Zt.flush!==void 0?()=>Zt.flush(cr):()=>y(void 0),function(mr,Pa,Qn,ga){Pa._controlledTransformStream=mr,mr._transformStreamController=Pa,Pa._transformAlgorithm=Qn,Pa._flushAlgorithm=ga}(St,cr,oa,Qr)}(this,Qe),Qe.start!==void 0?zt(Qe.start(this._transformStreamController)):zt(void 0)}get readable(){if(!UI(this))throw WI("readable");return this._readable}get writable(){if(!UI(this))throw WI("writable");return this._writable}}function UI(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_transformStreamController")&&X instanceof Kb}function Zb(X,ce){t2(X,ce),Jb(X,ce)}function Jb(X,ce){$I(X._transformStreamController),function(be,Te){be._writableController.error(Te),be._writableState==="writable"&&KI(be,Te)}(X,ce),X._backpressure&&Xb(X,!1)}function Xb(X,ce){X._backpressureChangePromise!==void 0&&X._backpressureChangePromise_resolve(),X._backpressureChangePromise=c(be=>{X._backpressureChangePromise_resolve=be}),X._backpressure=ce}Object.defineProperties(Kb.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kb.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});class Yl{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Yb(this))throw Qb("desiredSize");return HI(this._controlledTransformStream)}enqueue(ce){if(!Yb(this))throw Qb("enqueue");VI(this,ce)}error(ce){if(!Yb(this))throw Qb("error");var be;be=ce,Zb(this._controlledTransformStream,be)}terminate(){if(!Yb(this))throw Qb("terminate");(function(ce){let be=ce._controlledTransformStream;e2(be)&&GI(be);let Te=new TypeError("TransformStream terminated");Jb(be,Te)})(this)}}function Yb(X){return!!a(X)&&!!Object.prototype.hasOwnProperty.call(X,"_controlledTransformStream")&&X instanceof Yl}function $I(X){X._transformAlgorithm=void 0,X._flushAlgorithm=void 0}function VI(X,ce){let be=X._controlledTransformStream;if(!e2(be))throw new TypeError("Readable side is not in a state that permits enqueue");try{(function(qe,Ue){qe._readablePulling=!1;try{qe._readableController.enqueue(Ue)}catch(Qe){throw t2(qe,Qe),Qe}})(be,ce)}catch(qe){throw Jb(be,qe),be._readableStoredError}(function(qe){return!function(Ue){return e2(Ue)?!!(Ue._readablePulling||HI(Ue)>0):!1}(qe)})(be)!==be._backpressure&&Xb(be,!0)}function zI(X,ce){return D(X._transformAlgorithm(ce),void 0,be=>{throw Zb(X._controlledTransformStream,be),be})}function Qb(X){return new TypeError(`TransformStreamDefaultController.prototype.${X} can only be used on a TransformStreamDefaultController`)}function WI(X){return new TypeError(`TransformStream.prototype.${X} can only be used on a TransformStream`)}function e2(X){return!X._readableCloseRequested&&X._readableState==="readable"}function GI(X){X._readableState="closed",X._readableCloseRequested=!0,X._readableController.close()}function t2(X,ce){X._readableState==="readable"&&(X._readableState="errored",X._readableStoredError=ce),X._readableController.error(ce)}function HI(X){return X._readableController.desiredSize}function L5(X,ce){X._writableState!=="writable"?q5(X):KI(X,ce)}function KI(X,ce){X._writableState="erroring",X._writableStoredError=ce,!function(be){return be._writableHasInFlightOperation}(X)&&X._writableStarted&&q5(X)}function q5(X){X._writableState="errored"}function ZI(X){X._writableState==="erroring"&&q5(X)}Object.defineProperties(Yl.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),s(Yl.prototype.enqueue,"enqueue"),s(Yl.prototype.error,"error"),s(Yl.prototype.terminate,"terminate"),typeof e.toStringTag=="symbol"&&Object.defineProperty(Yl.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),n.ByteLengthQueuingStrategy=Gb,n.CountQueuingStrategy=Hb,n.ReadableByteStreamController=$e,n.ReadableStream=An,n.ReadableStreamBYOBReader=Kt,n.ReadableStreamBYOBRequest=Ie,n.ReadableStreamDefaultController=qo,n.ReadableStreamDefaultReader=se,n.TransformStream=Kb,n.TransformStreamDefaultController=Yl,n.WritableStream=Rr,n.WritableStreamDefaultController=ze,n.WritableStreamDefaultWriter=oe,Object.defineProperty(n,"__esModule",{value:!0})})});var F_=te(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});O_.isFunction=void 0;var Ave=n=>typeof n=="function";O_.isFunction=Ave});var jG=te(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.sliceBlob=Eh.consumeBlobParts=void 0;var Eve=F_(),MG=65536;async function*Pve(n){let e=n.byteOffset+n.byteLength,r=n.byteOffset;for(;r!==e;){let a=Math.min(e-r,MG),i=n.buffer.slice(r,r+a);r+=i.byteLength,yield new Uint8Array(i)}}async function*Tve(n){let e=0;for(;e!==n.size;){let a=await n.slice(e,Math.min(n.size,e+MG)).arrayBuffer();e+=a.byteLength,yield new Uint8Array(a)}}async function*Ove(n,e=!1){for(let r of n)ArrayBuffer.isView(r)?e?yield*Pve(r):yield r:(0,Eve.isFunction)(r.stream)?yield*r.stream():yield*Tve(r)}Eh.consumeBlobParts=Ove;function*Fve(n,e,r=0,a){a??(a=e);let i=r<0?Math.max(e+r,0):Math.min(r,e),s=a<0?Math.max(e+a,0):Math.min(a,e),t=Math.max(s-i,0),o=0;for(let l of n){if(o>=t)break;let d=ArrayBuffer.isView(l)?l.byteLength:l.size;if(i&&d<=i)i-=d,s-=d;else{let c;ArrayBuffer.isView(l)?(c=l.subarray(i,Math.min(d,s)),o+=c.byteLength):(c=l.slice(i,Math.min(d,s)),o+=c.size),s-=d,i=0,yield c}}}Eh.sliceBlob=Fve});var D_=te(ad=>{"use strict";var rd=ad&&ad.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},BG=ad&&ad.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},tf,k_,Pg;Object.defineProperty(ad,"__esModule",{value:!0});ad.Blob=void 0;var kve=NG(),Tg=F_(),R_=jG(),I_=class n{constructor(e=[],r={}){if(tf.set(this,[]),k_.set(this,""),Pg.set(this,0),r??(r={}),typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(!(0,Tg.isFunction)(e[Symbol.iterator]))throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&!(0,Tg.isFunction)(r))throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");let a=new TextEncoder;for(let s of e){let t;ArrayBuffer.isView(s)?t=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?t=new Uint8Array(s.slice(0)):s instanceof n?t=s:t=a.encode(String(s)),BG(this,Pg,rd(this,Pg,"f")+(ArrayBuffer.isView(t)?t.byteLength:t.size),"f"),rd(this,tf,"f").push(t)}let i=r.type===void 0?"":String(r.type);BG(this,k_,/^[\x20-\x7E]*$/.test(i)?i:"","f")}static[(tf=new WeakMap,k_=new WeakMap,Pg=new WeakMap,Symbol.hasInstance)](e){return!!(e&&typeof e=="object"&&(0,Tg.isFunction)(e.constructor)&&((0,Tg.isFunction)(e.stream)||(0,Tg.isFunction)(e.arrayBuffer))&&/^(Blob|File)$/.test(e[Symbol.toStringTag]))}get type(){return rd(this,k_,"f")}get size(){return rd(this,Pg,"f")}slice(e,r,a){return new n((0,R_.sliceBlob)(rd(this,tf,"f"),this.size,e,r),{type:a})}async text(){let e=new TextDecoder,r="";for await(let a of(0,R_.consumeBlobParts)(rd(this,tf,"f")))r+=e.decode(a,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let a of(0,R_.consumeBlobParts)(rd(this,tf,"f")))e.set(a,r),r+=a.length;return e.buffer}stream(){let e=(0,R_.consumeBlobParts)(rd(this,tf,"f"),!0);return new kve.ReadableStream({async pull(r){let{value:a,done:i}=await e.next();if(i)return queueMicrotask(()=>r.close());r.enqueue(a)},async cancel(){await e.return()}})}get[Symbol.toStringTag](){return"Blob"}};ad.Blob=I_;Object.defineProperties(I_.prototype,{type:{enumerable:!0},size:{enumerable:!0},slice:{enumerable:!0},stream:{enumerable:!0},text:{enumerable:!0},arrayBuffer:{enumerable:!0}})});var Og=te(nd=>{"use strict";var LG=nd&&nd.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},qG=nd&&nd.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},N_,M_;Object.defineProperty(nd,"__esModule",{value:!0});nd.File=void 0;var UG=D_(),gO=class extends UG.Blob{constructor(e,r,a={}){if(super(e,a),N_.set(this,void 0),M_.set(this,0),arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);LG(this,N_,String(r),"f");let i=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(i)||LG(this,M_,i,"f")}static[(N_=new WeakMap,M_=new WeakMap,Symbol.hasInstance)](e){return e instanceof UG.Blob&&e[Symbol.toStringTag]==="File"&&typeof e.name=="string"}get name(){return qG(this,N_,"f")}get lastModified(){return qG(this,M_,"f")}get webkitRelativePath(){return""}get[Symbol.toStringTag](){return"File"}};nd.File=gO});var bO=te(j_=>{"use strict";Object.defineProperty(j_,"__esModule",{value:!0});j_.isFile=void 0;var Rve=Og(),Ive=n=>n instanceof Rve.File;j_.isFile=Ive});var $G=te(B_=>{"use strict";Object.defineProperty(B_,"__esModule",{value:!0});B_.isBlob=void 0;var Dve=D_(),Nve=n=>n instanceof Dve.Blob;B_.isBlob=Nve});var VG=te(L_=>{"use strict";Object.defineProperty(L_,"__esModule",{value:!0});L_.deprecateConstructorEntries=void 0;var Mve=require("util");L_.deprecateConstructorEntries=(0,Mve.deprecate)(()=>{},'Constructor "entries" argument is not spec-compliant and will be removed in next major release.')});var WG=te(Ph=>{"use strict";var Lu=Ph&&Ph.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},q_,qu,vO;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.FormData=void 0;var jve=require("util"),zG=Og(),Bve=bO(),Lve=$G(),Zs=F_(),qve=VG(),yO=class{constructor(e){q_.add(this),qu.set(this,new Map),e&&((0,qve.deprecateConstructorEntries)(),e.forEach(({name:r,value:a,fileName:i})=>this.append(r,a,i)))}static[(qu=new WeakMap,q_=new WeakSet,Symbol.hasInstance)](e){return!!(e&&(0,Zs.isFunction)(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&(0,Zs.isFunction)(e.append)&&(0,Zs.isFunction)(e.set)&&(0,Zs.isFunction)(e.get)&&(0,Zs.isFunction)(e.getAll)&&(0,Zs.isFunction)(e.has)&&(0,Zs.isFunction)(e.delete)&&(0,Zs.isFunction)(e.entries)&&(0,Zs.isFunction)(e.values)&&(0,Zs.isFunction)(e.keys)&&(0,Zs.isFunction)(e[Symbol.iterator])&&(0,Zs.isFunction)(e.forEach))}append(e,r,a){Lu(this,q_,"m",vO).call(this,{name:e,fileName:a,append:!0,rawValue:r,argsLength:arguments.length})}set(e,r,a){Lu(this,q_,"m",vO).call(this,{name:e,fileName:a,append:!1,rawValue:r,argsLength:arguments.length})}get(e){let r=Lu(this,qu,"f").get(String(e));return r?r[0]:null}getAll(e){let r=Lu(this,qu,"f").get(String(e));return r?r.slice():[]}has(e){return Lu(this,qu,"f").has(String(e))}delete(e){Lu(this,qu,"f").delete(String(e))}*keys(){for(let e of Lu(this,qu,"f").keys())yield e}*entries(){for(let e of this.keys()){let r=this.getAll(e);for(let a of r)yield[e,a]}}*values(){for(let[,e]of this)yield e}[(vO=function({name:r,rawValue:a,append:i,fileName:s,argsLength:t}){let o=i?"append":"set";if(t<2)throw new TypeError(`Failed to execute '${o}' on 'FormData': 2 arguments required, but only ${t} present.`);r=String(r);let l;if((0,Bve.isFile)(a))l=s===void 0?a:new zG.File([a],s,{type:a.type,lastModified:a.lastModified});else if((0,Lve.isBlob)(a))l=new zG.File([a],s===void 0?"blob":s,{type:a.type});else{if(s)throw new TypeError(`Failed to execute '${o}' on 'FormData': parameter 2 is not of type 'Blob'.`);l=String(a)}let d=Lu(this,qu,"f").get(r);if(!d)return void Lu(this,qu,"f").set(r,[l]);if(!i)return void Lu(this,qu,"f").set(r,[l]);d.push(l)},Symbol.iterator)](){return this.entries()}forEach(e,r){for(let[a,i]of this)e.call(r,i,a,this)}get[Symbol.toStringTag](){return"FormData"}[jve.inspect.custom](){return this[Symbol.toStringTag]}};Ph.FormData=yO});var GG=te(zl=>{"use strict";var Uve=zl&&zl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r),Object.defineProperty(n,a,{enumerable:!0,get:function(){return e[r]}})}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),_O=zl&&zl.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Uve(e,n,r)};Object.defineProperty(zl,"__esModule",{value:!0});_O(WG(),zl);_O(D_(),zl);_O(Og(),zl)});var KG=te((ULe,HG)=>{var Th=1e3,Oh=Th*60,Fh=Oh*60,rf=Fh*24,$ve=rf*7,Vve=rf*365.25;HG.exports=function(n,e){e=e||{};var r=typeof n;if(r==="string"&&n.length>0)return zve(n);if(r==="number"&&isFinite(n))return e.long?Gve(n):Wve(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function zve(n){if(n=String(n),!(n.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(e){var r=parseFloat(e[1]),a=(e[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return r*Vve;case"weeks":case"week":case"w":return r*$ve;case"days":case"day":case"d":return r*rf;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Oh;case"seconds":case"second":case"secs":case"sec":case"s":return r*Th;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Wve(n){var e=Math.abs(n);return e>=rf?Math.round(n/rf)+"d":e>=Fh?Math.round(n/Fh)+"h":e>=Oh?Math.round(n/Oh)+"m":e>=Th?Math.round(n/Th)+"s":n+"ms"}function Gve(n){var e=Math.abs(n);return e>=rf?U_(n,e,rf,"day"):e>=Fh?U_(n,e,Fh,"hour"):e>=Oh?U_(n,e,Oh,"minute"):e>=Th?U_(n,e,Th,"second"):n+" ms"}function U_(n,e,r,a){var i=e>=r*1.5;return Math.round(n/r)+" "+a+(i?"s":"")}});var JG=te(($Le,ZG)=>{"use strict";var Hve=require("util"),Kve=KG();ZG.exports=function(n){if(typeof n=="number")return n;var e=Kve(n);if(e===void 0){var r=new Error(Hve.format("humanize-ms(%j) result undefined",n));console.warn(r.stack)}return e}});var $_=te((VLe,XG)=>{"use strict";XG.exports={CURRENT_ID:Symbol("agentkeepalive#currentId"),CREATE_ID:Symbol("agentkeepalive#createId"),INIT_SOCKET:Symbol("agentkeepalive#initSocket"),CREATE_HTTPS_CONNECTION:Symbol("agentkeepalive#createHttpsConnection"),SOCKET_CREATED_TIME:Symbol("agentkeepalive#socketCreatedTime"),SOCKET_NAME:Symbol("agentkeepalive#socketName"),SOCKET_REQUEST_COUNT:Symbol("agentkeepalive#socketRequestCount"),SOCKET_REQUEST_FINISHED_COUNT:Symbol("agentkeepalive#socketRequestFinishedCount")}});var EO=te((zLe,tH)=>{"use strict";var Zve=require("http").Agent,xO=JG(),hi=require("util").debuglog("agentkeepalive"),{INIT_SOCKET:YG,CURRENT_ID:V_,CREATE_ID:QG,SOCKET_CREATED_TIME:eH,SOCKET_NAME:qi,SOCKET_REQUEST_COUNT:Js,SOCKET_REQUEST_FINISHED_COUNT:Uu}=$_(),CO=1,wO=parseInt(process.version.split(".",1)[0].substring(1));wO>=11&&wO<=12?CO=2:wO>=13&&(CO=3);function Fg(n){console.log("[agentkeepalive:deprecated] %s",n)}var AO=class extends Zve{constructor(e){e=e||{},e.keepAlive=e.keepAlive!==!1,e.freeSocketTimeout===void 0&&(e.freeSocketTimeout=4e3),e.keepAliveTimeout&&(Fg("options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.keepAliveTimeout,delete e.keepAliveTimeout),e.freeSocketKeepAliveTimeout&&(Fg("options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.freeSocketKeepAliveTimeout,delete e.freeSocketKeepAliveTimeout),e.timeout===void 0&&(e.timeout=Math.max(e.freeSocketTimeout*2,8e3)),e.timeout=xO(e.timeout),e.freeSocketTimeout=xO(e.freeSocketTimeout),e.socketActiveTTL=e.socketActiveTTL?xO(e.socketActiveTTL):0,super(e),this[V_]=0,this.createSocketCount=0,this.createSocketCountLastCheck=0,this.createSocketErrorCount=0,this.createSocketErrorCountLastCheck=0,this.closeSocketCount=0,this.closeSocketCountLastCheck=0,this.errorSocketCount=0,this.errorSocketCountLastCheck=0,this.requestCount=0,this.requestCountLastCheck=0,this.timeoutSocketCount=0,this.timeoutSocketCountLastCheck=0,this.on("free",r=>{let a=this.calcSocketTimeout(r);a>0&&r.timeout!==a&&r.setTimeout(a)})}get freeSocketKeepAliveTimeout(){return Fg("agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead"),this.options.freeSocketTimeout}get timeout(){return Fg("agent.timeout is deprecated, please use agent.options.timeout instead"),this.options.timeout}get socketActiveTTL(){return Fg("agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead"),this.options.socketActiveTTL}calcSocketTimeout(e){let r=this.options.freeSocketTimeout,a=this.options.socketActiveTTL;if(a){let i=Date.now()-e[eH],s=a-i;if(s<=0)return s;r&&s<r&&(r=s)}if(r)return e.freeSocketTimeout||e.freeSocketKeepAliveTimeout||r}keepSocketAlive(e){let r=super.keepSocketAlive(e);if(!r)return r;let a=this.calcSocketTimeout(e);return typeof a>"u"?!0:a<=0?(hi("%s(requests: %s, finished: %s) free but need to destroy by TTL, request count %s, diff is %s",e[qi],e[Js],e[Uu],a),!1):(e.timeout!==a&&e.setTimeout(a),!0)}reuseSocket(...e){super.reuseSocket(...e);let r=e[0],a=e[1];a.reusedSocket=!0;let i=this.options.timeout;kg(r)!==i&&(r.setTimeout(i),hi("%s reset timeout to %sms",r[qi],i)),r[Js]++,hi("%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms",r[qi],r[Js],r[Uu],kg(r))}[QG](){let e=this[V_]++;return this[V_]===Number.MAX_SAFE_INTEGER&&(this[V_]=0),e}[YG](e,r){r.timeout&&(kg(e)||e.setTimeout(r.timeout)),this.options.keepAlive&&e.setNoDelay(!0),this.createSocketCount++,this.options.socketActiveTTL&&(e[eH]=Date.now()),e[qi]=`sock[${this[QG]()}#${r._agentKey}]`.split("-----BEGIN",1)[0],e[Js]=1,e[Uu]=0,Jve(this,e,r)}createConnection(e,r){let a=!1,i=(t,o)=>{if(!a){if(a=!0,t)return this.createSocketErrorCount++,r(t);this[YG](o,e),r(t,o)}},s=super.createConnection(e,i);return s&&i(null,s),s}get statusChanged(){let e=this.createSocketCount!==this.createSocketCountLastCheck||this.createSocketErrorCount!==this.createSocketErrorCountLastCheck||this.closeSocketCount!==this.closeSocketCountLastCheck||this.errorSocketCount!==this.errorSocketCountLastCheck||this.timeoutSocketCount!==this.timeoutSocketCountLastCheck||this.requestCount!==this.requestCountLastCheck;return e&&(this.createSocketCountLastCheck=this.createSocketCount,this.createSocketErrorCountLastCheck=this.createSocketErrorCount,this.closeSocketCountLastCheck=this.closeSocketCount,this.errorSocketCountLastCheck=this.errorSocketCount,this.timeoutSocketCountLastCheck=this.timeoutSocketCount,this.requestCountLastCheck=this.requestCount),e}getCurrentStatus(){return{createSocketCount:this.createSocketCount,createSocketErrorCount:this.createSocketErrorCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:SO(this.freeSockets),sockets:SO(this.sockets),requests:SO(this.requests)}}};function kg(n){return n.timeout||n._idleTimeout}function Jve(n,e,r){hi("%s create, timeout %sms",e[qi],kg(e));function a(){if(!e._httpMessage&&e[Js]===1)return;e[Uu]++,n.requestCount++,hi("%s(requests: %s, finished: %s) free",e[qi],e[Js],e[Uu]);let l=n.getName(r);e.writable&&n.requests[l]&&n.requests[l].length&&(e[Js]++,hi("%s(requests: %s, finished: %s) will be reuse on agent free event",e[qi],e[Js],e[Uu]))}e.on("free",a);function i(l){hi("%s(requests: %s, finished: %s) close, isError: %s",e[qi],e[Js],e[Uu],l),n.closeSocketCount++}e.on("close",i);function s(){let l=e.listeners("timeout").length,d=kg(e),c=e._httpMessage,y=c&&c.listeners("timeout").length||0;hi("%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s",e[qi],e[Js],e[Uu],d,l,CO,!!c,y),hi.enabled&&hi("timeout listeners: %s",e.listeners("timeout").map(S=>S.name).join(", ")),n.timeoutSocketCount++;let u=n.getName(r);if(n.freeSockets[u]&&n.freeSockets[u].indexOf(e)!==-1)e.destroy(),n.removeSocket(e,r),hi("%s is free, destroy quietly",e[qi]);else if(y===0){let S=new Error("Socket timeout");S.code="ERR_SOCKET_TIMEOUT",S.timeout=d,e.destroy(S),n.removeSocket(e,r),hi("%s destroy with timeout error",e[qi])}}e.on("timeout",s);function t(l){let d=e.listeners("error").length;hi("%s(requests: %s, finished: %s) error: %s, listenerCount: %s",e[qi],e[Js],e[Uu],l,d),n.errorSocketCount++,d===1&&(hi("%s emit uncaught error event",e[qi]),e.removeListener("error",t),e.emit("error",l))}e.on("error",t);function o(){hi("%s(requests: %s, finished: %s) agentRemove",e[qi],e[Js],e[Uu]),e.removeListener("close",i),e.removeListener("error",t),e.removeListener("free",a),e.removeListener("timeout",s),e.removeListener("agentRemove",o)}e.on("agentRemove",o)}tH.exports=AO;function SO(n){let e={};for(let r in n)e[r]=n[r].length;return e}});var nH=te((WLe,aH)=>{"use strict";var PO=require("https").Agent,Xve=EO(),{INIT_SOCKET:Yve,CREATE_HTTPS_CONNECTION:rH}=$_(),Rg=class extends Xve{constructor(e){super(e),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,this.maxCachedSessions===void 0&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}}createConnection(e,r){let a=this[rH](e,r);return this[Yve](a,e),a}};Rg.prototype[rH]=PO.prototype.createConnection;["getName","_getSession","_cacheSession","_evictSession"].forEach(function(n){typeof PO.prototype[n]=="function"&&(Rg.prototype[n]=PO.prototype[n])});aH.exports=Rg});var sH=te((GLe,Ig)=>{"use strict";var iH=EO();Ig.exports=iH;Ig.exports.HttpAgent=iH;Ig.exports.HttpsAgent=nH();Ig.exports.constants=$_()});var gH=te((Mg,Ng)=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});var pH=new WeakMap,TO=new WeakMap;function Ea(n){let e=pH.get(n);return console.assert(e!=null,"'this' is expected an Event object, but got",n),e}function oH(n){if(n.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",n.passiveListener);return}n.event.cancelable&&(n.canceled=!0,typeof n.event.preventDefault=="function"&&n.event.preventDefault())}function kh(n,e){pH.set(this,{eventTarget:n,event:e,eventPhase:2,currentTarget:n,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let a=0;a<r.length;++a){let i=r[a];i in this||Object.defineProperty(this,i,fH(i))}}kh.prototype={get type(){return Ea(this).event.type},get target(){return Ea(this).eventTarget},get currentTarget(){return Ea(this).currentTarget},composedPath(){let n=Ea(this).currentTarget;return n==null?[]:[n]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Ea(this).eventPhase},stopPropagation(){let n=Ea(this);n.stopped=!0,typeof n.event.stopPropagation=="function"&&n.event.stopPropagation()},stopImmediatePropagation(){let n=Ea(this);n.stopped=!0,n.immediateStopped=!0,typeof n.event.stopImmediatePropagation=="function"&&n.event.stopImmediatePropagation()},get bubbles(){return!!Ea(this).event.bubbles},get cancelable(){return!!Ea(this).event.cancelable},preventDefault(){oH(Ea(this))},get defaultPrevented(){return Ea(this).canceled},get composed(){return!!Ea(this).event.composed},get timeStamp(){return Ea(this).timeStamp},get srcElement(){return Ea(this).eventTarget},get cancelBubble(){return Ea(this).stopped},set cancelBubble(n){if(!n)return;let e=Ea(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!Ea(this).canceled},set returnValue(n){n||oH(Ea(this))},initEvent(){}};Object.defineProperty(kh.prototype,"constructor",{value:kh,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(kh.prototype,window.Event.prototype),TO.set(window.Event.prototype,kh));function fH(n){return{get(){return Ea(this).event[n]},set(e){Ea(this).event[n]=e},configurable:!0,enumerable:!0}}function Qve(n){return{value(){let e=Ea(this).event;return e[n].apply(e,arguments)},configurable:!0,enumerable:!0}}function eye(n,e){let r=Object.keys(e);if(r.length===0)return n;function a(i,s){n.call(this,i,s)}a.prototype=Object.create(n.prototype,{constructor:{value:a,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in n.prototype)){let o=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(a.prototype,s,o?Qve(s):fH(s))}}return a}function hH(n){if(n==null||n===Object.prototype)return kh;let e=TO.get(n);return e==null&&(e=eye(hH(Object.getPrototypeOf(n)),n),TO.set(n,e)),e}function tye(n,e){let r=hH(Object.getPrototypeOf(e));return new r(n,e)}function rye(n){return Ea(n).immediateStopped}function aye(n,e){Ea(n).eventPhase=e}function nye(n,e){Ea(n).currentTarget=e}function uH(n,e){Ea(n).passiveListener=e}var mH=new WeakMap,lH=1,cH=2,z_=3;function W_(n){return n!==null&&typeof n=="object"}function Dg(n){let e=mH.get(n);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function iye(n){return{get(){let r=Dg(this).get(n);for(;r!=null;){if(r.listenerType===z_)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!W_(e)&&(e=null);let r=Dg(this),a=null,i=r.get(n);for(;i!=null;)i.listenerType===z_?a!==null?a.next=i.next:i.next!==null?r.set(n,i.next):r.delete(n):a=i,i=i.next;if(e!==null){let s={listener:e,listenerType:z_,passive:!1,once:!1,next:null};a===null?r.set(n,s):a.next=s}},configurable:!0,enumerable:!0}}function OO(n,e){Object.defineProperty(n,`on${e}`,iye(e))}function dH(n){function e(){Do.call(this)}e.prototype=Object.create(Do.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<n.length;++r)OO(e.prototype,n[r]);return e}function Do(){if(this instanceof Do){mH.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return dH(arguments[0]);if(arguments.length>0){let n=new Array(arguments.length);for(let e=0;e<arguments.length;++e)n[e]=arguments[e];return dH(n)}throw new TypeError("Cannot call a class as a function")}Do.prototype={addEventListener(n,e,r){if(e==null)return;if(typeof e!="function"&&!W_(e))throw new TypeError("'listener' should be a function or an object.");let a=Dg(this),i=W_(r),t=(i?!!r.capture:!!r)?lH:cH,o={listener:e,listenerType:t,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=a.get(n);if(l===void 0){a.set(n,o);return}let d=null;for(;l!=null;){if(l.listener===e&&l.listenerType===t)return;d=l,l=l.next}d.next=o},removeEventListener(n,e,r){if(e==null)return;let a=Dg(this),s=(W_(r)?!!r.capture:!!r)?lH:cH,t=null,o=a.get(n);for(;o!=null;){if(o.listener===e&&o.listenerType===s){t!==null?t.next=o.next:o.next!==null?a.set(n,o.next):a.delete(n);return}t=o,o=o.next}},dispatchEvent(n){if(n==null||typeof n.type!="string")throw new TypeError('"event.type" should be a string.');let e=Dg(this),r=n.type,a=e.get(r);if(a==null)return!0;let i=tye(this,n),s=null;for(;a!=null;){if(a.once?s!==null?s.next=a.next:a.next!==null?e.set(r,a.next):e.delete(r):s=a,uH(i,a.passive?a.listener:null),typeof a.listener=="function")try{a.listener.call(this,i)}catch(t){typeof console<"u"&&typeof console.error=="function"&&console.error(t)}else a.listenerType!==z_&&typeof a.listener.handleEvent=="function"&&a.listener.handleEvent(i);if(rye(i))break;a=a.next}return uH(i,null),aye(i,0),nye(i,null),!i.defaultPrevented}};Object.defineProperty(Do.prototype,"constructor",{value:Do,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Do.prototype,window.EventTarget.prototype);Mg.defineEventAttribute=OO;Mg.EventTarget=Do;Mg.default=Do;Ng.exports=Do;Ng.exports.EventTarget=Ng.exports.default=Do;Ng.exports.defineEventAttribute=OO});var yH=te((Bg,jg)=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});var FO=gH(),id=class extends FO.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=G_.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};FO.defineEventAttribute(id.prototype,"abort");function sye(){let n=Object.create(id.prototype);return FO.EventTarget.call(n),G_.set(n,!1),n}function oye(n){G_.get(n)===!1&&(G_.set(n,!0),n.dispatchEvent({type:"abort"}))}var G_=new WeakMap;Object.defineProperties(id.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(id.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var sd=class{constructor(){vH.set(this,sye())}get signal(){return bH(this)}abort(){oye(bH(this))}},vH=new WeakMap;function bH(n){let e=vH.get(n);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${n===null?"null":typeof n}`);return e}Object.defineProperties(sd.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(sd.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Bg.AbortController=sd;Bg.AbortSignal=id;Bg.default=sd;jg.exports=sd;jg.exports.AbortController=jg.exports.default=sd;jg.exports.AbortSignal=id});var xH=te(kO=>{"use strict";Object.defineProperty(kO,"__esModule",{value:!0});var _H="abcdefghijklmnopqrstuvwxyz0123456789";function uye(){let n=16,e="";for(;n--;)e+=_H[Math.random()*_H.length<<0];return e}kO.default=uye});var wH=te(RO=>{"use strict";Object.defineProperty(RO,"__esModule",{value:!0});var lye=n=>Object.prototype.toString.call(n).slice(8,-1).toLowerCase();function cye(n){if(lye(n)!=="object")return!1;let e=Object.getPrototypeOf(n);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}RO.default=cye});var SH=te(IO=>{"use strict";Object.defineProperty(IO,"__esModule",{value:!0});var dye=n=>String(n).replace(/\r|\n/g,(e,r,a)=>e==="\r"&&a[r+1]!==`
`||e===`
`&&a[r-1]!=="\r"?`\r
`:e);IO.default=dye});var CH=te(DO=>{"use strict";Object.defineProperty(DO,"__esModule",{value:!0});var pye=n=>String(n).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22");DO.default=pye});var MO=te(NO=>{"use strict";Object.defineProperty(NO,"__esModule",{value:!0});var fye=n=>typeof n=="function";NO.default=fye});var jO=te(Rh=>{"use strict";var hye=Rh&&Rh.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rh,"__esModule",{value:!0});Rh.isFileLike=void 0;var AH=hye(MO()),mye=n=>!!(n&&typeof n=="object"&&(0,AH.default)(n.constructor)&&n[Symbol.toStringTag]==="File"&&(0,AH.default)(n.stream)&&n.name!=null&&n.size!=null&&n.lastModified!=null);Rh.isFileLike=mye});var BO=te(Wl=>{"use strict";var gye=Wl&&Wl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.isFormDataLike=Wl.isFormData=void 0;var Lg=gye(MO()),bye=n=>!!(n&&(0,Lg.default)(n.constructor)&&n[Symbol.toStringTag]==="FormData"&&(0,Lg.default)(n.append)&&(0,Lg.default)(n.getAll)&&(0,Lg.default)(n.entries)&&(0,Lg.default)(n[Symbol.iterator]));Wl.isFormData=bye;Wl.isFormDataLike=Wl.isFormData});var OH=te(Xs=>{"use strict";var qg=Xs&&Xs.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},Ra=Xs&&Xs.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},X_=Xs&&Xs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},H_,od,Ug,K_,$g,af,Vg,zg,Z_,LO;Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Encoder=Xs.FormDataEncoder=void 0;var vye=X_(xH()),EH=X_(wH()),PH=X_(SH()),TH=X_(CH()),Ih=jO(),yye=BO(),_ye={enableAdditionalHeaders:!1},J_=class{constructor(e,r,a){if(H_.add(this),od.set(this,`\r
`),Ug.set(this,void 0),K_.set(this,void 0),$g.set(this,"-".repeat(2)),af.set(this,new TextEncoder),Vg.set(this,void 0),zg.set(this,void 0),Z_.set(this,void 0),!(0,yye.isFormData)(e))throw new TypeError("Expected first argument to be a FormData instance.");let i;if((0,EH.default)(r)?a=r:i=r,i||(i=(0,vye.default)()),typeof i!="string")throw new TypeError("Expected boundary argument to be a string.");if(a&&!(0,EH.default)(a))throw new TypeError("Expected options argument to be an object.");qg(this,zg,e,"f"),qg(this,Z_,{..._ye,...a},"f"),qg(this,Ug,Ra(this,af,"f").encode(Ra(this,od,"f")),"f"),qg(this,K_,Ra(this,Ug,"f").byteLength,"f"),this.boundary=`form-data-boundary-${i}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,qg(this,Vg,Ra(this,af,"f").encode(`${Ra(this,$g,"f")}${this.boundary}${Ra(this,$g,"f")}${Ra(this,od,"f").repeat(2)}`),"f"),this.contentLength=String(this.getContentLength()),this.headers=Object.freeze({"Content-Type":this.contentType,"Content-Length":this.contentLength}),Object.defineProperties(this,{boundary:{writable:!1,configurable:!1},contentType:{writable:!1,configurable:!1},contentLength:{writable:!1,configurable:!1},headers:{writable:!1,configurable:!1}})}getContentLength(){let e=0;for(let[r,a]of Ra(this,zg,"f")){let i=(0,Ih.isFileLike)(a)?a:Ra(this,af,"f").encode((0,PH.default)(a));e+=Ra(this,H_,"m",LO).call(this,r,i).byteLength,e+=(0,Ih.isFileLike)(i)?i.size:i.byteLength,e+=Ra(this,K_,"f")}return e+Ra(this,Vg,"f").byteLength}*values(){for(let[e,r]of Ra(this,zg,"f").entries()){let a=(0,Ih.isFileLike)(r)?r:Ra(this,af,"f").encode((0,PH.default)(r));yield Ra(this,H_,"m",LO).call(this,e,a),yield a,yield Ra(this,Ug,"f")}yield Ra(this,Vg,"f")}async*encode(){for(let e of this.values())(0,Ih.isFileLike)(e)?yield*e.stream():yield e}[(od=new WeakMap,Ug=new WeakMap,K_=new WeakMap,$g=new WeakMap,af=new WeakMap,Vg=new WeakMap,zg=new WeakMap,Z_=new WeakMap,H_=new WeakSet,LO=function(r,a){let i="";return i+=`${Ra(this,$g,"f")}${this.boundary}${Ra(this,od,"f")}`,i+=`Content-Disposition: form-data; name="${(0,TH.default)(r)}"`,(0,Ih.isFileLike)(a)&&(i+=`; filename="${(0,TH.default)(a.name)}"${Ra(this,od,"f")}`,i+=`Content-Type: ${a.type||"application/octet-stream"}`),Ra(this,Z_,"f").enableAdditionalHeaders===!0&&(i+=`${Ra(this,od,"f")}Content-Length: ${(0,Ih.isFileLike)(a)?a.size:a.byteLength}`),Ra(this,af,"f").encode(`${i}${Ra(this,od,"f").repeat(2)}`)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};Xs.FormDataEncoder=J_;Xs.Encoder=J_});var kH=te(FH=>{"use strict";Object.defineProperty(FH,"__esModule",{value:!0})});var IH=te(RH=>{"use strict";Object.defineProperty(RH,"__esModule",{value:!0})});var DH=te(No=>{"use strict";var xye=No&&No.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r),Object.defineProperty(n,a,{enumerable:!0,get:function(){return e[r]}})}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Wg=No&&No.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xye(e,n,r)};Object.defineProperty(No,"__esModule",{value:!0});Wg(OH(),No);Wg(kH(),No);Wg(IH(),No);Wg(jO(),No);Wg(BO(),No)});var NH=te(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});Y_.MultipartBody=void 0;var qO=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};Y_.MultipartBody=qO});var jH=te((iqe,MH)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),e=new n().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}MH.exports=globalThis.DOMException});var BH=te(UO=>{"use strict";Object.defineProperty(UO,"__esModule",{value:!0});var wye=n=>Object.prototype.toString.call(n).slice(8,-1).toLowerCase();function Sye(n){if(wye(n)!=="object")return!1;let e=Object.getPrototypeOf(n);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}UO.default=Sye});var $H=te(Bn=>{"use strict";var Cye=Bn&&Bn.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r),Object.defineProperty(n,a,{enumerable:!0,get:function(){return e[r]}})}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Aye=Bn&&Bn.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cye(e,n,r)},LH=Bn&&Bn.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},Dh=Bn&&Bn.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},qH=Bn&&Bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},nf,Gg;Object.defineProperty(Bn,"__esModule",{value:!0});Bn.fileFromPath=Bn.fileFromPathSync=void 0;var Q_=require("fs"),Eye=require("path"),Pye=qH(jH()),Tye=Og(),Oye=qH(BH());Aye(bO(),Bn);var Fye="The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.",$O=class n{constructor(e){nf.set(this,void 0),Gg.set(this,void 0),LH(this,nf,e.path,"f"),LH(this,Gg,e.start||0,"f"),this.name=(0,Eye.basename)(Dh(this,nf,"f")),this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new n({path:Dh(this,nf,"f"),lastModified:this.lastModified,size:r-e,start:e})}async*stream(){let{mtimeMs:e}=await Q_.promises.stat(Dh(this,nf,"f"));if(e>this.lastModified)throw new Pye.default(Fye,"NotReadableError");this.size&&(yield*(0,Q_.createReadStream)(Dh(this,nf,"f"),{start:Dh(this,Gg,"f"),end:Dh(this,Gg,"f")+this.size-1}))}get[(nf=new WeakMap,Gg=new WeakMap,Symbol.toStringTag)](){return"File"}};function UH(n,{mtimeMs:e,size:r},a,i={}){let s;(0,Oye.default)(a)?[i,s]=[a,void 0]:s=a;let t=new $O({path:n,size:r,lastModified:e});return s||(s=t.name),new Tye.File([t],s,{...i,lastModified:t.lastModified})}function kye(n,e,r={}){let a=(0,Q_.statSync)(n);return UH(n,a,e,r)}Bn.fileFromPathSync=kye;async function Rye(n,e,r){let a=await Q_.promises.stat(n);return UH(n,a,e,r)}Bn.fileFromPath=Rye});var WH=te(Ys=>{"use strict";var Iye=Ys&&Ys.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Dye=Ys&&Ys.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),zO=Ys&&Ys.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Iye(e,n,r);return Dye(e,n),e},Nye=Ys&&Ys.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.getRuntime=void 0;var ex=zO(mO()),VO=zO(GG()),zH=Nye(sH()),Mye=yH(),jye=require("node:fs"),Bye=DH(),Lye=require("node:stream"),qye=NH(),Uye=require("node:stream/web"),VH=!1;async function $ye(n,...e){let{fileFromPath:r}=await Promise.resolve().then(()=>zO($H()));return VH||(console.warn(`fileFromPath is deprecated; use fs.createReadStream(${JSON.stringify(n)}) instead`),VH=!0),await r(n,...e)}var Vye=new zH.default({keepAlive:!0,timeout:5*60*1e3}),zye=new zH.default.HttpsAgent({keepAlive:!0,timeout:5*60*1e3});async function Wye(n,e){let r=new Bye.FormDataEncoder(n),a=Lye.Readable.from(r),i=new qye.MultipartBody(a),s={...e.headers,...r.headers,"Content-Length":r.contentLength};return{...e,body:i,headers:s}}function Gye(){return typeof AbortController>"u"&&(globalThis.AbortController=Mye.AbortController),{kind:"node",fetch:ex.default,Request:ex.Request,Response:ex.Response,Headers:ex.Headers,FormData:VO.FormData,Blob:VO.Blob,File:VO.File,ReadableStream:Uye.ReadableStream,getMultipartRequestOptions:Wye,getDefaultAgent:n=>n.startsWith("https")?zye:Vye,fileFromPath:$ye,isFsReadStream:n=>n instanceof jye.ReadStream}}Ys.getRuntime=Gye});var GH=te(sf=>{"use strict";var Hye=sf&&sf.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Kye=sf&&sf.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hye(e,n,r)};Object.defineProperty(sf,"__esModule",{value:!0});Kye(WH(),sf)});var Hg=te(rx=>{var tx=ZW(),Zye=GH();rx.init=()=>{tx.kind||tx.setShims(Zye.getRuntime(),{auto:!0})};for(let n of Object.keys(tx))Object.defineProperty(rx,n,{get(){return tx[n]}});rx.init()});var mi=te(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.ContentFilterFinishReasonError=sa.LengthFinishReasonError=sa.InternalServerError=sa.RateLimitError=sa.UnprocessableEntityError=sa.ConflictError=sa.NotFoundError=sa.PermissionDeniedError=sa.AuthenticationError=sa.BadRequestError=sa.APIConnectionTimeoutError=sa.APIConnectionError=sa.APIUserAbortError=sa.APIError=sa.OpenAIError=void 0;var Jye=$r(),Nh=class extends Error{};sa.OpenAIError=Nh;var is=class n extends Nh{constructor(e,r,a,i){super(`${n.makeMessage(e,r,a)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=r;let s=r;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,r,a){let i=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):a;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,a,i){if(!e||!i)return new Kg({message:a,cause:(0,Jye.castToError)(r)});let s=r?.error;return e===400?new ax(e,s,a,i):e===401?new nx(e,s,a,i):e===403?new ix(e,s,a,i):e===404?new sx(e,s,a,i):e===409?new ox(e,s,a,i):e===422?new ux(e,s,a,i):e===429?new lx(e,s,a,i):e>=500?new cx(e,s,a,i):new n(e,s,a,i)}};sa.APIError=is;var WO=class extends is{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}};sa.APIUserAbortError=WO;var Kg=class extends is{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}};sa.APIConnectionError=Kg;var GO=class extends Kg{constructor({message:e}={}){super({message:e??"Request timed out."})}};sa.APIConnectionTimeoutError=GO;var ax=class extends is{};sa.BadRequestError=ax;var nx=class extends is{};sa.AuthenticationError=nx;var ix=class extends is{};sa.PermissionDeniedError=ix;var sx=class extends is{};sa.NotFoundError=sx;var ox=class extends is{};sa.ConflictError=ox;var ux=class extends is{};sa.UnprocessableEntityError=ux;var lx=class extends is{};sa.RateLimitError=lx;var cx=class extends is{};sa.InternalServerError=cx;var HO=class extends Nh{constructor(){super("Could not parse response content as the length limit was reached")}};sa.LengthFinishReasonError=HO;var KO=class extends Nh{constructor(){super("Could not parse response content as the request was rejected by the content filter")}};sa.ContentFilterFinishReasonError=KO});var HH=te($u=>{"use strict";var dx=$u&&$u.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},of=$u&&$u.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},ss;Object.defineProperty($u,"__esModule",{value:!0});$u.findDoubleNewlineIndex=$u.LineDecoder=void 0;var ZO=mi(),Zg=class{constructor(){ss.set(this,void 0),this.buffer=new Uint8Array,dx(this,ss,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e,a=new Uint8Array(this.buffer.length+r.length);a.set(this.buffer),a.set(r,this.buffer.length),this.buffer=a;let i=[],s;for(;(s=Xye(this.buffer,of(this,ss,"f")))!=null;){if(s.carriage&&of(this,ss,"f")==null){dx(this,ss,s.index,"f");continue}if(of(this,ss,"f")!=null&&(s.index!==of(this,ss,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,of(this,ss,"f")-1))),this.buffer=this.buffer.slice(of(this,ss,"f")),dx(this,ss,null,"f");continue}let t=of(this,ss,"f")!==null?s.preceding-1:s.preceding,o=this.decodeText(this.buffer.slice(0,t));i.push(o),this.buffer=this.buffer.slice(s.index),dx(this,ss,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new ZO.OpenAIError(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ZO.OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ZO.OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};$u.LineDecoder=Zg;ss=new WeakMap;Zg.NEWLINE_CHARS=new Set([`
`,"\r"]);Zg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Xye(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Yye(n){for(let a=0;a<n.length-1;a++){if(n[a]===10&&n[a+1]===10||n[a]===13&&n[a+1]===13)return a+2;if(n[a]===13&&n[a+1]===10&&a+3<n.length&&n[a+2]===13&&n[a+3]===10)return a+4}return-1}$u.findDoubleNewlineIndex=Yye});var KH=te(px=>{"use strict";Object.defineProperty(px,"__esModule",{value:!0});px.ReadableStreamToAsyncIterable=void 0;function Qye(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}px.ReadableStreamToAsyncIterable=Qye});var fx=te(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh._iterSSEMessages=Mh.Stream=void 0;var e6e=Hg(),t6e=mi(),YO=HH(),JH=KH(),r6e=$r(),ZH=mi(),JO=class n{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let a=!1;async function*i(){if(a)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let s=!1;try{for await(let t of XH(e,r))if(!s){if(t.data.startsWith("[DONE]")){s=!0;continue}if(t.event===null||t.event.startsWith("response.")||t.event.startsWith("transcript.")){let o;try{o=JSON.parse(t.data)}catch(l){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),l}if(o&&o.error)throw new ZH.APIError(void 0,o.error,void 0,(0,r6e.createResponseHeaders)(e.headers));yield o}else{let o;try{o=JSON.parse(t.data)}catch(l){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),l}if(t.event=="error")throw new ZH.APIError(void 0,o.error,o.message,void 0);yield{event:t.event,data:o}}}s=!0}catch(t){if(t instanceof Error&&t.name==="AbortError")return;throw t}finally{s||r.abort()}}return new n(i,r)}static fromReadableStream(e,r){let a=!1;async function*i(){let t=new YO.LineDecoder,o=(0,JH.ReadableStreamToAsyncIterable)(e);for await(let l of o)for(let d of t.decode(l))yield d;for(let l of t.flush())yield l}async function*s(){if(a)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let t=!1;try{for await(let o of i())t||o&&(yield JSON.parse(o));t=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{t||r.abort()}}return new n(s,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],a=this.iterator(),i=s=>({next:()=>{if(s.length===0){let t=a.next();e.push(t),r.push(t)}return s.shift()}});return[new n(()=>i(e),this.controller),new n(()=>i(r),this.controller)]}toReadableStream(){let e=this,r,a=new TextEncoder;return new e6e.ReadableStream({async start(){r=e[Symbol.asyncIterator]()},async pull(i){try{let{value:s,done:t}=await r.next();if(t)return i.close();let o=a.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){await r.return?.()}})}};Mh.Stream=JO;async function*XH(n,e){if(!n.body)throw e.abort(),new t6e.OpenAIError("Attempted to iterate over a response with no body");let r=new XO,a=new YO.LineDecoder,i=(0,JH.ReadableStreamToAsyncIterable)(n.body);for await(let s of a6e(i))for(let t of a.decode(s)){let o=r.decode(t);o&&(yield o)}for(let s of a.flush()){let t=r.decode(s);t&&(yield t)}}Mh._iterSSEMessages=XH;async function*a6e(n){let e=new Uint8Array;for await(let r of n){if(r==null)continue;let a=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r,i=new Uint8Array(e.length+a.length);i.set(e),i.set(a,e.length),e=i;let s;for(;(s=(0,YO.findDoubleNewlineIndex)(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}var XO=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,a,i]=n6e(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}};function n6e(n,e){let r=n.indexOf(e);return r!==-1?[n.substring(0,r),e,n.substring(r+e.length)]:[n,"",""]}});var Jg=te(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.createForm=ia.multipartFormRequestOptions=ia.maybeMultipartFormRequestOptions=ia.isMultipartBody=ia.toFile=ia.isUploadable=ia.isBlobLike=ia.isFileLike=ia.isResponseLike=ia.fileFromPath=void 0;var jh=Hg(),i6e=Hg();Object.defineProperty(ia,"fileFromPath",{enumerable:!0,get:function(){return i6e.fileFromPath}});var s6e=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";ia.isResponseLike=s6e;var o6e=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&(0,ia.isBlobLike)(n);ia.isFileLike=o6e;var u6e=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function";ia.isBlobLike=u6e;var l6e=n=>(0,ia.isFileLike)(n)||(0,ia.isResponseLike)(n)||(0,jh.isFsReadStream)(n);ia.isUploadable=l6e;async function YH(n,e,r){if(n=await n,(0,ia.isFileLike)(n))return n;if((0,ia.isResponseLike)(n)){let i=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");let s=(0,ia.isBlobLike)(i)?[await i.arrayBuffer()]:[i];return new jh.File(s,e,r)}let a=await c6e(n);if(e||(e=p6e(n)??"unknown_file"),!r?.type){let i=a[0]?.type;typeof i=="string"&&(r={...r,type:i})}return new jh.File(a,e,r)}ia.toFile=YH;async function c6e(n){let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if((0,ia.isBlobLike)(n))e.push(await n.arrayBuffer());else if(f6e(n))for await(let r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${n?.constructor?.name}; props: ${d6e(n)}`);return e}function d6e(n){return`[${Object.getOwnPropertyNames(n).map(r=>`"${r}"`).join(", ")}]`}function p6e(n){return QO(n.name)||QO(n.filename)||QO(n.path)?.split(/[\\/]/).pop()}var QO=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},f6e=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",h6e=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody";ia.isMultipartBody=h6e;var m6e=async n=>{if(!eF(n.body))return n;let e=await(0,ia.createForm)(n.body);return(0,jh.getMultipartRequestOptions)(e,n)};ia.maybeMultipartFormRequestOptions=m6e;var g6e=async n=>{let e=await(0,ia.createForm)(n.body);return(0,jh.getMultipartRequestOptions)(e,n)};ia.multipartFormRequestOptions=g6e;var b6e=async n=>{let e=new jh.FormData;return await Promise.all(Object.entries(n||{}).map(([r,a])=>tF(e,r,a))),e};ia.createForm=b6e;var eF=n=>{if((0,ia.isUploadable)(n))return!0;if(Array.isArray(n))return n.some(eF);if(n&&typeof n=="object"){for(let e in n)if(eF(n[e]))return!0}return!1},tF=async(n,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")n.append(e,String(r));else if((0,ia.isUploadable)(r)){let a=await YH(r);n.append(e,a)}else if(Array.isArray(r))await Promise.all(r.map(a=>tF(n,e+"[]",a)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([a,i])=>tF(n,`${e}[${a}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}}});var $r=te(Et=>{"use strict";var v6e=Et&&Et.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},y6e=Et&&Et.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},hx;Object.defineProperty(Et,"__esModule",{value:!0});Et.isObj=Et.toFloat32Array=Et.toBase64=Et.getHeader=Et.getRequiredHeader=Et.isHeadersProtocol=Et.isRunningInBrowser=Et.debug=Et.hasOwn=Et.isEmptyObj=Et.maybeCoerceBoolean=Et.maybeCoerceFloat=Et.maybeCoerceInteger=Et.coerceBoolean=Et.coerceFloat=Et.coerceInteger=Et.readEnv=Et.ensurePresent=Et.castToError=Et.sleep=Et.safeJSON=Et.isRequestOptions=Et.createResponseHeaders=Et.PagePromise=Et.AbstractPage=Et.APIClient=Et.APIPromise=Et.createForm=Et.multipartFormRequestOptions=Et.maybeMultipartFormRequestOptions=void 0;var Bh=KW(),_6e=fx(),os=mi(),mx=Hg();(0,mx.init)();var rF=Jg(),sF=Jg();Object.defineProperty(Et,"maybeMultipartFormRequestOptions",{enumerable:!0,get:function(){return sF.maybeMultipartFormRequestOptions}});Object.defineProperty(Et,"multipartFormRequestOptions",{enumerable:!0,get:function(){return sF.multipartFormRequestOptions}});Object.defineProperty(Et,"createForm",{enumerable:!0,get:function(){return sF.createForm}});async function nK(n){let{response:e}=n;if(n.options.stream)return uf("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):_6e.Stream.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;let a=e.headers.get("content-type")?.split(";")[0]?.trim();if(a?.includes("application/json")||a?.endsWith("+json")){let t=await e.json();return uf("response",e.status,e.url,e.headers,t),iK(t,e)}let s=await e.text();return uf("response",e.status,e.url,e.headers,s),s}function iK(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Xg=class n extends Promise{constructor(e,r=nK){super(a=>{a(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new n(this.responsePromise,async r=>iK(e(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Et.APIPromise=Xg;var nF=class{constructor({baseURL:e,maxRetries:r=2,timeout:a=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=aF("maxRetries",r),this.timeout=aF("timeout",a),this.httpAgent=i,this.fetch=s??mx.fetch}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...E6e(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${q6e()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,a){return this.request(Promise.resolve(a).then(async i=>{let s=i&&(0,rF.isBlobLike)(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:e,path:r,...i,body:s}}))}getAPIList(e,r,a){return this.requestAPIList(r,{method:"get",path:e,...a})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:r=0}={}){let a={...e},{method:i,path:s,query:t,headers:o={}}=a,l=ArrayBuffer.isView(a.body)||a.__binaryRequest&&typeof a.body=="string"?a.body:(0,rF.isMultipartBody)(a.body)?a.body.body:a.body?JSON.stringify(a.body,null,2):null,d=this.calculateContentLength(l),c=this.buildURL(s,t);"timeout"in a&&aF("timeout",a.timeout),a.timeout=a.timeout??this.timeout;let y=a.httpAgent??this.httpAgent??(0,mx.getDefaultAgent)(c),u=a.timeout+1e3;typeof y?.options?.timeout=="number"&&u>(y.options.timeout??0)&&(y.options.timeout=u),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);let S=this.buildHeaders({options:a,headers:o,contentLength:d,retryCount:r});return{req:{method:i,...l&&{body:l},headers:S,...y&&{agent:y},signal:a.signal??null},url:c,timeout:a.timeout}}buildHeaders({options:e,headers:r,contentLength:a,retryCount:i}){let s={};a&&(s["content-length"]=a);let t=this.defaultHeaders(e);return rK(s,t),rK(s,r),(0,rF.isMultipartBody)(e.body)&&mx.kind!=="node"&&delete s["content-type"],(0,Et.getHeader)(t,"x-stainless-retry-count")===void 0&&(0,Et.getHeader)(r,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),(0,Et.getHeader)(t,"x-stainless-timeout")===void 0&&(0,Et.getHeader)(r,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,r),s}async prepareOptions(e){}async prepareRequest(e,{url:r,options:a}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,a,i){return os.APIError.generate(e,r,a,i)}request(e,r=null){return new Xg(this.makeRequest(e,r))}async makeRequest(e,r){let a=await e,i=a.maxRetries??this.maxRetries;r==null&&(r=i),await this.prepareOptions(a);let{req:s,url:t,timeout:o}=this.buildRequest(a,{retryCount:i-r});if(await this.prepareRequest(s,{url:t,options:a}),uf("request",t,a,s.headers),a.signal?.aborted)throw new os.APIUserAbortError;let l=new AbortController,d=await this.fetchWithTimeout(t,s,o,l).catch(Et.castToError);if(d instanceof Error){if(a.signal?.aborted)throw new os.APIUserAbortError;if(r)return this.retryRequest(a,r);throw d.name==="AbortError"?new os.APIConnectionTimeoutError:new os.APIConnectionError({cause:d})}let c=(0,Et.createResponseHeaders)(d.headers);if(!d.ok){if(r&&this.shouldRetry(d)){let z=`retrying, ${r} attempts remaining`;return uf(`response (error; ${z})`,d.status,t,c),this.retryRequest(a,r,c)}let y=await d.text().catch(z=>(0,Et.castToError)(z).message),u=(0,Et.safeJSON)(y),S=u?void 0:y;throw uf(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,d.status,t,c,S),this.makeStatusError(d.status,u,S,c)}return{response:d,options:a,controller:l}}requestAPIList(e,r){let a=this.makeRequest(r,null);return new gx(this,a,e)}buildURL(e,r){let a=O6e(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return oF(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(a.search=this.stringifyQuery(r)),a.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,a])=>typeof a<"u").map(([r,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(r)}=`;throw new os.OpenAIError(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,a,i){let{signal:s,...t}=r||{};s&&s.addEventListener("abort",()=>i.abort());let o=setTimeout(()=>i.abort(),a),l={signal:i.signal,...t};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,a){let i,s=a?.["retry-after-ms"];if(s){let o=parseFloat(s);Number.isNaN(o)||(i=o)}let t=a?.["retry-after"];if(t&&!i){let o=parseFloat(t);Number.isNaN(o)?i=Date.parse(t)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){let o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(r,o)}return await(0,Et.sleep)(i),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,t=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return t*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Bh.VERSION}`}};Et.APIClient=nF;var iF=class{constructor(e,r,a,i){hx.set(this,void 0),v6e(this,hx,e,"f"),this.options=i,this.response=r,this.body=a}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new os.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){let a=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(let[i,s]of a)e.url.searchParams.set(i,s);r.query=void 0,r.path=e.url.toString()}return await y6e(this,hx,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(hx=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}};Et.AbstractPage=iF;var gx=class extends Xg{constructor(e,r,a){super(r,async i=>new a(e,i.response,await nK(i),i.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}};Et.PagePromise=gx;var x6e=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,r){let a=r.toString();return e[a.toLowerCase()]||e[a]}});Et.createResponseHeaders=x6e;var w6e={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},S6e=n=>typeof n=="object"&&n!==null&&!oF(n)&&Object.keys(n).every(e=>uF(w6e,e));Et.isRequestOptions=S6e;var C6e=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bh.VERSION,"X-Stainless-OS":eK(Deno.build.os),"X-Stainless-Arch":QH(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bh.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bh.VERSION,"X-Stainless-OS":eK(process.platform),"X-Stainless-Arch":QH(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let n=A6e();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bh.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bh.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function A6e(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of n){let a=r.exec(navigator.userAgent);if(a){let i=a[1]||0,s=a[2]||0,t=a[3]||0;return{browser:e,version:`${i}.${s}.${t}`}}}return null}var QH=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",eK=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),tK,E6e=()=>tK??(tK=C6e()),P6e=n=>{try{return JSON.parse(n)}catch{return}};Et.safeJSON=P6e;var T6e=/^[a-z][a-z0-9+.-]*:/i,O6e=n=>T6e.test(n),F6e=n=>new Promise(e=>setTimeout(e,n));Et.sleep=F6e;var aF=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new os.OpenAIError(`${n} must be an integer`);if(e<0)throw new os.OpenAIError(`${n} must be a positive integer`);return e},k6e=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)};Et.castToError=k6e;var R6e=n=>{if(n==null)throw new os.OpenAIError(`Expected a value to be given but received ${n} instead.`);return n};Et.ensurePresent=R6e;var I6e=n=>{if(typeof process<"u")return process.env?.[n]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(n)?.trim()};Et.readEnv=I6e;var D6e=n=>{if(typeof n=="number")return Math.round(n);if(typeof n=="string")return parseInt(n,10);throw new os.OpenAIError(`Could not coerce ${n} (type: ${typeof n}) into a number`)};Et.coerceInteger=D6e;var N6e=n=>{if(typeof n=="number")return n;if(typeof n=="string")return parseFloat(n);throw new os.OpenAIError(`Could not coerce ${n} (type: ${typeof n}) into a number`)};Et.coerceFloat=N6e;var M6e=n=>typeof n=="boolean"?n:typeof n=="string"?n==="true":!!n;Et.coerceBoolean=M6e;var j6e=n=>{if(n!==void 0)return(0,Et.coerceInteger)(n)};Et.maybeCoerceInteger=j6e;var B6e=n=>{if(n!==void 0)return(0,Et.coerceFloat)(n)};Et.maybeCoerceFloat=B6e;var L6e=n=>{if(n!==void 0)return(0,Et.coerceBoolean)(n)};Et.maybeCoerceBoolean=L6e;function oF(n){if(!n)return!0;for(let e in n)return!1;return!0}Et.isEmptyObj=oF;function uF(n,e){return Object.prototype.hasOwnProperty.call(n,e)}Et.hasOwn=uF;function rK(n,e){for(let r in e){if(!uF(e,r))continue;let a=r.toLowerCase();if(!a)continue;let i=e[r];i===null?delete n[a]:i!==void 0&&(n[a]=i)}}var aK=new Set(["authorization","api-key"]);function uf(n,...e){if(typeof process<"u"&&process?.env?.DEBUG==="true"){let r=e.map(a=>{if(!a)return a;if(a.headers){let s={...a,headers:{...a.headers}};for(let t in a.headers)aK.has(t.toLowerCase())&&(s.headers[t]="REDACTED");return s}let i=null;for(let s in a)aK.has(s.toLowerCase())&&(i??(i={...a}),i[s]="REDACTED");return i??a});console.log(`OpenAI:DEBUG:${n}`,...r)}}Et.debug=uf;var q6e=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),U6e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";Et.isRunningInBrowser=U6e;var $6e=n=>typeof n?.get=="function";Et.isHeadersProtocol=$6e;var V6e=(n,e)=>{let r=(0,Et.getHeader)(n,e);if(r===void 0)throw new Error(`Could not find ${e} header`);return r};Et.getRequiredHeader=V6e;var z6e=(n,e)=>{let r=e.toLowerCase();if((0,Et.isHeadersProtocol)(n)){let a=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,s,t)=>s+t.toUpperCase());for(let i of[e,r,e.toUpperCase(),a]){let s=n.get(i);if(s)return s}}for(let[a,i]of Object.entries(n))if(a.toLowerCase()===r)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i};Et.getHeader=z6e;var W6e=n=>{if(!n)return"";if(typeof Buffer<"u")return Buffer.from(n).toString("base64");if(typeof btoa<"u")return btoa(n);throw new os.OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")};Et.toBase64=W6e;var G6e=n=>{if(typeof Buffer<"u"){let e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(n),r=e.length,a=new Uint8Array(r);for(let i=0;i<r;i++)a[i]=e.charCodeAt(i);return Array.from(new Float32Array(a.buffer))}};Et.toFloat32Array=G6e;function H6e(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}Et.isObj=H6e});var Ja=te(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.CursorPage=Lh.Page=void 0;var sK=$r(),lF=class extends sK.AbstractPage{constructor(e,r,a,i){super(e,r,a,i),this.data=a.data||[],this.object=a.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}};Lh.Page=lF;var cF=class extends sK.AbstractPage{constructor(e,r,a,i){super(e,r,a,i),this.data=a.data||[],this.has_more=a.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let r=e[e.length-1]?.id;return r?{params:{after:r}}:null}};Lh.CursorPage=cF});var tr=te(bx=>{"use strict";Object.defineProperty(bx,"__esModule",{value:!0});bx.APIResource=void 0;var dF=class{constructor(e){this._client=e}};bx.APIResource=dF});var vx=te(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.ChatCompletionStoreMessagesPage=qh.Messages=void 0;var K6e=tr(),Z6e=$r(),oK=Uh();Object.defineProperty(qh,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return oK.ChatCompletionStoreMessagesPage}});var pF=class extends K6e.APIResource{list(e,r={},a){return(0,Z6e.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/chat/completions/${e}/messages`,oK.ChatCompletionStoreMessagesPage,{query:r,...a})}};qh.Messages=pF});var Uh=te(Ui=>{"use strict";var J6e=Ui&&Ui.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),X6e=Ui&&Ui.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Y6e=Ui&&Ui.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&J6e(e,n,r);return X6e(e,n),e};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.ChatCompletionStoreMessagesPage=Ui.ChatCompletionsPage=Ui.Completions=void 0;var Q6e=tr(),e4e=$r(),t4e=Y6e(vx()),r4e=vx(),uK=Ja(),Yg=class extends Q6e.APIResource{constructor(){super(...arguments),this.messages=new t4e.Messages(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(`/chat/completions/${e}`,r)}update(e,r,a){return this._client.post(`/chat/completions/${e}`,{body:r,...a})}list(e={},r){return(0,e4e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/chat/completions",Qg,{query:e,...r})}del(e,r){return this._client.delete(`/chat/completions/${e}`,r)}};Ui.Completions=Yg;var Qg=class extends uK.CursorPage{};Ui.ChatCompletionsPage=Qg;var fF=class extends uK.CursorPage{};Ui.ChatCompletionStoreMessagesPage=fF;Yg.ChatCompletionsPage=Qg;Yg.Messages=r4e.Messages});var hF=te(Vu=>{"use strict";var a4e=Vu&&Vu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),n4e=Vu&&Vu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),i4e=Vu&&Vu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&a4e(e,n,r);return n4e(e,n),e};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.Chat=void 0;var s4e=tr(),o4e=i4e(Uh()),lK=Uh(),eb=class extends s4e.APIResource{constructor(){super(...arguments),this.completions=new o4e.Completions(this._client)}};Vu.Chat=eb;eb.Completions=lK.Completions;eb.ChatCompletionsPage=lK.ChatCompletionsPage});var cK=te(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.Messages=zu.Completions=zu.ChatCompletionsPage=zu.ChatCompletionStoreMessagesPage=void 0;var mF=Uh();Object.defineProperty(zu,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return mF.ChatCompletionStoreMessagesPage}});Object.defineProperty(zu,"ChatCompletionsPage",{enumerable:!0,get:function(){return mF.ChatCompletionsPage}});Object.defineProperty(zu,"Completions",{enumerable:!0,get:function(){return mF.Completions}});var u4e=vx();Object.defineProperty(zu,"Messages",{enumerable:!0,get:function(){return u4e.Messages}})});var dK=te(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.Completions=Wu.ChatCompletionsPage=Wu.ChatCompletionStoreMessagesPage=Wu.Chat=void 0;var l4e=hF();Object.defineProperty(Wu,"Chat",{enumerable:!0,get:function(){return l4e.Chat}});var gF=cK();Object.defineProperty(Wu,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return gF.ChatCompletionStoreMessagesPage}});Object.defineProperty(Wu,"ChatCompletionsPage",{enumerable:!0,get:function(){return gF.ChatCompletionsPage}});Object.defineProperty(Wu,"Completions",{enumerable:!0,get:function(){return gF.Completions}})});var fK=te(pK=>{"use strict";Object.defineProperty(pK,"__esModule",{value:!0})});var vF=te(yx=>{"use strict";Object.defineProperty(yx,"__esModule",{value:!0});yx.Speech=void 0;var c4e=tr(),bF=class extends c4e.APIResource{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:{Accept:"application/octet-stream",...r?.headers},__binaryResponse:!0})}};yx.Speech=bF});var _F=te(Gu=>{"use strict";var d4e=Gu&&Gu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),p4e=Gu&&Gu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),f4e=Gu&&Gu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&d4e(e,n,r);return p4e(e,n),e};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Transcriptions=void 0;var h4e=tr(),m4e=f4e($r()),yF=class extends h4e.APIResource{create(e,r){return this._client.post("/audio/transcriptions",m4e.multipartFormRequestOptions({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}}))}};Gu.Transcriptions=yF});var wF=te(Hu=>{"use strict";var g4e=Hu&&Hu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),b4e=Hu&&Hu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),v4e=Hu&&Hu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&g4e(e,n,r);return b4e(e,n),e};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Translations=void 0;var y4e=tr(),_4e=v4e($r()),xF=class extends y4e.APIResource{create(e,r){return this._client.post("/audio/translations",_4e.multipartFormRequestOptions({body:e,...r,__metadata:{model:e.model}}))}};Hu.Translations=xF});var CF=te(Ku=>{"use strict";var x4e=Ku&&Ku.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),w4e=Ku&&Ku.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),SF=Ku&&Ku.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&x4e(e,n,r);return w4e(e,n),e};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.Audio=void 0;var S4e=tr(),C4e=SF(vF()),A4e=vF(),E4e=SF(_F()),P4e=_F(),T4e=SF(wF()),O4e=wF(),$h=class extends S4e.APIResource{constructor(){super(...arguments),this.transcriptions=new E4e.Transcriptions(this._client),this.translations=new T4e.Translations(this._client),this.speech=new C4e.Speech(this._client)}};Ku.Audio=$h;$h.Transcriptions=P4e.Transcriptions;$h.Translations=O4e.Translations;$h.Speech=A4e.Speech});var AF=te(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.BatchesPage=Vh.Batches=void 0;var F4e=tr(),k4e=$r(),R4e=Ja(),_x=class extends F4e.APIResource{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(`/batches/${e}`,r)}list(e={},r){return(0,k4e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/batches",tb,{query:e,...r})}cancel(e,r){return this._client.post(`/batches/${e}/cancel`,r)}};Vh.Batches=_x;var tb=class extends R4e.CursorPage{};Vh.BatchesPage=tb;_x.BatchesPage=tb});var Ex=te(ud=>{"use strict";var Mo=ud&&ud.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},Ma=ud&&ud.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},EF,xx,wx,ab,nb,Sx,ib,Gl,sb,Cx,Ax,zh,hK;Object.defineProperty(ud,"__esModule",{value:!0});ud.EventStream=void 0;var rb=mi(),PF=class{constructor(){EF.add(this),this.controller=new AbortController,xx.set(this,void 0),wx.set(this,()=>{}),ab.set(this,()=>{}),nb.set(this,void 0),Sx.set(this,()=>{}),ib.set(this,()=>{}),Gl.set(this,{}),sb.set(this,!1),Cx.set(this,!1),Ax.set(this,!1),zh.set(this,!1),Mo(this,xx,new Promise((e,r)=>{Mo(this,wx,e,"f"),Mo(this,ab,r,"f")}),"f"),Mo(this,nb,new Promise((e,r)=>{Mo(this,Sx,e,"f"),Mo(this,ib,r,"f")}),"f"),Ma(this,xx,"f").catch(()=>{}),Ma(this,nb,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ma(this,EF,"m",hK).bind(this))},0)}_connected(){this.ended||(Ma(this,wx,"f").call(this),this._emit("connect"))}get ended(){return Ma(this,sb,"f")}get errored(){return Ma(this,Cx,"f")}get aborted(){return Ma(this,Ax,"f")}abort(){this.controller.abort()}on(e,r){return(Ma(this,Gl,"f")[e]||(Ma(this,Gl,"f")[e]=[])).push({listener:r}),this}off(e,r){let a=Ma(this,Gl,"f")[e];if(!a)return this;let i=a.findIndex(s=>s.listener===r);return i>=0&&a.splice(i,1),this}once(e,r){return(Ma(this,Gl,"f")[e]||(Ma(this,Gl,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,a)=>{Mo(this,zh,!0,"f"),e!=="error"&&this.once("error",a),this.once(e,r)})}async done(){Mo(this,zh,!0,"f"),await Ma(this,nb,"f")}_emit(e,...r){if(Ma(this,sb,"f"))return;e==="end"&&(Mo(this,sb,!0,"f"),Ma(this,Sx,"f").call(this));let a=Ma(this,Gl,"f")[e];if(a&&(Ma(this,Gl,"f")[e]=a.filter(i=>!i.once),a.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!Ma(this,zh,"f")&&!a?.length&&Promise.reject(i),Ma(this,ab,"f").call(this,i),Ma(this,ib,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!Ma(this,zh,"f")&&!a?.length&&Promise.reject(i),Ma(this,ab,"f").call(this,i),Ma(this,ib,"f").call(this,i),this._emit("end")}}_emitFinal(){}};ud.EventStream=PF;xx=new WeakMap,wx=new WeakMap,ab=new WeakMap,nb=new WeakMap,Sx=new WeakMap,ib=new WeakMap,Gl=new WeakMap,sb=new WeakMap,Cx=new WeakMap,Ax=new WeakMap,zh=new WeakMap,EF=new WeakSet,hK=function(e){if(Mo(this,Cx,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new rb.APIUserAbortError),e instanceof rb.APIUserAbortError)return Mo(this,Ax,!0,"f"),this._emit("abort",e);if(e instanceof rb.OpenAIError)return this._emit("error",e);if(e instanceof Error){let r=new rb.OpenAIError(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new rb.OpenAIError(String(e)))}});var kx=te($i=>{"use strict";var I4e=$i&&$i.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),D4e=$i&&$i.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),N4e=$i&&$i.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&I4e(e,n,r);return D4e(e,n),e},Gt=$i&&$i.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},us=$i&&$i.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},Ln,OF,Zu,Px,jo,cf,Wh,lf,Fx,ls,Tx,Ox,cb,ob,ub,mK,gK,bK,vK,yK,_K,xK;Object.defineProperty($i,"__esModule",{value:!0});$i.AssistantStream=void 0;var TF=N4e($r()),wK=fx(),lb=mi(),M4e=Ex(),db=class n extends M4e.EventStream{constructor(){super(...arguments),Ln.add(this),OF.set(this,[]),Zu.set(this,{}),Px.set(this,{}),jo.set(this,void 0),cf.set(this,void 0),Wh.set(this,void 0),lf.set(this,void 0),Fx.set(this,void 0),ls.set(this,void 0),Tx.set(this,void 0),Ox.set(this,void 0),cb.set(this,void 0)}[(OF=new WeakMap,Zu=new WeakMap,Px=new WeakMap,jo=new WeakMap,cf=new WeakMap,Wh=new WeakMap,lf=new WeakMap,Fx=new WeakMap,ls=new WeakMap,Tx=new WeakMap,Ox=new WeakMap,cb=new WeakMap,Ln=new WeakSet,Symbol.asyncIterator)](){let e=[],r=[],a=!1;return this.on("event",i=>{let s=r.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{a=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),this.on("error",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((s,t)=>r.push({resolve:s,reject:t})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let r=new n;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){let a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=wK.Stream.fromReadableStream(e,this.controller);for await(let s of i)Gt(this,Ln,"m",ob).call(this,s);if(i.controller.signal?.aborted)throw new lb.APIUserAbortError;return this._addRun(Gt(this,Ln,"m",ub).call(this))}toReadableStream(){return new wK.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,a,i,s){let t=new n;return t._run(()=>t._runToolAssistantStream(e,r,a,i,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),t}async _createToolAssistantStream(e,r,a,i,s){let t=s?.signal;t&&(t.aborted&&this.controller.abort(),t.addEventListener("abort",()=>this.controller.abort()));let o={...i,stream:!0},l=await e.submitToolOutputs(r,a,o,{...s,signal:this.controller.signal});this._connected();for await(let d of l)Gt(this,Ln,"m",ob).call(this,d);if(l.controller.signal?.aborted)throw new lb.APIUserAbortError;return this._addRun(Gt(this,Ln,"m",ub).call(this))}static createThreadAssistantStream(e,r,a){let i=new n;return i._run(()=>i._threadAssistantStream(e,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,r,a,i){let s=new n;return s._run(()=>s._runAssistantStream(e,r,a,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Gt(this,Tx,"f")}currentRun(){return Gt(this,Ox,"f")}currentMessageSnapshot(){return Gt(this,jo,"f")}currentRunStepSnapshot(){return Gt(this,cb,"f")}async finalRunSteps(){return await this.done(),Object.values(Gt(this,Zu,"f"))}async finalMessages(){return await this.done(),Object.values(Gt(this,Px,"f"))}async finalRun(){if(await this.done(),!Gt(this,cf,"f"))throw Error("Final run was not received.");return Gt(this,cf,"f")}async _createThreadAssistantStream(e,r,a){let i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let s={...r,stream:!0},t=await e.createAndRun(s,{...a,signal:this.controller.signal});this._connected();for await(let o of t)Gt(this,Ln,"m",ob).call(this,o);if(t.controller.signal?.aborted)throw new lb.APIUserAbortError;return this._addRun(Gt(this,Ln,"m",ub).call(this))}async _createAssistantStream(e,r,a,i){let s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let t={...a,stream:!0},o=await e.create(r,t,{...i,signal:this.controller.signal});this._connected();for await(let l of o)Gt(this,Ln,"m",ob).call(this,l);if(o.controller.signal?.aborted)throw new lb.APIUserAbortError;return this._addRun(Gt(this,Ln,"m",ub).call(this))}static accumulateDelta(e,r){for(let[a,i]of Object.entries(r)){if(!e.hasOwnProperty(a)){e[a]=i;continue}let s=e[a];if(s==null){e[a]=i;continue}if(a==="index"||a==="type"){e[a]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(TF.isObj(s)&&TF.isObj(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(t=>typeof t=="string"||typeof t=="number")){s.push(...i);continue}for(let t of i){if(!TF.isObj(t))throw new Error(`Expected array delta entry to be an object but got: ${t}`);let o=t.index;if(o==null)throw console.error(t),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);let l=s[o];l==null?s.push(t):s[o]=this.accumulateDelta(l,t)}continue}else throw Error(`Unhandled record type: ${a}, deltaValue: ${i}, accValue: ${s}`);e[a]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,r,a){return await this._createThreadAssistantStream(r,e,a)}async _runAssistantStream(e,r,a,i){return await this._createAssistantStream(r,e,a,i)}async _runToolAssistantStream(e,r,a,i,s){return await this._createToolAssistantStream(a,e,r,i,s)}};$i.AssistantStream=db;ob=function(e){if(!this.ended)switch(us(this,Tx,e,"f"),Gt(this,Ln,"m",bK).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Gt(this,Ln,"m",xK).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Gt(this,Ln,"m",gK).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Gt(this,Ln,"m",mK).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},ub=function(){if(this.ended)throw new lb.OpenAIError("stream has ended, this shouldn't happen");if(!Gt(this,cf,"f"))throw Error("Final run has not been received");return Gt(this,cf,"f")},mK=function(e){let[r,a]=Gt(this,Ln,"m",yK).call(this,e,Gt(this,jo,"f"));us(this,jo,r,"f"),Gt(this,Px,"f")[r.id]=r;for(let i of a){let s=r.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(let i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,t=r.content[i.index];if(t&&t.type=="text")this._emit("textDelta",s,t.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Gt(this,Wh,"f")){if(Gt(this,lf,"f"))switch(Gt(this,lf,"f").type){case"text":this._emit("textDone",Gt(this,lf,"f").text,Gt(this,jo,"f"));break;case"image_file":this._emit("imageFileDone",Gt(this,lf,"f").image_file,Gt(this,jo,"f"));break}us(this,Wh,i.index,"f")}us(this,lf,r.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Gt(this,Wh,"f")!==void 0){let i=e.data.content[Gt(this,Wh,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Gt(this,jo,"f"));break;case"text":this._emit("textDone",i.text,Gt(this,jo,"f"));break}}Gt(this,jo,"f")&&this._emit("messageDone",e.data),us(this,jo,void 0,"f")}},gK=function(e){let r=Gt(this,Ln,"m",vK).call(this,e);switch(us(this,cb,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let a=e.data.delta;if(a.step_details&&a.step_details.type=="tool_calls"&&a.step_details.tool_calls&&r.step_details.type=="tool_calls")for(let s of a.step_details.tool_calls)s.index==Gt(this,Fx,"f")?this._emit("toolCallDelta",s,r.step_details.tool_calls[s.index]):(Gt(this,ls,"f")&&this._emit("toolCallDone",Gt(this,ls,"f")),us(this,Fx,s.index,"f"),us(this,ls,r.step_details.tool_calls[s.index],"f"),Gt(this,ls,"f")&&this._emit("toolCallCreated",Gt(this,ls,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":us(this,cb,void 0,"f"),e.data.step_details.type=="tool_calls"&&Gt(this,ls,"f")&&(this._emit("toolCallDone",Gt(this,ls,"f")),us(this,ls,void 0,"f")),this._emit("runStepDone",e.data,r);break;case"thread.run.step.in_progress":break}},bK=function(e){Gt(this,OF,"f").push(e),this._emit("event",e)},vK=function(e){switch(e.event){case"thread.run.step.created":return Gt(this,Zu,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=Gt(this,Zu,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let a=e.data;if(a.delta){let i=db.accumulateDelta(r,a.delta);Gt(this,Zu,"f")[e.data.id]=i}return Gt(this,Zu,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Gt(this,Zu,"f")[e.data.id]=e.data;break}if(Gt(this,Zu,"f")[e.data.id])return Gt(this,Zu,"f")[e.data.id];throw new Error("No snapshot available")},yK=function(e,r){let a=[];switch(e.event){case"thread.message.created":return[e.data,a];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let s of i.delta.content)if(s.index in r.content){let t=r.content[s.index];r.content[s.index]=Gt(this,Ln,"m",_K).call(this,s,t)}else r.content[s.index]=s,a.push(s);return[r,a];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,a];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_K=function(e,r){return db.accumulateDelta(r,e)},xK=function(e){switch(us(this,Ox,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":us(this,cf,e.data,"f"),Gt(this,ls,"f")&&(this._emit("toolCallDone",Gt(this,ls,"f")),us(this,ls,void 0,"f"));break;case"thread.run.cancelling":break}}});var FF=te(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.AssistantsPage=Gh.Assistants=void 0;var j4e=tr(),B4e=$r(),L4e=Ja(),Rqe=kx(),Rx=class extends j4e.APIResource{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,a){return this._client.post(`/assistants/${e}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e={},r){return(0,B4e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/assistants",pb,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}};Gh.Assistants=Rx;var pb=class extends L4e.CursorPage{};Gh.AssistantsPage=pb;Rx.AssistantsPage=pb});var IF=te(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.ParsingToolFunction=ld.ParsingFunction=ld.isRunnableFunctionWithParse=void 0;function q4e(n){return typeof n.parse=="function"}ld.isRunnableFunctionWithParse=q4e;var kF=class{constructor(e){this.function=e.function,this.parse=e.parse,this.parameters=e.parameters,this.description=e.description,this.name=e.name}};ld.ParsingFunction=kF;var RF=class{constructor(e){this.type="function",this.function=e}};ld.ParsingToolFunction=RF});var DF=te(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.isPresent=Ju.isToolMessage=Ju.isFunctionMessage=Ju.isAssistantMessage=void 0;var U4e=n=>n?.role==="assistant";Ju.isAssistantMessage=U4e;var $4e=n=>n?.role==="function";Ju.isFunctionMessage=$4e;var V4e=n=>n?.role==="tool";Ju.isToolMessage=V4e;function z4e(n){return n!=null}Ju.isPresent=z4e});var Hh=te(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.validateInputTools=za.hasAutoParseableInput=za.shouldParseToolCall=za.parseChatCompletion=za.maybeParseChatCompletion=za.isAutoParsableTool=za.makeParseableTool=za.isAutoParsableResponseFormat=za.makeParseableTextFormat=za.makeParseableResponseFormat=void 0;var Ix=mi();function W4e(n,e){let r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}za.makeParseableResponseFormat=W4e;function G4e(n,e){let r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),r}za.makeParseableTextFormat=G4e;function SK(n){return n?.$brand==="auto-parseable-response-format"}za.isAutoParsableResponseFormat=SK;function H4e(n,{parser:e,callback:r}){let a={...n};return Object.defineProperties(a,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:r,enumerable:!1}}),a}za.makeParseableTool=H4e;function Dx(n){return n?.$brand==="auto-parseable-tool"}za.isAutoParsableTool=Dx;function K4e(n,e){return!e||!AK(e)?{...n,choices:n.choices.map(r=>({...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:CK(n,e)}za.maybeParseChatCompletion=K4e;function CK(n,e){let r=n.choices.map(a=>{if(a.finish_reason==="length")throw new Ix.LengthFinishReasonError;if(a.finish_reason==="content_filter")throw new Ix.ContentFilterFinishReasonError;return{...a,message:{...a.message,...a.message.tool_calls?{tool_calls:a.message.tool_calls?.map(i=>J4e(e,i))??void 0}:void 0,parsed:a.message.content&&!a.message.refusal?Z4e(e,a.message.content):null}}});return{...n,choices:r}}za.parseChatCompletion=CK;function Z4e(n,e){return n.response_format?.type!=="json_schema"?null:n.response_format?.type==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function J4e(n,e){let r=n.tools?.find(a=>a.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Dx(r)?r.$parseRaw(e.function.arguments):r?.function.strict?JSON.parse(e.function.arguments):null}}}function X4e(n,e){if(!n)return!1;let r=n.tools?.find(a=>a.function?.name===e.function.name);return Dx(r)||r?.function.strict||!1}za.shouldParseToolCall=X4e;function AK(n){return SK(n.response_format)?!0:n.tools?.some(e=>Dx(e)||e.type==="function"&&e.function.strict===!0)??!1}za.hasAutoParseableInput=AK;function Y4e(n){for(let e of n??[]){if(e.type!=="function")throw new Ix.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ix.OpenAIError(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}za.validateInputTools=Y4e});var UF=te(Zh=>{"use strict";var Vi=Zh&&Zh.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},Xn,NF,Nx,MF,jF,BF,OK,LF;Object.defineProperty(Zh,"__esModule",{value:!0});Zh.AbstractChatCompletionRunner=void 0;var Kh=mi(),EK=IF(),Hl=DF(),Q4e=Ex(),PK=Hh(),TK=10,qF=class extends Q4e.EventStream{constructor(){super(...arguments),Xn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let r=e.choices[0]?.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),((0,Hl.isFunctionMessage)(e)||(0,Hl.isToolMessage)(e))&&e.content)this._emit("functionCallResult",e.content);else if((0,Hl.isAssistantMessage)(e)&&e.function_call)this._emit("functionCall",e.function_call);else if((0,Hl.isAssistantMessage)(e)&&e.tool_calls)for(let a of e.tool_calls)a.type==="function"&&this._emit("functionCall",a.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Kh.OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Vi(this,Xn,"m",NF).call(this)}async finalMessage(){return await this.done(),Vi(this,Xn,"m",Nx).call(this)}async finalFunctionCall(){return await this.done(),Vi(this,Xn,"m",MF).call(this)}async finalFunctionCallResult(){return await this.done(),Vi(this,Xn,"m",jF).call(this)}async totalUsage(){return await this.done(),Vi(this,Xn,"m",BF).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let r=Vi(this,Xn,"m",Nx).call(this);r&&this._emit("finalMessage",r);let a=Vi(this,Xn,"m",NF).call(this);a&&this._emit("finalContent",a);let i=Vi(this,Xn,"m",MF).call(this);i&&this._emit("finalFunctionCall",i);let s=Vi(this,Xn,"m",jF).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(t=>t.usage)&&this._emit("totalUsage",Vi(this,Xn,"m",BF).call(this))}async _createChatCompletion(e,r,a){let i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Vi(this,Xn,"m",OK).call(this,r);let s=await e.chat.completions.create({...r,stream:!1},{...a,signal:this.controller.signal});return this._connected(),this._addChatCompletion((0,PK.parseChatCompletion)(s,r))}async _runChatCompletion(e,r,a){for(let i of r.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,r,a)}async _runFunctions(e,r,a){let i="function",{function_call:s="auto",stream:t,...o}=r,l=typeof s!="string"&&s?.name,{maxChatCompletions:d=TK}=a||{},c={};for(let u of r.functions)c[u.name||u.function.name]=u;let y=r.functions.map(u=>({name:u.name||u.function.name,parameters:u.parameters,description:u.description}));for(let u of r.messages)this._addMessage(u,!1);for(let u=0;u<d;++u){let V=(await this._createChatCompletion(e,{...o,function_call:s,functions:y,messages:[...this.messages]},a)).choices[0]?.message;if(!V)throw new Kh.OpenAIError("missing message in ChatCompletion response");if(!V.function_call)return;let{name:U,arguments:z}=V.function_call,D=c[U];if(D){if(l&&l!==U){let g=`Invalid function_call: ${JSON.stringify(U)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:U,content:g});continue}}else{let g=`Invalid function_call: ${JSON.stringify(U)}. Available options are: ${y.map(m=>JSON.stringify(m.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:U,content:g});continue}let k;try{k=(0,EK.isRunnableFunctionWithParse)(D)?await D.parse(z):z}catch(g){this._addMessage({role:i,name:U,content:g instanceof Error?g.message:String(g)});continue}let T=await D.function(k,this),R=Vi(this,Xn,"m",LF).call(this,T);if(this._addMessage({role:i,name:U,content:R}),l)return}}async _runTools(e,r,a){let i="tool",{tool_choice:s="auto",stream:t,...o}=r,l=typeof s!="string"&&s?.function?.name,{maxChatCompletions:d=TK}=a||{},c=r.tools.map(S=>{if((0,PK.isAutoParsableTool)(S)){if(!S.$callback)throw new Kh.OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),y={};for(let S of c)S.type==="function"&&(y[S.function.name||S.function.function.name]=S.function);let u="tools"in r?c.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(let S of r.messages)this._addMessage(S,!1);for(let S=0;S<d;++S){let U=(await this._createChatCompletion(e,{...o,tool_choice:s,tools:u,messages:[...this.messages]},a)).choices[0]?.message;if(!U)throw new Kh.OpenAIError("missing message in ChatCompletion response");if(!U.tool_calls?.length)return;for(let z of U.tool_calls){if(z.type!=="function")continue;let D=z.id,{name:k,arguments:T}=z.function,R=y[k];if(R){if(l&&l!==k){let b=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:D,content:b});continue}}else{let b=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(y).map(f=>JSON.stringify(f)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:D,content:b});continue}let g;try{g=(0,EK.isRunnableFunctionWithParse)(R)?await R.parse(T):T}catch(b){let f=b instanceof Error?b.message:String(b);this._addMessage({role:i,tool_call_id:D,content:f});continue}let m=await R.function(g,this),v=Vi(this,Xn,"m",LF).call(this,m);if(this._addMessage({role:i,tool_call_id:D,content:v}),l)return}}}};Zh.AbstractChatCompletionRunner=qF;Xn=new WeakSet,NF=function(){return Vi(this,Xn,"m",Nx).call(this).content??null},Nx=function(){let e=this.messages.length;for(;e-- >0;){let r=this.messages[e];if((0,Hl.isAssistantMessage)(r)){let{function_call:a,...i}=r,s={...i,content:r.content??null,refusal:r.refusal??null};return a&&(s.function_call=a),s}}throw new Kh.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},MF=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if((0,Hl.isAssistantMessage)(r)&&r?.function_call)return r.function_call;if((0,Hl.isAssistantMessage)(r)&&r?.tool_calls?.length)return r.tool_calls.at(-1)?.function}},jF=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if((0,Hl.isFunctionMessage)(r)&&r.content!=null||(0,Hl.isToolMessage)(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(a=>a.role==="assistant"&&a.tool_calls?.some(i=>i.type==="function"&&i.id===r.tool_call_id)))return r.content}},BF=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},OK=function(e){if(e.n!=null&&e.n>1)throw new Kh.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},LF=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)}});var VF=te(Mx=>{"use strict";Object.defineProperty(Mx,"__esModule",{value:!0});Mx.ChatCompletionRunner=void 0;var e3e=UF(),t3e=DF(),$F=class n extends e3e.AbstractChatCompletionRunner{static runFunctions(e,r,a){let i=new n,s={...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,s)),i}static runTools(e,r,a){let i=new n,s={...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,s)),i}_addMessage(e,r=!0){super._addMessage(e,r),(0,t3e.isAssistantMessage)(e)&&e.content&&this._emit("content",e.content)}};Mx.ChatCompletionRunner=$F});var VK=te(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.MalformedJSON=cd.PartialJSON=cd.partialParse=void 0;var FK=1,kK=2,RK=4,IK=8,DK=16,NK=32,MK=64,jK=128,BK=256,LK=jK|BK,qK=DK|NK|LK|MK,UK=FK|kK|qK,$K=RK|IK,r3e=UK|$K,Sn={STR:FK,NUM:kK,ARR:RK,OBJ:IK,NULL:DK,BOOL:NK,NAN:MK,INFINITY:jK,MINUS_INFINITY:BK,INF:LK,SPECIAL:qK,ATOM:UK,COLLECTION:$K,ALL:r3e},jx=class extends Error{};cd.PartialJSON=jx;var Bx=class extends Error{};cd.MalformedJSON=Bx;function a3e(n,e=Sn.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return n3e(n.trim(),e)}var n3e=(n,e)=>{let r=n.length,a=0,i=u=>{throw new jx(`${u} at position ${a}`)},s=u=>{throw new Bx(`${u} at position ${a}`)},t=()=>(y(),a>=r&&i("Unexpected end of input"),n[a]==='"'?o():n[a]==="{"?l():n[a]==="["?d():n.substring(a,a+4)==="null"||Sn.NULL&e&&r-a<4&&"null".startsWith(n.substring(a))?(a+=4,null):n.substring(a,a+4)==="true"||Sn.BOOL&e&&r-a<4&&"true".startsWith(n.substring(a))?(a+=4,!0):n.substring(a,a+5)==="false"||Sn.BOOL&e&&r-a<5&&"false".startsWith(n.substring(a))?(a+=5,!1):n.substring(a,a+8)==="Infinity"||Sn.INFINITY&e&&r-a<8&&"Infinity".startsWith(n.substring(a))?(a+=8,1/0):n.substring(a,a+9)==="-Infinity"||Sn.MINUS_INFINITY&e&&1<r-a&&r-a<9&&"-Infinity".startsWith(n.substring(a))?(a+=9,-1/0):n.substring(a,a+3)==="NaN"||Sn.NAN&e&&r-a<3&&"NaN".startsWith(n.substring(a))?(a+=3,NaN):c()),o=()=>{let u=a,S=!1;for(a++;a<r&&(n[a]!=='"'||S&&n[a-1]==="\\");)S=n[a]==="\\"?!S:!1,a++;if(n.charAt(a)=='"')try{return JSON.parse(n.substring(u,++a-Number(S)))}catch(V){s(String(V))}else if(Sn.STR&e)try{return JSON.parse(n.substring(u,a-Number(S))+'"')}catch{return JSON.parse(n.substring(u,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{a++,y();let u={};try{for(;n[a]!=="}";){if(y(),a>=r&&Sn.OBJ&e)return u;let S=o();y(),a++;try{let V=t();Object.defineProperty(u,S,{value:V,writable:!0,enumerable:!0,configurable:!0})}catch(V){if(Sn.OBJ&e)return u;throw V}y(),n[a]===","&&a++}}catch{if(Sn.OBJ&e)return u;i("Expected '}' at end of object")}return a++,u},d=()=>{a++;let u=[];try{for(;n[a]!=="]";)u.push(t()),y(),n[a]===","&&a++}catch{if(Sn.ARR&e)return u;i("Expected ']' at end of array")}return a++,u},c=()=>{if(a===0){n==="-"&&Sn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(S){if(Sn.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}s(String(S))}}let u=a;for(n[a]==="-"&&a++;n[a]&&!",]}".includes(n[a]);)a++;a==r&&!(Sn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(u,a))}catch{n.substring(u,a)==="-"&&Sn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(u,n.lastIndexOf("e")))}catch(V){s(String(V))}}},y=()=>{for(;a<r&&` 
\r	`.includes(n[a]);)a++};return t()},i3e=n=>a3e(n,Sn.ALL^Sn.NUM);cd.partialParse=i3e});var $x=te(pd=>{"use strict";var Jh=pd&&pd.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},ha=pd&&pd.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},mn,Kl,Xh,dd,zF,Lx,WF,GF,HF,qx,KF,zK;Object.defineProperty(pd,"__esModule",{value:!0});pd.ChatCompletionStream=void 0;var zi=mi(),s3e=UF(),WK=fx(),fb=Hh(),GK=VK(),ZF=class n extends s3e.AbstractChatCompletionRunner{constructor(e){super(),mn.add(this),Kl.set(this,void 0),Xh.set(this,void 0),dd.set(this,void 0),Jh(this,Kl,e,"f"),Jh(this,Xh,[],"f")}get currentChatCompletionSnapshot(){return ha(this,dd,"f")}static fromReadableStream(e){let r=new n(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,a){let i=new n(r);return i._run(()=>i._runChatCompletion(e,{...r,stream:!0},{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,r,a){super._createChatCompletion;let i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ha(this,mn,"m",zF).call(this);let s=await e.chat.completions.create({...r,stream:!0},{...a,signal:this.controller.signal});this._connected();for await(let t of s)ha(this,mn,"m",WF).call(this,t);if(s.controller.signal?.aborted)throw new zi.APIUserAbortError;return this._addChatCompletion(ha(this,mn,"m",qx).call(this))}async _fromReadableStream(e,r){let a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),ha(this,mn,"m",zF).call(this),this._connected();let i=WK.Stream.fromReadableStream(e,this.controller),s;for await(let t of i)s&&s!==t.id&&this._addChatCompletion(ha(this,mn,"m",qx).call(this)),ha(this,mn,"m",WF).call(this,t),s=t.id;if(i.controller.signal?.aborted)throw new zi.APIUserAbortError;return this._addChatCompletion(ha(this,mn,"m",qx).call(this))}[(Kl=new WeakMap,Xh=new WeakMap,dd=new WeakMap,mn=new WeakSet,zF=function(){this.ended||Jh(this,dd,void 0,"f")},Lx=function(r){let a=ha(this,Xh,"f")[r.index];return a||(a={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ha(this,Xh,"f")[r.index]=a,a)},WF=function(r){if(this.ended)return;let a=ha(this,mn,"m",zK).call(this,r);this._emit("chunk",r,a);for(let i of r.choices){let s=a.choices[i.index];i.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),i.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),i.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),i.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});let t=ha(this,mn,"m",Lx).call(this,s);s.finish_reason&&(ha(this,mn,"m",HF).call(this,s),t.current_tool_call_index!=null&&ha(this,mn,"m",GF).call(this,s,t.current_tool_call_index));for(let o of i.delta.tool_calls??[])t.current_tool_call_index!==o.index&&(ha(this,mn,"m",HF).call(this,s),t.current_tool_call_index!=null&&ha(this,mn,"m",GF).call(this,s,t.current_tool_call_index)),t.current_tool_call_index=o.index;for(let o of i.delta.tool_calls??[]){let l=s.message.tool_calls?.[o.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:o.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(l?.type,void 0))}}},GF=function(r,a){if(ha(this,mn,"m",Lx).call(this,r).done_tool_calls.has(a))return;let s=r.message.tool_calls?.[a];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){let t=ha(this,Kl,"f")?.tools?.find(o=>o.type==="function"&&o.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:a,arguments:s.function.arguments,parsed_arguments:(0,fb.isAutoParsableTool)(t)?t.$parseRaw(s.function.arguments):t?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},HF=function(r){let a=ha(this,mn,"m",Lx).call(this,r);if(r.message.content&&!a.content_done){a.content_done=!0;let i=ha(this,mn,"m",KF).call(this);this._emit("content.done",{content:r.message.content,parsed:i?i.$parseRaw(r.message.content):null})}r.message.refusal&&!a.refusal_done&&(a.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!a.logprobs_content_done&&(a.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!a.logprobs_refusal_done&&(a.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},qx=function(){if(this.ended)throw new zi.OpenAIError("stream has ended, this shouldn't happen");let r=ha(this,dd,"f");if(!r)throw new zi.OpenAIError("request ended without sending any chunks");return Jh(this,dd,void 0,"f"),Jh(this,Xh,[],"f"),o3e(r,ha(this,Kl,"f"))},KF=function(){let r=ha(this,Kl,"f")?.response_format;return(0,fb.isAutoParsableResponseFormat)(r)?r:null},zK=function(r){var a,i,s,t;let o=ha(this,dd,"f"),{choices:l,...d}=r;o?Object.assign(o,d):o=Jh(this,dd,{...d,choices:[]},"f");for(let{delta:c,finish_reason:y,index:u,logprobs:S=null,...V}of r.choices){let U=o.choices[u];if(U||(U=o.choices[u]={finish_reason:y,index:u,message:{},logprobs:S,...V}),S)if(!U.logprobs)U.logprobs=Object.assign({},S);else{let{content:m,refusal:v,...b}=S;Object.assign(U.logprobs,b),m&&((a=U.logprobs).content??(a.content=[]),U.logprobs.content.push(...m)),v&&((i=U.logprobs).refusal??(i.refusal=[]),U.logprobs.refusal.push(...v))}if(y&&(U.finish_reason=y,ha(this,Kl,"f")&&(0,fb.hasAutoParseableInput)(ha(this,Kl,"f")))){if(y==="length")throw new zi.LengthFinishReasonError;if(y==="content_filter")throw new zi.ContentFilterFinishReasonError}if(Object.assign(U,V),!c)continue;let{content:z,refusal:D,function_call:k,role:T,tool_calls:R,...g}=c;if(Object.assign(U.message,g),D&&(U.message.refusal=(U.message.refusal||"")+D),T&&(U.message.role=T),k&&(U.message.function_call?(k.name&&(U.message.function_call.name=k.name),k.arguments&&((s=U.message.function_call).arguments??(s.arguments=""),U.message.function_call.arguments+=k.arguments)):U.message.function_call=k),z&&(U.message.content=(U.message.content||"")+z,!U.message.refusal&&ha(this,mn,"m",KF).call(this)&&(U.message.parsed=(0,GK.partialParse)(U.message.content))),R){U.message.tool_calls||(U.message.tool_calls=[]);for(let{index:m,id:v,type:b,function:f,...p}of R){let h=(t=U.message.tool_calls)[m]??(t[m]={});Object.assign(h,p),v&&(h.id=v),b&&(h.type=b),f&&(h.function??(h.function={name:f.name??"",arguments:""})),f?.name&&(h.function.name=f.name),f?.arguments&&(h.function.arguments+=f.arguments,(0,fb.shouldParseToolCall)(ha(this,Kl,"f"),h)&&(h.function.parsed_arguments=(0,GK.partialParse)(h.function.arguments)))}}}return o},Symbol.asyncIterator)](){let e=[],r=[],a=!1;return this.on("chunk",i=>{let s=r.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{a=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),this.on("error",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((s,t)=>r.push({resolve:s,reject:t})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new WK.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};pd.ChatCompletionStream=ZF;function o3e(n,e){let{id:r,choices:a,created:i,model:s,system_fingerprint:t,...o}=n,l={...o,id:r,choices:a.map(({message:d,finish_reason:c,index:y,logprobs:u,...S})=>{if(!c)throw new zi.OpenAIError(`missing finish_reason for choice ${y}`);let{content:V=null,function_call:U,tool_calls:z,...D}=d,k=d.role;if(!k)throw new zi.OpenAIError(`missing role for choice ${y}`);if(U){let{arguments:T,name:R}=U;if(T==null)throw new zi.OpenAIError(`missing function_call.arguments for choice ${y}`);if(!R)throw new zi.OpenAIError(`missing function_call.name for choice ${y}`);return{...S,message:{content:V,function_call:{arguments:T,name:R},role:k,refusal:d.refusal??null},finish_reason:c,index:y,logprobs:u}}return z?{...S,index:y,finish_reason:c,logprobs:u,message:{...D,role:k,content:V,refusal:d.refusal??null,tool_calls:z.map((T,R)=>{let{function:g,type:m,id:v,...b}=T,{arguments:f,name:p,...h}=g||{};if(v==null)throw new zi.OpenAIError(`missing choices[${y}].tool_calls[${R}].id
${Ux(n)}`);if(m==null)throw new zi.OpenAIError(`missing choices[${y}].tool_calls[${R}].type
${Ux(n)}`);if(p==null)throw new zi.OpenAIError(`missing choices[${y}].tool_calls[${R}].function.name
${Ux(n)}`);if(f==null)throw new zi.OpenAIError(`missing choices[${y}].tool_calls[${R}].function.arguments
${Ux(n)}`);return{...b,id:v,type:m,function:{...h,name:p,arguments:f}}})}}:{...S,message:{...D,content:V,role:k,refusal:d.refusal??null},finish_reason:c,index:y,logprobs:u}}),created:i,model:s,object:"chat.completion",...t?{system_fingerprint:t}:{}};return(0,fb.maybeParseChatCompletion)(l,e)}function Ux(n){return JSON.stringify(n)}});var XF=te(Vx=>{"use strict";Object.defineProperty(Vx,"__esModule",{value:!0});Vx.ChatCompletionStreamingRunner=void 0;var u3e=$x(),JF=class n extends u3e.ChatCompletionStream{static fromReadableStream(e){let r=new n(null);return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,a){let i=new n(null),s={...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,s)),i}static runTools(e,r,a){let i=new n(r),s={...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,s)),i}};Vx.ChatCompletionStreamingRunner=JF});var XK=te(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Completions=Wi.ChatCompletionRunner=Wi.ChatCompletionStream=Wi.ParsingToolFunction=Wi.ParsingFunction=Wi.ChatCompletionStreamingRunner=void 0;var l3e=tr(),HK=VF(),KK=XF(),c3e=$x(),ZK=Hh(),d3e=XF();Object.defineProperty(Wi,"ChatCompletionStreamingRunner",{enumerable:!0,get:function(){return d3e.ChatCompletionStreamingRunner}});var JK=IF();Object.defineProperty(Wi,"ParsingFunction",{enumerable:!0,get:function(){return JK.ParsingFunction}});Object.defineProperty(Wi,"ParsingToolFunction",{enumerable:!0,get:function(){return JK.ParsingToolFunction}});var p3e=$x();Object.defineProperty(Wi,"ChatCompletionStream",{enumerable:!0,get:function(){return p3e.ChatCompletionStream}});var f3e=VF();Object.defineProperty(Wi,"ChatCompletionRunner",{enumerable:!0,get:function(){return f3e.ChatCompletionRunner}});var YF=class extends l3e.APIResource{parse(e,r){return(0,ZK.validateInputTools)(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(a=>(0,ZK.parseChatCompletion)(a,e))}runFunctions(e,r){return e.stream?KK.ChatCompletionStreamingRunner.runFunctions(this._client,e,r):HK.ChatCompletionRunner.runFunctions(this._client,e,r)}runTools(e,r){return e.stream?KK.ChatCompletionStreamingRunner.runTools(this._client,e,r):HK.ChatCompletionRunner.runTools(this._client,e,r)}stream(e,r){return c3e.ChatCompletionStream.createChatCompletion(this._client,e,r)}};Wi.Completions=YF});var QF=te(Qs=>{"use strict";var h3e=Qs&&Qs.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),m3e=Qs&&Qs.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),g3e=Qs&&Qs.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&h3e(e,n,r);return m3e(e,n),e};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.Chat=void 0;var b3e=tr(),YK=g3e(XK()),zx=class extends b3e.APIResource{constructor(){super(...arguments),this.completions=new YK.Completions(this._client)}};Qs.Chat=zx;(function(n){n.Completions=YK.Completions})(zx=Qs.Chat||(Qs.Chat={}))});var tk=te(Wx=>{"use strict";Object.defineProperty(Wx,"__esModule",{value:!0});Wx.Sessions=void 0;var v3e=tr(),ek=class extends v3e.APIResource{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}};Wx.Sessions=ek});var ak=te(Gx=>{"use strict";Object.defineProperty(Gx,"__esModule",{value:!0});Gx.TranscriptionSessions=void 0;var y3e=tr(),rk=class extends y3e.APIResource{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}};Gx.TranscriptionSessions=rk});var nk=te(Xu=>{"use strict";var _3e=Xu&&Xu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),x3e=Xu&&Xu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),QK=Xu&&Xu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&_3e(e,n,r);return x3e(e,n),e};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.Realtime=void 0;var w3e=tr(),S3e=QK(tk()),C3e=tk(),A3e=QK(ak()),E3e=ak(),hb=class extends w3e.APIResource{constructor(){super(...arguments),this.sessions=new S3e.Sessions(this._client),this.transcriptionSessions=new A3e.TranscriptionSessions(this._client)}};Xu.Realtime=hb;hb.Sessions=C3e.Sessions;hb.TranscriptionSessions=E3e.TranscriptionSessions});var ik=te(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.MessagesPage=Yh.Messages=void 0;var P3e=tr(),T3e=$r(),O3e=Ja(),Hx=class extends P3e.APIResource{create(e,r,a){return this._client.post(`/threads/${e}/messages`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}retrieve(e,r,a){return this._client.get(`/threads/${e}/messages/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}update(e,r,a,i){return this._client.post(`/threads/${e}/messages/${r}`,{body:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,r={},a){return(0,T3e.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,mb,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}del(e,r,a){return this._client.delete(`/threads/${e}/messages/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}};Yh.Messages=Hx;var mb=class extends O3e.CursorPage{};Yh.MessagesPage=mb;Hx.MessagesPage=mb});var sk=te(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.RunStepsPage=Qh.Steps=void 0;var F3e=tr(),eZ=$r(),k3e=Ja(),Kx=class extends F3e.APIResource{retrieve(e,r,a,i={},s){return(0,eZ.isRequestOptions)(i)?this.retrieve(e,r,a,{},i):this._client.get(`/threads/${e}/runs/${r}/steps/${a}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,r,a={},i){return(0,eZ.isRequestOptions)(a)?this.list(e,r,{},a):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,gb,{query:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}};Qh.Steps=Kx;var gb=class extends k3e.CursorPage{};Qh.RunStepsPage=gb;Kx.RunStepsPage=gb});var uk=te(eo=>{"use strict";var R3e=eo&&eo.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),I3e=eo&&eo.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),D3e=eo&&eo.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&R3e(e,n,r);return I3e(e,n),e};Object.defineProperty(eo,"__esModule",{value:!0});eo.RunsPage=eo.Runs=void 0;var N3e=tr(),M3e=$r(),ok=kx(),j3e=$r(),B3e=D3e(sk()),tZ=sk(),L3e=Ja(),em=class extends N3e.APIResource{constructor(){super(...arguments),this.steps=new B3e.Steps(this._client)}create(e,r,a){let{include:i,...s}=r;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers},stream:r.stream??!1})}retrieve(e,r,a){return this._client.get(`/threads/${e}/runs/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}update(e,r,a,i){return this._client.post(`/threads/${e}/runs/${r}`,{body:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,r={},a){return(0,M3e.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,bb,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}cancel(e,r,a){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}async createAndPoll(e,r,a){let i=await this.create(e,r,a);return await this.poll(e,i.id,a)}createAndStream(e,r,a){return ok.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,r,a)}async poll(e,r,a){let i={...a?.headers,"X-Stainless-Poll-Helper":"true"};for(a?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){let{data:s,response:t}=await this.retrieve(e,r,{...a,headers:{...a?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(a?.pollIntervalMs)o=a.pollIntervalMs;else{let l=t.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(o=d)}}await(0,j3e.sleep)(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,r,a){return ok.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,r,a)}submitToolOutputs(e,r,a,i){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:a.stream??!1})}async submitToolOutputsAndPoll(e,r,a,i){let s=await this.submitToolOutputs(e,r,a,i);return await this.poll(e,s.id,i)}submitToolOutputsStream(e,r,a,i){return ok.AssistantStream.createToolAssistantStream(e,r,this._client.beta.threads.runs,a,i)}};eo.Runs=em;var bb=class extends L3e.CursorPage{};eo.RunsPage=bb;em.RunsPage=bb;em.Steps=tZ.Steps;em.RunStepsPage=tZ.RunStepsPage});var lk=te(Yu=>{"use strict";var q3e=Yu&&Yu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),U3e=Yu&&Yu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),rZ=Yu&&Yu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&q3e(e,n,r);return U3e(e,n),e};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Threads=void 0;var $3e=tr(),V3e=$r(),z3e=kx(),W3e=rZ(ik()),aZ=ik(),G3e=rZ(uk()),nZ=uk(),df=class extends $3e.APIResource{constructor(){super(...arguments),this.runs=new G3e.Runs(this._client),this.messages=new W3e.Messages(this._client)}create(e={},r){return(0,V3e.isRequestOptions)(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,a){return this._client.post(`/threads/${e}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:e.stream??!1})}async createAndRunPoll(e,r){let a=await this.createAndRun(e,r);return await this.runs.poll(a.thread_id,a.id,r)}createAndRunStream(e,r){return z3e.AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,r)}};Yu.Threads=df;df.Runs=nZ.Runs;df.RunsPage=nZ.RunsPage;df.Messages=aZ.Messages;df.MessagesPage=aZ.MessagesPage});var ck=te(Qu=>{"use strict";var H3e=Qu&&Qu.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),K3e=Qu&&Qu.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Zx=Qu&&Qu.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&H3e(e,n,r);return K3e(e,n),e};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.Beta=void 0;var Z3e=tr(),J3e=Zx(FF()),X3e=Zx(QF()),iZ=FF(),Y3e=Zx(nk()),Q3e=nk(),e_e=Zx(lk()),t_e=lk(),Xqe=QF(),pf=class extends Z3e.APIResource{constructor(){super(...arguments),this.realtime=new Y3e.Realtime(this._client),this.chat=new X3e.Chat(this._client),this.assistants=new J3e.Assistants(this._client),this.threads=new e_e.Threads(this._client)}};Qu.Beta=pf;pf.Realtime=Q3e.Realtime;pf.Assistants=iZ.Assistants;pf.AssistantsPage=iZ.AssistantsPage;pf.Threads=t_e.Threads});var pk=te(Jx=>{"use strict";Object.defineProperty(Jx,"__esModule",{value:!0});Jx.Completions=void 0;var r_e=tr(),dk=class extends r_e.APIResource{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}};Jx.Completions=dk});var hk=te(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0});Xx.Content=void 0;var a_e=tr(),fk=class extends a_e.APIResource{retrieve(e,r,a){return this._client.get(`/containers/${e}/files/${r}/content`,{...a,headers:{Accept:"application/binary",...a?.headers},__binaryResponse:!0})}};Xx.Content=fk});var mk=te(to=>{"use strict";var n_e=to&&to.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),i_e=to&&to.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),sZ=to&&to.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&n_e(e,n,r);return i_e(e,n),e};Object.defineProperty(to,"__esModule",{value:!0});to.FileListResponsesPage=to.Files=void 0;var s_e=tr(),o_e=$r(),u_e=sZ($r()),l_e=sZ(hk()),c_e=hk(),d_e=Ja(),vb=class extends s_e.APIResource{constructor(){super(...arguments),this.content=new l_e.Content(this._client)}create(e,r,a){return this._client.post(`/containers/${e}/files`,u_e.multipartFormRequestOptions({body:r,...a}))}retrieve(e,r,a){return this._client.get(`/containers/${e}/files/${r}`,a)}list(e,r={},a){return(0,o_e.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/containers/${e}/files`,yb,{query:r,...a})}del(e,r,a){return this._client.delete(`/containers/${e}/files/${r}`,{...a,headers:{Accept:"*/*",...a?.headers}})}};to.Files=vb;var yb=class extends d_e.CursorPage{};to.FileListResponsesPage=yb;vb.FileListResponsesPage=yb;vb.Content=c_e.Content});var gk=te(ro=>{"use strict";var p_e=ro&&ro.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),f_e=ro&&ro.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),h_e=ro&&ro.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&p_e(e,n,r);return f_e(e,n),e};Object.defineProperty(ro,"__esModule",{value:!0});ro.ContainerListResponsesPage=ro.Containers=void 0;var m_e=tr(),g_e=$r(),b_e=h_e(mk()),oZ=mk(),v_e=Ja(),tm=class extends m_e.APIResource{constructor(){super(...arguments),this.files=new b_e.Files(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(`/containers/${e}`,r)}list(e={},r){return(0,g_e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/containers",_b,{query:e,...r})}del(e,r){return this._client.delete(`/containers/${e}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};ro.Containers=tm;var _b=class extends v_e.CursorPage{};ro.ContainerListResponsesPage=_b;tm.ContainerListResponsesPage=_b;tm.Files=oZ.Files;tm.FileListResponsesPage=oZ.FileListResponsesPage});var yk=te(el=>{"use strict";var y_e=el&&el.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),x_e=el&&el.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),w_e=el&&el.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&y_e(e,n,r);return x_e(e,n),e};Object.defineProperty(el,"__esModule",{value:!0});el.Embeddings=void 0;var S_e=tr(),bk=w_e($r()),vk=class extends S_e.APIResource{create(e,r){let a=!!e.encoding_format,i=a?e.encoding_format:"base64";a&&bk.debug("Request","User defined encoding_format:",e.encoding_format);let s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...r});return a?s:(bk.debug("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(t=>(t&&t.data&&t.data.forEach(o=>{let l=o.embedding;o.embedding=bk.toFloat32Array(l)}),t)))}};el.Embeddings=vk});var _k=te(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.OutputItemListResponsesPage=rm.OutputItems=void 0;var C_e=tr(),A_e=$r(),E_e=Ja(),Yx=class extends C_e.APIResource{retrieve(e,r,a,i){return this._client.get(`/evals/${e}/runs/${r}/output_items/${a}`,i)}list(e,r,a={},i){return(0,A_e.isRequestOptions)(a)?this.list(e,r,{},a):this._client.getAPIList(`/evals/${e}/runs/${r}/output_items`,xb,{query:a,...i})}};rm.OutputItems=Yx;var xb=class extends E_e.CursorPage{};rm.OutputItemListResponsesPage=xb;Yx.OutputItemListResponsesPage=xb});var xk=te(ao=>{"use strict";var P_e=ao&&ao.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),T_e=ao&&ao.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),O_e=ao&&ao.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&P_e(e,n,r);return T_e(e,n),e};Object.defineProperty(ao,"__esModule",{value:!0});ao.RunListResponsesPage=ao.Runs=void 0;var F_e=tr(),k_e=$r(),R_e=O_e(_k()),uZ=_k(),I_e=Ja(),am=class extends F_e.APIResource{constructor(){super(...arguments),this.outputItems=new R_e.OutputItems(this._client)}create(e,r,a){return this._client.post(`/evals/${e}/runs`,{body:r,...a})}retrieve(e,r,a){return this._client.get(`/evals/${e}/runs/${r}`,a)}list(e,r={},a){return(0,k_e.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/evals/${e}/runs`,wb,{query:r,...a})}del(e,r,a){return this._client.delete(`/evals/${e}/runs/${r}`,a)}cancel(e,r,a){return this._client.post(`/evals/${e}/runs/${r}`,a)}};ao.Runs=am;var wb=class extends I_e.CursorPage{};ao.RunListResponsesPage=wb;am.RunListResponsesPage=wb;am.OutputItems=uZ.OutputItems;am.OutputItemListResponsesPage=uZ.OutputItemListResponsesPage});var wk=te(no=>{"use strict";var D_e=no&&no.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),N_e=no&&no.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),M_e=no&&no.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&D_e(e,n,r);return N_e(e,n),e};Object.defineProperty(no,"__esModule",{value:!0});no.EvalListResponsesPage=no.Evals=void 0;var j_e=tr(),B_e=$r(),L_e=M_e(xk()),lZ=xk(),q_e=Ja(),nm=class extends j_e.APIResource{constructor(){super(...arguments),this.runs=new L_e.Runs(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(`/evals/${e}`,r)}update(e,r,a){return this._client.post(`/evals/${e}`,{body:r,...a})}list(e={},r){return(0,B_e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/evals",Sb,{query:e,...r})}del(e,r){return this._client.delete(`/evals/${e}`,r)}};no.Evals=nm;var Sb=class extends q_e.CursorPage{};no.EvalListResponsesPage=Sb;nm.EvalListResponsesPage=Sb;nm.Runs=lZ.Runs;nm.RunListResponsesPage=lZ.RunListResponsesPage});var Sk=te(io=>{"use strict";var U_e=io&&io.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),$_e=io&&io.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),V_e=io&&io.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&U_e(e,n,r);return $_e(e,n),e};Object.defineProperty(io,"__esModule",{value:!0});io.FileObjectsPage=io.Files=void 0;var z_e=tr(),W_e=$r(),G_e=$r(),H_e=mi(),K_e=V_e($r()),Z_e=Ja(),Qx=class extends z_e.APIResource{create(e,r){return this._client.post("/files",K_e.multipartFormRequestOptions({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return(0,W_e.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/files",Cb,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,r)}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:a=30*60*1e3}={}){let i=new Set(["processed","error","deleted"]),s=Date.now(),t=await this.retrieve(e);for(;!t.status||!i.has(t.status);)if(await(0,G_e.sleep)(r),t=await this.retrieve(e),Date.now()-s>a)throw new H_e.APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${a} milliseconds.`});return t}};io.Files=Qx;var Cb=class extends Z_e.CursorPage{};io.FileObjectsPage=Cb;Qx.FileObjectsPage=Cb});var Ak=te(ew=>{"use strict";Object.defineProperty(ew,"__esModule",{value:!0});ew.Methods=void 0;var J_e=tr(),Ck=class extends J_e.APIResource{};ew.Methods=Ck});var Pk=te(tw=>{"use strict";Object.defineProperty(tw,"__esModule",{value:!0});tw.Graders=void 0;var X_e=tr(),Ek=class extends X_e.APIResource{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};tw.Graders=Ek});var Tk=te(tl=>{"use strict";var Y_e=tl&&tl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Q_e=tl&&tl.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),exe=tl&&tl.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Y_e(e,n,r);return Q_e(e,n),e};Object.defineProperty(tl,"__esModule",{value:!0});tl.Alpha=void 0;var txe=tr(),rxe=exe(Pk()),axe=Pk(),rw=class extends txe.APIResource{constructor(){super(...arguments),this.graders=new rxe.Graders(this._client)}};tl.Alpha=rw;rw.Graders=axe.Graders});var Ok=te(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.PermissionCreateResponsesPage=im.Permissions=void 0;var nxe=tr(),ixe=$r(),sxe=Ja(),aw=class extends nxe.APIResource{create(e,r,a){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Ab,{body:r,method:"post",...a})}retrieve(e,r={},a){return(0,ixe.isRequestOptions)(r)?this.retrieve(e,{},r):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...a})}del(e,r,a){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${r}`,a)}};im.Permissions=aw;var Ab=class extends sxe.Page{};im.PermissionCreateResponsesPage=Ab;aw.PermissionCreateResponsesPage=Ab});var Fk=te(rl=>{"use strict";var oxe=rl&&rl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),uxe=rl&&rl.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),lxe=rl&&rl.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&oxe(e,n,r);return uxe(e,n),e};Object.defineProperty(rl,"__esModule",{value:!0});rl.Checkpoints=void 0;var cxe=tr(),dxe=lxe(Ok()),cZ=Ok(),Eb=class extends cxe.APIResource{constructor(){super(...arguments),this.permissions=new dxe.Permissions(this._client)}};rl.Checkpoints=Eb;Eb.Permissions=cZ.Permissions;Eb.PermissionCreateResponsesPage=cZ.PermissionCreateResponsesPage});var kk=te(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.FineTuningJobCheckpointsPage=sm.Checkpoints=void 0;var pxe=tr(),fxe=$r(),hxe=Ja(),nw=class extends pxe.APIResource{list(e,r={},a){return(0,fxe.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Pb,{query:r,...a})}};sm.Checkpoints=nw;var Pb=class extends hxe.CursorPage{};sm.FineTuningJobCheckpointsPage=Pb;nw.FineTuningJobCheckpointsPage=Pb});var Rk=te(Gi=>{"use strict";var mxe=Gi&&Gi.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),gxe=Gi&&Gi.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),bxe=Gi&&Gi.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&mxe(e,n,r);return gxe(e,n),e};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.FineTuningJobEventsPage=Gi.FineTuningJobsPage=Gi.Jobs=void 0;var vxe=tr(),dZ=$r(),yxe=bxe(kk()),pZ=kk(),fZ=Ja(),ff=class extends vxe.APIResource{constructor(){super(...arguments),this.checkpoints=new yxe.Checkpoints(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return(0,dZ.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Tb,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},a){return(0,dZ.isRequestOptions)(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Ob,{query:r,...a})}pause(e,r){return this._client.post(`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(`/fine_tuning/jobs/${e}/resume`,r)}};Gi.Jobs=ff;var Tb=class extends fZ.CursorPage{};Gi.FineTuningJobsPage=Tb;var Ob=class extends fZ.CursorPage{};Gi.FineTuningJobEventsPage=Ob;ff.FineTuningJobsPage=Tb;ff.FineTuningJobEventsPage=Ob;ff.Checkpoints=pZ.Checkpoints;ff.FineTuningJobCheckpointsPage=pZ.FineTuningJobCheckpointsPage});var Dk=te(al=>{"use strict";var _xe=al&&al.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),xxe=al&&al.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),iw=al&&al.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&_xe(e,n,r);return xxe(e,n),e};Object.defineProperty(al,"__esModule",{value:!0});al.FineTuning=void 0;var wxe=tr(),Sxe=iw(Ak()),Cxe=Ak(),Axe=iw(Tk()),Exe=Tk(),Pxe=iw(Fk()),Txe=Fk(),Oxe=iw(Rk()),Ik=Rk(),Zl=class extends wxe.APIResource{constructor(){super(...arguments),this.methods=new Sxe.Methods(this._client),this.jobs=new Oxe.Jobs(this._client),this.checkpoints=new Pxe.Checkpoints(this._client),this.alpha=new Axe.Alpha(this._client)}};al.FineTuning=Zl;Zl.Methods=Cxe.Methods;Zl.Jobs=Ik.Jobs;Zl.FineTuningJobsPage=Ik.FineTuningJobsPage;Zl.FineTuningJobEventsPage=Ik.FineTuningJobEventsPage;Zl.Checkpoints=Txe.Checkpoints;Zl.Alpha=Exe.Alpha});var Mk=te(sw=>{"use strict";Object.defineProperty(sw,"__esModule",{value:!0});sw.GraderModels=void 0;var Fxe=tr(),Nk=class extends Fxe.APIResource{};sw.GraderModels=Nk});var jk=te(nl=>{"use strict";var kxe=nl&&nl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Rxe=nl&&nl.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Ixe=nl&&nl.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&kxe(e,n,r);return Rxe(e,n),e};Object.defineProperty(nl,"__esModule",{value:!0});nl.Graders=void 0;var Dxe=tr(),Nxe=Ixe(Mk()),Mxe=Mk(),ow=class extends Dxe.APIResource{constructor(){super(...arguments),this.graderModels=new Nxe.GraderModels(this._client)}};nl.Graders=ow;ow.GraderModels=Mxe.GraderModels});var Lk=te(il=>{"use strict";var jxe=il&&il.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Bxe=il&&il.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Lxe=il&&il.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&jxe(e,n,r);return Bxe(e,n),e};Object.defineProperty(il,"__esModule",{value:!0});il.Images=void 0;var qxe=tr(),hZ=Lxe($r()),Bk=class extends qxe.APIResource{createVariation(e,r){return this._client.post("/images/variations",hZ.multipartFormRequestOptions({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",hZ.multipartFormRequestOptions({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}};il.Images=Bk});var qk=te(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.ModelsPage=om.Models=void 0;var Uxe=tr(),$xe=Ja(),uw=class extends Uxe.APIResource{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",Fb,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}};om.Models=uw;var Fb=class extends $xe.Page{};om.ModelsPage=Fb;uw.ModelsPage=Fb});var $k=te(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.Moderations=void 0;var Vxe=tr(),Uk=class extends Vxe.APIResource{create(e,r){return this._client.post("/moderations",{body:e,...r})}};lw.Moderations=Uk});var cw=te(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.addOutputText=Cn.validateInputTools=Cn.shouldParseToolCall=Cn.isAutoParsableTool=Cn.makeParseableResponseTool=Cn.hasAutoParseableInput=Cn.parseResponse=Cn.maybeParseResponse=void 0;var mZ=mi(),zxe=Hh();function Wxe(n,e){return!e||!bZ(e)?{...n,output_parsed:null,output:n.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(a=>({...a,parsed:null}))}:r)}:gZ(n,e)}Cn.maybeParseResponse=Wxe;function gZ(n,e){let r=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Kxe(e,i)};if(i.type==="message"){let s=i.content.map(t=>t.type==="output_text"?{...t,parsed:Gxe(e,t.text)}:t);return{...i,content:s}}return i}),a=Object.assign({},n,{output:r});return Object.getOwnPropertyDescriptor(n,"output_text")||yZ(a),Object.defineProperty(a,"output_parsed",{enumerable:!0,get(){for(let i of a.output)if(i.type==="message"){for(let s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),a}Cn.parseResponse=gZ;function Gxe(n,e){return n.text?.format?.type!=="json_schema"?null:"$parseRaw"in n.text?.format?(n.text?.format).$parseRaw(e):JSON.parse(e)}function bZ(n){return!!(0,zxe.isAutoParsableResponseFormat)(n.text?.format)}Cn.hasAutoParseableInput=bZ;function Hxe(n,{parser:e,callback:r}){let a={...n};return Object.defineProperties(a,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:r,enumerable:!1}}),a}Cn.makeParseableResponseTool=Hxe;function Vk(n){return n?.$brand==="auto-parseable-tool"}Cn.isAutoParsableTool=Vk;function vZ(n,e){return n.find(r=>r.type==="function"&&r.name===e)}function Kxe(n,e){let r=vZ(n.tools??[],e.name);return{...e,...e,parsed_arguments:Vk(r)?r.$parseRaw(e.arguments):r?.strict?JSON.parse(e.arguments):null}}function Zxe(n,e){if(!n)return!1;let r=vZ(n.tools??[],e.name);return Vk(r)||r?.strict||!1}Cn.shouldParseToolCall=Zxe;function Jxe(n){for(let e of n??[]){if(e.type!=="function")throw new mZ.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new mZ.OpenAIError(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}Cn.validateInputTools=Jxe;function yZ(n){let e=[];for(let r of n.output)if(r.type==="message")for(let a of r.content)a.type==="output_text"&&e.push(a.text);n.output_text=e.join("")}Cn.addOutputText=yZ});var Wk=te(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.ResponseItemsPage=um.InputItems=void 0;var Xxe=tr(),Yxe=$r(),_Z=dw();Object.defineProperty(um,"ResponseItemsPage",{enumerable:!0,get:function(){return _Z.ResponseItemsPage}});var zk=class extends Xxe.APIResource{list(e,r={},a){return(0,Yxe.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/responses/${e}/input_items`,_Z.ResponseItemsPage,{query:r,...a})}};um.InputItems=zk});var AZ=te(md=>{"use strict";var lm=md&&md.__classPrivateFieldSet||function(n,e,r,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(n,r):i?i.value=r:e.set(n,r),r},fd=md&&md.__classPrivateFieldGet||function(n,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(n):a?a.value:e.get(n)},cm,pw,hd,fw,xZ,wZ,SZ,CZ;Object.defineProperty(md,"__esModule",{value:!0});md.ResponseStream=void 0;var Hi=mi(),Qxe=Ex(),ewe=cw(),Gk=class n extends Qxe.EventStream{constructor(e){super(),cm.add(this),pw.set(this,void 0),hd.set(this,void 0),fw.set(this,void 0),lm(this,pw,e,"f")}static createResponse(e,r,a){let i=new n(r);return i._run(()=>i._createOrRetrieveResponse(e,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,r,a){let i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fd(this,cm,"m",xZ).call(this);let s,t=null;"response_id"in r?(s=await e.responses.retrieve(r.response_id,{stream:!0},{...a,signal:this.controller.signal,stream:!0}),t=r.starting_after??null):s=await e.responses.create({...r,stream:!0},{...a,signal:this.controller.signal}),this._connected();for await(let o of s)fd(this,cm,"m",wZ).call(this,o,t);if(s.controller.signal?.aborted)throw new Hi.APIUserAbortError;return fd(this,cm,"m",SZ).call(this)}[(pw=new WeakMap,hd=new WeakMap,fw=new WeakMap,cm=new WeakSet,xZ=function(){this.ended||lm(this,hd,void 0,"f")},wZ=function(r,a){if(this.ended)return;let i=(t,o)=>{(a==null||o.sequence_number>a)&&this._emit(t,o)},s=fd(this,cm,"m",CZ).call(this,r);switch(i("event",r),r.type){case"response.output_text.delta":{let t=s.output[r.output_index];if(!t)throw new Hi.OpenAIError(`missing output at index ${r.output_index}`);if(t.type==="message"){let o=t.content[r.content_index];if(!o)throw new Hi.OpenAIError(`missing content at index ${r.content_index}`);if(o.type!=="output_text")throw new Hi.OpenAIError(`expected content to be 'output_text', got ${o.type}`);i("response.output_text.delta",{...r,snapshot:o.text})}break}case"response.function_call_arguments.delta":{let t=s.output[r.output_index];if(!t)throw new Hi.OpenAIError(`missing output at index ${r.output_index}`);t.type==="function_call"&&i("response.function_call_arguments.delta",{...r,snapshot:t.arguments});break}default:i(r.type,r);break}},SZ=function(){if(this.ended)throw new Hi.OpenAIError("stream has ended, this shouldn't happen");let r=fd(this,hd,"f");if(!r)throw new Hi.OpenAIError("request ended without sending any events");lm(this,hd,void 0,"f");let a=twe(r,fd(this,pw,"f"));return lm(this,fw,a,"f"),a},CZ=function(r){let a=fd(this,hd,"f");if(!a){if(r.type!=="response.created")throw new Hi.OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return a=lm(this,hd,r.response,"f"),a}switch(r.type){case"response.output_item.added":{a.output.push(r.item);break}case"response.content_part.added":{let i=a.output[r.output_index];if(!i)throw new Hi.OpenAIError(`missing output at index ${r.output_index}`);i.type==="message"&&i.content.push(r.part);break}case"response.output_text.delta":{let i=a.output[r.output_index];if(!i)throw new Hi.OpenAIError(`missing output at index ${r.output_index}`);if(i.type==="message"){let s=i.content[r.content_index];if(!s)throw new Hi.OpenAIError(`missing content at index ${r.content_index}`);if(s.type!=="output_text")throw new Hi.OpenAIError(`expected content to be 'output_text', got ${s.type}`);s.text+=r.delta}break}case"response.function_call_arguments.delta":{let i=a.output[r.output_index];if(!i)throw new Hi.OpenAIError(`missing output at index ${r.output_index}`);i.type==="function_call"&&(i.arguments+=r.delta);break}case"response.completed":{lm(this,hd,r.response,"f");break}}return a},Symbol.asyncIterator)](){let e=[],r=[],a=!1;return this.on("event",i=>{let s=r.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{a=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),this.on("error",i=>{a=!0;for(let s of r)s.reject(i);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:a?{value:void 0,done:!0}:new Promise((s,t)=>r.push({resolve:s,reject:t})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=fd(this,fw,"f");if(!e)throw new Hi.OpenAIError("stream ended without producing a ChatCompletion");return e}};md.ResponseStream=Gk;function twe(n,e){return(0,ewe.maybeParseResponse)(n,e)}});var dw=te(so=>{"use strict";var rwe=so&&so.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),awe=so&&so.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),nwe=so&&so.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&rwe(e,n,r);return awe(e,n),e};Object.defineProperty(so,"__esModule",{value:!0});so.ResponseItemsPage=so.Responses=void 0;var EZ=cw(),iwe=tr(),swe=nwe(Wk()),owe=Wk(),uwe=AZ(),lwe=Ja(),hw=class extends iwe.APIResource{constructor(){super(...arguments),this.inputItems=new swe.InputItems(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&(0,EZ.addOutputText)(a),a))}retrieve(e,r={},a){return this._client.get(`/responses/${e}`,{query:r,...a,stream:r?.stream??!1})}del(e,r){return this._client.delete(`/responses/${e}`,{...r,headers:{Accept:"*/*",...r?.headers}})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(a=>(0,EZ.parseResponse)(a,e))}stream(e,r){return uwe.ResponseStream.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(`/responses/${e}/cancel`,{...r,headers:{Accept:"*/*",...r?.headers}})}};so.Responses=hw;var Hk=class extends lwe.CursorPage{};so.ResponseItemsPage=Hk;hw.InputItems=owe.InputItems});var Zk=te(sl=>{"use strict";var cwe=sl&&sl.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),dwe=sl&&sl.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),pwe=sl&&sl.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&cwe(e,n,r);return dwe(e,n),e};Object.defineProperty(sl,"__esModule",{value:!0});sl.Parts=void 0;var fwe=tr(),hwe=pwe($r()),Kk=class extends fwe.APIResource{create(e,r,a){return this._client.post(`/uploads/${e}/parts`,hwe.multipartFormRequestOptions({body:r,...a}))}};sl.Parts=Kk});var Jk=te(ol=>{"use strict";var mwe=ol&&ol.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),gwe=ol&&ol.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),bwe=ol&&ol.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&mwe(e,n,r);return gwe(e,n),e};Object.defineProperty(ol,"__esModule",{value:!0});ol.Uploads=void 0;var vwe=tr(),ywe=bwe(Zk()),_we=Zk(),mw=class extends vwe.APIResource{constructor(){super(...arguments),this.parts=new ywe.Parts(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(`/uploads/${e}/cancel`,r)}complete(e,r,a){return this._client.post(`/uploads/${e}/complete`,{body:r,...a})}};ol.Uploads=mw;mw.Parts=_we.Parts});var PZ=te(gw=>{"use strict";Object.defineProperty(gw,"__esModule",{value:!0});gw.allSettledWithThrow=void 0;var xwe=async n=>{let e=await Promise.allSettled(n),r=e.filter(i=>i.status==="rejected");if(r.length){for(let i of r)console.error(i.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}let a=[];for(let i of e)i.status==="fulfilled"&&a.push(i.value);return a};gw.allSettledWithThrow=xwe});var bw=te(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.FileContentResponsesPage=gd.VectorStoreFilesPage=gd.Files=void 0;var wwe=tr(),TZ=$r(),OZ=Ja(),kb=class extends wwe.APIResource{create(e,r,a){return this._client.post(`/vector_stores/${e}/files`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}retrieve(e,r,a){return this._client.get(`/vector_stores/${e}/files/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}update(e,r,a,i){return this._client.post(`/vector_stores/${e}/files/${r}`,{body:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,r={},a){return(0,TZ.isRequestOptions)(r)?this.list(e,{},r):this._client.getAPIList(`/vector_stores/${e}/files`,Rb,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}del(e,r,a){return this._client.delete(`/vector_stores/${e}/files/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}async createAndPoll(e,r,a){let i=await this.create(e,r,a);return await this.poll(e,i.id,a)}async poll(e,r,a){let i={...a?.headers,"X-Stainless-Poll-Helper":"true"};for(a?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){let s=await this.retrieve(e,r,{...a,headers:i}).withResponse(),t=s.data;switch(t.status){case"in_progress":let o=5e3;if(a?.pollIntervalMs)o=a.pollIntervalMs;else{let l=s.response.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(o=d)}}await(0,TZ.sleep)(o);break;case"failed":case"completed":return t}}}async upload(e,r,a){let i=await this._client.files.create({file:r,purpose:"assistants"},a);return this.create(e,{file_id:i.id},a)}async uploadAndPoll(e,r,a){let i=await this.upload(e,r,a);return await this.poll(e,i.id,a)}content(e,r,a){return this._client.getAPIList(`/vector_stores/${e}/files/${r}/content`,Ib,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}};gd.Files=kb;var Rb=class extends OZ.CursorPage{};gd.VectorStoreFilesPage=Rb;var Ib=class extends OZ.Page{};gd.FileContentResponsesPage=Ib;kb.VectorStoreFilesPage=Rb;kb.FileContentResponsesPage=Ib});var Yk=te(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.VectorStoreFilesPage=dm.FileBatches=void 0;var Swe=tr(),Cwe=$r(),Awe=$r(),Ewe=PZ(),FZ=bw();Object.defineProperty(dm,"VectorStoreFilesPage",{enumerable:!0,get:function(){return FZ.VectorStoreFilesPage}});var Xk=class extends Swe.APIResource{create(e,r,a){return this._client.post(`/vector_stores/${e}/file_batches`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}retrieve(e,r,a){return this._client.get(`/vector_stores/${e}/file_batches/${r}`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}cancel(e,r,a){return this._client.post(`/vector_stores/${e}/file_batches/${r}/cancel`,{...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}async createAndPoll(e,r,a){let i=await this.create(e,r);return await this.poll(e,i.id,a)}listFiles(e,r,a={},i){return(0,Cwe.isRequestOptions)(a)?this.listFiles(e,r,{},a):this._client.getAPIList(`/vector_stores/${e}/file_batches/${r}/files`,FZ.VectorStoreFilesPage,{query:a,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(e,r,a){let i={...a?.headers,"X-Stainless-Poll-Helper":"true"};for(a?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=a.pollIntervalMs.toString());;){let{data:s,response:t}=await this.retrieve(e,r,{...a,headers:i}).withResponse();switch(s.status){case"in_progress":let o=5e3;if(a?.pollIntervalMs)o=a.pollIntervalMs;else{let l=t.headers.get("openai-poll-after-ms");if(l){let d=parseInt(l);isNaN(d)||(o=d)}}await(0,Awe.sleep)(o);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:r,fileIds:a=[]},i){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let s=i?.maxConcurrency??5,t=Math.min(s,r.length),o=this._client,l=r.values(),d=[...a];async function c(u){for(let S of u){let V=await o.files.create({file:S,purpose:"assistants"},i);d.push(V.id)}}let y=Array(t).fill(l).map(c);return await(0,Ewe.allSettledWithThrow)(y),await this.createAndPoll(e,{file_ids:d})}};dm.FileBatches=Xk});var eR=te(Ki=>{"use strict";var Pwe=Ki&&Ki.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Twe=Ki&&Ki.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),kZ=Ki&&Ki.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Pwe(e,n,r);return Twe(e,n),e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.VectorStoreSearchResponsesPage=Ki.VectorStoresPage=Ki.VectorStores=void 0;var Owe=tr(),Fwe=$r(),kwe=kZ(Yk()),Rwe=Yk(),Iwe=kZ(bw()),Qk=bw(),RZ=Ja(),Jl=class extends Owe.APIResource{constructor(){super(...arguments),this.files=new Iwe.Files(this._client),this.fileBatches=new kwe.FileBatches(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,r){return this._client.get(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,r,a){return this._client.post(`/vector_stores/${e}`,{body:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e={},r){return(0,Fwe.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/vector_stores",Db,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,r){return this._client.delete(`/vector_stores/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}search(e,r,a){return this._client.getAPIList(`/vector_stores/${e}/search`,Nb,{body:r,method:"post",...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}};Ki.VectorStores=Jl;var Db=class extends RZ.CursorPage{};Ki.VectorStoresPage=Db;var Nb=class extends RZ.Page{};Ki.VectorStoreSearchResponsesPage=Nb;Jl.VectorStoresPage=Db;Jl.VectorStoreSearchResponsesPage=Nb;Jl.Files=Qk.Files;Jl.VectorStoreFilesPage=Qk.VectorStoreFilesPage;Jl.FileContentResponsesPage=Qk.FileContentResponsesPage;Jl.FileBatches=Rwe.FileBatches});var LZ=te(Ht=>{"use strict";var Dwe=Ht&&Ht.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),IZ=Ht&&Ht.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dwe(e,n,r)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.VectorStores=Ht.VectorStoreSearchResponsesPage=Ht.VectorStoresPage=Ht.Uploads=Ht.Responses=Ht.Moderations=Ht.Models=Ht.ModelsPage=Ht.Images=Ht.Graders=Ht.FineTuning=Ht.Files=Ht.FileObjectsPage=Ht.Evals=Ht.EvalListResponsesPage=Ht.Embeddings=Ht.Containers=Ht.ContainerListResponsesPage=Ht.Completions=Ht.Beta=Ht.Batches=Ht.BatchesPage=Ht.Audio=void 0;IZ(dK(),Ht);IZ(fK(),Ht);var Nwe=CF();Object.defineProperty(Ht,"Audio",{enumerable:!0,get:function(){return Nwe.Audio}});var DZ=AF();Object.defineProperty(Ht,"BatchesPage",{enumerable:!0,get:function(){return DZ.BatchesPage}});Object.defineProperty(Ht,"Batches",{enumerable:!0,get:function(){return DZ.Batches}});var Mwe=ck();Object.defineProperty(Ht,"Beta",{enumerable:!0,get:function(){return Mwe.Beta}});var jwe=pk();Object.defineProperty(Ht,"Completions",{enumerable:!0,get:function(){return jwe.Completions}});var NZ=gk();Object.defineProperty(Ht,"ContainerListResponsesPage",{enumerable:!0,get:function(){return NZ.ContainerListResponsesPage}});Object.defineProperty(Ht,"Containers",{enumerable:!0,get:function(){return NZ.Containers}});var Bwe=yk();Object.defineProperty(Ht,"Embeddings",{enumerable:!0,get:function(){return Bwe.Embeddings}});var MZ=wk();Object.defineProperty(Ht,"EvalListResponsesPage",{enumerable:!0,get:function(){return MZ.EvalListResponsesPage}});Object.defineProperty(Ht,"Evals",{enumerable:!0,get:function(){return MZ.Evals}});var jZ=Sk();Object.defineProperty(Ht,"FileObjectsPage",{enumerable:!0,get:function(){return jZ.FileObjectsPage}});Object.defineProperty(Ht,"Files",{enumerable:!0,get:function(){return jZ.Files}});var Lwe=Dk();Object.defineProperty(Ht,"FineTuning",{enumerable:!0,get:function(){return Lwe.FineTuning}});var qwe=jk();Object.defineProperty(Ht,"Graders",{enumerable:!0,get:function(){return qwe.Graders}});var Uwe=Lk();Object.defineProperty(Ht,"Images",{enumerable:!0,get:function(){return Uwe.Images}});var BZ=qk();Object.defineProperty(Ht,"ModelsPage",{enumerable:!0,get:function(){return BZ.ModelsPage}});Object.defineProperty(Ht,"Models",{enumerable:!0,get:function(){return BZ.Models}});var $we=$k();Object.defineProperty(Ht,"Moderations",{enumerable:!0,get:function(){return $we.Moderations}});var Vwe=dw();Object.defineProperty(Ht,"Responses",{enumerable:!0,get:function(){return Vwe.Responses}});var zwe=Jk();Object.defineProperty(Ht,"Uploads",{enumerable:!0,get:function(){return zwe.Uploads}});var tR=eR();Object.defineProperty(Ht,"VectorStoresPage",{enumerable:!0,get:function(){return tR.VectorStoresPage}});Object.defineProperty(Ht,"VectorStoreSearchResponsesPage",{enumerable:!0,get:function(){return tR.VectorStoreSearchResponsesPage}});Object.defineProperty(Ht,"VectorStores",{enumerable:!0,get:function(){return tR.VectorStores}})});var ll=te((fr,aR)=>{"use strict";var Wwe=fr&&fr.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Gwe=fr&&fr.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),pm=fr&&fr.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&Wwe(e,n,r);return Gwe(e,n),e},UZ;Object.defineProperty(fr,"__esModule",{value:!0});fr.UnprocessableEntityError=fr.PermissionDeniedError=fr.InternalServerError=fr.AuthenticationError=fr.BadRequestError=fr.RateLimitError=fr.ConflictError=fr.NotFoundError=fr.APIUserAbortError=fr.APIConnectionTimeoutError=fr.APIConnectionError=fr.APIError=fr.OpenAIError=fr.fileFromPath=fr.toFile=fr.AzureOpenAI=fr.OpenAI=void 0;var Hwe=pm(HW()),ul=pm($r()),Wa=pm(mi()),RUe=pm(Ja()),$Z=pm(Jg()),qn=pm(LZ()),VZ=AF(),Kwe=pk(),Zwe=yk(),zZ=Sk(),Jwe=Lk(),WZ=qk(),Xwe=$k(),Ywe=CF(),Qwe=ck(),e5e=hF(),GZ=gk(),HZ=wk(),t5e=Dk(),r5e=jk(),a5e=dw(),n5e=Jk(),rR=eR(),i5e=Uh(),rr=class extends ul.APIClient{constructor({baseURL:e=ul.readEnv("OPENAI_BASE_URL"),apiKey:r=ul.readEnv("OPENAI_API_KEY"),organization:a=ul.readEnv("OPENAI_ORG_ID")??null,project:i=ul.readEnv("OPENAI_PROJECT_ID")??null,...s}={}){if(r===void 0)throw new Wa.OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let t={apiKey:r,organization:a,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!t.dangerouslyAllowBrowser&&ul.isRunningInBrowser())throw new Wa.OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:t.baseURL,timeout:t.timeout??6e5,httpAgent:t.httpAgent,maxRetries:t.maxRetries,fetch:t.fetch}),this.completions=new qn.Completions(this),this.chat=new qn.Chat(this),this.embeddings=new qn.Embeddings(this),this.files=new qn.Files(this),this.images=new qn.Images(this),this.audio=new qn.Audio(this),this.moderations=new qn.Moderations(this),this.models=new qn.Models(this),this.fineTuning=new qn.FineTuning(this),this.graders=new qn.Graders(this),this.vectorStores=new qn.VectorStores(this),this.beta=new qn.Beta(this),this.batches=new qn.Batches(this),this.uploads=new qn.Uploads(this),this.responses=new qn.Responses(this),this.evals=new qn.Evals(this),this.containers=new qn.Containers(this),this._options=t,this.apiKey=r,this.organization=a,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Hwe.stringify(e,{arrayFormat:"brackets"})}};fr.OpenAI=rr;UZ=rr;rr.OpenAI=UZ;rr.DEFAULT_TIMEOUT=6e5;rr.OpenAIError=Wa.OpenAIError;rr.APIError=Wa.APIError;rr.APIConnectionError=Wa.APIConnectionError;rr.APIConnectionTimeoutError=Wa.APIConnectionTimeoutError;rr.APIUserAbortError=Wa.APIUserAbortError;rr.NotFoundError=Wa.NotFoundError;rr.ConflictError=Wa.ConflictError;rr.RateLimitError=Wa.RateLimitError;rr.BadRequestError=Wa.BadRequestError;rr.AuthenticationError=Wa.AuthenticationError;rr.InternalServerError=Wa.InternalServerError;rr.PermissionDeniedError=Wa.PermissionDeniedError;rr.UnprocessableEntityError=Wa.UnprocessableEntityError;rr.toFile=$Z.toFile;rr.fileFromPath=$Z.fileFromPath;rr.Completions=Kwe.Completions;rr.Chat=e5e.Chat;rr.ChatCompletionsPage=i5e.ChatCompletionsPage;rr.Embeddings=Zwe.Embeddings;rr.Files=zZ.Files;rr.FileObjectsPage=zZ.FileObjectsPage;rr.Images=Jwe.Images;rr.Audio=Ywe.Audio;rr.Moderations=Xwe.Moderations;rr.Models=WZ.Models;rr.ModelsPage=WZ.ModelsPage;rr.FineTuning=t5e.FineTuning;rr.Graders=r5e.Graders;rr.VectorStores=rR.VectorStores;rr.VectorStoresPage=rR.VectorStoresPage;rr.VectorStoreSearchResponsesPage=rR.VectorStoreSearchResponsesPage;rr.Beta=Qwe.Beta;rr.Batches=VZ.Batches;rr.BatchesPage=VZ.BatchesPage;rr.Uploads=n5e.Uploads;rr.Responses=a5e.Responses;rr.Evals=HZ.Evals;rr.EvalListResponsesPage=HZ.EvalListResponsesPage;rr.Containers=GZ.Containers;rr.ContainerListResponsesPage=GZ.ContainerListResponsesPage;var vw=class extends rr{constructor({baseURL:e=ul.readEnv("OPENAI_BASE_URL"),apiKey:r=ul.readEnv("AZURE_OPENAI_API_KEY"),apiVersion:a=ul.readEnv("OPENAI_API_VERSION"),endpoint:i,deployment:s,azureADTokenProvider:t,dangerouslyAllowBrowser:o,...l}={}){if(!a)throw new Wa.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if(typeof t=="function"&&(o=!0),!t&&!r)throw new Wa.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(t&&r)throw new Wa.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(r??(r=qZ),l.defaultQuery={...l.defaultQuery,"api-version":a},e){if(i)throw new Wa.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(i||(i=process.env.AZURE_OPENAI_ENDPOINT),!i)throw new Wa.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${i}/openai`}super({apiKey:r,baseURL:e,...l,...o!==void 0?{dangerouslyAllowBrowser:o}:{}}),this.apiVersion="",this._azureADTokenProvider=t,this.apiVersion=a,this.deploymentName=s}buildRequest(e,r={}){if(s5e.has(e.path)&&e.method==="post"&&e.body!==void 0){if(!ul.isObj(e.body))throw new Error("Expected request body to be an object");let a=this.deploymentName||e.body.model||e.__metadata?.model;a!==void 0&&!this.baseURL.includes("/deployments")&&(e.path=`/deployments/${a}${e.path}`)}return super.buildRequest(e,r)}async _getAzureADToken(){if(typeof this._azureADTokenProvider=="function"){let e=await this._azureADTokenProvider();if(!e||typeof e!="string")throw new Wa.OpenAIError(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}authHeaders(e){return{}}async prepareOptions(e){if(e.headers?.["api-key"])return super.prepareOptions(e);let r=await this._getAzureADToken();if(e.headers??(e.headers={}),r)e.headers.Authorization=`Bearer ${r}`;else if(this.apiKey!==qZ)e.headers["api-key"]=this.apiKey;else throw new Wa.OpenAIError("Unable to handle auth");return super.prepareOptions(e)}};fr.AzureOpenAI=vw;var s5e=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]),qZ="<Missing Key>",KZ=Jg();Object.defineProperty(fr,"toFile",{enumerable:!0,get:function(){return KZ.toFile}});Object.defineProperty(fr,"fileFromPath",{enumerable:!0,get:function(){return KZ.fileFromPath}});var cs=mi();Object.defineProperty(fr,"OpenAIError",{enumerable:!0,get:function(){return cs.OpenAIError}});Object.defineProperty(fr,"APIError",{enumerable:!0,get:function(){return cs.APIError}});Object.defineProperty(fr,"APIConnectionError",{enumerable:!0,get:function(){return cs.APIConnectionError}});Object.defineProperty(fr,"APIConnectionTimeoutError",{enumerable:!0,get:function(){return cs.APIConnectionTimeoutError}});Object.defineProperty(fr,"APIUserAbortError",{enumerable:!0,get:function(){return cs.APIUserAbortError}});Object.defineProperty(fr,"NotFoundError",{enumerable:!0,get:function(){return cs.NotFoundError}});Object.defineProperty(fr,"ConflictError",{enumerable:!0,get:function(){return cs.ConflictError}});Object.defineProperty(fr,"RateLimitError",{enumerable:!0,get:function(){return cs.RateLimitError}});Object.defineProperty(fr,"BadRequestError",{enumerable:!0,get:function(){return cs.BadRequestError}});Object.defineProperty(fr,"AuthenticationError",{enumerable:!0,get:function(){return cs.AuthenticationError}});Object.defineProperty(fr,"InternalServerError",{enumerable:!0,get:function(){return cs.InternalServerError}});Object.defineProperty(fr,"PermissionDeniedError",{enumerable:!0,get:function(){return cs.PermissionDeniedError}});Object.defineProperty(fr,"UnprocessableEntityError",{enumerable:!0,get:function(){return cs.UnprocessableEntityError}});fr=aR.exports=rr;aR.exports.AzureOpenAI=vw;fr.default=rr});var cl=te((IUe,ZZ)=>{ZZ.exports=Go()});var nR=te((DUe,JZ)=>{JZ.exports=l0()});var QZ=te(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.JsonOutputKeyToolsParser=oo.JsonOutputToolsParser=oo.makeInvalidToolCall=oo.convertLangChainToolCallToOpenAI=oo.parseToolCall=void 0;var XZ=sp(),o5e=uC(),u5e=Ac(),l5e=kd();function YZ(n,e){if(n.function===void 0)return;let r;if(e?.partial)try{r=(0,o5e.parsePartialJson)(n.function.arguments??"{}")}catch{return}else try{r=JSON.parse(n.function.arguments)}catch(i){throw new XZ.OutputParserException([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}let a={name:n.function.name,args:r,type:"tool_call"};return e?.returnId&&(a.id=n.id),a}oo.parseToolCall=YZ;function c5e(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}oo.convertLangChainToolCallToOpenAI=c5e;function d5e(n,e){return{name:n.function?.name,args:n.function?.arguments,id:n.id,error:e,type:"invalid_tool_call"}}oo.makeInvalidToolCall=d5e;var yw=class extends u5e.BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,r=!0){let a=e[0].message,i;if((0,l5e.isAIMessage)(a)&&a.tool_calls?.length?i=a.tool_calls.map(t=>{let{id:o,...l}=t;return this.returnId?{id:o,...l}:l}):a.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(a.additional_kwargs.tool_calls)).map(o=>YZ(o,{returnId:this.returnId,partial:r}))),!i)return[];let s=[];for(let t of i)if(t!==void 0){let o={type:t.name,args:t.args,id:t.id};s.push(o)}return s}};oo.JsonOutputToolsParser=yw;var iR=class extends yw{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;let r=await this.zodSchema.safeParseAsync(e);if(r.success)return r.data;throw new XZ.OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){let a=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName),i=a;if(a.length)return this.returnId||(i=a.map(s=>s.args)),this.returnSingle?i[0]:i}async parseResult(e){let a=(await super.parsePartialResult(e,!1)).filter(t=>t.type===this.keyName),i=a;return a.length?(this.returnId||(i=a.map(t=>t.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(t=>this._validateResult(t)))):void 0}};oo.JsonOutputKeyToolsParser=iR});var eJ=te(hf=>{"use strict";var p5e=hf&&hf.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),f5e=hf&&hf.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&p5e(e,n,r)};Object.defineProperty(hf,"__esModule",{value:!0});f5e(QZ(),hf)});var rJ=te((jUe,tJ)=>{tJ.exports=eJ()});var _w=te(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.getDefaultOptions=fm.ignoreOverride=void 0;fm.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");var aJ={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},h5e=n=>typeof n=="string"?{...aJ,basePath:["#"],definitions:{},name:n}:{...aJ,basePath:["#"],definitions:{},...n};fm.getDefaultOptions=h5e});var sR=te(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.isEmptyObj=hm.zodDef=void 0;var m5e=n=>"_def"in n?n._def:n;hm.zodDef=m5e;function g5e(n){if(!n)return!0;for(let e in n)return!1;return!0}hm.isEmptyObj=g5e});var oR=te(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});xw.getRefs=void 0;var b5e=_w(),nJ=sR(),v5e=n=>{let e=(0,b5e.getDefaultOptions)(n),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([a,i])=>[(0,nJ.zodDef)(i),{def:(0,nJ.zodDef)(i),path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}};xw.getRefs=v5e});var bd=te(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.setResponseValueAndErrors=mm.addErrorMessage=void 0;function iJ(n,e,r,a){a?.errorMessages&&r&&(n.errorMessage={...n.errorMessage,[e]:r})}mm.addErrorMessage=iJ;function y5e(n,e,r,a,i){n[e]=r,iJ(n,e,a,i)}mm.setResponseValueAndErrors=y5e});var uR=te(ww=>{"use strict";Object.defineProperty(ww,"__esModule",{value:!0});ww.parseAnyDef=void 0;function _5e(){return{}}ww.parseAnyDef=_5e});var lR=te(Cw=>{"use strict";Object.defineProperty(Cw,"__esModule",{value:!0});Cw.parseArrayDef=void 0;var x5e=oi(),Sw=bd(),w5e=sn();function S5e(n,e){let r={type:"array"};return n.type?._def?.typeName!==x5e.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,w5e.parseDef)(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&(0,Sw.setResponseValueAndErrors)(r,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&(0,Sw.setResponseValueAndErrors)(r,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&((0,Sw.setResponseValueAndErrors)(r,"minItems",n.exactLength.value,n.exactLength.message,e),(0,Sw.setResponseValueAndErrors)(r,"maxItems",n.exactLength.value,n.exactLength.message,e)),r}Cw.parseArrayDef=S5e});var cR=te(Aw=>{"use strict";Object.defineProperty(Aw,"__esModule",{value:!0});Aw.parseBigintDef=void 0;var mf=bd();function C5e(n,e){let r={type:"integer",format:"int64"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?(0,mf.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e):(0,mf.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),(0,mf.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?(0,mf.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e):(0,mf.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),(0,mf.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e));break;case"multipleOf":(0,mf.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,e);break}return r}Aw.parseBigintDef=C5e});var dR=te(Ew=>{"use strict";Object.defineProperty(Ew,"__esModule",{value:!0});Ew.parseBooleanDef=void 0;function A5e(){return{type:"boolean"}}Ew.parseBooleanDef=A5e});var pR=te(Pw=>{"use strict";Object.defineProperty(Pw,"__esModule",{value:!0});Pw.parseBrandedDef=void 0;var E5e=sn();function P5e(n,e){return(0,E5e.parseDef)(n.type._def,e)}Pw.parseBrandedDef=P5e});var fR=te(Tw=>{"use strict";Object.defineProperty(Tw,"__esModule",{value:!0});Tw.parseCatchDef=void 0;var T5e=sn(),O5e=(n,e)=>(0,T5e.parseDef)(n.innerType._def,e);Tw.parseCatchDef=O5e});var hR=te(Ow=>{"use strict";Object.defineProperty(Ow,"__esModule",{value:!0});Ow.parseDateDef=void 0;var sJ=bd();function oJ(n,e,r){let a=r??e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((i,s)=>oJ(n,e,i))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return F5e(n,e)}}Ow.parseDateDef=oJ;var F5e=(n,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let a of n.checks)switch(a.kind){case"min":(0,sJ.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e);break;case"max":(0,sJ.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e);break}return r}});var mR=te(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.parseDefaultDef=void 0;var k5e=sn();function R5e(n,e){return{...(0,k5e.parseDef)(n.innerType._def,e),default:n.defaultValue()}}Fw.parseDefaultDef=R5e});var gR=te(kw=>{"use strict";Object.defineProperty(kw,"__esModule",{value:!0});kw.parseEffectsDef=void 0;var I5e=sn();function D5e(n,e,r){return e.effectStrategy==="input"?(0,I5e.parseDef)(n.schema._def,e,r):{}}kw.parseEffectsDef=D5e});var bR=te(Rw=>{"use strict";Object.defineProperty(Rw,"__esModule",{value:!0});Rw.parseEnumDef=void 0;function N5e(n){return{type:"string",enum:[...n.values]}}Rw.parseEnumDef=N5e});var vR=te(Iw=>{"use strict";Object.defineProperty(Iw,"__esModule",{value:!0});Iw.parseIntersectionDef=void 0;var uJ=sn(),M5e=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function j5e(n,e){let r=[(0,uJ.parseDef)(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),(0,uJ.parseDef)(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(s=>{if(M5e(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(a=void 0);else{let t=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:o,...l}=s;t=l}else a=void 0;i.push(t)}}),i.length?{allOf:i,...a}:void 0}Iw.parseIntersectionDef=j5e});var yR=te(Dw=>{"use strict";Object.defineProperty(Dw,"__esModule",{value:!0});Dw.parseLiteralDef=void 0;function B5e(n,e){let r=typeof n.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[n.value]}:{type:r==="bigint"?"integer":r,const:n.value}}Dw.parseLiteralDef=B5e});var Nw=te(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.parseStringDef=ds.zodPatterns=void 0;var gf=bd(),_R;ds.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(_R===void 0&&(_R=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_R),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function L5e(n,e){let r={type:"string"};function a(i){return e.patternStrategy==="escape"?q5e(i):i}if(n.checks)for(let i of n.checks)switch(i.kind){case"min":(0,gf.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e);break;case"max":(0,gf.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Bo(r,"email",i.message,e);break;case"format:idn-email":Bo(r,"idn-email",i.message,e);break;case"pattern:zod":Lo(r,ds.zodPatterns.email,i.message,e);break}break;case"url":Bo(r,"uri",i.message,e);break;case"uuid":Bo(r,"uuid",i.message,e);break;case"regex":Lo(r,i.regex,i.message,e);break;case"cuid":Lo(r,ds.zodPatterns.cuid,i.message,e);break;case"cuid2":Lo(r,ds.zodPatterns.cuid2,i.message,e);break;case"startsWith":Lo(r,RegExp(`^${a(i.value)}`),i.message,e);break;case"endsWith":Lo(r,RegExp(`${a(i.value)}$`),i.message,e);break;case"datetime":Bo(r,"date-time",i.message,e);break;case"date":Bo(r,"date",i.message,e);break;case"time":Bo(r,"time",i.message,e);break;case"duration":Bo(r,"duration",i.message,e);break;case"length":(0,gf.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e),(0,gf.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"includes":{Lo(r,RegExp(a(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&Bo(r,"ipv4",i.message,e),i.version!=="v4"&&Bo(r,"ipv6",i.message,e);break}case"emoji":Lo(r,ds.zodPatterns.emoji,i.message,e);break;case"ulid":{Lo(r,ds.zodPatterns.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Bo(r,"binary",i.message,e);break}case"contentEncoding:base64":{(0,gf.setResponseValueAndErrors)(r,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{Lo(r,ds.zodPatterns.base64,i.message,e);break}}break}case"nanoid":Lo(r,ds.zodPatterns.nanoid,i.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}ds.parseStringDef=L5e;var q5e=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Bo=(n,e,r,a)=>{n.format||n.anyOf?.some(i=>i.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&a.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...r&&a.errorMessages&&{errorMessage:{format:r}}})):(0,gf.setResponseValueAndErrors)(n,"format",e,r,a)},Lo=(n,e,r,a)=>{n.pattern||n.allOf?.some(i=>i.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&a.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:lJ(e,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):(0,gf.setResponseValueAndErrors)(n,"pattern",lJ(e,a),r,a)},lJ=(n,e)=>{let r=typeof n=="function"?n():n;if(!e.applyRegexFlags||!r.flags)return r.source;let a={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},i=a.i?r.source.toLowerCase():r.source,s="",t=!1,o=!1,l=!1;for(let d=0;d<i.length;d++){if(t){s+=i[d],t=!1;continue}if(a.i){if(o){if(i[d].match(/[a-z]/)){l?(s+=i[d],s+=`${i[d-2]}-${i[d]}`.toUpperCase(),l=!1):i[d+1]==="-"&&i[d+2]?.match(/[a-z]/)?(s+=i[d],l=!0):s+=`${i[d]}${i[d].toUpperCase()}`;continue}}else if(i[d].match(/[a-z]/)){s+=`[${i[d]}${i[d].toUpperCase()}]`;continue}}if(a.m){if(i[d]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(i[d]==="$"){s+=`($|(?=[\r
]))`;continue}}if(a.s&&i[d]==="."){s+=o?`${i[d]}\r
`:`[${i[d]}\r
]`;continue}s+=i[d],i[d]==="\\"?t=!0:o&&i[d]==="]"?o=!1:!o&&i[d]==="["&&(o=!0)}try{let d=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return s}});var jw=te(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Mw.parseRecordDef=void 0;var xR=oi(),cJ=sn(),U5e=Nw();function $5e(n,e){if(e.target==="openApi3"&&n.keyType?._def.typeName===xR.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((a,i)=>({...a,[i]:(0,cJ.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",i]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:(0,cJ.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(n.keyType?._def.typeName===xR.ZodFirstPartyTypeKind.ZodString&&n.keyType._def.checks?.length){let a=Object.entries((0,U5e.parseStringDef)(n.keyType._def,e)).reduce((i,[s,t])=>s==="type"?i:{...i,[s]:t},{});return{...r,propertyNames:a}}else if(n.keyType?._def.typeName===xR.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:n.keyType._def.values}};return r}Mw.parseRecordDef=$5e});var wR=te(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Bw.parseMapDef=void 0;var dJ=sn(),V5e=jw();function z5e(n,e){if(e.mapStrategy==="record")return(0,V5e.parseRecordDef)(n,e);let r=(0,dJ.parseDef)(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},a=(0,dJ.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}Bw.parseMapDef=z5e});var SR=te(Lw=>{"use strict";Object.defineProperty(Lw,"__esModule",{value:!0});Lw.parseNativeEnumDef=void 0;function W5e(n){let e=n.values,a=Object.keys(n.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(a.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:a}}Lw.parseNativeEnumDef=W5e});var CR=te(qw=>{"use strict";Object.defineProperty(qw,"__esModule",{value:!0});qw.parseNeverDef=void 0;function G5e(){return{not:{}}}qw.parseNeverDef=G5e});var AR=te(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});Uw.parseNullDef=void 0;function H5e(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Uw.parseNullDef=H5e});var $w=te(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.parseUnionDef=vd.primitiveMappings=void 0;var K5e=sn();vd.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Z5e(n,e){if(e.target==="openApi3")return pJ(n,e);let r=n.options instanceof Map?Array.from(n.options.values()):n.options;if(r.every(a=>a._def.typeName in vd.primitiveMappings&&(!a._def.checks||!a._def.checks.length))){let a=r.reduce((i,s)=>{let t=vd.primitiveMappings[s._def.typeName];return t&&!i.includes(t)?[...i,t]:i},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){let a=r.reduce((i,s)=>{let t=typeof s._def.value;switch(t){case"string":case"number":case"boolean":return[...i,t];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(a.length===r.length){let i=a.filter((s,t,o)=>o.indexOf(s)===t);return{type:i.length>1?i:i[0],enum:r.reduce((s,t)=>s.includes(t._def.value)?s:[...s,t._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,i)=>[...a,...i._def.values.filter(s=>!a.includes(s))],[])};return pJ(n,e)}vd.parseUnionDef=Z5e;var pJ=(n,e)=>{let r=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((a,i)=>(0,K5e.parseDef)(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0}});var ER=te(Vw=>{"use strict";Object.defineProperty(Vw,"__esModule",{value:!0});Vw.parseNullableDef=void 0;var fJ=sn(),hJ=$w();function J5e(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:hJ.primitiveMappings[n.innerType._def.typeName],nullable:!0}:{type:[hJ.primitiveMappings[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let a=(0,fJ.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let r=(0,fJ.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}Vw.parseNullableDef=J5e});var PR=te(zw=>{"use strict";Object.defineProperty(zw,"__esModule",{value:!0});zw.parseNumberDef=void 0;var yd=bd();function X5e(n,e){let r={type:"number"};if(!n.checks)return r;for(let a of n.checks)switch(a.kind){case"int":r.type="integer",(0,yd.addErrorMessage)(r,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?(0,yd.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e):(0,yd.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),(0,yd.setResponseValueAndErrors)(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?(0,yd.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e):(0,yd.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),(0,yd.setResponseValueAndErrors)(r,"maximum",a.value,a.message,e));break;case"multipleOf":(0,yd.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,e);break}return r}zw.parseNumberDef=X5e});var OR=te(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});Ww.parseObjectDef=void 0;var TR=sn();function Y5e(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":(0,TR.parseDef)(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(0,TR.parseDef)(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Q5e(n,e){let r={type:"object",...Object.entries(n.shape()).reduce((a,[i,s])=>{if(s===void 0||s._def===void 0)return a;let t=[...e.currentPath,"properties",i],o=(0,TR.parseDef)(s._def,{...e,currentPath:t,propertyPath:t});return o===void 0?a:(e.openaiStrictMode&&s.isOptional()&&!s.isNullable()&&console.warn(`Zod field at \`${t.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...a.properties,[i]:o},required:s.isOptional()&&!e.openaiStrictMode?a.required:[...a.required,i]})},{properties:{},required:[]}),additionalProperties:Y5e(n,e)};return r.required.length||delete r.required,r}Ww.parseObjectDef=Q5e});var FR=te(Gw=>{"use strict";Object.defineProperty(Gw,"__esModule",{value:!0});Gw.parseOptionalDef=void 0;var mJ=sn(),e8e=(n,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return(0,mJ.parseDef)(n.innerType._def,e);let r=(0,mJ.parseDef)(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};Gw.parseOptionalDef=e8e});var kR=te(Kw=>{"use strict";Object.defineProperty(Kw,"__esModule",{value:!0});Kw.parsePipelineDef=void 0;var Hw=sn(),t8e=(n,e)=>{if(e.pipeStrategy==="input")return(0,Hw.parseDef)(n.in._def,e);if(e.pipeStrategy==="output")return(0,Hw.parseDef)(n.out._def,e);let r=(0,Hw.parseDef)(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),a=(0,Hw.parseDef)(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(i=>i!==void 0)}};Kw.parsePipelineDef=t8e});var RR=te(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});Zw.parsePromiseDef=void 0;var r8e=sn();function a8e(n,e){return(0,r8e.parseDef)(n.type._def,e)}Zw.parsePromiseDef=a8e});var IR=te(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});Jw.parseSetDef=void 0;var gJ=bd(),n8e=sn();function i8e(n,e){let a={type:"array",uniqueItems:!0,items:(0,n8e.parseDef)(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&(0,gJ.setResponseValueAndErrors)(a,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&(0,gJ.setResponseValueAndErrors)(a,"maxItems",n.maxSize.value,n.maxSize.message,e),a}Jw.parseSetDef=i8e});var NR=te(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});Xw.parseTupleDef=void 0;var DR=sn();function s8e(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((r,a)=>(0,DR.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:(0,DR.parseDef)(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((r,a)=>(0,DR.parseDef)(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}Xw.parseTupleDef=s8e});var MR=te(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});Yw.parseUndefinedDef=void 0;function o8e(){return{not:{}}}Yw.parseUndefinedDef=o8e});var jR=te(Qw=>{"use strict";Object.defineProperty(Qw,"__esModule",{value:!0});Qw.parseUnknownDef=void 0;function u8e(){return{}}Qw.parseUnknownDef=u8e});var BR=te(e5=>{"use strict";Object.defineProperty(e5,"__esModule",{value:!0});e5.parseReadonlyDef=void 0;var l8e=sn(),c8e=(n,e)=>(0,l8e.parseDef)(n.innerType._def,e);e5.parseReadonlyDef=c8e});var sn=te(t5=>{"use strict";Object.defineProperty(t5,"__esModule",{value:!0});t5.parseDef=void 0;var Hr=oi(),d8e=uR(),p8e=lR(),f8e=cR(),h8e=dR(),m8e=pR(),g8e=fR(),b8e=hR(),v8e=mR(),y8e=gR(),_8e=bR(),x8e=vR(),w8e=yR(),S8e=wR(),C8e=SR(),A8e=CR(),E8e=AR(),P8e=ER(),T8e=PR(),O8e=OR(),F8e=FR(),k8e=kR(),R8e=RR(),I8e=jw(),D8e=IR(),N8e=Nw(),M8e=NR(),j8e=MR(),B8e=$w(),L8e=jR(),q8e=BR(),U8e=_w();function bJ(n,e,r=!1){let a=e.seen.get(n);if(e.override){let t=e.override?.(n,e,a,r);if(t!==U8e.ignoreOverride)return t}if(a&&!r){let t=$8e(a,e);if(t!==void 0)return"$ref"in t&&e.seenRefs.add(t.$ref),t}let i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);let s=z8e(n,n.typeName,e,r);return s&&W8e(n,e,s),i.jsonSchema=s,s}t5.parseDef=bJ;var $8e=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":let r=n.path.slice(e.basePath.length+1).join("_");return r!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[r]=n.def),{$ref:[...e.basePath,e.definitionPath,r].join("/")};case"relative":return{$ref:V8e(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((a,i)=>e.currentPath[i]===a)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},V8e=(n,e)=>{let r=0;for(;r<n.length&&r<e.length&&n[r]===e[r];r++);return[(n.length-r).toString(),...e.slice(r)].join("/")},z8e=(n,e,r,a)=>{switch(e){case Hr.ZodFirstPartyTypeKind.ZodString:return(0,N8e.parseStringDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodNumber:return(0,T8e.parseNumberDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodObject:return(0,O8e.parseObjectDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodBigInt:return(0,f8e.parseBigintDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodBoolean:return(0,h8e.parseBooleanDef)();case Hr.ZodFirstPartyTypeKind.ZodDate:return(0,b8e.parseDateDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodUndefined:return(0,j8e.parseUndefinedDef)();case Hr.ZodFirstPartyTypeKind.ZodNull:return(0,E8e.parseNullDef)(r);case Hr.ZodFirstPartyTypeKind.ZodArray:return(0,p8e.parseArrayDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodUnion:case Hr.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,B8e.parseUnionDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodIntersection:return(0,x8e.parseIntersectionDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodTuple:return(0,M8e.parseTupleDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodRecord:return(0,I8e.parseRecordDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodLiteral:return(0,w8e.parseLiteralDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodEnum:return(0,_8e.parseEnumDef)(n);case Hr.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,C8e.parseNativeEnumDef)(n);case Hr.ZodFirstPartyTypeKind.ZodNullable:return(0,P8e.parseNullableDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodOptional:return(0,F8e.parseOptionalDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodMap:return(0,S8e.parseMapDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodSet:return(0,D8e.parseSetDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodLazy:return bJ(n.getter()._def,r);case Hr.ZodFirstPartyTypeKind.ZodPromise:return(0,R8e.parsePromiseDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodNaN:case Hr.ZodFirstPartyTypeKind.ZodNever:return(0,A8e.parseNeverDef)();case Hr.ZodFirstPartyTypeKind.ZodEffects:return(0,y8e.parseEffectsDef)(n,r,a);case Hr.ZodFirstPartyTypeKind.ZodAny:return(0,d8e.parseAnyDef)();case Hr.ZodFirstPartyTypeKind.ZodUnknown:return(0,L8e.parseUnknownDef)();case Hr.ZodFirstPartyTypeKind.ZodDefault:return(0,v8e.parseDefaultDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodBranded:return(0,m8e.parseBrandedDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodReadonly:return(0,q8e.parseReadonlyDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodCatch:return(0,g8e.parseCatchDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodPipeline:return(0,k8e.parsePipelineDef)(n,r);case Hr.ZodFirstPartyTypeKind.ZodFunction:case Hr.ZodFirstPartyTypeKind.ZodVoid:case Hr.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(i=>{})(e)}},W8e=(n,e,r)=>(n.description&&(r.description=n.description,e.markdownDescription&&(r.markdownDescription=n.description)),r)});var LR=te(r5=>{"use strict";Object.defineProperty(r5,"__esModule",{value:!0});r5.zodToJsonSchema=void 0;var vJ=sn(),G8e=oR(),yJ=sR(),H8e=(n,e)=>{let r=(0,G8e.getRefs)(e),a=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=(0,vJ.parseDef)(n._def,a===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(i.title=s);let t=(()=>{if((0,yJ.isEmptyObj)(r.definitions))return;let l={},d=new Set;for(let c=0;c<500;c++){let y=Object.entries(r.definitions).filter(([u])=>!d.has(u));if(y.length===0)break;for(let[u,S]of y)l[u]=(0,vJ.parseDef)((0,yJ.zodDef)(S),{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0)??{},d.add(u)}return l})(),o=a===void 0?t?{...i,[r.definitionPath]:t}:i:r.nameStrategy==="duplicate-ref"?{...i,...t||r.seenRefs.size?{[r.definitionPath]:{...t,...r.seenRefs.size?{[a]:i}:void 0}}:void 0}:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...t,[a]:i}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};r5.zodToJsonSchema=H8e});var _J=te(Er=>{"use strict";var K8e=Er&&Er.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),Yr=Er&&Er.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&K8e(e,n,r)};Object.defineProperty(Er,"__esModule",{value:!0});Yr(_w(),Er);Yr(oR(),Er);Yr(bd(),Er);Yr(sn(),Er);Yr(uR(),Er);Yr(lR(),Er);Yr(cR(),Er);Yr(dR(),Er);Yr(pR(),Er);Yr(fR(),Er);Yr(hR(),Er);Yr(mR(),Er);Yr(gR(),Er);Yr(bR(),Er);Yr(vR(),Er);Yr(yR(),Er);Yr(wR(),Er);Yr(SR(),Er);Yr(CR(),Er);Yr(AR(),Er);Yr(ER(),Er);Yr(PR(),Er);Yr(OR(),Er);Yr(FR(),Er);Yr(kR(),Er);Yr(RR(),Er);Yr(BR(),Er);Yr(jw(),Er);Yr(IR(),Er);Yr(Nw(),Er);Yr(NR(),Er);Yr(MR(),Er);Yr($w(),Er);Yr(jR(),Er);Yr(LR(),Er);var Z8e=LR();Er.default=Z8e.zodToJsonSchema});var UR=te(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.zodResponsesFunction=dl.zodFunction=dl.zodTextFormat=dl.zodResponseFormat=void 0;var qR=Hh(),J8e=_J(),X8e=cw();function a5(n,e){return(0,J8e.zodToJsonSchema)(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Y8e(n,e,r){return(0,qR.makeParseableResponseFormat)({type:"json_schema",json_schema:{...r,name:e,strict:!0,schema:a5(n,{name:e})}},a=>n.parse(JSON.parse(a)))}dl.zodResponseFormat=Y8e;function Q8e(n,e,r){return(0,qR.makeParseableTextFormat)({type:"json_schema",...r,name:e,strict:!0,schema:a5(n,{name:e})},a=>n.parse(JSON.parse(a)))}dl.zodTextFormat=Q8e;function e9e(n){return(0,qR.makeParseableTool)({type:"function",function:{name:n.name,parameters:a5(n.parameters,{name:n.name}),strict:!0,...n.description?{description:n.description}:void 0}},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}dl.zodFunction=e9e;function t9e(n){return(0,X8e.makeParseableResponseTool)({type:"function",name:n.name,parameters:a5(n.parameters,{name:n.name}),strict:!0,...n.description?{description:n.description}:void 0},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}dl.zodResponsesFunction=t9e});var _d=te(n5=>{"use strict";Object.defineProperty(n5,"__esModule",{value:!0});n5.getEndpoint=void 0;function r9e(n){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:a,azureOpenAIBasePath:i,baseURL:s,azureADTokenProvider:t,azureOpenAIEndpoint:o}=n;if((a||t)&&i&&e)return`${i}/${e}`;if((a||t)&&o&&e)return`${o}/openai/deployments/${e}`;if(a||t){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return s}n5.getEndpoint=r9e});var xJ=te(i5=>{"use strict";Object.defineProperty(i5,"__esModule",{value:!0});i5.addLangChainErrorFields=void 0;function a9e(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}i5.addLangChainErrorFields=a9e});var gm=te(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.formatToOpenAIToolChoice=uo.formatToOpenAIAssistantTool=uo.formatToOpenAITool=uo.formatToOpenAIFunction=uo.wrapOpenAIClientError=void 0;var wJ=ll(),n9e=gc(),SJ=f_();Object.defineProperty(uo,"formatToOpenAIFunction",{enumerable:!0,get:function(){return SJ.convertToOpenAIFunction}});Object.defineProperty(uo,"formatToOpenAITool",{enumerable:!0,get:function(){return SJ.convertToOpenAITool}});var s5=xJ();function i9e(n){let e;return n.constructor.name===wJ.APIConnectionTimeoutError.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===wJ.APIUserAbortError.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=(0,s5.addLangChainErrorFields)(n,"INVALID_TOOL_RESULTS"):n.status===401?e=(0,s5.addLangChainErrorFields)(n,"MODEL_AUTHENTICATION"):n.status===429?e=(0,s5.addLangChainErrorFields)(n,"MODEL_RATE_LIMIT"):n.status===404?e=(0,s5.addLangChainErrorFields)(n,"MODEL_NOT_FOUND"):e=n,e}uo.wrapOpenAIClientError=i9e;function s9e(n){return{type:"function",function:{name:n.name,description:n.description,parameters:(0,n9e.zodToJsonSchema)(n.schema)}}}uo.formatToOpenAIAssistantTool=s9e;function o9e(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}uo.formatToOpenAIToolChoice=o9e});var AJ=te(u5=>{"use strict";Object.defineProperty(u5,"__esModule",{value:!0});u5.formatFunctionDefinitions=void 0;function u9e(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function l9e(n){let e=["namespace functions {",""];for(let r of n)r.description&&e.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(e.push(`type ${r.name} = (_: {`),e.push(CJ(r.parameters,0)),e.push("}) => any;")):e.push(`type ${r.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}u5.formatFunctionDefinitions=l9e;function CJ(n,e){let r=[];for(let[a,i]of Object.entries(n.properties??{}))i.description&&e<2&&r.push(`// ${i.description}`),n.required?.includes(a)?r.push(`${a}: ${o5(i,e)},`):r.push(`${a}?: ${o5(i,e)},`);return r.map(a=>" ".repeat(e)+a).join(`
`)}function o5(n,e){if(u9e(n))return n.anyOf.map(r=>o5(r,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(r=>`"${r}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(r=>`${r}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(r=>`${r}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",CJ(n,e+2),"}"].join(`
`);case"array":return n.items?`${o5(n.items,e)}[]`:"any[]";default:return""}}});var PJ=te(l5=>{"use strict";Object.defineProperty(l5,"__esModule",{value:!0});l5._convertToOpenAITool=void 0;var EJ=f_(),c9e=UR();function d9e(n,e){let r;if((0,EJ.isLangChainTool)(n)){let a=(0,c9e.zodFunction)({name:n.name,parameters:n.schema,description:n.description});a.function.parameters?r={type:a.type,function:{name:a.function.name,description:a.function.description,parameters:a.function.parameters,...e?.strict!==void 0?{strict:e.strict}:{}}}:r={type:"function",function:(0,EJ.convertToOpenAIFunction)(n,e)}}else r=n;return e?.strict!==void 0&&(r.function.strict=e.strict),r}l5._convertToOpenAITool=d9e});var m5=te(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.ChatOpenAI=xd._convertMessagesToOpenAIParams=xd.messageToOpenAIRole=void 0;var p9e=ll(),Un=Gp(),VR=yg(),TJ=cl(),f9e=NT(),kJ=nR(),c5=Oo(),d5=$T(),bf=rJ(),h9e=gc(),m9e=UR(),g9e=_d(),Mb=gm(),b9e=AJ(),v9e=PJ();function y9e(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function h5(n){let e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Un.ChatMessage.isInstance(n))throw new Error("Invalid generic chat message");return y9e(n)}default:throw new Error(`Unknown message type: ${e}`)}}xd.messageToOpenAIRole=h5;function zR(n,e){return n.flatMap(r=>{let a=h5(r);a==="system"&&GR(e)&&(a="developer");let i={role:a,content:r.content};if(r.name!=null&&(i.name=r.name),r.additional_kwargs.function_call!=null&&(i.function_call=r.additional_kwargs.function_call,i.content=""),(0,Un.isAIMessage)(r)&&r.tool_calls?.length?(i.tool_calls=r.tool_calls.map(bf.convertLangChainToolCallToOpenAI),i.content=""):(r.additional_kwargs.tool_calls!=null&&(i.tool_calls=r.additional_kwargs.tool_calls),r.tool_call_id!=null&&(i.tool_call_id=r.tool_call_id)),r.additional_kwargs.audio&&typeof r.additional_kwargs.audio=="object"&&"id"in r.additional_kwargs.audio){let s={role:"assistant",audio:{id:r.additional_kwargs.audio.id}};return[i,s]}return i})}xd._convertMessagesToOpenAIParams=zR;var f5="__openai_function_call_ids__";function OJ(n,e){return n.flatMap(r=>{let a=h5(r);if(a==="system"&&GR(e)&&(a="developer"),a==="function")throw new Error("Function messages are not supported in Responses API");if(a==="tool"){let i=r;return i.additional_kwargs?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof i.content=="string")return{type:"computer_screenshot",image_url:i.content};if(Array.isArray(i.content)){let t=i.content.find(l=>l.type==="computer_screenshot");if(t)return t;let o=i.content.find(l=>l.type==="image_url");if(o)return{type:"computer_screenshot",image_url:typeof o.image_url=="string"?o.image_url:o.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:i.tool_call_id}:{type:"function_call_output",call_id:i.tool_call_id,id:i.id,output:typeof i.content!="string"?JSON.stringify(i.content):i.content}}if(a==="assistant"){let i=[];r.additional_kwargs.reasoning!=null&&(l=>typeof l=="object"&&l!=null&&"type"in l&&l.type==="reasoning")(r.additional_kwargs.reasoning)&&i.push(r.additional_kwargs.reasoning);let{content:s}=r;r.additional_kwargs.refusal!=null&&(typeof s=="string"&&(s=[{type:"output_text",text:s,annotations:[]}]),s=[...s,{type:"refusal",refusal:r.additional_kwargs.refusal}]),i.push({type:"message",role:"assistant",content:typeof s=="string"?s:s.flatMap(o=>o.type==="text"?{type:"output_text",text:o.text,annotations:o.annotations??[]}:o.type==="output_text"||o.type==="refusal"?o:[])});let t=r.additional_kwargs[f5];if((0,Un.isAIMessage)(r)&&r.tool_calls?.length?i.push(...r.tool_calls.map(o=>({type:"function_call",name:o.name,arguments:JSON.stringify(o.args),call_id:o.id,id:t?.[o.id]}))):r.additional_kwargs.tool_calls!=null&&i.push(...r.additional_kwargs.tool_calls.map(o=>({type:"function_call",name:o.function.name,call_id:o.id,id:t?.[o.id],arguments:o.function.arguments}))),r.additional_kwargs.tool_outputs!=null){let l=r.additional_kwargs.tool_outputs?.filter(d=>d.type==="computer_call");l.length>0&&i.push(...l)}return i}return a==="user"?{type:"message",role:"user",content:typeof r.content=="string"?r.content:r.content.flatMap(i=>{if(i.type==="text")return{type:"input_text",text:i.text};if(i.type==="image_url"){let s=typeof i.image_url=="string"?i.image_url:i.image_url.url,t=typeof i.image_url=="string"?"auto":i.image_url.detail;return{type:"input_image",image_url:s,detail:t}}return i.type==="input_text"||i.type==="input_image"||i.type==="input_file"?i:[]})}:[]})}function RJ(n){if(n.error){let t=new Error(n.error.message);throw t.name=n.error.code,t}let e=[],r=[],a=[],i={model:n.model,created_at:n.created_at,id:n.id,incomplete_details:n.incomplete_details,metadata:n.metadata,object:n.object,status:n.status,user:n.user,model_name:n.model},s={};for(let t of n.output)if(t.type==="message")e.push(...t.content.flatMap(o=>o.type==="output_text"?("parsed"in o&&o.parsed!=null&&(s.parsed=o.parsed),{type:"text",text:o.text,annotations:o.annotations}):o.type==="refusal"?(s.refusal=o.refusal,[]):o));else if(t.type==="function_call"){let o={function:{name:t.name,arguments:t.arguments},id:t.call_id};try{r.push((0,bf.parseToolCall)(o,{returnId:!0}))}catch(l){let d;typeof l=="object"&&l!=null&&"message"in l&&typeof l.message=="string"&&(d=l.message),a.push((0,bf.makeInvalidToolCall)(o,d))}s[f5]??={},s[f5][t.call_id]=t.id}else t.type==="reasoning"?s.reasoning=t:(s.tool_outputs??=[],s.tool_outputs.push(t));return new Un.AIMessage({id:n.id,content:e,tool_calls:r,invalid_tool_calls:a,usage_metadata:n.usage,additional_kwargs:s,response_metadata:i})}function _9e(n){let e=[],r={},a,i=[],s={},t={},o;if(n.type==="response.output_text.delta")e.push({type:"text",text:n.delta,index:n.content_index});else if(n.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[n.annotation],index:n.content_index});else if(n.type==="response.output_item.added"&&n.item.type==="message")o=n.item.id;else if(n.type==="response.output_item.added"&&n.item.type==="function_call")i.push({type:"tool_call_chunk",name:n.item.name,args:n.item.arguments,id:n.item.id,index:n.output_index}),t[f5]={[n.item.call_id]:n.item.id};else if(n.type==="response.output_item.done"&&(n.item.type==="web_search_call"||n.item.type==="file_search_call"||n.item.type==="computer_call"))t.tool_outputs=[n.item];else if(n.type==="response.created")s.id=n.response.id,s.model_name=n.response.model,s.model=n.response.model;else if(n.type==="response.completed"){let l=RJ(n.response);a=n.response.usage,n.response.text?.format?.type==="json_schema"&&(t.parsed??=JSON.parse(l.text));for(let[d,c]of Object.entries(n.response))d!=="id"&&(s[d]=c)}else if(n.type==="response.function_call_arguments.delta")i.push({type:"tool_call_chunk",args:n.delta,index:n.output_index});else if(n.type==="response.web_search_call.completed"||n.type==="response.file_search_call.completed")r={tool_outputs:{id:n.item_id,type:n.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(n.type==="response.refusal.done")t.refusal=n.refusal;else return null;return new VR.ChatGenerationChunk({text:e.map(l=>l.text).join(""),message:new Un.AIMessageChunk({id:o,content:e,tool_call_chunks:i,usage_metadata:a,additional_kwargs:t,response_metadata:s}),generationInfo:r})}function $R(n){return"type"in n&&n.type!=="function"}function x9e(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function FJ(n,e){return(0,kJ.isOpenAITool)(n)?e?.strict!==void 0?{...n,function:{...n.function,strict:e.strict}}:n:(0,v9e._convertToOpenAITool)(n,e)}function GR(n){return n?.startsWith("o1")||n?.startsWith("o3")}var WR=class extends f9e.BaseChatModel{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming"]}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??e?.configuration?.apiKey??(0,TJ.getEnvironmentVariable)("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??(0,TJ.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoningEffort=e?.reasoningEffort,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.useResponsesApi=e?.useResponsesApi??this.useResponsesApi,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){let r=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:r.temperature??void 0,ls_max_tokens:r.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,r){let a;return r?.strict!==void 0?a=r.strict:this.supportsStrictToolCalling!==void 0&&(a=this.supportsStrictToolCalling),this.bind({tools:e.map(i=>$R(i)?i:FJ(i,{strict:a})),...r})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&p5(e.json_schema.schema)?(0,m9e.zodResponseFormat)(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,r){let a;if(e?.strict!==void 0?a=e.strict:this.supportsStrictToolCalling!==void 0&&(a=this.supportsStrictToolCalling),this._useResponseApi(e)){let o={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?e.tools.map(d=>$R(d)?d:(0,kJ.isOpenAITool)(d)?{type:"function",name:d.function.name,parameters:d.function.parameters,description:d.function.description,strict:a}:null).filter(d=>d!==null):void 0,tool_choice:x9e(e?.tool_choice)?e?.tool_choice:(()=>{let d=(0,Mb.formatToOpenAIToolChoice)(e?.tool_choice);if(typeof d=="object"&&"type"in d)return{type:"function",name:d.function.name}})(),text:(()=>{if(e?.text)return e.text;let d=this.createResponseFormat(e?.response_format);return d?.type==="json_schema"?d.json_schema.schema!=null?{format:{type:"json_schema",schema:d.json_schema.schema,description:d.json_schema.description,name:d.json_schema.name,strict:d.json_schema.strict}}:void 0:{format:d}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.modelKwargs},l=e?.reasoning_effort??this.reasoningEffort;return l!==void 0&&(o.reasoning={effort:l}),o}let i={};e?.stream_options!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||r?.streaming)&&(i={stream_options:{include_usage:!0}});let s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(o=>FJ(o,{strict:a})):void 0,tool_choice:(0,Mb.formatToOpenAIToolChoice)(e?.tool_choice),response_format:this.createResponseFormat(e?.response_format),seed:e?.seed,...i,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};e?.prediction!==void 0&&(s.prediction=e.prediction);let t=e?.reasoning_effort??this.reasoningEffort;return t!==void 0&&(s.reasoning_effort=t),GR(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}_convertOpenAIChatCompletionMessageToBaseMessage(e,r){let a=e.tool_calls;switch(e.role){case"assistant":{let i=[],s=[];for(let l of a??[])try{i.push((0,bf.parseToolCall)(l,{returnId:!0}))}catch(d){s.push((0,bf.makeInvalidToolCall)(l,d.message))}let t={function_call:e.function_call,tool_calls:a};this.__includeRawResponse!==void 0&&(t.__raw_response=r);let o={model_name:r.model,...r.system_fingerprint?{usage:{...r.usage},system_fingerprint:r.system_fingerprint}:{}};return e.audio&&(t.audio=e.audio),new Un.AIMessage({content:e.content||"",tool_calls:i,invalid_tool_calls:s,additional_kwargs:t,response_metadata:o,id:r.id})}default:return new Un.ChatMessage(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,r,a){let i=e.role??a,s=e.content??"",t;e.function_call?t={function_call:e.function_call}:e.tool_calls?t={tool_calls:e.tool_calls}:t={},this.__includeRawResponse&&(t.__raw_response=r),e.audio&&(t.audio={...e.audio,index:r.choices[0].index});let o={usage:{...r.usage}};if(i==="user")return new Un.HumanMessageChunk({content:s,response_metadata:o});if(i==="assistant"){let l=[];if(Array.isArray(e.tool_calls))for(let d of e.tool_calls)l.push({name:d.function?.name,args:d.function?.arguments,id:d.id,index:d.index,type:"tool_call_chunk"});return new Un.AIMessageChunk({content:s,tool_call_chunks:l,additional_kwargs:t,id:r.id,response_metadata:o})}else return i==="system"?new Un.SystemMessageChunk({content:s,response_metadata:o}):i==="developer"?new Un.SystemMessageChunk({content:s,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new Un.FunctionMessageChunk({content:s,additional_kwargs:t,name:e.name,response_metadata:o}):i==="tool"?new Un.ToolMessageChunk({content:s,additional_kwargs:t,tool_call_id:e.tool_call_id,response_metadata:o}):new Un.ChatMessageChunk({content:s,role:i,response_metadata:o})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,a){if(this._useResponseApi(r)){let d=await this.responseApiWithRetry({...this.invocationParams(r,{streaming:!0}),input:OJ(e,this.model),stream:!0},r);for await(let c of d){let y=_9e(c);y!=null&&(yield y)}return}let i=zR(e,this.model),s={...this.invocationParams(r,{streaming:!0}),messages:i,stream:!0},t,o=await this.completionWithRetry(s,r),l;for await(let d of o){let c=d?.choices?.[0];if(d.usage&&(l=d.usage),!c)continue;let{delta:y}=c;if(!y)continue;let u=this._convertOpenAIDeltaToBaseMessageChunk(y,d,t);t=y.role??t;let S={prompt:r.promptIndex??0,completion:c.index??0};if(typeof u.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let V={...S};c.finish_reason!=null&&(V.finish_reason=c.finish_reason,V.system_fingerprint=d.system_fingerprint,V.model_name=d.model),this.logprobs&&(V.logprobs=c.logprobs);let U=new VR.ChatGenerationChunk({message:u,text:u.content,generationInfo:V});yield U,await a?.handleLLMNewToken(U.text??"",S,void 0,void 0,void 0,{chunk:U})}if(l){let d={...l.prompt_tokens_details?.audio_tokens!==null&&{audio:l.prompt_tokens_details?.audio_tokens},...l.prompt_tokens_details?.cached_tokens!==null&&{cache_read:l.prompt_tokens_details?.cached_tokens}},c={...l.completion_tokens_details?.audio_tokens!==null&&{audio:l.completion_tokens_details?.audio_tokens},...l.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:l.completion_tokens_details?.reasoning_tokens}};yield new VR.ChatGenerationChunk({message:new Un.AIMessageChunk({content:"",response_metadata:{usage:{...l}},usage_metadata:{input_tokens:l.prompt_tokens,output_tokens:l.completion_tokens,total_tokens:l.total_tokens,...Object.keys(d).length>0&&{input_token_details:d},...Object.keys(c).length>0&&{output_token_details:c}}}),text:""})}if(r.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,r,a){let i=this.invocationParams(r);if(i.stream){let o=this._streamResponseChunks(e,r,a),l;for await(let d of o)d.message.response_metadata={...d.generationInfo,...d.message.response_metadata},l=l?.concat(d)??d;return{generations:l?[l]:[],llmOutput:{estimatedTokenUsage:l?.message?.usage_metadata}}}let s=OJ(e,this.model),t=await this.responseApiWithRetry({input:s,...i},{signal:r?.signal,...r?.options});return{generations:[{text:t.output_text,message:RJ(t)}],llmOutput:{id:t.id,estimatedTokenUsage:t.usage?{promptTokens:t.usage.input_tokens,completionTokens:t.usage.output_tokens,totalTokens:t.usage.total_tokens}:void 0}}}_useResponseApi(e){let r=e?.tools?.some($R),a=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null;return this.useResponsesApi||r||a}async _generate(e,r,a){if(this._useResponseApi(r))return this._responseApiGenerate(e,r,a);let i={},s=this.invocationParams(r),t=zR(e,this.model);if(s.stream){let o=this._streamResponseChunks(e,r,a),l={};for await(let V of o){V.message.response_metadata={...V.generationInfo,...V.message.response_metadata};let U=V.generationInfo?.completion??0;l[U]===void 0?l[U]=V:l[U]=l[U].concat(V)}let d=Object.entries(l).sort(([V],[U])=>parseInt(V,10)-parseInt(U,10)).map(([V,U])=>U),{functions:c,function_call:y}=this.invocationParams(r),u=await this.getEstimatedTokenCountFromPrompt(e,c,y),S=await this.getNumTokensFromGenerations(d);return i.input_tokens=u,i.output_tokens=S,i.total_tokens=u+S,{generations:d,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let o;r.response_format&&r.response_format.type==="json_schema"?o=await this.betaParsedCompletionWithRetry({...s,stream:!1,messages:t},{signal:r?.signal,...r?.options}):o=await this.completionWithRetry({...s,stream:!1,messages:t},{signal:r?.signal,...r?.options});let{completion_tokens:l,prompt_tokens:d,total_tokens:c,prompt_tokens_details:y,completion_tokens_details:u}=o?.usage??{};l&&(i.output_tokens=(i.output_tokens??0)+l),d&&(i.input_tokens=(i.input_tokens??0)+d),c&&(i.total_tokens=(i.total_tokens??0)+c),(y?.audio_tokens!==null||y?.cached_tokens!==null)&&(i.input_token_details={...y?.audio_tokens!==null&&{audio:y?.audio_tokens},...y?.cached_tokens!==null&&{cache_read:y?.cached_tokens}}),(u?.audio_tokens!==null||u?.reasoning_tokens!==null)&&(i.output_token_details={...u?.audio_tokens!==null&&{audio:u?.audio_tokens},...u?.reasoning_tokens!==null&&{reasoning:u?.reasoning_tokens}});let S=[];for(let V of o?.choices??[]){let z={text:V.message?.content??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(V.message??{role:"assistant"},o)};z.generationInfo={...V.finish_reason?{finish_reason:V.finish_reason}:{},...V.logprobs?{logprobs:V.logprobs}:{}},(0,Un.isAIMessage)(z.message)&&(z.message.usage_metadata=i),z.message=new Un.AIMessage(Object.fromEntries(Object.entries(z.message).filter(([D])=>!D.startsWith("lc_")))),S.push(z)}return{generations:S,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,r,a){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(r&&a!=="auto"){let s=(0,b9e.formatFunctionDefinitions)(r);i+=await this.getNumTokens(s),i+=9}return r&&e.find(s=>s._getType()==="system")&&(i-=4),a==="none"?i+=1:typeof a=="object"&&(i+=await this.getNumTokens(a.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async a=>a.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([a.message])).countPerMessage[0]:await this.getNumTokens(a.message.content)))).reduce((a,i)=>a+i,0)}async getNumTokensFromMessages(e){let r=0,a=0,i=0;this.model==="gpt-3.5-turbo-0301"?(a=4,i=-1):(a=3,i=1);let s=await Promise.all(e.map(async t=>{let o=await this.getNumTokens(t.content),l=await this.getNumTokens(h5(t)),d=t.name!==void 0?i+await this.getNumTokens(t.name):0,c=o+a+l+d,y=t;if(y._getType()==="function"&&(c-=2),y.additional_kwargs?.function_call&&(c+=3),y?.additional_kwargs.function_call?.name&&(c+=await this.getNumTokens(y.additional_kwargs.function_call?.name)),y.additional_kwargs.function_call?.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse(y.additional_kwargs.function_call?.arguments)))}catch(u){console.error("Error parsing function arguments",u,JSON.stringify(y.additional_kwargs.function_call)),c+=await this.getNumTokens(y.additional_kwargs.function_call?.arguments)}return r+=c,c}));return r+=3,{totalCount:r,countPerMessage:s}}async completionWithRetry(e,r){let a=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,a)}catch(i){throw(0,Mb.wrapOpenAIClientError)(i)}})}async responseApiWithRetry(e,r){return this.caller.call(async()=>{let a=this._getClientOptions(r);try{return e.text?.format?.type==="json_schema"&&!e.stream?await this.client.responses.parse(e,a):await this.client.responses.create(e,a)}catch(i){throw(0,Mb.wrapOpenAIClientError)(i)}})}async betaParsedCompletionWithRetry(e,r){let a=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,a)}catch(i){throw(0,Mb.wrapOpenAIClientError)(i)}})}_getClientOptions(e){if(!this.client){let a={baseURL:this.clientConfig.baseURL},i=(0,g9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new p9e.OpenAI(s)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,a)=>(a&&a.tokenUsage&&(r.tokenUsage.completionTokens+=a.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=a.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=a.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,r){let a,i,s,t;w9e(e)?(a=e.schema,i=e.name,s=e.method,t=e.includeRaw):(a=e,i=r?.name,s=r?.method,t=r?.includeRaw);let o,l;if(r?.strict!==void 0&&s==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?s===void 0&&(s="jsonSchema"):s==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),s==="jsonMode")o=this.bind({response_format:{type:"json_object"}}),p5(a)?l=d5.StructuredOutputParser.fromZodSchema(a):l=new d5.JsonOutputParser;else if(s==="jsonSchema")if(o=this.bind({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:a.description,schema:a,strict:r?.strict}}}),p5(a)){let u=d5.StructuredOutputParser.fromZodSchema(a);l=c5.RunnableLambda.from(S=>"parsed"in S.additional_kwargs?S.additional_kwargs.parsed:u)}else l=new d5.JsonOutputParser;else{let u=i??"extract";if(p5(a)){let S=(0,h9e.zodToJsonSchema)(a);o=this.bind({tools:[{type:"function",function:{name:u,description:S.description,parameters:S}}],tool_choice:{type:"function",function:{name:u}},...r?.strict!==void 0?{strict:r.strict}:{}}),l=new bf.JsonOutputKeyToolsParser({returnSingle:!0,keyName:u,zodSchema:a})}else{let S;typeof a.name=="string"&&typeof a.parameters=="object"&&a.parameters!=null?(S=a,u=a.name):(u=a.title??u,S={name:u,description:a.description??"",parameters:a}),o=this.bind({tools:[{type:"function",function:S}],tool_choice:{type:"function",function:{name:u}},...r?.strict!==void 0?{strict:r.strict}:{}}),l=new bf.JsonOutputKeyToolsParser({returnSingle:!0,keyName:u})}}if(!t)return o.pipe(l);let d=c5.RunnablePassthrough.assign({parsed:(u,S)=>l.invoke(u.raw,S)}),c=c5.RunnablePassthrough.assign({parsed:()=>null}),y=d.withFallbacks({fallbacks:[c]});return c5.RunnableSequence.from([{raw:o},y])}};xd.ChatOpenAI=WR;function p5(n){return typeof n?.parse=="function"}function w9e(n){return n!==void 0&&typeof n.schema=="object"}});var IJ=te(g5=>{"use strict";Object.defineProperty(g5,"__esModule",{value:!0});g5.AzureChatOpenAI=void 0;var S9e=ll(),vf=cl(),C9e=m5(),A9e=_d(),HR=class extends C9e.ChatOpenAI{_llmType(){return"azure_openai"}get lc_aliases(){return{...super.lc_aliases,openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"}}get lc_secrets(){return{...super.lc_secrets,azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_serializable_keys(){return[...super.lc_serializable_keys,"azureOpenAIApiKey","azureOpenAIApiVersion","azureOpenAIBasePath","azureOpenAIEndpoint","azureOpenAIApiInstanceName","azureOpenAIApiDeploymentName","deploymentName","openAIApiKey","openAIApiVersion"]}constructor(e){if(super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.openAIApiKey??e?.apiKey??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??e?.deploymentName??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,vf.getEnvironmentVariable)("AZURE_OPENAI_ENDPOINT"),this.azureADTokenProvider=e?.azureADTokenProvider,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("Azure OpenAI API key or Token Provider not found")}getLsParams(e){let r=super.getLsParams(e);return r.ls_provider="azure",r}_getClientOptions(e){if(!this.client){let a={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},i=(0,A9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(s.apiKey=a.azureOpenAIApiKey),s.baseURL||delete s.baseURL;let t=(0,vf.getEnv)();(t==="node"||t==="deno")&&(t=`(${t}/${process.version}; ${process.platform}; ${process.arch})`);let o=s.defaultHeaders?.["User-Agent"];s.defaultHeaders={...s.defaultHeaders,"User-Agent":`langchainjs-azure-openai/2.0.0 (${t})${o?` ${o}`:""}`},this.client=new S9e.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...s})}let r={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),r}toJSON(){let e=super.toJSON();function r(a){return typeof a=="object"&&a!=null}if(r(e)&&r(e.kwargs)){if(delete e.kwargs.azure_openai_base_path,delete e.kwargs.azure_openai_api_deployment_name,delete e.kwargs.azure_openai_api_key,delete e.kwargs.azure_openai_api_version,delete e.kwargs.azure_open_ai_base_path,!e.kwargs.azure_endpoint&&this.azureOpenAIEndpoint&&(e.kwargs.azure_endpoint=this.azureOpenAIEndpoint),!e.kwargs.azure_endpoint&&this.azureOpenAIBasePath){let a=this.azureOpenAIBasePath.split("/openai/deployments/");if(a.length===2&&a[0].startsWith("http")){let[i]=a;e.kwargs.azure_endpoint=i}}if(!e.kwargs.azure_endpoint&&this.azureOpenAIApiInstanceName&&(e.kwargs.azure_endpoint=`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`),!e.kwargs.deployment_name&&this.azureOpenAIApiDeploymentName&&(e.kwargs.deployment_name=this.azureOpenAIApiDeploymentName),!e.kwargs.deployment_name&&this.azureOpenAIBasePath){let a=this.azureOpenAIBasePath.split("/openai/deployments/");if(a.length===2){let[,i]=a;e.kwargs.deployment_name=i}}e.kwargs.azure_endpoint&&e.kwargs.deployment_name&&e.kwargs.openai_api_base&&delete e.kwargs.openai_api_base,e.kwargs.azure_openai_api_instance_name&&e.kwargs.azure_endpoint&&delete e.kwargs.azure_openai_api_instance_name}return e}withStructuredOutput(e,r){let a={...r};return this.model.startsWith("gpt-4o")&&a?.method===void 0&&(a.method="functionCalling"),super.withStructuredOutput(e,a)}};g5.AzureChatOpenAI=HR});var KR=te((O$e,DJ)=>{DJ.exports=RE()});var JR=te(b5=>{"use strict";Object.defineProperty(b5,"__esModule",{value:!0});b5.OpenAI=void 0;var E9e=ll(),P9e=nR(),T9e=yg(),NJ=cl(),O9e=ZT(),MJ=KR(),F9e=_d(),k9e=gm(),ZR=class extends O9e.BaseLLM{static lc_name(){return"OpenAI"}get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??(0,NJ.getEnvironmentVariable)("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??(0,NJ.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,(this.model?.startsWith("gpt-3.5-turbo")||this.model?.startsWith("gpt-4")||this.model?.startsWith("o1"))&&!this.model?.includes("-instruct"))throw new Error([`Your chosen OpenAI model, "${this.model}", is a chat model and not a text-in/text-out LLM.`,'Passing it into the "OpenAI" class is no longer supported.','Please use the "ChatOpenAI" class instead.',"","See this page for more information:","|","\u2514> https://js.langchain.com/docs/integrations/chat/openai"].join(`
`));if(this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration}}invocationParams(e){return{model:this.model,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,r,a){let i=(0,MJ.chunkArray)(e,this.batchSize),s=[],t={},o=this.invocationParams(r);if(o.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=await(0,P9e.calculateMaxTokens)({prompt:e[0],modelName:this.model})}for(let d=0;d<i.length;d+=1){let c=o.stream?await(async()=>{let V=[],U,z=await this.completionWithRetry({...o,stream:!0,prompt:i[d]},r);for await(let D of z){U||(U={id:D.id,object:D.object,created:D.created,model:D.model});for(let k of D.choices){if(!V[k.index])V[k.index]=k;else{let T=V[k.index];T.text+=k.text,T.finish_reason=k.finish_reason,T.logprobs=k.logprobs}a?.handleLLMNewToken(k.text,{prompt:Math.floor(k.index/this.n),completion:k.index%this.n})}}if(r.signal?.aborted)throw new Error("AbortError");return{...U,choices:V}})():await this.completionWithRetry({...o,stream:!1,prompt:i[d]},{signal:r.signal,...r.options});s.push(...c.choices);let{completion_tokens:y,prompt_tokens:u,total_tokens:S}=c.usage?c.usage:{completion_tokens:void 0,prompt_tokens:void 0,total_tokens:void 0};y&&(t.completionTokens=(t.completionTokens??0)+y),u&&(t.promptTokens=(t.promptTokens??0)+u),S&&(t.totalTokens=(t.totalTokens??0)+S)}return{generations:(0,MJ.chunkArray)(s,this.n).map(d=>d.map(c=>({text:c.text??"",generationInfo:{finishReason:c.finish_reason,logprobs:c.logprobs}}))),llmOutput:{tokenUsage:t}}}async*_streamResponseChunks(e,r,a){let i={...this.invocationParams(r),prompt:e,stream:!0},s=await this.completionWithRetry(i,r);for await(let t of s){let o=t?.choices[0];if(!o)continue;let l=new T9e.GenerationChunk({text:o.text,generationInfo:{finishReason:o.finish_reason}});yield l,a?.handleLLMNewToken(l.text??"")}if(r.signal?.aborted)throw new Error("AbortError")}async completionWithRetry(e,r){let a=this._getClientOptions(r);return this.caller.call(async()=>{try{return await this.client.completions.create(e,a)}catch(i){throw(0,k9e.wrapOpenAIClientError)(i)}})}_getClientOptions(e){if(!this.client){let a={baseURL:this.clientConfig.baseURL},i=(0,F9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new E9e.OpenAI(s)}return{...this.clientConfig,...e}}_llmType(){return"openai"}};b5.OpenAI=ZR});var jJ=te(v5=>{"use strict";Object.defineProperty(v5,"__esModule",{value:!0});v5.AzureOpenAI=void 0;var R9e=ll(),yf=cl(),I9e=JR(),D9e=_d(),XR=class extends I9e.OpenAI{get lc_aliases(){return{...super.lc_aliases,openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"}}get lc_secrets(){return{...super.lc_secrets,azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,yf.getEnvironmentVariable)("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||(0,yf.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.openAIApiKey??e?.apiKey??(0,yf.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,yf.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,yf.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,yf.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,yf.getEnvironmentVariable)("AZURE_OPENAI_ENDPOINT"),this.azureADTokenProvider=e?.azureADTokenProvider,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("Azure OpenAI API key or Token Provider not found")}_getClientOptions(e){if(!this.client){let a={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},i=(0,D9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(s.apiKey=a.azureOpenAIApiKey),s.baseURL||delete s.baseURL,s.defaultHeaders={...s.defaultHeaders,"User-Agent":s.defaultHeaders?.["User-Agent"]?`${s.defaultHeaders["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new R9e.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,...s})}let r={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),r}toJSON(){let e=super.toJSON();function r(a){return typeof a=="object"&&a!=null}return r(e)&&r(e.kwargs)&&(delete e.kwargs.azure_openai_base_path,delete e.kwargs.azure_openai_api_deployment_name,delete e.kwargs.azure_openai_api_key,delete e.kwargs.azure_openai_api_version,delete e.kwargs.azure_open_ai_base_path),e}};v5.AzureOpenAI=XR});var QR=te(y5=>{"use strict";Object.defineProperty(y5,"__esModule",{value:!0});y5.OpenAIEmbeddings=void 0;var N9e=ll(),BJ=cl(),M9e=HT(),j9e=KR(),B9e=_d(),L9e=gm(),YR=class extends M9e.Embeddings{constructor(e){let r={maxConcurrency:2,...e};super(r),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let a=r?.apiKey??r?.openAIApiKey??(0,BJ.getEnvironmentVariable)("OPENAI_API_KEY");this.organization=r?.configuration?.organization??(0,BJ.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=r?.model??r?.modelName??this.model,this.modelName=this.model,this.batchSize=r?.batchSize??this.batchSize,this.stripNewLines=r?.stripNewLines??this.stripNewLines,this.timeout=r?.timeout,this.dimensions=r?.dimensions,this.clientConfig={apiKey:a,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration}}async embedDocuments(e){let r=(0,j9e.chunkArray)(this.stripNewLines?e.map(t=>t.replace(/\n/g," ")):e,this.batchSize),a=r.map(t=>{let o={model:this.model,input:t};return this.dimensions&&(o.dimensions=this.dimensions),this.embeddingWithRetry(o)}),i=await Promise.all(a),s=[];for(let t=0;t<i.length;t+=1){let o=r[t],{data:l}=i[t];for(let d=0;d<o.length;d+=1)s.push(l[d].embedding)}return s}async embedQuery(e){let r={model:this.model,input:this.stripNewLines?e.replace(/\n/g," "):e};this.dimensions&&(r.dimensions=this.dimensions);let{data:a}=await this.embeddingWithRetry(r);return a[0].embedding}async embeddingWithRetry(e){if(!this.client){let a={baseURL:this.clientConfig.baseURL},i=(0,B9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new N9e.OpenAI(s)}let r={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(e,r)}catch(a){throw(0,L9e.wrapOpenAIClientError)(a)}})}};y5.OpenAIEmbeddings=YR});var LJ=te(_5=>{"use strict";Object.defineProperty(_5,"__esModule",{value:!0});_5.AzureOpenAIEmbeddings=void 0;var q9e=ll(),bm=cl(),U9e=QR(),$9e=_d(),V9e=gm(),eI=class extends U9e.OpenAIEmbeddings{constructor(e){super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.batchSize=e?.batchSize??1,this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.apiKey??(0,bm.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,bm.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,bm.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,bm.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,bm.getEnvironmentVariable)("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||(0,bm.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureADTokenProvider=e?.azureADTokenProvider}async embeddingWithRetry(e){if(!this.client){let a={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},i=(0,$9e.getEndpoint)(a),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(s.apiKey=a.azureOpenAIApiKey),s.baseURL||delete s.baseURL,s.defaultHeaders={...s.defaultHeaders,"User-Agent":s.defaultHeaders?.["User-Agent"]?`${s.defaultHeaders["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new q9e.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...s})}let r={};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.query={"api-version":this.azureOpenAIApiVersion,...r.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(e,r)}catch(a){throw(0,V9e.wrapOpenAIClientError)(a)}})}};_5.AzureOpenAIEmbeddings=eI});var UJ=te(qJ=>{"use strict";Object.defineProperty(qJ,"__esModule",{value:!0})});var VJ=te((N$e,$J)=>{$J.exports=l3()});var WJ=te(w5=>{"use strict";Object.defineProperty(w5,"__esModule",{value:!0});w5.DallEAPIWrapper=void 0;var zJ=cl(),z9e=ll(),W9e=VJ(),x5=class extends W9e.Tool{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.apiKey??e?.openAIApiKey??(0,zJ.getEnvironmentVariable)("OPENAI_API_KEY"),a=e?.organization??(0,zJ.getEnvironmentVariable)("OPENAI_ORGANIZATION"),i={apiKey:r,organization:a,dangerouslyAllowBrowser:!0,baseUrl:e?.baseUrl};this.client=new z9e.OpenAI(i),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(r=>r.data.flatMap(i=>i.url?{type:"image_url",image_url:i.url}:[]).filter(i=>i!==void 0&&i.type==="image_url"&&typeof i.image_url=="string"&&i.image_url!==void 0)):e.flatMap(r=>r.data.flatMap(i=>i.b64_json?{type:"image_url",image_url:{url:i.b64_json}}:[]).filter(i=>i!==void 0&&i.type==="image_url"&&typeof i.image_url=="object"&&"url"in i.image_url&&typeof i.image_url.url=="string"&&i.image_url.url!==void 0))}async _call(e){let r={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let s=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(r)));return this.processMultipleGeneratedUrls(s)}let a=await this.client.images.generate(r),i="";return this.dallEResponseFormat==="url"?[i]=a.data.map(s=>s.url).filter(s=>s!=="undefined"):[i]=a.data.map(s=>s.b64_json).filter(s=>s!=="undefined"),i}};w5.DallEAPIWrapper=x5;Object.defineProperty(x5,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"})});var GJ=te(_f=>{"use strict";var G9e=_f&&_f.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),H9e=_f&&_f.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&G9e(e,n,r)};Object.defineProperty(_f,"__esModule",{value:!0});H9e(WJ(),_f)});var HJ=te(S5=>{"use strict";Object.defineProperty(S5,"__esModule",{value:!0});S5.convertPromptToOpenAI=void 0;var K9e=m5();function Z9e(n){let e=n.toChatMessages();return{messages:(0,K9e._convertMessagesToOpenAIParams)(e)}}S5.convertPromptToOpenAI=Z9e});var ZJ=te(Ga=>{"use strict";var J9e=Ga&&Ga.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),pl=Ga&&Ga.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&J9e(e,n,r)};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.convertPromptToOpenAI=Ga.toFile=Ga.OpenAIClient=void 0;var KJ=ll();Object.defineProperty(Ga,"OpenAIClient",{enumerable:!0,get:function(){return KJ.OpenAI}});Object.defineProperty(Ga,"toFile",{enumerable:!0,get:function(){return KJ.toFile}});pl(m5(),Ga);pl(IJ(),Ga);pl(JR(),Ga);pl(jJ(),Ga);pl(LJ(),Ga);pl(QR(),Ga);pl(UJ(),Ga);pl(gm(),Ga);pl(_d(),Ga);pl(GJ(),Ga);var X9e=HJ();Object.defineProperty(Ga,"convertPromptToOpenAI",{enumerable:!0,get:function(){return X9e.convertPromptToOpenAI}})});var tI=te((q$e,JJ)=>{JJ.exports=ZJ()});var C5=te((U$e,XJ)=>{var rI=class{constructor(){this.subsystemColors={main:"\x1B[34m",model:"\x1B[36m",retriever:"\x1B[32m",agent:"\x1B[35m",reset:"\x1B[0m"}}log(e,r,a){let i=this.subsystemColors[r]||this.subsystemColors.reset,s=`[${new Date().toISOString()}] [${e}] [${r.toUpperCase()}] ${a}`;console.log(i+s+this.subsystemColors.reset)}info(e,r){this.log("INFO",e,r)}warn(e,r){this.log("WARN",e,r)}error(e,r){this.log("ERROR",e,r)}success(e,r){this.log("SUCCESS",e,r)}debug(e,r){this.log("DEBUG",e,r)}},Y9e=new rI;XJ.exports={logger:Y9e}});var tX=te((G$e,eX)=>{var{ChatOllama:$$e}=XT(),{ChatOpenAI:YJ}=tI(),{logger:V$e}=C5(),{LLMType:QJ}=l_(),z$e=require("vscode"),W$e=mO(),Q9e={createLLM:async function(n,e,r){switch(n){case QJ.OPENAI:return new YJ({apiKey:r,model:e,temperature:0,maxTokens:1e4,maxRetries:5});case QJ.DEEPSEEK:return new YJ({apiKey:r,model:e,temperature:0,maxTokens:1e3,maxRetries:5});default:throw new Error("No valid LLM type provided.")}}};eX.exports={LLMFactory:Q9e}});var aI=te((H$e,rX)=>{var e7e=`You are given:

- A **code snippet**, typically a function/method/class
- A set of **user preferences** (representing the user's mental state and expectations)

Your task is to:

1. Split the code into multiple clusters, where:
   - Each cluster must be a logically cohesive block, meaning it represents a self-contained unit of purpose or behavior.
   - A helpful rule of thumb is to consider the entire body of each control structure\u2014like an if block, a for loop, or a try/except\u2014as one cluster, because these structures usually encapsulate a single, self-contained logical operation.
     For example:
       - the entire body of an if, else, or elif block
       - the entire body of a for or while loop
       - the entire body of a try, except, or finally block
   - Do NOT create single-line clusters unless absolutely necessary (e.g., an isolated return or assert statement with no adjacent logic).
   - Prefer grouping consecutive simple lines together into a single cluster when they belong to the same logical flow.
   - The number of clusters can also depend on the user's preferences:
     - For less experienced users, or when detailed explanations are requested, it is better to divide the code into **more fine-grained clusters** to improve clarity and focus.
     - For experienced users or when minimal explanations are requested, prefer **larger clusters** that represent broader logical units.
   - Clusters must preserve the original code order and indentation exactly.

2. For each cluster identified, return a **dictionary** with:
   - "text": the **exact code** in that cluster (DO NOT change spaces or indentation)
   - "description": an explanation that:
     - **Respects the user\u2019s preferences**
     - Is detailed or minimal based on the user's style
     - Always addresses the **purpose and logic** of the cluster

Important constraints:
- DO NOT change the indentation or spacing in the "text" field \u2014 this will break downstream parsing
- DO NOT explain line by line unless the user explicitly requests it in their preferences
- DO NOT describe simple, self-evident lines such as:
  - Constant assignments (e.g. x = 5)
  - Basic return statements (e.g. return result)
  - Obvious initializations (e.g. count = 0)
  - Simple list/dictionary creation without logic
- When a line is trivial or meaningless to explain alone, simply write:
  - "description": "No exp"
- Describe **why the logic exists** and **what each block is doing**, not how each syntax element works unless the user is using you to learn a new language.
The concatenation of all clusters must exactly reconstruct the original input code, with no additions, omissions, or changes in formatting (including whitespace and indentation).

The output must be readable, purposeful, and adapted to the mental model and expectations of the user.
`,t7e=`You are provided with the following structure:
{{
    "text": "code snippet in a string format",
    "description": "description (max 3 lines of text in which there is a description in natural language what the code does)"
}}

Your task is to evaluate whether the description is **Semantically correct** \u2014 it accurately reflects what the code actually does.

Respond as follows:
- If the description is correct, complete, and clear, reply with **only**: OK  
- If the description is incorrect, incomplete, or misleading in any way, reply with: NOT OK 
and then, provide a revised version of the description.

Do not include any introductory or explanatory text.
Focus only on the correctness and quality of the description.`;function r7e(n){return n.replace(/[\{\}]/g,e=>e+e)}function a7e(n,e=""){let r=n.toString().split(`</think>
`).pop();return(r.startsWith("```json")||r.startsWith(" ```json")||r.startsWith("\n```json"))&&(r=r.toString().split("```json").pop(),r=r.toString().split("```")[0]),r.startsWith(`\`\`\`${e}`)&&(r=r.toString().split(`\`\`\`${e}`).pop(),r=r.toString().split("```")[0]),r}function n7e(n,e){return n.replace(/\{(\w+)\}/g,(r,a)=>a in e?e[a]:r)}function i7e(n,e){let r=[];for(let[a,i]of Object.entries(e))new RegExp(`\\b${a}\\b`,"g").test(n)&&r.push(i.code);return r.join(`

`)}rX.exports={PLANNING_SYSTEM_PROMPT:e7e,CRITIQUE_SYSTEM_PROMPT:t7e,doubleBraces:r7e,cleanLLMAnswer:a7e,formatTemplate:n7e,extractUsedConstructs:i7e}});var nX=te((Q$e,aX)=>{var{END:K$e,START:s7e}=u_(),{StateGraph:o7e}=u_(),{ChatPromptTemplate:nI}=mW(),{LLMFactory:Z$e}=tX(),{PLANNING_SYSTEM_PROMPT:iI,CRITIQUE_SYSTEM_PROMPT:J$e}=aI(),{doubleBraces:A5,cleanLLMAnswer:X$e,formatTemplate:Y$e,extractUsedConstructs:u7e}=aI(),{agentState:l7e}=l_(),{logger:vm}=C5(),c7e=require("vscode"),{z:jb}=oi(),{ChatOpenAI:d7e}=tI();async function p7e(n){let e=jb.object({results:jb.array(jb.object({text:jb.string().describe("Code snippet exactly as has been sent from the user (no change in indentation or spaces)"),description:jb.string().describe('A natural language description of what the code does written in a way that follows the user preferences.  Write the string "No exp" as description if the code is trivial and explanations are useless (e.g. simple assign statement, simple declarations, basic return statements)')})).describe("A list of code snippets with their descriptions")}).describe("An object containing a list of results"),r=new d7e({apiKey:n.llmAPI,model:n.modelName,temperature:0,maxTokens:1e4,maxRetries:5}).withStructuredOutput(e,{strict:!0}),a=u7e(n.inputCode,n.importedConstructs);if(vm.warn("agent",n.inputCode),n.syntaxCheckMessage===void 0){let c=`
            ## User mental state: 
            ${n.userProfile}

            ## Imported Code: 
            ${A5(a)}

            ## Source code That you will describe: 
            ${A5(n.inputCode)}`;var i=nI.fromMessages([["system",iI],["user",c]]);n.currentAttemptNumber=0}else if(n.syntaxCheckMessage!=="OK"){vm.warn("agent","syntax error found.");var i=nI.fromMessages([["system",iI],["user",A5("DO NOT ADD ```json in the response. This is the source code: "+n.inputCode+" Correct the JSON you generated before as its structure is not correct: "+n.outputString)]]);n.currentAttemptNumber=n.currentAttemptNumber+1}else if(n.critique!=="OK"){vm.warn("agent","critique found."),vm.warn("agent",`${n.critique}`);var i=nI.fromMessages([["system",iI],["user",A5("DO NOT ADD ```json in the response. This is the source code: "+n.inputCode+" This is your older answer: "+n.outputString+" this is my critique for you: "+n.critique)]]);n.currentAttemptNumber=n.currentAttemptNumber+1}let s;try{s=await i.pipe(r).invoke()}catch(c){throw c7e.window.showErrorMessage(`Error during Agent execution: ${c} `),new Error(c.message)}console.log("####"),console.log("Type:",typeof s);let t=s,l=(s.results??[]).map(c=>({text:(c.text??"").trimStart(),description:c.description??""})),d=JSON.stringify(l,null,2);return console.log(d),t?(console.log(`RESPONSE STRING = ${t}`),{inputCode:n.inputCode,outputString:d,currentAttemptNumber:n.currentAttemptNumber}):{inputCode:n.inputCode}}async function f7e(n){let e;try{e=JSON.parse(n.outputString),Array.isArray(e)?e.forEach((r,a)=>{typeof r.text=="string"&&(e[a].text=r.text.trimStart())}):(vm.warn("agent","Expected a list of JSON objects, got a single object."),typeof e.text=="string"&&(e.text=e.text.trimStart()))}catch(r){return vm.error("agent",`JSON was not correct - error: ${r}`),{syntaxCheckMessage:`The following string does not represent a correct JSON, please correct it. ${n.outputString}`}}return{syntaxCheckMessage:"OK",outputStructure:e}}var h7e=new o7e(l7e).addNode("plannerNode",p7e).addNode("syntaxCheck",f7e).addEdge(s7e,"plannerNode").addEdge("plannerNode","syntaxCheck");aX.exports={agent:h7e}});var sX=te((eVe,iX)=>{var ta=require("vscode"),{logger:Bb}=C5(),sI=require("path");async function m7e(n){if(!n)return Bb.error("retriever","Document is null"),null;try{let e=await ta.commands.executeCommand("vscode.executeDocumentSymbolProvider",n.uri);if(!Array.isArray(e)||e.length===0)return Bb.error("retriever","no symbols found"),[];let r=[],a=[];for(let t of e)if(t.kind===ta.SymbolKind.Class){let o=oI(t);if(o.length===0)r.push(t);else{let l=t.range.start,d=o.map(S=>S.range.start.line).sort((S,V)=>S-V)[0],c=new ta.Position(d,0),y=new ta.Range(l,c),u={...t,range:y};r.push(u),a.push(...o)}}else r.push(t);let s=[...r,...a].map(t=>{let{start:o,end:l}=t.range,d,c;if(o.line===l.line){let y=n.lineAt(o.line).text;d=y.trimEnd();let u=y.length;c=new ta.Range(new ta.Position(o.line,0),new ta.Position(o.line,u))}else d=n.getText(t.range),c=t.range;return{name:t.name,type:b7e(t.kind),sourceCode:d,range:c}});if(s.length===0&&Bb.error("retriever","constructs is empty"),n.languageId==="python"){let t=g7e(n);if(t){let o=n.getText().indexOf(t),l=o+t.length,d=n.positionAt(o),c=n.positionAt(l),y=new ta.Range(d,c);s.push({name:"__main__",type:"Main Block",sourceCode:t,range:y})}}for(let t of s)console.log(`--- ${t.name} (${t.type}) ---`),console.log(`Range: [${t.range.start.line}:${t.range.start.character}] -> [${t.range.end.line}:${t.range.end.character}]`),console.log(t.sourceCode),console.log(`------------------------------------------
`);return s}catch(e){Bb.error("retriever",e.toString())}}function g7e(n){let e=n.getText(),r=/if\s+__name__\s*==\s*["']__main__["']:\n((?:[ \t]+(?:.*)?\n?)*)/,a=e.match(r);return a?a[0]:null}function b7e(n){return{[ta.SymbolKind.Function]:"Function",[ta.SymbolKind.Variable]:"Variable",[ta.SymbolKind.Constant]:"Constant",[ta.SymbolKind.Class]:"Class",[ta.SymbolKind.Method]:"Method",[ta.SymbolKind.Property]:"Property",[ta.SymbolKind.Interface]:"Interface",[ta.SymbolKind.Constructor]:"Constructor",[ta.SymbolKind.Enum]:"Enum",[ta.SymbolKind.Module]:"Module",[ta.SymbolKind.Namespace]:"Namespace",[ta.SymbolKind.Package]:"Package",[ta.SymbolKind.Struct]:"Struct",[ta.SymbolKind.TypeParameter]:"TypeParameter",[ta.SymbolKind.Field]:"Field"}[n]||"Unknown"}async function v7e(n){let e=y7e(n),r={};for(let a of e)try{let s=await ta.workspace.findFiles(`**/${a}`,"{**/node_modules/**,**/__pycache__/**,**/*.env,**/.env*,**/*.pyc,**/.git/**,**/dist/**,**/build/**,**/venv/**,**/env/**,**/virtualenv/**,**/env/**}",1);if(s.length===0){console.warn(`Non trovato: ${a}`);continue}let t=s[0],o=await ta.workspace.openTextDocument(t);console.log("### URI = ",o.uri);let l=await ta.commands.executeCommand("vscode.executeDocumentSymbolProvider",o.uri);Array.isArray(l)&&l.filter(c=>c.kind===ta.SymbolKind.Function||c.kind===ta.SymbolKind.Method||c.kind===ta.SymbolKind.Class||c.kind===ta.SymbolKind.Interface).forEach(c=>{if(c.kind!==ta.SymbolKind.Class&&c.kind!==ta.SymbolKind.Interface){let y=c.name.split("(")[0].trim(),u=o.getText(c.range);r[y]={code:u,filePath:a}}else{let y=oI(c);if(console.log(`ALL FUNCTIONS FOUND: ${y}`),!Array.isArray(y)){Bb.warn("FUNCTIONS IS NOT ARRAY");return}for(let u of y){console.log(`FUNCTION FOUND: ${u}`);let S=u.name.split("(")[0].trim(),V=o.getText(u.range);r[S]={code:V,filePath:a}}}})}catch(i){console.warn(`Errore su: ${a}`,i)}return r}function y7e(n){let e=n.languageId,r=n.getText(),a=[];if(e==="python"){let i=/(?:import|from)\s+([\w\.]+)/g,s;for(;(s=i.exec(r))!==null;){let o=s[1].replace(/\./g,"/")+".py",l=sI.basename(o);a.push(l)}}else if(e==="javascript"||e==="typescript"){let i=/require\(['"](.+?)['"]\)/g,s=/import\s+.*?\s+from\s+['"](.+?)['"]/g,t,o=l=>{let d=new Set;d.add(l),!l.endsWith(".js")&&!l.endsWith(".ts")&&d.add(l+".js");for(let c of d)if(c.startsWith(".")||c.startsWith("/")){let y=sI.basename(c);a.push(y)}};for(;(t=i.exec(r))!==null;)o(t[1]);for(;(t=s.exec(r))!==null;)o(t[1])}else if(e==="c"||e==="cpp"){let i=/#include\s+["](.+?)["]/g,s;for(;(s=i.exec(r))!==null;)a.push(s[1])}else if(e==="java"){let i=/import\s+([\w\.]+);/g,s;for(;(s=i.exec(r))!==null;){let t=s[1];if(!t.startsWith("java.")&&!t.startsWith("javax.")){let o=t.replace(/\./g,"/")+".java",l=sI.basename(o);a.push(l)}}}return a}function oI(n){let e=[];if(!n||typeof n!="object"||!Array.isArray(n.children))return e;let r=a=>{if((a.kind===ta.SymbolKind.Function||a.kind===ta.SymbolKind.Method)&&e.push(a),a.children&&a.children.length>0)for(let i of a.children)r(i)};for(let a of n.children)r(a);return e}iX.exports={findConstructs:m7e,extractImportedConstructs:v7e,extractAllFunctionsFromClass:oI}});var lX=te((tVe,uX)=>{var uI=require("fs"),_7e=require("path"),x7e=require("crypto"),lI=_7e.join(__dirname,"explanationCache.json"),E5=new Map;function oX(n){return x7e.createHash("sha256").update(n).digest("hex")}function w7e(){if(uI.existsSync(lI))try{let n=JSON.parse(uI.readFileSync(lI,"utf-8"));for(let e in n)E5.set(e,n[e]);console.log("[Cache] Loaded from disk.")}catch{console.warn("[Cache] Failed to parse cache file. Starting with empty cache.")}}function S7e(){let n=Object.fromEntries(E5);uI.writeFileSync(lI,JSON.stringify(n,null,2),"utf-8"),console.log("[Cache] Saved to disk.")}function C7e(n){let e=oX(n),r=E5.get(e);return r&&console.log(`Reading from cache: ${JSON.stringify(r,null,2)}`),r}function A7e(n,e){console.log("\xA3\xA3\xA3"),console.log("Saving in cache...");let r=oX(n);E5.set(r,e),S7e()}w7e();uX.exports={getCachedExplanation:C7e,storeExplanation:A7e}});var dX=te((rVe,cX)=>{function E7e(n,e){if(e.startsWith(" ")&&(e=e.trimStart()),!n.includes(e.split("")[0])){console.log(`codice NON contiene ${e.split("")[0]}   `);return}}cX.exports={findMatches:E7e}});var dI=te((aVe,hX)=>{var Xl=require("vscode");function P7e(n){return Array.isArray(n)?n:n!=null?[n]:[]}function T7e(n,e,r){let a=0;for(let i=e;i<=r;i++)a=Math.max(a,n.lineAt(i).text.length);return a}function fX(n,e){let a=Xl.window.activeColorTheme.kind===Xl.ColorThemeKind.Dark||Xl.window.activeColorTheme.kind===Xl.ColorThemeKind.HighContrast?"gray":"black";return Xl.window.createTextEditorDecorationType({isWholeLine:!0,after:{contentText:`  ${n}`,color:a,fontWeight:"100"},borderColor:e,borderStyle:"solid",borderWidth:"0 0 0 1px"})}function O7e(n,e){let r=n.trim().split(/\s+/),a=Array.from({length:e},()=>[]),i=Math.ceil(r.length/e),s=0;for(let t=0;t<e&&s<r.length;t++)for(;a[t].length<i&&s<r.length;)a[t].push(r[s]),s++;return a.map(t=>t.join(" "))}function F7e(n,e,r,a,i){let s=k7e(e.getText(),i);if(s===-1)return console.warn("\u26A0\uFE0F Match not found for matchText:"),console.warn(i),[];let t=s+i.length,o=e.positionAt(s),l=e.positionAt(t),d=new Xl.Range(o,l),c=d.start.line,y=d.end.line,u=r.description,S=O7e(u,y-c+1);for(;S.length<y-c+1;)S.push(" ");let V=Math.max(...Array.from({length:y-c+1},(D,k)=>e.lineAt(c+k).text.length)),U=a%2===0?"rgb(255, 255, 112)":"rgba(128, 0, 255, 1)",z=S.slice(0,y-c+1).map((D,k)=>{let T=c+k,R=e.lineAt(T).text.length,g=V-R+1,v="\xA0".repeat(g)+D,b=fX(v,U),f=new Xl.Range(new Xl.Position(T,R),new Xl.Position(T,R));return{type:b,range:f}});return z.forEach(({type:D,range:k})=>{n.setDecorations(D,[k])}),z}function cI(n){return n===" "||n==="	"||n===`
`||n==="\r"?" ":n}function pX(n){return n.split("").map(cI).join("").replace(/\s+/g," ").trim()}function k7e(n,e){let r=pX(e),i=pX(n).indexOf(r);if(i===-1)return-1;let s=0,t=0;for(;s<n.length&&t<i;)if(cI(n[s])===" "){for(;s<n.length&&cI(n[s])===" ";)s++;t++}else s++,t++;return s}var R7e={decorations:[],decorationsVisible:!0};hX.exports={normalizeOutputStructure:P7e,getMaxLineLength:T7e,createDecorationType:fX,decorateExplanation:F7e,extensionState:R7e}});var fI=te((nVe,gX)=>{var pI=require("vscode");function I7e(n){let e=mX(n);if(e.length>0){console.log("Profilo gi\xE0 presente:",e);return}let r=pI.window.createWebviewPanel("quizWebview","Theory Of Mind Profiler",pI.ViewColumn.Beside,{enableScripts:!0});r.webview.html=D7e(r.webview,n),r.webview.onDidReceiveMessage(async a=>{a.type==="quizResponse"&&await N7e(n,a.value.answer,a.value.question)},void 0,n.subscriptions)}function D7e(n,e){return`
		<!DOCTYPE html>
		<html lang="it">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<title>Quiz VS Code</title>
			<style>
				body { font-family: Arial, sans-serif; padding: 20px; }
				h2 { color: #007acc; }
				button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
				#saveButton { background-color: #007acc; color: white; margin-top: 30px; }
				#confirmation { color: green; margin-top: 15px; display: none; font-weight: bold; }
			</style>
		</head>
		<body>
			<h2>What is your programming experience level?</h2>
			<button onclick="sendAnswer('Beginner', 'What is your programming experience level?')">Beginner</button>
			<button onclick="sendAnswer('Intermediate', 'What is your programming experience level?')">Intermediate</button>
			<button onclick="sendAnswer('Expert', 'What is your programming experience level?')">Expert</button>
			<button onclick="sendAnswer('Mentor/Professional', 'What is your programming experience level?')">Mentor/Professional</button>

			<h2>What is your current role?</h2>
			<button onclick="sendAnswer('Student', 'What is your current role?')">Student</button>
			<button onclick="sendAnswer('Junior Developer', 'What is your current role?')">Junior Developer</button>
			<button onclick="sendAnswer('Senior Developer', 'What is your current role?')">Senior Developer</button>
			<button onclick="sendAnswer('Researcher', 'What is your current role?')">Researcher</button>

			<h2>Why are you using this extension?</h2>
			<button onclick="sendAnswer('To learn a language', 'Why are you using this extension?')">To learn a language</button>
			<button onclick="sendAnswer('To boost productivity', 'Why are you using this extension?')">To boost productivity</button>
			<button onclick="sendAnswer('To prepare for an exam or interview', 'Why are you using this extension?')">To prepare for an exam or interview</button>
			<button onclick="sendAnswer('To write cleaner code', 'Why are you using this extension?')">To write cleaner code</button>

			<h2>How do you prefer to receive explanations?</h2>
			<button onclick="sendAnswer('Short and direct', 'How do you prefer to receive explanations?')">Short and direct</button>
			<button onclick="sendAnswer('Detailed and technical', 'How do you prefer to receive explanations?')">Detailed and technical</button>

			<h2>Which languages do you mainly use?</h2>
			<button onclick="sendAnswer('JavaScript', 'Which languages do you mainly use?')">JavaScript</button>
			<button onclick="sendAnswer('Python', 'Which languages do you mainly use?')">Python</button>
			<button onclick="sendAnswer('TypeScript', 'Which languages do you mainly use?')">TypeScript</button>
			<button onclick="sendAnswer('C++', 'Which languages do you mainly use?')">C++</button>
			<button onclick="sendAnswer('Java', 'Which languages do you mainly use?')">Java</button>
			<button onclick="sendAnswer('Other', 'Which languages do you mainly use?')">Other</button>

			<h2>What is your main goal with this extension?</h2>
			<button onclick="sendAnswer('Learning new things', 'What is your main goal with this extension?')">Learning new things</button>
			<button onclick="sendAnswer('Saving time', 'What is your main goal with this extension?')">Saving time</button>
			<button onclick="sendAnswer('Better understanding my code', 'What is your main goal with this extension?')">Better understanding my code</button>
			<button onclick="sendAnswer('Getting real-time development help', 'What is your main goal with this extension?')">Getting real-time development help</button>

			<h2>What tone do you prefer from the assistant?</h2>
			<button onclick="sendAnswer('Friendly', 'What tone do you prefer from the assistant?')">Friendly</button>
			<button onclick="sendAnswer('Professional', 'What tone do you prefer from the assistant?')">Professional</button>
			<button onclick="sendAnswer('Neutral', 'What tone do you prefer from the assistant?')">Neutral</button>

			<!-- Bottone di salvataggio -->
			<div>
				<button id="saveButton" onclick="saveQuiz()">Save State</button>
				<div id="confirmation">User Mental State Saved!</div>
			</div>

			<script>
				const vscode = acquireVsCodeApi();
				
				function sendAnswer(answer, question) {
					vscode.postMessage({ type: "quizResponse", value: { question, answer } });
				}

				function saveQuiz() {
					vscode.postMessage({ type: "quizComplete" });
					document.getElementById("confirmation").style.display = "block";
				}
			</script>
		</body>
		</html>
	`}async function N7e(n,e,r){let a=n.globalState.get("userMind")||[];a.push({question:r,answer:e}),await n.globalState.update("userMind",a)}function mX(n){return n.globalState.get("userMind")||[]}function M7e(n){n.globalState.update("userMind",null)}function j7e(n){let e=n.globalState.get("userMind"),r=[`- programming experience: ${e[0].answer}`,`- role: ${e[1].answer}`,`- The user is using this LLM: ${e[2].answer}`,`- The user wants the explanation that are: ${e[3].answer}`,`- The user is very confident in: ${e[4].answer}`,`- The goal of the user is to: ${e[5].answer}`,`- Use the following tone: ${e[6].answer}`].join(`
`);pI.window.showInformationMessage(r)}gX.exports={runTomQuiz:I7e,getSavedAnswers:mX,flushUserMind:M7e,showUserMentalState:j7e}});var hI=te((iVe,bX)=>{var P5=require("vscode");function B7e(n){let e=P5.window.createWebviewPanel("configuration","TARS Configuration",P5.ViewColumn.One,{enableScripts:!0});e.webview.html=L7e(e.webview,n),e.webview.onDidReceiveMessage(async r=>{if(r.type==="modelConfig"){let a=r.value.answers;await n.globalState.update("tarsConfiguration",a),P5.window.showInformationMessage("Configurazione salvata con successo!")}},void 0,n.subscriptions)}function L7e(n,e){return`
    <!DOCTYPE html>
    <html lang="it">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Configurazione TARS</title>
        <style>
            body { font-family: sans-serif; padding: 20px; }
            h2 { color: #007acc; }
            label { display: block; margin-top: 15px; font-weight: bold; }
            input, select {
                width: 100%;
                padding: 8px;
                margin-top: 5px;
                box-sizing: border-box;
            }
            button {
                margin-top: 20px;
                padding: 10px 20px;
                background-color: #007acc;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }
            button:hover {
                background-color: #005fa3;
            }
            #apiKeyContainer {
                margin-top: 10px;
                display: none;
            }
        </style>
    </head>
    <body>
        <h2>Configurazione Modello LLM</h2>

        <label for="llmName">Nome del modello</label>
        <input type="text" id="llmName" placeholder="es. GPT-4, Mistral 7B">

        <label for="llmType">Tipo di utilizzo</label>
        <select id="llmType" onchange="toggleApiKeyField()">
            <option value="local">Locale</option>
            <option value="api">API (OpenAI)</option>
        </select>

        <div id="apiKeyContainer">
            <label for="apiKey">OpenAI API Key</label>
            <input type="password" id="apiKey" placeholder="sk-...">
        </div>

        <button onclick="submitConfig()">Salva configurazione</button>

        <script>
            const vscode = acquireVsCodeApi();

            function toggleApiKeyField() {
                const type = document.getElementById("llmType").value;
                const apiField = document.getElementById("apiKeyContainer");
                apiField.style.display = type === "api" ? "block" : "none";
            }

            function submitConfig() {
                const llmName = document.getElementById("llmName").value;
                const llmType = document.getElementById("llmType").value;
                const apiKey = llmType === "api" ? document.getElementById("apiKey").value : "N/A";

                vscode.postMessage({
                    type: "modelConfig",
                    value: {
                        answers: [
                            { question: "LLM", answer: llmName },
                            { question: "LLM Type", answer: llmType },
                            { question: "OpenAI API Key", answer: apiKey }
                        ]
                    }
                });
            }
        </script>
    </body>
    </html>
    `}function q7e(n){n.globalState.update("tarsConfiguration",null)}function U7e(n){let e=n.globalState.get("tarsConfiguration"),r=[`- LLM: ${e[0].answer}`,`- Type: ${e[1].answer}`,`- OpenAI API: ${e[2].answer}`].join(`
`);P5.window.showInformationMessage(r)}bX.exports={configureTars:B7e,flushConfiguration:q7e,showConfig:U7e}});var mI=te((sVe,vX)=>{var $7e=require("vscode"),{extensionState:ym}=dI();function V7e(n){let e=$7e.window.activeTextEditor;!e||ym.decorations.length===0||(ym.decorationsVisible?(ym.decorations.forEach(({type:r})=>{e.setDecorations(r,[])}),ym.decorationsVisible=!1):(ym.decorations.forEach(({type:r,range:a})=>{e.setDecorations(r,[a])}),ym.decorationsVisible=!0))}vX.exports={toggleDecorations:V7e}});var wX=te((lVe,xX)=>{var{LLMType:yX}=l_(),T5=require("vscode"),{agent:z7e}=nX(),oVe=require("fs"),{findConstructs:W7e,extractImportedConstructs:G7e}=sX(),{getCachedExplanation:H7e,storeExplanation:K7e}=lX(),{findMatches:uVe}=dX(),{normalizeOutputStructure:_X,decorateExplanation:Z7e,extensionState:gI}=dI(),{runTomQuiz:J7e}=fI(),{configureTars:X7e}=hI(),{toggleDecorations:Y7e}=mI();async function Q7e(n){let e=T5.window.activeTextEditor;if(!e)return;let r=e.document,a=z7e.compile();gI.decorations=[],Y7e(n);let i=n.globalState.get("tarsConfiguration");i||(await X7e(n),i=n.globalState.get("tarsConfiguration"));let s=i[0].answer,t=i[1].answer,o=i[2].answer,l=n.globalState.get("userMind");l||(await J7e(n),l=n.globalState.get("userMind"));let d=[`- programming experience: ${l[0].answer}`,`- role: ${l[1].answer}`,`- The user is using this LLM: ${l[2].answer}`,`- The user wants the explanation that are: ${l[3].answer}`,`- The user is very confident in: ${l[4].answer}`,`- The goal of the user is to: ${l[5].answer}`,`- Use the following tone: ${l[6].answer}`].join(`
`),c=e.selection,y=c&&!c.isEmpty,u=await W7e(r),S;y?S=[{sourceCode:r.getText(c),range:c}]:S=u.some(D=>D.type==="Method"||D.type==="Function"||D.type==="Class")?u:[{sourceCode:r.getText(),range:new T5.Range(0,0,r.lineCount,0)}];let V=await G7e(r);T5.window.showInformationMessage("Starting Agent...");let U=0;for(let z of S){let D=H7e(z.sourceCode),k;if(D)k=_X(D);else{let T;try{T=await a.invoke({modelName:s,inputCode:z.sourceCode,llmType:t==="api"?yX.OPENAI:yX.OLLAMA,maxAttempts:3,userProfile:d,llmAPI:o,importedConstructs:V})}catch(R){console.error("Error during agent invocation:",R)}k=_X(T.outputStructure),K7e(z.sourceCode,k)}for(let T of k){U+=1;let R=T.text,g=r.getText(z.range).replace(/\s+/g," ").trim(),m=R.replace(/\s+/g," ").trim();g.includes(m)?(T.description==="No exp"&&(T.description="   "),gI.decorations.push(...Z7e(e,r,T,U,R)),gI.decorationsVisible=!0):(T5.window.showInformationMessage(`\u274C No match found.
Element text: ${T.text}
Range: from line ${z.range.start.line} to ${z.range.end.line}
Text in document: ${r.getText(z.range)}`),console.log(`--\u274C No match found:
					\u2022 Element text    : ${T.text}
					\u2022 Range           : from line ${z.range.start.line} to ${z.range.end.line}
					\u2022 Text in document:
  					${r.getText(z.range)}`))}}}xX.exports={explainCodeCommand:Q7e}});var CX=te((cVe,SX)=>{var eSe=require("vscode");function tSe(n){eSe.window.showInformationMessage(`\u{1F916} Tars Help:
- "Configure Tars": Set up your API key, model, and other configuration options.
- "Explain Code": Select a piece of code and get a detailed natural language explanation.
- "Flush Tars State": Reset internal state and clear any temporary cache or data.
- "Theory Of Mind Profiler": Run a ToM-based profiling analysis of the code.`)}SX.exports={helpCommand:tSe}});var AX=te(O5=>{"use strict";Object.defineProperty(O5,"__esModule",{value:!0});O5.BaseDocumentLoader=void 0;var bI=class{async loadAndSplit(e){if(e===void 0)throw new Error("You must pass a text splitter to use this method.");let r=await this.load();return e.invoke(r)}};O5.BaseDocumentLoader=bI});var PX=te((pVe,EX)=>{EX.exports=AX()});var vI=te(xf=>{"use strict";var rSe=xf&&xf.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),aSe=xf&&xf.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rSe(e,n,r)};Object.defineProperty(xf,"__esModule",{value:!0});aSe(PX(),xf)});var TX=te(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.DirectoryLoader=fl.UnknownHandling=void 0;var nSe=cl(),iSe=vI();fl.UnknownHandling={Ignore:"ignore",Warn:"warn",Error:"error"};var yI=class n extends iSe.BaseDocumentLoader{constructor(e,r,a=!0,i=fl.UnknownHandling.Warn){if(super(),Object.defineProperty(this,"directoryPath",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"loaders",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"recursive",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"unknown",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.keys(r).length===0)throw new Error("Must provide at least one loader");for(let s in r)if(Object.hasOwn(r,s)&&s[0]!==".")throw new Error(`Extension must start with a dot: ${s}`)}async load(){let{readdir:e,extname:r,resolve:a}=await n.imports(),i=await e(this.directoryPath,{withFileTypes:!0}),s=[];for(let t of i){let o=a(this.directoryPath,t.name);if(t.isDirectory()){if(this.recursive){let l=new n(o,this.loaders,this.recursive,this.unknown);s.push(...await l.load())}}else{let l=this.loaders[r(t.name)];if(l){let d=l(o);s.push(...await d.load())}else switch(this.unknown){case fl.UnknownHandling.Ignore:break;case fl.UnknownHandling.Warn:console.warn(`Unknown file type: ${t.name}`);break;case fl.UnknownHandling.Error:throw new Error(`Unknown file type: ${t.name}`);default:throw new Error(`Unknown unknown handling: ${this.unknown}`)}}}return s}static async imports(){try{let{extname:e,resolve:r}=await import("node:path"),{readdir:a}=await import("node:fs/promises");return{readdir:a,extname:e,resolve:r}}catch(e){throw console.error(e),new Error(`Failed to load fs/promises. DirectoryLoader available only on environment 'node'. It appears you are running environment '${(0,nSe.getEnv)()}'. See https://<link to docs> for alternatives.`)}}};fl.DirectoryLoader=yI});var FX=te((mVe,OX)=>{OX.exports=TX()});var F5=te((gVe,kX)=>{kX.exports=hS()});var RX=te(k5=>{"use strict";Object.defineProperty(k5,"__esModule",{value:!0});k5.BufferLoader=void 0;var sSe=cl(),oSe=vI(),_I=class n extends oSe.BaseDocumentLoader{constructor(e){super(),Object.defineProperty(this,"filePathOrBlob",{enumerable:!0,configurable:!0,writable:!0,value:e})}async load(){let e,r;if(typeof this.filePathOrBlob=="string"){let{readFile:a}=await n.imports();e=await a(this.filePathOrBlob),r={source:this.filePathOrBlob}}else e=await this.filePathOrBlob.arrayBuffer().then(a=>Buffer.from(a)),r={source:"blob",blobType:this.filePathOrBlob.type};return this.parse(e,r)}static async imports(){try{let{readFile:e}=await import("node:fs/promises");return{readFile:e}}catch(e){throw console.error(e),new Error(`Failed to load fs/promises. TextLoader available only on environment 'node'. It appears you are running environment '${(0,sSe.getEnv)()}'. See https://<link to docs> for alternatives.`)}}};k5.BufferLoader=_I});var DX=te((vVe,IX)=>{IX.exports=RX()});var MX=te((yVe,NX)=>{function uSe(n,e){setImmediate(e)}NX.exports=uSe});var jX=te((Lb,xI)=>{(function(e,r){typeof Lb=="object"&&typeof xI=="object"?xI.exports=r():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf.worker",[],r):typeof Lb=="object"?Lb["pdfjs-dist/build/pdf.worker"]=r():e["pdfjs-dist/build/pdf.worker"]=e.pdfjsDistBuildPdfWorker=r()})(typeof self<"u"?self:Lb,function(){return function(n){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return n[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=e,r.d=function(a,i,s){r.o(a,i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get:s})},r.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(i,"a",i),i},r.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},r.p="",r(r.s=82)}([function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unreachable=e.warn=e.utf8StringToString=e.stringToUTF8String=e.stringToPDFString=e.stringToBytes=e.string32=e.shadow=e.setVerbosityLevel=e.ReadableStream=e.removeNullCharacters=e.readUint32=e.readUint16=e.readInt8=e.log2=e.loadJpegStream=e.isEvalSupported=e.isLittleEndian=e.createValidAbsoluteUrl=e.isSameOrigin=e.isNodeJS=e.isSpace=e.isString=e.isNum=e.isEmptyObj=e.isBool=e.isArrayBuffer=e.info=e.getVerbosityLevel=e.getLookupTableFactory=e.deprecated=e.createObjectURL=e.createPromiseCapability=e.createBlob=e.bytesToString=e.assert=e.arraysToBytes=e.arrayByteLength=e.FormatError=e.XRefParseException=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.StatTimer=e.PasswordResponses=e.PasswordException=e.PageViewport=e.NotImplementedException=e.NativeImageDecoding=e.MissingPDFException=e.MissingDataException=e.MessageHandler=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VERBOSITY_LEVELS=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};r(84);var i=r(125),s=[.001,0,0,.001,0,0],t={NONE:"none",DECODE:"decode",DISPLAY:"display"},o={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},S={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},V={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},U={errors:0,warnings:1,infos:5},z={NONE:0,BINARY:1,STREAM:2},D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},k=U.warnings;function T(K){k=K}function R(){return k}function g(K){k>=U.infos&&console.log("Info: "+K)}function m(K){k>=U.warnings&&console.log("Warning: "+K)}function v(K){console.log("Deprecated API usage: "+K)}function b(K){throw new Error(K)}function f(K,re){K||b(re)}var p={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};function h(K,re){try{var me=new URL(K);if(!me.origin||me.origin==="null")return!1}catch{return!1}var xe=new URL(re,me);return me.origin===xe.origin}function _(K){if(!K)return!1;switch(K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function I(K,re){if(!K)return null;try{var me=re?new URL(K,re):new URL(K);if(_(me))return me}catch{}return null}function W(K,re,me){return Object.defineProperty(K,re,{value:me,enumerable:!0,configurable:!0,writable:!1}),me}function q(K){var re;return function(){return K&&(re=Object.create(null),K(re),K=null),re}}var B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},N=function(){function re(me,xe){this.name="PasswordException",this.message=me,this.code=xe}return re.prototype=new Error,re.constructor=re,re}(),L=function(){function re(me,xe){this.name="UnknownErrorException",this.message=me,this.details=xe}return re.prototype=new Error,re.constructor=re,re}(),P=function(){function re(me){this.name="InvalidPDFException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),O=function(){function re(me){this.name="MissingPDFException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),E=function(){function re(me,xe){this.name="UnexpectedResponseException",this.message=me,this.status=xe}return re.prototype=new Error,re.constructor=re,re}(),w=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="NotImplementedException",re.constructor=re,re}(),A=function(){function re(me,xe){this.begin=me,this.end=xe,this.message="Missing data ["+me+", "+xe+")"}return re.prototype=new Error,re.prototype.name="MissingDataException",re.constructor=re,re}(),M=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="XRefParseException",re.constructor=re,re}(),j=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="FormatError",re.constructor=re,re}(),C=function(){function re(me){this.name="AbortException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),x=/\x00/g;function F(K){return typeof K!="string"?(m("The argument for removeNullCharacters must be a string."),K):K.replace(x,"")}function $(K){f(K!==null&&(typeof K>"u"?"undefined":a(K))==="object"&&K.length!==void 0,"Invalid argument for bytesToString");var re=K.length,me=8192;if(re<me)return String.fromCharCode.apply(null,K);for(var xe=[],_e=0;_e<re;_e+=me){var ge=Math.min(_e+me,re),ye=K.subarray(_e,ge);xe.push(String.fromCharCode.apply(null,ye))}return xe.join("")}function G(K){f(typeof K=="string","Invalid argument for stringToBytes");for(var re=K.length,me=new Uint8Array(re),xe=0;xe<re;++xe)me[xe]=K.charCodeAt(xe)&255;return me}function Z(K){return K.length!==void 0?K.length:(f(K.byteLength!==void 0),K.byteLength)}function J(K){if(K.length===1&&K[0]instanceof Uint8Array)return K[0];var re=0,me,xe=K.length,_e,ge;for(me=0;me<xe;me++)_e=K[me],ge=Z(_e),re+=ge;var ye=0,Ne=new Uint8Array(re);for(me=0;me<xe;me++)_e=K[me],_e instanceof Uint8Array||(typeof _e=="string"?_e=G(_e):_e=new Uint8Array(_e)),ge=_e.byteLength,Ne.set(_e,ye),ye+=ge;return Ne}function Y(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,K&255)}function ee(K){for(var re=1,me=0;K>re;)re<<=1,me++;return me}function ae(K,re){return K[re]<<24>>24}function pe(K,re){return K[re]<<8|K[re+1]}function se(K,re){return(K[re]<<24|K[re+1]<<16|K[re+2]<<8|K[re+3])>>>0}function ue(){var K=new Uint8Array(4);K[0]=1;var re=new Uint32Array(K.buffer,0,1);return re[0]===1}function le(){try{return new Function(""),!0}catch{return!1}}var ie=[1,0,0,1,0,0],de=function(){function re(){}var me=["rgb(",0,",",0,",",0,")"];re.makeCssRgb=function(ge,ye,Ne){return me[1]=ge,me[3]=ye,me[5]=Ne,me.join("")},re.transform=function(ge,ye){return[ge[0]*ye[0]+ge[2]*ye[1],ge[1]*ye[0]+ge[3]*ye[1],ge[0]*ye[2]+ge[2]*ye[3],ge[1]*ye[2]+ge[3]*ye[3],ge[0]*ye[4]+ge[2]*ye[5]+ge[4],ge[1]*ye[4]+ge[3]*ye[5]+ge[5]]},re.applyTransform=function(ge,ye){var Ne=ge[0]*ye[0]+ge[1]*ye[2]+ye[4],Le=ge[0]*ye[1]+ge[1]*ye[3]+ye[5];return[Ne,Le]},re.applyInverseTransform=function(ge,ye){var Ne=ye[0]*ye[3]-ye[1]*ye[2],Le=(ge[0]*ye[3]-ge[1]*ye[2]+ye[2]*ye[5]-ye[4]*ye[3])/Ne,Je=(-ge[0]*ye[1]+ge[1]*ye[0]+ye[4]*ye[1]-ye[5]*ye[0])/Ne;return[Le,Je]},re.getAxialAlignedBoundingBox=function(ge,ye){var Ne=re.applyTransform(ge,ye),Le=re.applyTransform(ge.slice(2,4),ye),Je=re.applyTransform([ge[0],ge[3]],ye),Xe=re.applyTransform([ge[2],ge[1]],ye);return[Math.min(Ne[0],Le[0],Je[0],Xe[0]),Math.min(Ne[1],Le[1],Je[1],Xe[1]),Math.max(Ne[0],Le[0],Je[0],Xe[0]),Math.max(Ne[1],Le[1],Je[1],Xe[1])]},re.inverseTransform=function(ge){var ye=ge[0]*ge[3]-ge[1]*ge[2];return[ge[3]/ye,-ge[1]/ye,-ge[2]/ye,ge[0]/ye,(ge[2]*ge[5]-ge[4]*ge[3])/ye,(ge[4]*ge[1]-ge[5]*ge[0])/ye]},re.apply3dTransform=function(ge,ye){return[ge[0]*ye[0]+ge[1]*ye[1]+ge[2]*ye[2],ge[3]*ye[0]+ge[4]*ye[1]+ge[5]*ye[2],ge[6]*ye[0]+ge[7]*ye[1]+ge[8]*ye[2]]},re.singularValueDecompose2dScale=function(ge){var ye=[ge[0],ge[2],ge[1],ge[3]],Ne=ge[0]*ye[0]+ge[1]*ye[2],Le=ge[0]*ye[1]+ge[1]*ye[3],Je=ge[2]*ye[0]+ge[3]*ye[2],Xe=ge[2]*ye[1]+ge[3]*ye[3],ut=(Ne+Xe)/2,mt=Math.sqrt((Ne+Xe)*(Ne+Xe)-4*(Ne*Xe-Je*Le))/2,Tt=ut+mt||1,Kt=ut-mt||1;return[Math.sqrt(Tt),Math.sqrt(Kt)]},re.normalizeRect=function(ge){var ye=ge.slice(0);return ge[0]>ge[2]&&(ye[0]=ge[2],ye[2]=ge[0]),ge[1]>ge[3]&&(ye[1]=ge[3],ye[3]=ge[1]),ye},re.intersect=function(ge,ye){function Ne(ut,mt){return ut-mt}var Le=[ge[0],ge[2],ye[0],ye[2]].sort(Ne),Je=[ge[1],ge[3],ye[1],ye[3]].sort(Ne),Xe=[];if(ge=re.normalizeRect(ge),ye=re.normalizeRect(ye),Le[0]===ge[0]&&Le[1]===ye[0]||Le[0]===ye[0]&&Le[1]===ge[0])Xe[0]=Le[1],Xe[2]=Le[2];else return!1;if(Je[0]===ge[1]&&Je[1]===ye[1]||Je[0]===ye[1]&&Je[1]===ge[1])Xe[1]=Je[1],Xe[3]=Je[2];else return!1;return Xe};var xe=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return re.toRoman=function(ge,ye){f(Number.isInteger(ge)&&ge>0,"The number should be a positive integer.");for(var Ne,Le=[];ge>=1e3;)ge-=1e3,Le.push("M");Ne=ge/100|0,ge%=100,Le.push(xe[Ne]),Ne=ge/10|0,ge%=10,Le.push(xe[10+Ne]),Le.push(xe[20+ge]);var Je=Le.join("");return ye?Je.toLowerCase():Je},re.appendToArray=function(ge,ye){Array.prototype.push.apply(ge,ye)},re.prependToArray=function(ge,ye){Array.prototype.unshift.apply(ge,ye)},re.extendObj=function(ge,ye){for(var Ne in ye)ge[Ne]=ye[Ne]},re.getInheritableProperty=function(ge,ye,Ne){for(;ge&&!ge.has(ye);)ge=ge.get("Parent");return ge?Ne?ge.getArray(ye):ge.get(ye):null},re.inherit=function(ge,ye,Ne){ge.prototype=Object.create(ye.prototype),ge.prototype.constructor=ge;for(var Le in Ne)ge.prototype[Le]=Ne[Le]},re.loadScript=function(ge,ye){var Ne=document.createElement("script"),Le=!1;Ne.setAttribute("src",ge),ye&&(Ne.onload=function(){Le||ye(),Le=!0}),document.getElementsByTagName("head")[0].appendChild(Ne)},re}(),fe=function(){function re(me,xe,_e,ge,ye,Ne){this.viewBox=me,this.scale=xe,this.rotation=_e,this.offsetX=ge,this.offsetY=ye;var Le=(me[2]+me[0])/2,Je=(me[3]+me[1])/2,Xe,ut,mt,Tt;switch(_e=_e%360,_e=_e<0?_e+360:_e,_e){case 180:Xe=-1,ut=0,mt=0,Tt=1;break;case 90:Xe=0,ut=1,mt=1,Tt=0;break;case 270:Xe=0,ut=-1,mt=-1,Tt=0;break;default:Xe=1,ut=0,mt=0,Tt=-1;break}Ne&&(mt=-mt,Tt=-Tt);var Kt,yr,dr,hr;Xe===0?(Kt=Math.abs(Je-me[1])*xe+ge,yr=Math.abs(Le-me[0])*xe+ye,dr=Math.abs(me[3]-me[1])*xe,hr=Math.abs(me[2]-me[0])*xe):(Kt=Math.abs(Le-me[0])*xe+ge,yr=Math.abs(Je-me[1])*xe+ye,dr=Math.abs(me[2]-me[0])*xe,hr=Math.abs(me[3]-me[1])*xe),this.transform=[Xe*xe,ut*xe,mt*xe,Tt*xe,Kt-Xe*xe*Le-mt*xe*Je,yr-ut*xe*Le-Tt*xe*Je],this.width=dr,this.height=hr,this.fontScale=xe}return re.prototype={clone:function(xe){xe=xe||{};var _e="scale"in xe?xe.scale:this.scale,ge="rotation"in xe?xe.rotation:this.rotation;return new re(this.viewBox.slice(),_e,ge,this.offsetX,this.offsetY,xe.dontFlip)},convertToViewportPoint:function(xe,_e){return de.applyTransform([xe,_e],this.transform)},convertToViewportRectangle:function(xe){var _e=de.applyTransform([xe[0],xe[1]],this.transform),ge=de.applyTransform([xe[2],xe[3]],this.transform);return[_e[0],_e[1],ge[0],ge[1]]},convertToPdfPoint:function(xe,_e){return de.applyInverseTransform([xe,_e],this.transform)}},re}(),he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Se(K){var re,me=K.length,xe=[];if(K[0]==="\xFE"&&K[1]==="\xFF")for(re=2;re<me;re+=2)xe.push(String.fromCharCode(K.charCodeAt(re)<<8|K.charCodeAt(re+1)));else for(re=0;re<me;++re){var _e=he[K.charCodeAt(re)];xe.push(_e?String.fromCharCode(_e):K.charAt(re))}return xe.join("")}function Ce(K){return decodeURIComponent(escape(K))}function Ae(K){return unescape(encodeURIComponent(K))}function Ee(K){for(var re in K)return!1;return!0}function ke(K){return typeof K=="boolean"}function Fe(K){return typeof K=="number"}function Pe(K){return typeof K=="string"}function Ie(K){return(typeof K>"u"?"undefined":a(K))==="object"&&K!==null&&K.byteLength!==void 0}function $e(K){return K===32||K===9||K===13||K===10}function Ke(){return(typeof process>"u"?"undefined":a(process))==="object"&&process+""=="[object process]"}function Ze(){var K={};return K.promise=new Promise(function(re,me){K.resolve=re,K.reject=me}),K}var ot=function(){function re(xe,_e,ge){for(;xe.length<ge;)xe+=_e;return xe}function me(){this.started=Object.create(null),this.times=[],this.enabled=!0}return me.prototype={time:function(_e){this.enabled&&(_e in this.started&&m("Timer is already running for "+_e),this.started[_e]=Date.now())},timeEnd:function(_e){this.enabled&&(_e in this.started||m("Timer has not been started for "+_e),this.times.push({name:_e,start:this.started[_e],end:Date.now()}),delete this.started[_e])},toString:function(){var _e,ge,ye=this.times,Ne="",Le=0;for(_e=0,ge=ye.length;_e<ge;++_e){var Je=ye[_e].name;Je.length>Le&&(Le=Je.length)}for(_e=0,ge=ye.length;_e<ge;++_e){var Xe=ye[_e],ut=Xe.end-Xe.start;Ne+=re(Xe.name," ",Le)+" "+ut+`ms
`}return Ne}},me}(),et=function(re,me){if(typeof Blob<"u")return new Blob([re],{type:me});throw new Error('The "Blob" constructor is not supported.')},ct=function(){var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(xe,_e){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!ge&&URL.createObjectURL){var ye=et(xe,_e);return URL.createObjectURL(ye)}for(var Ne="data:"+_e+";base64,",Le=0,Je=xe.length;Le<Je;Le+=3){var Xe=xe[Le]&255,ut=xe[Le+1]&255,mt=xe[Le+2]&255,Tt=Xe>>2,Kt=(Xe&3)<<4|ut>>4,yr=Le+1<Je?(ut&15)<<2|mt>>6:64,dr=Le+2<Je?mt&63:64;Ne+=re[Tt]+re[Kt]+re[yr]+re[dr]}return Ne}}();function ht(K,re){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return K?new Promise(function(xe,_e){xe(K.apply(me,re))}):Promise.resolve(void 0)}function Ge(K){if((typeof K>"u"?"undefined":a(K))!=="object")return K;switch(K.name){case"AbortException":return new C(K.message);case"MissingPDFException":return new O(K.message);case"UnexpectedResponseException":return new E(K.message,K.status);default:return new L(K.message,K.details)}}function Be(K){return!(K instanceof Error)||K instanceof C||K instanceof O||K instanceof E||K instanceof L?K:new L(K.message,K.toString())}function wt(K,re,me){re?K.resolve():K.reject(me)}function At(K){return Promise.resolve(K).catch(function(){})}function Q(K,re,me){var xe=this;this.sourceName=K,this.targetName=re,this.comObj=me,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var _e=this.callbacksCapabilities=Object.create(null),ge=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(ye){var Ne=ye.data;if(Ne.targetName===xe.sourceName)if(Ne.stream)xe._processStreamMessage(Ne);else if(Ne.isReply){var Le=Ne.callbackId;if(Ne.callbackId in _e){var Je=_e[Le];delete _e[Le],"error"in Ne?Je.reject(Ge(Ne.error)):Je.resolve(Ne.data)}else throw new Error("Cannot resolve callback "+Le)}else if(Ne.action in ge){var Xe=ge[Ne.action];if(Ne.callbackId){var ut=xe.sourceName,mt=Ne.sourceName;Promise.resolve().then(function(){return Xe[0].call(Xe[1],Ne.data)}).then(function(Tt){me.postMessage({sourceName:ut,targetName:mt,isReply:!0,callbackId:Ne.callbackId,data:Tt})},function(Tt){me.postMessage({sourceName:ut,targetName:mt,isReply:!0,callbackId:Ne.callbackId,error:Be(Tt)})})}else Ne.streamId?xe._createStreamSink(Ne):Xe[0].call(Xe[1],Ne.data)}else throw new Error("Unknown action from worker: "+Ne.action)},me.addEventListener("message",this._onComObjOnMessage)}Q.prototype={on:function(re,me,xe){var _e=this.actionHandler;if(_e[re])throw new Error('There is already an actionName called "'+re+'"');_e[re]=[me,xe]},send:function(re,me,xe){var _e={sourceName:this.sourceName,targetName:this.targetName,action:re,data:me};this.postMessage(_e,xe)},sendWithPromise:function(re,me,xe){var _e=this.callbackId++,ge={sourceName:this.sourceName,targetName:this.targetName,action:re,data:me,callbackId:_e},ye=Ze();this.callbacksCapabilities[_e]=ye;try{this.postMessage(ge,xe)}catch(Ne){ye.reject(Ne)}return ye.promise},sendWithStream:function(re,me,xe,_e){var ge=this,ye=this.streamId++,Ne=this.sourceName,Le=this.targetName;return new i.ReadableStream({start:function(Xe){var ut=Ze();return ge.streamControllers[ye]={controller:Xe,startCall:ut,isClosed:!1},ge.postMessage({sourceName:Ne,targetName:Le,action:re,streamId:ye,data:me,desiredSize:Xe.desiredSize}),ut.promise},pull:function(Xe){var ut=Ze();return ge.streamControllers[ye].pullCall=ut,ge.postMessage({sourceName:Ne,targetName:Le,stream:"pull",streamId:ye,desiredSize:Xe.desiredSize}),ut.promise},cancel:function(Xe){var ut=Ze();return ge.streamControllers[ye].cancelCall=ut,ge.streamControllers[ye].isClosed=!0,ge.postMessage({sourceName:Ne,targetName:Le,stream:"cancel",reason:Xe,streamId:ye}),ut.promise}},xe)},_createStreamSink:function(re){var me=this,xe=this,_e=this.actionHandler[re.action],ge=re.streamId,ye=re.desiredSize,Ne=this.sourceName,Le=re.sourceName,Je=Ze(),Xe=function(Tt){var Kt=Tt.stream,yr=Tt.chunk,dr=Tt.transfers,hr=Tt.success,Mr=Tt.reason;me.postMessage({sourceName:Ne,targetName:Le,stream:Kt,streamId:ge,chunk:yr,success:hr,reason:Mr},dr)},ut={enqueue:function(Tt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,yr=arguments[2];if(!this.isCancelled){var dr=this.desiredSize;this.desiredSize-=Kt,dr>0&&this.desiredSize<=0&&(this.sinkCapability=Ze(),this.ready=this.sinkCapability.promise),Xe({stream:"enqueue",chunk:Tt,transfers:yr})}},close:function(){this.isCancelled||(this.isCancelled=!0,Xe({stream:"close"}),delete xe.streamSinks[ge])},error:function(Tt){this.isCancelled||(this.isCancelled=!0,Xe({stream:"error",reason:Tt}))},sinkCapability:Je,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ye,ready:null};ut.sinkCapability.resolve(),ut.ready=ut.sinkCapability.promise,this.streamSinks[ge]=ut,ht(_e[0],[re.data,ut],_e[1]).then(function(){Xe({stream:"start_complete",success:!0})},function(mt){Xe({stream:"start_complete",success:!1,reason:mt})})},_processStreamMessage:function(re){var me=this,xe=this.sourceName,_e=re.sourceName,ge=re.streamId,ye=function(Je){var Xe=Je.stream,ut=Je.success,mt=Je.reason;me.comObj.postMessage({sourceName:xe,targetName:_e,stream:Xe,success:ut,streamId:ge,reason:mt})},Ne=function(){Promise.all([me.streamControllers[re.streamId].startCall,me.streamControllers[re.streamId].pullCall,me.streamControllers[re.streamId].cancelCall].map(function(Je){return Je&&At(Je.promise)})).then(function(){delete me.streamControllers[re.streamId]})};switch(re.stream){case"start_complete":wt(this.streamControllers[re.streamId].startCall,re.success,Ge(re.reason));break;case"pull_complete":wt(this.streamControllers[re.streamId].pullCall,re.success,Ge(re.reason));break;case"pull":if(!this.streamSinks[re.streamId]){ye({stream:"pull_complete",success:!0});break}this.streamSinks[re.streamId].desiredSize<=0&&re.desiredSize>0&&this.streamSinks[re.streamId].sinkCapability.resolve(),this.streamSinks[re.streamId].desiredSize=re.desiredSize,ht(this.streamSinks[re.streamId].onPull).then(function(){ye({stream:"pull_complete",success:!0})},function(Le){ye({stream:"pull_complete",success:!1,reason:Le})});break;case"enqueue":f(this.streamControllers[re.streamId],"enqueue should have stream controller"),this.streamControllers[re.streamId].isClosed||this.streamControllers[re.streamId].controller.enqueue(re.chunk);break;case"close":if(f(this.streamControllers[re.streamId],"close should have stream controller"),this.streamControllers[re.streamId].isClosed)break;this.streamControllers[re.streamId].isClosed=!0,this.streamControllers[re.streamId].controller.close(),Ne();break;case"error":f(this.streamControllers[re.streamId],"error should have stream controller"),this.streamControllers[re.streamId].controller.error(Ge(re.reason)),Ne();break;case"cancel_complete":wt(this.streamControllers[re.streamId].cancelCall,re.success,Ge(re.reason)),Ne();break;case"cancel":if(!this.streamSinks[re.streamId])break;ht(this.streamSinks[re.streamId].onCancel,[Ge(re.reason)]).then(function(){ye({stream:"cancel_complete",success:!0})},function(Le){ye({stream:"cancel_complete",success:!1,reason:Le})}),this.streamSinks[re.streamId].sinkCapability.reject(Ge(re.reason)),this.streamSinks[re.streamId].isCancelled=!0,delete this.streamSinks[re.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(re,me){me&&this.postMessageTransfers?this.comObj.postMessage(re,me):this.comObj.postMessage(re)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};function ve(K,re,me){var xe=new Image;xe.onload=function(){me.resolve(K,xe)},xe.onerror=function(){me.resolve(K,null),m("Error during JPEG image loading")},xe.src=re}e.FONT_IDENTITY_MATRIX=s,e.IDENTITY_MATRIX=ie,e.OPS=D,e.VERBOSITY_LEVELS=U,e.UNSUPPORTED_FEATURES=p,e.AnnotationBorderStyleType=u,e.AnnotationFieldFlag=y,e.AnnotationFlag=c,e.AnnotationType=d,e.FontType=V,e.ImageKind=l,e.CMapCompressionType=z,e.AbortException=C,e.InvalidPDFException=P,e.MessageHandler=Q,e.MissingDataException=A,e.MissingPDFException=O,e.NativeImageDecoding=t,e.NotImplementedException=w,e.PageViewport=fe,e.PasswordException=N,e.PasswordResponses=B,e.StatTimer=ot,e.StreamType=S,e.TextRenderingMode=o,e.UnexpectedResponseException=E,e.UnknownErrorException=L,e.Util=de,e.XRefParseException=M,e.FormatError=j,e.arrayByteLength=Z,e.arraysToBytes=J,e.assert=f,e.bytesToString=$,e.createBlob=et,e.createPromiseCapability=Ze,e.createObjectURL=ct,e.deprecated=v,e.getLookupTableFactory=q,e.getVerbosityLevel=R,e.info=g,e.isArrayBuffer=Ie,e.isBool=ke,e.isEmptyObj=Ee,e.isNum=Fe,e.isString=Pe,e.isSpace=$e,e.isNodeJS=Ke,e.isSameOrigin=h,e.createValidAbsoluteUrl=I,e.isLittleEndian=ue,e.isEvalSupported=le,e.loadJpegStream=ve,e.log2=ee,e.readInt8=ae,e.readUint16=pe,e.readUint32=se,e.removeNullCharacters=F,e.ReadableStream=i.ReadableStream,e.setVerbosityLevel=T,e.shadow=W,e.string32=Y,e.stringToBytes=G,e.stringToPDFString=Se,e.stringToUTF8String=Ce,e.utf8StringToString=Ae,e.warn=m,e.unreachable=b},function(n,e,r){"use strict";var a=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=a)},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},i={},s=function(){function T(g){this.name=g}T.prototype={};var R=Object.create(null);return T.get=function(m){var v=R[m];return v||(R[m]=new T(m))},T}(),t=function(){function T(g){this.cmd=g}T.prototype={};var R=Object.create(null);return T.get=function(m){var v=R[m];return v||(R[m]=new T(m))},T}(),o=function(){var T=function(){return T};function R(g){this._map=Object.create(null),this.xref=g,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=T}return R.prototype={assignXref:function(m){this.xref=m},get:function(m,v,b){var f,p=this.xref,h=this.suppressEncryption;return typeof(f=this._map[m])<"u"||m in this._map||typeof v>"u"||typeof(f=this._map[v])<"u"||v in this._map||typeof b>"u"||(f=this._map[b]||null),p?p.fetchIfRef(f,h):f},getAsync:function(m,v,b){var f,p=this.xref,h=this.suppressEncryption;return typeof(f=this._map[m])<"u"||m in this._map||typeof v>"u"||typeof(f=this._map[v])<"u"||v in this._map||typeof b>"u"||(f=this._map[b]||null),p?p.fetchIfRefAsync(f,h):Promise.resolve(f)},getArray:function(m,v,b){var f=this.get(m,v,b),p=this.xref,h=this.suppressEncryption;if(!Array.isArray(f)||!p)return f;f=f.slice();for(var _=0,I=f.length;_<I;_++)U(f[_])&&(f[_]=p.fetch(f[_],h));return f},getRaw:function(m){return this._map[m]},getKeys:function(){return Object.keys(this._map)},set:function(m,v){this._map[m]=v},has:function(m){return m in this._map},forEach:function(m){for(var v in this._map)m(v,this.get(v))}},R.empty=new R(null),R.merge=function(g,m){for(var v=new R(g),b=0,f=m.length;b<f;b++){var p=m[b];if(V(p))for(var h in p._map)v._map[h]===void 0&&(v._map[h]=p._map[h])}return v},R}(),l=function(){function T(R,g){this.num=R,this.gen=g}return T.prototype={toString:function(){var g=this.num+"R";return this.gen!==0&&(g+=this.gen),g}},T}(),d=function(){function T(){this.dict=Object.create(null)}return T.prototype={has:function(g){return g.toString()in this.dict},put:function(g){this.dict[g.toString()]=!0},remove:function(g){delete this.dict[g.toString()]}},T}(),c=function(){function T(){this.dict=Object.create(null)}return T.prototype={get:function(g){return this.dict[g.toString()]},has:function(g){return g.toString()in this.dict},put:function(g,m){this.dict[g.toString()]=m},putAlias:function(g,m){this.dict[g.toString()]=this.get(m)},forEach:function(g,m){for(var v in this.dict)g.call(m,this.dict[v])},clear:function(){this.dict=Object.create(null)}},T}();function y(k){return k===i}function u(k,T){return k instanceof s&&(T===void 0||k.name===T)}function S(k,T){return k instanceof t&&(T===void 0||k.cmd===T)}function V(k,T){return k instanceof o&&(T===void 0||u(k.get("Type"),T))}function U(k){return k instanceof l}function z(k,T){return k.num===T.num&&k.gen===T.gen}function D(k){return(typeof k>"u"?"undefined":a(k))==="object"&&k!==null&&k.getBytes!==void 0}e.EOF=i,e.Cmd=t,e.Dict=o,e.Name=s,e.Ref=l,e.RefSet=d,e.RefSetCache=c,e.isEOF=y,e.isCmd=S,e.isDict=V,e.isName=u,e.isRef=U,e.isRefsEqual=z,e.isStream=D},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};n.exports=function(i){return(typeof i>"u"?"undefined":a(i))==="object"?i!==null:typeof i=="function"}},function(n,e,r){"use strict";var a=r(54)("wks"),i=r(17),s=r(1).Symbol,t=typeof s=="function",o=n.exports=function(l){return a[l]||(a[l]=t&&s[l]||(t?s:i)("Symbol."+l))};o.store=a},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LZWStream=e.StringStream=e.StreamsSequenceStream=e.Stream=e.RunLengthStream=e.PredictorStream=e.NullStream=e.JpxStream=e.JpegStream=e.FlateStream=e.DecodeStream=e.DecryptStream=e.AsciiHexStream=e.Ascii85Stream=void 0;var a=r(0),i=r(2),s=r(129),t=r(74),o=function(){function m(v,b,f,p){this.bytes=v instanceof Uint8Array?v:new Uint8Array(v),this.start=b||0,this.pos=this.start,this.end=b+f||this.bytes.length,this.dict=p}return m.prototype={get length(){return this.end-this.start},get isEmpty(){return this.length===0},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var b=this.getByte(),f=this.getByte();return b===-1||f===-1?-1:(b<<8)+f},getInt32:function(){var b=this.getByte(),f=this.getByte(),p=this.getByte(),h=this.getByte();return(b<<24)+(f<<16)+(p<<8)+h},getBytes:function(b){var f=this.bytes,p=this.pos,h=this.end;if(!b)return f.subarray(p,h);var _=p+b;return _>h&&(_=h),this.pos=_,f.subarray(p,_)},peekByte:function(){var b=this.getByte();return this.pos--,b},peekBytes:function(b){var f=this.getBytes(b);return this.pos-=f.length,f},skip:function(b){b||(b=1),this.pos+=b},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(b,f,p){return new m(this.bytes.buffer,b,f,p)}},m}(),l=function(){function m(v){var b=(0,a.stringToBytes)(v);o.call(this,b)}return m.prototype=o.prototype,m}(),d=function(){var m=new Uint8Array(0);function v(b){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=m,this.minBufferLength=512,b)for(;this.minBufferLength<b;)this.minBufferLength*=2}return v.prototype={get isEmpty(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},ensureBuffer:function(f){var p=this.buffer;if(f<=p.byteLength)return p;for(var h=this.minBufferLength;h<f;)h*=2;var _=new Uint8Array(h);return _.set(p),this.buffer=_},getByte:function(){for(var f=this.pos;this.bufferLength<=f;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var f=this.getByte(),p=this.getByte();return f===-1||p===-1?-1:(f<<8)+p},getInt32:function(){var f=this.getByte(),p=this.getByte(),h=this.getByte(),_=this.getByte();return(f<<24)+(p<<16)+(h<<8)+_},getBytes:function(f){var p,h=this.pos;if(f){for(this.ensureBuffer(h+f),p=h+f;!this.eof&&this.bufferLength<p;)this.readBlock();var _=this.bufferLength;p>_&&(p=_)}else{for(;!this.eof;)this.readBlock();p=this.bufferLength}return this.pos=p,this.buffer.subarray(h,p)},peekByte:function(){var f=this.getByte();return this.pos--,f},peekBytes:function(f){var p=this.getBytes(f);return this.pos-=p.length,p},makeSubStream:function(f,p,h){for(var _=f+p;this.bufferLength<=_&&!this.eof;)this.readBlock();return new o(this.buffer,f,p,h)},skip:function(f){f||(f=1),this.pos+=f},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}},v}(),c=function(){function m(v){this.streams=v,d.call(this,null)}return m.prototype=Object.create(d.prototype),m.prototype.readBlock=function(){var b=this.streams;if(b.length===0){this.eof=!0;return}var f=b.shift(),p=f.getBytes(),h=this.bufferLength,_=h+p.length,I=this.ensureBuffer(_);I.set(p,h),this.bufferLength=_},m.prototype.getBaseStreams=function(){for(var b=[],f=0,p=this.streams.length;f<p;f++){var h=this.streams[f];h.getBaseStreams&&a.Util.appendToArray(b,h.getBaseStreams())}return b},m}(),y=function(){var m=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),b=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],p=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function h(_,I){this.str=_,this.dict=_.dict;var W=_.getByte(),q=_.getByte();if(W===-1||q===-1)throw new a.FormatError("Invalid header in flate stream: "+W+", "+q);if((W&15)!==8)throw new a.FormatError("Unknown compression method in flate stream: "+W+", "+q);if(((W<<8)+q)%31!==0)throw new a.FormatError("Bad FCHECK in flate stream: "+W+", "+q);if(q&32)throw new a.FormatError("FDICT bit set in flate stream: "+W+", "+q);this.codeSize=0,this.codeBuf=0,d.call(this,I)}return h.prototype=Object.create(d.prototype),h.prototype.getBits=function(I){for(var W=this.str,q=this.codeSize,B=this.codeBuf,N;q<I;){if((N=W.getByte())===-1)throw new a.FormatError("Bad encoding in flate stream");B|=N<<q,q+=8}return N=B&(1<<I)-1,this.codeBuf=B>>I,this.codeSize=q-=I,N},h.prototype.getCode=function(I){for(var W=this.str,q=I[0],B=I[1],N=this.codeSize,L=this.codeBuf,P;N<B&&(P=W.getByte())!==-1;)L|=P<<N,N+=8;var O=q[L&(1<<B)-1],E=O>>16,w=O&65535;if(E<1||N<E)throw new a.FormatError("Bad encoding in flate stream");return this.codeBuf=L>>E,this.codeSize=N-E,w},h.prototype.generateHuffmanTable=function(I){var W=I.length,q=0,B;for(B=0;B<W;++B)I[B]>q&&(q=I[B]);for(var N=1<<q,L=new Int32Array(N),P=1,O=0,E=2;P<=q;++P,O<<=1,E<<=1)for(var w=0;w<W;++w)if(I[w]===P){var A=0,M=O;for(B=0;B<P;++B)A=A<<1|M&1,M>>=1;for(B=A;B<N;B+=E)L[B]=P<<16|w;++O}return[L,q]},h.prototype.readBlock=function(){var I,W,q=this.str,B=this.getBits(3);if(B&1&&(this.eof=!0),B>>=1,B===0){var N;if((N=q.getByte())===-1)throw new a.FormatError("Bad block header in flate stream");var L=N;if((N=q.getByte())===-1)throw new a.FormatError("Bad block header in flate stream");if(L|=N<<8,(N=q.getByte())===-1)throw new a.FormatError("Bad block header in flate stream");var P=N;if((N=q.getByte())===-1)throw new a.FormatError("Bad block header in flate stream");if(P|=N<<8,P!==(~L&65535)&&(L!==0||P!==0))throw new a.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var O=this.bufferLength;I=this.ensureBuffer(O+L);var E=O+L;if(this.bufferLength=E,L===0)q.peekByte()===-1&&(this.eof=!0);else for(var w=O;w<E;++w){if((N=q.getByte())===-1){this.eof=!0;break}I[w]=N}return}var A,M;if(B===1)A=f,M=p;else if(B===2){var j=this.getBits(5)+257,C=this.getBits(5)+1,x=this.getBits(4)+4,F=new Uint8Array(m.length),$;for($=0;$<x;++$)F[m[$]]=this.getBits(3);var G=this.generateHuffmanTable(F);W=0,$=0;for(var Z=j+C,J=new Uint8Array(Z),Y,ee,ae;$<Z;){var pe=this.getCode(G);if(pe===16)Y=2,ee=3,ae=W;else if(pe===17)Y=3,ee=3,ae=W=0;else if(pe===18)Y=7,ee=11,ae=W=0;else{J[$++]=W=pe;continue}for(var se=this.getBits(Y)+ee;se-- >0;)J[$++]=ae}A=this.generateHuffmanTable(J.subarray(0,j)),M=this.generateHuffmanTable(J.subarray(j,Z))}else throw new a.FormatError("Unknown block type in flate stream");I=this.buffer;for(var ue=I?I.length:0,le=this.bufferLength;;){var ie=this.getCode(A);if(ie<256){le+1>=ue&&(I=this.ensureBuffer(le+1),ue=I.length),I[le++]=ie;continue}if(ie===256){this.bufferLength=le;return}ie-=257,ie=v[ie];var de=ie>>16;de>0&&(de=this.getBits(de)),W=(ie&65535)+de,ie=this.getCode(M),ie=b[ie],de=ie>>16,de>0&&(de=this.getBits(de));var fe=(ie&65535)+de;le+W>=ue&&(I=this.ensureBuffer(le+W),ue=I.length);for(var he=0;he<W;++he,++le)I[le]=I[le-fe]}},h}(),u=function(){function m(v,b,f){if(!(0,i.isDict)(f))return v;var p=this.predictor=f.get("Predictor")||1;if(p<=1)return v;if(p!==2&&(p<10||p>15))throw new a.FormatError("Unsupported predictor: "+p);p===2?this.readBlock=this.readBlockTiff:this.readBlock=this.readBlockPng,this.str=v,this.dict=v.dict;var h=this.colors=f.get("Colors")||1,_=this.bits=f.get("BitsPerComponent")||8,I=this.columns=f.get("Columns")||1;return this.pixBytes=h*_+7>>3,this.rowBytes=I*h*_+7>>3,d.call(this,b),this}return m.prototype=Object.create(d.prototype),m.prototype.readBlockTiff=function(){var b=this.rowBytes,f=this.bufferLength,p=this.ensureBuffer(f+b),h=this.bits,_=this.colors,I=this.str.getBytes(b);if(this.eof=!I.length,!this.eof){var W=0,q=0,B=0,N=0,L=f,P;if(h===1&&_===1)for(P=0;P<b;++P){var O=I[P]^W;O^=O>>1,O^=O>>2,O^=O>>4,W=(O&1)<<7,p[L++]=O}else if(h===8){for(P=0;P<_;++P)p[L++]=I[P];for(;P<b;++P)p[L]=p[L-_]+I[P],L++}else if(h===16){var E=_*2;for(P=0;P<E;++P)p[L++]=I[P];for(;P<b;P+=2){var w=((I[P]&255)<<8)+(I[P+1]&255)+((p[L-E]&255)<<8)+(p[L-E+1]&255);p[L++]=w>>8&255,p[L++]=w&255}}else{var A=new Uint8Array(_+1),M=(1<<h)-1,j=0,C=f,x=this.columns;for(P=0;P<x;++P)for(var F=0;F<_;++F)B<h&&(W=W<<8|I[j++]&255,B+=8),A[F]=A[F]+(W>>B-h)&M,B-=h,q=q<<h|A[F],N+=h,N>=8&&(p[C++]=q>>N-8&255,N-=8);N>0&&(p[C++]=(q<<8-N)+(W&(1<<8-N)-1))}this.bufferLength+=b}},m.prototype.readBlockPng=function(){var b=this.rowBytes,f=this.pixBytes,p=this.str.getByte(),h=this.str.getBytes(b);if(this.eof=!h.length,!this.eof){var _=this.bufferLength,I=this.ensureBuffer(_+b),W=I.subarray(_-b,_);W.length===0&&(W=new Uint8Array(b));var q,B=_,N,L;switch(p){case 0:for(q=0;q<b;++q)I[B++]=h[q];break;case 1:for(q=0;q<f;++q)I[B++]=h[q];for(;q<b;++q)I[B]=I[B-f]+h[q]&255,B++;break;case 2:for(q=0;q<b;++q)I[B++]=W[q]+h[q]&255;break;case 3:for(q=0;q<f;++q)I[B++]=(W[q]>>1)+h[q];for(;q<b;++q)I[B]=(W[q]+I[B-f]>>1)+h[q]&255,B++;break;case 4:for(q=0;q<f;++q)N=W[q],L=h[q],I[B++]=N+L;for(;q<b;++q){N=W[q];var P=W[q-f],O=I[B-f],E=O+N-P,w=E-O;w<0&&(w=-w);var A=E-N;A<0&&(A=-A);var M=E-P;M<0&&(M=-M),L=h[q],w<=A&&w<=M?I[B++]=O+L:A<=M?I[B++]=N+L:I[B++]=P+L}break;default:throw new a.FormatError("Unsupported predictor: "+p)}this.bufferLength+=b}},m}(),S=function(){function m(v,b,f,p){for(var h;(h=v.getByte())!==-1;)if(h===255){v.skip(-1);break}this.stream=v,this.maybeLength=b,this.dict=f,this.params=p,d.call(this,b)}return m.prototype=Object.create(d.prototype),Object.defineProperty(m.prototype,"bytes",{get:function(){return(0,a.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),m.prototype.ensureBuffer=function(b){if(!this.bufferLength){var f=new s.JpegImage,p=this.dict.getArray("Decode","D");if(this.forceRGB&&Array.isArray(p)){for(var h=this.dict.get("BitsPerComponent")||8,_=p.length,I=new Int32Array(_),W=!1,q=(1<<h)-1,B=0;B<_;B+=2)I[B]=(p[B+1]-p[B])*256|0,I[B+1]=p[B]*q|0,(I[B]!==256||I[B+1]!==0)&&(W=!0);W&&(f.decodeTransform=I)}if((0,i.isDict)(this.params)){var N=this.params.get("ColorTransform");Number.isInteger(N)&&(f.colorTransform=N)}f.parse(this.bytes);var L=f.getData(this.drawWidth,this.drawHeight,this.forceRGB);this.buffer=L,this.bufferLength=L.length,this.eof=!0}},m.prototype.getBytes=function(b){return this.ensureBuffer(),this.buffer},m.prototype.getIR=function(b){return(0,a.createObjectURL)(this.bytes,"image/jpeg",b)},m}(),V=function(){function m(v,b,f,p){this.stream=v,this.maybeLength=b,this.dict=f,this.params=p,d.call(this,b)}return m.prototype=Object.create(d.prototype),Object.defineProperty(m.prototype,"bytes",{get:function(){return(0,a.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),m.prototype.ensureBuffer=function(b){if(!this.bufferLength){var f=new t.JpxImage;f.parse(this.bytes);var p=f.width,h=f.height,_=f.componentsCount,I=f.tiles.length;if(I===1)this.buffer=f.tiles[0].items;else{for(var W=new Uint8ClampedArray(p*h*_),q=0;q<I;q++)for(var B=f.tiles[q],N=B.width,L=B.height,P=B.left,O=B.top,E=B.items,w=0,A=(p*O+P)*_,M=p*_,j=N*_,C=0;C<L;C++){var x=E.subarray(w,w+j);W.set(x,A),w+=j,A+=M}this.buffer=W}this.bufferLength=this.buffer.length,this.eof=!0}},m}(),U=function(){function m(b,f,p){this.str=b,this.dict=b.dict,this.decrypt=p,this.nextChunk=null,this.initialized=!1,d.call(this,f)}var v=512;return m.prototype=Object.create(d.prototype),m.prototype.readBlock=function(){var f;if(this.initialized?f=this.nextChunk:(f=this.str.getBytes(v),this.initialized=!0),!f||f.length===0){this.eof=!0;return}this.nextChunk=this.str.getBytes(v);var p=this.nextChunk&&this.nextChunk.length>0,h=this.decrypt;f=h(f,!p);var _=this.bufferLength,I,W=f.length,q=this.ensureBuffer(_+W);for(I=0;I<W;I++)q[_++]=f[I];this.bufferLength=_},m}(),z=function(){function m(v,b){this.str=v,this.dict=v.dict,this.input=new Uint8Array(5),b&&(b=.8*b),d.call(this,b)}return m.prototype=Object.create(d.prototype),m.prototype.readBlock=function(){for(var b=126,f=122,p=-1,h=this.str,_=h.getByte();(0,a.isSpace)(_);)_=h.getByte();if(_===p||_===b){this.eof=!0;return}var I=this.bufferLength,W,q;if(_===f){for(W=this.ensureBuffer(I+4),q=0;q<4;++q)W[I+q]=0;this.bufferLength+=4}else{var B=this.input;for(B[0]=_,q=1;q<5;++q){for(_=h.getByte();(0,a.isSpace)(_);)_=h.getByte();if(B[q]=_,_===p||_===b)break}if(W=this.ensureBuffer(I+q-1),this.bufferLength+=q-1,q<5){for(;q<5;++q)B[q]=117;this.eof=!0}var N=0;for(q=0;q<5;++q)N=N*85+(B[q]-33);for(q=3;q>=0;--q)W[I+q]=N&255,N>>=8}},m}(),D=function(){function m(v,b){this.str=v,this.dict=v.dict,this.firstDigit=-1,b&&(b=.5*b),d.call(this,b)}return m.prototype=Object.create(d.prototype),m.prototype.readBlock=function(){var b=8e3,f=this.str.getBytes(b);if(!f.length){this.eof=!0;return}for(var p=f.length+1>>1,h=this.ensureBuffer(this.bufferLength+p),_=this.bufferLength,I=this.firstDigit,W=0,q=f.length;W<q;W++){var B=f[W],N;if(B>=48&&B<=57)N=B&15;else if(B>=65&&B<=70||B>=97&&B<=102)N=(B&15)+9;else if(B===62){this.eof=!0;break}else continue;I<0?I=N:(h[_++]=I<<4|N,I=-1)}I>=0&&this.eof&&(h[_++]=I<<4,I=-1),this.firstDigit=I,this.bufferLength=_},m}(),k=function(){function m(v,b){this.str=v,this.dict=v.dict,d.call(this,b)}return m.prototype=Object.create(d.prototype),m.prototype.readBlock=function(){var b=this.str.getBytes(2);if(!b||b.length<2||b[0]===128){this.eof=!0;return}var f,p=this.bufferLength,h=b[0];if(h<128){if(f=this.ensureBuffer(p+h+1),f[p++]=b[1],h>0){var _=this.str.getBytes(h);f.set(_,p),p+=h}}else{h=257-h;var I=b[1];f=this.ensureBuffer(p+h+1);for(var W=0;W<h;W++)f[p++]=I}this.bufferLength=p},m}(),T=function(){function m(v,b,f){this.str=v,this.dict=v.dict,this.cachedData=0,this.bitsCached=0;for(var p=4096,h={earlyChange:f,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(p),dictionaryLengths:new Uint16Array(p),dictionaryPrevCodes:new Uint16Array(p),currentSequence:new Uint8Array(p),currentSequenceLength:0},_=0;_<256;++_)h.dictionaryValues[_]=_,h.dictionaryLengths[_]=1;this.lzwState=h,d.call(this,b)}return m.prototype=Object.create(d.prototype),m.prototype.readBits=function(b){for(var f=this.bitsCached,p=this.cachedData;f<b;){var h=this.str.getByte();if(h===-1)return this.eof=!0,null;p=p<<8|h,f+=8}return this.bitsCached=f-=b,this.cachedData=p,this.lastCode=null,p>>>f&(1<<b)-1},m.prototype.readBlock=function(){var b=512,f=b*2,p=b,h,_,I,W=this.lzwState;if(W){var q=W.earlyChange,B=W.nextCode,N=W.dictionaryValues,L=W.dictionaryLengths,P=W.dictionaryPrevCodes,O=W.codeLength,E=W.prevCode,w=W.currentSequence,A=W.currentSequenceLength,M=0,j=this.bufferLength,C=this.ensureBuffer(this.bufferLength+f);for(h=0;h<b;h++){var x=this.readBits(O),F=A>0;if(x<256)w[0]=x,A=1;else if(x>=258)if(x<B)for(A=L[x],_=A-1,I=x;_>=0;_--)w[_]=N[I],I=P[I];else w[A++]=w[0];else if(x===256){O=9,B=258,A=0;continue}else{this.eof=!0,delete this.lzwState;break}if(F&&(P[B]=E,L[B]=L[E]+1,N[B]=w[0],B++,O=B+q&B+q-1?O:Math.min(Math.log(B+q)/.6931471805599453+1,12)|0),E=x,M+=A,f<M){do f+=p;while(f<M);C=this.ensureBuffer(this.bufferLength+f)}for(_=0;_<A;_++)C[j++]=w[_]}W.nextCode=B,W.codeLength=O,W.prevCode=E,W.currentSequenceLength=A,this.bufferLength=j}},m}(),R=function(){function m(){o.call(this,new Uint8Array(0))}return m.prototype=o.prototype,m}();e.Ascii85Stream=z,e.AsciiHexStream=D,e.DecryptStream=U,e.DecodeStream=d,e.FlateStream=y,e.JpegStream=S,e.JpxStream=V,e.NullStream=R,e.PredictorStream=u,e.RunLengthStream=k,e.Stream=o,e.StreamsSequenceStream=c,e.StringStream=l,e.LZWStream=T},function(n,e,r){"use strict";var a=n.exports={version:"2.5.7"};typeof __e=="number"&&(__e=a)},function(n,e,r){"use strict";var a=r(1),i=r(6),s=r(8),t=r(16),o=r(13),l="prototype",d=function c(y,u,S){var V=y&c.F,U=y&c.G,z=y&c.S,D=y&c.P,k=y&c.B,T=U?a:z?a[u]||(a[u]={}):(a[u]||{})[l],R=U?i:i[u]||(i[u]={}),g=R[l]||(R[l]={}),m,v,b,f;U&&(S=u);for(m in S)v=!V&&T&&T[m]!==void 0,b=(v?T:S)[m],f=k&&v?o(b,a):D&&typeof b=="function"?o(Function.call,b):b,T&&t(T,m,b,y&c.U),R[m]!=b&&s(R,m,f),D&&g[m]!=b&&(g[m]=b)};a.core=i,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,n.exports=d},function(n,e,r){"use strict";var a=r(15),i=r(29);n.exports=r(10)?function(s,t,o){return a.f(s,t,i(1,o))}:function(s,t,o){return s[t]=o,s}},function(n,e,r){"use strict";var a=r(3);n.exports=function(i){if(!a(i))throw TypeError(i+" is not an object!");return i}},function(n,e,r){"use strict";n.exports=!r(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,e,r){"use strict";n.exports=function(a){try{return!!a()}catch{return!0}}},function(n,e,r){"use strict";var a={}.hasOwnProperty;n.exports=function(i,s){return a.call(i,s)}},function(n,e,r){"use strict";var a=r(22);n.exports=function(i,s,t){if(a(i),s===void 0)return i;switch(t){case 1:return function(o){return i.call(s,o)};case 2:return function(o,l){return i.call(s,o,l)};case 3:return function(o,l,d){return i.call(s,o,l,d)}}return function(){return i.apply(s,arguments)}}},function(n,e,r){"use strict";var a=r(18),i=Math.min;n.exports=function(s){return s>0?i(a(s),9007199254740991):0}},function(n,e,r){"use strict";var a=r(9),i=r(48),s=r(36),t=Object.defineProperty;e.f=r(10)?Object.defineProperty:function(l,d,c){if(a(l),d=s(d,!0),a(c),i)try{return t(l,d,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(l[d]=c.value),l}},function(n,e,r){"use strict";var a=r(1),i=r(8),s=r(12),t=r(17)("src"),o="toString",l=Function[o],d=(""+l).split(o);r(6).inspectSource=function(c){return l.call(c)},(n.exports=function(c,y,u,S){var V=typeof u=="function";V&&(s(u,"name")||i(u,"name",y)),c[y]!==u&&(V&&(s(u,t)||i(u,t,c[y]?""+c[y]:d.join(String(y)))),c===a?c[y]=u:S?c[y]?c[y]=u:i(c,y,u):(delete c[y],i(c,y,u)))})(Function.prototype,o,function(){return typeof this=="function"&&this[t]||l.call(this)})},function(n,e,r){"use strict";var a=0,i=Math.random();n.exports=function(s){return"Symbol(".concat(s===void 0?"":s,")_",(++a+i).toString(36))}},function(n,e,r){"use strict";var a=Math.ceil,i=Math.floor;n.exports=function(s){return isNaN(s=+s)?0:(s>0?i:a)(s)}},function(n,e,r){"use strict";var a=r(38);n.exports=function(i){return Object(a(i))}},function(n,e,r){"use strict";n.exports={}},function(n,e,r){"use strict";n.exports=!1},function(n,e,r){"use strict";n.exports=function(a){if(typeof a!="function")throw TypeError(a+" is not a function!");return a}},function(n,e,r){"use strict";var a=r(16);n.exports=function(i,s,t){for(var o in s)a(i,o,s[o],t);return i}},function(n,e,r){"use strict";n.exports=function(a,i,s,t){if(!(a instanceof i)||t!==void 0&&t in a)throw TypeError(s+": incorrect invocation!");return a}},function(n,e,r){"use strict";var a={}.toString;n.exports=function(i){return a.call(i).slice(8,-1)}},function(n,e,r){"use strict";var a=r(15).f,i=r(12),s=r(4)("toStringTag");n.exports=function(t,o,l){t&&!i(t=l?t:t.prototype,s)&&a(t,s,{configurable:!0,value:o})}},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorSpace=void 0;var a=r(0),i=r(2),s=function(){function z(k,T,R,g,m,v,b,f){var p=3;b=b!==1?0:b;var h=R/m,_=g/v,I,W,q,B=0,N,L=new Uint16Array(m),P=R*p;for(I=0;I<m;I++)L[I]=Math.floor(I*h)*p;for(I=0;I<v;I++)for(q=Math.floor(I*_)*P,W=0;W<m;W++)N=q+L[W],f[B++]=k[N++],f[B++]=k[N++],f[B++]=k[N++],B+=b}function D(){throw new Error("should not call ColorSpace constructor")}return D.prototype={getRgb:function(T,R){var g=new Uint8Array(3);return this.getRgbItem(T,R,g,0),g},getRgbItem:function(T,R,g,m){throw new Error("Should not call ColorSpace.getRgbItem")},getRgbBuffer:function(T,R,g,m,v,b,f){throw new Error("Should not call ColorSpace.getRgbBuffer")},getOutputLength:function(T,R){throw new Error("Should not call ColorSpace.getOutputLength")},isPassthrough:function(T){return!1},fillRgb:function(T,R,g,m,v,b,f,p,h){var _=R*g,I=null,W=1<<f,q=g!==v||R!==m,B,N;if(this.isPassthrough(f))I=p;else if(this.numComps===1&&_>W&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){var L=f<=8?new Uint8Array(W):new Uint16Array(W),P;for(B=0;B<W;B++)L[B]=B;var O=new Uint8Array(W*3);this.getRgbBuffer(L,0,W,O,0,f,0);var E,w;if(q)for(I=new Uint8Array(_*3),w=0,B=0;B<_;++B)P=p[B]*3,I[w++]=O[P],I[w++]=O[P+1],I[w++]=O[P+2];else for(E=0,B=0;B<_;++B)P=p[B]*3,T[E++]=O[P],T[E++]=O[P+1],T[E++]=O[P+2],E+=h}else q?(I=new Uint8Array(_*3),this.getRgbBuffer(p,0,_,I,0,f,0)):this.getRgbBuffer(p,0,m*b,T,0,f,h);if(I)if(q)z(I,f,R,g,m,v,h,T);else for(w=0,E=0,B=0,N=m*b;B<N;B++)T[E++]=I[w++],T[E++]=I[w++],T[E++]=I[w++],E+=h},usesZeroToOneRange:!0},D.parse=function(k,T,R,g){var m=D.parseToIR(k,T,R,g);return D.fromIR(m)},D.fromIR=function(k){var T=Array.isArray(k)?k[0]:k,R,g,m;switch(T){case"DeviceGrayCS":return this.singletons.gray;case"DeviceRgbCS":return this.singletons.rgb;case"DeviceCmykCS":return this.singletons.cmyk;case"CalGrayCS":return R=k[1],g=k[2],m=k[3],new u(R,g,m);case"CalRGBCS":R=k[1],g=k[2],m=k[3];var v=k[4];return new S(R,g,m,v);case"PatternCS":var b=k[1];return b&&(b=D.fromIR(b)),new o(b);case"IndexedCS":var f=k[1],p=k[2],h=k[3];return new l(D.fromIR(f),p,h);case"AlternateCS":var _=k[1],I=k[2],W=k[3];return new t(_,D.fromIR(I),W);case"LabCS":R=k[1],g=k[2];var q=k[3];return new V(R,g,q);default:throw new a.FormatError("Unknown colorspace name: "+T)}},D.parseToIR=function(k,T,R,g){if((0,i.isName)(k)){var m=R.get("ColorSpace");if((0,i.isDict)(m)){var v=m.get(k.name);v&&(k=v)}}if(k=T.fetchIfRef(k),(0,i.isName)(k))switch(k.name){case"DeviceGray":case"G":return"DeviceGrayCS";case"DeviceRGB":case"RGB":return"DeviceRgbCS";case"DeviceCMYK":case"CMYK":return"DeviceCmykCS";case"Pattern":return["PatternCS",null];default:throw new a.FormatError("unrecognized colorspace "+k.name)}if(Array.isArray(k)){var b=T.fetchIfRef(k[0]).name,f,p,h,_,I,W;switch(b){case"DeviceGray":case"G":return"DeviceGrayCS";case"DeviceRGB":case"RGB":return"DeviceRgbCS";case"DeviceCMYK":case"CMYK":return"DeviceCmykCS";case"CalGray":return p=T.fetchIfRef(k[1]),_=p.getArray("WhitePoint"),I=p.getArray("BlackPoint"),W=p.get("Gamma"),["CalGrayCS",_,I,W];case"CalRGB":p=T.fetchIfRef(k[1]),_=p.getArray("WhitePoint"),I=p.getArray("BlackPoint"),W=p.getArray("Gamma");var q=p.getArray("Matrix");return["CalRGBCS",_,I,W,q];case"ICCBased":var B=T.fetchIfRef(k[1]),N=B.dict;if(f=N.get("N"),h=N.get("Alternate"),h){var L=D.parseToIR(h,T,R,g),P=D.fromIR(L,g);if(P.numComps===f)return L;(0,a.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(f===1)return"DeviceGrayCS";if(f===3)return"DeviceRgbCS";if(f===4)return"DeviceCmykCS";break;case"Pattern":var O=k[1]||null;return O&&(O=D.parseToIR(O,T,R,g)),["PatternCS",O];case"Indexed":case"I":var E=D.parseToIR(k[1],T,R,g),w=T.fetchIfRef(k[2])+1,A=T.fetchIfRef(k[3]);return(0,i.isStream)(A)&&(A=A.getBytes()),["IndexedCS",E,w,A];case"Separation":case"DeviceN":var M=T.fetchIfRef(k[1]);f=Array.isArray(M)?M.length:1,h=D.parseToIR(k[2],T,R,g);var j=g.create(T.fetchIfRef(k[3]));return["AlternateCS",f,h,j];case"Lab":p=T.fetchIfRef(k[1]),_=p.getArray("WhitePoint"),I=p.getArray("BlackPoint");var C=p.getArray("Range");return["LabCS",_,I,C];default:throw new a.FormatError('unimplemented color space object "'+b+'"')}}throw new a.FormatError('unrecognized color space object: "'+k+'"')},D.isDefaultDecode=function(T,R){if(!Array.isArray(T))return!0;if(R*2!==T.length)return(0,a.warn)("The decode map is not the correct length"),!0;for(var g=0,m=T.length;g<m;g+=2)if(T[g]!==0||T[g+1]!==1)return!1;return!0},D.singletons={get gray(){return(0,a.shadow)(this,"gray",new d)},get rgb(){return(0,a.shadow)(this,"rgb",new c)},get cmyk(){return(0,a.shadow)(this,"cmyk",new y)}},D}(),t=function(){function z(D,k,T){this.name="Alternate",this.numComps=D,this.defaultColor=new Float32Array(D);for(var R=0;R<D;++R)this.defaultColor[R]=1;this.base=k,this.tintFn=T,this.tmpBuf=new Float32Array(k.numComps)}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(k,T,R,g){var m=this.tmpBuf;this.tintFn(k,T,m,0),this.base.getRgbItem(m,0,R,g)},getRgbBuffer:function(k,T,R,g,m,v,b){var f=this.tintFn,p=this.base,h=1/((1<<v)-1),_=p.numComps,I=p.usesZeroToOneRange,W=(p.isPassthrough(8)||!I)&&b===0,q=W?m:0,B=W?g:new Uint8Array(_*R),N=this.numComps,L=new Float32Array(N),P=new Float32Array(_),O,E;for(O=0;O<R;O++){for(E=0;E<N;E++)L[E]=k[T++]*h;if(f(L,0,P,0),I)for(E=0;E<_;E++)B[q++]=P[E]*255;else p.getRgbItem(P,0,B,q),q+=_}W||p.getRgbBuffer(B,0,R,g,m,8,b)},getOutputLength:function(k,T){return this.base.getOutputLength(k*this.base.numComps/this.numComps,T)},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(k){return s.isDefaultDecode(k,this.numComps)},usesZeroToOneRange:!0},z}(),o=function(){function z(D){this.name="Pattern",this.base=D}return z.prototype={},z}(),l=function(){function z(D,k,T){this.name="Indexed",this.numComps=1,this.defaultColor=new Uint8Array(this.numComps),this.base=D,this.highVal=k;var R=D.numComps,g=R*k;if((0,i.isStream)(T)){this.lookup=new Uint8Array(g);var m=T.getBytes(g);this.lookup.set(m)}else if((0,a.isString)(T)){this.lookup=new Uint8Array(g);for(var v=0;v<g;++v)this.lookup[v]=T.charCodeAt(v)}else if(T instanceof Uint8Array||T instanceof Array)this.lookup=T;else throw new a.FormatError("Unrecognized lookup table: "+T)}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(k,T,R,g){var m=this.base.numComps,v=k[T]*m;this.base.getRgbBuffer(this.lookup,v,1,R,g,8,0)},getRgbBuffer:function(k,T,R,g,m,v,b){for(var f=this.base,p=f.numComps,h=f.getOutputLength(p,b),_=this.lookup,I=0;I<R;++I){var W=k[T++]*p;f.getRgbBuffer(_,W,1,g,m,8,b),m+=h}},getOutputLength:function(k,T){return this.base.getOutputLength(k*this.base.numComps,T)},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(k){return!0},usesZeroToOneRange:!0},z}(),d=function(){function z(){this.name="DeviceGray",this.numComps=1,this.defaultColor=new Float32Array(this.numComps)}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(k,T,R,g){var m=k[T]*255|0;m=m<0?0:m>255?255:m,R[g]=R[g+1]=R[g+2]=m},getRgbBuffer:function(k,T,R,g,m,v,b){for(var f=255/((1<<v)-1),p=T,h=m,_=0;_<R;++_){var I=f*k[p++]|0;g[h++]=I,g[h++]=I,g[h++]=I,h+=b}},getOutputLength:function(k,T){return k*(3+T)},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(k){return s.isDefaultDecode(k,this.numComps)},usesZeroToOneRange:!0},z}(),c=function(){function z(){this.name="DeviceRGB",this.numComps=3,this.defaultColor=new Float32Array(this.numComps)}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(k,T,R,g){var m=k[T]*255|0,v=k[T+1]*255|0,b=k[T+2]*255|0;R[g]=m<0?0:m>255?255:m,R[g+1]=v<0?0:v>255?255:v,R[g+2]=b<0?0:b>255?255:b},getRgbBuffer:function(k,T,R,g,m,v,b){if(v===8&&b===0){g.set(k.subarray(T,T+R*3),m);return}for(var f=255/((1<<v)-1),p=T,h=m,_=0;_<R;++_)g[h++]=f*k[p++]|0,g[h++]=f*k[p++]|0,g[h++]=f*k[p++]|0,h+=b},getOutputLength:function(k,T){return k*(3+T)/3|0},isPassthrough:function(k){return k===8},fillRgb:s.prototype.fillRgb,isDefaultDecode:function(k){return s.isDefaultDecode(k,this.numComps)},usesZeroToOneRange:!0},z}(),y=function(){function z(k,T,R,g,m){var v=k[T+0]*R,b=k[T+1]*R,f=k[T+2]*R,p=k[T+3]*R,h=v*(-4.387332384609988*v+54.48615194189176*b+18.82290502165302*f+212.25662451639585*p+-285.2331026137004)+b*(1.7149763477362134*b-5.6096736904047315*f+-17.873870861415444*p-5.497006427196366)+f*(-2.5217340131683033*f-21.248923337353073*p+17.5119270841813)+p*(-21.86122147463605*p-189.48180835922747)+255|0,_=v*(8.841041422036149*v+60.118027045597366*b+6.871425592049007*f+31.159100130055922*p+-79.2970844816548)+b*(-15.310361306967817*b+17.575251261109482*f+131.35250912493976*p-190.9453302588951)+f*(4.444339102852739*f+9.8632861493405*p-24.86741582555878)+p*(-20.737325471181034*p-187.80453709719578)+255|0,I=v*(.8842522430003296*v+8.078677503112928*b+30.89978309703729*f-.23883238689178934*p+-14.183576799673286)+b*(10.49593273432072*b+63.02378494754052*f+50.606957656360734*p-112.23884253719248)+f*(.03296041114873217*f+115.60384449646641*p+-193.58209356861505)+p*(-22.33816807309886*p-180.12613974708367)+255|0;g[m]=h>255?255:h<0?0:h,g[m+1]=_>255?255:_<0?0:_,g[m+2]=I>255?255:I<0?0:I}function D(){this.name="DeviceCMYK",this.numComps=4,this.defaultColor=new Float32Array(this.numComps),this.defaultColor[3]=1}return D.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(T,R,g,m){z(T,R,1,g,m)},getRgbBuffer:function(T,R,g,m,v,b,f){for(var p=1/((1<<b)-1),h=0;h<g;h++)z(T,R,p,m,v),R+=4,v+=3+f},getOutputLength:function(T,R){return T/4*(3+R)|0},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(T){return s.isDefaultDecode(T,this.numComps)},usesZeroToOneRange:!0},D}(),u=function(){function z(k,T,R){if(this.name="CalGray",this.numComps=1,this.defaultColor=new Float32Array(this.numComps),!k)throw new a.FormatError("WhitePoint missing - required for color space CalGray");if(T=T||[0,0,0],R=R||1,this.XW=k[0],this.YW=k[1],this.ZW=k[2],this.XB=T[0],this.YB=T[1],this.ZB=T[2],this.G=R,this.XW<0||this.ZW<0||this.YW!==1)throw new a.FormatError("Invalid WhitePoint components for "+this.name+", no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,a.info)("Invalid BlackPoint for "+this.name+", falling back to default"),this.XB=this.YB=this.ZB=0),(this.XB!==0||this.YB!==0||this.ZB!==0)&&(0,a.warn)(this.name+", BlackPoint: XB: "+this.XB+", YB: "+this.YB+", ZB: "+this.ZB+", only default values are supported."),this.G<1&&((0,a.info)("Invalid Gamma: "+this.G+" for "+this.name+", falling back to default"),this.G=1)}function D(k,T,R,g,m,v){var b=T[R]*v,f=Math.pow(b,k.G),p=k.YW*f,h=Math.max(295.8*Math.pow(p,.3333333333333333)-40.8,0)|0;g[m]=h,g[m+1]=h,g[m+2]=h}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(T,R,g,m){D(this,T,R,g,m,1)},getRgbBuffer:function(T,R,g,m,v,b,f){for(var p=1/((1<<b)-1),h=0;h<g;++h)D(this,T,R,m,v,p),R+=1,v+=3+f},getOutputLength:function(T,R){return T*(3+R)},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(T){return s.isDefaultDecode(T,this.numComps)},usesZeroToOneRange:!0},z}(),S=function(){var z=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),D=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),k=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),T=new Float32Array([1,1,1]),R=new Float32Array(3),g=new Float32Array(3),m=new Float32Array(3),v=Math.pow(24/116,3)/8;function b(P,O,E,w){if(this.name="CalRGB",this.numComps=3,this.defaultColor=new Float32Array(this.numComps),!P)throw new a.FormatError("WhitePoint missing - required for color space CalRGB");O=O||new Float32Array(3),E=E||new Float32Array([1,1,1]),w=w||new Float32Array([1,0,0,0,1,0,0,0,1]);var A=P[0],M=P[1],j=P[2];this.whitePoint=P;var C=O[0],x=O[1],F=O[2];if(this.blackPoint=O,this.GR=E[0],this.GG=E[1],this.GB=E[2],this.MXA=w[0],this.MYA=w[1],this.MZA=w[2],this.MXB=w[3],this.MYB=w[4],this.MZB=w[5],this.MXC=w[6],this.MYC=w[7],this.MZC=w[8],A<0||j<0||M!==1)throw new a.FormatError("Invalid WhitePoint components for "+this.name+", no fallback available");(C<0||x<0||F<0)&&((0,a.info)("Invalid BlackPoint for "+this.name+" ["+C+", "+x+", "+F+"], falling back to default"),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,a.info)("Invalid Gamma ["+this.GR+", "+this.GG+", "+this.GB+"] for "+this.name+", falling back to default"),this.GR=this.GG=this.GB=1),(this.MXA<0||this.MYA<0||this.MZA<0||this.MXB<0||this.MYB<0||this.MZB<0||this.MXC<0||this.MYC<0||this.MZC<0)&&((0,a.info)("Invalid Matrix for "+this.name+" ["+this.MXA+", "+this.MYA+", "+this.MZA+this.MXB+", "+this.MYB+", "+this.MZB+this.MXC+", "+this.MYC+", "+this.MZC+"], falling back to default"),this.MXA=this.MYB=this.MZC=1,this.MXB=this.MYA=this.MZA=this.MXC=this.MYC=this.MZB=0)}function f(P,O,E){E[0]=P[0]*O[0]+P[1]*O[1]+P[2]*O[2],E[1]=P[3]*O[0]+P[4]*O[1]+P[5]*O[2],E[2]=P[6]*O[0]+P[7]*O[1]+P[8]*O[2]}function p(P,O,E){E[0]=O[0]*1/P[0],E[1]=O[1]*1/P[1],E[2]=O[2]*1/P[2]}function h(P,O,E){var w=.95047,A=1,M=1.08883;E[0]=O[0]*w/P[0],E[1]=O[1]*A/P[1],E[2]=O[2]*M/P[2]}function _(P){return P<=.0031308?I(0,1,12.92*P):I(0,1,(1+.055)*Math.pow(P,1/2.4)-.055)}function I(P,O,E){return Math.max(P,Math.min(O,E))}function W(P){return P<0?-W(-P):P>8?Math.pow((P+16)/116,3):P*v}function q(P,O,E){if(P[0]===0&&P[1]===0&&P[2]===0){E[0]=O[0],E[1]=O[1],E[2]=O[2];return}var w=W(0),A=w,M=W(P[0]),j=w,C=W(P[1]),x=w,F=W(P[2]),$=(1-A)/(1-M),G=1-$,Z=(1-j)/(1-C),J=1-Z,Y=(1-x)/(1-F),ee=1-Y;E[0]=O[0]*$+G,E[1]=O[1]*Z+J,E[2]=O[2]*Y+ee}function B(P,O,E){if(P[0]===1&&P[2]===1){E[0]=O[0],E[1]=O[1],E[2]=O[2];return}var w=E;f(z,O,w);var A=R;p(P,w,A),f(D,A,E)}function N(P,O,E){var w=E;f(z,O,w);var A=R;h(P,w,A),f(D,A,E)}function L(P,O,E,w,A,M){var j=I(0,1,O[E]*M),C=I(0,1,O[E+1]*M),x=I(0,1,O[E+2]*M),F=Math.pow(j,P.GR),$=Math.pow(C,P.GG),G=Math.pow(x,P.GB),Z=P.MXA*F+P.MXB*$+P.MXC*G,J=P.MYA*F+P.MYB*$+P.MYC*G,Y=P.MZA*F+P.MZB*$+P.MZC*G,ee=g;ee[0]=Z,ee[1]=J,ee[2]=Y;var ae=m;B(P.whitePoint,ee,ae);var pe=g;q(P.blackPoint,ae,pe);var se=m;N(T,pe,se);var ue=g;f(k,se,ue);var le=_(ue[0]),ie=_(ue[1]),de=_(ue[2]);w[A]=Math.round(le*255),w[A+1]=Math.round(ie*255),w[A+2]=Math.round(de*255)}return b.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(O,E,w,A){L(this,O,E,w,A,1)},getRgbBuffer:function(O,E,w,A,M,j,C){for(var x=1/((1<<j)-1),F=0;F<w;++F)L(this,O,E,A,M,x),E+=3,M+=3+C},getOutputLength:function(O,E){return O*(3+E)/3|0},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(O){return s.isDefaultDecode(O,this.numComps)},usesZeroToOneRange:!0},b}(),V=function(){function z(R,g,m){if(this.name="Lab",this.numComps=3,this.defaultColor=new Float32Array(this.numComps),!R)throw new a.FormatError("WhitePoint missing - required for color space Lab");if(g=g||[0,0,0],m=m||[-100,100,-100,100],this.XW=R[0],this.YW=R[1],this.ZW=R[2],this.amin=m[0],this.amax=m[1],this.bmin=m[2],this.bmax=m[3],this.XB=g[0],this.YB=g[1],this.ZB=g[2],this.XW<0||this.ZW<0||this.YW!==1)throw new a.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,a.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,a.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}function D(R){var g;return R>=6/29?g=R*R*R:g=108/841*(R-4/29),g}function k(R,g,m,v){return m+R*(v-m)/g}function T(R,g,m,v,b,f){var p=g[m],h=g[m+1],_=g[m+2];v!==!1&&(p=k(p,v,0,100),h=k(h,v,R.amin,R.amax),_=k(_,v,R.bmin,R.bmax)),h=h>R.amax?R.amax:h<R.amin?R.amin:h,_=_>R.bmax?R.bmax:_<R.bmin?R.bmin:_;var I=(p+16)/116,W=I+h/500,q=I-_/200,B=R.XW*D(W),N=R.YW*D(I),L=R.ZW*D(q),P,O,E;R.ZW<1?(P=B*3.1339+N*-1.617+L*-.4906,O=B*-.9785+N*1.916+L*.0333,E=B*.072+N*-.229+L*1.4057):(P=B*3.2406+N*-1.5372+L*-.4986,O=B*-.9689+N*1.8758+L*.0415,E=B*.0557+N*-.204+L*1.057),b[f]=P<=0?0:P>=1?255:Math.sqrt(P)*255|0,b[f+1]=O<=0?0:O>=1?255:Math.sqrt(O)*255|0,b[f+2]=E<=0?0:E>=1?255:Math.sqrt(E)*255|0}return z.prototype={getRgb:s.prototype.getRgb,getRgbItem:function(g,m,v,b){T(this,g,m,!1,v,b)},getRgbBuffer:function(g,m,v,b,f,p,h){for(var _=(1<<p)-1,I=0;I<v;I++)T(this,g,m,_,b,f),m+=3,f+=3+h},getOutputLength:function(g,m){return g*(3+m)/3|0},isPassthrough:s.prototype.isPassthrough,fillRgb:s.prototype.fillRgb,isDefaultDecode:function(g){return!0},usesZeroToOneRange:!1},z}();e.ColorSpace=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall"],s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"],t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"],l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt"],d=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191"];function c(y){switch(y){case"WinAnsiEncoding":return o;case"StandardEncoding":return t;case"MacRomanEncoding":return s;case"SymbolSetEncoding":return l;case"ZapfDingbatsEncoding":return d;case"ExpertEncoding":return a;case"MacExpertEncoding":return i;default:return null}}e.WinAnsiEncoding=o,e.StandardEncoding=t,e.MacRomanEncoding=s,e.SymbolSetEncoding=l,e.ZapfDingbatsEncoding=d,e.ExpertEncoding=a,e.getEncoding=c},function(n,e,r){"use strict";n.exports=function(a,i){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:i}}},function(n,e,r){"use strict";var a=r(37),i=r(38);n.exports=function(s){return a(i(s))}},function(n,e,r){"use strict";var a=r(18),i=Math.max,s=Math.min;n.exports=function(t,o){return t=a(t),t<0?i(t+o,0):s(t,o)}},function(n,e,r){"use strict";var a=r(25),i=r(4)("toStringTag"),s=a(function(){return arguments}())=="Arguments",t=function(l,d){try{return l[d]}catch{}};n.exports=function(o){var l,d,c;return o===void 0?"Undefined":o===null?"Null":typeof(d=t(l=Object(o),i))=="string"?d:s?a(l):(c=a(l))=="Object"&&typeof l.callee=="function"?"Arguments":c}},function(n,e,r){"use strict";var a=r(13),i=r(107),s=r(56),t=r(9),o=r(14),l=r(60),d={},c={},y=n.exports=function(u,S,V,U,z){var D=z?function(){return u}:l(u),k=a(V,U,S?2:1),T=0,R,g,m,v;if(typeof D!="function")throw TypeError(u+" is not iterable!");if(s(D)){for(R=o(u.length);R>T;T++)if(v=S?k(t(g=u[T])[0],g[1]):k(u[T]),v===d||v===c)return v}else for(m=D.call(u);!(g=m.next()).done;)if(v=i(m,k,g.value,S),v===d||v===c)return v};y.BREAK=d,y.RETURN=c},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.Linearization=e.Lexer=void 0;var a=r(5),i=r(0),s=r(2),t=r(130),o=r(132),l=1e3,d=function(){function S(V,U,z,D){this.lexer=V,this.allowStreams=U,this.xref=z,this.recoveryMode=D||!1,this.imageCache=Object.create(null),this.refill()}return S.prototype={refill:function(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()},shift:function(){(0,s.isCmd)(this.buf2,"ID")?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())},tryShift:function(){try{return this.shift(),!0}catch(U){if(U instanceof i.MissingDataException)throw U;return!1}},getObj:function(U){var z=this.buf1;if(this.shift(),z instanceof s.Cmd)switch(z.cmd){case"BI":return this.makeInlineImage(U);case"[":for(var D=[];!(0,s.isCmd)(this.buf1,"]")&&!(0,s.isEOF)(this.buf1);)D.push(this.getObj(U));if((0,s.isEOF)(this.buf1)){if(!this.recoveryMode)throw new i.FormatError("End of file inside array");return D}return this.shift(),D;case"<<":for(var k=new s.Dict(this.xref);!(0,s.isCmd)(this.buf1,">>")&&!(0,s.isEOF)(this.buf1);){if(!(0,s.isName)(this.buf1)){(0,i.info)("Malformed dictionary: key must be a name object"),this.shift();continue}var T=this.buf1.name;if(this.shift(),(0,s.isEOF)(this.buf1))break;k.set(T,this.getObj(U))}if((0,s.isEOF)(this.buf1)){if(!this.recoveryMode)throw new i.FormatError("End of file inside dictionary");return k}return(0,s.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(k,U):k:(this.shift(),k);default:return z}if(Number.isInteger(z)){var R=z;if(Number.isInteger(this.buf1)&&(0,s.isCmd)(this.buf2,"R")){var g=new s.Ref(R,this.buf1);return this.shift(),this.shift(),g}return R}if((0,i.isString)(z)){var m=z;return U&&(m=U.decryptString(m)),m}return z},findDefaultInlineStreamEnd:function(U){for(var z=69,D=73,k=32,T=10,R=13,g=10,m=0,v=U.pos,b=0,f=void 0,p=void 0;(f=U.getByte())!==-1;)if(b===0)b=f===z?1:0;else if(b===1)b=f===D?2:0;else if((0,i.assert)(b===2),f===k||f===T||f===R){p=U.pos;for(var h=U.peekBytes(g),_=0,I=h.length;_<I;_++)if(f=h[_],!(f===m&&h[_+1]!==m)&&f!==T&&f!==R&&(f<k||f>127)){b=0;break}if(b===2)break}else b=0;return f===-1&&((0,i.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),p&&((0,i.warn)('... trying to recover by using the last "EI" occurrence.'),U.skip(-(U.pos-p)))),U.pos-4-v},findDCTDecodeInlineStreamEnd:function(U){for(var z=U.pos,D=!1,k,T,R;(k=U.getByte())!==-1;)if(k===255){switch(U.getByte()){case 0:break;case 255:U.skip(-1);break;case 217:D=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:T=U.getUint16(),T>2?U.skip(T-2):U.skip(-2);break}if(D)break}return R=U.pos-z,k===-1?((0,i.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),U.skip(-R),this.findDefaultInlineStreamEnd(U)):(this.inlineStreamSkipEI(U),R)},findASCII85DecodeInlineStreamEnd:function(U){for(var z=126,D=62,k=U.pos,T,R;(T=U.getByte())!==-1;)if(T===z&&U.peekByte()===D){U.skip();break}return R=U.pos-k,T===-1?((0,i.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),U.skip(-R),this.findDefaultInlineStreamEnd(U)):(this.inlineStreamSkipEI(U),R)},findASCIIHexDecodeInlineStreamEnd:function(U){for(var z=62,D=U.pos,k,T;(k=U.getByte())!==-1&&k!==z;);return T=U.pos-D,k===-1?((0,i.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),U.skip(-T),this.findDefaultInlineStreamEnd(U)):(this.inlineStreamSkipEI(U),T)},inlineStreamSkipEI:function(U){for(var z=69,D=73,k=0,T;(T=U.getByte())!==-1;)if(k===0)k=T===z?1:0;else if(k===1)k=T===D?2:0;else if(k===2)break},makeInlineImage:function(U){for(var z=this.lexer,D=z.stream,k=new s.Dict(this.xref);!(0,s.isCmd)(this.buf1,"ID")&&!(0,s.isEOF)(this.buf1);){if(!(0,s.isName)(this.buf1))throw new i.FormatError("Dictionary key must be a name object");var T=this.buf1.name;if(this.shift(),(0,s.isEOF)(this.buf1))break;k.set(T,this.getObj(U))}var R=k.get("Filter","F"),g;if((0,s.isName)(R))g=R.name;else if(Array.isArray(R)){var m=this.xref.fetchIfRef(R[0]);(0,s.isName)(m)&&(g=m.name)}var v=D.pos,b,f,p;g==="DCTDecode"||g==="DCT"?b=this.findDCTDecodeInlineStreamEnd(D):g==="ASCII85Decode"||g==="A85"?b=this.findASCII85DecodeInlineStreamEnd(D):g==="ASCIIHexDecode"||g==="AHx"?b=this.findASCIIHexDecodeInlineStreamEnd(D):b=this.findDefaultInlineStreamEnd(D);var h=D.makeSubStream(v,b,k),_;if(b<l){var I=h.getBytes();h.reset();var W=1,q=0;for(f=0,p=I.length;f<p;++f)W+=I[f]&255,q+=W;_=q%65521<<16|W%65521;var B=this.imageCache[_];if(B!==void 0)return this.buf2=s.Cmd.get("EI"),this.shift(),B.reset(),B}return U&&(h=U.createStream(h,b)),h=this.filter(h,k,b),h.dict=k,_!==void 0&&(h.cacheKey="inline_"+b+"_"+_,this.imageCache[_]=h),this.buf2=s.Cmd.get("EI"),this.shift(),h},makeStream:function(U,z){var D=this.lexer,k=D.stream;D.skipToNextLine();var T=k.pos-1,R=U.get("Length");if(Number.isInteger(R)||((0,i.info)("Bad "+R+" attribute in stream"),R=0),k.pos=T+R,D.nextChar(),this.tryShift()&&(0,s.isCmd)(this.buf2,"endstream"))this.shift();else{k.pos=T;for(var g=2048,m=9,v=[101,110,100,115,116,114,101,97,109],b=0,f=!1,p,h;k.pos<k.end;){var _=k.peekBytes(g),I=_.length-m;if(I<=0)break;for(f=!1,p=0;p<I;){for(h=0;h<m&&_[p+h]===v[h];)h++;if(h>=m){f=!0;break}p++}if(f){b+=p,k.pos+=p;break}b+=I,k.pos+=I}if(!f)throw new i.FormatError("Missing endstream");R=b,D.nextChar(),this.shift(),this.shift()}return this.shift(),k=k.makeSubStream(T,R,U),z&&(k=z.createStream(k,R)),k=this.filter(k,U,R),k.dict=U,k},filter:function(U,z,D){var k=z.get("Filter","F"),T=z.get("DecodeParms","DP");if((0,s.isName)(k))return Array.isArray(T)&&(0,i.warn)("/DecodeParms should not contain an Array, when /Filter contains a Name."),this.makeFilter(U,k.name,D,T);var R=D;if(Array.isArray(k))for(var g=k,m=T,v=0,b=g.length;v<b;++v){if(k=this.xref.fetchIfRef(g[v]),!(0,s.isName)(k))throw new i.FormatError("Bad filter name: "+k);T=null,Array.isArray(m)&&v in m&&(T=this.xref.fetchIfRef(m[v])),U=this.makeFilter(U,k.name,R,T),R=null}return U},makeFilter:function(U,z,D,k){if(D===0)return(0,i.warn)('Empty "'+z+'" stream.'),new a.NullStream(U);try{var T=this.xref.stats.streamTypes;if(z==="FlateDecode"||z==="Fl")return T[i.StreamType.FLATE]=!0,k?new a.PredictorStream(new a.FlateStream(U,D),D,k):new a.FlateStream(U,D);if(z==="LZWDecode"||z==="LZW"){T[i.StreamType.LZW]=!0;var R=1;return k?(k.has("EarlyChange")&&(R=k.get("EarlyChange")),new a.PredictorStream(new a.LZWStream(U,D,R),D,k)):new a.LZWStream(U,D,R)}return z==="DCTDecode"||z==="DCT"?(T[i.StreamType.DCT]=!0,new a.JpegStream(U,D,U.dict,k)):z==="JPXDecode"||z==="JPX"?(T[i.StreamType.JPX]=!0,new a.JpxStream(U,D,U.dict,k)):z==="ASCII85Decode"||z==="A85"?(T[i.StreamType.A85]=!0,new a.Ascii85Stream(U,D)):z==="ASCIIHexDecode"||z==="AHx"?(T[i.StreamType.AHX]=!0,new a.AsciiHexStream(U,D)):z==="CCITTFaxDecode"||z==="CCF"?(T[i.StreamType.CCF]=!0,new t.CCITTFaxStream(U,D,k)):z==="RunLengthDecode"||z==="RL"?(T[i.StreamType.RL]=!0,new a.RunLengthStream(U,D)):z==="JBIG2Decode"?(T[i.StreamType.JBIG]=!0,new o.Jbig2Stream(U,D,U.dict,k)):((0,i.warn)('filter "'+z+'" not supported yet'),U)}catch(g){if(g instanceof i.MissingDataException)throw g;return(0,i.warn)('Invalid stream: "'+g+'"'),new a.NullStream(U)}}},S}(),c=function(){function S(z,D){this.stream=z,this.nextChar(),this.strBuf=[],this.knownCommands=D}var V=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function U(z){return z>=48&&z<=57?z&15:z>=65&&z<=70||z>=97&&z<=102?(z&15)+9:-1}return S.prototype={nextChar:function(){return this.currentChar=this.stream.getByte()},peekChar:function(){return this.stream.peekByte()},getNumber:function(){var D=this.currentChar,k=!1,T=0,R=1;if(D===45?(R=-1,D=this.nextChar(),D===45&&(D=this.nextChar())):D===43&&(D=this.nextChar()),D===46&&(T=10,D=this.nextChar()),D===10||D===13)do D=this.nextChar();while(D===10||D===13);if(D<48||D>57)throw new i.FormatError("Invalid number: "+String.fromCharCode(D)+" (charCode "+D+")");for(var g=D-48,m=0,v=1;(D=this.nextChar())>=0;)if(48<=D&&D<=57){var b=D-48;k?m=m*10+b:(T!==0&&(T*=10),g=g*10+b)}else if(D===46)if(T===0)T=1;else break;else if(D===45)(0,i.warn)("Badly formatted number");else if(D===69||D===101){if(D=this.peekChar(),D===43||D===45)v=D===45?-1:1,this.nextChar();else if(D<48||D>57)break;k=!0}else break;return T!==0&&(g/=T),k&&(g*=Math.pow(10,v*m)),R*g},getString:function(){var D=1,k=!1,T=this.strBuf;T.length=0;for(var R=this.nextChar();;){var g=!1;switch(R|0){case-1:(0,i.warn)("Unterminated string"),k=!0;break;case 40:++D,T.push("(");break;case 41:--D===0?(this.nextChar(),k=!0):T.push(")");break;case 92:switch(R=this.nextChar(),R){case-1:(0,i.warn)("Unterminated string"),k=!0;break;case 110:T.push(`
`);break;case 114:T.push("\r");break;case 116:T.push("	");break;case 98:T.push("\b");break;case 102:T.push("\f");break;case 92:case 40:case 41:T.push(String.fromCharCode(R));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var m=R&15;R=this.nextChar(),g=!0,R>=48&&R<=55&&(m=(m<<3)+(R&15),R=this.nextChar(),R>=48&&R<=55&&(g=!1,m=(m<<3)+(R&15))),T.push(String.fromCharCode(m));break;case 13:this.peekChar()===10&&this.nextChar();break;case 10:break;default:T.push(String.fromCharCode(R));break}break;default:T.push(String.fromCharCode(R));break}if(k)break;g||(R=this.nextChar())}return T.join("")},getName:function(){var D,k,T=this.strBuf;for(T.length=0;(D=this.nextChar())>=0&&!V[D];)if(D===35){if(D=this.nextChar(),V[D]){(0,i.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),T.push("#");break}var R=U(D);if(R!==-1){k=D,D=this.nextChar();var g=U(D);if(g===-1){if((0,i.warn)("Lexer_getName: Illegal digit ("+String.fromCharCode(D)+") in hexadecimal number."),T.push("#",String.fromCharCode(k)),V[D])break;T.push(String.fromCharCode(D));continue}T.push(String.fromCharCode(R<<4|g))}else T.push("#",String.fromCharCode(D))}else T.push(String.fromCharCode(D));return T.length>127&&(0,i.warn)("name token is longer than allowed by the spec: "+T.length),s.Name.get(T.join(""))},getHexString:function(){var D=this.strBuf;D.length=0;for(var k=this.currentChar,T=!0,R,g;;)if(k<0){(0,i.warn)("Unterminated hex string");break}else if(k===62){this.nextChar();break}else if(V[k]===1){k=this.nextChar();continue}else{if(T){if(R=U(k),R===-1){(0,i.warn)('Ignoring invalid character "'+k+'" in hex string'),k=this.nextChar();continue}}else{if(g=U(k),g===-1){(0,i.warn)('Ignoring invalid character "'+k+'" in hex string'),k=this.nextChar();continue}D.push(String.fromCharCode(R<<4|g))}T=!T,k=this.nextChar()}return D.join("")},getObj:function(){for(var D=!1,k=this.currentChar;;){if(k<0)return s.EOF;if(D)(k===10||k===13)&&(D=!1);else if(k===37)D=!0;else if(V[k]!==1)break;k=this.nextChar()}switch(k|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),s.Cmd.get("[");case 93:return this.nextChar(),s.Cmd.get("]");case 60:return k=this.nextChar(),k===60?(this.nextChar(),s.Cmd.get("<<")):this.getHexString();case 62:return k=this.nextChar(),k===62?(this.nextChar(),s.Cmd.get(">>")):s.Cmd.get(">");case 123:return this.nextChar(),s.Cmd.get("{");case 125:return this.nextChar(),s.Cmd.get("}");case 41:throw this.nextChar(),new i.FormatError("Illegal character: "+k)}for(var T=String.fromCharCode(k),R=this.knownCommands,g=R&&R[T]!==void 0;(k=this.nextChar())>=0&&!V[k];){var m=T+String.fromCharCode(k);if(g&&R[m]===void 0)break;if(T.length===128)throw new i.FormatError("Command token too long: "+T.length);T=m,g=R&&R[T]!==void 0}return T==="true"?!0:T==="false"?!1:T==="null"?null:s.Cmd.get(T)},skipToNextLine:function(){for(var D=this.currentChar;D>=0;){if(D===13){D=this.nextChar(),D===10&&this.nextChar();break}else if(D===10){this.nextChar();break}D=this.nextChar()}}},S}(),y={create:function(S){function V(v,b){var f=R.get(v);if(Number.isInteger(f)&&(b?f>=0:f>0))return f;throw new Error('The "'+v+'" parameter in the linearization dictionary is invalid.')}function U(){var v=R.get("H"),b,f;if(Array.isArray(v)&&((b=v.length)===2||b===4)){for(var p=0;p<b;p++)if(!(Number.isInteger(f=v[p])&&f>0))throw new Error("Hint ("+p+") in the linearization dictionary is invalid.");return v}throw new Error("Hint array in the linearization dictionary is invalid.")}var z=new d(new c(S),!1,null),D=z.getObj(),k=z.getObj(),T=z.getObj(),R=z.getObj(),g,m;if(Number.isInteger(D)&&Number.isInteger(k)&&(0,s.isCmd)(T,"obj")&&(0,s.isDict)(R)&&(0,i.isNum)(g=R.get("Linearized"))&&g>0){if((m=V("L"))!==S.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.')}else return null;return{length:m,hints:U(),objectNumberFirst:V("O"),endFirst:V("E"),numPages:V("N"),mainXRefEntriesOffset:V("T"),pageFirst:R.has("P")?V("P",!0):0}}};e.Lexer=c,e.Linearization=y,e.Parser=d},function(n,e,r){"use strict";var a=r(3),i=r(1).document,s=a(i)&&a(i.createElement);n.exports=function(t){return s?i.createElement(t):{}}},function(n,e,r){"use strict";var a=r(3);n.exports=function(i,s){if(!a(i))return i;var t,o;if(s&&typeof(t=i.toString)=="function"&&!a(o=t.call(i))||typeof(t=i.valueOf)=="function"&&!a(o=t.call(i))||!s&&typeof(t=i.toString)=="function"&&!a(o=t.call(i)))return o;throw TypeError("Can't convert object to primitive value")}},function(n,e,r){"use strict";var a=r(25);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return a(i)=="String"?i.split(""):Object(i)}},function(n,e,r){"use strict";n.exports=function(a){if(a==null)throw TypeError("Can't call method on  "+a);return a}},function(n,e,r){"use strict";var a=r(54)("keys"),i=r(17);n.exports=function(s){return a[s]||(a[s]=i(s))}},function(n,e,r){"use strict";n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,e,r){"use strict";var a=r(52),i=r(40);n.exports=Object.keys||function(t){return a(t,i)}},function(n,e,r){"use strict";var a=r(13),i=r(37),s=r(19),t=r(14),o=r(91);n.exports=function(l,d){var c=l==1,y=l==2,u=l==3,S=l==4,V=l==6,U=l==5||V,z=d||o;return function(D,k,T){for(var R=s(D),g=i(R),m=a(k,T,3),v=t(g.length),b=0,f=c?z(D,v):y?z(D,0):void 0,p,h;v>b;b++)if((U||b in g)&&(p=g[b],h=m(p,b,R),l)){if(c)f[b]=h;else if(h)switch(l){case 3:return!0;case 5:return p;case 6:return b;case 2:f.push(p)}else if(S)return!1}return V?-1:u||S?S:f}}},function(n,e,r){"use strict";var a=r(9),i=r(22),s=r(4)("species");n.exports=function(t,o){var l=a(t).constructor,d;return l===void 0||(d=a(l)[s])==null?o:i(d)}},function(n,e,r){"use strict";var a=r(4)("iterator"),i=!1;try{var s=[7][a]();s.return=function(){i=!0},Array.from(s,function(){throw 2})}catch{}n.exports=function(t,o){if(!o&&!i)return!1;var l=!1;try{var d=[7],c=d[a]();c.next=function(){return{done:l=!0}},d[a]=function(){return c},t(d)}catch{}return l}},function(n,e,r){"use strict";var a=r(22);function i(s){var t,o;this.promise=new s(function(l,d){if(t!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");t=l,o=d}),this.resolve=a(t),this.reject=a(o)}n.exports.f=function(s){return new i(s)}},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},i=r(17)("meta"),s=r(3),t=r(12),o=r(15).f,l=0,d=Object.isExtensible||function(){return!0},c=!r(11)(function(){return d(Object.preventExtensions({}))}),y=function(D){o(D,i,{value:{i:"O"+ ++l,w:{}}})},u=function(D,k){if(!s(D))return(typeof D>"u"?"undefined":a(D))=="symbol"?D:(typeof D=="string"?"S":"P")+D;if(!t(D,i)){if(!d(D))return"F";if(!k)return"E";y(D)}return D[i].i},S=function(D,k){if(!t(D,i)){if(!d(D))return!0;if(!k)return!1;y(D)}return D[i].w},V=function(D){return c&&U.NEED&&d(D)&&!t(D,i)&&y(D),D},U=n.exports={KEY:i,NEED:!1,fastKey:u,getWeak:S,onFreeze:V}},function(n,e,r){var a=r(0).getLookupTableFactory,i=a(function(t){t.A=65,t.AE=198,t.AEacute=508,t.AEmacron=482,t.AEsmall=63462,t.Aacute=193,t.Aacutesmall=63457,t.Abreve=258,t.Abreveacute=7854,t.Abrevecyrillic=1232,t.Abrevedotbelow=7862,t.Abrevegrave=7856,t.Abrevehookabove=7858,t.Abrevetilde=7860,t.Acaron=461,t.Acircle=9398,t.Acircumflex=194,t.Acircumflexacute=7844,t.Acircumflexdotbelow=7852,t.Acircumflexgrave=7846,t.Acircumflexhookabove=7848,t.Acircumflexsmall=63458,t.Acircumflextilde=7850,t.Acute=63177,t.Acutesmall=63412,t.Acyrillic=1040,t.Adblgrave=512,t.Adieresis=196,t.Adieresiscyrillic=1234,t.Adieresismacron=478,t.Adieresissmall=63460,t.Adotbelow=7840,t.Adotmacron=480,t.Agrave=192,t.Agravesmall=63456,t.Ahookabove=7842,t.Aiecyrillic=1236,t.Ainvertedbreve=514,t.Alpha=913,t.Alphatonos=902,t.Amacron=256,t.Amonospace=65313,t.Aogonek=260,t.Aring=197,t.Aringacute=506,t.Aringbelow=7680,t.Aringsmall=63461,t.Asmall=63329,t.Atilde=195,t.Atildesmall=63459,t.Aybarmenian=1329,t.B=66,t.Bcircle=9399,t.Bdotaccent=7682,t.Bdotbelow=7684,t.Becyrillic=1041,t.Benarmenian=1330,t.Beta=914,t.Bhook=385,t.Blinebelow=7686,t.Bmonospace=65314,t.Brevesmall=63220,t.Bsmall=63330,t.Btopbar=386,t.C=67,t.Caarmenian=1342,t.Cacute=262,t.Caron=63178,t.Caronsmall=63221,t.Ccaron=268,t.Ccedilla=199,t.Ccedillaacute=7688,t.Ccedillasmall=63463,t.Ccircle=9400,t.Ccircumflex=264,t.Cdot=266,t.Cdotaccent=266,t.Cedillasmall=63416,t.Chaarmenian=1353,t.Cheabkhasiancyrillic=1212,t.Checyrillic=1063,t.Chedescenderabkhasiancyrillic=1214,t.Chedescendercyrillic=1206,t.Chedieresiscyrillic=1268,t.Cheharmenian=1347,t.Chekhakassiancyrillic=1227,t.Cheverticalstrokecyrillic=1208,t.Chi=935,t.Chook=391,t.Circumflexsmall=63222,t.Cmonospace=65315,t.Coarmenian=1361,t.Csmall=63331,t.D=68,t.DZ=497,t.DZcaron=452,t.Daarmenian=1332,t.Dafrican=393,t.Dcaron=270,t.Dcedilla=7696,t.Dcircle=9401,t.Dcircumflexbelow=7698,t.Dcroat=272,t.Ddotaccent=7690,t.Ddotbelow=7692,t.Decyrillic=1044,t.Deicoptic=1006,t.Delta=8710,t.Deltagreek=916,t.Dhook=394,t.Dieresis=63179,t.DieresisAcute=63180,t.DieresisGrave=63181,t.Dieresissmall=63400,t.Digammagreek=988,t.Djecyrillic=1026,t.Dlinebelow=7694,t.Dmonospace=65316,t.Dotaccentsmall=63223,t.Dslash=272,t.Dsmall=63332,t.Dtopbar=395,t.Dz=498,t.Dzcaron=453,t.Dzeabkhasiancyrillic=1248,t.Dzecyrillic=1029,t.Dzhecyrillic=1039,t.E=69,t.Eacute=201,t.Eacutesmall=63465,t.Ebreve=276,t.Ecaron=282,t.Ecedillabreve=7708,t.Echarmenian=1333,t.Ecircle=9402,t.Ecircumflex=202,t.Ecircumflexacute=7870,t.Ecircumflexbelow=7704,t.Ecircumflexdotbelow=7878,t.Ecircumflexgrave=7872,t.Ecircumflexhookabove=7874,t.Ecircumflexsmall=63466,t.Ecircumflextilde=7876,t.Ecyrillic=1028,t.Edblgrave=516,t.Edieresis=203,t.Edieresissmall=63467,t.Edot=278,t.Edotaccent=278,t.Edotbelow=7864,t.Efcyrillic=1060,t.Egrave=200,t.Egravesmall=63464,t.Eharmenian=1335,t.Ehookabove=7866,t.Eightroman=8551,t.Einvertedbreve=518,t.Eiotifiedcyrillic=1124,t.Elcyrillic=1051,t.Elevenroman=8554,t.Emacron=274,t.Emacronacute=7702,t.Emacrongrave=7700,t.Emcyrillic=1052,t.Emonospace=65317,t.Encyrillic=1053,t.Endescendercyrillic=1186,t.Eng=330,t.Enghecyrillic=1188,t.Enhookcyrillic=1223,t.Eogonek=280,t.Eopen=400,t.Epsilon=917,t.Epsilontonos=904,t.Ercyrillic=1056,t.Ereversed=398,t.Ereversedcyrillic=1069,t.Escyrillic=1057,t.Esdescendercyrillic=1194,t.Esh=425,t.Esmall=63333,t.Eta=919,t.Etarmenian=1336,t.Etatonos=905,t.Eth=208,t.Ethsmall=63472,t.Etilde=7868,t.Etildebelow=7706,t.Euro=8364,t.Ezh=439,t.Ezhcaron=494,t.Ezhreversed=440,t.F=70,t.Fcircle=9403,t.Fdotaccent=7710,t.Feharmenian=1366,t.Feicoptic=996,t.Fhook=401,t.Fitacyrillic=1138,t.Fiveroman=8548,t.Fmonospace=65318,t.Fourroman=8547,t.Fsmall=63334,t.G=71,t.GBsquare=13191,t.Gacute=500,t.Gamma=915,t.Gammaafrican=404,t.Gangiacoptic=1002,t.Gbreve=286,t.Gcaron=486,t.Gcedilla=290,t.Gcircle=9404,t.Gcircumflex=284,t.Gcommaaccent=290,t.Gdot=288,t.Gdotaccent=288,t.Gecyrillic=1043,t.Ghadarmenian=1346,t.Ghemiddlehookcyrillic=1172,t.Ghestrokecyrillic=1170,t.Gheupturncyrillic=1168,t.Ghook=403,t.Gimarmenian=1331,t.Gjecyrillic=1027,t.Gmacron=7712,t.Gmonospace=65319,t.Grave=63182,t.Gravesmall=63328,t.Gsmall=63335,t.Gsmallhook=667,t.Gstroke=484,t.H=72,t.H18533=9679,t.H18543=9642,t.H18551=9643,t.H22073=9633,t.HPsquare=13259,t.Haabkhasiancyrillic=1192,t.Hadescendercyrillic=1202,t.Hardsigncyrillic=1066,t.Hbar=294,t.Hbrevebelow=7722,t.Hcedilla=7720,t.Hcircle=9405,t.Hcircumflex=292,t.Hdieresis=7718,t.Hdotaccent=7714,t.Hdotbelow=7716,t.Hmonospace=65320,t.Hoarmenian=1344,t.Horicoptic=1e3,t.Hsmall=63336,t.Hungarumlaut=63183,t.Hungarumlautsmall=63224,t.Hzsquare=13200,t.I=73,t.IAcyrillic=1071,t.IJ=306,t.IUcyrillic=1070,t.Iacute=205,t.Iacutesmall=63469,t.Ibreve=300,t.Icaron=463,t.Icircle=9406,t.Icircumflex=206,t.Icircumflexsmall=63470,t.Icyrillic=1030,t.Idblgrave=520,t.Idieresis=207,t.Idieresisacute=7726,t.Idieresiscyrillic=1252,t.Idieresissmall=63471,t.Idot=304,t.Idotaccent=304,t.Idotbelow=7882,t.Iebrevecyrillic=1238,t.Iecyrillic=1045,t.Ifraktur=8465,t.Igrave=204,t.Igravesmall=63468,t.Ihookabove=7880,t.Iicyrillic=1048,t.Iinvertedbreve=522,t.Iishortcyrillic=1049,t.Imacron=298,t.Imacroncyrillic=1250,t.Imonospace=65321,t.Iniarmenian=1339,t.Iocyrillic=1025,t.Iogonek=302,t.Iota=921,t.Iotaafrican=406,t.Iotadieresis=938,t.Iotatonos=906,t.Ismall=63337,t.Istroke=407,t.Itilde=296,t.Itildebelow=7724,t.Izhitsacyrillic=1140,t.Izhitsadblgravecyrillic=1142,t.J=74,t.Jaarmenian=1345,t.Jcircle=9407,t.Jcircumflex=308,t.Jecyrillic=1032,t.Jheharmenian=1355,t.Jmonospace=65322,t.Jsmall=63338,t.K=75,t.KBsquare=13189,t.KKsquare=13261,t.Kabashkircyrillic=1184,t.Kacute=7728,t.Kacyrillic=1050,t.Kadescendercyrillic=1178,t.Kahookcyrillic=1219,t.Kappa=922,t.Kastrokecyrillic=1182,t.Kaverticalstrokecyrillic=1180,t.Kcaron=488,t.Kcedilla=310,t.Kcircle=9408,t.Kcommaaccent=310,t.Kdotbelow=7730,t.Keharmenian=1364,t.Kenarmenian=1343,t.Khacyrillic=1061,t.Kheicoptic=998,t.Khook=408,t.Kjecyrillic=1036,t.Klinebelow=7732,t.Kmonospace=65323,t.Koppacyrillic=1152,t.Koppagreek=990,t.Ksicyrillic=1134,t.Ksmall=63339,t.L=76,t.LJ=455,t.LL=63167,t.Lacute=313,t.Lambda=923,t.Lcaron=317,t.Lcedilla=315,t.Lcircle=9409,t.Lcircumflexbelow=7740,t.Lcommaaccent=315,t.Ldot=319,t.Ldotaccent=319,t.Ldotbelow=7734,t.Ldotbelowmacron=7736,t.Liwnarmenian=1340,t.Lj=456,t.Ljecyrillic=1033,t.Llinebelow=7738,t.Lmonospace=65324,t.Lslash=321,t.Lslashsmall=63225,t.Lsmall=63340,t.M=77,t.MBsquare=13190,t.Macron=63184,t.Macronsmall=63407,t.Macute=7742,t.Mcircle=9410,t.Mdotaccent=7744,t.Mdotbelow=7746,t.Menarmenian=1348,t.Mmonospace=65325,t.Msmall=63341,t.Mturned=412,t.Mu=924,t.N=78,t.NJ=458,t.Nacute=323,t.Ncaron=327,t.Ncedilla=325,t.Ncircle=9411,t.Ncircumflexbelow=7754,t.Ncommaaccent=325,t.Ndotaccent=7748,t.Ndotbelow=7750,t.Nhookleft=413,t.Nineroman=8552,t.Nj=459,t.Njecyrillic=1034,t.Nlinebelow=7752,t.Nmonospace=65326,t.Nowarmenian=1350,t.Nsmall=63342,t.Ntilde=209,t.Ntildesmall=63473,t.Nu=925,t.O=79,t.OE=338,t.OEsmall=63226,t.Oacute=211,t.Oacutesmall=63475,t.Obarredcyrillic=1256,t.Obarreddieresiscyrillic=1258,t.Obreve=334,t.Ocaron=465,t.Ocenteredtilde=415,t.Ocircle=9412,t.Ocircumflex=212,t.Ocircumflexacute=7888,t.Ocircumflexdotbelow=7896,t.Ocircumflexgrave=7890,t.Ocircumflexhookabove=7892,t.Ocircumflexsmall=63476,t.Ocircumflextilde=7894,t.Ocyrillic=1054,t.Odblacute=336,t.Odblgrave=524,t.Odieresis=214,t.Odieresiscyrillic=1254,t.Odieresissmall=63478,t.Odotbelow=7884,t.Ogoneksmall=63227,t.Ograve=210,t.Ogravesmall=63474,t.Oharmenian=1365,t.Ohm=8486,t.Ohookabove=7886,t.Ohorn=416,t.Ohornacute=7898,t.Ohorndotbelow=7906,t.Ohorngrave=7900,t.Ohornhookabove=7902,t.Ohorntilde=7904,t.Ohungarumlaut=336,t.Oi=418,t.Oinvertedbreve=526,t.Omacron=332,t.Omacronacute=7762,t.Omacrongrave=7760,t.Omega=8486,t.Omegacyrillic=1120,t.Omegagreek=937,t.Omegaroundcyrillic=1146,t.Omegatitlocyrillic=1148,t.Omegatonos=911,t.Omicron=927,t.Omicrontonos=908,t.Omonospace=65327,t.Oneroman=8544,t.Oogonek=490,t.Oogonekmacron=492,t.Oopen=390,t.Oslash=216,t.Oslashacute=510,t.Oslashsmall=63480,t.Osmall=63343,t.Ostrokeacute=510,t.Otcyrillic=1150,t.Otilde=213,t.Otildeacute=7756,t.Otildedieresis=7758,t.Otildesmall=63477,t.P=80,t.Pacute=7764,t.Pcircle=9413,t.Pdotaccent=7766,t.Pecyrillic=1055,t.Peharmenian=1354,t.Pemiddlehookcyrillic=1190,t.Phi=934,t.Phook=420,t.Pi=928,t.Piwrarmenian=1363,t.Pmonospace=65328,t.Psi=936,t.Psicyrillic=1136,t.Psmall=63344,t.Q=81,t.Qcircle=9414,t.Qmonospace=65329,t.Qsmall=63345,t.R=82,t.Raarmenian=1356,t.Racute=340,t.Rcaron=344,t.Rcedilla=342,t.Rcircle=9415,t.Rcommaaccent=342,t.Rdblgrave=528,t.Rdotaccent=7768,t.Rdotbelow=7770,t.Rdotbelowmacron=7772,t.Reharmenian=1360,t.Rfraktur=8476,t.Rho=929,t.Ringsmall=63228,t.Rinvertedbreve=530,t.Rlinebelow=7774,t.Rmonospace=65330,t.Rsmall=63346,t.Rsmallinverted=641,t.Rsmallinvertedsuperior=694,t.S=83,t.SF010000=9484,t.SF020000=9492,t.SF030000=9488,t.SF040000=9496,t.SF050000=9532,t.SF060000=9516,t.SF070000=9524,t.SF080000=9500,t.SF090000=9508,t.SF100000=9472,t.SF110000=9474,t.SF190000=9569,t.SF200000=9570,t.SF210000=9558,t.SF220000=9557,t.SF230000=9571,t.SF240000=9553,t.SF250000=9559,t.SF260000=9565,t.SF270000=9564,t.SF280000=9563,t.SF360000=9566,t.SF370000=9567,t.SF380000=9562,t.SF390000=9556,t.SF400000=9577,t.SF410000=9574,t.SF420000=9568,t.SF430000=9552,t.SF440000=9580,t.SF450000=9575,t.SF460000=9576,t.SF470000=9572,t.SF480000=9573,t.SF490000=9561,t.SF500000=9560,t.SF510000=9554,t.SF520000=9555,t.SF530000=9579,t.SF540000=9578,t.Sacute=346,t.Sacutedotaccent=7780,t.Sampigreek=992,t.Scaron=352,t.Scarondotaccent=7782,t.Scaronsmall=63229,t.Scedilla=350,t.Schwa=399,t.Schwacyrillic=1240,t.Schwadieresiscyrillic=1242,t.Scircle=9416,t.Scircumflex=348,t.Scommaaccent=536,t.Sdotaccent=7776,t.Sdotbelow=7778,t.Sdotbelowdotaccent=7784,t.Seharmenian=1357,t.Sevenroman=8550,t.Shaarmenian=1351,t.Shacyrillic=1064,t.Shchacyrillic=1065,t.Sheicoptic=994,t.Shhacyrillic=1210,t.Shimacoptic=1004,t.Sigma=931,t.Sixroman=8549,t.Smonospace=65331,t.Softsigncyrillic=1068,t.Ssmall=63347,t.Stigmagreek=986,t.T=84,t.Tau=932,t.Tbar=358,t.Tcaron=356,t.Tcedilla=354,t.Tcircle=9417,t.Tcircumflexbelow=7792,t.Tcommaaccent=354,t.Tdotaccent=7786,t.Tdotbelow=7788,t.Tecyrillic=1058,t.Tedescendercyrillic=1196,t.Tenroman=8553,t.Tetsecyrillic=1204,t.Theta=920,t.Thook=428,t.Thorn=222,t.Thornsmall=63486,t.Threeroman=8546,t.Tildesmall=63230,t.Tiwnarmenian=1359,t.Tlinebelow=7790,t.Tmonospace=65332,t.Toarmenian=1337,t.Tonefive=444,t.Tonesix=388,t.Tonetwo=423,t.Tretroflexhook=430,t.Tsecyrillic=1062,t.Tshecyrillic=1035,t.Tsmall=63348,t.Twelveroman=8555,t.Tworoman=8545,t.U=85,t.Uacute=218,t.Uacutesmall=63482,t.Ubreve=364,t.Ucaron=467,t.Ucircle=9418,t.Ucircumflex=219,t.Ucircumflexbelow=7798,t.Ucircumflexsmall=63483,t.Ucyrillic=1059,t.Udblacute=368,t.Udblgrave=532,t.Udieresis=220,t.Udieresisacute=471,t.Udieresisbelow=7794,t.Udieresiscaron=473,t.Udieresiscyrillic=1264,t.Udieresisgrave=475,t.Udieresismacron=469,t.Udieresissmall=63484,t.Udotbelow=7908,t.Ugrave=217,t.Ugravesmall=63481,t.Uhookabove=7910,t.Uhorn=431,t.Uhornacute=7912,t.Uhorndotbelow=7920,t.Uhorngrave=7914,t.Uhornhookabove=7916,t.Uhorntilde=7918,t.Uhungarumlaut=368,t.Uhungarumlautcyrillic=1266,t.Uinvertedbreve=534,t.Ukcyrillic=1144,t.Umacron=362,t.Umacroncyrillic=1262,t.Umacrondieresis=7802,t.Umonospace=65333,t.Uogonek=370,t.Upsilon=933,t.Upsilon1=978,t.Upsilonacutehooksymbolgreek=979,t.Upsilonafrican=433,t.Upsilondieresis=939,t.Upsilondieresishooksymbolgreek=980,t.Upsilonhooksymbol=978,t.Upsilontonos=910,t.Uring=366,t.Ushortcyrillic=1038,t.Usmall=63349,t.Ustraightcyrillic=1198,t.Ustraightstrokecyrillic=1200,t.Utilde=360,t.Utildeacute=7800,t.Utildebelow=7796,t.V=86,t.Vcircle=9419,t.Vdotbelow=7806,t.Vecyrillic=1042,t.Vewarmenian=1358,t.Vhook=434,t.Vmonospace=65334,t.Voarmenian=1352,t.Vsmall=63350,t.Vtilde=7804,t.W=87,t.Wacute=7810,t.Wcircle=9420,t.Wcircumflex=372,t.Wdieresis=7812,t.Wdotaccent=7814,t.Wdotbelow=7816,t.Wgrave=7808,t.Wmonospace=65335,t.Wsmall=63351,t.X=88,t.Xcircle=9421,t.Xdieresis=7820,t.Xdotaccent=7818,t.Xeharmenian=1341,t.Xi=926,t.Xmonospace=65336,t.Xsmall=63352,t.Y=89,t.Yacute=221,t.Yacutesmall=63485,t.Yatcyrillic=1122,t.Ycircle=9422,t.Ycircumflex=374,t.Ydieresis=376,t.Ydieresissmall=63487,t.Ydotaccent=7822,t.Ydotbelow=7924,t.Yericyrillic=1067,t.Yerudieresiscyrillic=1272,t.Ygrave=7922,t.Yhook=435,t.Yhookabove=7926,t.Yiarmenian=1349,t.Yicyrillic=1031,t.Yiwnarmenian=1362,t.Ymonospace=65337,t.Ysmall=63353,t.Ytilde=7928,t.Yusbigcyrillic=1130,t.Yusbigiotifiedcyrillic=1132,t.Yuslittlecyrillic=1126,t.Yuslittleiotifiedcyrillic=1128,t.Z=90,t.Zaarmenian=1334,t.Zacute=377,t.Zcaron=381,t.Zcaronsmall=63231,t.Zcircle=9423,t.Zcircumflex=7824,t.Zdot=379,t.Zdotaccent=379,t.Zdotbelow=7826,t.Zecyrillic=1047,t.Zedescendercyrillic=1176,t.Zedieresiscyrillic=1246,t.Zeta=918,t.Zhearmenian=1338,t.Zhebrevecyrillic=1217,t.Zhecyrillic=1046,t.Zhedescendercyrillic=1174,t.Zhedieresiscyrillic=1244,t.Zlinebelow=7828,t.Zmonospace=65338,t.Zsmall=63354,t.Zstroke=437,t.a=97,t.aabengali=2438,t.aacute=225,t.aadeva=2310,t.aagujarati=2694,t.aagurmukhi=2566,t.aamatragurmukhi=2622,t.aarusquare=13059,t.aavowelsignbengali=2494,t.aavowelsigndeva=2366,t.aavowelsigngujarati=2750,t.abbreviationmarkarmenian=1375,t.abbreviationsigndeva=2416,t.abengali=2437,t.abopomofo=12570,t.abreve=259,t.abreveacute=7855,t.abrevecyrillic=1233,t.abrevedotbelow=7863,t.abrevegrave=7857,t.abrevehookabove=7859,t.abrevetilde=7861,t.acaron=462,t.acircle=9424,t.acircumflex=226,t.acircumflexacute=7845,t.acircumflexdotbelow=7853,t.acircumflexgrave=7847,t.acircumflexhookabove=7849,t.acircumflextilde=7851,t.acute=180,t.acutebelowcmb=791,t.acutecmb=769,t.acutecomb=769,t.acutedeva=2388,t.acutelowmod=719,t.acutetonecmb=833,t.acyrillic=1072,t.adblgrave=513,t.addakgurmukhi=2673,t.adeva=2309,t.adieresis=228,t.adieresiscyrillic=1235,t.adieresismacron=479,t.adotbelow=7841,t.adotmacron=481,t.ae=230,t.aeacute=509,t.aekorean=12624,t.aemacron=483,t.afii00208=8213,t.afii08941=8356,t.afii10017=1040,t.afii10018=1041,t.afii10019=1042,t.afii10020=1043,t.afii10021=1044,t.afii10022=1045,t.afii10023=1025,t.afii10024=1046,t.afii10025=1047,t.afii10026=1048,t.afii10027=1049,t.afii10028=1050,t.afii10029=1051,t.afii10030=1052,t.afii10031=1053,t.afii10032=1054,t.afii10033=1055,t.afii10034=1056,t.afii10035=1057,t.afii10036=1058,t.afii10037=1059,t.afii10038=1060,t.afii10039=1061,t.afii10040=1062,t.afii10041=1063,t.afii10042=1064,t.afii10043=1065,t.afii10044=1066,t.afii10045=1067,t.afii10046=1068,t.afii10047=1069,t.afii10048=1070,t.afii10049=1071,t.afii10050=1168,t.afii10051=1026,t.afii10052=1027,t.afii10053=1028,t.afii10054=1029,t.afii10055=1030,t.afii10056=1031,t.afii10057=1032,t.afii10058=1033,t.afii10059=1034,t.afii10060=1035,t.afii10061=1036,t.afii10062=1038,t.afii10063=63172,t.afii10064=63173,t.afii10065=1072,t.afii10066=1073,t.afii10067=1074,t.afii10068=1075,t.afii10069=1076,t.afii10070=1077,t.afii10071=1105,t.afii10072=1078,t.afii10073=1079,t.afii10074=1080,t.afii10075=1081,t.afii10076=1082,t.afii10077=1083,t.afii10078=1084,t.afii10079=1085,t.afii10080=1086,t.afii10081=1087,t.afii10082=1088,t.afii10083=1089,t.afii10084=1090,t.afii10085=1091,t.afii10086=1092,t.afii10087=1093,t.afii10088=1094,t.afii10089=1095,t.afii10090=1096,t.afii10091=1097,t.afii10092=1098,t.afii10093=1099,t.afii10094=1100,t.afii10095=1101,t.afii10096=1102,t.afii10097=1103,t.afii10098=1169,t.afii10099=1106,t.afii10100=1107,t.afii10101=1108,t.afii10102=1109,t.afii10103=1110,t.afii10104=1111,t.afii10105=1112,t.afii10106=1113,t.afii10107=1114,t.afii10108=1115,t.afii10109=1116,t.afii10110=1118,t.afii10145=1039,t.afii10146=1122,t.afii10147=1138,t.afii10148=1140,t.afii10192=63174,t.afii10193=1119,t.afii10194=1123,t.afii10195=1139,t.afii10196=1141,t.afii10831=63175,t.afii10832=63176,t.afii10846=1241,t.afii299=8206,t.afii300=8207,t.afii301=8205,t.afii57381=1642,t.afii57388=1548,t.afii57392=1632,t.afii57393=1633,t.afii57394=1634,t.afii57395=1635,t.afii57396=1636,t.afii57397=1637,t.afii57398=1638,t.afii57399=1639,t.afii57400=1640,t.afii57401=1641,t.afii57403=1563,t.afii57407=1567,t.afii57409=1569,t.afii57410=1570,t.afii57411=1571,t.afii57412=1572,t.afii57413=1573,t.afii57414=1574,t.afii57415=1575,t.afii57416=1576,t.afii57417=1577,t.afii57418=1578,t.afii57419=1579,t.afii57420=1580,t.afii57421=1581,t.afii57422=1582,t.afii57423=1583,t.afii57424=1584,t.afii57425=1585,t.afii57426=1586,t.afii57427=1587,t.afii57428=1588,t.afii57429=1589,t.afii57430=1590,t.afii57431=1591,t.afii57432=1592,t.afii57433=1593,t.afii57434=1594,t.afii57440=1600,t.afii57441=1601,t.afii57442=1602,t.afii57443=1603,t.afii57444=1604,t.afii57445=1605,t.afii57446=1606,t.afii57448=1608,t.afii57449=1609,t.afii57450=1610,t.afii57451=1611,t.afii57452=1612,t.afii57453=1613,t.afii57454=1614,t.afii57455=1615,t.afii57456=1616,t.afii57457=1617,t.afii57458=1618,t.afii57470=1607,t.afii57505=1700,t.afii57506=1662,t.afii57507=1670,t.afii57508=1688,t.afii57509=1711,t.afii57511=1657,t.afii57512=1672,t.afii57513=1681,t.afii57514=1722,t.afii57519=1746,t.afii57534=1749,t.afii57636=8362,t.afii57645=1470,t.afii57658=1475,t.afii57664=1488,t.afii57665=1489,t.afii57666=1490,t.afii57667=1491,t.afii57668=1492,t.afii57669=1493,t.afii57670=1494,t.afii57671=1495,t.afii57672=1496,t.afii57673=1497,t.afii57674=1498,t.afii57675=1499,t.afii57676=1500,t.afii57677=1501,t.afii57678=1502,t.afii57679=1503,t.afii57680=1504,t.afii57681=1505,t.afii57682=1506,t.afii57683=1507,t.afii57684=1508,t.afii57685=1509,t.afii57686=1510,t.afii57687=1511,t.afii57688=1512,t.afii57689=1513,t.afii57690=1514,t.afii57694=64298,t.afii57695=64299,t.afii57700=64331,t.afii57705=64287,t.afii57716=1520,t.afii57717=1521,t.afii57718=1522,t.afii57723=64309,t.afii57793=1460,t.afii57794=1461,t.afii57795=1462,t.afii57796=1467,t.afii57797=1464,t.afii57798=1463,t.afii57799=1456,t.afii57800=1458,t.afii57801=1457,t.afii57802=1459,t.afii57803=1474,t.afii57804=1473,t.afii57806=1465,t.afii57807=1468,t.afii57839=1469,t.afii57841=1471,t.afii57842=1472,t.afii57929=700,t.afii61248=8453,t.afii61289=8467,t.afii61352=8470,t.afii61573=8236,t.afii61574=8237,t.afii61575=8238,t.afii61664=8204,t.afii63167=1645,t.afii64937=701,t.agrave=224,t.agujarati=2693,t.agurmukhi=2565,t.ahiragana=12354,t.ahookabove=7843,t.aibengali=2448,t.aibopomofo=12574,t.aideva=2320,t.aiecyrillic=1237,t.aigujarati=2704,t.aigurmukhi=2576,t.aimatragurmukhi=2632,t.ainarabic=1593,t.ainfinalarabic=65226,t.aininitialarabic=65227,t.ainmedialarabic=65228,t.ainvertedbreve=515,t.aivowelsignbengali=2504,t.aivowelsigndeva=2376,t.aivowelsigngujarati=2760,t.akatakana=12450,t.akatakanahalfwidth=65393,t.akorean=12623,t.alef=1488,t.alefarabic=1575,t.alefdageshhebrew=64304,t.aleffinalarabic=65166,t.alefhamzaabovearabic=1571,t.alefhamzaabovefinalarabic=65156,t.alefhamzabelowarabic=1573,t.alefhamzabelowfinalarabic=65160,t.alefhebrew=1488,t.aleflamedhebrew=64335,t.alefmaddaabovearabic=1570,t.alefmaddaabovefinalarabic=65154,t.alefmaksuraarabic=1609,t.alefmaksurafinalarabic=65264,t.alefmaksurainitialarabic=65267,t.alefmaksuramedialarabic=65268,t.alefpatahhebrew=64302,t.alefqamatshebrew=64303,t.aleph=8501,t.allequal=8780,t.alpha=945,t.alphatonos=940,t.amacron=257,t.amonospace=65345,t.ampersand=38,t.ampersandmonospace=65286,t.ampersandsmall=63270,t.amsquare=13250,t.anbopomofo=12578,t.angbopomofo=12580,t.angbracketleft=12296,t.angbracketright=12297,t.angkhankhuthai=3674,t.angle=8736,t.anglebracketleft=12296,t.anglebracketleftvertical=65087,t.anglebracketright=12297,t.anglebracketrightvertical=65088,t.angleleft=9001,t.angleright=9002,t.angstrom=8491,t.anoteleia=903,t.anudattadeva=2386,t.anusvarabengali=2434,t.anusvaradeva=2306,t.anusvaragujarati=2690,t.aogonek=261,t.apaatosquare=13056,t.aparen=9372,t.apostrophearmenian=1370,t.apostrophemod=700,t.apple=63743,t.approaches=8784,t.approxequal=8776,t.approxequalorimage=8786,t.approximatelyequal=8773,t.araeaekorean=12686,t.araeakorean=12685,t.arc=8978,t.arighthalfring=7834,t.aring=229,t.aringacute=507,t.aringbelow=7681,t.arrowboth=8596,t.arrowdashdown=8675,t.arrowdashleft=8672,t.arrowdashright=8674,t.arrowdashup=8673,t.arrowdblboth=8660,t.arrowdbldown=8659,t.arrowdblleft=8656,t.arrowdblright=8658,t.arrowdblup=8657,t.arrowdown=8595,t.arrowdownleft=8601,t.arrowdownright=8600,t.arrowdownwhite=8681,t.arrowheaddownmod=709,t.arrowheadleftmod=706,t.arrowheadrightmod=707,t.arrowheadupmod=708,t.arrowhorizex=63719,t.arrowleft=8592,t.arrowleftdbl=8656,t.arrowleftdblstroke=8653,t.arrowleftoverright=8646,t.arrowleftwhite=8678,t.arrowright=8594,t.arrowrightdblstroke=8655,t.arrowrightheavy=10142,t.arrowrightoverleft=8644,t.arrowrightwhite=8680,t.arrowtableft=8676,t.arrowtabright=8677,t.arrowup=8593,t.arrowupdn=8597,t.arrowupdnbse=8616,t.arrowupdownbase=8616,t.arrowupleft=8598,t.arrowupleftofdown=8645,t.arrowupright=8599,t.arrowupwhite=8679,t.arrowvertex=63718,t.asciicircum=94,t.asciicircummonospace=65342,t.asciitilde=126,t.asciitildemonospace=65374,t.ascript=593,t.ascriptturned=594,t.asmallhiragana=12353,t.asmallkatakana=12449,t.asmallkatakanahalfwidth=65383,t.asterisk=42,t.asteriskaltonearabic=1645,t.asteriskarabic=1645,t.asteriskmath=8727,t.asteriskmonospace=65290,t.asterisksmall=65121,t.asterism=8258,t.asuperior=63209,t.asymptoticallyequal=8771,t.at=64,t.atilde=227,t.atmonospace=65312,t.atsmall=65131,t.aturned=592,t.aubengali=2452,t.aubopomofo=12576,t.audeva=2324,t.augujarati=2708,t.augurmukhi=2580,t.aulengthmarkbengali=2519,t.aumatragurmukhi=2636,t.auvowelsignbengali=2508,t.auvowelsigndeva=2380,t.auvowelsigngujarati=2764,t.avagrahadeva=2365,t.aybarmenian=1377,t.ayin=1506,t.ayinaltonehebrew=64288,t.ayinhebrew=1506,t.b=98,t.babengali=2476,t.backslash=92,t.backslashmonospace=65340,t.badeva=2348,t.bagujarati=2732,t.bagurmukhi=2604,t.bahiragana=12400,t.bahtthai=3647,t.bakatakana=12496,t.bar=124,t.barmonospace=65372,t.bbopomofo=12549,t.bcircle=9425,t.bdotaccent=7683,t.bdotbelow=7685,t.beamedsixteenthnotes=9836,t.because=8757,t.becyrillic=1073,t.beharabic=1576,t.behfinalarabic=65168,t.behinitialarabic=65169,t.behiragana=12409,t.behmedialarabic=65170,t.behmeeminitialarabic=64671,t.behmeemisolatedarabic=64520,t.behnoonfinalarabic=64621,t.bekatakana=12505,t.benarmenian=1378,t.bet=1489,t.beta=946,t.betasymbolgreek=976,t.betdagesh=64305,t.betdageshhebrew=64305,t.bethebrew=1489,t.betrafehebrew=64332,t.bhabengali=2477,t.bhadeva=2349,t.bhagujarati=2733,t.bhagurmukhi=2605,t.bhook=595,t.bihiragana=12403,t.bikatakana=12499,t.bilabialclick=664,t.bindigurmukhi=2562,t.birusquare=13105,t.blackcircle=9679,t.blackdiamond=9670,t.blackdownpointingtriangle=9660,t.blackleftpointingpointer=9668,t.blackleftpointingtriangle=9664,t.blacklenticularbracketleft=12304,t.blacklenticularbracketleftvertical=65083,t.blacklenticularbracketright=12305,t.blacklenticularbracketrightvertical=65084,t.blacklowerlefttriangle=9699,t.blacklowerrighttriangle=9698,t.blackrectangle=9644,t.blackrightpointingpointer=9658,t.blackrightpointingtriangle=9654,t.blacksmallsquare=9642,t.blacksmilingface=9787,t.blacksquare=9632,t.blackstar=9733,t.blackupperlefttriangle=9700,t.blackupperrighttriangle=9701,t.blackuppointingsmalltriangle=9652,t.blackuppointingtriangle=9650,t.blank=9251,t.blinebelow=7687,t.block=9608,t.bmonospace=65346,t.bobaimaithai=3610,t.bohiragana=12412,t.bokatakana=12508,t.bparen=9373,t.bqsquare=13251,t.braceex=63732,t.braceleft=123,t.braceleftbt=63731,t.braceleftmid=63730,t.braceleftmonospace=65371,t.braceleftsmall=65115,t.bracelefttp=63729,t.braceleftvertical=65079,t.braceright=125,t.bracerightbt=63742,t.bracerightmid=63741,t.bracerightmonospace=65373,t.bracerightsmall=65116,t.bracerighttp=63740,t.bracerightvertical=65080,t.bracketleft=91,t.bracketleftbt=63728,t.bracketleftex=63727,t.bracketleftmonospace=65339,t.bracketlefttp=63726,t.bracketright=93,t.bracketrightbt=63739,t.bracketrightex=63738,t.bracketrightmonospace=65341,t.bracketrighttp=63737,t.breve=728,t.brevebelowcmb=814,t.brevecmb=774,t.breveinvertedbelowcmb=815,t.breveinvertedcmb=785,t.breveinverteddoublecmb=865,t.bridgebelowcmb=810,t.bridgeinvertedbelowcmb=826,t.brokenbar=166,t.bstroke=384,t.bsuperior=63210,t.btopbar=387,t.buhiragana=12406,t.bukatakana=12502,t.bullet=8226,t.bulletinverse=9688,t.bulletoperator=8729,t.bullseye=9678,t.c=99,t.caarmenian=1390,t.cabengali=2458,t.cacute=263,t.cadeva=2330,t.cagujarati=2714,t.cagurmukhi=2586,t.calsquare=13192,t.candrabindubengali=2433,t.candrabinducmb=784,t.candrabindudeva=2305,t.candrabindugujarati=2689,t.capslock=8682,t.careof=8453,t.caron=711,t.caronbelowcmb=812,t.caroncmb=780,t.carriagereturn=8629,t.cbopomofo=12568,t.ccaron=269,t.ccedilla=231,t.ccedillaacute=7689,t.ccircle=9426,t.ccircumflex=265,t.ccurl=597,t.cdot=267,t.cdotaccent=267,t.cdsquare=13253,t.cedilla=184,t.cedillacmb=807,t.cent=162,t.centigrade=8451,t.centinferior=63199,t.centmonospace=65504,t.centoldstyle=63394,t.centsuperior=63200,t.chaarmenian=1401,t.chabengali=2459,t.chadeva=2331,t.chagujarati=2715,t.chagurmukhi=2587,t.chbopomofo=12564,t.cheabkhasiancyrillic=1213,t.checkmark=10003,t.checyrillic=1095,t.chedescenderabkhasiancyrillic=1215,t.chedescendercyrillic=1207,t.chedieresiscyrillic=1269,t.cheharmenian=1395,t.chekhakassiancyrillic=1228,t.cheverticalstrokecyrillic=1209,t.chi=967,t.chieuchacirclekorean=12919,t.chieuchaparenkorean=12823,t.chieuchcirclekorean=12905,t.chieuchkorean=12618,t.chieuchparenkorean=12809,t.chochangthai=3594,t.chochanthai=3592,t.chochingthai=3593,t.chochoethai=3596,t.chook=392,t.cieucacirclekorean=12918,t.cieucaparenkorean=12822,t.cieuccirclekorean=12904,t.cieuckorean=12616,t.cieucparenkorean=12808,t.cieucuparenkorean=12828,t.circle=9675,t.circlecopyrt=169,t.circlemultiply=8855,t.circleot=8857,t.circleplus=8853,t.circlepostalmark=12342,t.circlewithlefthalfblack=9680,t.circlewithrighthalfblack=9681,t.circumflex=710,t.circumflexbelowcmb=813,t.circumflexcmb=770,t.clear=8999,t.clickalveolar=450,t.clickdental=448,t.clicklateral=449,t.clickretroflex=451,t.club=9827,t.clubsuitblack=9827,t.clubsuitwhite=9831,t.cmcubedsquare=13220,t.cmonospace=65347,t.cmsquaredsquare=13216,t.coarmenian=1409,t.colon=58,t.colonmonetary=8353,t.colonmonospace=65306,t.colonsign=8353,t.colonsmall=65109,t.colontriangularhalfmod=721,t.colontriangularmod=720,t.comma=44,t.commaabovecmb=787,t.commaaboverightcmb=789,t.commaaccent=63171,t.commaarabic=1548,t.commaarmenian=1373,t.commainferior=63201,t.commamonospace=65292,t.commareversedabovecmb=788,t.commareversedmod=701,t.commasmall=65104,t.commasuperior=63202,t.commaturnedabovecmb=786,t.commaturnedmod=699,t.compass=9788,t.congruent=8773,t.contourintegral=8750,t.control=8963,t.controlACK=6,t.controlBEL=7,t.controlBS=8,t.controlCAN=24,t.controlCR=13,t.controlDC1=17,t.controlDC2=18,t.controlDC3=19,t.controlDC4=20,t.controlDEL=127,t.controlDLE=16,t.controlEM=25,t.controlENQ=5,t.controlEOT=4,t.controlESC=27,t.controlETB=23,t.controlETX=3,t.controlFF=12,t.controlFS=28,t.controlGS=29,t.controlHT=9,t.controlLF=10,t.controlNAK=21,t.controlNULL=0,t.controlRS=30,t.controlSI=15,t.controlSO=14,t.controlSOT=2,t.controlSTX=1,t.controlSUB=26,t.controlSYN=22,t.controlUS=31,t.controlVT=11,t.copyright=169,t.copyrightsans=63721,t.copyrightserif=63193,t.cornerbracketleft=12300,t.cornerbracketlefthalfwidth=65378,t.cornerbracketleftvertical=65089,t.cornerbracketright=12301,t.cornerbracketrighthalfwidth=65379,t.cornerbracketrightvertical=65090,t.corporationsquare=13183,t.cosquare=13255,t.coverkgsquare=13254,t.cparen=9374,t.cruzeiro=8354,t.cstretched=663,t.curlyand=8911,t.curlyor=8910,t.currency=164,t.cyrBreve=63185,t.cyrFlex=63186,t.cyrbreve=63188,t.cyrflex=63189,t.d=100,t.daarmenian=1380,t.dabengali=2470,t.dadarabic=1590,t.dadeva=2342,t.dadfinalarabic=65214,t.dadinitialarabic=65215,t.dadmedialarabic=65216,t.dagesh=1468,t.dageshhebrew=1468,t.dagger=8224,t.daggerdbl=8225,t.dagujarati=2726,t.dagurmukhi=2598,t.dahiragana=12384,t.dakatakana=12480,t.dalarabic=1583,t.dalet=1491,t.daletdagesh=64307,t.daletdageshhebrew=64307,t.dalethebrew=1491,t.dalfinalarabic=65194,t.dammaarabic=1615,t.dammalowarabic=1615,t.dammatanaltonearabic=1612,t.dammatanarabic=1612,t.danda=2404,t.dargahebrew=1447,t.dargalefthebrew=1447,t.dasiapneumatacyrilliccmb=1157,t.dblGrave=63187,t.dblanglebracketleft=12298,t.dblanglebracketleftvertical=65085,t.dblanglebracketright=12299,t.dblanglebracketrightvertical=65086,t.dblarchinvertedbelowcmb=811,t.dblarrowleft=8660,t.dblarrowright=8658,t.dbldanda=2405,t.dblgrave=63190,t.dblgravecmb=783,t.dblintegral=8748,t.dbllowline=8215,t.dbllowlinecmb=819,t.dbloverlinecmb=831,t.dblprimemod=698,t.dblverticalbar=8214,t.dblverticallineabovecmb=782,t.dbopomofo=12553,t.dbsquare=13256,t.dcaron=271,t.dcedilla=7697,t.dcircle=9427,t.dcircumflexbelow=7699,t.dcroat=273,t.ddabengali=2465,t.ddadeva=2337,t.ddagujarati=2721,t.ddagurmukhi=2593,t.ddalarabic=1672,t.ddalfinalarabic=64393,t.dddhadeva=2396,t.ddhabengali=2466,t.ddhadeva=2338,t.ddhagujarati=2722,t.ddhagurmukhi=2594,t.ddotaccent=7691,t.ddotbelow=7693,t.decimalseparatorarabic=1643,t.decimalseparatorpersian=1643,t.decyrillic=1076,t.degree=176,t.dehihebrew=1453,t.dehiragana=12391,t.deicoptic=1007,t.dekatakana=12487,t.deleteleft=9003,t.deleteright=8998,t.delta=948,t.deltaturned=397,t.denominatorminusonenumeratorbengali=2552,t.dezh=676,t.dhabengali=2471,t.dhadeva=2343,t.dhagujarati=2727,t.dhagurmukhi=2599,t.dhook=599,t.dialytikatonos=901,t.dialytikatonoscmb=836,t.diamond=9830,t.diamondsuitwhite=9826,t.dieresis=168,t.dieresisacute=63191,t.dieresisbelowcmb=804,t.dieresiscmb=776,t.dieresisgrave=63192,t.dieresistonos=901,t.dihiragana=12386,t.dikatakana=12482,t.dittomark=12291,t.divide=247,t.divides=8739,t.divisionslash=8725,t.djecyrillic=1106,t.dkshade=9619,t.dlinebelow=7695,t.dlsquare=13207,t.dmacron=273,t.dmonospace=65348,t.dnblock=9604,t.dochadathai=3598,t.dodekthai=3604,t.dohiragana=12393,t.dokatakana=12489,t.dollar=36,t.dollarinferior=63203,t.dollarmonospace=65284,t.dollaroldstyle=63268,t.dollarsmall=65129,t.dollarsuperior=63204,t.dong=8363,t.dorusquare=13094,t.dotaccent=729,t.dotaccentcmb=775,t.dotbelowcmb=803,t.dotbelowcomb=803,t.dotkatakana=12539,t.dotlessi=305,t.dotlessj=63166,t.dotlessjstrokehook=644,t.dotmath=8901,t.dottedcircle=9676,t.doubleyodpatah=64287,t.doubleyodpatahhebrew=64287,t.downtackbelowcmb=798,t.downtackmod=725,t.dparen=9375,t.dsuperior=63211,t.dtail=598,t.dtopbar=396,t.duhiragana=12389,t.dukatakana=12485,t.dz=499,t.dzaltone=675,t.dzcaron=454,t.dzcurl=677,t.dzeabkhasiancyrillic=1249,t.dzecyrillic=1109,t.dzhecyrillic=1119,t.e=101,t.eacute=233,t.earth=9793,t.ebengali=2447,t.ebopomofo=12572,t.ebreve=277,t.ecandradeva=2317,t.ecandragujarati=2701,t.ecandravowelsigndeva=2373,t.ecandravowelsigngujarati=2757,t.ecaron=283,t.ecedillabreve=7709,t.echarmenian=1381,t.echyiwnarmenian=1415,t.ecircle=9428,t.ecircumflex=234,t.ecircumflexacute=7871,t.ecircumflexbelow=7705,t.ecircumflexdotbelow=7879,t.ecircumflexgrave=7873,t.ecircumflexhookabove=7875,t.ecircumflextilde=7877,t.ecyrillic=1108,t.edblgrave=517,t.edeva=2319,t.edieresis=235,t.edot=279,t.edotaccent=279,t.edotbelow=7865,t.eegurmukhi=2575,t.eematragurmukhi=2631,t.efcyrillic=1092,t.egrave=232,t.egujarati=2703,t.eharmenian=1383,t.ehbopomofo=12573,t.ehiragana=12360,t.ehookabove=7867,t.eibopomofo=12575,t.eight=56,t.eightarabic=1640,t.eightbengali=2542,t.eightcircle=9319,t.eightcircleinversesansserif=10129,t.eightdeva=2414,t.eighteencircle=9329,t.eighteenparen=9349,t.eighteenperiod=9369,t.eightgujarati=2798,t.eightgurmukhi=2670,t.eighthackarabic=1640,t.eighthangzhou=12328,t.eighthnotebeamed=9835,t.eightideographicparen=12839,t.eightinferior=8328,t.eightmonospace=65304,t.eightoldstyle=63288,t.eightparen=9339,t.eightperiod=9359,t.eightpersian=1784,t.eightroman=8567,t.eightsuperior=8312,t.eightthai=3672,t.einvertedbreve=519,t.eiotifiedcyrillic=1125,t.ekatakana=12456,t.ekatakanahalfwidth=65396,t.ekonkargurmukhi=2676,t.ekorean=12628,t.elcyrillic=1083,t.element=8712,t.elevencircle=9322,t.elevenparen=9342,t.elevenperiod=9362,t.elevenroman=8570,t.ellipsis=8230,t.ellipsisvertical=8942,t.emacron=275,t.emacronacute=7703,t.emacrongrave=7701,t.emcyrillic=1084,t.emdash=8212,t.emdashvertical=65073,t.emonospace=65349,t.emphasismarkarmenian=1371,t.emptyset=8709,t.enbopomofo=12579,t.encyrillic=1085,t.endash=8211,t.endashvertical=65074,t.endescendercyrillic=1187,t.eng=331,t.engbopomofo=12581,t.enghecyrillic=1189,t.enhookcyrillic=1224,t.enspace=8194,t.eogonek=281,t.eokorean=12627,t.eopen=603,t.eopenclosed=666,t.eopenreversed=604,t.eopenreversedclosed=606,t.eopenreversedhook=605,t.eparen=9376,t.epsilon=949,t.epsilontonos=941,t.equal=61,t.equalmonospace=65309,t.equalsmall=65126,t.equalsuperior=8316,t.equivalence=8801,t.erbopomofo=12582,t.ercyrillic=1088,t.ereversed=600,t.ereversedcyrillic=1101,t.escyrillic=1089,t.esdescendercyrillic=1195,t.esh=643,t.eshcurl=646,t.eshortdeva=2318,t.eshortvowelsigndeva=2374,t.eshreversedloop=426,t.eshsquatreversed=645,t.esmallhiragana=12359,t.esmallkatakana=12455,t.esmallkatakanahalfwidth=65386,t.estimated=8494,t.esuperior=63212,t.eta=951,t.etarmenian=1384,t.etatonos=942,t.eth=240,t.etilde=7869,t.etildebelow=7707,t.etnahtafoukhhebrew=1425,t.etnahtafoukhlefthebrew=1425,t.etnahtahebrew=1425,t.etnahtalefthebrew=1425,t.eturned=477,t.eukorean=12641,t.euro=8364,t.evowelsignbengali=2503,t.evowelsigndeva=2375,t.evowelsigngujarati=2759,t.exclam=33,t.exclamarmenian=1372,t.exclamdbl=8252,t.exclamdown=161,t.exclamdownsmall=63393,t.exclammonospace=65281,t.exclamsmall=63265,t.existential=8707,t.ezh=658,t.ezhcaron=495,t.ezhcurl=659,t.ezhreversed=441,t.ezhtail=442,t.f=102,t.fadeva=2398,t.fagurmukhi=2654,t.fahrenheit=8457,t.fathaarabic=1614,t.fathalowarabic=1614,t.fathatanarabic=1611,t.fbopomofo=12552,t.fcircle=9429,t.fdotaccent=7711,t.feharabic=1601,t.feharmenian=1414,t.fehfinalarabic=65234,t.fehinitialarabic=65235,t.fehmedialarabic=65236,t.feicoptic=997,t.female=9792,t.ff=64256,t.ffi=64259,t.ffl=64260,t.fi=64257,t.fifteencircle=9326,t.fifteenparen=9346,t.fifteenperiod=9366,t.figuredash=8210,t.filledbox=9632,t.filledrect=9644,t.finalkaf=1498,t.finalkafdagesh=64314,t.finalkafdageshhebrew=64314,t.finalkafhebrew=1498,t.finalmem=1501,t.finalmemhebrew=1501,t.finalnun=1503,t.finalnunhebrew=1503,t.finalpe=1507,t.finalpehebrew=1507,t.finaltsadi=1509,t.finaltsadihebrew=1509,t.firsttonechinese=713,t.fisheye=9673,t.fitacyrillic=1139,t.five=53,t.fivearabic=1637,t.fivebengali=2539,t.fivecircle=9316,t.fivecircleinversesansserif=10126,t.fivedeva=2411,t.fiveeighths=8541,t.fivegujarati=2795,t.fivegurmukhi=2667,t.fivehackarabic=1637,t.fivehangzhou=12325,t.fiveideographicparen=12836,t.fiveinferior=8325,t.fivemonospace=65301,t.fiveoldstyle=63285,t.fiveparen=9336,t.fiveperiod=9356,t.fivepersian=1781,t.fiveroman=8564,t.fivesuperior=8309,t.fivethai=3669,t.fl=64258,t.florin=402,t.fmonospace=65350,t.fmsquare=13209,t.fofanthai=3615,t.fofathai=3613,t.fongmanthai=3663,t.forall=8704,t.four=52,t.fourarabic=1636,t.fourbengali=2538,t.fourcircle=9315,t.fourcircleinversesansserif=10125,t.fourdeva=2410,t.fourgujarati=2794,t.fourgurmukhi=2666,t.fourhackarabic=1636,t.fourhangzhou=12324,t.fourideographicparen=12835,t.fourinferior=8324,t.fourmonospace=65300,t.fournumeratorbengali=2551,t.fouroldstyle=63284,t.fourparen=9335,t.fourperiod=9355,t.fourpersian=1780,t.fourroman=8563,t.foursuperior=8308,t.fourteencircle=9325,t.fourteenparen=9345,t.fourteenperiod=9365,t.fourthai=3668,t.fourthtonechinese=715,t.fparen=9377,t.fraction=8260,t.franc=8355,t.g=103,t.gabengali=2455,t.gacute=501,t.gadeva=2327,t.gafarabic=1711,t.gaffinalarabic=64403,t.gafinitialarabic=64404,t.gafmedialarabic=64405,t.gagujarati=2711,t.gagurmukhi=2583,t.gahiragana=12364,t.gakatakana=12460,t.gamma=947,t.gammalatinsmall=611,t.gammasuperior=736,t.gangiacoptic=1003,t.gbopomofo=12557,t.gbreve=287,t.gcaron=487,t.gcedilla=291,t.gcircle=9430,t.gcircumflex=285,t.gcommaaccent=291,t.gdot=289,t.gdotaccent=289,t.gecyrillic=1075,t.gehiragana=12370,t.gekatakana=12466,t.geometricallyequal=8785,t.gereshaccenthebrew=1436,t.gereshhebrew=1523,t.gereshmuqdamhebrew=1437,t.germandbls=223,t.gershayimaccenthebrew=1438,t.gershayimhebrew=1524,t.getamark=12307,t.ghabengali=2456,t.ghadarmenian=1394,t.ghadeva=2328,t.ghagujarati=2712,t.ghagurmukhi=2584,t.ghainarabic=1594,t.ghainfinalarabic=65230,t.ghaininitialarabic=65231,t.ghainmedialarabic=65232,t.ghemiddlehookcyrillic=1173,t.ghestrokecyrillic=1171,t.gheupturncyrillic=1169,t.ghhadeva=2394,t.ghhagurmukhi=2650,t.ghook=608,t.ghzsquare=13203,t.gihiragana=12366,t.gikatakana=12462,t.gimarmenian=1379,t.gimel=1490,t.gimeldagesh=64306,t.gimeldageshhebrew=64306,t.gimelhebrew=1490,t.gjecyrillic=1107,t.glottalinvertedstroke=446,t.glottalstop=660,t.glottalstopinverted=662,t.glottalstopmod=704,t.glottalstopreversed=661,t.glottalstopreversedmod=705,t.glottalstopreversedsuperior=740,t.glottalstopstroke=673,t.glottalstopstrokereversed=674,t.gmacron=7713,t.gmonospace=65351,t.gohiragana=12372,t.gokatakana=12468,t.gparen=9378,t.gpasquare=13228,t.gradient=8711,t.grave=96,t.gravebelowcmb=790,t.gravecmb=768,t.gravecomb=768,t.gravedeva=2387,t.gravelowmod=718,t.gravemonospace=65344,t.gravetonecmb=832,t.greater=62,t.greaterequal=8805,t.greaterequalorless=8923,t.greatermonospace=65310,t.greaterorequivalent=8819,t.greaterorless=8823,t.greateroverequal=8807,t.greatersmall=65125,t.gscript=609,t.gstroke=485,t.guhiragana=12368,t.guillemotleft=171,t.guillemotright=187,t.guilsinglleft=8249,t.guilsinglright=8250,t.gukatakana=12464,t.guramusquare=13080,t.gysquare=13257,t.h=104,t.haabkhasiancyrillic=1193,t.haaltonearabic=1729,t.habengali=2489,t.hadescendercyrillic=1203,t.hadeva=2361,t.hagujarati=2745,t.hagurmukhi=2617,t.haharabic=1581,t.hahfinalarabic=65186,t.hahinitialarabic=65187,t.hahiragana=12399,t.hahmedialarabic=65188,t.haitusquare=13098,t.hakatakana=12495,t.hakatakanahalfwidth=65418,t.halantgurmukhi=2637,t.hamzaarabic=1569,t.hamzalowarabic=1569,t.hangulfiller=12644,t.hardsigncyrillic=1098,t.harpoonleftbarbup=8636,t.harpoonrightbarbup=8640,t.hasquare=13258,t.hatafpatah=1458,t.hatafpatah16=1458,t.hatafpatah23=1458,t.hatafpatah2f=1458,t.hatafpatahhebrew=1458,t.hatafpatahnarrowhebrew=1458,t.hatafpatahquarterhebrew=1458,t.hatafpatahwidehebrew=1458,t.hatafqamats=1459,t.hatafqamats1b=1459,t.hatafqamats28=1459,t.hatafqamats34=1459,t.hatafqamatshebrew=1459,t.hatafqamatsnarrowhebrew=1459,t.hatafqamatsquarterhebrew=1459,t.hatafqamatswidehebrew=1459,t.hatafsegol=1457,t.hatafsegol17=1457,t.hatafsegol24=1457,t.hatafsegol30=1457,t.hatafsegolhebrew=1457,t.hatafsegolnarrowhebrew=1457,t.hatafsegolquarterhebrew=1457,t.hatafsegolwidehebrew=1457,t.hbar=295,t.hbopomofo=12559,t.hbrevebelow=7723,t.hcedilla=7721,t.hcircle=9431,t.hcircumflex=293,t.hdieresis=7719,t.hdotaccent=7715,t.hdotbelow=7717,t.he=1492,t.heart=9829,t.heartsuitblack=9829,t.heartsuitwhite=9825,t.hedagesh=64308,t.hedageshhebrew=64308,t.hehaltonearabic=1729,t.heharabic=1607,t.hehebrew=1492,t.hehfinalaltonearabic=64423,t.hehfinalalttwoarabic=65258,t.hehfinalarabic=65258,t.hehhamzaabovefinalarabic=64421,t.hehhamzaaboveisolatedarabic=64420,t.hehinitialaltonearabic=64424,t.hehinitialarabic=65259,t.hehiragana=12408,t.hehmedialaltonearabic=64425,t.hehmedialarabic=65260,t.heiseierasquare=13179,t.hekatakana=12504,t.hekatakanahalfwidth=65421,t.hekutaarusquare=13110,t.henghook=615,t.herutusquare=13113,t.het=1495,t.hethebrew=1495,t.hhook=614,t.hhooksuperior=689,t.hieuhacirclekorean=12923,t.hieuhaparenkorean=12827,t.hieuhcirclekorean=12909,t.hieuhkorean=12622,t.hieuhparenkorean=12813,t.hihiragana=12402,t.hikatakana=12498,t.hikatakanahalfwidth=65419,t.hiriq=1460,t.hiriq14=1460,t.hiriq21=1460,t.hiriq2d=1460,t.hiriqhebrew=1460,t.hiriqnarrowhebrew=1460,t.hiriqquarterhebrew=1460,t.hiriqwidehebrew=1460,t.hlinebelow=7830,t.hmonospace=65352,t.hoarmenian=1392,t.hohipthai=3627,t.hohiragana=12411,t.hokatakana=12507,t.hokatakanahalfwidth=65422,t.holam=1465,t.holam19=1465,t.holam26=1465,t.holam32=1465,t.holamhebrew=1465,t.holamnarrowhebrew=1465,t.holamquarterhebrew=1465,t.holamwidehebrew=1465,t.honokhukthai=3630,t.hookabovecomb=777,t.hookcmb=777,t.hookpalatalizedbelowcmb=801,t.hookretroflexbelowcmb=802,t.hoonsquare=13122,t.horicoptic=1001,t.horizontalbar=8213,t.horncmb=795,t.hotsprings=9832,t.house=8962,t.hparen=9379,t.hsuperior=688,t.hturned=613,t.huhiragana=12405,t.huiitosquare=13107,t.hukatakana=12501,t.hukatakanahalfwidth=65420,t.hungarumlaut=733,t.hungarumlautcmb=779,t.hv=405,t.hyphen=45,t.hypheninferior=63205,t.hyphenmonospace=65293,t.hyphensmall=65123,t.hyphensuperior=63206,t.hyphentwo=8208,t.i=105,t.iacute=237,t.iacyrillic=1103,t.ibengali=2439,t.ibopomofo=12583,t.ibreve=301,t.icaron=464,t.icircle=9432,t.icircumflex=238,t.icyrillic=1110,t.idblgrave=521,t.ideographearthcircle=12943,t.ideographfirecircle=12939,t.ideographicallianceparen=12863,t.ideographiccallparen=12858,t.ideographiccentrecircle=12965,t.ideographicclose=12294,t.ideographiccomma=12289,t.ideographiccommaleft=65380,t.ideographiccongratulationparen=12855,t.ideographiccorrectcircle=12963,t.ideographicearthparen=12847,t.ideographicenterpriseparen=12861,t.ideographicexcellentcircle=12957,t.ideographicfestivalparen=12864,t.ideographicfinancialcircle=12950,t.ideographicfinancialparen=12854,t.ideographicfireparen=12843,t.ideographichaveparen=12850,t.ideographichighcircle=12964,t.ideographiciterationmark=12293,t.ideographiclaborcircle=12952,t.ideographiclaborparen=12856,t.ideographicleftcircle=12967,t.ideographiclowcircle=12966,t.ideographicmedicinecircle=12969,t.ideographicmetalparen=12846,t.ideographicmoonparen=12842,t.ideographicnameparen=12852,t.ideographicperiod=12290,t.ideographicprintcircle=12958,t.ideographicreachparen=12867,t.ideographicrepresentparen=12857,t.ideographicresourceparen=12862,t.ideographicrightcircle=12968,t.ideographicsecretcircle=12953,t.ideographicselfparen=12866,t.ideographicsocietyparen=12851,t.ideographicspace=12288,t.ideographicspecialparen=12853,t.ideographicstockparen=12849,t.ideographicstudyparen=12859,t.ideographicsunparen=12848,t.ideographicsuperviseparen=12860,t.ideographicwaterparen=12844,t.ideographicwoodparen=12845,t.ideographiczero=12295,t.ideographmetalcircle=12942,t.ideographmooncircle=12938,t.ideographnamecircle=12948,t.ideographsuncircle=12944,t.ideographwatercircle=12940,t.ideographwoodcircle=12941,t.ideva=2311,t.idieresis=239,t.idieresisacute=7727,t.idieresiscyrillic=1253,t.idotbelow=7883,t.iebrevecyrillic=1239,t.iecyrillic=1077,t.ieungacirclekorean=12917,t.ieungaparenkorean=12821,t.ieungcirclekorean=12903,t.ieungkorean=12615,t.ieungparenkorean=12807,t.igrave=236,t.igujarati=2695,t.igurmukhi=2567,t.ihiragana=12356,t.ihookabove=7881,t.iibengali=2440,t.iicyrillic=1080,t.iideva=2312,t.iigujarati=2696,t.iigurmukhi=2568,t.iimatragurmukhi=2624,t.iinvertedbreve=523,t.iishortcyrillic=1081,t.iivowelsignbengali=2496,t.iivowelsigndeva=2368,t.iivowelsigngujarati=2752,t.ij=307,t.ikatakana=12452,t.ikatakanahalfwidth=65394,t.ikorean=12643,t.ilde=732,t.iluyhebrew=1452,t.imacron=299,t.imacroncyrillic=1251,t.imageorapproximatelyequal=8787,t.imatragurmukhi=2623,t.imonospace=65353,t.increment=8710,t.infinity=8734,t.iniarmenian=1387,t.integral=8747,t.integralbottom=8993,t.integralbt=8993,t.integralex=63733,t.integraltop=8992,t.integraltp=8992,t.intersection=8745,t.intisquare=13061,t.invbullet=9688,t.invcircle=9689,t.invsmileface=9787,t.iocyrillic=1105,t.iogonek=303,t.iota=953,t.iotadieresis=970,t.iotadieresistonos=912,t.iotalatin=617,t.iotatonos=943,t.iparen=9380,t.irigurmukhi=2674,t.ismallhiragana=12355,t.ismallkatakana=12451,t.ismallkatakanahalfwidth=65384,t.issharbengali=2554,t.istroke=616,t.isuperior=63213,t.iterationhiragana=12445,t.iterationkatakana=12541,t.itilde=297,t.itildebelow=7725,t.iubopomofo=12585,t.iucyrillic=1102,t.ivowelsignbengali=2495,t.ivowelsigndeva=2367,t.ivowelsigngujarati=2751,t.izhitsacyrillic=1141,t.izhitsadblgravecyrillic=1143,t.j=106,t.jaarmenian=1393,t.jabengali=2460,t.jadeva=2332,t.jagujarati=2716,t.jagurmukhi=2588,t.jbopomofo=12560,t.jcaron=496,t.jcircle=9433,t.jcircumflex=309,t.jcrossedtail=669,t.jdotlessstroke=607,t.jecyrillic=1112,t.jeemarabic=1580,t.jeemfinalarabic=65182,t.jeeminitialarabic=65183,t.jeemmedialarabic=65184,t.jeharabic=1688,t.jehfinalarabic=64395,t.jhabengali=2461,t.jhadeva=2333,t.jhagujarati=2717,t.jhagurmukhi=2589,t.jheharmenian=1403,t.jis=12292,t.jmonospace=65354,t.jparen=9381,t.jsuperior=690,t.k=107,t.kabashkircyrillic=1185,t.kabengali=2453,t.kacute=7729,t.kacyrillic=1082,t.kadescendercyrillic=1179,t.kadeva=2325,t.kaf=1499,t.kafarabic=1603,t.kafdagesh=64315,t.kafdageshhebrew=64315,t.kaffinalarabic=65242,t.kafhebrew=1499,t.kafinitialarabic=65243,t.kafmedialarabic=65244,t.kafrafehebrew=64333,t.kagujarati=2709,t.kagurmukhi=2581,t.kahiragana=12363,t.kahookcyrillic=1220,t.kakatakana=12459,t.kakatakanahalfwidth=65398,t.kappa=954,t.kappasymbolgreek=1008,t.kapyeounmieumkorean=12657,t.kapyeounphieuphkorean=12676,t.kapyeounpieupkorean=12664,t.kapyeounssangpieupkorean=12665,t.karoriisquare=13069,t.kashidaautoarabic=1600,t.kashidaautonosidebearingarabic=1600,t.kasmallkatakana=12533,t.kasquare=13188,t.kasraarabic=1616,t.kasratanarabic=1613,t.kastrokecyrillic=1183,t.katahiraprolongmarkhalfwidth=65392,t.kaverticalstrokecyrillic=1181,t.kbopomofo=12558,t.kcalsquare=13193,t.kcaron=489,t.kcedilla=311,t.kcircle=9434,t.kcommaaccent=311,t.kdotbelow=7731,t.keharmenian=1412,t.kehiragana=12369,t.kekatakana=12465,t.kekatakanahalfwidth=65401,t.kenarmenian=1391,t.kesmallkatakana=12534,t.kgreenlandic=312,t.khabengali=2454,t.khacyrillic=1093,t.khadeva=2326,t.khagujarati=2710,t.khagurmukhi=2582,t.khaharabic=1582,t.khahfinalarabic=65190,t.khahinitialarabic=65191,t.khahmedialarabic=65192,t.kheicoptic=999,t.khhadeva=2393,t.khhagurmukhi=2649,t.khieukhacirclekorean=12920,t.khieukhaparenkorean=12824,t.khieukhcirclekorean=12906,t.khieukhkorean=12619,t.khieukhparenkorean=12810,t.khokhaithai=3586,t.khokhonthai=3589,t.khokhuatthai=3587,t.khokhwaithai=3588,t.khomutthai=3675,t.khook=409,t.khorakhangthai=3590,t.khzsquare=13201,t.kihiragana=12365,t.kikatakana=12461,t.kikatakanahalfwidth=65399,t.kiroguramusquare=13077,t.kiromeetorusquare=13078,t.kirosquare=13076,t.kiyeokacirclekorean=12910,t.kiyeokaparenkorean=12814,t.kiyeokcirclekorean=12896,t.kiyeokkorean=12593,t.kiyeokparenkorean=12800,t.kiyeoksioskorean=12595,t.kjecyrillic=1116,t.klinebelow=7733,t.klsquare=13208,t.kmcubedsquare=13222,t.kmonospace=65355,t.kmsquaredsquare=13218,t.kohiragana=12371,t.kohmsquare=13248,t.kokaithai=3585,t.kokatakana=12467,t.kokatakanahalfwidth=65402,t.kooposquare=13086,t.koppacyrillic=1153,t.koreanstandardsymbol=12927,t.koroniscmb=835,t.kparen=9382,t.kpasquare=13226,t.ksicyrillic=1135,t.ktsquare=13263,t.kturned=670,t.kuhiragana=12367,t.kukatakana=12463,t.kukatakanahalfwidth=65400,t.kvsquare=13240,t.kwsquare=13246,t.l=108,t.labengali=2482,t.lacute=314,t.ladeva=2354,t.lagujarati=2738,t.lagurmukhi=2610,t.lakkhangyaothai=3653,t.lamaleffinalarabic=65276,t.lamalefhamzaabovefinalarabic=65272,t.lamalefhamzaaboveisolatedarabic=65271,t.lamalefhamzabelowfinalarabic=65274,t.lamalefhamzabelowisolatedarabic=65273,t.lamalefisolatedarabic=65275,t.lamalefmaddaabovefinalarabic=65270,t.lamalefmaddaaboveisolatedarabic=65269,t.lamarabic=1604,t.lambda=955,t.lambdastroke=411,t.lamed=1500,t.lameddagesh=64316,t.lameddageshhebrew=64316,t.lamedhebrew=1500,t.lamfinalarabic=65246,t.lamhahinitialarabic=64714,t.laminitialarabic=65247,t.lamjeeminitialarabic=64713,t.lamkhahinitialarabic=64715,t.lamlamhehisolatedarabic=65010,t.lammedialarabic=65248,t.lammeemhahinitialarabic=64904,t.lammeeminitialarabic=64716,t.largecircle=9711,t.lbar=410,t.lbelt=620,t.lbopomofo=12556,t.lcaron=318,t.lcedilla=316,t.lcircle=9435,t.lcircumflexbelow=7741,t.lcommaaccent=316,t.ldot=320,t.ldotaccent=320,t.ldotbelow=7735,t.ldotbelowmacron=7737,t.leftangleabovecmb=794,t.lefttackbelowcmb=792,t.less=60,t.lessequal=8804,t.lessequalorgreater=8922,t.lessmonospace=65308,t.lessorequivalent=8818,t.lessorgreater=8822,t.lessoverequal=8806,t.lesssmall=65124,t.lezh=622,t.lfblock=9612,t.lhookretroflex=621,t.lira=8356,t.liwnarmenian=1388,t.lj=457,t.ljecyrillic=1113,t.ll=63168,t.lladeva=2355,t.llagujarati=2739,t.llinebelow=7739,t.llladeva=2356,t.llvocalicbengali=2529,t.llvocalicdeva=2401,t.llvocalicvowelsignbengali=2531,t.llvocalicvowelsigndeva=2403,t.lmiddletilde=619,t.lmonospace=65356,t.lmsquare=13264,t.lochulathai=3628,t.logicaland=8743,t.logicalnot=172,t.logicalnotreversed=8976,t.logicalor=8744,t.lolingthai=3621,t.longs=383,t.lowlinecenterline=65102,t.lowlinecmb=818,t.lowlinedashed=65101,t.lozenge=9674,t.lparen=9383,t.lslash=322,t.lsquare=8467,t.lsuperior=63214,t.ltshade=9617,t.luthai=3622,t.lvocalicbengali=2444,t.lvocalicdeva=2316,t.lvocalicvowelsignbengali=2530,t.lvocalicvowelsigndeva=2402,t.lxsquare=13267,t.m=109,t.mabengali=2478,t.macron=175,t.macronbelowcmb=817,t.macroncmb=772,t.macronlowmod=717,t.macronmonospace=65507,t.macute=7743,t.madeva=2350,t.magujarati=2734,t.magurmukhi=2606,t.mahapakhhebrew=1444,t.mahapakhlefthebrew=1444,t.mahiragana=12414,t.maichattawalowleftthai=63637,t.maichattawalowrightthai=63636,t.maichattawathai=3659,t.maichattawaupperleftthai=63635,t.maieklowleftthai=63628,t.maieklowrightthai=63627,t.maiekthai=3656,t.maiekupperleftthai=63626,t.maihanakatleftthai=63620,t.maihanakatthai=3633,t.maitaikhuleftthai=63625,t.maitaikhuthai=3655,t.maitholowleftthai=63631,t.maitholowrightthai=63630,t.maithothai=3657,t.maithoupperleftthai=63629,t.maitrilowleftthai=63634,t.maitrilowrightthai=63633,t.maitrithai=3658,t.maitriupperleftthai=63632,t.maiyamokthai=3654,t.makatakana=12510,t.makatakanahalfwidth=65423,t.male=9794,t.mansyonsquare=13127,t.maqafhebrew=1470,t.mars=9794,t.masoracirclehebrew=1455,t.masquare=13187,t.mbopomofo=12551,t.mbsquare=13268,t.mcircle=9436,t.mcubedsquare=13221,t.mdotaccent=7745,t.mdotbelow=7747,t.meemarabic=1605,t.meemfinalarabic=65250,t.meeminitialarabic=65251,t.meemmedialarabic=65252,t.meemmeeminitialarabic=64721,t.meemmeemisolatedarabic=64584,t.meetorusquare=13133,t.mehiragana=12417,t.meizierasquare=13182,t.mekatakana=12513,t.mekatakanahalfwidth=65426,t.mem=1502,t.memdagesh=64318,t.memdageshhebrew=64318,t.memhebrew=1502,t.menarmenian=1396,t.merkhahebrew=1445,t.merkhakefulahebrew=1446,t.merkhakefulalefthebrew=1446,t.merkhalefthebrew=1445,t.mhook=625,t.mhzsquare=13202,t.middledotkatakanahalfwidth=65381,t.middot=183,t.mieumacirclekorean=12914,t.mieumaparenkorean=12818,t.mieumcirclekorean=12900,t.mieumkorean=12609,t.mieumpansioskorean=12656,t.mieumparenkorean=12804,t.mieumpieupkorean=12654,t.mieumsioskorean=12655,t.mihiragana=12415,t.mikatakana=12511,t.mikatakanahalfwidth=65424,t.minus=8722,t.minusbelowcmb=800,t.minuscircle=8854,t.minusmod=727,t.minusplus=8723,t.minute=8242,t.miribaarusquare=13130,t.mirisquare=13129,t.mlonglegturned=624,t.mlsquare=13206,t.mmcubedsquare=13219,t.mmonospace=65357,t.mmsquaredsquare=13215,t.mohiragana=12418,t.mohmsquare=13249,t.mokatakana=12514,t.mokatakanahalfwidth=65427,t.molsquare=13270,t.momathai=3617,t.moverssquare=13223,t.moverssquaredsquare=13224,t.mparen=9384,t.mpasquare=13227,t.mssquare=13235,t.msuperior=63215,t.mturned=623,t.mu=181,t.mu1=181,t.muasquare=13186,t.muchgreater=8811,t.muchless=8810,t.mufsquare=13196,t.mugreek=956,t.mugsquare=13197,t.muhiragana=12416,t.mukatakana=12512,t.mukatakanahalfwidth=65425,t.mulsquare=13205,t.multiply=215,t.mumsquare=13211,t.munahhebrew=1443,t.munahlefthebrew=1443,t.musicalnote=9834,t.musicalnotedbl=9835,t.musicflatsign=9837,t.musicsharpsign=9839,t.mussquare=13234,t.muvsquare=13238,t.muwsquare=13244,t.mvmegasquare=13241,t.mvsquare=13239,t.mwmegasquare=13247,t.mwsquare=13245,t.n=110,t.nabengali=2472,t.nabla=8711,t.nacute=324,t.nadeva=2344,t.nagujarati=2728,t.nagurmukhi=2600,t.nahiragana=12394,t.nakatakana=12490,t.nakatakanahalfwidth=65413,t.napostrophe=329,t.nasquare=13185,t.nbopomofo=12555,t.nbspace=160,t.ncaron=328,t.ncedilla=326,t.ncircle=9437,t.ncircumflexbelow=7755,t.ncommaaccent=326,t.ndotaccent=7749,t.ndotbelow=7751,t.nehiragana=12397,t.nekatakana=12493,t.nekatakanahalfwidth=65416,t.newsheqelsign=8362,t.nfsquare=13195,t.ngabengali=2457,t.ngadeva=2329,t.ngagujarati=2713,t.ngagurmukhi=2585,t.ngonguthai=3591,t.nhiragana=12435,t.nhookleft=626,t.nhookretroflex=627,t.nieunacirclekorean=12911,t.nieunaparenkorean=12815,t.nieuncieuckorean=12597,t.nieuncirclekorean=12897,t.nieunhieuhkorean=12598,t.nieunkorean=12596,t.nieunpansioskorean=12648,t.nieunparenkorean=12801,t.nieunsioskorean=12647,t.nieuntikeutkorean=12646,t.nihiragana=12395,t.nikatakana=12491,t.nikatakanahalfwidth=65414,t.nikhahitleftthai=63641,t.nikhahitthai=3661,t.nine=57,t.ninearabic=1641,t.ninebengali=2543,t.ninecircle=9320,t.ninecircleinversesansserif=10130,t.ninedeva=2415,t.ninegujarati=2799,t.ninegurmukhi=2671,t.ninehackarabic=1641,t.ninehangzhou=12329,t.nineideographicparen=12840,t.nineinferior=8329,t.ninemonospace=65305,t.nineoldstyle=63289,t.nineparen=9340,t.nineperiod=9360,t.ninepersian=1785,t.nineroman=8568,t.ninesuperior=8313,t.nineteencircle=9330,t.nineteenparen=9350,t.nineteenperiod=9370,t.ninethai=3673,t.nj=460,t.njecyrillic=1114,t.nkatakana=12531,t.nkatakanahalfwidth=65437,t.nlegrightlong=414,t.nlinebelow=7753,t.nmonospace=65358,t.nmsquare=13210,t.nnabengali=2467,t.nnadeva=2339,t.nnagujarati=2723,t.nnagurmukhi=2595,t.nnnadeva=2345,t.nohiragana=12398,t.nokatakana=12494,t.nokatakanahalfwidth=65417,t.nonbreakingspace=160,t.nonenthai=3603,t.nonuthai=3609,t.noonarabic=1606,t.noonfinalarabic=65254,t.noonghunnaarabic=1722,t.noonghunnafinalarabic=64415,t.nooninitialarabic=65255,t.noonjeeminitialarabic=64722,t.noonjeemisolatedarabic=64587,t.noonmedialarabic=65256,t.noonmeeminitialarabic=64725,t.noonmeemisolatedarabic=64590,t.noonnoonfinalarabic=64653,t.notcontains=8716,t.notelement=8713,t.notelementof=8713,t.notequal=8800,t.notgreater=8815,t.notgreaternorequal=8817,t.notgreaternorless=8825,t.notidentical=8802,t.notless=8814,t.notlessnorequal=8816,t.notparallel=8742,t.notprecedes=8832,t.notsubset=8836,t.notsucceeds=8833,t.notsuperset=8837,t.nowarmenian=1398,t.nparen=9385,t.nssquare=13233,t.nsuperior=8319,t.ntilde=241,t.nu=957,t.nuhiragana=12396,t.nukatakana=12492,t.nukatakanahalfwidth=65415,t.nuktabengali=2492,t.nuktadeva=2364,t.nuktagujarati=2748,t.nuktagurmukhi=2620,t.numbersign=35,t.numbersignmonospace=65283,t.numbersignsmall=65119,t.numeralsigngreek=884,t.numeralsignlowergreek=885,t.numero=8470,t.nun=1504,t.nundagesh=64320,t.nundageshhebrew=64320,t.nunhebrew=1504,t.nvsquare=13237,t.nwsquare=13243,t.nyabengali=2462,t.nyadeva=2334,t.nyagujarati=2718,t.nyagurmukhi=2590,t.o=111,t.oacute=243,t.oangthai=3629,t.obarred=629,t.obarredcyrillic=1257,t.obarreddieresiscyrillic=1259,t.obengali=2451,t.obopomofo=12571,t.obreve=335,t.ocandradeva=2321,t.ocandragujarati=2705,t.ocandravowelsigndeva=2377,t.ocandravowelsigngujarati=2761,t.ocaron=466,t.ocircle=9438,t.ocircumflex=244,t.ocircumflexacute=7889,t.ocircumflexdotbelow=7897,t.ocircumflexgrave=7891,t.ocircumflexhookabove=7893,t.ocircumflextilde=7895,t.ocyrillic=1086,t.odblacute=337,t.odblgrave=525,t.odeva=2323,t.odieresis=246,t.odieresiscyrillic=1255,t.odotbelow=7885,t.oe=339,t.oekorean=12634,t.ogonek=731,t.ogonekcmb=808,t.ograve=242,t.ogujarati=2707,t.oharmenian=1413,t.ohiragana=12362,t.ohookabove=7887,t.ohorn=417,t.ohornacute=7899,t.ohorndotbelow=7907,t.ohorngrave=7901,t.ohornhookabove=7903,t.ohorntilde=7905,t.ohungarumlaut=337,t.oi=419,t.oinvertedbreve=527,t.okatakana=12458,t.okatakanahalfwidth=65397,t.okorean=12631,t.olehebrew=1451,t.omacron=333,t.omacronacute=7763,t.omacrongrave=7761,t.omdeva=2384,t.omega=969,t.omega1=982,t.omegacyrillic=1121,t.omegalatinclosed=631,t.omegaroundcyrillic=1147,t.omegatitlocyrillic=1149,t.omegatonos=974,t.omgujarati=2768,t.omicron=959,t.omicrontonos=972,t.omonospace=65359,t.one=49,t.onearabic=1633,t.onebengali=2535,t.onecircle=9312,t.onecircleinversesansserif=10122,t.onedeva=2407,t.onedotenleader=8228,t.oneeighth=8539,t.onefitted=63196,t.onegujarati=2791,t.onegurmukhi=2663,t.onehackarabic=1633,t.onehalf=189,t.onehangzhou=12321,t.oneideographicparen=12832,t.oneinferior=8321,t.onemonospace=65297,t.onenumeratorbengali=2548,t.oneoldstyle=63281,t.oneparen=9332,t.oneperiod=9352,t.onepersian=1777,t.onequarter=188,t.oneroman=8560,t.onesuperior=185,t.onethai=3665,t.onethird=8531,t.oogonek=491,t.oogonekmacron=493,t.oogurmukhi=2579,t.oomatragurmukhi=2635,t.oopen=596,t.oparen=9386,t.openbullet=9702,t.option=8997,t.ordfeminine=170,t.ordmasculine=186,t.orthogonal=8735,t.oshortdeva=2322,t.oshortvowelsigndeva=2378,t.oslash=248,t.oslashacute=511,t.osmallhiragana=12361,t.osmallkatakana=12457,t.osmallkatakanahalfwidth=65387,t.ostrokeacute=511,t.osuperior=63216,t.otcyrillic=1151,t.otilde=245,t.otildeacute=7757,t.otildedieresis=7759,t.oubopomofo=12577,t.overline=8254,t.overlinecenterline=65098,t.overlinecmb=773,t.overlinedashed=65097,t.overlinedblwavy=65100,t.overlinewavy=65099,t.overscore=175,t.ovowelsignbengali=2507,t.ovowelsigndeva=2379,t.ovowelsigngujarati=2763,t.p=112,t.paampssquare=13184,t.paasentosquare=13099,t.pabengali=2474,t.pacute=7765,t.padeva=2346,t.pagedown=8671,t.pageup=8670,t.pagujarati=2730,t.pagurmukhi=2602,t.pahiragana=12401,t.paiyannoithai=3631,t.pakatakana=12497,t.palatalizationcyrilliccmb=1156,t.palochkacyrillic=1216,t.pansioskorean=12671,t.paragraph=182,t.parallel=8741,t.parenleft=40,t.parenleftaltonearabic=64830,t.parenleftbt=63725,t.parenleftex=63724,t.parenleftinferior=8333,t.parenleftmonospace=65288,t.parenleftsmall=65113,t.parenleftsuperior=8317,t.parenlefttp=63723,t.parenleftvertical=65077,t.parenright=41,t.parenrightaltonearabic=64831,t.parenrightbt=63736,t.parenrightex=63735,t.parenrightinferior=8334,t.parenrightmonospace=65289,t.parenrightsmall=65114,t.parenrightsuperior=8318,t.parenrighttp=63734,t.parenrightvertical=65078,t.partialdiff=8706,t.paseqhebrew=1472,t.pashtahebrew=1433,t.pasquare=13225,t.patah=1463,t.patah11=1463,t.patah1d=1463,t.patah2a=1463,t.patahhebrew=1463,t.patahnarrowhebrew=1463,t.patahquarterhebrew=1463,t.patahwidehebrew=1463,t.pazerhebrew=1441,t.pbopomofo=12550,t.pcircle=9439,t.pdotaccent=7767,t.pe=1508,t.pecyrillic=1087,t.pedagesh=64324,t.pedageshhebrew=64324,t.peezisquare=13115,t.pefinaldageshhebrew=64323,t.peharabic=1662,t.peharmenian=1402,t.pehebrew=1508,t.pehfinalarabic=64343,t.pehinitialarabic=64344,t.pehiragana=12410,t.pehmedialarabic=64345,t.pekatakana=12506,t.pemiddlehookcyrillic=1191,t.perafehebrew=64334,t.percent=37,t.percentarabic=1642,t.percentmonospace=65285,t.percentsmall=65130,t.period=46,t.periodarmenian=1417,t.periodcentered=183,t.periodhalfwidth=65377,t.periodinferior=63207,t.periodmonospace=65294,t.periodsmall=65106,t.periodsuperior=63208,t.perispomenigreekcmb=834,t.perpendicular=8869,t.perthousand=8240,t.peseta=8359,t.pfsquare=13194,t.phabengali=2475,t.phadeva=2347,t.phagujarati=2731,t.phagurmukhi=2603,t.phi=966,t.phi1=981,t.phieuphacirclekorean=12922,t.phieuphaparenkorean=12826,t.phieuphcirclekorean=12908,t.phieuphkorean=12621,t.phieuphparenkorean=12812,t.philatin=632,t.phinthuthai=3642,t.phisymbolgreek=981,t.phook=421,t.phophanthai=3614,t.phophungthai=3612,t.phosamphaothai=3616,t.pi=960,t.pieupacirclekorean=12915,t.pieupaparenkorean=12819,t.pieupcieuckorean=12662,t.pieupcirclekorean=12901,t.pieupkiyeokkorean=12658,t.pieupkorean=12610,t.pieupparenkorean=12805,t.pieupsioskiyeokkorean=12660,t.pieupsioskorean=12612,t.pieupsiostikeutkorean=12661,t.pieupthieuthkorean=12663,t.pieuptikeutkorean=12659,t.pihiragana=12404,t.pikatakana=12500,t.pisymbolgreek=982,t.piwrarmenian=1411,t.plus=43,t.plusbelowcmb=799,t.pluscircle=8853,t.plusminus=177,t.plusmod=726,t.plusmonospace=65291,t.plussmall=65122,t.plussuperior=8314,t.pmonospace=65360,t.pmsquare=13272,t.pohiragana=12413,t.pointingindexdownwhite=9759,t.pointingindexleftwhite=9756,t.pointingindexrightwhite=9758,t.pointingindexupwhite=9757,t.pokatakana=12509,t.poplathai=3611,t.postalmark=12306,t.postalmarkface=12320,t.pparen=9387,t.precedes=8826,t.prescription=8478,t.primemod=697,t.primereversed=8245,t.product=8719,t.projective=8965,t.prolongedkana=12540,t.propellor=8984,t.propersubset=8834,t.propersuperset=8835,t.proportion=8759,t.proportional=8733,t.psi=968,t.psicyrillic=1137,t.psilipneumatacyrilliccmb=1158,t.pssquare=13232,t.puhiragana=12407,t.pukatakana=12503,t.pvsquare=13236,t.pwsquare=13242,t.q=113,t.qadeva=2392,t.qadmahebrew=1448,t.qafarabic=1602,t.qaffinalarabic=65238,t.qafinitialarabic=65239,t.qafmedialarabic=65240,t.qamats=1464,t.qamats10=1464,t.qamats1a=1464,t.qamats1c=1464,t.qamats27=1464,t.qamats29=1464,t.qamats33=1464,t.qamatsde=1464,t.qamatshebrew=1464,t.qamatsnarrowhebrew=1464,t.qamatsqatanhebrew=1464,t.qamatsqatannarrowhebrew=1464,t.qamatsqatanquarterhebrew=1464,t.qamatsqatanwidehebrew=1464,t.qamatsquarterhebrew=1464,t.qamatswidehebrew=1464,t.qarneyparahebrew=1439,t.qbopomofo=12561,t.qcircle=9440,t.qhook=672,t.qmonospace=65361,t.qof=1511,t.qofdagesh=64327,t.qofdageshhebrew=64327,t.qofhebrew=1511,t.qparen=9388,t.quarternote=9833,t.qubuts=1467,t.qubuts18=1467,t.qubuts25=1467,t.qubuts31=1467,t.qubutshebrew=1467,t.qubutsnarrowhebrew=1467,t.qubutsquarterhebrew=1467,t.qubutswidehebrew=1467,t.question=63,t.questionarabic=1567,t.questionarmenian=1374,t.questiondown=191,t.questiondownsmall=63423,t.questiongreek=894,t.questionmonospace=65311,t.questionsmall=63295,t.quotedbl=34,t.quotedblbase=8222,t.quotedblleft=8220,t.quotedblmonospace=65282,t.quotedblprime=12318,t.quotedblprimereversed=12317,t.quotedblright=8221,t.quoteleft=8216,t.quoteleftreversed=8219,t.quotereversed=8219,t.quoteright=8217,t.quoterightn=329,t.quotesinglbase=8218,t.quotesingle=39,t.quotesinglemonospace=65287,t.r=114,t.raarmenian=1404,t.rabengali=2480,t.racute=341,t.radeva=2352,t.radical=8730,t.radicalex=63717,t.radoverssquare=13230,t.radoverssquaredsquare=13231,t.radsquare=13229,t.rafe=1471,t.rafehebrew=1471,t.ragujarati=2736,t.ragurmukhi=2608,t.rahiragana=12425,t.rakatakana=12521,t.rakatakanahalfwidth=65431,t.ralowerdiagonalbengali=2545,t.ramiddlediagonalbengali=2544,t.ramshorn=612,t.ratio=8758,t.rbopomofo=12566,t.rcaron=345,t.rcedilla=343,t.rcircle=9441,t.rcommaaccent=343,t.rdblgrave=529,t.rdotaccent=7769,t.rdotbelow=7771,t.rdotbelowmacron=7773,t.referencemark=8251,t.reflexsubset=8838,t.reflexsuperset=8839,t.registered=174,t.registersans=63720,t.registerserif=63194,t.reharabic=1585,t.reharmenian=1408,t.rehfinalarabic=65198,t.rehiragana=12428,t.rekatakana=12524,t.rekatakanahalfwidth=65434,t.resh=1512,t.reshdageshhebrew=64328,t.reshhebrew=1512,t.reversedtilde=8765,t.reviahebrew=1431,t.reviamugrashhebrew=1431,t.revlogicalnot=8976,t.rfishhook=638,t.rfishhookreversed=639,t.rhabengali=2525,t.rhadeva=2397,t.rho=961,t.rhook=637,t.rhookturned=635,t.rhookturnedsuperior=693,t.rhosymbolgreek=1009,t.rhotichookmod=734,t.rieulacirclekorean=12913,t.rieulaparenkorean=12817,t.rieulcirclekorean=12899,t.rieulhieuhkorean=12608,t.rieulkiyeokkorean=12602,t.rieulkiyeoksioskorean=12649,t.rieulkorean=12601,t.rieulmieumkorean=12603,t.rieulpansioskorean=12652,t.rieulparenkorean=12803,t.rieulphieuphkorean=12607,t.rieulpieupkorean=12604,t.rieulpieupsioskorean=12651,t.rieulsioskorean=12605,t.rieulthieuthkorean=12606,t.rieultikeutkorean=12650,t.rieulyeorinhieuhkorean=12653,t.rightangle=8735,t.righttackbelowcmb=793,t.righttriangle=8895,t.rihiragana=12426,t.rikatakana=12522,t.rikatakanahalfwidth=65432,t.ring=730,t.ringbelowcmb=805,t.ringcmb=778,t.ringhalfleft=703,t.ringhalfleftarmenian=1369,t.ringhalfleftbelowcmb=796,t.ringhalfleftcentered=723,t.ringhalfright=702,t.ringhalfrightbelowcmb=825,t.ringhalfrightcentered=722,t.rinvertedbreve=531,t.rittorusquare=13137,t.rlinebelow=7775,t.rlongleg=636,t.rlonglegturned=634,t.rmonospace=65362,t.rohiragana=12429,t.rokatakana=12525,t.rokatakanahalfwidth=65435,t.roruathai=3619,t.rparen=9389,t.rrabengali=2524,t.rradeva=2353,t.rragurmukhi=2652,t.rreharabic=1681,t.rrehfinalarabic=64397,t.rrvocalicbengali=2528,t.rrvocalicdeva=2400,t.rrvocalicgujarati=2784,t.rrvocalicvowelsignbengali=2500,t.rrvocalicvowelsigndeva=2372,t.rrvocalicvowelsigngujarati=2756,t.rsuperior=63217,t.rtblock=9616,t.rturned=633,t.rturnedsuperior=692,t.ruhiragana=12427,t.rukatakana=12523,t.rukatakanahalfwidth=65433,t.rupeemarkbengali=2546,t.rupeesignbengali=2547,t.rupiah=63197,t.ruthai=3620,t.rvocalicbengali=2443,t.rvocalicdeva=2315,t.rvocalicgujarati=2699,t.rvocalicvowelsignbengali=2499,t.rvocalicvowelsigndeva=2371,t.rvocalicvowelsigngujarati=2755,t.s=115,t.sabengali=2488,t.sacute=347,t.sacutedotaccent=7781,t.sadarabic=1589,t.sadeva=2360,t.sadfinalarabic=65210,t.sadinitialarabic=65211,t.sadmedialarabic=65212,t.sagujarati=2744,t.sagurmukhi=2616,t.sahiragana=12373,t.sakatakana=12469,t.sakatakanahalfwidth=65403,t.sallallahoualayhewasallamarabic=65018,t.samekh=1505,t.samekhdagesh=64321,t.samekhdageshhebrew=64321,t.samekhhebrew=1505,t.saraaathai=3634,t.saraaethai=3649,t.saraaimaimalaithai=3652,t.saraaimaimuanthai=3651,t.saraamthai=3635,t.saraathai=3632,t.saraethai=3648,t.saraiileftthai=63622,t.saraiithai=3637,t.saraileftthai=63621,t.saraithai=3636,t.saraothai=3650,t.saraueeleftthai=63624,t.saraueethai=3639,t.saraueleftthai=63623,t.sarauethai=3638,t.sarauthai=3640,t.sarauuthai=3641,t.sbopomofo=12569,t.scaron=353,t.scarondotaccent=7783,t.scedilla=351,t.schwa=601,t.schwacyrillic=1241,t.schwadieresiscyrillic=1243,t.schwahook=602,t.scircle=9442,t.scircumflex=349,t.scommaaccent=537,t.sdotaccent=7777,t.sdotbelow=7779,t.sdotbelowdotaccent=7785,t.seagullbelowcmb=828,t.second=8243,t.secondtonechinese=714,t.section=167,t.seenarabic=1587,t.seenfinalarabic=65202,t.seeninitialarabic=65203,t.seenmedialarabic=65204,t.segol=1462,t.segol13=1462,t.segol1f=1462,t.segol2c=1462,t.segolhebrew=1462,t.segolnarrowhebrew=1462,t.segolquarterhebrew=1462,t.segoltahebrew=1426,t.segolwidehebrew=1462,t.seharmenian=1405,t.sehiragana=12379,t.sekatakana=12475,t.sekatakanahalfwidth=65406,t.semicolon=59,t.semicolonarabic=1563,t.semicolonmonospace=65307,t.semicolonsmall=65108,t.semivoicedmarkkana=12444,t.semivoicedmarkkanahalfwidth=65439,t.sentisquare=13090,t.sentosquare=13091,t.seven=55,t.sevenarabic=1639,t.sevenbengali=2541,t.sevencircle=9318,t.sevencircleinversesansserif=10128,t.sevendeva=2413,t.seveneighths=8542,t.sevengujarati=2797,t.sevengurmukhi=2669,t.sevenhackarabic=1639,t.sevenhangzhou=12327,t.sevenideographicparen=12838,t.seveninferior=8327,t.sevenmonospace=65303,t.sevenoldstyle=63287,t.sevenparen=9338,t.sevenperiod=9358,t.sevenpersian=1783,t.sevenroman=8566,t.sevensuperior=8311,t.seventeencircle=9328,t.seventeenparen=9348,t.seventeenperiod=9368,t.seventhai=3671,t.sfthyphen=173,t.shaarmenian=1399,t.shabengali=2486,t.shacyrillic=1096,t.shaddaarabic=1617,t.shaddadammaarabic=64609,t.shaddadammatanarabic=64606,t.shaddafathaarabic=64608,t.shaddakasraarabic=64610,t.shaddakasratanarabic=64607,t.shade=9618,t.shadedark=9619,t.shadelight=9617,t.shademedium=9618,t.shadeva=2358,t.shagujarati=2742,t.shagurmukhi=2614,t.shalshelethebrew=1427,t.shbopomofo=12565,t.shchacyrillic=1097,t.sheenarabic=1588,t.sheenfinalarabic=65206,t.sheeninitialarabic=65207,t.sheenmedialarabic=65208,t.sheicoptic=995,t.sheqel=8362,t.sheqelhebrew=8362,t.sheva=1456,t.sheva115=1456,t.sheva15=1456,t.sheva22=1456,t.sheva2e=1456,t.shevahebrew=1456,t.shevanarrowhebrew=1456,t.shevaquarterhebrew=1456,t.shevawidehebrew=1456,t.shhacyrillic=1211,t.shimacoptic=1005,t.shin=1513,t.shindagesh=64329,t.shindageshhebrew=64329,t.shindageshshindot=64300,t.shindageshshindothebrew=64300,t.shindageshsindot=64301,t.shindageshsindothebrew=64301,t.shindothebrew=1473,t.shinhebrew=1513,t.shinshindot=64298,t.shinshindothebrew=64298,t.shinsindot=64299,t.shinsindothebrew=64299,t.shook=642,t.sigma=963,t.sigma1=962,t.sigmafinal=962,t.sigmalunatesymbolgreek=1010,t.sihiragana=12375,t.sikatakana=12471,t.sikatakanahalfwidth=65404,t.siluqhebrew=1469,t.siluqlefthebrew=1469,t.similar=8764,t.sindothebrew=1474,t.siosacirclekorean=12916,t.siosaparenkorean=12820,t.sioscieuckorean=12670,t.sioscirclekorean=12902,t.sioskiyeokkorean=12666,t.sioskorean=12613,t.siosnieunkorean=12667,t.siosparenkorean=12806,t.siospieupkorean=12669,t.siostikeutkorean=12668,t.six=54,t.sixarabic=1638,t.sixbengali=2540,t.sixcircle=9317,t.sixcircleinversesansserif=10127,t.sixdeva=2412,t.sixgujarati=2796,t.sixgurmukhi=2668,t.sixhackarabic=1638,t.sixhangzhou=12326,t.sixideographicparen=12837,t.sixinferior=8326,t.sixmonospace=65302,t.sixoldstyle=63286,t.sixparen=9337,t.sixperiod=9357,t.sixpersian=1782,t.sixroman=8565,t.sixsuperior=8310,t.sixteencircle=9327,t.sixteencurrencydenominatorbengali=2553,t.sixteenparen=9347,t.sixteenperiod=9367,t.sixthai=3670,t.slash=47,t.slashmonospace=65295,t.slong=383,t.slongdotaccent=7835,t.smileface=9786,t.smonospace=65363,t.sofpasuqhebrew=1475,t.softhyphen=173,t.softsigncyrillic=1100,t.sohiragana=12381,t.sokatakana=12477,t.sokatakanahalfwidth=65407,t.soliduslongoverlaycmb=824,t.solidusshortoverlaycmb=823,t.sorusithai=3625,t.sosalathai=3624,t.sosothai=3595,t.sosuathai=3626,t.space=32,t.spacehackarabic=32,t.spade=9824,t.spadesuitblack=9824,t.spadesuitwhite=9828,t.sparen=9390,t.squarebelowcmb=827,t.squarecc=13252,t.squarecm=13213,t.squarediagonalcrosshatchfill=9641,t.squarehorizontalfill=9636,t.squarekg=13199,t.squarekm=13214,t.squarekmcapital=13262,t.squareln=13265,t.squarelog=13266,t.squaremg=13198,t.squaremil=13269,t.squaremm=13212,t.squaremsquared=13217,t.squareorthogonalcrosshatchfill=9638,t.squareupperlefttolowerrightfill=9639,t.squareupperrighttolowerleftfill=9640,t.squareverticalfill=9637,t.squarewhitewithsmallblack=9635,t.srsquare=13275,t.ssabengali=2487,t.ssadeva=2359,t.ssagujarati=2743,t.ssangcieuckorean=12617,t.ssanghieuhkorean=12677,t.ssangieungkorean=12672,t.ssangkiyeokkorean=12594,t.ssangnieunkorean=12645,t.ssangpieupkorean=12611,t.ssangsioskorean=12614,t.ssangtikeutkorean=12600,t.ssuperior=63218,t.sterling=163,t.sterlingmonospace=65505,t.strokelongoverlaycmb=822,t.strokeshortoverlaycmb=821,t.subset=8834,t.subsetnotequal=8842,t.subsetorequal=8838,t.succeeds=8827,t.suchthat=8715,t.suhiragana=12377,t.sukatakana=12473,t.sukatakanahalfwidth=65405,t.sukunarabic=1618,t.summation=8721,t.sun=9788,t.superset=8835,t.supersetnotequal=8843,t.supersetorequal=8839,t.svsquare=13276,t.syouwaerasquare=13180,t.t=116,t.tabengali=2468,t.tackdown=8868,t.tackleft=8867,t.tadeva=2340,t.tagujarati=2724,t.tagurmukhi=2596,t.taharabic=1591,t.tahfinalarabic=65218,t.tahinitialarabic=65219,t.tahiragana=12383,t.tahmedialarabic=65220,t.taisyouerasquare=13181,t.takatakana=12479,t.takatakanahalfwidth=65408,t.tatweelarabic=1600,t.tau=964,t.tav=1514,t.tavdages=64330,t.tavdagesh=64330,t.tavdageshhebrew=64330,t.tavhebrew=1514,t.tbar=359,t.tbopomofo=12554,t.tcaron=357,t.tccurl=680,t.tcedilla=355,t.tcheharabic=1670,t.tchehfinalarabic=64379,t.tchehinitialarabic=64380,t.tchehmedialarabic=64381,t.tcircle=9443,t.tcircumflexbelow=7793,t.tcommaaccent=355,t.tdieresis=7831,t.tdotaccent=7787,t.tdotbelow=7789,t.tecyrillic=1090,t.tedescendercyrillic=1197,t.teharabic=1578,t.tehfinalarabic=65174,t.tehhahinitialarabic=64674,t.tehhahisolatedarabic=64524,t.tehinitialarabic=65175,t.tehiragana=12390,t.tehjeeminitialarabic=64673,t.tehjeemisolatedarabic=64523,t.tehmarbutaarabic=1577,t.tehmarbutafinalarabic=65172,t.tehmedialarabic=65176,t.tehmeeminitialarabic=64676,t.tehmeemisolatedarabic=64526,t.tehnoonfinalarabic=64627,t.tekatakana=12486,t.tekatakanahalfwidth=65411,t.telephone=8481,t.telephoneblack=9742,t.telishagedolahebrew=1440,t.telishaqetanahebrew=1449,t.tencircle=9321,t.tenideographicparen=12841,t.tenparen=9341,t.tenperiod=9361,t.tenroman=8569,t.tesh=679,t.tet=1496,t.tetdagesh=64312,t.tetdageshhebrew=64312,t.tethebrew=1496,t.tetsecyrillic=1205,t.tevirhebrew=1435,t.tevirlefthebrew=1435,t.thabengali=2469,t.thadeva=2341,t.thagujarati=2725,t.thagurmukhi=2597,t.thalarabic=1584,t.thalfinalarabic=65196,t.thanthakhatlowleftthai=63640,t.thanthakhatlowrightthai=63639,t.thanthakhatthai=3660,t.thanthakhatupperleftthai=63638,t.theharabic=1579,t.thehfinalarabic=65178,t.thehinitialarabic=65179,t.thehmedialarabic=65180,t.thereexists=8707,t.therefore=8756,t.theta=952,t.theta1=977,t.thetasymbolgreek=977,t.thieuthacirclekorean=12921,t.thieuthaparenkorean=12825,t.thieuthcirclekorean=12907,t.thieuthkorean=12620,t.thieuthparenkorean=12811,t.thirteencircle=9324,t.thirteenparen=9344,t.thirteenperiod=9364,t.thonangmonthothai=3601,t.thook=429,t.thophuthaothai=3602,t.thorn=254,t.thothahanthai=3607,t.thothanthai=3600,t.thothongthai=3608,t.thothungthai=3606,t.thousandcyrillic=1154,t.thousandsseparatorarabic=1644,t.thousandsseparatorpersian=1644,t.three=51,t.threearabic=1635,t.threebengali=2537,t.threecircle=9314,t.threecircleinversesansserif=10124,t.threedeva=2409,t.threeeighths=8540,t.threegujarati=2793,t.threegurmukhi=2665,t.threehackarabic=1635,t.threehangzhou=12323,t.threeideographicparen=12834,t.threeinferior=8323,t.threemonospace=65299,t.threenumeratorbengali=2550,t.threeoldstyle=63283,t.threeparen=9334,t.threeperiod=9354,t.threepersian=1779,t.threequarters=190,t.threequartersemdash=63198,t.threeroman=8562,t.threesuperior=179,t.threethai=3667,t.thzsquare=13204,t.tihiragana=12385,t.tikatakana=12481,t.tikatakanahalfwidth=65409,t.tikeutacirclekorean=12912,t.tikeutaparenkorean=12816,t.tikeutcirclekorean=12898,t.tikeutkorean=12599,t.tikeutparenkorean=12802,t.tilde=732,t.tildebelowcmb=816,t.tildecmb=771,t.tildecomb=771,t.tildedoublecmb=864,t.tildeoperator=8764,t.tildeoverlaycmb=820,t.tildeverticalcmb=830,t.timescircle=8855,t.tipehahebrew=1430,t.tipehalefthebrew=1430,t.tippigurmukhi=2672,t.titlocyrilliccmb=1155,t.tiwnarmenian=1407,t.tlinebelow=7791,t.tmonospace=65364,t.toarmenian=1385,t.tohiragana=12392,t.tokatakana=12488,t.tokatakanahalfwidth=65412,t.tonebarextrahighmod=741,t.tonebarextralowmod=745,t.tonebarhighmod=742,t.tonebarlowmod=744,t.tonebarmidmod=743,t.tonefive=445,t.tonesix=389,t.tonetwo=424,t.tonos=900,t.tonsquare=13095,t.topatakthai=3599,t.tortoiseshellbracketleft=12308,t.tortoiseshellbracketleftsmall=65117,t.tortoiseshellbracketleftvertical=65081,t.tortoiseshellbracketright=12309,t.tortoiseshellbracketrightsmall=65118,t.tortoiseshellbracketrightvertical=65082,t.totaothai=3605,t.tpalatalhook=427,t.tparen=9391,t.trademark=8482,t.trademarksans=63722,t.trademarkserif=63195,t.tretroflexhook=648,t.triagdn=9660,t.triaglf=9668,t.triagrt=9658,t.triagup=9650,t.ts=678,t.tsadi=1510,t.tsadidagesh=64326,t.tsadidageshhebrew=64326,t.tsadihebrew=1510,t.tsecyrillic=1094,t.tsere=1461,t.tsere12=1461,t.tsere1e=1461,t.tsere2b=1461,t.tserehebrew=1461,t.tserenarrowhebrew=1461,t.tserequarterhebrew=1461,t.tserewidehebrew=1461,t.tshecyrillic=1115,t.tsuperior=63219,t.ttabengali=2463,t.ttadeva=2335,t.ttagujarati=2719,t.ttagurmukhi=2591,t.tteharabic=1657,t.ttehfinalarabic=64359,t.ttehinitialarabic=64360,t.ttehmedialarabic=64361,t.tthabengali=2464,t.tthadeva=2336,t.tthagujarati=2720,t.tthagurmukhi=2592,t.tturned=647,t.tuhiragana=12388,t.tukatakana=12484,t.tukatakanahalfwidth=65410,t.tusmallhiragana=12387,t.tusmallkatakana=12483,t.tusmallkatakanahalfwidth=65391,t.twelvecircle=9323,t.twelveparen=9343,t.twelveperiod=9363,t.twelveroman=8571,t.twentycircle=9331,t.twentyhangzhou=21316,t.twentyparen=9351,t.twentyperiod=9371,t.two=50,t.twoarabic=1634,t.twobengali=2536,t.twocircle=9313,t.twocircleinversesansserif=10123,t.twodeva=2408,t.twodotenleader=8229,t.twodotleader=8229,t.twodotleadervertical=65072,t.twogujarati=2792,t.twogurmukhi=2664,t.twohackarabic=1634,t.twohangzhou=12322,t.twoideographicparen=12833,t.twoinferior=8322,t.twomonospace=65298,t.twonumeratorbengali=2549,t.twooldstyle=63282,t.twoparen=9333,t.twoperiod=9353,t.twopersian=1778,t.tworoman=8561,t.twostroke=443,t.twosuperior=178,t.twothai=3666,t.twothirds=8532,t.u=117,t.uacute=250,t.ubar=649,t.ubengali=2441,t.ubopomofo=12584,t.ubreve=365,t.ucaron=468,t.ucircle=9444,t.ucircumflex=251,t.ucircumflexbelow=7799,t.ucyrillic=1091,t.udattadeva=2385,t.udblacute=369,t.udblgrave=533,t.udeva=2313,t.udieresis=252,t.udieresisacute=472,t.udieresisbelow=7795,t.udieresiscaron=474,t.udieresiscyrillic=1265,t.udieresisgrave=476,t.udieresismacron=470,t.udotbelow=7909,t.ugrave=249,t.ugujarati=2697,t.ugurmukhi=2569,t.uhiragana=12358,t.uhookabove=7911,t.uhorn=432,t.uhornacute=7913,t.uhorndotbelow=7921,t.uhorngrave=7915,t.uhornhookabove=7917,t.uhorntilde=7919,t.uhungarumlaut=369,t.uhungarumlautcyrillic=1267,t.uinvertedbreve=535,t.ukatakana=12454,t.ukatakanahalfwidth=65395,t.ukcyrillic=1145,t.ukorean=12636,t.umacron=363,t.umacroncyrillic=1263,t.umacrondieresis=7803,t.umatragurmukhi=2625,t.umonospace=65365,t.underscore=95,t.underscoredbl=8215,t.underscoremonospace=65343,t.underscorevertical=65075,t.underscorewavy=65103,t.union=8746,t.universal=8704,t.uogonek=371,t.uparen=9392,t.upblock=9600,t.upperdothebrew=1476,t.upsilon=965,t.upsilondieresis=971,t.upsilondieresistonos=944,t.upsilonlatin=650,t.upsilontonos=973,t.uptackbelowcmb=797,t.uptackmod=724,t.uragurmukhi=2675,t.uring=367,t.ushortcyrillic=1118,t.usmallhiragana=12357,t.usmallkatakana=12453,t.usmallkatakanahalfwidth=65385,t.ustraightcyrillic=1199,t.ustraightstrokecyrillic=1201,t.utilde=361,t.utildeacute=7801,t.utildebelow=7797,t.uubengali=2442,t.uudeva=2314,t.uugujarati=2698,t.uugurmukhi=2570,t.uumatragurmukhi=2626,t.uuvowelsignbengali=2498,t.uuvowelsigndeva=2370,t.uuvowelsigngujarati=2754,t.uvowelsignbengali=2497,t.uvowelsigndeva=2369,t.uvowelsigngujarati=2753,t.v=118,t.vadeva=2357,t.vagujarati=2741,t.vagurmukhi=2613,t.vakatakana=12535,t.vav=1493,t.vavdagesh=64309,t.vavdagesh65=64309,t.vavdageshhebrew=64309,t.vavhebrew=1493,t.vavholam=64331,t.vavholamhebrew=64331,t.vavvavhebrew=1520,t.vavyodhebrew=1521,t.vcircle=9445,t.vdotbelow=7807,t.vecyrillic=1074,t.veharabic=1700,t.vehfinalarabic=64363,t.vehinitialarabic=64364,t.vehmedialarabic=64365,t.vekatakana=12537,t.venus=9792,t.verticalbar=124,t.verticallineabovecmb=781,t.verticallinebelowcmb=809,t.verticallinelowmod=716,t.verticallinemod=712,t.vewarmenian=1406,t.vhook=651,t.vikatakana=12536,t.viramabengali=2509,t.viramadeva=2381,t.viramagujarati=2765,t.visargabengali=2435,t.visargadeva=2307,t.visargagujarati=2691,t.vmonospace=65366,t.voarmenian=1400,t.voicediterationhiragana=12446,t.voicediterationkatakana=12542,t.voicedmarkkana=12443,t.voicedmarkkanahalfwidth=65438,t.vokatakana=12538,t.vparen=9393,t.vtilde=7805,t.vturned=652,t.vuhiragana=12436,t.vukatakana=12532,t.w=119,t.wacute=7811,t.waekorean=12633,t.wahiragana=12431,t.wakatakana=12527,t.wakatakanahalfwidth=65436,t.wakorean=12632,t.wasmallhiragana=12430,t.wasmallkatakana=12526,t.wattosquare=13143,t.wavedash=12316,t.wavyunderscorevertical=65076,t.wawarabic=1608,t.wawfinalarabic=65262,t.wawhamzaabovearabic=1572,t.wawhamzaabovefinalarabic=65158,t.wbsquare=13277,t.wcircle=9446,t.wcircumflex=373,t.wdieresis=7813,t.wdotaccent=7815,t.wdotbelow=7817,t.wehiragana=12433,t.weierstrass=8472,t.wekatakana=12529,t.wekorean=12638,t.weokorean=12637,t.wgrave=7809,t.whitebullet=9702,t.whitecircle=9675,t.whitecircleinverse=9689,t.whitecornerbracketleft=12302,t.whitecornerbracketleftvertical=65091,t.whitecornerbracketright=12303,t.whitecornerbracketrightvertical=65092,t.whitediamond=9671,t.whitediamondcontainingblacksmalldiamond=9672,t.whitedownpointingsmalltriangle=9663,t.whitedownpointingtriangle=9661,t.whiteleftpointingsmalltriangle=9667,t.whiteleftpointingtriangle=9665,t.whitelenticularbracketleft=12310,t.whitelenticularbracketright=12311,t.whiterightpointingsmalltriangle=9657,t.whiterightpointingtriangle=9655,t.whitesmallsquare=9643,t.whitesmilingface=9786,t.whitesquare=9633,t.whitestar=9734,t.whitetelephone=9743,t.whitetortoiseshellbracketleft=12312,t.whitetortoiseshellbracketright=12313,t.whiteuppointingsmalltriangle=9653,t.whiteuppointingtriangle=9651,t.wihiragana=12432,t.wikatakana=12528,t.wikorean=12639,t.wmonospace=65367,t.wohiragana=12434,t.wokatakana=12530,t.wokatakanahalfwidth=65382,t.won=8361,t.wonmonospace=65510,t.wowaenthai=3623,t.wparen=9394,t.wring=7832,t.wsuperior=695,t.wturned=653,t.wynn=447,t.x=120,t.xabovecmb=829,t.xbopomofo=12562,t.xcircle=9447,t.xdieresis=7821,t.xdotaccent=7819,t.xeharmenian=1389,t.xi=958,t.xmonospace=65368,t.xparen=9395,t.xsuperior=739,t.y=121,t.yaadosquare=13134,t.yabengali=2479,t.yacute=253,t.yadeva=2351,t.yaekorean=12626,t.yagujarati=2735,t.yagurmukhi=2607,t.yahiragana=12420,t.yakatakana=12516,t.yakatakanahalfwidth=65428,t.yakorean=12625,t.yamakkanthai=3662,t.yasmallhiragana=12419,t.yasmallkatakana=12515,t.yasmallkatakanahalfwidth=65388,t.yatcyrillic=1123,t.ycircle=9448,t.ycircumflex=375,t.ydieresis=255,t.ydotaccent=7823,t.ydotbelow=7925,t.yeharabic=1610,t.yehbarreearabic=1746,t.yehbarreefinalarabic=64431,t.yehfinalarabic=65266,t.yehhamzaabovearabic=1574,t.yehhamzaabovefinalarabic=65162,t.yehhamzaaboveinitialarabic=65163,t.yehhamzaabovemedialarabic=65164,t.yehinitialarabic=65267,t.yehmedialarabic=65268,t.yehmeeminitialarabic=64733,t.yehmeemisolatedarabic=64600,t.yehnoonfinalarabic=64660,t.yehthreedotsbelowarabic=1745,t.yekorean=12630,t.yen=165,t.yenmonospace=65509,t.yeokorean=12629,t.yeorinhieuhkorean=12678,t.yerahbenyomohebrew=1450,t.yerahbenyomolefthebrew=1450,t.yericyrillic=1099,t.yerudieresiscyrillic=1273,t.yesieungkorean=12673,t.yesieungpansioskorean=12675,t.yesieungsioskorean=12674,t.yetivhebrew=1434,t.ygrave=7923,t.yhook=436,t.yhookabove=7927,t.yiarmenian=1397,t.yicyrillic=1111,t.yikorean=12642,t.yinyang=9775,t.yiwnarmenian=1410,t.ymonospace=65369,t.yod=1497,t.yoddagesh=64313,t.yoddageshhebrew=64313,t.yodhebrew=1497,t.yodyodhebrew=1522,t.yodyodpatahhebrew=64287,t.yohiragana=12424,t.yoikorean=12681,t.yokatakana=12520,t.yokatakanahalfwidth=65430,t.yokorean=12635,t.yosmallhiragana=12423,t.yosmallkatakana=12519,t.yosmallkatakanahalfwidth=65390,t.yotgreek=1011,t.yoyaekorean=12680,t.yoyakorean=12679,t.yoyakthai=3618,t.yoyingthai=3597,t.yparen=9396,t.ypogegrammeni=890,t.ypogegrammenigreekcmb=837,t.yr=422,t.yring=7833,t.ysuperior=696,t.ytilde=7929,t.yturned=654,t.yuhiragana=12422,t.yuikorean=12684,t.yukatakana=12518,t.yukatakanahalfwidth=65429,t.yukorean=12640,t.yusbigcyrillic=1131,t.yusbigiotifiedcyrillic=1133,t.yuslittlecyrillic=1127,t.yuslittleiotifiedcyrillic=1129,t.yusmallhiragana=12421,t.yusmallkatakana=12517,t.yusmallkatakanahalfwidth=65389,t.yuyekorean=12683,t.yuyeokorean=12682,t.yyabengali=2527,t.yyadeva=2399,t.z=122,t.zaarmenian=1382,t.zacute=378,t.zadeva=2395,t.zagurmukhi=2651,t.zaharabic=1592,t.zahfinalarabic=65222,t.zahinitialarabic=65223,t.zahiragana=12374,t.zahmedialarabic=65224,t.zainarabic=1586,t.zainfinalarabic=65200,t.zakatakana=12470,t.zaqefgadolhebrew=1429,t.zaqefqatanhebrew=1428,t.zarqahebrew=1432,t.zayin=1494,t.zayindagesh=64310,t.zayindageshhebrew=64310,t.zayinhebrew=1494,t.zbopomofo=12567,t.zcaron=382,t.zcircle=9449,t.zcircumflex=7825,t.zcurl=657,t.zdot=380,t.zdotaccent=380,t.zdotbelow=7827,t.zecyrillic=1079,t.zedescendercyrillic=1177,t.zedieresiscyrillic=1247,t.zehiragana=12380,t.zekatakana=12476,t.zero=48,t.zeroarabic=1632,t.zerobengali=2534,t.zerodeva=2406,t.zerogujarati=2790,t.zerogurmukhi=2662,t.zerohackarabic=1632,t.zeroinferior=8320,t.zeromonospace=65296,t.zerooldstyle=63280,t.zeropersian=1776,t.zerosuperior=8304,t.zerothai=3664,t.zerowidthjoiner=65279,t.zerowidthnonjoiner=8204,t.zerowidthspace=8203,t.zeta=950,t.zhbopomofo=12563,t.zhearmenian=1386,t.zhebrevecyrillic=1218,t.zhecyrillic=1078,t.zhedescendercyrillic=1175,t.zhedieresiscyrillic=1245,t.zihiragana=12376,t.zikatakana=12472,t.zinorhebrew=1454,t.zlinebelow=7829,t.zmonospace=65370,t.zohiragana=12382,t.zokatakana=12478,t.zparen=9397,t.zretroflexhook=656,t.zstroke=438,t.zuhiragana=12378,t.zukatakana=12474,t[".notdef"]=0,t.angbracketleftbig=9001,t.angbracketleftBig=9001,t.angbracketleftbigg=9001,t.angbracketleftBigg=9001,t.angbracketrightBig=9002,t.angbracketrightbig=9002,t.angbracketrightBigg=9002,t.angbracketrightbigg=9002,t.arrowhookleft=8618,t.arrowhookright=8617,t.arrowlefttophalf=8636,t.arrowleftbothalf=8637,t.arrownortheast=8599,t.arrownorthwest=8598,t.arrowrighttophalf=8640,t.arrowrightbothalf=8641,t.arrowsoutheast=8600,t.arrowsouthwest=8601,t.backslashbig=8726,t.backslashBig=8726,t.backslashBigg=8726,t.backslashbigg=8726,t.bardbl=8214,t.bracehtipdownleft=65079,t.bracehtipdownright=65079,t.bracehtipupleft=65080,t.bracehtipupright=65080,t.braceleftBig=123,t.braceleftbig=123,t.braceleftbigg=123,t.braceleftBigg=123,t.bracerightBig=125,t.bracerightbig=125,t.bracerightbigg=125,t.bracerightBigg=125,t.bracketleftbig=91,t.bracketleftBig=91,t.bracketleftbigg=91,t.bracketleftBigg=91,t.bracketrightBig=93,t.bracketrightbig=93,t.bracketrightbigg=93,t.bracketrightBigg=93,t.ceilingleftbig=8968,t.ceilingleftBig=8968,t.ceilingleftBigg=8968,t.ceilingleftbigg=8968,t.ceilingrightbig=8969,t.ceilingrightBig=8969,t.ceilingrightbigg=8969,t.ceilingrightBigg=8969,t.circledotdisplay=8857,t.circledottext=8857,t.circlemultiplydisplay=8855,t.circlemultiplytext=8855,t.circleplusdisplay=8853,t.circleplustext=8853,t.contintegraldisplay=8750,t.contintegraltext=8750,t.coproductdisplay=8720,t.coproducttext=8720,t.floorleftBig=8970,t.floorleftbig=8970,t.floorleftbigg=8970,t.floorleftBigg=8970,t.floorrightbig=8971,t.floorrightBig=8971,t.floorrightBigg=8971,t.floorrightbigg=8971,t.hatwide=770,t.hatwider=770,t.hatwidest=770,t.intercal=7488,t.integraldisplay=8747,t.integraltext=8747,t.intersectiondisplay=8898,t.intersectiontext=8898,t.logicalanddisplay=8743,t.logicalandtext=8743,t.logicalordisplay=8744,t.logicalortext=8744,t.parenleftBig=40,t.parenleftbig=40,t.parenleftBigg=40,t.parenleftbigg=40,t.parenrightBig=41,t.parenrightbig=41,t.parenrightBigg=41,t.parenrightbigg=41,t.prime=8242,t.productdisplay=8719,t.producttext=8719,t.radicalbig=8730,t.radicalBig=8730,t.radicalBigg=8730,t.radicalbigg=8730,t.radicalbt=8730,t.radicaltp=8730,t.radicalvertex=8730,t.slashbig=47,t.slashBig=47,t.slashBigg=47,t.slashbigg=47,t.summationdisplay=8721,t.summationtext=8721,t.tildewide=732,t.tildewider=732,t.tildewidest=732,t.uniondisplay=8899,t.unionmultidisplay=8846,t.unionmultitext=8846,t.unionsqdisplay=8852,t.unionsqtext=8852,t.uniontext=8899,t.vextenddouble=8741,t.vextendsingle=8739}),s=a(function(t){t.space=32,t.a1=9985,t.a2=9986,t.a202=9987,t.a3=9988,t.a4=9742,t.a5=9990,t.a119=9991,t.a118=9992,t.a117=9993,t.a11=9755,t.a12=9758,t.a13=9996,t.a14=9997,t.a15=9998,t.a16=9999,t.a105=1e4,t.a17=10001,t.a18=10002,t.a19=10003,t.a20=10004,t.a21=10005,t.a22=10006,t.a23=10007,t.a24=10008,t.a25=10009,t.a26=10010,t.a27=10011,t.a28=10012,t.a6=10013,t.a7=10014,t.a8=10015,t.a9=10016,t.a10=10017,t.a29=10018,t.a30=10019,t.a31=10020,t.a32=10021,t.a33=10022,t.a34=10023,t.a35=9733,t.a36=10025,t.a37=10026,t.a38=10027,t.a39=10028,t.a40=10029,t.a41=10030,t.a42=10031,t.a43=10032,t.a44=10033,t.a45=10034,t.a46=10035,t.a47=10036,t.a48=10037,t.a49=10038,t.a50=10039,t.a51=10040,t.a52=10041,t.a53=10042,t.a54=10043,t.a55=10044,t.a56=10045,t.a57=10046,t.a58=10047,t.a59=10048,t.a60=10049,t.a61=10050,t.a62=10051,t.a63=10052,t.a64=10053,t.a65=10054,t.a66=10055,t.a67=10056,t.a68=10057,t.a69=10058,t.a70=10059,t.a71=9679,t.a72=10061,t.a73=9632,t.a74=10063,t.a203=10064,t.a75=10065,t.a204=10066,t.a76=9650,t.a77=9660,t.a78=9670,t.a79=10070,t.a81=9687,t.a82=10072,t.a83=10073,t.a84=10074,t.a97=10075,t.a98=10076,t.a99=10077,t.a100=10078,t.a101=10081,t.a102=10082,t.a103=10083,t.a104=10084,t.a106=10085,t.a107=10086,t.a108=10087,t.a112=9827,t.a111=9830,t.a110=9829,t.a109=9824,t.a120=9312,t.a121=9313,t.a122=9314,t.a123=9315,t.a124=9316,t.a125=9317,t.a126=9318,t.a127=9319,t.a128=9320,t.a129=9321,t.a130=10102,t.a131=10103,t.a132=10104,t.a133=10105,t.a134=10106,t.a135=10107,t.a136=10108,t.a137=10109,t.a138=10110,t.a139=10111,t.a140=10112,t.a141=10113,t.a142=10114,t.a143=10115,t.a144=10116,t.a145=10117,t.a146=10118,t.a147=10119,t.a148=10120,t.a149=10121,t.a150=10122,t.a151=10123,t.a152=10124,t.a153=10125,t.a154=10126,t.a155=10127,t.a156=10128,t.a157=10129,t.a158=10130,t.a159=10131,t.a160=10132,t.a161=8594,t.a163=8596,t.a164=8597,t.a196=10136,t.a165=10137,t.a192=10138,t.a166=10139,t.a167=10140,t.a168=10141,t.a169=10142,t.a170=10143,t.a171=10144,t.a172=10145,t.a173=10146,t.a162=10147,t.a174=10148,t.a175=10149,t.a176=10150,t.a177=10151,t.a178=10152,t.a179=10153,t.a193=10154,t.a180=10155,t.a199=10156,t.a181=10157,t.a200=10158,t.a182=10159,t.a201=10161,t.a183=10162,t.a184=10163,t.a197=10164,t.a185=10165,t.a194=10166,t.a198=10167,t.a186=10168,t.a195=10169,t.a187=10170,t.a188=10171,t.a189=10172,t.a190=10173,t.a191=10174,t.a89=10088,t.a90=10089,t.a93=10090,t.a94=10091,t.a91=10092,t.a92=10093,t.a205=10094,t.a85=10095,t.a206=10096,t.a86=10097,t.a87=10098,t.a88=10099,t.a95=10100,t.a96=10101,t[".notdef"]=0});e.getGlyphsUnicode=i,e.getDingbatsGlyphsUnicode=s},function(n,e,r){"use strict";n.exports=!r(10)&&!r(11)(function(){return Object.defineProperty(r(35)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,e,r){"use strict";for(var a=r(1),i=r(8),s=r(17),t=s("typed_array"),o=s("view"),l=!!(a.ArrayBuffer&&a.DataView),d=l,c=0,y=9,u,S="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<y;)(u=a[S[c++]])?(i(u.prototype,t,!0),i(u.prototype,o,!0)):d=!1;n.exports={ABV:l,CONSTR:d,TYPED:t,VIEW:o}},function(n,e,r){"use strict";var a=r(18),i=r(14);n.exports=function(s){if(s===void 0)return 0;var t=a(s),o=i(t);if(t!==o)throw RangeError("Wrong length!");return o}},function(n,e,r){"use strict";var a=r(52),i=r(40).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},function(n,e,r){"use strict";var a=r(12),i=r(30),s=r(53)(!1),t=r(39)("IE_PROTO");n.exports=function(o,l){var d=i(o),c=0,y=[],u;for(u in d)u!=t&&a(d,u)&&y.push(u);for(;l.length>c;)a(d,u=l[c++])&&(~s(y,u)||y.push(u));return y}},function(n,e,r){"use strict";var a=r(30),i=r(14),s=r(31);n.exports=function(t){return function(o,l,d){var c=a(o),y=i(c.length),u=s(d,y),S;if(t&&l!=l){for(;y>u;)if(S=c[u++],S!=S)return!0}else for(;y>u;u++)if((t||u in c)&&c[u]===l)return t||u||0;return!t&&-1}}},function(n,e,r){"use strict";var a=r(6),i=r(1),s="__core-js_shared__",t=i[s]||(i[s]={});(n.exports=function(o,l){return t[o]||(t[o]=l!==void 0?l:{})})("versions",[]).push({version:a.version,mode:r(21)?"pure":"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})},function(n,e,r){"use strict";var a=r(19),i=r(31),s=r(14);n.exports=function(o){for(var l=a(this),d=s(l.length),c=arguments.length,y=i(c>1?arguments[1]:void 0,d),u=c>2?arguments[2]:void 0,S=u===void 0?d:i(u,d);S>y;)l[y++]=o;return l}},function(n,e,r){"use strict";var a=r(20),i=r(4)("iterator"),s=Array.prototype;n.exports=function(t){return t!==void 0&&(a.Array===t||s[i]===t)}},function(n,e,r){"use strict";var a=r(9),i=r(90),s=r(40),t=r(39)("IE_PROTO"),o=function(){},l="prototype",d=function(){var y=r(35)("iframe"),u=s.length,S="<",V=">",U;for(y.style.display="none",r(58).appendChild(y),y.src="javascript:",U=y.contentWindow.document,U.open(),U.write(S+"script"+V+"document.F=Object"+S+"/script"+V),U.close(),d=U.F;u--;)delete d[l][s[u]];return d()};n.exports=Object.create||function(y,u){var S;return y!==null?(o[l]=a(y),S=new o,o[l]=null,S[t]=y):S=d(),u===void 0?S:i(S,u)}},function(n,e,r){"use strict";var a=r(1).document;n.exports=a&&a.documentElement},function(n,e,r){"use strict";var a=r(12),i=r(19),s=r(39)("IE_PROTO"),t=Object.prototype;n.exports=Object.getPrototypeOf||function(o){return o=i(o),a(o,s)?o[s]:typeof o.constructor=="function"&&o instanceof o.constructor?o.constructor.prototype:o instanceof Object?t:null}},function(n,e,r){"use strict";var a=r(32),i=r(4)("iterator"),s=r(20);n.exports=r(6).getIteratorMethod=function(t){if(t!=null)return t[i]||t["@@iterator"]||s[a(t)]}},function(n,e,r){"use strict";var a=r(94),i=r(95),s=r(20),t=r(30);n.exports=r(62)(Array,"Array",function(o,l){this._t=t(o),this._i=0,this._k=l},function(){var o=this._t,l=this._k,d=this._i++;return!o||d>=o.length?(this._t=void 0,i(1)):l=="keys"?i(0,d):l=="values"?i(0,o[d]):i(0,[d,o[d]])},"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},function(n,e,r){"use strict";var a=r(21),i=r(7),s=r(16),t=r(8),o=r(20),l=r(96),d=r(26),c=r(59),y=r(4)("iterator"),u=!([].keys&&"next"in[].keys()),S="@@iterator",V="keys",U="values",z=function(){return this};n.exports=function(D,k,T,R,g,m,v){l(T,k,R);var b=function(E){if(!u&&E in _)return _[E];switch(E){case V:return function(){return new T(this,E)};case U:return function(){return new T(this,E)}}return function(){return new T(this,E)}},f=k+" Iterator",p=g==U,h=!1,_=D.prototype,I=_[y]||_[S]||g&&_[g],W=I||b(g),q=g?p?b("entries"):W:void 0,B=k=="Array"&&_.entries||I,N,L,P;if(B&&(P=c(B.call(new D)),P!==Object.prototype&&P.next&&(d(P,f,!0),!a&&typeof P[y]!="function"&&t(P,y,z))),p&&I&&I.name!==U&&(h=!0,W=function(){return I.call(this)}),(!a||v)&&(u||h||!_[y])&&t(_,y,W),o[k]=W,o[f]=z,g)if(N={values:p?W:b(U),keys:m?W:b(V),entries:q},v)for(L in N)L in _||s(_,L,N[L]);else i(i.P+i.F*(u||h),k,N);return N}},function(n,e,r){"use strict";var a=r(1),i=r(15),s=r(10),t=r(4)("species");n.exports=function(o){var l=a[o];s&&l&&!l[t]&&i.f(l,t,{configurable:!0,get:function(){return this}})}},function(n,e,r){"use strict";var a=r(65),i=r(29),s=r(30),t=r(36),o=r(12),l=r(48),d=Object.getOwnPropertyDescriptor;e.f=r(10)?d:function(y,u){if(y=s(y),u=t(u,!0),l)try{return d(y,u)}catch{}if(o(y,u))return i(!a.f.call(y,u),y[u])}},function(n,e,r){"use strict";e.f={}.propertyIsEnumerable},function(n,e,r){"use strict";var a=r(32),i={};i[r(4)("toStringTag")]="z",i+""!="[object z]"&&r(16)(Object.prototype,"toString",function(){return"[object "+a(this)+"]"},!0)},function(n,e,r){"use strict";for(var a=r(61),i=r(41),s=r(16),t=r(1),o=r(8),l=r(20),d=r(4),c=d("iterator"),y=d("toStringTag"),u=l.Array,S={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},V=i(S),U=0;U<V.length;U++){var z=V[U],D=S[z],k=t[z],T=k&&k.prototype,R;if(T&&(T[c]||o(T,c,u),T[y]||o(T,y,z),l[z]=u,D))for(R in a)T[R]||s(T,R,a[R],!0)}},function(n,e,r){"use strict";var a=r(13),i=r(108),s=r(58),t=r(35),o=r(1),l=o.process,d=o.setImmediate,c=o.clearImmediate,y=o.MessageChannel,u=o.Dispatch,S=0,V={},U="onreadystatechange",z,D,k,T=function(){var m=+this;if(V.hasOwnProperty(m)){var v=V[m];delete V[m],v()}},R=function(m){T.call(m.data)};(!d||!c)&&(d=function(m){for(var v=[],b=1;arguments.length>b;)v.push(arguments[b++]);return V[++S]=function(){i(typeof m=="function"?m:Function(m),v)},z(S),S},c=function(m){delete V[m]},r(25)(l)=="process"?z=function(m){l.nextTick(a(T,m,1))}:u&&u.now?z=function(m){u.now(a(T,m,1))}:y?(D=new y,k=D.port2,D.port1.onmessage=R,z=a(k.postMessage,k,1)):o.addEventListener&&typeof postMessage=="function"&&!o.importScripts?(z=function(m){o.postMessage(m+"","*")},o.addEventListener("message",R,!1)):U in t("script")?z=function(m){s.appendChild(t("script"))[U]=function(){s.removeChild(this),T.call(m)}}:z=function(m){setTimeout(a(T,m,1),0)}),n.exports={set:d,clear:c}},function(n,e,r){"use strict";n.exports=function(a){try{return{e:!1,v:a()}}catch(i){return{e:!0,v:i}}}},function(n,e,r){"use strict";var a=r(9),i=r(3),s=r(45);n.exports=function(t,o){if(a(t),i(o)&&o.constructor===t)return o;var l=s.f(t),d=l.resolve;return d(o),l.promise}},function(n,e,r){"use strict";var a=r(3);n.exports=function(i,s){if(!a(i)||i._t!==s)throw TypeError("Incompatible receiver, "+s+" required!");return i}},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChunkedStreamManager=e.ChunkedStream=void 0;var a=r(0),i=function(){function o(l,d,c){this.bytes=new Uint8Array(l),this.start=0,this.pos=0,this.end=l,this.chunkSize=d,this.loadedChunks=[],this.numChunksLoaded=0,this.numChunks=Math.ceil(l/d),this.manager=c,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}return o.prototype={getMissingChunks:function(){for(var d=[],c=0,y=this.numChunks;c<y;++c)this.loadedChunks[c]||d.push(c);return d},getBaseStreams:function(){return[this]},allChunksLoaded:function(){return this.numChunksLoaded===this.numChunks},onReceiveData:function(d,c){var y=d+c.byteLength;if(d%this.chunkSize!==0)throw new Error("Bad begin offset: "+d);var u=this.bytes.length;if(y%this.chunkSize!==0&&y!==u)throw new Error("Bad end offset: "+y);this.bytes.set(new Uint8Array(c),d);var S=this.chunkSize,V=Math.floor(d/S),U=Math.floor((y-1)/S)+1,z;for(z=V;z<U;++z)this.loadedChunks[z]||(this.loadedChunks[z]=!0,++this.numChunksLoaded)},onReceiveProgressiveData:function(d){var c=this.progressiveDataLength,y=Math.floor(c/this.chunkSize);this.bytes.set(new Uint8Array(d),c),c+=d.byteLength,this.progressiveDataLength=c;var u=c>=this.end?this.numChunks:Math.floor(c/this.chunkSize),S;for(S=y;S<u;++S)this.loadedChunks[S]||(this.loadedChunks[S]=!0,++this.numChunksLoaded)},ensureByte:function(d){var c=Math.floor(d/this.chunkSize);if(c!==this.lastSuccessfulEnsureByteChunk){if(!this.loadedChunks[c])throw new a.MissingDataException(d,d+1);this.lastSuccessfulEnsureByteChunk=c}},ensureRange:function(d,c){if(!(d>=c)&&!(c<=this.progressiveDataLength)){for(var y=this.chunkSize,u=Math.floor(d/y),S=Math.floor((c-1)/y)+1,V=u;V<S;++V)if(!this.loadedChunks[V])throw new a.MissingDataException(d,c)}},nextEmptyChunk:function(d){for(var c,y=this.numChunks,u=0;u<y;++u)if(c=(d+u)%y,!this.loadedChunks[c])return c;return null},hasChunk:function(d){return!!this.loadedChunks[d]},get length(){return this.end-this.start},get isEmpty(){return this.length===0},getByte:function(){var d=this.pos;return d>=this.end?-1:(this.ensureByte(d),this.bytes[this.pos++])},getUint16:function(){var d=this.getByte(),c=this.getByte();return d===-1||c===-1?-1:(d<<8)+c},getInt32:function(){var d=this.getByte(),c=this.getByte(),y=this.getByte(),u=this.getByte();return(d<<24)+(c<<16)+(y<<8)+u},getBytes:function(d){var c=this.bytes,y=this.pos,u=this.end;if(!d)return this.ensureRange(y,u),c.subarray(y,u);var S=y+d;return S>u&&(S=u),this.ensureRange(y,S),this.pos=S,c.subarray(y,S)},peekByte:function(){var d=this.getByte();return this.pos--,d},peekBytes:function(d){var c=this.getBytes(d);return this.pos-=c.length,c},getByteRange:function(d,c){return this.ensureRange(d,c),this.bytes.subarray(d,c)},skip:function(d){d||(d=1),this.pos+=d},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(d,c,y){this.ensureRange(d,d+c);function u(){}u.prototype=Object.create(this),u.prototype.getMissingChunks=function(){for(var V=this.chunkSize,U=Math.floor(this.start/V),z=Math.floor((this.end-1)/V)+1,D=[],k=U;k<z;++k)this.loadedChunks[k]||D.push(k);return D};var S=new u;return S.pos=S.start=d,S.end=d+c||this.end,S.dict=y,S}},o}(),s=function(){function o(l,d){var c=d.rangeChunkSize,y=d.length;this.stream=new i(y,c,this),this.length=y,this.chunkSize=c,this.pdfNetworkStream=l,this.url=d.url,this.disableAutoFetch=d.disableAutoFetch,this.msgHandler=d.msgHandler,this.currRequestId=0,this.chunksNeededByRequest=Object.create(null),this.requestsByChunk=Object.create(null),this.promisesByRequest=Object.create(null),this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,a.createPromiseCapability)()}return o.prototype={onLoadedStream:function(){return this._loadedStreamCapability.promise},sendRequest:function(d,c){var y=this,u=this.pdfNetworkStream.getRangeReader(d,c);u.isStreamingSupported||(u.onProgress=this.onProgress.bind(this));var S=[],V=0,U=this,z=new Promise(function(D,k){var T=function R(g){try{if(!g.done){var m=g.value;S.push(m),V+=(0,a.arrayByteLength)(m),u.isStreamingSupported&&U.onProgress({loaded:V}),u.read().then(R,k);return}var v=(0,a.arraysToBytes)(S);S=null,D(v)}catch(b){k(b)}};u.read().then(T,k)});z.then(function(D){y.aborted||y.onReceiveData({chunk:D,begin:d})})},requestAllChunks:function(){var d=this.stream.getMissingChunks();return this._requestChunks(d),this._loadedStreamCapability.promise},_requestChunks:function(d){var c=this.currRequestId++,y,u,S=Object.create(null);for(this.chunksNeededByRequest[c]=S,y=0,u=d.length;y<u;y++)this.stream.hasChunk(d[y])||(S[d[y]]=!0);if((0,a.isEmptyObj)(S))return Promise.resolve();var V=(0,a.createPromiseCapability)();this.promisesByRequest[c]=V;var U=[];for(var z in S)z=z|0,z in this.requestsByChunk||(this.requestsByChunk[z]=[],U.push(z)),this.requestsByChunk[z].push(c);if(!U.length)return V.promise;var D=this.groupChunks(U);for(y=0;y<D.length;++y){var k=D[y],T=k.beginChunk*this.chunkSize,R=Math.min(k.endChunk*this.chunkSize,this.length);this.sendRequest(T,R)}return V.promise},getStream:function(){return this.stream},requestRange:function(d,c){c=Math.min(c,this.length);for(var y=this.getBeginChunk(d),u=this.getEndChunk(c),S=[],V=y;V<u;++V)S.push(V);return this._requestChunks(S)},requestRanges:function(d){d=d||[];for(var c=[],y=0;y<d.length;y++)for(var u=this.getBeginChunk(d[y].begin),S=this.getEndChunk(d[y].end),V=u;V<S;++V)c.indexOf(V)<0&&c.push(V);return c.sort(function(U,z){return U-z}),this._requestChunks(c)},groupChunks:function(d){for(var c=[],y=-1,u=-1,S=0;S<d.length;++S){var V=d[S];y<0&&(y=V),u>=0&&u+1!==V&&(c.push({beginChunk:y,endChunk:u+1}),y=V),S+1===d.length&&c.push({beginChunk:y,endChunk:V+1}),u=V}return c},onProgress:function(d){var c=this.stream.numChunksLoaded*this.chunkSize+d.loaded;this.msgHandler.send("DocProgress",{loaded:c,total:this.length})},onReceiveData:function(d){var c=d.chunk,y=d.begin===void 0,u=y?this.progressiveDataLength:d.begin,S=u+c.byteLength,V=Math.floor(u/this.chunkSize),U=S<this.length?Math.floor(S/this.chunkSize):Math.ceil(S/this.chunkSize);y?(this.stream.onReceiveProgressiveData(c),this.progressiveDataLength=S):this.stream.onReceiveData(u,c),this.stream.allChunksLoaded()&&this._loadedStreamCapability.resolve(this.stream);var z=[],D,k;for(c=V;c<U;++c){var T=this.requestsByChunk[c]||[];for(delete this.requestsByChunk[c],D=0;D<T.length;++D){k=T[D];var R=this.chunksNeededByRequest[k];c in R&&delete R[c],(0,a.isEmptyObj)(R)&&z.push(k)}}if(!this.disableAutoFetch&&(0,a.isEmptyObj)(this.requestsByChunk)){var g;if(this.stream.numChunksLoaded===1){var m=this.stream.numChunks-1;this.stream.hasChunk(m)||(g=m)}else g=this.stream.nextEmptyChunk(U);Number.isInteger(g)&&this._requestChunks([g])}for(D=0;D<z.length;++D){k=z[D];var v=this.promisesByRequest[k];delete this.promisesByRequest[k],v.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})},onError:function(d){this._loadedStreamCapability.reject(d)},getBeginChunk:function(d){var c=Math.floor(d/this.chunkSize);return c},getEndChunk:function(d){var c=Math.floor((d-1)/this.chunkSize)+1;return c},abort:function(){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests("abort");for(var d in this.promisesByRequest){var c=this.promisesByRequest[d];c.reject(new Error("Request was aborted"))}}},o}();e.ChunkedStream=i,e.ChunkedStreamManager=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileSpec=e.XRef=e.ObjectLoader=e.Catalog=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},i=function(){function k(T,R){var g=[],m=!0,v=!1,b=void 0;try{for(var f=T[Symbol.iterator](),p;!(m=(p=f.next()).done)&&(g.push(p.value),!(R&&g.length===R));m=!0);}catch(h){v=!0,b=h}finally{try{!m&&f.return&&f.return()}finally{if(v)throw b}}return g}return function(T,R){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return k(T,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(0),t=r(2),o=r(34),l=r(72),d=r(76),c=r(27),y=function(){function T(R,g,m){if(this.pdfManager=R,this.xref=g,this.catDict=g.getCatalogObj(),!(0,t.isDict)(this.catDict))throw new s.FormatError("catalog object is not a dictionary");this.fontCache=new t.RefSetCache,this.builtInCMapCache=Object.create(null),this.pageKidsCountCache=new t.RefSetCache,this.pageFactory=m,this.pagePromises=[]}return T.prototype={get metadata(){var R=this.catDict.getRaw("Metadata");if(!(0,t.isRef)(R))return(0,s.shadow)(this,"metadata",null);var g=this.xref.encrypt?this.xref.encrypt.encryptMetadata:!1,m=this.xref.fetch(R,!g),v;if(m&&(0,t.isDict)(m.dict)){var b=m.dict.get("Type"),f=m.dict.get("Subtype");if((0,t.isName)(b,"Metadata")&&(0,t.isName)(f,"XML"))try{v=(0,s.stringToUTF8String)((0,s.bytesToString)(m.getBytes()))}catch(p){if(p instanceof s.MissingDataException)throw p;(0,s.info)("Skipping invalid metadata.")}}return(0,s.shadow)(this,"metadata",v)},get toplevelPagesDict(){var R=this.catDict.get("Pages");if(!(0,t.isDict)(R))throw new s.FormatError("invalid top-level pages dictionary");return(0,s.shadow)(this,"toplevelPagesDict",R)},get documentOutline(){var R=null;try{R=this.readDocumentOutline()}catch(g){if(g instanceof s.MissingDataException)throw g;(0,s.warn)("Unable to read document outline")}return(0,s.shadow)(this,"documentOutline",R)},readDocumentOutline:function(){var g=this.catDict.get("Outlines");if(!(0,t.isDict)(g)||(g=g.getRaw("First"),!(0,t.isRef)(g)))return null;var m={items:[]},v=[{obj:g,parent:m}],b=new t.RefSet;b.put(g);for(var f=this.xref,p=new Uint8Array(3);v.length>0;){var h=v.shift(),_=f.fetchIfRef(h.obj);if(_!==null){if(!_.has("Title"))throw new s.FormatError("Invalid outline item");var I={url:null,dest:null};T.parseDestDictionary({destDict:_,resultObj:I,docBaseUrl:this.pdfManager.docBaseUrl});var W=_.get("Title"),q=_.get("F")||0,B=_.getArray("C"),N=p;Array.isArray(B)&&B.length===3&&(B[0]!==0||B[1]!==0||B[2]!==0)&&(N=c.ColorSpace.singletons.rgb.getRgb(B,0));var L={dest:I.dest,url:I.url,unsafeUrl:I.unsafeUrl,newWindow:I.newWindow,title:(0,s.stringToPDFString)(W),color:N,count:_.get("Count"),bold:!!(q&2),italic:!!(q&1),items:[]};h.parent.items.push(L),g=_.getRaw("First"),(0,t.isRef)(g)&&!b.has(g)&&(v.push({obj:g,parent:L}),b.put(g)),g=_.getRaw("Next"),(0,t.isRef)(g)&&!b.has(g)&&(v.push({obj:g,parent:h.parent}),b.put(g))}}return m.items.length>0?m.items:null},get numPages(){var R=this.toplevelPagesDict.get("Count");if(!Number.isInteger(R))throw new s.FormatError("page count in top level pages object is not an integer");return(0,s.shadow)(this,"numPages",R)},get destinations(){function R(I){return(0,t.isDict)(I)?I.get("D"):I}var g=this.xref,m={},v,b,f=this.catDict.get("Names");if(f&&f.has("Dests")?v=f.getRaw("Dests"):this.catDict.has("Dests")&&(b=this.catDict.get("Dests")),b&&(f=b,f.forEach(function(W,q){q&&(m[W]=R(q))})),v){var p=new V(v,g),h=p.getAll();for(var _ in h)m[_]=R(h[_])}return(0,s.shadow)(this,"destinations",m)},getDestination:function(g){function m(W){return(0,t.isDict)(W)?W.get("D"):W}var v=this.xref,b=null,f,p,h=this.catDict.get("Names");if(h&&h.has("Dests")?f=h.getRaw("Dests"):this.catDict.has("Dests")&&(p=this.catDict.get("Dests")),p){var _=p.get(g);_&&(b=m(_))}if(f){var I=new V(f,v);b=m(I.get(g))}return b},get pageLabels(){var R=null;try{R=this.readPageLabels()}catch(g){if(g instanceof s.MissingDataException)throw g;(0,s.warn)("Unable to read page labels.")}return(0,s.shadow)(this,"pageLabels",R)},readPageLabels:function(){var g=this.catDict.getRaw("PageLabels");if(!g)return null;for(var m=new Array(this.numPages),v=null,b="",f=new U(g,this.xref),p=f.getAll(),h="",_=1,I=0,W=this.numPages;I<W;I++){if(I in p){var q=p[I];if(!(0,t.isDict)(q))throw new s.FormatError("The PageLabel is not a dictionary.");var B=q.get("Type");if(B&&!(0,t.isName)(B,"PageLabel"))throw new s.FormatError("Invalid type in PageLabel dictionary.");var N=q.get("S");if(N&&!(0,t.isName)(N))throw new s.FormatError("Invalid style in PageLabel dictionary.");v=N?N.name:null;var L=q.get("P");if(L&&!(0,s.isString)(L))throw new s.FormatError("Invalid prefix in PageLabel dictionary.");b=L?(0,s.stringToPDFString)(L):"";var P=q.get("St");if(P&&!(Number.isInteger(P)&&P>=1))throw new s.FormatError("Invalid start in PageLabel dictionary.");_=P||1}switch(v){case"D":h=_;break;case"R":case"r":h=s.Util.toRoman(_,v==="r");break;case"A":case"a":for(var O=26,E=65,w=97,A=v==="a"?w:E,M=_-1,j=String.fromCharCode(A+M%O),C=[],x=0,F=M/O|0;x<=F;x++)C.push(j);h=C.join("");break;default:if(v)throw new s.FormatError('Invalid style "'+v+'" in PageLabel dictionary.')}m[I]=b+h,h="",_++}return m},get pageMode(){var R=this.catDict.get("PageMode"),g="UseNone";if((0,t.isName)(R))switch(R.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":g=R.name}return(0,s.shadow)(this,"pageMode",g)},get attachments(){var R=this.xref,g=null,m,v=this.catDict.get("Names");if(v&&(m=v.getRaw("EmbeddedFiles")),m){var b=new V(m,R),f=b.getAll();for(var p in f){var h=new z(f[p],R);g||(g=Object.create(null)),g[(0,s.stringToPDFString)(p)]=h.serializable}}return(0,s.shadow)(this,"attachments",g)},get javaScript(){var R=this.xref,g=this.catDict.get("Names"),m=[];function v(q){var B=q.get("S");if((0,t.isName)(B,"JavaScript")){var N=q.get("JS");if((0,t.isStream)(N))N=(0,s.bytesToString)(N.getBytes());else if(!(0,s.isString)(N))return;m.push((0,s.stringToPDFString)(N))}}if(g&&g.has("JavaScript")){var b=new V(g.getRaw("JavaScript"),R),f=b.getAll();for(var p in f){var h=f[p];(0,t.isDict)(h)&&v(h)}}var _=this.catDict.get("OpenAction");if((0,t.isDict)(_,"Action")){var I=_.get("S");if((0,t.isName)(I,"Named")){var W=_.get("N");(0,t.isName)(W,"Print")&&m.push("print({});")}else v(_)}return(0,s.shadow)(this,"javaScript",m)},cleanup:function(){var g=this;this.pageKidsCountCache.clear();var m=[];return this.fontCache.forEach(function(v){m.push(v)}),Promise.all(m).then(function(v){for(var b=0,f=v.length;b<f;b++){var p=v[b].dict;delete p.translated}g.fontCache.clear(),g.builtInCMapCache=Object.create(null)})},getPage:function(g){var m=this;return g in this.pagePromises||(this.pagePromises[g]=this.getPageDict(g).then(function(v){var b=i(v,2),f=b[0],p=b[1];return m.pageFactory.createPage(g,f,p,m.fontCache,m.builtInCMapCache)})),this.pagePromises[g]},getPageDict:function(g){var m=(0,s.createPromiseCapability)(),v=[this.catDict.getRaw("Pages")],b,f=0,p=this.xref,h=this.pageKidsCountCache;function _(){for(;v.length;){var I=v.pop();if((0,t.isRef)(I)){if(b=h.get(I),b>0&&f+b<g){f+=b;continue}p.fetchAsync(I).then(function(N){if((0,t.isDict)(N,"Page")||(0,t.isDict)(N)&&!N.has("Kids")){g===f?(I&&!h.has(I)&&h.put(I,1),m.resolve([N,I])):(f++,_());return}v.push(N),_()},m.reject);return}if(!(0,t.isDict)(I)){m.reject(new s.FormatError("page dictionary kid reference points to wrong type of object"));return}b=I.get("Count");var W=I.objId;if(W&&!h.has(W)&&h.put(W,b),f+b<=g){f+=b;continue}var q=I.get("Kids");if(!Array.isArray(q)){m.reject(new s.FormatError("page dictionary kids object is not an array"));return}for(var B=q.length-1;B>=0;B--)v.push(q[B])}m.reject(new Error("Page index "+g+" not found."))}return _(),m.promise},getPageIndex:function(g){var m=this.xref;function v(p){var h=0,_;return m.fetchAsync(p).then(function(I){if((0,t.isRefsEqual)(p,g)&&!(0,t.isDict)(I,"Page")&&!((0,t.isDict)(I)&&!I.has("Type")&&I.has("Contents")))throw new s.FormatError("The reference does not point to a /Page Dict.");if(!I)return null;if(!(0,t.isDict)(I))throw new s.FormatError("node must be a Dict.");return _=I.getRaw("Parent"),I.getAsync("Parent")}).then(function(I){if(!I)return null;if(!(0,t.isDict)(I))throw new s.FormatError("parent must be a Dict.");return I.getAsync("Kids")}).then(function(I){if(!I)return null;for(var W=[],q=!1,B=0;B<I.length;B++){var N=I[B];if(!(0,t.isRef)(N))throw new s.FormatError("kid must be a Ref.");if(N.num===p.num){q=!0;break}W.push(m.fetchAsync(N).then(function(L){if(L.has("Count")){var P=L.get("Count");h+=P}else h++}))}if(!q)throw new s.FormatError("kid ref not found in parents kids");return Promise.all(W).then(function(){return[h,_]})})}var b=0;function f(p){return v(p).then(function(h){if(!h)return b;var _=h[0],I=h[1];return b+=_,f(I)})}return f(g)}},T.parseDestDictionary=function(g){function m(x){return x.indexOf("www.")===0?"http://"+x:x}function v(x){try{return(0,s.stringToUTF8String)(x)}catch{return x}}var b=g.destDict;if(!(0,t.isDict)(b)){(0,s.warn)('parseDestDictionary: "destDict" must be a dictionary.');return}var f=g.resultObj;if((typeof f>"u"?"undefined":a(f))!=="object"){(0,s.warn)('parseDestDictionary: "resultObj" must be an object.');return}var p=g.docBaseUrl||null,h=b.get("A"),_,I;if(!(0,t.isDict)(h)&&b.has("Dest")&&(h=b.get("Dest")),(0,t.isDict)(h)){var W=h.get("S");if(!(0,t.isName)(W)){(0,s.warn)("parseDestDictionary: Invalid type in Action dictionary.");return}var q=W.name;switch(q){case"URI":_=h.get("URI"),(0,t.isName)(_)?_="/"+_.name:(0,s.isString)(_)&&(_=m(_));break;case"GoTo":I=h.get("D");break;case"Launch":case"GoToR":var B=h.get("F");(0,t.isDict)(B)?_=B.get("F")||null:(0,s.isString)(B)&&(_=B);var N=h.get("D");if(N&&((0,t.isName)(N)&&(N=N.name),(0,s.isString)(_))){var L=_.split("#")[0];(0,s.isString)(N)?_=L+"#"+N:Array.isArray(N)&&(_=L+"#"+JSON.stringify(N))}var P=h.get("NewWindow");(0,s.isBool)(P)&&(f.newWindow=P);break;case"Named":var O=h.get("N");(0,t.isName)(O)&&(f.action=O.name);break;case"JavaScript":var E=h.get("JS"),w;if((0,t.isStream)(E)?w=(0,s.bytesToString)(E.getBytes()):(0,s.isString)(E)&&(w=E),w){var A=["app.launchURL","window.open"],M=new RegExp("^\\s*("+A.join("|").split(".").join("\\.")+`)\\((?:'|")([^'"]*)(?:'|")(?:,\\s*(\\w+)\\)|\\))`,"i"),j=M.exec((0,s.stringToPDFString)(w));if(j&&j[2]){_=j[2],j[3]==="true"&&j[1]==="app.launchURL"&&(f.newWindow=!0);break}}default:(0,s.warn)('parseDestDictionary: Unsupported Action type "'+q+'".');break}}else b.has("Dest")&&(I=b.get("Dest"));if((0,s.isString)(_)){_=v(_);var C=(0,s.createValidAbsoluteUrl)(_,p);C&&(f.url=C.href),f.unsafeUrl=_}I&&((0,t.isName)(I)&&(I=I.name),((0,s.isString)(I)||Array.isArray(I))&&(f.dest=I))},T}(),u=function(){function T(R,g){this.stream=R,this.pdfManager=g,this.entries=[],this.xrefstms=Object.create(null),this.cache=[],this.stats={streamTypes:[],fontTypes:[]}}return T.prototype={setStartXRef:function(g){this.startXRefQueue=[g]},parse:function(g){var m;g?((0,s.warn)("Indexing all PDF objects"),m=this.indexObjects()):m=this.readXRef(),m.assignXref(this),this.trailer=m;var v=m.get("Encrypt");if((0,t.isDict)(v)){var b=m.get("ID"),f=b&&b.length?b[0]:"";v.suppressEncryption=!0,this.encrypt=new d.CipherTransformFactory(v,f,this.pdfManager.password)}if(!(this.root=m.get("Root")))throw new s.FormatError("Invalid root reference")},processXRefTable:function(g){"tableState"in this||(this.tableState={entryNum:0,streamPos:g.lexer.stream.pos,parserBuf1:g.buf1,parserBuf2:g.buf2});var m=this.readXRefTable(g);if(!(0,t.isCmd)(m,"trailer"))throw new s.FormatError("Invalid XRef table: could not find trailer dictionary");var v=g.getObj();if(!(0,t.isDict)(v)&&v.dict&&(v=v.dict),!(0,t.isDict)(v))throw new s.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,v},readXRefTable:function(g){var m=g.lexer.stream,v=this.tableState;m.pos=v.streamPos,g.buf1=v.parserBuf1,g.buf2=v.parserBuf2;for(var b;;){if(!("firstEntryNum"in v)||!("entryCount"in v)){if((0,t.isCmd)(b=g.getObj(),"trailer"))break;v.firstEntryNum=b,v.entryCount=g.getObj()}var f=v.firstEntryNum,p=v.entryCount;if(!Number.isInteger(f)||!Number.isInteger(p))throw new s.FormatError("Invalid XRef table: wrong types in subsection header");for(var h=v.entryNum;h<p;h++){v.streamPos=m.pos,v.entryNum=h,v.parserBuf1=g.buf1,v.parserBuf2=g.buf2;var _={};_.offset=g.getObj(),_.gen=g.getObj();var I=g.getObj();if((0,t.isCmd)(I,"f")?_.free=!0:(0,t.isCmd)(I,"n")&&(_.uncompressed=!0),!Number.isInteger(_.offset)||!Number.isInteger(_.gen)||!(_.free||_.uncompressed))throw new s.FormatError("Invalid entry in XRef subsection: "+f+", "+p);h===0&&_.free&&f===1&&(f=0),this.entries[h+f]||(this.entries[h+f]=_)}v.entryNum=0,v.streamPos=m.pos,v.parserBuf1=g.buf1,v.parserBuf2=g.buf2,delete v.firstEntryNum,delete v.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new s.FormatError("Invalid XRef table: unexpected first object");return b},processXRefStream:function(g){if(!("streamState"in this)){var m=g.dict,v=m.get("W"),b=m.get("Index");b||(b=[0,m.get("Size")]),this.streamState={entryRanges:b,byteWidths:v,entryNum:0,streamPos:g.pos}}return this.readXRefStream(g),delete this.streamState,g.dict},readXRefStream:function(g){var m,v,b=this.streamState;g.pos=b.streamPos;for(var f=b.byteWidths,p=f[0],h=f[1],_=f[2],I=b.entryRanges;I.length>0;){var W=I[0],q=I[1];if(!Number.isInteger(W)||!Number.isInteger(q))throw new s.FormatError("Invalid XRef range fields: "+W+", "+q);if(!Number.isInteger(p)||!Number.isInteger(h)||!Number.isInteger(_))throw new s.FormatError("Invalid XRef entry fields length: "+W+", "+q);for(m=b.entryNum;m<q;++m){b.entryNum=m,b.streamPos=g.pos;var B=0,N=0,L=0;for(v=0;v<p;++v)B=B<<8|g.getByte();for(p===0&&(B=1),v=0;v<h;++v)N=N<<8|g.getByte();for(v=0;v<_;++v)L=L<<8|g.getByte();var P={};switch(P.offset=N,P.gen=L,B){case 0:P.free=!0;break;case 1:P.uncompressed=!0;break;case 2:break;default:throw new s.FormatError("Invalid XRef entry type: "+B)}this.entries[W+m]||(this.entries[W+m]=P)}b.entryNum=0,b.streamPos=g.pos,I.splice(0,2)}},indexObjects:function(){var g=9,m=10,v=13,b=32,f=37,p=60;function h(ae,pe){for(var se="",ue=ae[pe];ue!==m&&ue!==v&&ue!==p&&!(++pe>=ae.length);)se+=String.fromCharCode(ue),ue=ae[pe];return se}function _(ae,pe,se){for(var ue=se.length,le=ae.length,ie=0;pe<le;){for(var de=0;de<ue&&ae[pe+de]===se[de];)++de;if(de>=ue)break;pe++,ie++}return ie}var I=/^(\d+)\s+(\d+)\s+obj\b/,W=new Uint8Array([116,114,97,105,108,101,114]),q=new Uint8Array([115,116,97,114,116,120,114,101,102]),B=new Uint8Array([101,110,100,111,98,106]),N=new Uint8Array([47,88,82,101,102]);this.entries.length=0;var L=this.stream;L.pos=0;for(var P=L.getBytes(),O=L.start,E=P.length,w=[],A=[];O<E;){var M=P[O];if(M===g||M===m||M===v||M===b){++O;continue}if(M===f){do{if(++O,O>=E)break;M=P[O]}while(M!==m&&M!==v);continue}var j=h(P,O),C;if(j.indexOf("xref")===0&&(j.length===4||/\s/.test(j[4])))O+=_(P,O,W),w.push(O),O+=_(P,O,q);else if(C=I.exec(j)){typeof this.entries[C[1]]>"u"&&(this.entries[C[1]]={offset:O-L.start,gen:C[2]|0,uncompressed:!0});var x=_(P,O,B)+7,F=P.subarray(O,O+x),$=_(F,0,N);$<x&&F[$+5]<64&&(A.push(O-L.start),this.xrefstms[O-L.start]=1),O+=x}else j.indexOf("trailer")===0&&(j.length===7||/\s/.test(j[7]))?(w.push(O),O+=_(P,O,q)):O+=j.length+1}var G,Z;for(G=0,Z=A.length;G<Z;++G)this.startXRefQueue.push(A[G]),this.readXRef(!0);var J;for(G=0,Z=w.length;G<Z;++G){L.pos=w[G];var Y=new o.Parser(new o.Lexer(L),!0,this,!0),ee=Y.getObj();if((0,t.isCmd)(ee,"trailer")&&(J=Y.getObj(),!!(0,t.isDict)(J)&&J.has("ID")))return J}if(J)return J;throw new s.InvalidPDFException("Invalid PDF structure")},readXRef:function(g){var m=this.stream,v=Object.create(null);try{for(;this.startXRefQueue.length;){var b=this.startXRefQueue[0];if(v[b]){(0,s.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}v[b]=!0,m.pos=b+m.start;var f=new o.Parser(new o.Lexer(m),!0,this),p=f.getObj(),h;if((0,t.isCmd)(p,"xref")){if(h=this.processXRefTable(f),this.topDict||(this.topDict=h),p=h.get("XRefStm"),Number.isInteger(p)){var _=p;_ in this.xrefstms||(this.xrefstms[_]=1,this.startXRefQueue.push(_))}}else if(Number.isInteger(p)){if(!Number.isInteger(f.getObj())||!(0,t.isCmd)(f.getObj(),"obj")||!(0,t.isStream)(p=f.getObj()))throw new s.FormatError("Invalid XRef stream");if(h=this.processXRefStream(p),this.topDict||(this.topDict=h),!h)throw new s.FormatError("Failed to read XRef stream")}else throw new s.FormatError("Invalid XRef stream header");p=h.get("Prev"),Number.isInteger(p)?this.startXRefQueue.push(p):(0,t.isRef)(p)&&this.startXRefQueue.push(p.num),this.startXRefQueue.shift()}return this.topDict}catch(I){if(I instanceof s.MissingDataException)throw I;(0,s.info)("(while reading XRef): "+I)}if(!g)throw new s.XRefParseException},getEntry:function(g){var m=this.entries[g];return m&&!m.free&&m.offset?m:null},fetchIfRef:function(g,m){return(0,t.isRef)(g)?this.fetch(g,m):g},fetch:function(g,m){if(!(0,t.isRef)(g))throw new Error("ref object is not a reference");var v=g.num;if(v in this.cache){var b=this.cache[v];return b instanceof t.Dict&&!b.objId&&(b.objId=g.toString()),b}var f=this.getEntry(v);return f===null?this.cache[v]=null:(f.uncompressed?f=this.fetchUncompressed(g,f,m):f=this.fetchCompressed(f,m),(0,t.isDict)(f)?f.objId=g.toString():(0,t.isStream)(f)&&(f.dict.objId=g.toString()),f)},fetchUncompressed:function(g,m,v){var b=g.gen,f=g.num;if(m.gen!==b)throw new s.FormatError("inconsistent generation in XRef");var p=this.stream.makeSubStream(m.offset+this.stream.start),h=new o.Parser(new o.Lexer(p),!0,this),_=h.getObj(),I=h.getObj(),W=h.getObj();if(Number.isInteger(_)||(_=parseInt(_,10)),Number.isInteger(I)||(I=parseInt(I,10)),_!==f||I!==b||!(0,t.isCmd)(W))throw new s.FormatError("bad XRef entry");if(W.cmd!=="obj"){if(W.cmd.indexOf("obj")===0&&(f=parseInt(W.cmd.substring(3),10),!Number.isNaN(f)))return f;throw new s.FormatError("bad XRef entry")}return this.encrypt&&!v?m=h.getObj(this.encrypt.createCipherTransform(f,b)):m=h.getObj(),(0,t.isStream)(m)||(this.cache[f]=m),m},fetchCompressed:function(g,m){var v=g.offset,b=this.fetch(new t.Ref(v,0));if(!(0,t.isStream)(b))throw new s.FormatError("bad ObjStm stream");var f=b.dict.get("First"),p=b.dict.get("N");if(!Number.isInteger(f)||!Number.isInteger(p))throw new s.FormatError("invalid first and n parameters for ObjStm stream");var h=new o.Parser(new o.Lexer(b),!1,this);h.allowStreams=!0;var _,I=[],W,q=[];for(_=0;_<p;++_){if(W=h.getObj(),!Number.isInteger(W))throw new s.FormatError("invalid object number in the ObjStm stream: "+W);q.push(W);var B=h.getObj();if(!Number.isInteger(B))throw new s.FormatError("invalid object offset in the ObjStm stream: "+B)}for(_=0;_<p;++_){I.push(h.getObj()),(0,t.isCmd)(h.buf1,"endobj")&&h.shift(),W=q[_];var N=this.entries[W];N&&N.offset===v&&N.gen===_&&(this.cache[W]=I[_])}if(g=I[g.gen],g===void 0)throw new s.FormatError("bad XRef entry for compressed object");return g},fetchIfRefAsync:function(g,m){return(0,t.isRef)(g)?this.fetchAsync(g,m):Promise.resolve(g)},fetchAsync:function(g,m){var v=this.stream.manager,b=this;return new Promise(function f(p,h){try{p(b.fetch(g,m))}catch(_){if(_ instanceof s.MissingDataException){v.requestRange(_.begin,_.end).then(function(){f(p,h)},h);return}h(_)}})},getCatalogObj:function(){return this.root}},T}(),S=function(){function T(R,g){throw new Error("Cannot initialize NameOrNumberTree.")}return T.prototype={getAll:function(){var g=Object.create(null);if(!this.root)return g;var m=this.xref,v=new t.RefSet;v.put(this.root);for(var b=[this.root];b.length>0;){var f,p,h=m.fetchIfRef(b.shift());if((0,t.isDict)(h)){if(h.has("Kids")){var _=h.get("Kids");for(f=0,p=_.length;f<p;f++){var I=_[f];if(v.has(I))throw new s.FormatError('Duplicate entry in "'+this._type+'" tree.');b.push(I),v.put(I)}continue}var W=h.get(this._type);if(Array.isArray(W))for(f=0,p=W.length;f<p;f+=2)g[m.fetchIfRef(W[f])]=m.fetchIfRef(W[f+1])}}return g},get:function(g){if(!this.root)return null;for(var m=this.xref,v=m.fetchIfRef(this.root),b=0,f=10,p,h,_;v.has("Kids");){if(++b>f)return(0,s.warn)('Search depth limit reached for "'+this._type+'" tree.'),null;var I=v.get("Kids");if(!Array.isArray(I))return null;for(p=0,h=I.length-1;p<=h;){_=p+h>>1;var W=m.fetchIfRef(I[_]),q=W.get("Limits");if(g<m.fetchIfRef(q[0]))h=_-1;else if(g>m.fetchIfRef(q[1]))p=_+1;else{v=m.fetchIfRef(I[_]);break}}if(p>h)return null}var B=v.get(this._type);if(Array.isArray(B))for(p=0,h=B.length-2;p<=h;){_=p+h&-2;var N=m.fetchIfRef(B[_]);if(g<N)h=_-2;else if(g>N)p=_+2;else return m.fetchIfRef(B[_+1])}return null}},T}(),V=function(){function T(R,g){this.root=R,this.xref=g,this._type="Names"}return s.Util.inherit(T,S,{}),T}(),U=function(){function T(R,g){this.root=R,this.xref=g,this._type="Nums"}return s.Util.inherit(T,S,{}),T}(),z=function(){function T(g,m){!g||!(0,t.isDict)(g)||(this.xref=m,this.root=g,g.has("FS")&&(this.fs=g.get("FS")),this.description=g.has("Desc")?(0,s.stringToPDFString)(g.get("Desc")):"",g.has("RF")&&(0,s.warn)("Related file specifications are not supported"),this.contentAvailable=!0,g.has("EF")||(this.contentAvailable=!1,(0,s.warn)("Non-embedded file specifications are not supported")))}function R(g){return g.has("UF")?g.get("UF"):g.has("F")?g.get("F"):g.has("Unix")?g.get("Unix"):g.has("Mac")?g.get("Mac"):g.has("DOS")?g.get("DOS"):null}return T.prototype={get filename(){if(!this._filename&&this.root){var g=R(this.root)||"unnamed";this._filename=(0,s.stringToPDFString)(g).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename},get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=R(this.root.get("EF")));var g=null;if(this.contentRef){var m=this.xref,v=m.fetchIfRef(this.contentRef);v&&(0,t.isStream)(v)?g=v.getBytes():(0,s.warn)("Embedded file specification points to non-existing/invalid content")}else(0,s.warn)("Embedded file specification does not have a content");return g},get serializable(){return{filename:this.filename,content:this.content}}},T}(),D=function(){function k(g){return(0,t.isRef)(g)||(0,t.isDict)(g)||Array.isArray(g)||(0,t.isStream)(g)}function T(g,m){if((0,t.isDict)(g)||(0,t.isStream)(g))for(var v=(0,t.isDict)(g)?g:g.dict,b=v.getKeys(),f=0,p=b.length;f<p;f++){var h=v.getRaw(b[f]);k(h)&&m.push(h)}else if(Array.isArray(g))for(var _=0,I=g.length;_<I;_++){var W=g[_];k(W)&&m.push(W)}}function R(g,m,v){this.dict=g,this.keys=m,this.xref=v,this.refSet=null,this.capability=null}return R.prototype={load:function(){if(this.capability=(0,s.createPromiseCapability)(),!(this.xref.stream instanceof l.ChunkedStream)||this.xref.stream.getMissingChunks().length===0)return this.capability.resolve(),this.capability.promise;var m=this.keys,v=this.dict;this.refSet=new t.RefSet;for(var b=[],f=0,p=m.length;f<p;f++){var h=v.getRaw(m[f]);h!==void 0&&b.push(h)}return this._walk(b),this.capability.promise},_walk:function(m){for(var v=this,b=[],f=[];m.length;){var p=m.pop();if((0,t.isRef)(p)){if(this.refSet.has(p))continue;try{this.refSet.put(p),p=this.xref.fetch(p)}catch(B){if(!(B instanceof s.MissingDataException))throw B;b.push(p),f.push({begin:B.begin,end:B.end})}}if(p&&p.getBaseStreams){for(var h=p.getBaseStreams(),_=!1,I=0,W=h.length;I<W;I++){var q=h[I];q.getMissingChunks&&q.getMissingChunks().length&&(_=!0,f.push({begin:q.start,end:q.end}))}_&&b.push(p)}T(p,m)}if(f.length){this.xref.stream.manager.requestRanges(f).then(function(){for(var B=0,N=b.length;B<N;B++){var L=b[B];(0,t.isRef)(L)&&v.refSet.remove(L)}v._walk(b)},this.capability.reject);return}this.refSet=null,this.capability.resolve()}},R}();e.Catalog=y,e.ObjectLoader=D,e.XRef=u,e.FileSpec=z},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JpxImage=void 0;var a=r(0),i=r(75),s=function(){function l(d){this.message="JPX error: "+d}return l.prototype=new Error,l.prototype.name="JpxError",l.constructor=l,l}(),t=function(){var l={LL:0,LH:1,HL:1,HH:2};function d(){this.failOnCorruptedImage=!1}d.prototype={parse:function(O){var E=(0,a.readUint16)(O,0);if(E===65359){this.parseCodestream(O,0,O.length);return}for(var w=0,A=O.length;w<A;){var M=8,j=(0,a.readUint32)(O,w),C=(0,a.readUint32)(O,w+4);if(w+=M,j===1&&(j=(0,a.readUint32)(O,w)*4294967296+(0,a.readUint32)(O,w+4),w+=8,M+=8),j===0&&(j=A-w+M),j<M)throw new s("Invalid box field size");var x=j-M,F=!0;switch(C){case 1785737832:F=!1;break;case 1668246642:var $=O[w];if($===1){var G=(0,a.readUint32)(O,w+3);switch(G){case 16:case 17:case 18:break;default:(0,a.warn)("Unknown colorspace "+G);break}}else $===2&&(0,a.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(O,w,w+x);break;case 1783636e3:(0,a.readUint32)(O,w)!==218793738&&(0,a.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var Z=String.fromCharCode(C>>24&255,C>>16&255,C>>8&255,C&255);(0,a.warn)("Unsupported header type "+C+" ("+Z+")");break}F&&(w+=x)}},parseImageProperties:function(O){for(var E=O.getByte();E>=0;){var w=E;E=O.getByte();var A=w<<8|E;if(A===65361){O.skip(4);var M=O.getInt32()>>>0,j=O.getInt32()>>>0,C=O.getInt32()>>>0,x=O.getInt32()>>>0;O.skip(16);var F=O.getUint16();this.width=M-C,this.height=j-x,this.componentsCount=F,this.bitsPerComponent=8;return}}throw new s("No size marker found in JPX stream")},parseCodestream:function(O,E,w){var A={},M=!1;try{for(var j=E;j+1<w;){var C=(0,a.readUint16)(O,j);j+=2;var x=0,F,$,G,Z,J,Y;switch(C){case 65359:A.mainHeader=!0;break;case 65497:break;case 65361:x=(0,a.readUint16)(O,j);var ee={};ee.Xsiz=(0,a.readUint32)(O,j+4),ee.Ysiz=(0,a.readUint32)(O,j+8),ee.XOsiz=(0,a.readUint32)(O,j+12),ee.YOsiz=(0,a.readUint32)(O,j+16),ee.XTsiz=(0,a.readUint32)(O,j+20),ee.YTsiz=(0,a.readUint32)(O,j+24),ee.XTOsiz=(0,a.readUint32)(O,j+28),ee.YTOsiz=(0,a.readUint32)(O,j+32);var ae=(0,a.readUint16)(O,j+36);ee.Csiz=ae;var pe=[];F=j+38;for(var se=0;se<ae;se++){var ue={precision:(O[F]&127)+1,isSigned:!!(O[F]&128),XRsiz:O[F+1],YRsiz:O[F+1]};c(ue,ee),pe.push(ue)}A.SIZ=ee,A.components=pe,y(A,pe),A.QCC=[],A.COC=[];break;case 65372:x=(0,a.readUint16)(O,j);var le={};switch(F=j+2,$=O[F++],$&31){case 0:Z=8,J=!0;break;case 1:Z=16,J=!1;break;case 2:Z=16,J=!0;break;default:throw new Error("Invalid SQcd value "+$)}for(le.noQuantization=Z===8,le.scalarExpounded=J,le.guardBits=$>>5,G=[];F<x+j;){var ie={};Z===8?(ie.epsilon=O[F++]>>3,ie.mu=0):(ie.epsilon=O[F]>>3,ie.mu=(O[F]&7)<<8|O[F+1],F+=2),G.push(ie)}le.SPqcds=G,A.mainHeader?A.QCD=le:(A.currentTile.QCD=le,A.currentTile.QCC=[]);break;case 65373:x=(0,a.readUint16)(O,j);var de={};F=j+2;var fe;switch(A.SIZ.Csiz<257?fe=O[F++]:(fe=(0,a.readUint16)(O,F),F+=2),$=O[F++],$&31){case 0:Z=8,J=!0;break;case 1:Z=16,J=!1;break;case 2:Z=16,J=!0;break;default:throw new Error("Invalid SQcd value "+$)}for(de.noQuantization=Z===8,de.scalarExpounded=J,de.guardBits=$>>5,G=[];F<x+j;)ie={},Z===8?(ie.epsilon=O[F++]>>3,ie.mu=0):(ie.epsilon=O[F]>>3,ie.mu=(O[F]&7)<<8|O[F+1],F+=2),G.push(ie);de.SPqcds=G,A.mainHeader?A.QCC[fe]=de:A.currentTile.QCC[fe]=de;break;case 65362:x=(0,a.readUint16)(O,j);var he={};F=j+2;var Se=O[F++];he.entropyCoderWithCustomPrecincts=!!(Se&1),he.sopMarkerUsed=!!(Se&2),he.ephMarkerUsed=!!(Se&4),he.progressionOrder=O[F++],he.layersCount=(0,a.readUint16)(O,F),F+=2,he.multipleComponentTransform=O[F++],he.decompositionLevelsCount=O[F++],he.xcb=(O[F++]&15)+2,he.ycb=(O[F++]&15)+2;var Ce=O[F++];if(he.selectiveArithmeticCodingBypass=!!(Ce&1),he.resetContextProbabilities=!!(Ce&2),he.terminationOnEachCodingPass=!!(Ce&4),he.verticalyStripe=!!(Ce&8),he.predictableTermination=!!(Ce&16),he.segmentationSymbolUsed=!!(Ce&32),he.reversibleTransformation=O[F++],he.entropyCoderWithCustomPrecincts){for(var Ae=[];F<x+j;){var Ee=O[F++];Ae.push({PPx:Ee&15,PPy:Ee>>4})}he.precinctsSizes=Ae}var ke=[];if(he.selectiveArithmeticCodingBypass&&ke.push("selectiveArithmeticCodingBypass"),he.resetContextProbabilities&&ke.push("resetContextProbabilities"),he.terminationOnEachCodingPass&&ke.push("terminationOnEachCodingPass"),he.verticalyStripe&&ke.push("verticalyStripe"),he.predictableTermination&&ke.push("predictableTermination"),ke.length>0)throw M=!0,new Error("Unsupported COD options ("+ke.join(", ")+")");A.mainHeader?A.COD=he:(A.currentTile.COD=he,A.currentTile.COC=[]);break;case 65424:x=(0,a.readUint16)(O,j),Y={},Y.index=(0,a.readUint16)(O,j+2),Y.length=(0,a.readUint32)(O,j+4),Y.dataEnd=Y.length+j-2,Y.partIndex=O[j+8],Y.partsCount=O[j+9],A.mainHeader=!1,Y.partIndex===0&&(Y.COD=A.COD,Y.COC=A.COC.slice(0),Y.QCD=A.QCD,Y.QCC=A.QCC.slice(0)),A.currentTile=Y;break;case 65427:Y=A.currentTile,Y.partIndex===0&&(_(A,Y.index),v(A)),x=Y.dataEnd-j,b(A,O,j,x);break;case 65365:case 65367:case 65368:case 65380:x=(0,a.readUint16)(O,j);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+C.toString(16))}j+=x}}catch(Fe){if(M||this.failOnCorruptedImage)throw new s(Fe.message);(0,a.warn)("JPX: Trying to recover from: "+Fe.message)}this.tiles=h(A),this.width=A.SIZ.Xsiz-A.SIZ.XOsiz,this.height=A.SIZ.Ysiz-A.SIZ.YOsiz,this.componentsCount=A.SIZ.Csiz}};function c(P,O){P.x0=Math.ceil(O.XOsiz/P.XRsiz),P.x1=Math.ceil(O.Xsiz/P.XRsiz),P.y0=Math.ceil(O.YOsiz/P.YRsiz),P.y1=Math.ceil(O.Ysiz/P.YRsiz),P.width=P.x1-P.x0,P.height=P.y1-P.y0}function y(P,O){for(var E=P.SIZ,w,A=[],M=Math.ceil((E.Xsiz-E.XTOsiz)/E.XTsiz),j=Math.ceil((E.Ysiz-E.YTOsiz)/E.YTsiz),C=0;C<j;C++)for(var x=0;x<M;x++)w={},w.tx0=Math.max(E.XTOsiz+x*E.XTsiz,E.XOsiz),w.ty0=Math.max(E.YTOsiz+C*E.YTsiz,E.YOsiz),w.tx1=Math.min(E.XTOsiz+(x+1)*E.XTsiz,E.Xsiz),w.ty1=Math.min(E.YTOsiz+(C+1)*E.YTsiz,E.Ysiz),w.width=w.tx1-w.tx0,w.height=w.ty1-w.ty0,w.components=[],A.push(w);P.tiles=A;for(var F=E.Csiz,$=0,G=F;$<G;$++)for(var Z=O[$],J=0,Y=A.length;J<Y;J++){var ee={};w=A[J],ee.tcx0=Math.ceil(w.tx0/Z.XRsiz),ee.tcy0=Math.ceil(w.ty0/Z.YRsiz),ee.tcx1=Math.ceil(w.tx1/Z.XRsiz),ee.tcy1=Math.ceil(w.ty1/Z.YRsiz),ee.width=ee.tcx1-ee.tcx0,ee.height=ee.tcy1-ee.tcy0,w.components[$]=ee}}function u(P,O,E){var w=O.codingStyleParameters,A={};return w.entropyCoderWithCustomPrecincts?(A.PPx=w.precinctsSizes[E].PPx,A.PPy=w.precinctsSizes[E].PPy):(A.PPx=15,A.PPy=15),A.xcb_=E>0?Math.min(w.xcb,A.PPx-1):Math.min(w.xcb,A.PPx),A.ycb_=E>0?Math.min(w.ycb,A.PPy-1):Math.min(w.ycb,A.PPy),A}function S(P,O,E){var w=1<<E.PPx,A=1<<E.PPy,M=O.resLevel===0,j=1<<E.PPx+(M?0:-1),C=1<<E.PPy+(M?0:-1),x=O.trx1>O.trx0?Math.ceil(O.trx1/w)-Math.floor(O.trx0/w):0,F=O.try1>O.try0?Math.ceil(O.try1/A)-Math.floor(O.try0/A):0,$=x*F;O.precinctParameters={precinctWidth:w,precinctHeight:A,numprecinctswide:x,numprecinctshigh:F,numprecincts:$,precinctWidthInSubband:j,precinctHeightInSubband:C}}function V(P,O,E){var w=E.xcb_,A=E.ycb_,M=1<<w,j=1<<A,C=O.tbx0>>w,x=O.tby0>>A,F=O.tbx1+M-1>>w,$=O.tby1+j-1>>A,G=O.resolution.precinctParameters,Z=[],J=[],Y,ee,ae,pe;for(ee=x;ee<$;ee++)for(Y=C;Y<F;Y++){ae={cbx:Y,cby:ee,tbx0:M*Y,tby0:j*ee,tbx1:M*(Y+1),tby1:j*(ee+1)},ae.tbx0_=Math.max(O.tbx0,ae.tbx0),ae.tby0_=Math.max(O.tby0,ae.tby0),ae.tbx1_=Math.min(O.tbx1,ae.tbx1),ae.tby1_=Math.min(O.tby1,ae.tby1);var se=Math.floor((ae.tbx0_-O.tbx0)/G.precinctWidthInSubband),ue=Math.floor((ae.tby0_-O.tby0)/G.precinctHeightInSubband);if(pe=se+ue*G.numprecinctswide,ae.precinctNumber=pe,ae.subbandType=O.type,ae.Lblock=3,!(ae.tbx1_<=ae.tbx0_||ae.tby1_<=ae.tby0_)){Z.push(ae);var le=J[pe];le!==void 0?(Y<le.cbxMin?le.cbxMin=Y:Y>le.cbxMax&&(le.cbxMax=Y),ee<le.cbyMin?le.cbxMin=ee:ee>le.cbyMax&&(le.cbyMax=ee)):J[pe]=le={cbxMin:Y,cbyMin:ee,cbxMax:Y,cbyMax:ee},ae.precinct=le}}O.codeblockParameters={codeblockWidth:w,codeblockHeight:A,numcodeblockwide:F-C+1,numcodeblockhigh:$-x+1},O.codeblocks=Z,O.precincts=J}function U(P,O,E){for(var w=[],A=P.subbands,M=0,j=A.length;M<j;M++)for(var C=A[M],x=C.codeblocks,F=0,$=x.length;F<$;F++){var G=x[F];G.precinctNumber===O&&w.push(G)}return{layerNumber:E,codeblocks:w}}function z(P){for(var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=w.codingStyleDefaultParameters.layersCount,M=O.Csiz,j=0,C=0;C<M;C++)j=Math.max(j,w.components[C].codingStyleParameters.decompositionLevelsCount);var x=0,F=0,$=0,G=0;this.nextPacket=function(){for(;x<A;x++){for(;F<=j;F++){for(;$<M;$++){var J=w.components[$];if(!(F>J.codingStyleParameters.decompositionLevelsCount)){for(var Y=J.resolutions[F],ee=Y.precinctParameters.numprecincts;G<ee;){var ae=U(Y,G,x);return G++,ae}G=0}}$=0}F=0}throw new s("Out of packets")}}function D(P){for(var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=w.codingStyleDefaultParameters.layersCount,M=O.Csiz,j=0,C=0;C<M;C++)j=Math.max(j,w.components[C].codingStyleParameters.decompositionLevelsCount);var x=0,F=0,$=0,G=0;this.nextPacket=function(){for(;x<=j;x++){for(;F<A;F++){for(;$<M;$++){var J=w.components[$];if(!(x>J.codingStyleParameters.decompositionLevelsCount)){for(var Y=J.resolutions[x],ee=Y.precinctParameters.numprecincts;G<ee;){var ae=U(Y,G,F);return G++,ae}G=0}}$=0}F=0}throw new s("Out of packets")}}function k(P){var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=w.codingStyleDefaultParameters.layersCount,M=O.Csiz,j,C,x,F,$=0;for(x=0;x<M;x++){var G=w.components[x];$=Math.max($,G.codingStyleParameters.decompositionLevelsCount)}var Z=new Int32Array($+1);for(C=0;C<=$;++C){var J=0;for(x=0;x<M;++x){var Y=w.components[x].resolutions;C<Y.length&&(J=Math.max(J,Y[C].precinctParameters.numprecincts))}Z[C]=J}j=0,C=0,x=0,F=0,this.nextPacket=function(){for(;C<=$;C++){for(;F<Z[C];F++){for(;x<M;x++){var ae=w.components[x];if(!(C>ae.codingStyleParameters.decompositionLevelsCount)){var pe=ae.resolutions[C],se=pe.precinctParameters.numprecincts;if(!(F>=se)){for(;j<A;){var ue=U(pe,F,j);return j++,ue}j=0}}}x=0}F=0}throw new s("Out of packets")}}function T(P){var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=w.codingStyleDefaultParameters.layersCount,M=O.Csiz,j=m(w),C=j,x=0,F=0,$=0,G=0,Z=0;this.nextPacket=function(){for(;Z<C.maxNumHigh;Z++){for(;G<C.maxNumWide;G++){for(;$<M;$++){for(var Y=w.components[$],ee=Y.codingStyleParameters.decompositionLevelsCount;F<=ee;F++){var ae=Y.resolutions[F],pe=j.components[$].resolutions[F],se=g(G,Z,pe,C,ae);if(se!==null){for(;x<A;){var ue=U(ae,se,x);return x++,ue}x=0}}F=0}$=0}G=0}throw new s("Out of packets")}}function R(P){var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=w.codingStyleDefaultParameters.layersCount,M=O.Csiz,j=m(w),C=0,x=0,F=0,$=0,G=0;this.nextPacket=function(){for(;F<M;++F){for(var J=w.components[F],Y=j.components[F],ee=J.codingStyleParameters.decompositionLevelsCount;G<Y.maxNumHigh;G++){for(;$<Y.maxNumWide;$++){for(;x<=ee;x++){var ae=J.resolutions[x],pe=Y.resolutions[x],se=g($,G,pe,Y,ae);if(se!==null){for(;C<A;){var ue=U(ae,se,C);return C++,ue}C=0}}x=0}$=0}G=0}throw new s("Out of packets")}}function g(P,O,E,w,A){var M=P*w.minWidth,j=O*w.minHeight;if(M%E.width!==0||j%E.height!==0)return null;var C=j/E.width*A.precinctParameters.numprecinctswide;return M/E.height+C}function m(P){for(var O=P.components.length,E=Number.MAX_VALUE,w=Number.MAX_VALUE,A=0,M=0,j=new Array(O),C=0;C<O;C++){for(var x=P.components[C],F=x.codingStyleParameters.decompositionLevelsCount,$=new Array(F+1),G=Number.MAX_VALUE,Z=Number.MAX_VALUE,J=0,Y=0,ee=1,ae=F;ae>=0;--ae){var pe=x.resolutions[ae],se=ee*pe.precinctParameters.precinctWidth,ue=ee*pe.precinctParameters.precinctHeight;G=Math.min(G,se),Z=Math.min(Z,ue),J=Math.max(J,pe.precinctParameters.numprecinctswide),Y=Math.max(Y,pe.precinctParameters.numprecinctshigh),$[ae]={width:se,height:ue},ee<<=1}E=Math.min(E,G),w=Math.min(w,Z),A=Math.max(A,J),M=Math.max(M,Y),j[C]={resolutions:$,minWidth:G,minHeight:Z,maxNumWide:J,maxNumHigh:Y}}return{components:j,minWidth:E,minHeight:w,maxNumWide:A,maxNumHigh:M}}function v(P){for(var O=P.SIZ,E=P.currentTile.index,w=P.tiles[E],A=O.Csiz,M=0;M<A;M++){for(var j=w.components[M],C=j.codingStyleParameters.decompositionLevelsCount,x=[],F=[],$=0;$<=C;$++){var G=u(P,j,$),Z={},J=1<<C-$;Z.trx0=Math.ceil(j.tcx0/J),Z.try0=Math.ceil(j.tcy0/J),Z.trx1=Math.ceil(j.tcx1/J),Z.try1=Math.ceil(j.tcy1/J),Z.resLevel=$,S(P,Z,G),x.push(Z);var Y;if($===0)Y={},Y.type="LL",Y.tbx0=Math.ceil(j.tcx0/J),Y.tby0=Math.ceil(j.tcy0/J),Y.tbx1=Math.ceil(j.tcx1/J),Y.tby1=Math.ceil(j.tcy1/J),Y.resolution=Z,V(P,Y,G),F.push(Y),Z.subbands=[Y];else{var ee=1<<C-$+1,ae=[];Y={},Y.type="HL",Y.tbx0=Math.ceil(j.tcx0/ee-.5),Y.tby0=Math.ceil(j.tcy0/ee),Y.tbx1=Math.ceil(j.tcx1/ee-.5),Y.tby1=Math.ceil(j.tcy1/ee),Y.resolution=Z,V(P,Y,G),F.push(Y),ae.push(Y),Y={},Y.type="LH",Y.tbx0=Math.ceil(j.tcx0/ee),Y.tby0=Math.ceil(j.tcy0/ee-.5),Y.tbx1=Math.ceil(j.tcx1/ee),Y.tby1=Math.ceil(j.tcy1/ee-.5),Y.resolution=Z,V(P,Y,G),F.push(Y),ae.push(Y),Y={},Y.type="HH",Y.tbx0=Math.ceil(j.tcx0/ee-.5),Y.tby0=Math.ceil(j.tcy0/ee-.5),Y.tbx1=Math.ceil(j.tcx1/ee-.5),Y.tby1=Math.ceil(j.tcy1/ee-.5),Y.resolution=Z,V(P,Y,G),F.push(Y),ae.push(Y),Z.subbands=ae}}j.resolutions=x,j.subbands=F}var pe=w.codingStyleDefaultParameters.progressionOrder;switch(pe){case 0:w.packetsIterator=new z(P);break;case 1:w.packetsIterator=new D(P);break;case 2:w.packetsIterator=new k(P);break;case 3:w.packetsIterator=new T(P);break;case 4:w.packetsIterator=new R(P);break;default:throw new s("Unsupported progression order "+pe)}}function b(P,O,E,w){var A=0,M,j=0,C=!1;function x(ht){for(;j<ht;){var Ge=O[E+A];A++,C?(M=M<<7|Ge,j+=7,C=!1):(M=M<<8|Ge,j+=8),Ge===255&&(C=!0)}return j-=ht,M>>>j&(1<<ht)-1}function F(ht){return O[E+A-1]===255&&O[E+A]===ht?($(1),!0):O[E+A]===255&&O[E+A+1]===ht?($(2),!0):!1}function $(ht){A+=ht}function G(){j=0,C&&(A++,C=!1)}function Z(){if(x(1)===0)return 1;if(x(1)===0)return 2;var ht=x(2);return ht<3?ht+3:(ht=x(5),ht<31?ht+6:(ht=x(7),ht+37))}for(var J=P.currentTile.index,Y=P.tiles[J],ee=P.COD.sopMarkerUsed,ae=P.COD.ephMarkerUsed,pe=Y.packetsIterator;A<w;){G(),ee&&F(145)&&$(4);var se=pe.nextPacket();if(x(1)){for(var ue=se.layerNumber,le=[],ie,de=0,fe=se.codeblocks.length;de<fe;de++){ie=se.codeblocks[de];var he=ie.precinct,Se=ie.cbx-he.cbxMin,Ce=ie.cby-he.cbyMin,Ae=!1,Ee=!1,ke;if(ie.included!==void 0)Ae=!!x(1);else{he=ie.precinct;var Fe,Pe;if(he.inclusionTree!==void 0)Fe=he.inclusionTree;else{var Ie=he.cbxMax-he.cbxMin+1,$e=he.cbyMax-he.cbyMin+1;Fe=new W(Ie,$e,ue),Pe=new I(Ie,$e),he.inclusionTree=Fe,he.zeroBitPlanesTree=Pe}if(Fe.reset(Se,Ce,ue))for(;;)if(x(1)){if(ke=!Fe.nextLevel(),ke){ie.included=!0,Ae=Ee=!0;break}}else{Fe.incrementValue(ue);break}}if(Ae){if(Ee){for(Pe=he.zeroBitPlanesTree,Pe.reset(Se,Ce);;)if(x(1)){if(ke=!Pe.nextLevel(),ke)break}else Pe.incrementValue();ie.zeroBitPlanes=Pe.value}for(var Ke=Z();x(1);)ie.Lblock++;var Ze=(0,a.log2)(Ke),ot=(Ke<1<<Ze?Ze-1:Ze)+ie.Lblock,et=x(ot);le.push({codeblock:ie,codingpasses:Ke,dataLength:et})}}for(G(),ae&&F(146);le.length>0;){var ct=le.shift();ie=ct.codeblock,ie.data===void 0&&(ie.data=[]),ie.data.push({data:O,start:E+A,end:E+A+ct.dataLength,codingpasses:ct.codingpasses}),A+=ct.dataLength}}}return A}function f(P,O,E,w,A,M,j,C){for(var x=w.tbx0,F=w.tby0,$=w.tbx1-w.tbx0,G=w.codeblocks,Z=w.type.charAt(0)==="H"?1:0,J=w.type.charAt(1)==="H"?O:0,Y=0,ee=G.length;Y<ee;++Y){var ae=G[Y],pe=ae.tbx1_-ae.tbx0_,se=ae.tby1_-ae.tby0_;if(!(pe===0||se===0)&&ae.data!==void 0){var ue,le;ue=new q(pe,se,ae.subbandType,ae.zeroBitPlanes,M),le=2;var ie=ae.data,de=0,fe=0,he,Se,Ce;for(he=0,Se=ie.length;he<Se;he++)Ce=ie[he],de+=Ce.end-Ce.start,fe+=Ce.codingpasses;var Ae=new Uint8Array(de),Ee=0;for(he=0,Se=ie.length;he<Se;he++){Ce=ie[he];var ke=Ce.data.subarray(Ce.start,Ce.end);Ae.set(ke,Ee),Ee+=ke.length}var Fe=new i.ArithmeticDecoder(Ae,0,de);for(ue.setDecoder(Fe),he=0;he<fe;he++){switch(le){case 0:ue.runSignificancePropagationPass();break;case 1:ue.runMagnitudeRefinementPass();break;case 2:ue.runCleanupPass(),C&&ue.checkSegmentationSymbol();break}le=(le+1)%3}var Pe=ae.tbx0_-x+(ae.tby0_-F)*$,Ie=ue.coefficentsSign,$e=ue.coefficentsMagnitude,Ke=ue.bitsDecoded,Ze=j?0:.5,ot,et,ct;Ee=0;var ht=w.type!=="LL";for(he=0;he<se;he++){var Ge=Pe/$|0,Be=2*Ge*(O-$)+Z+J;for(ot=0;ot<pe;ot++){if(et=$e[Ee],et!==0){et=(et+Ze)*A,Ie[Ee]!==0&&(et=-et),ct=Ke[Ee];var wt=ht?Be+(Pe<<1):Pe;j&&ct>=M?P[wt]=et:P[wt]=et*(1<<M-ct)}Pe++,Ee++}Pe+=$-pe}}}}function p(P,O,E){for(var w=O.components[E],A=w.codingStyleParameters,M=w.quantizationParameters,j=A.decompositionLevelsCount,C=M.SPqcds,x=M.scalarExpounded,F=M.guardBits,$=A.segmentationSymbolUsed,G=P.components[E].precision,Z=A.reversibleTransformation,J=Z?new L:new N,Y=[],ee=0,ae=0;ae<=j;ae++){for(var pe=w.resolutions[ae],se=pe.trx1-pe.trx0,ue=pe.try1-pe.try0,le=new Float32Array(se*ue),ie=0,de=pe.subbands.length;ie<de;ie++){var fe,he;x?(fe=C[ee].mu,he=C[ee].epsilon,ee++):(fe=C[0].mu,he=C[0].epsilon+(ae>0?1-ae:0));var Se=pe.subbands[ie],Ce=l[Se.type],Ae=Z?1:Math.pow(2,G+Ce-he)*(1+fe/2048),Ee=F+he-1;f(le,se,ue,Se,Ae,Ee,Z,$)}Y.push({width:se,height:ue,items:le})}var ke=J.calculate(Y,w.tcx0,w.tcy0);return{left:w.tcx0,top:w.tcy0,width:ke.width,height:ke.height,items:ke.items}}function h(P){for(var O=P.SIZ,E=P.components,w=O.Csiz,A=[],M=0,j=P.tiles.length;M<j;M++){var C=P.tiles[M],x=[],F;for(F=0;F<w;F++)x[F]=p(P,C,F);var $=x[0],G=new Uint8ClampedArray($.items.length*w),Z={left:$.left,top:$.top,width:$.width,height:$.height,items:G},J,Y,ee=0,ae,pe,se,ue,le;if(C.codingStyleDefaultParameters.multipleComponentTransform){var ie=w===4,de=x[0].items,fe=x[1].items,he=x[2].items,Se=ie?x[3].items:null;J=E[0].precision-8,Y=(128<<J)+.5;var Ce=C.components[0],Ae=w-3;if(pe=de.length,Ce.codingStyleParameters.reversibleTransformation)for(ae=0;ae<pe;ae++,ee+=Ae){se=de[ae]+Y,ue=fe[ae],le=he[ae];var Ee=se-(le+ue>>2);G[ee++]=Ee+le>>J,G[ee++]=Ee>>J,G[ee++]=Ee+ue>>J}else for(ae=0;ae<pe;ae++,ee+=Ae)se=de[ae]+Y,ue=fe[ae],le=he[ae],G[ee++]=se+1.402*le>>J,G[ee++]=se-.34413*ue-.71414*le>>J,G[ee++]=se+1.772*ue>>J;if(ie)for(ae=0,ee=3;ae<pe;ae++,ee+=4)G[ee]=Se[ae]+Y>>J}else for(F=0;F<w;F++){var ke=x[F].items;for(J=E[F].precision-8,Y=(128<<J)+.5,ee=F,ae=0,pe=ke.length;ae<pe;ae++)G[ee]=ke[ae]+Y>>J,ee+=w}A.push(Z)}return A}function _(P,O){for(var E=P.SIZ,w=E.Csiz,A=P.tiles[O],M=0;M<w;M++){var j=A.components[M],C=P.currentTile.QCC[M]!==void 0?P.currentTile.QCC[M]:P.currentTile.QCD;j.quantizationParameters=C;var x=P.currentTile.COC[M]!==void 0?P.currentTile.COC[M]:P.currentTile.COD;j.codingStyleParameters=x}A.codingStyleDefaultParameters=P.currentTile.COD}var I=function(){function O(E,w){var A=(0,a.log2)(Math.max(E,w))+1;this.levels=[];for(var M=0;M<A;M++){var j={width:E,height:w,items:[]};this.levels.push(j),E=Math.ceil(E/2),w=Math.ceil(w/2)}}return O.prototype={reset:function(w,A){for(var M=0,j=0,C;M<this.levels.length;){C=this.levels[M];var x=w+A*C.width;if(C.items[x]!==void 0){j=C.items[x];break}C.index=x,w>>=1,A>>=1,M++}M--,C=this.levels[M],C.items[C.index]=j,this.currentLevel=M,delete this.value},incrementValue:function(){var w=this.levels[this.currentLevel];w.items[w.index]++},nextLevel:function(){var w=this.currentLevel,A=this.levels[w],M=A.items[A.index];return w--,w<0?(this.value=M,!1):(this.currentLevel=w,A=this.levels[w],A.items[A.index]=M,!0)}},O}(),W=function(){function O(E,w,A){var M=(0,a.log2)(Math.max(E,w))+1;this.levels=[];for(var j=0;j<M;j++){for(var C=new Uint8Array(E*w),x=0,F=C.length;x<F;x++)C[x]=A;var $={width:E,height:w,items:C};this.levels.push($),E=Math.ceil(E/2),w=Math.ceil(w/2)}}return O.prototype={reset:function(w,A,M){for(var j=0;j<this.levels.length;){var C=this.levels[j],x=w+A*C.width;C.index=x;var F=C.items[x];if(F===255)break;if(F>M)return this.currentLevel=j,this.propagateValues(),!1;w>>=1,A>>=1,j++}return this.currentLevel=j-1,!0},incrementValue:function(w){var A=this.levels[this.currentLevel];A.items[A.index]=w+1,this.propagateValues()},propagateValues:function(){for(var w=this.currentLevel,A=this.levels[w],M=A.items[A.index];--w>=0;)A=this.levels[w],A.items[A.index]=M},nextLevel:function(){var w=this.currentLevel,A=this.levels[w],M=A.items[A.index];return A.items[A.index]=255,w--,w<0?!1:(this.currentLevel=w,A=this.levels[w],A.items[A.index]=M,!0)}},O}(),q=function(){var O=17,E=18,w=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),A=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),M=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function j(C,x,F,$,G){this.width=C,this.height=x,this.contextLabelTable=F==="HH"?M:F==="HL"?A:w;var Z=C*x;this.neighborsSignificance=new Uint8Array(Z),this.coefficentsSign=new Uint8Array(Z),this.coefficentsMagnitude=G>14?new Uint32Array(Z):G>6?new Uint16Array(Z):new Uint8Array(Z),this.processingFlags=new Uint8Array(Z);var J=new Uint8Array(Z);if($!==0)for(var Y=0;Y<Z;Y++)J[Y]=$;this.bitsDecoded=J,this.reset()}return j.prototype={setDecoder:function(x){this.decoder=x},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[O]=92,this.contexts[E]=6},setNeighborsSignificance:function(x,F,$){var G=this.neighborsSignificance,Z=this.width,J=this.height,Y=F>0,ee=F+1<Z,ae;x>0&&(ae=$-Z,Y&&(G[ae-1]+=16),ee&&(G[ae+1]+=16),G[ae]+=4),x+1<J&&(ae=$+Z,Y&&(G[ae-1]+=16),ee&&(G[ae+1]+=16),G[ae]+=4),Y&&(G[$-1]+=1),ee&&(G[$+1]+=1),G[$]|=128},runSignificancePropagationPass:function(){for(var x=this.decoder,F=this.width,$=this.height,G=this.coefficentsMagnitude,Z=this.coefficentsSign,J=this.neighborsSignificance,Y=this.processingFlags,ee=this.contexts,ae=this.contextLabelTable,pe=this.bitsDecoded,se=-2,ue=1,le=2,ie=0;ie<$;ie+=4)for(var de=0;de<F;de++)for(var fe=ie*F+de,he=0;he<4;he++,fe+=F){var Se=ie+he;if(Se>=$)break;if(Y[fe]&=se,!(G[fe]||!J[fe])){var Ce=ae[J[fe]],Ae=x.readBit(ee,Ce);if(Ae){var Ee=this.decodeSignBit(Se,de,fe);Z[fe]=Ee,G[fe]=1,this.setNeighborsSignificance(Se,de,fe),Y[fe]|=le}pe[fe]++,Y[fe]|=ue}}},decodeSignBit:function(x,F,$){var G=this.width,Z=this.height,J=this.coefficentsMagnitude,Y=this.coefficentsSign,ee,ae,pe,se,ue,le;se=F>0&&J[$-1]!==0,F+1<G&&J[$+1]!==0?(pe=Y[$+1],se?(ae=Y[$-1],ee=1-pe-ae):ee=1-pe-pe):se?(ae=Y[$-1],ee=1-ae-ae):ee=0;var ie=3*ee;return se=x>0&&J[$-G]!==0,x+1<Z&&J[$+G]!==0?(pe=Y[$+G],se?(ae=Y[$-G],ee=1-pe-ae+ie):ee=1-pe-pe+ie):se?(ae=Y[$-G],ee=1-ae-ae+ie):ee=ie,ee>=0?(ue=9+ee,le=this.decoder.readBit(this.contexts,ue)):(ue=9-ee,le=this.decoder.readBit(this.contexts,ue)^1),le},runMagnitudeRefinementPass:function(){for(var x=this.decoder,F=this.width,$=this.height,G=this.coefficentsMagnitude,Z=this.neighborsSignificance,J=this.contexts,Y=this.bitsDecoded,ee=this.processingFlags,ae=1,pe=2,se=F*$,ue=F*4,le=0,ie;le<se;le=ie){ie=Math.min(se,le+ue);for(var de=0;de<F;de++)for(var fe=le+de;fe<ie;fe+=F)if(!(!G[fe]||(ee[fe]&ae)!==0)){var he=16;if((ee[fe]&pe)!==0){ee[fe]^=pe;var Se=Z[fe]&127;he=Se===0?15:14}var Ce=x.readBit(J,he);G[fe]=G[fe]<<1|Ce,Y[fe]++,ee[fe]|=ae}}},runCleanupPass:function(){for(var x=this.decoder,F=this.width,$=this.height,G=this.neighborsSignificance,Z=this.coefficentsMagnitude,J=this.coefficentsSign,Y=this.contexts,ee=this.contextLabelTable,ae=this.bitsDecoded,pe=this.processingFlags,se=1,ue=2,le=F,ie=F*2,de=F*3,fe,he=0;he<$;he=fe){fe=Math.min(he+4,$);for(var Se=he*F,Ce=he+3<$,Ae=0;Ae<F;Ae++){var Ee=Se+Ae,ke=Ce&&pe[Ee]===0&&pe[Ee+le]===0&&pe[Ee+ie]===0&&pe[Ee+de]===0&&G[Ee]===0&&G[Ee+le]===0&&G[Ee+ie]===0&&G[Ee+de]===0,Fe=0,Pe=Ee,Ie=he,$e;if(ke){var Ke=x.readBit(Y,E);if(!Ke){ae[Ee]++,ae[Ee+le]++,ae[Ee+ie]++,ae[Ee+de]++;continue}Fe=x.readBit(Y,O)<<1|x.readBit(Y,O),Fe!==0&&(Ie=he+Fe,Pe+=Fe*F),$e=this.decodeSignBit(Ie,Ae,Pe),J[Pe]=$e,Z[Pe]=1,this.setNeighborsSignificance(Ie,Ae,Pe),pe[Pe]|=ue,Pe=Ee;for(var Ze=he;Ze<=Ie;Ze++,Pe+=F)ae[Pe]++;Fe++}for(Ie=he+Fe;Ie<fe;Ie++,Pe+=F)if(!(Z[Pe]||(pe[Pe]&se)!==0)){var ot=ee[G[Pe]],et=x.readBit(Y,ot);et===1&&($e=this.decodeSignBit(Ie,Ae,Pe),J[Pe]=$e,Z[Pe]=1,this.setNeighborsSignificance(Ie,Ae,Pe),pe[Pe]|=ue),ae[Pe]++}}}},checkSegmentationSymbol:function(){var x=this.decoder,F=this.contexts,$=x.readBit(F,O)<<3|x.readBit(F,O)<<2|x.readBit(F,O)<<1|x.readBit(F,O);if($!==10)throw new s("Invalid segmentation symbol")}},j}(),B=function(){function O(){}return O.prototype.calculate=function(w,A,M){for(var j=w[0],C=1,x=w.length;C<x;C++)j=this.iterate(j,w[C],A,M);return j},O.prototype.extend=function(w,A,M){var j=A-1,C=A+1,x=A+M-2,F=A+M;w[j--]=w[C++],w[F++]=w[x--],w[j--]=w[C++],w[F++]=w[x--],w[j--]=w[C++],w[F++]=w[x--],w[j]=w[C],w[F]=w[x]},O.prototype.iterate=function(w,A,M,j){var C=w.width,x=w.height,F=w.items,$=A.width,G=A.height,Z=A.items,J,Y,ee,ae,pe,se;for(ee=0,J=0;J<x;J++)for(ae=J*2*$,Y=0;Y<C;Y++,ee++,ae+=2)Z[ae]=F[ee];F=w.items=null;var ue=4,le=new Float32Array($+2*ue);if($===1){if((M&1)!==0)for(se=0,ee=0;se<G;se++,ee+=$)Z[ee]*=.5}else for(se=0,ee=0;se<G;se++,ee+=$)le.set(Z.subarray(ee,ee+$),ue),this.extend(le,ue,$),this.filter(le,ue,$),Z.set(le.subarray(ue,ue+$),ee);var ie=16,de=[];for(J=0;J<ie;J++)de.push(new Float32Array(G+2*ue));var fe,he=0;if(w=ue+G,G===1){if((j&1)!==0)for(pe=0;pe<$;pe++)Z[pe]*=.5}else for(pe=0;pe<$;pe++){if(he===0){for(ie=Math.min($-pe,ie),ee=pe,ae=ue;ae<w;ee+=$,ae++)for(fe=0;fe<ie;fe++)de[fe][ae]=Z[ee+fe];he=ie}he--;var Se=de[he];if(this.extend(Se,ue,G),this.filter(Se,ue,G),he===0)for(ee=pe-ie+1,ae=ue;ae<w;ee+=$,ae++)for(fe=0;fe<ie;fe++)Z[ee+fe]=de[fe][ae]}return{width:$,height:G,items:Z}},O}(),N=function(){function O(){B.call(this)}return O.prototype=Object.create(B.prototype),O.prototype.filter=function(w,A,M){var j=M>>1;A=A|0;var C,x,F,$,G=-1.586134342059924,Z=-.052980118572961,J=.882911075530934,Y=.443506852043971,ee=1.230174104914001,ae=1/ee;for(C=A-3,x=j+4;x--;C+=2)w[C]*=ae;for(C=A-2,F=Y*w[C-1],x=j+3;x--&&($=Y*w[C+1],w[C]=ee*w[C]-F-$,x--);C+=2)C+=2,F=Y*w[C+1],w[C]=ee*w[C]-F-$;for(C=A-1,F=J*w[C-1],x=j+2;x--&&($=J*w[C+1],w[C]-=F+$,x--);C+=2)C+=2,F=J*w[C+1],w[C]-=F+$;for(C=A,F=Z*w[C-1],x=j+1;x--&&($=Z*w[C+1],w[C]-=F+$,x--);C+=2)C+=2,F=Z*w[C+1],w[C]-=F+$;if(j!==0)for(C=A+1,F=G*w[C-1],x=j;x--&&($=G*w[C+1],w[C]-=F+$,x--);C+=2)C+=2,F=G*w[C+1],w[C]-=F+$},O}(),L=function(){function O(){B.call(this)}return O.prototype=Object.create(B.prototype),O.prototype.filter=function(w,A,M){var j=M>>1;A=A|0;var C,x;for(C=A,x=j+1;x--;C+=2)w[C]-=w[C-1]+w[C+1]+2>>2;for(C=A+1,x=j;x--;C+=2)w[C]+=w[C-1]+w[C+1]>>1},O}();return d}();e.JpxImage=t},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var s=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function t(o,l,d){this.data=o,this.bp=l,this.dataEnd=d,this.chigh=o[l],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return t.prototype={byteIn:function(){var l=this.data,d=this.bp;if(l[d]===255){var c=l[d+1];c>143?(this.clow+=65280,this.ct=8):(d++,this.clow+=l[d]<<9,this.ct=7,this.bp=d)}else d++,this.clow+=d<this.dataEnd?l[d]<<8:65280,this.ct=8,this.bp=d;this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(l,d){var c=l[d]>>1,y=l[d]&1,u=s[c],S=u.qe,V,U=this.a-S;if(this.chigh<S)U<S?(U=S,V=y,c=u.nmps):(U=S,V=1^y,u.switchFlag===1&&(y=V),c=u.nlps);else{if(this.chigh-=S,(U&32768)!==0)return this.a=U,y;U<S?(V=1^y,u.switchFlag===1&&(y=V),c=u.nlps):(V=y,c=u.nmps)}do this.ct===0&&this.byteIn(),U<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while((U&32768)===0);return this.a=U,l[d]=c<<1|y,V}},t}();e.ArithmeticDecoder=a},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSHA512=e.calculateSHA384=e.calculateSHA256=e.calculateMD5=e.PDF20=e.PDF17=e.CipherTransformFactory=e.ARCFourCipher=e.AES256Cipher=e.AES128Cipher=void 0;var a=r(0),i=r(2),s=r(5),t=function(){function R(g){this.a=0,this.b=0;var m=new Uint8Array(256),v,b=0,f,p=g.length;for(v=0;v<256;++v)m[v]=v;for(v=0;v<256;++v)f=m[v],b=b+f+g[v%p]&255,m[v]=m[b],m[b]=f;this.s=m}return R.prototype={encryptBlock:function(m){var v,b=m.length,f,p,h=this.a,_=this.b,I=this.s,W=new Uint8Array(b);for(v=0;v<b;++v)h=h+1&255,f=I[h],_=_+f&255,p=I[_],I[h]=p,I[_]=f,W[v]=m[v]^I[f+p&255];return this.a=h,this.b=_,W}},R.prototype.decryptBlock=R.prototype.encryptBlock,R}(),o=function(){var R=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),g=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function m(v,b,f){var p=1732584193,h=-271733879,_=-1732584194,I=271733878,W=f+72&-64,q=new Uint8Array(W),B,N,L;for(B=0;B<f;++B)q[B]=v[b++];for(q[B++]=128,L=W-8;B<L;)q[B++]=0;q[B++]=f<<3&255,q[B++]=f>>5&255,q[B++]=f>>13&255,q[B++]=f>>21&255,q[B++]=f>>>29&255,q[B++]=0,q[B++]=0,q[B++]=0;var P=new Int32Array(16);for(B=0;B<W;){for(N=0;N<16;++N,B+=4)P[N]=q[B]|q[B+1]<<8|q[B+2]<<16|q[B+3]<<24;var O=p,E=h,w=_,A=I,M,j;for(N=0;N<64;++N){N<16?(M=E&w|~E&A,j=N):N<32?(M=A&E|~A&w,j=5*N+1&15):N<48?(M=E^w^A,j=3*N+5&15):(M=w^(E|~A),j=7*N&15);var C=A,x=O+M+g[N]+P[j]|0,F=R[N];A=w,w=E,E=E+(x<<F|x>>>32-F)|0,O=C}p=p+O|0,h=h+E|0,_=_+w|0,I=I+A|0}return new Uint8Array([p&255,p>>8&255,p>>16&255,p>>>24&255,h&255,h>>8&255,h>>16&255,h>>>24&255,_&255,_>>8&255,_>>16&255,_>>>24&255,I&255,I>>8&255,I>>16&255,I>>>24&255])}return m}(),l=function(){function R(g,m){this.high=g|0,this.low=m|0}return R.prototype={and:function(m){this.high&=m.high,this.low&=m.low},xor:function(m){this.high^=m.high,this.low^=m.low},or:function(m){this.high|=m.high,this.low|=m.low},shiftRight:function(m){m>=32?(this.low=this.high>>>m-32|0,this.high=0):(this.low=this.low>>>m|this.high<<32-m,this.high=this.high>>>m|0)},shiftLeft:function(m){m>=32?(this.high=this.low<<m-32,this.low=0):(this.high=this.high<<m|this.low>>>32-m,this.low=this.low<<m)},rotateRight:function(m){var v,b;m&32?(b=this.low,v=this.high):(v=this.low,b=this.high),m&=31,this.low=v>>>m|b<<32-m,this.high=b>>>m|v<<32-m},not:function(){this.high=~this.high,this.low=~this.low},add:function(m){var v=(this.low>>>0)+(m.low>>>0),b=(this.high>>>0)+(m.high>>>0);v>4294967295&&(b+=1),this.low=v|0,this.high=b|0},copyTo:function(m,v){m[v]=this.high>>>24&255,m[v+1]=this.high>>16&255,m[v+2]=this.high>>8&255,m[v+3]=this.high&255,m[v+4]=this.low>>>24&255,m[v+5]=this.low>>16&255,m[v+6]=this.low>>8&255,m[v+7]=this.low&255},assign:function(m){this.high=m.high,this.low=m.low}},R}(),d=function(){function R(I,W){return I>>>W|I<<32-W}function g(I,W,q){return I&W^~I&q}function m(I,W,q){return I&W^I&q^W&q}function v(I){return R(I,2)^R(I,13)^R(I,22)}function b(I){return R(I,6)^R(I,11)^R(I,25)}function f(I){return R(I,7)^R(I,18)^I>>>3}function p(I){return R(I,17)^R(I,19)^I>>>10}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _(I,W,q){var B=1779033703,N=3144134277,L=1013904242,P=2773480762,O=1359893119,E=2600822924,w=528734635,A=1541459225,M=Math.ceil((q+9)/64)*64,j=new Uint8Array(M),C,x,F;for(C=0;C<q;++C)j[C]=I[W++];for(j[C++]=128,F=M-8;C<F;)j[C++]=0;j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=q>>>29&255,j[C++]=q>>21&255,j[C++]=q>>13&255,j[C++]=q>>5&255,j[C++]=q<<3&255;var $=new Uint32Array(64);for(C=0;C<M;){for(x=0;x<16;++x)$[x]=j[C]<<24|j[C+1]<<16|j[C+2]<<8|j[C+3],C+=4;for(x=16;x<64;++x)$[x]=p($[x-2])+$[x-7]+f($[x-15])+$[x-16]|0;var G=B,Z=N,J=L,Y=P,ee=O,ae=E,pe=w,se=A,ue,le;for(x=0;x<64;++x)ue=se+b(ee)+g(ee,ae,pe)+h[x]+$[x],le=v(G)+m(G,Z,J),se=pe,pe=ae,ae=ee,ee=Y+ue|0,Y=J,J=Z,Z=G,G=ue+le|0;B=B+G|0,N=N+Z|0,L=L+J|0,P=P+Y|0,O=O+ee|0,E=E+ae|0,w=w+pe|0,A=A+se|0}return new Uint8Array([B>>24&255,B>>16&255,B>>8&255,B&255,N>>24&255,N>>16&255,N>>8&255,N&255,L>>24&255,L>>16&255,L>>8&255,L&255,P>>24&255,P>>16&255,P>>8&255,P&255,O>>24&255,O>>16&255,O>>8&255,O&255,E>>24&255,E>>16&255,E>>8&255,E&255,w>>24&255,w>>16&255,w>>8&255,w&255,A>>24&255,A>>16&255,A>>8&255,A&255])}return _}(),c=function(){function R(_,I,W,q,B){_.assign(I),_.and(W),B.assign(I),B.not(),B.and(q),_.xor(B)}function g(_,I,W,q,B){_.assign(I),_.and(W),B.assign(I),B.and(q),_.xor(B),B.assign(W),B.and(q),_.xor(B)}function m(_,I,W){_.assign(I),_.rotateRight(28),W.assign(I),W.rotateRight(34),_.xor(W),W.assign(I),W.rotateRight(39),_.xor(W)}function v(_,I,W){_.assign(I),_.rotateRight(14),W.assign(I),W.rotateRight(18),_.xor(W),W.assign(I),W.rotateRight(41),_.xor(W)}function b(_,I,W){_.assign(I),_.rotateRight(1),W.assign(I),W.rotateRight(8),_.xor(W),W.assign(I),W.shiftRight(7),_.xor(W)}function f(_,I,W){_.assign(I),_.rotateRight(19),W.assign(I),W.rotateRight(61),_.xor(W),W.assign(I),W.shiftRight(6),_.xor(W)}var p=[new l(1116352408,3609767458),new l(1899447441,602891725),new l(3049323471,3964484399),new l(3921009573,2173295548),new l(961987163,4081628472),new l(1508970993,3053834265),new l(2453635748,2937671579),new l(2870763221,3664609560),new l(3624381080,2734883394),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,3590304994),new l(1925078388,4068182383),new l(2162078206,991336113),new l(2614888103,633803317),new l(3248222580,3479774868),new l(3835390401,2666613458),new l(4022224774,944711139),new l(264347078,2341262773),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,3175218132),new l(1996064986,2198950837),new l(2554220882,3999719339),new l(2821834349,766784016),new l(2952996808,2566594879),new l(3210313671,3203337956),new l(3336571891,1034457026),new l(3584528711,2466948901),new l(113926993,3758326383),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,2643833823),new l(1695183700,2343527390),new l(1986661051,1014477480),new l(2177026350,1206759142),new l(2456956037,344077627),new l(2730485921,1290863460),new l(2820302411,3158454273),new l(3259730800,3505952657),new l(3345764771,106217008),new l(3516065817,3606008344),new l(3600352804,1432725776),new l(4094571909,1467031594),new l(275423344,851169720),new l(430227734,3100823752),new l(506948616,1363258195),new l(659060556,3750685593),new l(883997877,3785050280),new l(958139571,3318307427),new l(1322822218,3812723403),new l(1537002063,2003034995),new l(1747873779,3602036899),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(2227730452,2716904306),new l(2361852424,442776044),new l(2428436474,593698344),new l(2756734187,3733110249),new l(3204031479,2999351573),new l(3329325298,3815920427),new l(3391569614,3928383900),new l(3515267271,566280711),new l(3940187606,3454069534),new l(4118630271,4000239992),new l(116418474,1914138554),new l(174292421,2731055270),new l(289380356,3203993006),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,2618297676),new l(1288033470,3409855158),new l(1501505948,4234509866),new l(1607167915,987167468),new l(1816402316,1246189591)];function h(_,I,W,q){q=!!q;var B,N,L,P,O,E,w,A;q?(B=new l(3418070365,3238371032),N=new l(1654270250,914150663),L=new l(2438529370,812702999),P=new l(355462360,4144912697),O=new l(1731405415,4290775857),E=new l(2394180231,1750603025),w=new l(3675008525,1694076839),A=new l(1203062813,3204075428)):(B=new l(1779033703,4089235720),N=new l(3144134277,2227873595),L=new l(1013904242,4271175723),P=new l(2773480762,1595750129),O=new l(1359893119,2917565137),E=new l(2600822924,725511199),w=new l(528734635,4215389547),A=new l(1541459225,327033209));var M=Math.ceil((W+17)/128)*128,j=new Uint8Array(M),C,x,F;for(C=0;C<W;++C)j[C]=_[I++];for(j[C++]=128,F=M-16;C<F;)j[C++]=0;j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=0,j[C++]=W>>>29&255,j[C++]=W>>21&255,j[C++]=W>>13&255,j[C++]=W>>5&255,j[C++]=W<<3&255;var $=new Array(80);for(C=0;C<80;C++)$[C]=new l(0,0);var G=new l(0,0),Z=new l(0,0),J=new l(0,0),Y=new l(0,0),ee=new l(0,0),ae=new l(0,0),pe=new l(0,0),se=new l(0,0),ue=new l(0,0),le=new l(0,0),ie=new l(0,0),de=new l(0,0),fe;for(C=0;C<M;){for(x=0;x<16;++x)$[x].high=j[C]<<24|j[C+1]<<16|j[C+2]<<8|j[C+3],$[x].low=j[C+4]<<24|j[C+5]<<16|j[C+6]<<8|j[C+7],C+=8;for(x=16;x<80;++x)fe=$[x],f(fe,$[x-2],de),fe.add($[x-7]),b(ie,$[x-15],de),fe.add(ie),fe.add($[x-16]);for(G.assign(B),Z.assign(N),J.assign(L),Y.assign(P),ee.assign(O),ae.assign(E),pe.assign(w),se.assign(A),x=0;x<80;++x)ue.assign(se),v(ie,ee,de),ue.add(ie),R(ie,ee,ae,pe,de),ue.add(ie),ue.add(p[x]),ue.add($[x]),m(le,G,de),g(ie,G,Z,J,de),le.add(ie),fe=se,se=pe,pe=ae,ae=ee,Y.add(ue),ee=Y,Y=J,J=Z,Z=G,fe.assign(ue),fe.add(le),G=fe;B.add(G),N.add(Z),L.add(J),P.add(Y),O.add(ee),E.add(ae),w.add(pe),A.add(se)}var he;return q?(he=new Uint8Array(48),B.copyTo(he,0),N.copyTo(he,8),L.copyTo(he,16),P.copyTo(he,24),O.copyTo(he,32),E.copyTo(he,40)):(he=new Uint8Array(64),B.copyTo(he,0),N.copyTo(he,8),L.copyTo(he,16),P.copyTo(he,24),O.copyTo(he,32),E.copyTo(he,40),w.copyTo(he,48),A.copyTo(he,56)),he}return h}(),y=function(){function R(g,m,v){return c(g,m,v,!0)}return R}(),u=function(){function R(){}return R.prototype={decryptBlock:function(m){return m}},R}(),S=function(){for(var R=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),g=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),m=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),v=new Uint8Array(256),b=0;b<256;b++)b<128?v[b]=b<<1:v[b]=b<<1^27;var f=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]);function p(q){var B=176,N=new Uint8Array(B);N.set(q);for(var L=16,P=1;L<B;++P){var O=N[L-3],E=N[L-2],w=N[L-1],A=N[L-4];O=g[O],E=g[E],w=g[w],A=g[A],O=O^R[P];for(var M=0;M<4;++M)N[L]=O^=N[L-16],L++,N[L]=E^=N[L-16],L++,N[L]=w^=N[L-16],L++,N[L]=A^=N[L-16],L++}return N}function h(q,B){var N=new Uint8Array(16);N.set(q);var L,P,O,E,w,A;for(P=0,O=160;P<16;++P,++O)N[P]^=B[O];for(L=9;L>=1;--L){for(E=N[13],N[13]=N[9],N[9]=N[5],N[5]=N[1],N[1]=E,E=N[14],w=N[10],N[14]=N[6],N[10]=N[2],N[6]=E,N[2]=w,E=N[15],w=N[11],A=N[7],N[15]=N[3],N[11]=E,N[7]=w,N[3]=A,P=0;P<16;++P)N[P]=m[N[P]];for(P=0,O=L*16;P<16;++P,++O)N[P]^=B[O];for(P=0;P<16;P+=4){var M=f[N[P]],j=f[N[P+1]],C=f[N[P+2]],x=f[N[P+3]];E=M^j>>>8^j<<24^C>>>16^C<<16^x>>>24^x<<8,N[P]=E>>>24&255,N[P+1]=E>>16&255,N[P+2]=E>>8&255,N[P+3]=E&255}}for(E=N[13],N[13]=N[9],N[9]=N[5],N[5]=N[1],N[1]=E,E=N[14],w=N[10],N[14]=N[6],N[10]=N[2],N[6]=E,N[2]=w,E=N[15],w=N[11],A=N[7],N[15]=N[3],N[11]=E,N[7]=w,N[3]=A,P=0;P<16;++P)N[P]=m[N[P]],N[P]^=B[P];return N}function _(q,B){var N,L,P,O,E=new Uint8Array(16);for(E.set(q),w=0;w<16;++w)E[w]^=B[w];for(b=1;b<10;b++){for(w=0;w<16;++w)E[w]=g[E[w]];P=E[1],E[1]=E[5],E[5]=E[9],E[9]=E[13],E[13]=P,P=E[2],L=E[6],E[2]=E[10],E[6]=E[14],E[10]=P,E[14]=L,P=E[3],L=E[7],N=E[11],E[3]=E[15],E[7]=P,E[11]=L,E[15]=N;for(var w=0;w<16;w+=4){var A=E[w+0],M=E[w+1],j=E[w+2],C=E[w+3];N=A^M^j^C,E[w+0]^=N^v[A^M],E[w+1]^=N^v[M^j],E[w+2]^=N^v[j^C],E[w+3]^=N^v[C^A]}for(w=0,O=b*16;w<16;++w,++O)E[w]^=B[O]}for(w=0;w<16;++w)E[w]=g[E[w]];for(P=E[1],E[1]=E[5],E[5]=E[9],E[9]=E[13],E[13]=P,P=E[2],L=E[6],E[2]=E[10],E[6]=E[14],E[10]=P,E[14]=L,P=E[3],L=E[7],N=E[11],E[3]=E[15],E[7]=P,E[11]=L,E[15]=N,w=0,O=160;w<16;++w,++O)E[w]^=B[O];return E}function I(q){this.key=p(q),this.buffer=new Uint8Array(16),this.bufferPosition=0}function W(q,B){var N,L,P,O=q.length,E=this.buffer,w=this.bufferPosition,A=[],M=this.iv;for(N=0;N<O;++N)if(E[w]=q[N],++w,!(w<16)){var j=h(E,this.key);for(L=0;L<16;++L)j[L]^=M[L];M=E,A.push(j),E=new Uint8Array(16),w=0}if(this.buffer=E,this.bufferLength=w,this.iv=M,A.length===0)return new Uint8Array([]);var C=16*A.length;if(B){var x=A[A.length-1],F=x[15];if(F<=16){for(N=15,P=16-F;N>=P;--N)if(x[N]!==F){F=0;break}C-=F,A[A.length-1]=x.subarray(0,16-F)}}var $=new Uint8Array(C);for(N=0,L=0,P=A.length;N<P;++N,L+=16)$.set(A[N],L);return $}return I.prototype={decryptBlock:function(B,N){var L,P=B.length,O=this.buffer,E=this.bufferPosition;for(L=0;E<16&&L<P;++L,++E)O[E]=B[L];return E<16?(this.bufferLength=E,new Uint8Array([])):(this.iv=O,this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=W,this.decryptBlock(B.subarray(16),N))},encrypt:function(B,N){var L,P,O,E=B.length,w=this.buffer,A=this.bufferPosition,M=[];for(N||(N=new Uint8Array(16)),L=0;L<E;++L)if(w[A]=B[L],++A,!(A<16)){for(P=0;P<16;++P)w[P]^=N[P];var j=_(w,this.key);N=j,M.push(j),w=new Uint8Array(16),A=0}if(this.buffer=w,this.bufferLength=A,this.iv=N,M.length===0)return new Uint8Array([]);var C=16*M.length,x=new Uint8Array(C);for(L=0,P=0,O=M.length;L<O;++L,P+=16)x.set(M[L],P);return x}},I}(),V=function(){for(var R=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),g=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),m=new Uint8Array(256),v=0;v<256;v++)v<128?m[v]=v<<1:m[v]=v<<1^27;var b=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]);function f(W){var q=240,B=new Uint8Array(q),N=1;B.set(W);for(var L=32,P=1;L<q;++P){if(L%32===16)O=R[O],E=R[E],w=R[w],A=R[A];else if(L%32===0){var O=B[L-3],E=B[L-2],w=B[L-1],A=B[L-4];O=R[O],E=R[E],w=R[w],A=R[A],O=O^N,(N<<=1)>=256&&(N=(N^27)&255)}for(var M=0;M<4;++M)B[L]=O^=B[L-32],L++,B[L]=E^=B[L-32],L++,B[L]=w^=B[L-32],L++,B[L]=A^=B[L-32],L++}return B}function p(W,q){var B=new Uint8Array(16);B.set(W);var N,L,P,O,E,w;for(L=0,P=224;L<16;++L,++P)B[L]^=q[P];for(N=13;N>=1;--N){for(O=B[13],B[13]=B[9],B[9]=B[5],B[5]=B[1],B[1]=O,O=B[14],E=B[10],B[14]=B[6],B[10]=B[2],B[6]=O,B[2]=E,O=B[15],E=B[11],w=B[7],B[15]=B[3],B[11]=O,B[7]=E,B[3]=w,L=0;L<16;++L)B[L]=g[B[L]];for(L=0,P=N*16;L<16;++L,++P)B[L]^=q[P];for(L=0;L<16;L+=4){var A=b[B[L]],M=b[B[L+1]],j=b[B[L+2]],C=b[B[L+3]];O=A^M>>>8^M<<24^j>>>16^j<<16^C>>>24^C<<8,B[L]=O>>>24&255,B[L+1]=O>>16&255,B[L+2]=O>>8&255,B[L+3]=O&255}}for(O=B[13],B[13]=B[9],B[9]=B[5],B[5]=B[1],B[1]=O,O=B[14],E=B[10],B[14]=B[6],B[10]=B[2],B[6]=O,B[2]=E,O=B[15],E=B[11],w=B[7],B[15]=B[3],B[11]=O,B[7]=E,B[3]=w,L=0;L<16;++L)B[L]=g[B[L]],B[L]^=q[L];return B}function h(W,q){var B,N,L,P,O=new Uint8Array(16);for(O.set(W),E=0;E<16;++E)O[E]^=q[E];for(v=1;v<14;v++){for(E=0;E<16;++E)O[E]=R[O[E]];L=O[1],O[1]=O[5],O[5]=O[9],O[9]=O[13],O[13]=L,L=O[2],N=O[6],O[2]=O[10],O[6]=O[14],O[10]=L,O[14]=N,L=O[3],N=O[7],B=O[11],O[3]=O[15],O[7]=L,O[11]=N,O[15]=B;for(var E=0;E<16;E+=4){var w=O[E+0],A=O[E+1],M=O[E+2],j=O[E+3];B=w^A^M^j,O[E+0]^=B^m[w^A],O[E+1]^=B^m[A^M],O[E+2]^=B^m[M^j],O[E+3]^=B^m[j^w]}for(E=0,P=v*16;E<16;++E,++P)O[E]^=q[P]}for(E=0;E<16;++E)O[E]=R[O[E]];for(L=O[1],O[1]=O[5],O[5]=O[9],O[9]=O[13],O[13]=L,L=O[2],N=O[6],O[2]=O[10],O[6]=O[14],O[10]=L,O[14]=N,L=O[3],N=O[7],B=O[11],O[3]=O[15],O[7]=L,O[11]=N,O[15]=B,E=0,P=224;E<16;++E,++P)O[E]^=q[P];return O}function _(W){this.key=f(W),this.buffer=new Uint8Array(16),this.bufferPosition=0}function I(W,q){var B,N,L,P=W.length,O=this.buffer,E=this.bufferPosition,w=[],A=this.iv;for(B=0;B<P;++B)if(O[E]=W[B],++E,!(E<16)){var M=p(O,this.key);for(N=0;N<16;++N)M[N]^=A[N];A=O,w.push(M),O=new Uint8Array(16),E=0}if(this.buffer=O,this.bufferLength=E,this.iv=A,w.length===0)return new Uint8Array([]);var j=16*w.length;if(q){var C=w[w.length-1],x=C[15];if(x<=16){for(B=15,L=16-x;B>=L;--B)if(C[B]!==x){x=0;break}j-=x,w[w.length-1]=C.subarray(0,16-x)}}var F=new Uint8Array(j);for(B=0,N=0,L=w.length;B<L;++B,N+=16)F.set(w[B],N);return F}return _.prototype={decryptBlock:function(q,B,N){var L,P=q.length,O=this.buffer,E=this.bufferPosition;if(N)this.iv=N;else{for(L=0;E<16&&L<P;++L,++E)O[E]=q[L];if(E<16)return this.bufferLength=E,new Uint8Array([]);this.iv=O,q=q.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=I,this.decryptBlock(q,B)},encrypt:function(q,B){var N,L,P,O=q.length,E=this.buffer,w=this.bufferPosition,A=[];for(B||(B=new Uint8Array(16)),N=0;N<O;++N)if(E[w]=q[N],++w,!(w<16)){for(L=0;L<16;++L)E[L]^=B[L];var M=h(E,this.key);this.iv=M,A.push(M),E=new Uint8Array(16),w=0}if(this.buffer=E,this.bufferLength=w,this.iv=B,A.length===0)return new Uint8Array([]);var j=16*A.length,C=new Uint8Array(j);for(N=0,L=0,P=A.length;N<P;++N,L+=16)C.set(A[N],L);return C}},_}(),U=function(){function R(m,v){if(m.length!==v.length)return!1;for(var b=0;b<m.length;b++)if(m[b]!==v[b])return!1;return!0}function g(){}return g.prototype={checkOwnerPassword:function(v,b,f,p){var h=new Uint8Array(v.length+56);h.set(v,0),h.set(b,v.length),h.set(f,v.length+b.length);var _=d(h,0,h.length);return R(_,p)},checkUserPassword:function(v,b,f){var p=new Uint8Array(v.length+8);p.set(v,0),p.set(b,v.length);var h=d(p,0,p.length);return R(h,f)},getOwnerKey:function(v,b,f,p){var h=new Uint8Array(v.length+56);h.set(v,0),h.set(b,v.length),h.set(f,v.length+b.length);var _=d(h,0,h.length),I=new V(_);return I.decryptBlock(p,!1,new Uint8Array(16))},getUserKey:function(v,b,f){var p=new Uint8Array(v.length+8);p.set(v,0),p.set(b,v.length);var h=d(p,0,p.length),_=new V(h);return _.decryptBlock(f,!1,new Uint8Array(16))}},g}(),z=function(){function R(b,f){var p=new Uint8Array(b.length+f.length);return p.set(b,0),p.set(f,b.length),p}function g(b,f,p){for(var h=d(f,0,f.length).subarray(0,32),_=[0],I=0;I<64||_[_.length-1]>I-32;){var W=b.length+h.length+p.length,q=new Uint8Array(W*64),B=R(b,h);B=R(B,p);for(var N=0,L=0;N<64;N++,L+=W)q.set(B,L);var P=new S(h.subarray(0,16));_=P.encrypt(q,h.subarray(16,32));for(var O=0,E=0;E<16;E++)O*=256%3,O%=3,O+=(_[E]>>>0)%3,O%=3;O===0?h=d(_,0,_.length):O===1?h=y(_,0,_.length):O===2&&(h=c(_,0,_.length)),I++}return h.subarray(0,32)}function m(){}function v(b,f){if(b.length!==f.length)return!1;for(var p=0;p<b.length;p++)if(b[p]!==f[p])return!1;return!0}return m.prototype={hash:function(f,p,h){return g(f,p,h)},checkOwnerPassword:function(f,p,h,_){var I=new Uint8Array(f.length+56);I.set(f,0),I.set(p,f.length),I.set(h,f.length+p.length);var W=g(f,I,h);return v(W,_)},checkUserPassword:function(f,p,h){var _=new Uint8Array(f.length+8);_.set(f,0),_.set(p,f.length);var I=g(f,_,[]);return v(I,h)},getOwnerKey:function(f,p,h,_){var I=new Uint8Array(f.length+56);I.set(f,0),I.set(p,f.length),I.set(h,f.length+p.length);var W=g(f,I,h),q=new V(W);return q.decryptBlock(_,!1,new Uint8Array(16))},getUserKey:function(f,p,h){var _=new Uint8Array(f.length+8);_.set(f,0),_.set(p,f.length);var I=g(f,_,[]),W=new V(I);return W.decryptBlock(h,!1,new Uint8Array(16))}},m}(),D=function(){function R(g,m){this.StringCipherConstructor=g,this.StreamCipherConstructor=m}return R.prototype={createStream:function(m,v){var b=new this.StreamCipherConstructor;return new s.DecryptStream(m,v,function(p,h){return b.decryptBlock(p,h)})},decryptString:function(m){var v=new this.StringCipherConstructor,b=(0,a.stringToBytes)(m);return b=v.decryptBlock(b,!0),(0,a.bytesToString)(b)}},R}(),k=function(){var R=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function g(_,I,W,q,B,N,L,P,O,E,w,A){if(I){var M=Math.min(127,I.length);I=I.subarray(0,M)}else I=[];var j;return _===6?j=new z:j=new U,j.checkUserPassword(I,P,L)?j.getUserKey(I,O,w):I.length&&j.checkOwnerPassword(I,q,N,W)?j.getOwnerKey(I,B,N,E):null}function m(_,I,W,q,B,N,L,P){var O=40+W.length+_.length,E=new Uint8Array(O),w=0,A,M;if(I)for(M=Math.min(32,I.length);w<M;++w)E[w]=I[w];for(A=0;w<32;)E[w++]=R[A++];for(A=0,M=W.length;A<M;++A)E[w++]=W[A];for(E[w++]=B&255,E[w++]=B>>8&255,E[w++]=B>>16&255,E[w++]=B>>>24&255,A=0,M=_.length;A<M;++A)E[w++]=_[A];N>=4&&!P&&(E[w++]=255,E[w++]=255,E[w++]=255,E[w++]=255);var j=o(E,0,w),C=L>>3;if(N>=3)for(A=0;A<50;++A)j=o(j,0,C);var x=j.subarray(0,C),F,$;if(N>=3){for(w=0;w<32;++w)E[w]=R[w];for(A=0,M=_.length;A<M;++A)E[w++]=_[A];F=new t(x),$=F.encryptBlock(o(E,0,w)),M=x.length;var G=new Uint8Array(M),Z;for(A=1;A<=19;++A){for(Z=0;Z<M;++Z)G[Z]=x[Z]^A;F=new t(G),$=F.encryptBlock($)}for(A=0,M=$.length;A<M;++A)if(q[A]!==$[A])return null}else for(F=new t(x),$=F.encryptBlock(R),A=0,M=$.length;A<M;++A)if(q[A]!==$[A])return null;return x}function v(_,I,W,q){var B=new Uint8Array(32),N=0,L,P;for(P=Math.min(32,_.length);N<P;++N)B[N]=_[N];for(L=0;N<32;)B[N++]=R[L++];var O=o(B,0,N),E=q>>3;if(W>=3)for(L=0;L<50;++L)O=o(O,0,O.length);var w,A;if(W>=3){A=I;var M=new Uint8Array(E),j;for(L=19;L>=0;L--){for(j=0;j<E;++j)M[j]=O[j]^L;w=new t(M),A=w.encryptBlock(A)}}else w=new t(O.subarray(0,E)),A=w.encryptBlock(I);return A}var b=i.Name.get("Identity");function f(_,I,W){var q=_.get("Filter");if(!(0,i.isName)(q,"Standard"))throw new a.FormatError("unknown encryption method");this.dict=_;var B=_.get("V");if(!Number.isInteger(B)||B!==1&&B!==2&&B!==4&&B!==5)throw new a.FormatError("unsupported encryption algorithm");this.algorithm=B;var N=_.get("Length");if(!N)if(B<=3)N=40;else{var L=_.get("CF"),P=_.get("StmF");if((0,i.isDict)(L)&&(0,i.isName)(P)){L.suppressEncryption=!0;var O=L.get(P.name);N=O&&O.get("Length")||128,N<40&&(N<<=3)}}if(!Number.isInteger(N)||N<40||N%8!==0)throw new a.FormatError("invalid key length");var E=(0,a.stringToBytes)(_.get("O")).subarray(0,32),w=(0,a.stringToBytes)(_.get("U")).subarray(0,32),A=_.get("P"),M=_.get("R"),j=(B===4||B===5)&&_.get("EncryptMetadata")!==!1;this.encryptMetadata=j;var C=(0,a.stringToBytes)(I),x;if(W){if(M===6)try{W=(0,a.utf8StringToString)(W)}catch{(0,a.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}x=(0,a.stringToBytes)(W)}var F;if(B!==5)F=m(C,x,E,w,A,M,N,j);else{var $=(0,a.stringToBytes)(_.get("O")).subarray(32,40),G=(0,a.stringToBytes)(_.get("O")).subarray(40,48),Z=(0,a.stringToBytes)(_.get("U")).subarray(0,48),J=(0,a.stringToBytes)(_.get("U")).subarray(32,40),Y=(0,a.stringToBytes)(_.get("U")).subarray(40,48),ee=(0,a.stringToBytes)(_.get("OE")),ae=(0,a.stringToBytes)(_.get("UE")),pe=(0,a.stringToBytes)(_.get("Perms"));F=g(M,x,E,$,G,Z,w,J,Y,ee,ae,pe)}if(!F&&!W)throw new a.PasswordException("No password given",a.PasswordResponses.NEED_PASSWORD);if(!F&&W){var se=v(x,E,M,N);F=m(C,se,E,w,A,M,N,j)}if(!F)throw new a.PasswordException("Incorrect Password",a.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=F,B>=4){var ue=_.get("CF");(0,i.isDict)(ue)&&(ue.suppressEncryption=!0),this.cf=ue,this.stmf=_.get("StmF")||b,this.strf=_.get("StrF")||b,this.eff=_.get("EFF")||this.stmf}}function p(_,I,W,q){var B=new Uint8Array(W.length+9),N,L;for(N=0,L=W.length;N<L;++N)B[N]=W[N];B[N++]=_&255,B[N++]=_>>8&255,B[N++]=_>>16&255,B[N++]=I&255,B[N++]=I>>8&255,q&&(B[N++]=115,B[N++]=65,B[N++]=108,B[N++]=84);var P=o(B,0,N);return P.subarray(0,Math.min(W.length+5,16))}function h(_,I,W,q,B){if(!(0,i.isName)(I))throw new a.FormatError("Invalid crypt filter name.");var N=_.get(I.name),L;if(N!=null&&(L=N.get("CFM")),!L||L.name==="None")return function(){return new u};if(L.name==="V2")return function(){return new t(p(W,q,B,!1))};if(L.name==="AESV2")return function(){return new S(p(W,q,B,!0))};if(L.name==="AESV3")return function(){return new V(B)};throw new a.FormatError("Unknown crypto method")}return f.prototype={createCipherTransform:function(I,W){if(this.algorithm===4||this.algorithm===5)return new D(h(this.cf,this.stmf,I,W,this.encryptionKey),h(this.cf,this.strf,I,W,this.encryptionKey));var q=p(I,W,this.encryptionKey,!1),B=function(){return new t(q)};return new D(B,B)}},f}();e.AES128Cipher=S,e.AES256Cipher=V,e.ARCFourCipher=t,e.CipherTransformFactory=k,e.PDF17=U,e.PDF20=z,e.calculateMD5=o,e.calculateSHA256=d,e.calculateSHA384=y,e.calculateSHA512=c},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PartialEvaluator=e.OperatorList=void 0;var a=r(0),i=r(134),s=r(5),t=r(2),o=r(135),l=r(28),d=r(80),c=r(79),y=r(139),u=r(34),S=r(140),V=r(27),U=r(47),z=r(141),D=r(81),k=r(143),T=r(144),R=function(){var I={forceDataSchema:!1,maxImageSize:-1,disableFontFace:!1,nativeImageDecoderSupport:a.NativeImageDecoding.DECODE,ignoreErrors:!1,isEvalSupported:!0};function W(A){var M=A.xref,j=A.resources,C=A.handler,x=A.forceDataSchema,F=x===void 0?!1:x,$=A.pdfFunctionFactory;this.xref=M,this.resources=j,this.handler=C,this.forceDataSchema=F,this.pdfFunctionFactory=$}W.prototype={canDecode:function(M){return M instanceof s.JpegStream&&W.isDecodable(M,this.xref,this.resources,this.pdfFunctionFactory)},decode:function(M){var j=M.dict,C=j.get("ColorSpace","CS");C=V.ColorSpace.parse(C,this.xref,this.resources,this.pdfFunctionFactory);var x=C.numComps,F=this.handler.sendWithPromise("JpegDecode",[M.getIR(this.forceDataSchema),x]);return F.then(function($){var G=$.data;return new s.Stream(G,0,G.length,M.dict)})}},W.isSupported=function(A,M,j,C){var x=A.dict;if(x.has("DecodeParms")||x.has("DP"))return!1;var F=V.ColorSpace.parse(x.get("ColorSpace","CS"),M,j,C);return(F.name==="DeviceGray"||F.name==="DeviceRGB")&&F.isDefaultDecode(x.getArray("Decode","D"))},W.isDecodable=function(A,M,j,C){var x=A.dict;if(x.has("DecodeParms")||x.has("DP"))return!1;var F=V.ColorSpace.parse(x.get("ColorSpace","CS"),M,j,C);return(F.numComps===1||F.numComps===3)&&F.isDefaultDecode(x.getArray("Decode","D"))};function q(A){var M=this,j=A.pdfManager,C=A.xref,x=A.handler,F=A.pageIndex,$=A.idFactory,G=A.fontCache,Z=A.builtInCMapCache,J=A.options,Y=J===void 0?null:J,ee=A.pdfFunctionFactory;this.pdfManager=j,this.xref=C,this.handler=x,this.pageIndex=F,this.idFactory=$,this.fontCache=G,this.builtInCMapCache=Z,this.options=Y||I,this.pdfFunctionFactory=ee,this.fetchBuiltInCMap=function(ae){var pe=M.builtInCMapCache[ae];return pe?Promise.resolve(pe):M.handler.sendWithPromise("FetchBuiltInCMap",{name:ae}).then(function(se){return se.compressionType!==a.CMapCompressionType.NONE&&(M.builtInCMapCache[ae]=se),se})}}var B=20,N=100;function L(){this.reset()}L.prototype={check:function(){return++this.checked<N?!1:(this.checked=0,this.endTime<=Date.now())},reset:function(){this.endTime=Date.now()+B,this.checked=0}};function P(A){if(!(0,t.isName)(A))return"source-over";switch(A.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return(0,a.warn)("Unsupported blend mode: "+A.name),"source-over"}var O=Promise.resolve(),E=1,w=2;return q.prototype={clone:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I,j=Object.create(this);return j.options=M,j},hasBlendModes:function(M){if(!(0,t.isDict)(M))return!1;var j=Object.create(null);M.objId&&(j[M.objId]=!0);for(var C=[M],x=this.xref;C.length;){var F,$,G,Z=C.shift(),J=Z.get("ExtGState");if((0,t.isDict)(J)){var Y=J.getKeys();for($=0,G=Y.length;$<G;$++){F=Y[$];var ee=J.get(F),ae=ee.get("BM");if((0,t.isName)(ae)&&ae.name!=="Normal")return!0}}var pe=Z.get("XObject");if((0,t.isDict)(pe)){var se=pe.getKeys();for($=0,G=se.length;$<G;$++){F=se[$];var ue=pe.getRaw(F);if((0,t.isRef)(ue)){if(j[ue.toString()])continue;ue=x.fetch(ue)}if((0,t.isStream)(ue)){if(ue.dict.objId){if(j[ue.dict.objId])continue;j[ue.dict.objId]=!0}var le=ue.dict.get("Resources");(0,t.isDict)(le)&&(!le.objId||!j[le.objId])&&(C.push(le),le.objId&&(j[le.objId]=!0))}}}}return!1},buildFormXObject:function(M,j,C,x,F,$){var G=j.dict,Z=G.getArray("Matrix"),J=G.getArray("BBox"),Y=G.get("Group");if(Y){var ee={matrix:Z,bbox:J,smask:C,isolated:!1,knockout:!1},ae=Y.get("S"),pe=null;(0,t.isName)(ae,"Transparency")&&(ee.isolated=Y.get("I")||!1,ee.knockout=Y.get("K")||!1,Y.has("CS")&&(pe=V.ColorSpace.parse(Y.get("CS"),this.xref,M,this.pdfFunctionFactory))),C&&C.backdrop&&(pe=pe||V.ColorSpace.singletons.rgb,C.backdrop=pe.getRgb(C.backdrop,0)),x.addOp(a.OPS.beginGroup,[ee])}return x.addOp(a.OPS.paintFormXObjectBegin,[Z,J]),this.getOperatorList({stream:j,task:F,resources:G.get("Resources")||M,operatorList:x,initialState:$}).then(function(){x.addOp(a.OPS.paintFormXObjectEnd,[]),Y&&x.addOp(a.OPS.endGroup,[ee])})},buildPaintImageXObject:function(M,j,C,x,F,$){var G=this,Z=j.dict,J=Z.get("Width","W"),Y=Z.get("Height","H");if(!(J&&(0,a.isNum)(J))||!(Y&&(0,a.isNum)(Y))){(0,a.warn)("Image dimensions are missing, or not numbers.");return}var ee=this.options.maxImageSize;if(ee!==-1&&J*Y>ee){(0,a.warn)("Image exceeded maximum allowed size and was removed.");return}var ae=Z.get("ImageMask","IM")||!1,pe,se;if(ae){var ue=Z.get("Width","W"),le=Z.get("Height","H"),ie=ue+7>>3,de=j.getBytes(ie*le),fe=Z.getArray("Decode","D");pe=T.PDFImage.createMask({imgArray:de,width:ue,height:le,imageIsFromDecodeStream:j instanceof s.DecodeStream,inverseDecode:!!fe&&fe[0]>0}),pe.cached=!0,se=[pe],x.addOp(a.OPS.paintImageMaskXObject,se),F&&($[F]={fn:a.OPS.paintImageMaskXObject,args:se});return}var he=Z.get("SMask","SM")||!1,Se=Z.get("Mask")||!1,Ce=200;if(C&&!he&&!Se&&!(j instanceof s.JpegStream)&&J+Y<Ce){var Ae=new T.PDFImage({xref:this.xref,res:M,image:j,pdfFunctionFactory:this.pdfFunctionFactory});pe=Ae.createImageData(!0),x.addOp(a.OPS.paintInlineImageXObject,[pe]);return}var Ee=this.options.nativeImageDecoderSupport,ke="img_"+this.idFactory.createObjId();if(x.addDependency(ke),se=[ke,J,Y],Ee!==a.NativeImageDecoding.NONE&&!he&&!Se&&j instanceof s.JpegStream&&W.isSupported(j,this.xref,M,this.pdfFunctionFactory)){x.addOp(a.OPS.paintJpegXObject,se),this.handler.send("obj",[ke,this.pageIndex,"JpegStream",j.getIR(this.options.forceDataSchema)]),F&&($[F]={fn:a.OPS.paintJpegXObject,args:se});return}var Fe=null;Ee===a.NativeImageDecoding.DECODE&&(j instanceof s.JpegStream||Se instanceof s.JpegStream||he instanceof s.JpegStream)&&(Fe=new W({xref:this.xref,resources:M,handler:this.handler,forceDataSchema:this.options.forceDataSchema,pdfFunctionFactory:this.pdfFunctionFactory})),T.PDFImage.buildImage({handler:this.handler,xref:this.xref,res:M,image:j,nativeDecoder:Fe,pdfFunctionFactory:this.pdfFunctionFactory}).then(function(Pe){var Ie=Pe.createImageData(!1);G.handler.send("obj",[ke,G.pageIndex,"Image",Ie],[Ie.data.buffer])}).catch(function(Pe){(0,a.warn)("Unable to decode image: "+Pe),G.handler.send("obj",[ke,G.pageIndex,"Image",null])}),x.addOp(a.OPS.paintImageXObject,se),F&&($[F]={fn:a.OPS.paintImageXObject,args:se})},handleSMask:function(M,j,C,x,F){var $=M.get("G"),G={subtype:M.get("S").name,backdrop:M.get("BC")},Z=M.get("TR");if((0,D.isPDFFunction)(Z)){for(var J=this.pdfFunctionFactory.create(Z),Y=new Uint8Array(256),ee=new Float32Array(1),ae=0;ae<256;ae++)ee[0]=ae/255,J(ee,0,ee,0),Y[ae]=ee[0]*255|0;G.transferMap=Y}return this.buildFormXObject(j,$,G,C,x,F.state.clone())},handleTilingType:function(M,j,C,x,F,$,G){var Z=this,J=new m,Y=[F.get("Resources"),C],ee=t.Dict.merge(this.xref,Y);return this.getOperatorList({stream:x,task:G,resources:ee,operatorList:J}).then(function(){return(0,y.getTilingPatternIR)({fnArray:J.fnArray,argsArray:J.argsArray},F,j)}).then(function(ae){$.addDependencies(J.dependencies),$.addOp(M,ae)},function(ae){if(Z.options.ignoreErrors){Z.handler.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.unknown}),(0,a.warn)('handleTilingType - ignoring pattern: "'+ae+'".');return}throw ae})},handleSetFont:function(M,j,C,x,F,$){var G=this,Z;return j&&(j=j.slice(),Z=j[0].name),this.loadFont(Z,C,M).then(function(J){return J.font.isType3Font?J.loadType3Data(G,M,x,F).then(function(){return J}).catch(function(Y){return G.handler.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.font}),new g("g_font_error",new o.ErrorFont("Type3 font load error: "+Y),J.font)}):J}).then(function(J){return $.font=J.font,J.send(G.handler),J.loadedName})},handleText:function(M,j){var C=this,x=j.font,F=x.charsToGlyphs(M),$=!!(j.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG);if(x.data&&($||this.options.disableFontFace))for(var G=function(pe){if(!x.renderer.hasBuiltPath(pe)){var se=x.renderer.getPathJs(pe);C.handler.send("commonobj",[x.loadedName+"_path_"+pe,"FontPath",se])}},Z=0,J=F.length;Z<J;Z++){var Y=F[Z];G(Y.fontChar);var ee=Y.accent;ee&&ee.fontChar&&G(ee.fontChar)}return F},setGState:function(M,j,C,x,F){for(var $=this,G=[],Z=j.getKeys(),J=Promise.resolve(),Y=function(){var se=Z[ee],ue=j.get(se);switch(se){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":G.push([se,ue]);break;case"Font":J=J.then(function(){return $.handleSetFont(M,null,ue[0],C,x,F.state).then(function(le){C.addDependency(le),G.push([se,[le,ue[1]]])})});break;case"BM":G.push([se,P(ue)]);break;case"SMask":if((0,t.isName)(ue,"None")){G.push([se,!1]);break}(0,t.isDict)(ue)?(J=J.then(function(){return $.handleSMask(ue,M,C,x,F)}),G.push([se,!0])):(0,a.warn)("Unsupported SMask type");break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,a.info)("graphic state operator "+se);break;default:(0,a.info)("Unknown graphic state operator "+se);break}},ee=0,ae=Z.length;ee<ae;ee++)Y();return J.then(function(){G.length>0&&C.addOp(a.OPS.setGState,[G])})},loadFont:function(M,j,C){var x=this;function F(){return Promise.resolve(new g("g_font_error",new o.ErrorFont("Font "+M+" is not available"),j))}var $,G=this.xref;if(j){if(!(0,t.isRef)(j))throw new Error('The "font" object should be a reference.');$=j}else{var Z=C.get("Font");if(Z)$=Z.getRaw(M);else return(0,a.warn)("fontRes not available"),F()}if(!$)return(0,a.warn)("fontRef not available"),F();if(this.fontCache.has($))return this.fontCache.get($);if(j=G.fetchIfRef($),!(0,t.isDict)(j))return F();if(j.translated)return j.translated;var J=(0,a.createPromiseCapability)(),Y=this.preEvaluateFont(j),ee=Y.descriptor,ae=(0,t.isRef)($),pe;if(ae&&(pe=$.toString()),(0,t.isDict)(ee)){ee.fontAliases||(ee.fontAliases=Object.create(null));var se=ee.fontAliases,ue=Y.hash;if(se[ue]){var le=se[ue].aliasRef;if(ae&&le&&this.fontCache.has(le))return this.fontCache.putAlias($,le),this.fontCache.get($)}else se[ue]={fontID:o.Font.getFontID()};ae&&(se[ue].aliasRef=$),pe=se[ue].fontID}ae?this.fontCache.put($,J.promise):(pe||(pe=this.idFactory.createObjId()),this.fontCache.put("id_"+pe,J.promise)),(0,a.assert)(pe,'The "fontID" must be defined.'),j.loadedName="g_"+this.pdfManager.docId+"_f"+pe,j.translated=J.promise;var ie;try{ie=this.translateFont(Y)}catch(de){ie=Promise.reject(de)}return ie.then(function(de){if(de.fontType!==void 0){var fe=G.stats.fontTypes;fe[de.fontType]=!0}J.resolve(new g(j.loadedName,de,j))}).catch(function(de){x.handler.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.font});try{var fe=Y.descriptor,he=fe&&fe.get("FontFile3"),Se=he&&he.get("Subtype"),Ce=(0,o.getFontType)(Y.type,Se&&Se.name),Ae=G.stats.fontTypes;Ae[Ce]=!0}catch{}J.resolve(new g(j.loadedName,new o.ErrorFont(de instanceof Error?de.message:de),j))}),J.promise},buildPath:function(M,j,C){var x=M.length-1;if(C||(C=[]),x<0||M.fnArray[x]!==a.OPS.constructPath)M.addOp(a.OPS.constructPath,[[j],C]);else{var F=M.argsArray[x];F[0].push(j),Array.prototype.push.apply(F[1],C)}},handleColorN:function(M,j,C,x,F,$,G){var Z=C[C.length-1],J;if((0,t.isName)(Z)&&(J=F.get(Z.name))){var Y=(0,t.isStream)(J)?J.dict:J,ee=Y.get("PatternType");if(ee===E){var ae=x.base?x.base.getRgb(C,0):null;return this.handleTilingType(j,ae,$,J,Y,M,G)}else if(ee===w){var pe=Y.get("Shading"),se=Y.getArray("Matrix");return J=y.Pattern.parseShading(pe,se,this.xref,$,this.handler,this.pdfFunctionFactory),M.addOp(j,J.getIR()),Promise.resolve()}return Promise.reject(new Error("Unknown PatternType: "+ee))}return M.addOp(j,C),Promise.resolve()},getOperatorList:function(M){var j=this,C=M.stream,x=M.task,F=M.resources,$=M.operatorList,G=M.initialState,Z=G===void 0?null:G;if(F=F||t.Dict.empty,Z=Z||new f,!$)throw new Error('getOperatorList: missing "operatorList" parameter');var J=this,Y=this.xref,ee=Object.create(null),ae=F.get("XObject")||t.Dict.empty,pe=F.get("Pattern")||t.Dict.empty,se=new v(Z),ue=new p(C,Y,se),le=new L;function ie(de){for(var fe=0,he=ue.savedStatesDepth;fe<he;fe++)$.addOp(a.OPS.restore,[])}return new Promise(function de(fe,he){var Se=function(_e){_e.then(function(){try{de(fe,he)}catch(ge){he(ge)}},he)};x.ensureNotTerminated(),le.reset();for(var Ce,Ae={},Ee,ke,Fe;!(Ce=le.check())&&(Ae.args=null,!!ue.read(Ae));){var Pe=Ae.args,Ie=Ae.fn;switch(Ie|0){case a.OPS.paintXObject:var $e=Pe[0].name;if($e&&ee[$e]!==void 0){$.addOp(ee[$e].fn,ee[$e].args),Pe=null;continue}Se(new Promise(function(xe,_e){if(!$e)throw new a.FormatError("XObject must be referred to by name.");var ge=ae.get($e);if(!ge){$.addOp(Ie,Pe),xe();return}if(!(0,t.isStream)(ge))throw new a.FormatError("XObject should be a stream");var ye=ge.dict.get("Subtype");if(!(0,t.isName)(ye))throw new a.FormatError("XObject should have a Name subtype");if(ye.name==="Form"){se.save(),J.buildFormXObject(F,ge,null,$,x,se.state.clone()).then(function(){se.restore(),xe()},_e);return}else if(ye.name==="Image")J.buildPaintImageXObject(F,ge,!1,$,$e,ee);else if(ye.name==="PS")(0,a.info)("Ignored XObject subtype PS");else throw new a.FormatError("Unhandled XObject subtype "+ye.name);xe()}).catch(function(xe){if(J.options.ignoreErrors){J.handler.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.unknown}),(0,a.warn)('getOperatorList - ignoring XObject: "'+xe+'".');return}throw xe}));return;case a.OPS.setFont:var Ke=Pe[1];Se(J.handleSetFont(F,Pe,null,$,x,se.state).then(function(xe){$.addDependency(xe),$.addOp(a.OPS.setFont,[xe,Ke])}));return;case a.OPS.endInlineImage:var Ze=Pe[0].cacheKey;if(Ze){var ot=ee[Ze];if(ot!==void 0){$.addOp(ot.fn,ot.args),Pe=null;continue}}J.buildPaintImageXObject(F,Pe[0],!0,$,Ze,ee),Pe=null;continue;case a.OPS.showText:Pe[0]=J.handleText(Pe[0],se.state);break;case a.OPS.showSpacedText:var et=Pe[0],ct=[],ht=et.length,Ge=se.state;for(Ee=0;Ee<ht;++Ee){var Be=et[Ee];(0,a.isString)(Be)?Array.prototype.push.apply(ct,J.handleText(Be,Ge)):(0,a.isNum)(Be)&&ct.push(Be)}Pe[0]=ct,Ie=a.OPS.showText;break;case a.OPS.nextLineShowText:$.addOp(a.OPS.nextLine),Pe[0]=J.handleText(Pe[0],se.state),Ie=a.OPS.showText;break;case a.OPS.nextLineSetSpacingShowText:$.addOp(a.OPS.nextLine),$.addOp(a.OPS.setWordSpacing,[Pe.shift()]),$.addOp(a.OPS.setCharSpacing,[Pe.shift()]),Pe[0]=J.handleText(Pe[0],se.state),Ie=a.OPS.showText;break;case a.OPS.setTextRenderingMode:se.state.textRenderingMode=Pe[0];break;case a.OPS.setFillColorSpace:se.state.fillColorSpace=V.ColorSpace.parse(Pe[0],Y,F,J.pdfFunctionFactory);continue;case a.OPS.setStrokeColorSpace:se.state.strokeColorSpace=V.ColorSpace.parse(Pe[0],Y,F,J.pdfFunctionFactory);continue;case a.OPS.setFillColor:Fe=se.state.fillColorSpace,Pe=Fe.getRgb(Pe,0),Ie=a.OPS.setFillRGBColor;break;case a.OPS.setStrokeColor:Fe=se.state.strokeColorSpace,Pe=Fe.getRgb(Pe,0),Ie=a.OPS.setStrokeRGBColor;break;case a.OPS.setFillGray:se.state.fillColorSpace=V.ColorSpace.singletons.gray,Pe=V.ColorSpace.singletons.gray.getRgb(Pe,0),Ie=a.OPS.setFillRGBColor;break;case a.OPS.setStrokeGray:se.state.strokeColorSpace=V.ColorSpace.singletons.gray,Pe=V.ColorSpace.singletons.gray.getRgb(Pe,0),Ie=a.OPS.setStrokeRGBColor;break;case a.OPS.setFillCMYKColor:se.state.fillColorSpace=V.ColorSpace.singletons.cmyk,Pe=V.ColorSpace.singletons.cmyk.getRgb(Pe,0),Ie=a.OPS.setFillRGBColor;break;case a.OPS.setStrokeCMYKColor:se.state.strokeColorSpace=V.ColorSpace.singletons.cmyk,Pe=V.ColorSpace.singletons.cmyk.getRgb(Pe,0),Ie=a.OPS.setStrokeRGBColor;break;case a.OPS.setFillRGBColor:se.state.fillColorSpace=V.ColorSpace.singletons.rgb,Pe=V.ColorSpace.singletons.rgb.getRgb(Pe,0);break;case a.OPS.setStrokeRGBColor:se.state.strokeColorSpace=V.ColorSpace.singletons.rgb,Pe=V.ColorSpace.singletons.rgb.getRgb(Pe,0);break;case a.OPS.setFillColorN:if(Fe=se.state.fillColorSpace,Fe.name==="Pattern"){Se(J.handleColorN($,a.OPS.setFillColorN,Pe,Fe,pe,F,x));return}Pe=Fe.getRgb(Pe,0),Ie=a.OPS.setFillRGBColor;break;case a.OPS.setStrokeColorN:if(Fe=se.state.strokeColorSpace,Fe.name==="Pattern"){Se(J.handleColorN($,a.OPS.setStrokeColorN,Pe,Fe,pe,F,x));return}Pe=Fe.getRgb(Pe,0),Ie=a.OPS.setStrokeRGBColor;break;case a.OPS.shadingFill:var wt=F.get("Shading");if(!wt)throw new a.FormatError("No shading resource found");var At=wt.get(Pe[0].name);if(!At)throw new a.FormatError("No shading object found");var Q=y.Pattern.parseShading(At,null,Y,F,J.handler,J.pdfFunctionFactory),ve=Q.getIR();Pe=[ve],Ie=a.OPS.shadingFill;break;case a.OPS.setGState:var K=Pe[0],re=F.get("ExtGState");if(!(0,t.isDict)(re)||!re.has(K.name))break;var me=re.get(K.name);Se(J.setGState(F,me,$,x,se));return;case a.OPS.moveTo:case a.OPS.lineTo:case a.OPS.curveTo:case a.OPS.curveTo2:case a.OPS.curveTo3:case a.OPS.closePath:J.buildPath($,Ie,Pe);continue;case a.OPS.rectangle:J.buildPath($,Ie,Pe);continue;case a.OPS.markPoint:case a.OPS.markPointProps:case a.OPS.beginMarkedContent:case a.OPS.beginMarkedContentProps:case a.OPS.endMarkedContent:case a.OPS.beginCompat:case a.OPS.endCompat:continue;default:if(Pe!==null){for(Ee=0,ke=Pe.length;Ee<ke&&!(Pe[Ee]instanceof t.Dict);Ee++);if(Ee<ke){(0,a.warn)("getOperatorList - ignoring operator: "+Ie);continue}}}$.addOp(Ie,Pe)}if(Ce){Se(O);return}ie(),fe()}).catch(function(de){if(j.options.ignoreErrors){j.handler.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.unknown}),(0,a.warn)("getOperatorList - ignoring errors during task: "+x.name),ie();return}throw de})},getTextContent:function(M){var j=this,C=M.stream,x=M.task,F=M.resources,$=M.stateManager,G=$===void 0?null:$,Z=M.normalizeWhitespace,J=Z===void 0?!1:Z,Y=M.combineTextItems,ee=Y===void 0?!1:Y,ae=M.sink,pe=M.seenStyles,se=pe===void 0?Object.create(null):pe;F=F||t.Dict.empty,G=G||new v(new b);var ue=/\s/g,le={items:[],styles:Object.create(null)},ie={initialized:!1,str:[],width:0,height:0,vertical:!1,lastAdvanceWidth:0,lastAdvanceHeight:0,textAdvanceScale:0,spaceWidth:0,fakeSpaceMin:1/0,fakeMultiSpaceMin:1/0,fakeMultiSpaceMax:-0,textRunBreakAllowed:!1,transform:null,fontName:null},de=.3,fe=1.5,he=4,Se=this,Ce=this.xref,Ae=null,Ee=Object.create(null),ke=new p(C,Ce,G),Fe;function Pe(){if(ie.initialized)return ie;var Ge=Fe.font;Ge.loadedName in se||(se[Ge.loadedName]=!0,le.styles[Ge.loadedName]={fontFamily:Ge.fallbackName,ascent:Ge.ascent,descent:Ge.descent,vertical:Ge.vertical}),ie.fontName=Ge.loadedName;var Be=[Fe.fontSize*Fe.textHScale,0,0,Fe.fontSize,0,Fe.textRise];if(Ge.isType3Font&&Fe.fontMatrix!==a.FONT_IDENTITY_MATRIX&&Fe.fontSize===1){var wt=Ge.bbox[3]-Ge.bbox[1];wt>0&&(wt=wt*Fe.fontMatrix[3],Be[3]*=wt)}var At=a.Util.transform(Fe.ctm,a.Util.transform(Fe.textMatrix,Be));ie.transform=At,Ge.vertical?(ie.width=Math.sqrt(At[0]*At[0]+At[1]*At[1]),ie.height=0,ie.vertical=!0):(ie.width=0,ie.height=Math.sqrt(At[2]*At[2]+At[3]*At[3]),ie.vertical=!1);var Q=Fe.textLineMatrix[0],ve=Fe.textLineMatrix[1],K=Math.sqrt(Q*Q+ve*ve);Q=Fe.ctm[0],ve=Fe.ctm[1];var re=Math.sqrt(Q*Q+ve*ve);ie.textAdvanceScale=re*K,ie.lastAdvanceWidth=0,ie.lastAdvanceHeight=0;var me=Ge.spaceWidth/1e3*Fe.fontSize;return me?(ie.spaceWidth=me,ie.fakeSpaceMin=me*de,ie.fakeMultiSpaceMin=me*fe,ie.fakeMultiSpaceMax=me*he,ie.textRunBreakAllowed=!Ge.isMonospace):(ie.spaceWidth=0,ie.fakeSpaceMin=1/0,ie.fakeMultiSpaceMin=1/0,ie.fakeMultiSpaceMax=0,ie.textRunBreakAllowed=!1),ie.initialized=!0,ie}function Ie(Ge){for(var Be=0,wt=Ge.length,At;Be<wt&&(At=Ge.charCodeAt(Be))>=32&&At<=127;)Be++;return Be<wt?Ge.replace(ue," "):Ge}function $e(Ge){var Be=Ge.str.join(""),wt=(0,S.bidi)(Be,-1,Ge.vertical);return{str:J?Ie(wt.str):wt.str,dir:wt.dir,width:Ge.width,height:Ge.height,transform:Ge.transform,fontName:Ge.fontName}}function Ke(Ge,Be){return Se.loadFont(Ge,Be,F).then(function(wt){Fe.font=wt.font,Fe.fontMatrix=wt.font.fontMatrix||a.FONT_IDENTITY_MATRIX})}function Ze(Ge){for(var Be=Fe.font,wt=Pe(),At=0,Q=0,ve=Be.charsToGlyphs(Ge),K=0;K<ve.length;K++){var re=ve[K],me=null;Be.vertical&&re.vmetric?me=re.vmetric[0]:me=re.width;var xe=re.unicode,_e=(0,d.getNormalizedUnicodes)();_e[xe]!==void 0&&(xe=_e[xe]),xe=(0,d.reverseIfRtl)(xe);var ge=Fe.charSpacing;if(re.isSpace){var ye=Fe.wordSpacing;ge+=ye,ye>0&&ot(ye,wt.str)}var Ne=0,Le=0;if(Be.vertical){var Xe=me*Fe.fontMatrix[0];Le=Xe*Fe.fontSize+ge,Q+=Le}else{var Je=me*Fe.fontMatrix[0];Ne=(Je*Fe.fontSize+ge)*Fe.textHScale,At+=Ne}Fe.translateTextMatrix(Ne,Le),wt.str.push(xe)}return Be.vertical?(wt.lastAdvanceHeight=Q,wt.height+=Math.abs(Q)):(wt.lastAdvanceWidth=At,wt.width+=At),wt}function ot(Ge,Be){if(!(Ge<ie.fakeSpaceMin)){if(Ge<ie.fakeMultiSpaceMin){Be.push(" ");return}for(var wt=Math.round(Ge/ie.spaceWidth);wt-- >0;)Be.push(" ")}}function et(){ie.initialized&&(ie.width*=ie.textAdvanceScale,ie.height*=ie.textAdvanceScale,le.items.push($e(ie)),ie.initialized=!1,ie.str.length=0)}function ct(){var Ge=le.items.length;Ge>0&&(ae.enqueue(le,Ge),le.items=[],le.styles=Object.create(null))}var ht=new L;return new Promise(function Ge(Be,wt){var At=function(Mr){ct(),Promise.all([Mr,ae.ready]).then(function(){try{Ge(Be,wt)}catch(ra){wt(ra)}},wt)};x.ensureNotTerminated(),ht.reset();for(var Q,ve={},K=[];!(Q=ht.check())&&(K.length=0,ve.args=K,!!ke.read(ve));){Fe=G.state;var re=ve.fn;K=ve.args;var me,xe;switch(re|0){case a.OPS.setFont:var _e=K[0].name,ge=K[1];if(Fe.font&&_e===Fe.fontName&&ge===Fe.fontSize)break;et(),Fe.fontName=_e,Fe.fontSize=ge,At(Ke(_e,null));return;case a.OPS.setTextRise:et(),Fe.textRise=K[0];break;case a.OPS.setHScale:et(),Fe.textHScale=K[0]/100;break;case a.OPS.setLeading:et(),Fe.leading=K[0];break;case a.OPS.moveText:var ye=Fe.font?(Fe.font.vertical?K[0]:K[1])===0:!1;if(me=K[0]-K[1],ee&&ye&&ie.initialized&&me>0&&me<=ie.fakeMultiSpaceMax){Fe.translateTextLineMatrix(K[0],K[1]),ie.width+=K[0]-ie.lastAdvanceWidth,ie.height+=K[1]-ie.lastAdvanceHeight,xe=K[0]-ie.lastAdvanceWidth-(K[1]-ie.lastAdvanceHeight),ot(xe,ie.str);break}et(),Fe.translateTextLineMatrix(K[0],K[1]),Fe.textMatrix=Fe.textLineMatrix.slice();break;case a.OPS.setLeadingMoveText:et(),Fe.leading=-K[1],Fe.translateTextLineMatrix(K[0],K[1]),Fe.textMatrix=Fe.textLineMatrix.slice();break;case a.OPS.nextLine:et(),Fe.carriageReturn();break;case a.OPS.setTextMatrix:if(me=Fe.calcTextLineMatrixAdvance(K[0],K[1],K[2],K[3],K[4],K[5]),ee&&me!==null&&ie.initialized&&me.value>0&&me.value<=ie.fakeMultiSpaceMax){Fe.translateTextLineMatrix(me.width,me.height),ie.width+=me.width-ie.lastAdvanceWidth,ie.height+=me.height-ie.lastAdvanceHeight,xe=me.width-ie.lastAdvanceWidth-(me.height-ie.lastAdvanceHeight),ot(xe,ie.str);break}et(),Fe.setTextMatrix(K[0],K[1],K[2],K[3],K[4],K[5]),Fe.setTextLineMatrix(K[0],K[1],K[2],K[3],K[4],K[5]);break;case a.OPS.setCharSpacing:Fe.charSpacing=K[0];break;case a.OPS.setWordSpacing:Fe.wordSpacing=K[0];break;case a.OPS.beginText:et(),Fe.textMatrix=a.IDENTITY_MATRIX.slice(),Fe.textLineMatrix=a.IDENTITY_MATRIX.slice();break;case a.OPS.showSpacedText:for(var Ne=K[0],Le,Je=0,Xe=Ne.length;Je<Xe;Je++)if(typeof Ne[Je]=="string")Ze(Ne[Je]);else if((0,a.isNum)(Ne[Je])){Pe(),me=Ne[Je]*Fe.fontSize/1e3;var ut=!1;Fe.font.vertical?(Le=me,Fe.translateTextMatrix(0,Le),ut=ie.textRunBreakAllowed&&me>ie.fakeMultiSpaceMax,ut||(ie.height+=Le)):(me=-me,Le=me*Fe.textHScale,Fe.translateTextMatrix(Le,0),ut=ie.textRunBreakAllowed&&me>ie.fakeMultiSpaceMax,ut||(ie.width+=Le)),ut?et():me>0&&ot(me,ie.str)}break;case a.OPS.showText:Ze(K[0]);break;case a.OPS.nextLineShowText:et(),Fe.carriageReturn(),Ze(K[0]);break;case a.OPS.nextLineSetSpacingShowText:et(),Fe.wordSpacing=K[0],Fe.charSpacing=K[1],Fe.carriageReturn(),Ze(K[2]);break;case a.OPS.paintXObject:et(),Ae||(Ae=F.get("XObject")||t.Dict.empty);var mt=K[0].name;if(mt&&Ee[mt]!==void 0)break;At(new Promise(function(hr,Mr){if(!mt)throw new a.FormatError("XObject must be referred to by name.");var ra=Ae.get(mt);if(!ra){hr();return}if(!(0,t.isStream)(ra))throw new a.FormatError("XObject should be a stream");var Kr=ra.dict.get("Subtype");if(!(0,t.isName)(Kr))throw new a.FormatError("XObject should have a Name subtype");if(Kr.name!=="Form"){Ee[mt]=!0,hr();return}var Ye=G.state.clone(),De=new v(Ye),He=ra.dict.getArray("Matrix");Array.isArray(He)&&He.length===6&&De.transform(He),ct();var tt={enqueueInvoked:!1,enqueue:function(lr,Rr){this.enqueueInvoked=!0,ae.enqueue(lr,Rr)},get desiredSize(){return ae.desiredSize},get ready(){return ae.ready}};Se.getTextContent({stream:ra,task:x,resources:ra.dict.get("Resources")||F,stateManager:De,normalizeWhitespace:J,combineTextItems:ee,sink:tt,seenStyles:se}).then(function(){tt.enqueueInvoked||(Ee[mt]=!0),hr()},Mr)}).catch(function(hr){if(!(hr instanceof a.AbortException)){if(Se.options.ignoreErrors){(0,a.warn)('getTextContent - ignoring XObject: "'+hr+'".');return}throw hr}}));return;case a.OPS.setGState:et();var Tt=K[0],Kt=F.get("ExtGState");if(!(0,t.isDict)(Kt)||!(0,t.isName)(Tt))break;var yr=Kt.get(Tt.name);if(!(0,t.isDict)(yr))break;var dr=yr.get("Font");if(dr){Fe.fontName=null,Fe.fontSize=dr[1],At(Ke(null,dr[0]));return}break}if(le.items.length>=ae.desiredSize){Q=!0;break}}if(Q){At(O);return}et(),ct(),Be()}).catch(function(Ge){if(!(Ge instanceof a.AbortException)){if(j.options.ignoreErrors){(0,a.warn)("getTextContent - ignoring errors during task: "+x.name),et(),ct();return}throw Ge}})},extractDataStructures:function(M,j,C){var x=this,F=this.xref,$=M.get("ToUnicode")||j.get("ToUnicode"),G=$?this.readToUnicode($):Promise.resolve(void 0);if(C.composite){var Z=M.get("CIDSystemInfo");(0,t.isDict)(Z)&&(C.cidSystemInfo={registry:Z.get("Registry"),ordering:Z.get("Ordering"),supplement:Z.get("Supplement")});var J=M.get("CIDToGIDMap");(0,t.isStream)(J)&&(C.cidToGidMap=this.readCidToGidMap(J))}var Y=[],ee=null,ae;if(M.has("Encoding")){if(ae=M.get("Encoding"),(0,t.isDict)(ae)){if(ee=ae.get("BaseEncoding"),ee=(0,t.isName)(ee)?ee.name:null,ae.has("Differences"))for(var pe=ae.get("Differences"),se=0,ue=0,le=pe.length;ue<le;ue++){var ie=F.fetchIfRef(pe[ue]);if((0,a.isNum)(ie))se=ie;else if((0,t.isName)(ie))Y[se++]=ie.name;else throw new a.FormatError("Invalid entry in 'Differences' array: "+ie)}}else if((0,t.isName)(ae))ee=ae.name;else throw new a.FormatError("Encoding is not a Name nor a Dict");ee!=="MacRomanEncoding"&&ee!=="MacExpertEncoding"&&ee!=="WinAnsiEncoding"&&(ee=null)}if(ee)C.defaultEncoding=(0,l.getEncoding)(ee).slice();else{var de=!!(C.flags&o.FontFlags.Symbolic),fe=!!(C.flags&o.FontFlags.Nonsymbolic);ae=l.StandardEncoding,C.type==="TrueType"&&!fe&&(ae=l.WinAnsiEncoding),de&&(ae=l.MacRomanEncoding,C.file||(/Symbol/i.test(C.name)?ae=l.SymbolSetEncoding:/Dingbats/i.test(C.name)&&(ae=l.ZapfDingbatsEncoding))),C.defaultEncoding=ae}return C.differences=Y,C.baseEncodingName=ee,C.hasEncoding=!!ee||Y.length>0,C.dict=M,G.then(function(he){return C.toUnicode=he,x.buildToUnicode(C)}).then(function(he){return C.toUnicode=he,C})},buildToUnicode:function(M){if(M.hasIncludedToUnicodeMap=!!M.toUnicode&&M.toUnicode.length>0,M.hasIncludedToUnicodeMap)return Promise.resolve(M.toUnicode);var j,C,x;if(!M.composite){j=[];var F=M.defaultEncoding.slice(),$=M.baseEncodingName,G=M.differences;for(C in G)x=G[C],x!==".notdef"&&(F[C]=x);var Z=(0,U.getGlyphsUnicode)();for(C in F)if(x=F[C],x!==""){if(Z[x]===void 0){var J=0;switch(x[0]){case"G":x.length===3&&(J=parseInt(x.substr(1),16));break;case"g":x.length===5&&(J=parseInt(x.substr(1),16));break;case"C":case"c":x.length>=3&&(J=+x.substr(1));break;default:var Y=(0,d.getUnicodeForGlyph)(x,Z);Y!==-1&&(J=Y)}if(J){if($&&J===+C){var ee=(0,l.getEncoding)($);if(ee&&(x=ee[C])){j[C]=String.fromCharCode(Z[x]);continue}}j[C]=String.fromCharCode(J)}continue}j[C]=String.fromCharCode(Z[x])}return Promise.resolve(new o.ToUnicodeMap(j))}if(M.composite&&(M.cMap.builtInCMap&&!(M.cMap instanceof i.IdentityCMap)||M.cidSystemInfo.registry==="Adobe"&&(M.cidSystemInfo.ordering==="GB1"||M.cidSystemInfo.ordering==="CNS1"||M.cidSystemInfo.ordering==="Japan1"||M.cidSystemInfo.ordering==="Korea1"))){var ae=M.cidSystemInfo.registry,pe=M.cidSystemInfo.ordering,se=t.Name.get(ae+"-"+pe+"-UCS2");return i.CMapFactory.create({encoding:se,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then(function(ue){var le=M.cMap;return j=[],le.forEach(function(ie,de){if(de>65535)throw new a.FormatError("Max size of CID is 65,535");var fe=ue.lookup(de);fe&&(j[ie]=String.fromCharCode((fe.charCodeAt(0)<<8)+fe.charCodeAt(1)))}),new o.ToUnicodeMap(j)})}return Promise.resolve(new o.IdentityToUnicodeMap(M.firstChar,M.lastChar))},readToUnicode:function(M){var j=M;return(0,t.isName)(j)?i.CMapFactory.create({encoding:j,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then(function(C){return C instanceof i.IdentityCMap?new o.IdentityToUnicodeMap(0,65535):new o.ToUnicodeMap(C.getMap())}):(0,t.isStream)(j)?i.CMapFactory.create({encoding:j,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then(function(C){if(C instanceof i.IdentityCMap)return new o.IdentityToUnicodeMap(0,65535);var x=new Array(C.length);return C.forEach(function(F,$){for(var G=[],Z=0;Z<$.length;Z+=2){var J=$.charCodeAt(Z)<<8|$.charCodeAt(Z+1);if((J&63488)!==55296){G.push(J);continue}Z+=2;var Y=$.charCodeAt(Z)<<8|$.charCodeAt(Z+1);G.push(((J&1023)<<10)+(Y&1023)+65536)}x[F]=String.fromCharCode.apply(String,G)}),new o.ToUnicodeMap(x)}):Promise.resolve(null)},readCidToGidMap:function(M){for(var j=M.getBytes(),C=[],x=0,F=j.length;x<F;x++){var $=j[x++]<<8|j[x];if($!==0){var G=x>>1;C[G]=$}}return C},extractWidths:function(M,j,C){var x=this.xref,F=[],$=0,G=[],Z,J,Y,ee,ae,pe,se,ue;if(C.composite){if($=M.has("DW")?M.get("DW"):1e3,ue=M.get("W"),ue)for(J=0,Y=ue.length;J<Y;J++)if(pe=x.fetchIfRef(ue[J++]),se=x.fetchIfRef(ue[J]),Array.isArray(se))for(ee=0,ae=se.length;ee<ae;ee++)F[pe++]=x.fetchIfRef(se[ee]);else{var le=x.fetchIfRef(ue[++J]);for(ee=pe;ee<=se;ee++)F[ee]=le}if(C.vertical){var ie=M.getArray("DW2")||[880,-1e3];if(Z=[ie[1],$*.5,ie[0]],ie=M.get("W2"),ie)for(J=0,Y=ie.length;J<Y;J++)if(pe=x.fetchIfRef(ie[J++]),se=x.fetchIfRef(ie[J]),Array.isArray(se))for(ee=0,ae=se.length;ee<ae;ee++)G[pe++]=[x.fetchIfRef(se[ee++]),x.fetchIfRef(se[ee++]),x.fetchIfRef(se[ee])];else{var de=[x.fetchIfRef(ie[++J]),x.fetchIfRef(ie[++J]),x.fetchIfRef(ie[++J])];for(ee=pe;ee<=se;ee++)G[ee]=de}}}else{var fe=C.firstChar;if(ue=M.get("Widths"),ue){for(ee=fe,J=0,Y=ue.length;J<Y;J++)F[ee++]=x.fetchIfRef(ue[J]);$=parseFloat(j.get("MissingWidth"))||0}else{var he=M.get("BaseFont");if((0,t.isName)(he)){var Se=this.getBaseFontMetrics(he.name);F=this.buildCharCodeToWidth(Se.widths,C),$=Se.defaultWidth}}}var Ce=!0,Ae=$;for(var Ee in F){var ke=F[Ee];if(ke){if(!Ae){Ae=ke;continue}if(Ae!==ke){Ce=!1;break}}}Ce&&(C.flags|=o.FontFlags.FixedPitch),C.defaultWidth=$,C.widths=F,C.defaultVMetrics=Z,C.vmetrics=G},isSerifFont:function(M){var j=M.split("-")[0];return j in(0,c.getSerifFonts)()||j.search(/serif/gi)!==-1},getBaseFontMetrics:function(M){var j=0,C=[],x=!1,F=(0,c.getStdFontMap)(),$=F[M]||M,G=(0,z.getMetrics)();$ in G||(this.isSerifFont(M)?$="Times-Roman":$="Helvetica");var Z=G[$];return(0,a.isNum)(Z)?(j=Z,x=!0):C=Z(),{defaultWidth:j,monospace:x,widths:C}},buildCharCodeToWidth:function(M,j){for(var C=Object.create(null),x=j.differences,F=j.defaultEncoding,$=0;$<256;$++){if($ in x&&M[x[$]]){C[$]=M[x[$]];continue}if($ in F&&M[F[$]]){C[$]=M[F[$]];continue}}return C},preEvaluateFont:function(M){var j=M,C=M.get("Subtype");if(!(0,t.isName)(C))throw new a.FormatError("invalid font Subtype");var x=!1,F;if(C.name==="Type0"){var $=M.get("DescendantFonts");if(!$)throw new a.FormatError("Descendant fonts are not specified");if(M=Array.isArray($)?this.xref.fetchIfRef($[0]):$,C=M.get("Subtype"),!(0,t.isName)(C))throw new a.FormatError("invalid font Subtype");x=!0}var G=M.get("FontDescriptor");if(G){var Z=new k.MurmurHash3_64,J=j.getRaw("Encoding");if((0,t.isName)(J))Z.update(J.name);else if((0,t.isRef)(J))Z.update(J.toString());else if((0,t.isDict)(J))for(var Y=J.getKeys(),ee=0,ae=Y.length;ee<ae;ee++){var pe=J.getRaw(Y[ee]);if((0,t.isName)(pe))Z.update(pe.name);else if((0,t.isRef)(pe))Z.update(pe.toString());else if(Array.isArray(pe)){for(var se=pe.length,ue=new Array(se),le=0;le<se;le++){var ie=pe[le];(0,t.isName)(ie)?ue[le]=ie.name:((0,a.isNum)(ie)||(0,t.isRef)(ie))&&(ue[le]=ie.toString())}Z.update(ue.join())}}var de=M.get("ToUnicode")||j.get("ToUnicode");if((0,t.isStream)(de)){var fe=de.str||de;F=fe.buffer?new Uint8Array(fe.buffer.buffer,0,fe.bufferLength):new Uint8Array(fe.bytes.buffer,fe.start,fe.end-fe.start),Z.update(F)}else(0,t.isName)(de)&&Z.update(de.name);var he=M.get("Widths")||j.get("Widths");he&&(F=new Uint8Array(new Uint32Array(he).buffer),Z.update(F))}return{descriptor:G,dict:M,baseDict:j,composite:x,type:C.name,hash:Z?Z.hexdigest():""}},translateFont:function(M){var j=this,C=M.baseDict,x=M.dict,F=M.composite,$=M.descriptor,G=M.type,Z=F?65535:255,J;if(!$)if(G==="Type3")$=new t.Dict(null),$.set("FontName",t.Name.get(G)),$.set("FontBBox",x.getArray("FontBBox"));else{var Y=x.get("BaseFont");if(!(0,t.isName)(Y))throw new a.FormatError("Base font is not specified");Y=Y.name.replace(/[,_]/g,"-");var ee=this.getBaseFontMetrics(Y),ae=Y.split("-")[0],pe=(this.isSerifFont(ae)?o.FontFlags.Serif:0)|(ee.monospace?o.FontFlags.FixedPitch:0)|((0,c.getSymbolsFonts)()[ae]?o.FontFlags.Symbolic:o.FontFlags.Nonsymbolic);return J={type:G,name:Y,widths:ee.widths,defaultWidth:ee.defaultWidth,flags:pe,firstChar:0,lastChar:Z},this.extractDataStructures(x,x,J).then(function(Pe){return Pe.widths=j.buildCharCodeToWidth(ee.widths,Pe),new o.Font(Y,null,Pe)})}var se=x.get("FirstChar")||0,ue=x.get("LastChar")||Z,le=$.get("FontName"),ie=x.get("BaseFont");if((0,a.isString)(le)&&(le=t.Name.get(le)),(0,a.isString)(ie)&&(ie=t.Name.get(ie)),G!=="Type3"){var de=le&&le.name,fe=ie&&ie.name;de!==fe&&((0,a.info)(`The FontDescriptor's FontName is "`+de+`" but should be the same as the Font's BaseFont "`+fe+'"'),de&&fe&&fe.indexOf(de)===0&&(le=ie))}if(le=le||ie,!(0,t.isName)(le))throw new a.FormatError("invalid font name");var he=$.get("FontFile","FontFile2","FontFile3");if(he&&he.dict){var Se=he.dict.get("Subtype");Se&&(Se=Se.name);var Ce=he.dict.get("Length1"),Ae=he.dict.get("Length2"),Ee=he.dict.get("Length3")}J={type:G,name:le.name,subtype:Se,file:he,length1:Ce,length2:Ae,length3:Ee,loadedName:C.loadedName,composite:F,wideChars:F,fixedPitch:!1,fontMatrix:x.getArray("FontMatrix")||a.FONT_IDENTITY_MATRIX,firstChar:se||0,lastChar:ue||Z,bbox:$.getArray("FontBBox"),ascent:$.get("Ascent"),descent:$.get("Descent"),xHeight:$.get("XHeight"),capHeight:$.get("CapHeight"),flags:$.get("Flags"),italicAngle:$.get("ItalicAngle"),isType3Font:!1};var ke;if(F){var Fe=C.get("Encoding");(0,t.isName)(Fe)&&(J.cidEncoding=Fe.name),ke=i.CMapFactory.create({encoding:Fe,fetchBuiltInCMap:this.fetchBuiltInCMap,useCMap:null}).then(function(Pe){J.cMap=Pe,J.vertical=J.cMap.vertical})}else ke=Promise.resolve(void 0);return ke.then(function(){return j.extractDataStructures(x,C,J)}).then(function(Pe){return j.extractWidths(x,$,Pe),G==="Type3"&&(Pe.isType3Font=!0),new o.Font(le.name,he,Pe)})}},q}(),g=function(){function I(W,q,B){this.loadedName=W,this.font=q,this.dict=B,this.type3Loaded=null,this.sent=!1}return I.prototype={send:function(q){if(!this.sent){var B=this.font.exportData();q.send("commonobj",[this.loadedName,"Font",B]),this.sent=!0}},loadType3Data:function(q,B,N,L){if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");if(this.type3Loaded)return this.type3Loaded;var P=Object.create(q.options);P.ignoreErrors=!1;for(var O=q.clone(P),E=this.font,w=Promise.resolve(),A=this.dict.get("CharProcs"),M=this.dict.get("Resources")||B,j=A.getKeys(),C=Object.create(null),x=function(){var Z=j[F];w=w.then(function(){var J=A.get(Z),Y=new m;return O.getOperatorList({stream:J,task:L,resources:M,operatorList:Y}).then(function(){C[Z]=Y.getIR(),N.addDependencies(Y.dependencies)}).catch(function(ee){(0,a.warn)('Type3 font resource "'+Z+'" is not available.');var ae=new m;C[Z]=ae.getIR()})})},F=0,$=j.length;F<$;++F)x();return this.type3Loaded=w.then(function(){E.charProcOperatorList=C}),this.type3Loaded}},I}(),m=function(){var I=1e3,W=I-5;function q(N){for(var L=[],P=N.fnArray,O=N.argsArray,E=0,w=N.length;E<w;E++)switch(P[E]){case a.OPS.paintInlineImageXObject:case a.OPS.paintInlineImageXObjectGroup:case a.OPS.paintImageMaskXObject:var A=O[E][0];A.cached||L.push(A.data.buffer);break}return L}function B(N,L,P){this.messageHandler=L,this.fnArray=[],this.argsArray=[],this.dependencies=Object.create(null),this._totalLength=0,this.pageIndex=P,this.intent=N}return B.prototype={get length(){return this.argsArray.length},get totalLength(){return this._totalLength+this.length},addOp:function(L,P){this.fnArray.push(L),this.argsArray.push(P),this.messageHandler&&(this.fnArray.length>=I?this.flush():this.fnArray.length>=W&&(L===a.OPS.restore||L===a.OPS.endText)&&this.flush())},addDependency:function(L){L in this.dependencies||(this.dependencies[L]=!0,this.addOp(a.OPS.dependency,[L]))},addDependencies:function(L){for(var P in L)this.addDependency(P)},addOpList:function(L){a.Util.extendObj(this.dependencies,L.dependencies);for(var P=0,O=L.length;P<O;P++)this.addOp(L.fnArray[P],L.argsArray[P])},getIR:function(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},flush:function(L){this.intent!=="oplist"&&new h().optimize(this);var P=q(this),O=this.length;this._totalLength+=O,this.messageHandler.send("RenderPageChunk",{operatorList:{fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:L,length:O},pageIndex:this.pageIndex,intent:this.intent},P),this.dependencies=Object.create(null),this.fnArray.length=0,this.argsArray.length=0}},B}(),v=function(){function I(W){this.state=W,this.stateStack=[]}return I.prototype={save:function(){var q=this.state;this.stateStack.push(this.state),this.state=q.clone()},restore:function(){var q=this.stateStack.pop();q&&(this.state=q)},transform:function(q){this.state.ctm=a.Util.transform(this.state.ctm,q)}},I}(),b=function(){function I(){this.ctm=new Float32Array(a.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.textMatrix=a.IDENTITY_MATRIX.slice(),this.textLineMatrix=a.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}return I.prototype={setTextMatrix:function(q,B,N,L,P,O){var E=this.textMatrix;E[0]=q,E[1]=B,E[2]=N,E[3]=L,E[4]=P,E[5]=O},setTextLineMatrix:function(q,B,N,L,P,O){var E=this.textLineMatrix;E[0]=q,E[1]=B,E[2]=N,E[3]=L,E[4]=P,E[5]=O},translateTextMatrix:function(q,B){var N=this.textMatrix;N[4]=N[0]*q+N[2]*B+N[4],N[5]=N[1]*q+N[3]*B+N[5]},translateTextLineMatrix:function(q,B){var N=this.textLineMatrix;N[4]=N[0]*q+N[2]*B+N[4],N[5]=N[1]*q+N[3]*B+N[5]},calcTextLineMatrixAdvance:function(q,B,N,L,P,O){var E=this.font;if(!E)return null;var w=this.textLineMatrix;if(!(q===w[0]&&B===w[1]&&N===w[2]&&L===w[3]))return null;var A=P-w[4],M=O-w[5];if(E.vertical&&A!==0||!E.vertical&&M!==0)return null;var j,C,x=q*L-B*N;return E.vertical?(j=-M*N/x,C=M*q/x):(j=A*L/x,C=-A*B/x),{width:j,height:C,value:E.vertical?C:j}},calcRenderMatrix:function(q){var B=[this.fontSize*this.textHScale,0,0,this.fontSize,0,this.textRise];return a.Util.transform(q,a.Util.transform(this.textMatrix,B))},carriageReturn:function(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()},clone:function(){var q=Object.create(this);return q.textMatrix=this.textMatrix.slice(),q.textLineMatrix=this.textLineMatrix.slice(),q.fontMatrix=this.fontMatrix.slice(),q}},I}(),f=function(){function I(){this.ctm=new Float32Array(a.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=a.TextRenderingMode.FILL,this.fillColorSpace=V.ColorSpace.singletons.gray,this.strokeColorSpace=V.ColorSpace.singletons.gray}return I.prototype={clone:function(){return Object.create(this)}},I}(),p=function(){var I=(0,a.getLookupTableFactory)(function(q){q.w={id:a.OPS.setLineWidth,numArgs:1,variableArgs:!1},q.J={id:a.OPS.setLineCap,numArgs:1,variableArgs:!1},q.j={id:a.OPS.setLineJoin,numArgs:1,variableArgs:!1},q.M={id:a.OPS.setMiterLimit,numArgs:1,variableArgs:!1},q.d={id:a.OPS.setDash,numArgs:2,variableArgs:!1},q.ri={id:a.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},q.i={id:a.OPS.setFlatness,numArgs:1,variableArgs:!1},q.gs={id:a.OPS.setGState,numArgs:1,variableArgs:!1},q.q={id:a.OPS.save,numArgs:0,variableArgs:!1},q.Q={id:a.OPS.restore,numArgs:0,variableArgs:!1},q.cm={id:a.OPS.transform,numArgs:6,variableArgs:!1},q.m={id:a.OPS.moveTo,numArgs:2,variableArgs:!1},q.l={id:a.OPS.lineTo,numArgs:2,variableArgs:!1},q.c={id:a.OPS.curveTo,numArgs:6,variableArgs:!1},q.v={id:a.OPS.curveTo2,numArgs:4,variableArgs:!1},q.y={id:a.OPS.curveTo3,numArgs:4,variableArgs:!1},q.h={id:a.OPS.closePath,numArgs:0,variableArgs:!1},q.re={id:a.OPS.rectangle,numArgs:4,variableArgs:!1},q.S={id:a.OPS.stroke,numArgs:0,variableArgs:!1},q.s={id:a.OPS.closeStroke,numArgs:0,variableArgs:!1},q.f={id:a.OPS.fill,numArgs:0,variableArgs:!1},q.F={id:a.OPS.fill,numArgs:0,variableArgs:!1},q["f*"]={id:a.OPS.eoFill,numArgs:0,variableArgs:!1},q.B={id:a.OPS.fillStroke,numArgs:0,variableArgs:!1},q["B*"]={id:a.OPS.eoFillStroke,numArgs:0,variableArgs:!1},q.b={id:a.OPS.closeFillStroke,numArgs:0,variableArgs:!1},q["b*"]={id:a.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},q.n={id:a.OPS.endPath,numArgs:0,variableArgs:!1},q.W={id:a.OPS.clip,numArgs:0,variableArgs:!1},q["W*"]={id:a.OPS.eoClip,numArgs:0,variableArgs:!1},q.BT={id:a.OPS.beginText,numArgs:0,variableArgs:!1},q.ET={id:a.OPS.endText,numArgs:0,variableArgs:!1},q.Tc={id:a.OPS.setCharSpacing,numArgs:1,variableArgs:!1},q.Tw={id:a.OPS.setWordSpacing,numArgs:1,variableArgs:!1},q.Tz={id:a.OPS.setHScale,numArgs:1,variableArgs:!1},q.TL={id:a.OPS.setLeading,numArgs:1,variableArgs:!1},q.Tf={id:a.OPS.setFont,numArgs:2,variableArgs:!1},q.Tr={id:a.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},q.Ts={id:a.OPS.setTextRise,numArgs:1,variableArgs:!1},q.Td={id:a.OPS.moveText,numArgs:2,variableArgs:!1},q.TD={id:a.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},q.Tm={id:a.OPS.setTextMatrix,numArgs:6,variableArgs:!1},q["T*"]={id:a.OPS.nextLine,numArgs:0,variableArgs:!1},q.Tj={id:a.OPS.showText,numArgs:1,variableArgs:!1},q.TJ={id:a.OPS.showSpacedText,numArgs:1,variableArgs:!1},q["'"]={id:a.OPS.nextLineShowText,numArgs:1,variableArgs:!1},q['"']={id:a.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},q.d0={id:a.OPS.setCharWidth,numArgs:2,variableArgs:!1},q.d1={id:a.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},q.CS={id:a.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},q.cs={id:a.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},q.SC={id:a.OPS.setStrokeColor,numArgs:4,variableArgs:!0},q.SCN={id:a.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},q.sc={id:a.OPS.setFillColor,numArgs:4,variableArgs:!0},q.scn={id:a.OPS.setFillColorN,numArgs:33,variableArgs:!0},q.G={id:a.OPS.setStrokeGray,numArgs:1,variableArgs:!1},q.g={id:a.OPS.setFillGray,numArgs:1,variableArgs:!1},q.RG={id:a.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},q.rg={id:a.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},q.K={id:a.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},q.k={id:a.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},q.sh={id:a.OPS.shadingFill,numArgs:1,variableArgs:!1},q.BI={id:a.OPS.beginInlineImage,numArgs:0,variableArgs:!1},q.ID={id:a.OPS.beginImageData,numArgs:0,variableArgs:!1},q.EI={id:a.OPS.endInlineImage,numArgs:1,variableArgs:!1},q.Do={id:a.OPS.paintXObject,numArgs:1,variableArgs:!1},q.MP={id:a.OPS.markPoint,numArgs:1,variableArgs:!1},q.DP={id:a.OPS.markPointProps,numArgs:2,variableArgs:!1},q.BMC={id:a.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},q.BDC={id:a.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},q.EMC={id:a.OPS.endMarkedContent,numArgs:0,variableArgs:!1},q.BX={id:a.OPS.beginCompat,numArgs:0,variableArgs:!1},q.EX={id:a.OPS.endCompat,numArgs:0,variableArgs:!1},q.BM=null,q.BD=null,q.true=null,q.fa=null,q.fal=null,q.fals=null,q.false=null,q.nu=null,q.nul=null,q.null=null});function W(q,B,N){this.opMap=I(),this.parser=new u.Parser(new u.Lexer(q,this.opMap),!1,B),this.stateManager=N,this.nonProcessedArgs=[]}return W.prototype={get savedStatesDepth(){return this.stateManager.stateStack.length},read:function(B){for(var N=B.args;;){var L=this.parser.getObj();if((0,t.isCmd)(L)){var P=L.cmd,O=this.opMap[P];if(!O){(0,a.warn)('Unknown command "'+P+'"');continue}var E=O.id,w=O.numArgs,A=N!==null?N.length:0;if(O.variableArgs)A>w&&(0,a.info)("Command "+E+": expected [0,"+w+"] args, but received "+A+" args.");else{if(A!==w){for(var M=this.nonProcessedArgs;A>w;)M.push(N.shift()),A--;for(;A<w&&M.length!==0;)N===null&&(N=[]),N.unshift(M.pop()),A++}if(A<w){(0,a.warn)("Skipping command "+E+": expected "+w+" args, but received "+A+" args."),N!==null&&(N.length=0);continue}}return this.preprocessCommand(E,N),B.fn=E,B.args=N,!0}if((0,t.isEOF)(L))return!1;if(L!==null&&(N===null&&(N=[]),N.push(L),N.length>33))throw new a.FormatError("Too many arguments")}},preprocessCommand:function(B,N){switch(B|0){case a.OPS.save:this.stateManager.save();break;case a.OPS.restore:this.stateManager.restore();break;case a.OPS.transform:this.stateManager.transform(N);break}}},W}(),h=function(){function I(N,L,P){for(var O=N,E=0,w=L.length-1;E<w;E++){var A=L[E];O=O[A]||(O[A]=[])}O[L[L.length-1]]=P}function W(N,L,P,O){for(var E=N+2,w=0;w<L;w++){var A=O[E+4*w],M=A.length===1&&A[0];if(M&&M.width===1&&M.height===1&&(!M.data.length||M.data.length===1&&M.data[0]===0)){P[E+4*w]=a.OPS.paintSolidColorImageMask;continue}break}return L-w}var q=[];I(q,[a.OPS.save,a.OPS.transform,a.OPS.paintInlineImageXObject,a.OPS.restore],function(L){for(var P=10,O=200,E=1e3,w=1,A=L.fnArray,M=L.argsArray,j=L.iCurr,C=j-3,x=j-2,F=j-1,$=C+4,G=A.length;$+3<G&&!(A[$]!==a.OPS.save||A[$+1]!==a.OPS.transform||A[$+2]!==a.OPS.paintInlineImageXObject||A[$+3]!==a.OPS.restore);)$+=4;var Z=Math.min(($-C)/4,O);if(Z<P)return $;var J=0,Y=[],ee=0,ae=w,pe=w,se;for(se=0;se<Z;se++){var ue=M[x+(se<<2)],le=M[F+(se<<2)][0];ae+le.width>E&&(J=Math.max(J,ae),pe+=ee+2*w,ae=0,ee=0),Y.push({transform:ue,x:ae,y:pe,w:le.width,h:le.height}),ae+=le.width+2*w,ee=Math.max(ee,le.height)}var ie=Math.max(J,ae)+w,de=pe+ee+w,fe=new Uint8Array(ie*de*4),he=ie<<2;for(se=0;se<Z;se++){var Se=M[F+(se<<2)][0].data,Ce=Y[se].w<<2,Ae=0,Ee=Y[se].x+Y[se].y*ie<<2;fe.set(Se.subarray(0,Ce),Ee-he);for(var ke=0,Fe=Y[se].h;ke<Fe;ke++)fe.set(Se.subarray(Ae,Ae+Ce),Ee),Ae+=Ce,Ee+=he;for(fe.set(Se.subarray(Ae-Ce,Ae),Ee);Ee>=0;)Se[Ee-4]=Se[Ee],Se[Ee-3]=Se[Ee+1],Se[Ee-2]=Se[Ee+2],Se[Ee-1]=Se[Ee+3],Se[Ee+Ce]=Se[Ee+Ce-4],Se[Ee+Ce+1]=Se[Ee+Ce-3],Se[Ee+Ce+2]=Se[Ee+Ce-2],Se[Ee+Ce+3]=Se[Ee+Ce-1],Ee-=he}return A.splice(C,Z*4,a.OPS.paintInlineImageXObjectGroup),M.splice(C,Z*4,[{width:ie,height:de,kind:a.ImageKind.RGBA_32BPP,data:fe},Y]),C+1}),I(q,[a.OPS.save,a.OPS.transform,a.OPS.paintImageMaskXObject,a.OPS.restore],function(L){for(var P=10,O=100,E=1e3,w=L.fnArray,A=L.argsArray,M=L.iCurr,j=M-3,C=M-2,x=M-1,F=j+4,$=w.length;F+3<$&&!(w[F]!==a.OPS.save||w[F+1]!==a.OPS.transform||w[F+2]!==a.OPS.paintImageMaskXObject||w[F+3]!==a.OPS.restore);)F+=4;var G=(F-j)/4;if(G=W(j,G,w,A),G<P)return F;var Z,J=!1,Y,ee,ae=A[x][0];if(A[C][1]===0&&A[C][2]===0){J=!0;var pe=A[C][0],se=A[C][3];Y=C+4;var ue=x+4;for(Z=1;Z<G;Z++,Y+=4,ue+=4)if(ee=A[Y],A[ue][0]!==ae||ee[0]!==pe||ee[1]!==0||ee[2]!==0||ee[3]!==se){Z<P?J=!1:G=Z;break}}if(J){G=Math.min(G,E);var le=new Float32Array(G*2);for(Y=C,Z=0;Z<G;Z++,Y+=4)ee=A[Y],le[Z<<1]=ee[4],le[(Z<<1)+1]=ee[5];w.splice(j,G*4,a.OPS.paintImageMaskXObjectRepeat),A.splice(j,G*4,[ae,pe,se,le])}else{G=Math.min(G,O);var ie=[];for(Z=0;Z<G;Z++){ee=A[C+(Z<<2)];var de=A[x+(Z<<2)][0];ie.push({data:de.data,width:de.width,height:de.height,transform:ee})}w.splice(j,G*4,a.OPS.paintImageMaskXObjectGroup),A.splice(j,G*4,[ie])}return j+1}),I(q,[a.OPS.save,a.OPS.transform,a.OPS.paintImageXObject,a.OPS.restore],function(N){var L=3,P=1e3,O=N.fnArray,E=N.argsArray,w=N.iCurr,A=w-3,M=w-2,j=w-1,C=w;if(E[M][1]!==0||E[M][2]!==0)return C+1;for(var x=E[j][0],F=E[M][0],$=E[M][3],G=A+4,Z=O.length;G+3<Z&&!(O[G]!==a.OPS.save||O[G+1]!==a.OPS.transform||O[G+2]!==a.OPS.paintImageXObject||O[G+3]!==a.OPS.restore||E[G+1][0]!==F||E[G+1][1]!==0||E[G+1][2]!==0||E[G+1][3]!==$||E[G+2][0]!==x);)G+=4;var J=Math.min((G-A)/4,P);if(J<L)return G;for(var Y=new Float32Array(J*2),ee=M,ae=0;ae<J;ae++,ee+=4){var pe=E[ee];Y[ae<<1]=pe[4],Y[(ae<<1)+1]=pe[5]}var se=[x,F,$,Y];return O.splice(A,J*4,a.OPS.paintImageXObjectRepeat),E.splice(A,J*4,se),A+1}),I(q,[a.OPS.beginText,a.OPS.setFont,a.OPS.setTextMatrix,a.OPS.showText,a.OPS.endText],function(N){for(var L=3,P=1e3,O=N.fnArray,E=N.argsArray,w=N.iCurr,A=w-4,M=w-3,j=w-2,C=w-1,x=w,F=E[M][0],$=E[M][1],G=A+5,Z=O.length;G+4<Z&&!(O[G]!==a.OPS.beginText||O[G+1]!==a.OPS.setFont||O[G+2]!==a.OPS.setTextMatrix||O[G+3]!==a.OPS.showText||O[G+4]!==a.OPS.endText||E[G+1][0]!==F||E[G+1][1]!==$);)G+=5;var J=Math.min((G-A)/5,P);if(J<L)return G;var Y=A;A>=4&&O[A-4]===O[M]&&O[A-3]===O[j]&&O[A-2]===O[C]&&O[A-1]===O[x]&&E[A-4][0]===F&&E[A-4][1]===$&&(J++,Y-=5);for(var ee=Y+4,ae=1;ae<J;ae++)O.splice(ee,3),E.splice(ee,3),ee+=2;return ee+1});function B(){}return B.prototype={optimize:function(L){for(var P=L.fnArray,O=L.argsArray,E={iCurr:0,fnArray:P,argsArray:O},w,A=0,M=P.length;A<M;)w=(w||q)[P[A]],typeof w=="function"?(E.iCurr=A,A=w(E),w=void 0,M=E.fnArray.length):A++}},B}();e.OperatorList=m,e.PartialEvaluator=R},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFFCompiler=e.CFFPrivateDict=e.CFFTopDict=e.CFFCharset=e.CFFIndex=e.CFFStrings=e.CFFHeader=e.CFF=e.CFFParser=e.CFFStandardStrings=void 0;var a=r(0),i=r(136),s=r(28),t=10,o=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],l=function(){var v=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],b=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function(h,_){h[_-2]=h[_-2]+h[_-1]}},{id:"sub",min:2,stackDelta:-1,stackFn:function(h,_){h[_-2]=h[_-2]-h[_-1]}},{id:"div",min:2,stackDelta:-1,stackFn:function(h,_){h[_-2]=h[_-2]/h[_-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn:function(h,_){h[_-1]=-h[_-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function(h,_){h[_-2]=h[_-2]*h[_-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];function f(p,h,_){this.bytes=p.getBytes(),this.properties=h,this.seacAnalysisEnabled=!!_}return f.prototype={parse:function(){var h=this.properties,_=new d;this.cff=_;var I=this.parseHeader(),W=this.parseIndex(I.endPos),q=this.parseIndex(W.endPos),B=this.parseIndex(q.endPos),N=this.parseIndex(B.endPos),L=this.parseDict(q.obj.get(0)),P=this.createDict(V,L,_.strings);_.header=I.obj,_.names=this.parseNameIndex(W.obj),_.strings=this.parseStringIndex(B.obj),_.topDict=P,_.globalSubrIndex=N.obj,this.parsePrivateDict(_.topDict),_.isCIDFont=P.hasName("ROS");var O=P.getByName("CharStrings"),E=this.parseIndex(O).obj,w=P.getByName("FontMatrix");w&&(h.fontMatrix=w);var A=P.getByName("FontBBox");A&&(h.ascent=Math.max(A[3],A[1]),h.descent=Math.min(A[1],A[3]),h.ascentScaled=!0);var M,j;if(_.isCIDFont){for(var C=this.parseIndex(P.getByName("FDArray")).obj,x=0,F=C.count;x<F;++x){var $=C.get(x),G=this.createDict(V,this.parseDict($),_.strings);this.parsePrivateDict(G),_.fdArray.push(G)}j=null,M=this.parseCharsets(P.getByName("charset"),E.count,_.strings,!0),_.fdSelect=this.parseFDSelect(P.getByName("FDSelect"),E.count)}else M=this.parseCharsets(P.getByName("charset"),E.count,_.strings,!1),j=this.parseEncoding(P.getByName("Encoding"),h,_.strings,M.charset);_.charset=M,_.encoding=j;var Z=this.parseCharStrings({charStrings:E,localSubrIndex:P.privateDict.subrsIndex,globalSubrIndex:N.obj,fdSelect:_.fdSelect,fdArray:_.fdArray,privateDict:P.privateDict});return _.charStrings=Z.charStrings,_.seacs=Z.seacs,_.widths=Z.widths,_},parseHeader:function(){for(var h=this.bytes,_=h.length,I=0;I<_&&h[I]!==1;)++I;if(I>=_)throw new a.FormatError("Invalid CFF header");I!==0&&((0,a.info)("cff data is shifted"),h=h.subarray(I),this.bytes=h);var W=h[0],q=h[1],B=h[2],N=h[3],L=new c(W,q,B,N);return{obj:L,endPos:B}},parseDict:function(h){var _=0;function I(){var P=h[_++];return P===30?W():P===28?(P=h[_++],P=(P<<24|h[_++]<<16)>>16,P):P===29?(P=h[_++],P=P<<8|h[_++],P=P<<8|h[_++],P=P<<8|h[_++],P):P>=32&&P<=246?P-139:P>=247&&P<=250?(P-247)*256+h[_++]+108:P>=251&&P<=254?-((P-251)*256)-h[_++]-108:((0,a.warn)('CFFParser_parseDict: "'+P+'" is a reserved command.'),NaN)}function W(){for(var P="",O=15,E=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],w=h.length;_<w;){var A=h[_++],M=A>>4,j=A&15;if(M===O||(P+=E[M],j===O))break;P+=E[j]}return parseFloat(P)}var q=[],B=[];_=0;for(var N=h.length;_<N;){var L=h[_];L<=21?(L===12&&(L=L<<8|h[++_]),B.push([L,q]),q=[],++_):q.push(I())}return B},parseIndex:function(h){var _=new u,I=this.bytes,W=I[h++]<<8|I[h++],q=[],B=h,N,L;if(W!==0){var P=I[h++],O=h+(W+1)*P-1;for(N=0,L=W+1;N<L;++N){for(var E=0,w=0;w<P;++w)E<<=8,E+=I[h++];q.push(O+E)}B=q[W]}for(N=0,L=q.length-1;N<L;++N){var A=q[N],M=q[N+1];_.add(I.subarray(A,M))}return{obj:_,endPos:B}},parseNameIndex:function(h){for(var _=[],I=0,W=h.count;I<W;++I){var q=h.get(I);_.push((0,a.bytesToString)(q))}return _},parseStringIndex:function(h){for(var _=new y,I=0,W=h.count;I<W;++I){var q=h.get(I);_.add((0,a.bytesToString)(q))}return _},createDict:function(h,_,I){for(var W=new h(I),q=0,B=_.length;q<B;++q){var N=_[q],L=N[0],P=N[1];W.setByKey(L,P)}return W},parseCharString:function(h,_,I,W){if(!_||h.callDepth>t)return!1;for(var q=h.stackSize,B=h.stack,N=_.length,L=0;L<N;){var P=_[L++],O=null;if(P===12){var E=_[L++];E===0?(_[L-2]=139,_[L-1]=22,q=0):O=b[E]}else if(P===28)B[q]=(_[L]<<24|_[L+1]<<16)>>16,L+=2,q++;else if(P===14){if(q>=4&&(q-=4,this.seacAnalysisEnabled))return h.seac=B.slice(q,q+4),!1;O=v[P]}else if(P>=32&&P<=246)B[q]=P-139,q++;else if(P>=247&&P<=254)B[q]=P<251?(P-247<<8)+_[L]+108:-(P-251<<8)-_[L]-108,L++,q++;else if(P===255)B[q]=(_[L]<<24|_[L+1]<<16|_[L+2]<<8|_[L+3])/65536,L+=4,q++;else if(P===19||P===20)h.hints+=q>>1,L+=h.hints+7>>3,q%=2,O=v[P];else if(P===10||P===29){var w;if(P===10?w=I:w=W,!w)return O=v[P],(0,a.warn)("Missing subrsIndex for "+O.id),!1;var A=32768;w.count<1240?A=107:w.count<33900&&(A=1131);var M=B[--q]+A;if(M<0||M>=w.count||isNaN(M))return O=v[P],(0,a.warn)("Out of bounds subrIndex for "+O.id),!1;h.stackSize=q,h.callDepth++;var j=this.parseCharString(h,w.get(M),I,W);if(!j)return!1;h.callDepth--,q=h.stackSize;continue}else{if(P===11)return h.stackSize=q,!0;O=v[P]}if(O){if(O.stem&&(h.hints+=q>>1),"min"in O&&!h.undefStack&&q<O.min)return(0,a.warn)("Not enough parameters for "+O.id+"; actual: "+q+", expected: "+O.min),!1;h.firstStackClearing&&O.stackClearing&&(h.firstStackClearing=!1,q-=O.min,q>=2&&O.stem?q%=2:q>1&&(0,a.warn)("Found too many parameters for stack-clearing command"),q>0&&B[q-1]>=0&&(h.width=B[q-1])),"stackDelta"in O?("stackFn"in O&&O.stackFn(B,q),q+=O.stackDelta):O.stackClearing?q=0:O.resetStack?(q=0,h.undefStack=!1):O.undefStack&&(q=0,h.undefStack=!0,h.firstStackClearing=!1)}}return h.stackSize=q,!0},parseCharStrings:function(h){for(var _=h.charStrings,I=h.localSubrIndex,W=h.globalSubrIndex,q=h.fdSelect,B=h.fdArray,N=h.privateDict,L=[],P=[],O=_.count,E=0;E<O;E++){var w=_.get(E),A={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null},M=!0,j=null,C=N;if(q&&B.length){var x=q.getFDIndex(E);x===-1&&((0,a.warn)("Glyph index is not in fd select."),M=!1),x>=B.length&&((0,a.warn)("Invalid fd index for glyph index."),M=!1),M&&(C=B[x].privateDict,j=C.subrsIndex)}else I&&(j=I);if(M&&(M=this.parseCharString(A,w,j,W)),A.width!==null){var F=C.getByName("nominalWidthX");P[E]=F+A.width}else{var $=C.getByName("defaultWidthX");P[E]=$}A.seac!==null&&(L[E]=A.seac),M||_.set(E,new Uint8Array([14]))}return{charStrings:_,seacs:L,widths:P}},emptyPrivateDictionary:function(h){var _=this.createDict(U,[],h.strings);h.setByKey(18,[0,0]),h.privateDict=_},parsePrivateDict:function(h){if(!h.hasName("Private")){this.emptyPrivateDictionary(h);return}var _=h.getByName("Private");if(!Array.isArray(_)||_.length!==2){h.removeByName("Private");return}var I=_[0],W=_[1];if(I===0||W>=this.bytes.length){this.emptyPrivateDictionary(h);return}var q=W+I,B=this.bytes.subarray(W,q),N=this.parseDict(B),L=this.createDict(U,N,h.strings);if(h.privateDict=L,!!L.getByName("Subrs")){var P=L.getByName("Subrs"),O=W+P;if(P===0||O>=this.bytes.length){this.emptyPrivateDictionary(h);return}var E=this.parseIndex(O);L.subrsIndex=E.obj}},parseCharsets:function(h,_,I,W){if(h===0)return new D(!0,z.ISO_ADOBE,i.ISOAdobeCharset);if(h===1)return new D(!0,z.EXPERT,i.ExpertCharset);if(h===2)return new D(!0,z.EXPERT_SUBSET,i.ExpertSubsetCharset);var q=this.bytes,B=h,N=q[h++],L=[".notdef"],P,O,E;switch(_-=1,N){case 0:for(E=0;E<_;E++)P=q[h++]<<8|q[h++],L.push(W?P:I.get(P));break;case 1:for(;L.length<=_;)for(P=q[h++]<<8|q[h++],O=q[h++],E=0;E<=O;E++)L.push(W?P++:I.get(P++));break;case 2:for(;L.length<=_;)for(P=q[h++]<<8|q[h++],O=q[h++]<<8|q[h++],E=0;E<=O;E++)L.push(W?P++:I.get(P++));break;default:throw new a.FormatError("Unknown charset format")}var w=h,A=q.subarray(B,w);return new D(!1,N,L,A)},parseEncoding:function(h,_,I,W){var q=Object.create(null),B=this.bytes,N=!1,L,P,O,E=null;function w(){var Y=B[h++];for(P=0;P<Y;P++){var ee=B[h++],ae=(B[h++]<<8)+(B[h++]&255);q[ee]=W.indexOf(I.get(ae))}}if(h===0||h===1){N=!0,L=h;var A=h?s.ExpertEncoding:s.StandardEncoding;for(P=0,O=W.length;P<O;P++){var M=A.indexOf(W[P]);M!==-1&&(q[M]=P)}}else{var j=h;switch(L=B[h++],L&127){case 0:var C=B[h++];for(P=1;P<=C;P++)q[B[h++]]=P;break;case 1:var x=B[h++],F=1;for(P=0;P<x;P++)for(var $=B[h++],G=B[h++],Z=$;Z<=$+G;Z++)q[Z]=F++;break;default:throw new a.FormatError("Unknown encoding format: "+L+" in CFF")}var J=h;L&128&&(B[j]&=127,w()),E=B.subarray(j,J)}return L=L&127,new k(N,L,q,E)},parseFDSelect:function(h,_){var I=h,W=this.bytes,q=W[h++],B=[],N,L,P=!1;switch(q){case 0:for(L=0;L<_;++L){var O=W[h++];B.push(O)}N=W.subarray(I,h);break;case 3:var E=W[h++]<<8|W[h++];for(L=0;L<E;++L){var w=W[h++]<<8|W[h++];L===0&&w!==0&&((0,a.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),P=!0,w=0);for(var A=W[h++],M=W[h]<<8|W[h+1],j=w;j<M;++j)B.push(A)}h+=2,N=W.subarray(I,h),P&&(N[3]=N[4]=0);break;default:throw new a.FormatError('parseFDSelect: Unknown format "'+q+'".')}if(B.length!==_)throw new a.FormatError("parseFDSelect: Invalid font data.");return new T(B,N)}},f}(),d=function(){function v(){this.header=null,this.names=[],this.topDict=null,this.strings=new y,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}return v}(),c=function(){function v(b,f,p,h){this.major=b,this.minor=f,this.hdrSize=p,this.offSize=h}return v}(),y=function(){function v(){this.strings=[]}return v.prototype={get:function(f){return f>=0&&f<=390?o[f]:f-391<=this.strings.length?this.strings[f-391]:o[0]},add:function(f){this.strings.push(f)},get count(){return this.strings.length}},v}(),u=function(){function v(){this.objects=[],this.length=0}return v.prototype={add:function(f){this.length+=f.length,this.objects.push(f)},set:function(f,p){this.length+=p.length-this.objects[f].length,this.objects[f]=p},get:function(f){return this.objects[f]},get count(){return this.objects.length}},v}(),S=function(){function v(b,f){this.keyToNameMap=b.keyToNameMap,this.nameToKeyMap=b.nameToKeyMap,this.defaults=b.defaults,this.types=b.types,this.opcodes=b.opcodes,this.order=b.order,this.strings=f,this.values=Object.create(null)}return v.prototype={setByKey:function(f,p){if(!(f in this.keyToNameMap))return!1;var h=p.length;if(h===0)return!0;for(var _=0;_<h;_++)if(isNaN(p[_]))return(0,a.warn)('Invalid CFFDict value: "'+p+'" for key "'+f+'".'),!0;var I=this.types[f];return(I==="num"||I==="sid"||I==="offset")&&(p=p[0]),this.values[f]=p,!0},setByName:function(f,p){if(!(f in this.nameToKeyMap))throw new a.FormatError('Invalid dictionary name "'+f+'"');this.values[this.nameToKeyMap[f]]=p},hasName:function(f){return this.nameToKeyMap[f]in this.values},getByName:function(f){if(!(f in this.nameToKeyMap))throw new a.FormatError("Invalid dictionary name "+f+'"');var p=this.nameToKeyMap[f];return p in this.values?this.values[p]:this.defaults[p]},removeByName:function(f){delete this.values[this.nameToKeyMap[f]]}},v.createTables=function(f){for(var p={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]},h=0,_=f.length;h<_;++h){var I=f[h],W=Array.isArray(I[0])?(I[0][0]<<8)+I[0][1]:I[0];p.keyToNameMap[W]=I[1],p.nameToKeyMap[I[1]]=W,p.types[W]=I[2],p.defaults[W]=I[3],p.opcodes[W]=Array.isArray(I[0])?I[0]:[I[0]],p.order.push(W)}return p},v}(),V=function(){var v=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],b=null;function f(p){b===null&&(b=S.createTables(v)),S.call(this,b,p),this.privateDict=null}return f.prototype=Object.create(S.prototype),f}(),U=function(){var v=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],b=null;function f(p){b===null&&(b=S.createTables(v)),S.call(this,b,p),this.subrsIndex=null}return f.prototype=Object.create(S.prototype),f}(),z={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2},D=function(){function v(b,f,p,h){this.predefined=b,this.format=f,this.charset=p,this.raw=h}return v}(),k=function(){function v(b,f,p,h){this.predefined=b,this.format=f,this.encoding=p,this.raw=h}return v}(),T=function(){function v(b,f){this.fdSelect=b,this.raw=f}return v.prototype={getFDIndex:function(f){return f<0||f>=this.fdSelect.length?-1:this.fdSelect[f]}},v}(),R=function(){function v(){this.offsets=Object.create(null)}return v.prototype={isTracking:function(f){return f in this.offsets},track:function(f,p){if(f in this.offsets)throw new a.FormatError("Already tracking location of "+f);this.offsets[f]=p},offset:function(f){for(var p in this.offsets)this.offsets[p]+=f},setEntryLocation:function(f,p,h){if(!(f in this.offsets))throw new a.FormatError("Not tracking location of "+f);for(var _=h.data,I=this.offsets[f],W=5,q=0,B=p.length;q<B;++q){var N=q*W+I,L=N+1,P=N+2,O=N+3,E=N+4;if(_[N]!==29||_[L]!==0||_[P]!==0||_[O]!==0||_[E]!==0)throw new a.FormatError("writing to an offset that is not empty");var w=p[q];_[N]=29,_[L]=w>>24&255,_[P]=w>>16&255,_[O]=w>>8&255,_[E]=w&255}}},v}(),g=function(){function v(b){this.cff=b}return v.prototype={compile:function(){var f=this.cff,p={data:[],length:0,add:function(F){this.data=this.data.concat(F),this.length=this.data.length}},h=this.compileHeader(f.header);p.add(h);var _=this.compileNameIndex(f.names);if(p.add(_),f.isCIDFont&&f.topDict.hasName("FontMatrix")){var I=f.topDict.getByName("FontMatrix");f.topDict.removeByName("FontMatrix");for(var W=0,q=f.fdArray.length;W<q;W++){var B=f.fdArray[W],N=I.slice(0);B.hasName("FontMatrix")&&(N=a.Util.transform(N,B.getByName("FontMatrix"))),B.setByName("FontMatrix",N)}}var L=this.compileTopDicts([f.topDict],p.length,f.isCIDFont);p.add(L.output);var P=L.trackers[0],O=this.compileStringIndex(f.strings.strings);p.add(O);var E=this.compileIndex(f.globalSubrIndex);if(p.add(E),f.encoding&&f.topDict.hasName("Encoding"))if(f.encoding.predefined)P.setEntryLocation("Encoding",[f.encoding.format],p);else{var w=this.compileEncoding(f.encoding);P.setEntryLocation("Encoding",[p.length],p),p.add(w)}if(f.charset&&f.topDict.hasName("charset"))if(f.charset.predefined)P.setEntryLocation("charset",[f.charset.format],p);else{var A=this.compileCharset(f.charset);P.setEntryLocation("charset",[p.length],p),p.add(A)}var M=this.compileCharStrings(f.charStrings);if(P.setEntryLocation("CharStrings",[p.length],p),p.add(M),f.isCIDFont){P.setEntryLocation("FDSelect",[p.length],p);var j=this.compileFDSelect(f.fdSelect.raw);p.add(j),L=this.compileTopDicts(f.fdArray,p.length,!0),P.setEntryLocation("FDArray",[p.length],p),p.add(L.output);var C=L.trackers;this.compilePrivateDicts(f.fdArray,C,p)}return this.compilePrivateDicts([f.topDict],[P],p),p.add([0]),p.data},encodeNumber:function(f){return parseFloat(f)===parseInt(f,10)&&!isNaN(f)?this.encodeInteger(f):this.encodeFloat(f)},encodeFloat:function(f){var p=f.toString(),h=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(p);if(h){var _=parseFloat("1e"+((h[2]?+h[2]:0)+h[1].length));p=(Math.round(f*_)/_).toString()}var I="",W,q;for(W=0,q=p.length;W<q;++W){var B=p[W];B==="e"?I+=p[++W]==="-"?"c":"b":B==="."?I+="a":B==="-"?I+="e":I+=B}I+=I.length&1?"f":"ff";var N=[30];for(W=0,q=I.length;W<q;W+=2)N.push(parseInt(I.substr(W,2),16));return N},encodeInteger:function(f){var p;return f>=-107&&f<=107?p=[f+139]:f>=108&&f<=1131?(f=f-108,p=[(f>>8)+247,f&255]):f>=-1131&&f<=-108?(f=-f-108,p=[(f>>8)+251,f&255]):f>=-32768&&f<=32767?p=[28,f>>8&255,f&255]:p=[29,f>>24&255,f>>16&255,f>>8&255,f&255],p},compileHeader:function(f){return[f.major,f.minor,f.hdrSize,f.offSize]},compileNameIndex:function(f){for(var p=new u,h=0,_=f.length;h<_;++h){for(var I=f[h],W=Math.min(I.length,127),q=new Array(W),B=0;B<W;B++){var N=I[B];(N<"!"||N>"~"||N==="["||N==="]"||N==="("||N===")"||N==="{"||N==="}"||N==="<"||N===">"||N==="/"||N==="%")&&(N="_"),q[B]=N}q=q.join(""),q===""&&(q="Bad_Font_Name"),p.add((0,a.stringToBytes)(q))}return this.compileIndex(p)},compileTopDicts:function(f,p,h){for(var _=[],I=new u,W=0,q=f.length;W<q;++W){var B=f[W];h&&(B.removeByName("CIDFontVersion"),B.removeByName("CIDFontRevision"),B.removeByName("CIDFontType"),B.removeByName("CIDCount"),B.removeByName("UIDBase"));var N=new R,L=this.compileDict(B,N);_.push(N),I.add(L),N.offset(p)}return I=this.compileIndex(I,_),{trackers:_,output:I}},compilePrivateDicts:function(f,p,h){for(var _=0,I=f.length;_<I;++_){var W=f[_],q=W.privateDict;if(!q||!W.hasName("Private"))throw new a.FormatError("There must be a private dictionary.");var B=new R,N=this.compileDict(q,B),L=h.length;if(B.offset(L),N.length||(L=0),p[_].setEntryLocation("Private",[N.length,L],h),h.add(N),q.subrsIndex&&q.hasName("Subrs")){var P=this.compileIndex(q.subrsIndex);B.setEntryLocation("Subrs",[N.length],h),h.add(P)}}},compileDict:function(f,p){for(var h=[],_=f.order,I=0;I<_.length;++I){var W=_[I];if(W in f.values){var q=f.values[W],B=f.types[W];if(Array.isArray(B)||(B=[B]),Array.isArray(q)||(q=[q]),q.length!==0){for(var N=0,L=B.length;N<L;++N){var P=B[N],O=q[N];switch(P){case"num":case"sid":h=h.concat(this.encodeNumber(O));break;case"offset":var E=f.keyToNameMap[W];p.isTracking(E)||p.track(E,h.length),h=h.concat([29,0,0,0,0]);break;case"array":case"delta":h=h.concat(this.encodeNumber(O));for(var w=1,A=q.length;w<A;++w)h=h.concat(this.encodeNumber(q[w]));break;default:throw new a.FormatError("Unknown data type of "+P)}}h=h.concat(f.opcodes[W])}}}return h},compileStringIndex:function(f){for(var p=new u,h=0,_=f.length;h<_;++h)p.add((0,a.stringToBytes)(f[h]));return this.compileIndex(p)},compileGlobalSubrIndex:function(){var f=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(f))},compileCharStrings:function(f){return this.compileIndex(f)},compileCharset:function(f){return this.compileTypedArray(f.raw)},compileEncoding:function(f){return this.compileTypedArray(f.raw)},compileFDSelect:function(f){return this.compileTypedArray(f)},compileTypedArray:function(f){for(var p=[],h=0,_=f.length;h<_;++h)p[h]=f[h];return p},compileIndex:function(f,p){p=p||[];var h=f.objects,_=h.length;if(_===0)return[0,0,0];var I=[_>>8&255,_&255],W=1,q;for(q=0;q<_;++q)W+=h[q].length;var B;W<256?B=1:W<65536?B=2:W<16777216?B=3:B=4,I.push(B);var N=1;for(q=0;q<_+1;q++)B===1?I.push(N&255):B===2?I.push(N>>8&255,N&255):B===3?I.push(N>>16&255,N>>8&255,N&255):I.push(N>>>24&255,N>>16&255,N>>8&255,N&255),h[q]&&(N+=h[q].length);for(q=0;q<_;q++){p[q]&&p[q].offset(I.length);for(var L=0,P=h[q].length;L<P;L++)I.push(h[q][L])}return I}},v}();e.CFFStandardStrings=o,e.CFFParser=l,e.CFF=d,e.CFFHeader=c,e.CFFStrings=y,e.CFFIndex=u,e.CFFCharset=D,e.CFFTopDict=V,e.CFFPrivateDict=U,e.CFFCompiler=g},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSupplementalGlyphMapForArialBlack=e.getGlyphMapForStandardFonts=e.getSymbolsFonts=e.getSerifFonts=e.getNonStdFontMap=e.getStdFontMap=void 0;var a=r(0),i=(0,a.getLookupTableFactory)(function(c){c.ArialNarrow="Helvetica",c["ArialNarrow-Bold"]="Helvetica-Bold",c["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",c["ArialNarrow-Italic"]="Helvetica-Oblique",c.ArialBlack="Helvetica",c["ArialBlack-Bold"]="Helvetica-Bold",c["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",c["ArialBlack-Italic"]="Helvetica-Oblique",c["Arial-Black"]="Helvetica",c["Arial-Black-Bold"]="Helvetica-Bold",c["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",c["Arial-Black-Italic"]="Helvetica-Oblique",c.Arial="Helvetica",c["Arial-Bold"]="Helvetica-Bold",c["Arial-BoldItalic"]="Helvetica-BoldOblique",c["Arial-Italic"]="Helvetica-Oblique",c["Arial-BoldItalicMT"]="Helvetica-BoldOblique",c["Arial-BoldMT"]="Helvetica-Bold",c["Arial-ItalicMT"]="Helvetica-Oblique",c.ArialMT="Helvetica",c["Courier-Bold"]="Courier-Bold",c["Courier-BoldItalic"]="Courier-BoldOblique",c["Courier-Italic"]="Courier-Oblique",c.CourierNew="Courier",c["CourierNew-Bold"]="Courier-Bold",c["CourierNew-BoldItalic"]="Courier-BoldOblique",c["CourierNew-Italic"]="Courier-Oblique",c["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",c["CourierNewPS-BoldMT"]="Courier-Bold",c["CourierNewPS-ItalicMT"]="Courier-Oblique",c.CourierNewPSMT="Courier",c.Helvetica="Helvetica",c["Helvetica-Bold"]="Helvetica-Bold",c["Helvetica-BoldItalic"]="Helvetica-BoldOblique",c["Helvetica-BoldOblique"]="Helvetica-BoldOblique",c["Helvetica-Italic"]="Helvetica-Oblique",c["Helvetica-Oblique"]="Helvetica-Oblique",c.SegoeUISymbol="Helvetica",c["Symbol-Bold"]="Symbol",c["Symbol-BoldItalic"]="Symbol",c["Symbol-Italic"]="Symbol",c.TimesNewRoman="Times-Roman",c["TimesNewRoman-Bold"]="Times-Bold",c["TimesNewRoman-BoldItalic"]="Times-BoldItalic",c["TimesNewRoman-Italic"]="Times-Italic",c.TimesNewRomanPS="Times-Roman",c["TimesNewRomanPS-Bold"]="Times-Bold",c["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",c["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",c["TimesNewRomanPS-BoldMT"]="Times-Bold",c["TimesNewRomanPS-Italic"]="Times-Italic",c["TimesNewRomanPS-ItalicMT"]="Times-Italic",c.TimesNewRomanPSMT="Times-Roman",c["TimesNewRomanPSMT-Bold"]="Times-Bold",c["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",c["TimesNewRomanPSMT-Italic"]="Times-Italic"}),s=(0,a.getLookupTableFactory)(function(c){c.CenturyGothic="Helvetica",c["CenturyGothic-Bold"]="Helvetica-Bold",c["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",c["CenturyGothic-Italic"]="Helvetica-Oblique",c.ComicSansMS="Comic Sans MS",c["ComicSansMS-Bold"]="Comic Sans MS-Bold",c["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",c["ComicSansMS-Italic"]="Comic Sans MS-Italic",c.LucidaConsole="Courier",c["LucidaConsole-Bold"]="Courier-Bold",c["LucidaConsole-BoldItalic"]="Courier-BoldOblique",c["LucidaConsole-Italic"]="Courier-Oblique",c["MS-Gothic"]="MS Gothic",c["MS-Gothic-Bold"]="MS Gothic-Bold",c["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",c["MS-Gothic-Italic"]="MS Gothic-Italic",c["MS-Mincho"]="MS Mincho",c["MS-Mincho-Bold"]="MS Mincho-Bold",c["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",c["MS-Mincho-Italic"]="MS Mincho-Italic",c["MS-PGothic"]="MS PGothic",c["MS-PGothic-Bold"]="MS PGothic-Bold",c["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",c["MS-PGothic-Italic"]="MS PGothic-Italic",c["MS-PMincho"]="MS PMincho",c["MS-PMincho-Bold"]="MS PMincho-Bold",c["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",c["MS-PMincho-Italic"]="MS PMincho-Italic",c.NuptialScript="Times-Italic",c.Wingdings="ZapfDingbats"}),t=(0,a.getLookupTableFactory)(function(c){c["Adobe Jenson"]=!0,c["Adobe Text"]=!0,c.Albertus=!0,c.Aldus=!0,c.Alexandria=!0,c.Algerian=!0,c["American Typewriter"]=!0,c.Antiqua=!0,c.Apex=!0,c.Arno=!0,c.Aster=!0,c.Aurora=!0,c.Baskerville=!0,c.Bell=!0,c.Bembo=!0,c["Bembo Schoolbook"]=!0,c.Benguiat=!0,c["Berkeley Old Style"]=!0,c["Bernhard Modern"]=!0,c["Berthold City"]=!0,c.Bodoni=!0,c["Bauer Bodoni"]=!0,c["Book Antiqua"]=!0,c.Bookman=!0,c["Bordeaux Roman"]=!0,c["Californian FB"]=!0,c.Calisto=!0,c.Calvert=!0,c.Capitals=!0,c.Cambria=!0,c.Cartier=!0,c.Caslon=!0,c.Catull=!0,c.Centaur=!0,c["Century Old Style"]=!0,c["Century Schoolbook"]=!0,c.Chaparral=!0,c["Charis SIL"]=!0,c.Cheltenham=!0,c["Cholla Slab"]=!0,c.Clarendon=!0,c.Clearface=!0,c.Cochin=!0,c.Colonna=!0,c["Computer Modern"]=!0,c["Concrete Roman"]=!0,c.Constantia=!0,c["Cooper Black"]=!0,c.Corona=!0,c.Ecotype=!0,c.Egyptienne=!0,c.Elephant=!0,c.Excelsior=!0,c.Fairfield=!0,c["FF Scala"]=!0,c.Folkard=!0,c.Footlight=!0,c.FreeSerif=!0,c["Friz Quadrata"]=!0,c.Garamond=!0,c.Gentium=!0,c.Georgia=!0,c.Gloucester=!0,c["Goudy Old Style"]=!0,c["Goudy Schoolbook"]=!0,c["Goudy Pro Font"]=!0,c.Granjon=!0,c["Guardian Egyptian"]=!0,c.Heather=!0,c.Hercules=!0,c["High Tower Text"]=!0,c.Hiroshige=!0,c["Hoefler Text"]=!0,c["Humana Serif"]=!0,c.Imprint=!0,c["Ionic No. 5"]=!0,c.Janson=!0,c.Joanna=!0,c.Korinna=!0,c.Lexicon=!0,c["Liberation Serif"]=!0,c["Linux Libertine"]=!0,c.Literaturnaya=!0,c.Lucida=!0,c["Lucida Bright"]=!0,c.Melior=!0,c.Memphis=!0,c.Miller=!0,c.Minion=!0,c.Modern=!0,c["Mona Lisa"]=!0,c["Mrs Eaves"]=!0,c["MS Serif"]=!0,c["Museo Slab"]=!0,c["New York"]=!0,c["Nimbus Roman"]=!0,c["NPS Rawlinson Roadway"]=!0,c.NuptialScript=!0,c.Palatino=!0,c.Perpetua=!0,c.Plantin=!0,c["Plantin Schoolbook"]=!0,c.Playbill=!0,c["Poor Richard"]=!0,c["Rawlinson Roadway"]=!0,c.Renault=!0,c.Requiem=!0,c.Rockwell=!0,c.Roman=!0,c["Rotis Serif"]=!0,c.Sabon=!0,c.Scala=!0,c.Seagull=!0,c.Sistina=!0,c.Souvenir=!0,c.STIX=!0,c["Stone Informal"]=!0,c["Stone Serif"]=!0,c.Sylfaen=!0,c.Times=!0,c.Trajan=!0,c.Trinit\u00E9=!0,c["Trump Mediaeval"]=!0,c.Utopia=!0,c["Vale Type"]=!0,c["Bitstream Vera"]=!0,c["Vera Serif"]=!0,c.Versailles=!0,c.Wanted=!0,c.Weiss=!0,c["Wide Latin"]=!0,c.Windsor=!0,c.XITS=!0}),o=(0,a.getLookupTableFactory)(function(c){c.Dingbats=!0,c.Symbol=!0,c.ZapfDingbats=!0}),l=(0,a.getLookupTableFactory)(function(c){c[2]=10,c[3]=32,c[4]=33,c[5]=34,c[6]=35,c[7]=36,c[8]=37,c[9]=38,c[10]=39,c[11]=40,c[12]=41,c[13]=42,c[14]=43,c[15]=44,c[16]=45,c[17]=46,c[18]=47,c[19]=48,c[20]=49,c[21]=50,c[22]=51,c[23]=52,c[24]=53,c[25]=54,c[26]=55,c[27]=56,c[28]=57,c[29]=58,c[30]=894,c[31]=60,c[32]=61,c[33]=62,c[34]=63,c[35]=64,c[36]=65,c[37]=66,c[38]=67,c[39]=68,c[40]=69,c[41]=70,c[42]=71,c[43]=72,c[44]=73,c[45]=74,c[46]=75,c[47]=76,c[48]=77,c[49]=78,c[50]=79,c[51]=80,c[52]=81,c[53]=82,c[54]=83,c[55]=84,c[56]=85,c[57]=86,c[58]=87,c[59]=88,c[60]=89,c[61]=90,c[62]=91,c[63]=92,c[64]=93,c[65]=94,c[66]=95,c[67]=96,c[68]=97,c[69]=98,c[70]=99,c[71]=100,c[72]=101,c[73]=102,c[74]=103,c[75]=104,c[76]=105,c[77]=106,c[78]=107,c[79]=108,c[80]=109,c[81]=110,c[82]=111,c[83]=112,c[84]=113,c[85]=114,c[86]=115,c[87]=116,c[88]=117,c[89]=118,c[90]=119,c[91]=120,c[92]=121,c[93]=122,c[94]=123,c[95]=124,c[96]=125,c[97]=126,c[98]=196,c[99]=197,c[100]=199,c[101]=201,c[102]=209,c[103]=214,c[104]=220,c[105]=225,c[106]=224,c[107]=226,c[108]=228,c[109]=227,c[110]=229,c[111]=231,c[112]=233,c[113]=232,c[114]=234,c[115]=235,c[116]=237,c[117]=236,c[118]=238,c[119]=239,c[120]=241,c[121]=243,c[122]=242,c[123]=244,c[124]=246,c[125]=245,c[126]=250,c[127]=249,c[128]=251,c[129]=252,c[130]=8224,c[131]=176,c[132]=162,c[133]=163,c[134]=167,c[135]=8226,c[136]=182,c[137]=223,c[138]=174,c[139]=169,c[140]=8482,c[141]=180,c[142]=168,c[143]=8800,c[144]=198,c[145]=216,c[146]=8734,c[147]=177,c[148]=8804,c[149]=8805,c[150]=165,c[151]=181,c[152]=8706,c[153]=8721,c[154]=8719,c[156]=8747,c[157]=170,c[158]=186,c[159]=8486,c[160]=230,c[161]=248,c[162]=191,c[163]=161,c[164]=172,c[165]=8730,c[166]=402,c[167]=8776,c[168]=8710,c[169]=171,c[170]=187,c[171]=8230,c[210]=218,c[223]=711,c[224]=321,c[225]=322,c[227]=353,c[229]=382,c[234]=253,c[252]=263,c[253]=268,c[254]=269,c[258]=258,c[260]=260,c[261]=261,c[265]=280,c[266]=281,c[268]=283,c[269]=313,c[275]=323,c[276]=324,c[278]=328,c[284]=345,c[285]=346,c[286]=347,c[292]=367,c[295]=377,c[296]=378,c[298]=380,c[305]=963,c[306]=964,c[307]=966,c[308]=8215,c[309]=8252,c[310]=8319,c[311]=8359,c[312]=8592,c[313]=8593,c[337]=9552,c[493]=1039,c[494]=1040,c[705]=1524,c[706]=8362,c[710]=64288,c[711]=64298,c[759]=1617,c[761]=1776,c[763]=1778,c[775]=1652,c[777]=1764,c[778]=1780,c[779]=1781,c[780]=1782,c[782]=771,c[783]=64726,c[786]=8363,c[788]=8532,c[790]=768,c[791]=769,c[792]=768,c[795]=803,c[797]=64336,c[798]=64337,c[799]=64342,c[800]=64343,c[801]=64344,c[802]=64345,c[803]=64362,c[804]=64363,c[805]=64364,c[2424]=7821,c[2425]=7822,c[2426]=7823,c[2427]=7824,c[2428]=7825,c[2429]=7826,c[2430]=7827,c[2433]=7682,c[2678]=8045,c[2679]=8046,c[2830]=1552,c[2838]=686,c[2840]=751,c[2842]=753,c[2843]=754,c[2844]=755,c[2846]=757,c[2856]=767,c[2857]=848,c[2858]=849,c[2862]=853,c[2863]=854,c[2864]=855,c[2865]=861,c[2866]=862,c[2906]=7460,c[2908]=7462,c[2909]=7463,c[2910]=7464,c[2912]=7466,c[2913]=7467,c[2914]=7468,c[2916]=7470,c[2917]=7471,c[2918]=7472,c[2920]=7474,c[2921]=7475,c[2922]=7476,c[2924]=7478,c[2925]=7479,c[2926]=7480,c[2928]=7482,c[2929]=7483,c[2930]=7484,c[2932]=7486,c[2933]=7487,c[2934]=7488,c[2936]=7490,c[2937]=7491,c[2938]=7492,c[2940]=7494,c[2941]=7495,c[2942]=7496,c[2944]=7498,c[2946]=7500,c[2948]=7502,c[2950]=7504,c[2951]=7505,c[2952]=7506,c[2954]=7508,c[2955]=7509,c[2956]=7510,c[2958]=7512,c[2959]=7513,c[2960]=7514,c[2962]=7516,c[2963]=7517,c[2964]=7518,c[2966]=7520,c[2967]=7521,c[2968]=7522,c[2970]=7524,c[2971]=7525,c[2972]=7526,c[2974]=7528,c[2975]=7529,c[2976]=7530,c[2978]=1537,c[2979]=1538,c[2980]=1539,c[2982]=1549,c[2983]=1551,c[2984]=1552,c[2986]=1554,c[2987]=1555,c[2988]=1556,c[2990]=1623,c[2991]=1624,c[2995]=1775,c[2999]=1791,c[3002]=64290,c[3003]=64291,c[3004]=64292,c[3006]=64294,c[3007]=64295,c[3008]=64296,c[3011]=1900,c[3014]=8223,c[3015]=8244,c[3017]=7532,c[3018]=7533,c[3019]=7534,c[3075]=7590,c[3076]=7591,c[3079]=7594,c[3080]=7595,c[3083]=7598,c[3084]=7599,c[3087]=7602,c[3088]=7603,c[3091]=7606,c[3092]=7607,c[3095]=7610,c[3096]=7611,c[3099]=7614,c[3100]=7615,c[3103]=7618,c[3104]=7619,c[3107]=8337,c[3108]=8338,c[3116]=1884,c[3119]=1885,c[3120]=1885,c[3123]=1886,c[3124]=1886,c[3127]=1887,c[3128]=1887,c[3131]=1888,c[3132]=1888,c[3135]=1889,c[3136]=1889,c[3139]=1890,c[3140]=1890,c[3143]=1891,c[3144]=1891,c[3147]=1892,c[3148]=1892,c[3153]=580,c[3154]=581,c[3157]=584,c[3158]=585,c[3161]=588,c[3162]=589,c[3165]=891,c[3166]=892,c[3169]=1274,c[3170]=1275,c[3173]=1278,c[3174]=1279,c[3181]=7622,c[3182]=7623,c[3282]=11799,c[3316]=578,c[3379]=42785,c[3393]=1159,c[3416]=8377}),d=(0,a.getLookupTableFactory)(function(c){c[227]=322,c[264]=261,c[291]=346});e.getStdFontMap=i,e.getNonStdFontMap=s,e.getSerifFonts=t,e.getSymbolsFonts=o,e.getGlyphMapForStandardFonts=l,e.getSupplementalGlyphMapForArialBlack=d},function(n,e,r){var a=r(0).getLookupTableFactory,i=a(function(u){u[63721]=169,u[63193]=169,u[63720]=174,u[63194]=174,u[63722]=8482,u[63195]=8482,u[63729]=9127,u[63730]=9128,u[63731]=9129,u[63740]=9131,u[63741]=9132,u[63742]=9133,u[63726]=9121,u[63727]=9122,u[63728]=9123,u[63737]=9124,u[63738]=9125,u[63739]=9126,u[63723]=9115,u[63724]=9116,u[63725]=9117,u[63734]=9118,u[63735]=9119,u[63736]=9120});function s(u){return u>=65520&&u<=65535?0:u>=62976&&u<=63743?i()[u]||u:u===173?45:u}function t(u,S){var V=S[u];if(V!==void 0)return V;if(!u)return-1;if(u[0]==="u"){var U=u.length,z;if(U===7&&u[1]==="n"&&u[2]==="i")z=u.substr(3);else if(U>=5&&U<=7)z=u.substr(1);else return-1;if(z===z.toUpperCase()&&(V=parseInt(z,16),V>=0))return V}return-1}var o=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function l(u){for(var S=0,V=o.length;S<V;S++){var U=o[S];if(u>=U.begin&&u<U.end)return S}return-1}function d(u){var S=o[13];return u>=S.begin&&u<S.end||(S=o[11],u>=S.begin&&u<S.end)}var c=a(function(u){u["\xA8"]=" \u0308",u["\xAF"]=" \u0304",u["\xB4"]=" \u0301",u.\u00B5="\u03BC",u["\xB8"]=" \u0327",u.\u0132="IJ",u.\u0133="ij",u.\u013F="L\xB7",u.\u0140="l\xB7",u.\u0149="\u02BCn",u.\u017F="s",u.\u01C4="D\u017D",u.\u01C5="D\u017E",u.\u01C6="d\u017E",u.\u01C7="LJ",u.\u01C8="Lj",u.\u01C9="lj",u.\u01CA="NJ",u.\u01CB="Nj",u.\u01CC="nj",u.\u01F1="DZ",u.\u01F2="Dz",u.\u01F3="dz",u["\u02D8"]=" \u0306",u["\u02D9"]=" \u0307",u["\u02DA"]=" \u030A",u["\u02DB"]=" \u0328",u["\u02DC"]=" \u0303",u["\u02DD"]=" \u030B",u.\u037A=" \u0345",u["\u0384"]=" \u0301",u.\u03D0="\u03B2",u.\u03D1="\u03B8",u.\u03D2="\u03A5",u.\u03D5="\u03C6",u.\u03D6="\u03C0",u.\u03F0="\u03BA",u.\u03F1="\u03C1",u.\u03F2="\u03C2",u["\u03F4"]="\u0398",u["\u03F5"]="\u03B5",u["\u03F9"]="\u03A3",u.\u0587="\u0565\u0582",u.\u0675="\u0627\u0674",u.\u0676="\u0648\u0674",u.\u0677="\u06C7\u0674",u.\u0678="\u064A\u0674",u.\u0E33="\u0E4D\u0E32",u.\u0EB3="\u0ECD\u0EB2",u.\u0EDC="\u0EAB\u0E99",u.\u0EDD="\u0EAB\u0EA1",u["\u0F77"]="\u0FB2\u0F81",u["\u0F79"]="\u0FB3\u0F81",u.\u1E9A="a\u02BE",u["\u1FBD"]=" \u0313",u["\u1FBF"]=" \u0313",u["\u1FC0"]=" \u0342",u["\u1FFE"]=" \u0314",u["\u2002"]=" ",u["\u2003"]=" ",u["\u2004"]=" ",u["\u2005"]=" ",u["\u2006"]=" ",u["\u2008"]=" ",u["\u2009"]=" ",u["\u200A"]=" ",u["\u2017"]=" \u0333",u["\u2024"]=".",u["\u2025"]="..",u["\u2026"]="...",u["\u2033"]="\u2032\u2032",u["\u2034"]="\u2032\u2032\u2032",u["\u2036"]="\u2035\u2035",u["\u2037"]="\u2035\u2035\u2035",u["\u203C"]="!!",u["\u203E"]=" \u0305",u["\u2047"]="??",u["\u2048"]="?!",u["\u2049"]="!?",u["\u2057"]="\u2032\u2032\u2032\u2032",u["\u205F"]=" ",u["\u20A8"]="Rs",u["\u2100"]="a/c",u["\u2101"]="a/s",u["\u2103"]="\xB0C",u["\u2105"]="c/o",u["\u2106"]="c/u",u.\u2107="\u0190",u["\u2109"]="\xB0F",u["\u2116"]="No",u["\u2121"]="TEL",u.\u2135="\u05D0",u.\u2136="\u05D1",u.\u2137="\u05D2",u.\u2138="\u05D3",u["\u213B"]="FAX",u["\u2160"]="I",u["\u2161"]="II",u["\u2162"]="III",u["\u2163"]="IV",u["\u2164"]="V",u["\u2165"]="VI",u["\u2166"]="VII",u["\u2167"]="VIII",u["\u2168"]="IX",u["\u2169"]="X",u["\u216A"]="XI",u["\u216B"]="XII",u["\u216C"]="L",u["\u216D"]="C",u["\u216E"]="D",u["\u216F"]="M",u["\u2170"]="i",u["\u2171"]="ii",u["\u2172"]="iii",u["\u2173"]="iv",u["\u2174"]="v",u["\u2175"]="vi",u["\u2176"]="vii",u["\u2177"]="viii",u["\u2178"]="ix",u["\u2179"]="x",u["\u217A"]="xi",u["\u217B"]="xii",u["\u217C"]="l",u["\u217D"]="c",u["\u217E"]="d",u["\u217F"]="m",u["\u222C"]="\u222B\u222B",u["\u222D"]="\u222B\u222B\u222B",u["\u222F"]="\u222E\u222E",u["\u2230"]="\u222E\u222E\u222E",u["\u2474"]="(1)",u["\u2475"]="(2)",u["\u2476"]="(3)",u["\u2477"]="(4)",u["\u2478"]="(5)",u["\u2479"]="(6)",u["\u247A"]="(7)",u["\u247B"]="(8)",u["\u247C"]="(9)",u["\u247D"]="(10)",u["\u247E"]="(11)",u["\u247F"]="(12)",u["\u2480"]="(13)",u["\u2481"]="(14)",u["\u2482"]="(15)",u["\u2483"]="(16)",u["\u2484"]="(17)",u["\u2485"]="(18)",u["\u2486"]="(19)",u["\u2487"]="(20)",u["\u2488"]="1.",u["\u2489"]="2.",u["\u248A"]="3.",u["\u248B"]="4.",u["\u248C"]="5.",u["\u248D"]="6.",u["\u248E"]="7.",u["\u248F"]="8.",u["\u2490"]="9.",u["\u2491"]="10.",u["\u2492"]="11.",u["\u2493"]="12.",u["\u2494"]="13.",u["\u2495"]="14.",u["\u2496"]="15.",u["\u2497"]="16.",u["\u2498"]="17.",u["\u2499"]="18.",u["\u249A"]="19.",u["\u249B"]="20.",u["\u249C"]="(a)",u["\u249D"]="(b)",u["\u249E"]="(c)",u["\u249F"]="(d)",u["\u24A0"]="(e)",u["\u24A1"]="(f)",u["\u24A2"]="(g)",u["\u24A3"]="(h)",u["\u24A4"]="(i)",u["\u24A5"]="(j)",u["\u24A6"]="(k)",u["\u24A7"]="(l)",u["\u24A8"]="(m)",u["\u24A9"]="(n)",u["\u24AA"]="(o)",u["\u24AB"]="(p)",u["\u24AC"]="(q)",u["\u24AD"]="(r)",u["\u24AE"]="(s)",u["\u24AF"]="(t)",u["\u24B0"]="(u)",u["\u24B1"]="(v)",u["\u24B2"]="(w)",u["\u24B3"]="(x)",u["\u24B4"]="(y)",u["\u24B5"]="(z)",u["\u2A0C"]="\u222B\u222B\u222B\u222B",u["\u2A74"]="::=",u["\u2A75"]="==",u["\u2A76"]="===",u["\u2E9F"]="\u6BCD",u["\u2EF3"]="\u9F9F",u["\u2F00"]="\u4E00",u["\u2F01"]="\u4E28",u["\u2F02"]="\u4E36",u["\u2F03"]="\u4E3F",u["\u2F04"]="\u4E59",u["\u2F05"]="\u4E85",u["\u2F06"]="\u4E8C",u["\u2F07"]="\u4EA0",u["\u2F08"]="\u4EBA",u["\u2F09"]="\u513F",u["\u2F0A"]="\u5165",u["\u2F0B"]="\u516B",u["\u2F0C"]="\u5182",u["\u2F0D"]="\u5196",u["\u2F0E"]="\u51AB",u["\u2F0F"]="\u51E0",u["\u2F10"]="\u51F5",u["\u2F11"]="\u5200",u["\u2F12"]="\u529B",u["\u2F13"]="\u52F9",u["\u2F14"]="\u5315",u["\u2F15"]="\u531A",u["\u2F16"]="\u5338",u["\u2F17"]="\u5341",u["\u2F18"]="\u535C",u["\u2F19"]="\u5369",u["\u2F1A"]="\u5382",u["\u2F1B"]="\u53B6",u["\u2F1C"]="\u53C8",u["\u2F1D"]="\u53E3",u["\u2F1E"]="\u56D7",u["\u2F1F"]="\u571F",u["\u2F20"]="\u58EB",u["\u2F21"]="\u5902",u["\u2F22"]="\u590A",u["\u2F23"]="\u5915",u["\u2F24"]="\u5927",u["\u2F25"]="\u5973",u["\u2F26"]="\u5B50",u["\u2F27"]="\u5B80",u["\u2F28"]="\u5BF8",u["\u2F29"]="\u5C0F",u["\u2F2A"]="\u5C22",u["\u2F2B"]="\u5C38",u["\u2F2C"]="\u5C6E",u["\u2F2D"]="\u5C71",u["\u2F2E"]="\u5DDB",u["\u2F2F"]="\u5DE5",u["\u2F30"]="\u5DF1",u["\u2F31"]="\u5DFE",u["\u2F32"]="\u5E72",u["\u2F33"]="\u5E7A",u["\u2F34"]="\u5E7F",u["\u2F35"]="\u5EF4",u["\u2F36"]="\u5EFE",u["\u2F37"]="\u5F0B",u["\u2F38"]="\u5F13",u["\u2F39"]="\u5F50",u["\u2F3A"]="\u5F61",u["\u2F3B"]="\u5F73",u["\u2F3C"]="\u5FC3",u["\u2F3D"]="\u6208",u["\u2F3E"]="\u6236",u["\u2F3F"]="\u624B",u["\u2F40"]="\u652F",u["\u2F41"]="\u6534",u["\u2F42"]="\u6587",u["\u2F43"]="\u6597",u["\u2F44"]="\u65A4",u["\u2F45"]="\u65B9",u["\u2F46"]="\u65E0",u["\u2F47"]="\u65E5",u["\u2F48"]="\u66F0",u["\u2F49"]="\u6708",u["\u2F4A"]="\u6728",u["\u2F4B"]="\u6B20",u["\u2F4C"]="\u6B62",u["\u2F4D"]="\u6B79",u["\u2F4E"]="\u6BB3",u["\u2F4F"]="\u6BCB",u["\u2F50"]="\u6BD4",u["\u2F51"]="\u6BDB",u["\u2F52"]="\u6C0F",u["\u2F53"]="\u6C14",u["\u2F54"]="\u6C34",u["\u2F55"]="\u706B",u["\u2F56"]="\u722A",u["\u2F57"]="\u7236",u["\u2F58"]="\u723B",u["\u2F59"]="\u723F",u["\u2F5A"]="\u7247",u["\u2F5B"]="\u7259",u["\u2F5C"]="\u725B",u["\u2F5D"]="\u72AC",u["\u2F5E"]="\u7384",u["\u2F5F"]="\u7389",u["\u2F60"]="\u74DC",u["\u2F61"]="\u74E6",u["\u2F62"]="\u7518",u["\u2F63"]="\u751F",u["\u2F64"]="\u7528",u["\u2F65"]="\u7530",u["\u2F66"]="\u758B",u["\u2F67"]="\u7592",u["\u2F68"]="\u7676",u["\u2F69"]="\u767D",u["\u2F6A"]="\u76AE",u["\u2F6B"]="\u76BF",u["\u2F6C"]="\u76EE",u["\u2F6D"]="\u77DB",u["\u2F6E"]="\u77E2",u["\u2F6F"]="\u77F3",u["\u2F70"]="\u793A",u["\u2F71"]="\u79B8",u["\u2F72"]="\u79BE",u["\u2F73"]="\u7A74",u["\u2F74"]="\u7ACB",u["\u2F75"]="\u7AF9",u["\u2F76"]="\u7C73",u["\u2F77"]="\u7CF8",u["\u2F78"]="\u7F36",u["\u2F79"]="\u7F51",u["\u2F7A"]="\u7F8A",u["\u2F7B"]="\u7FBD",u["\u2F7C"]="\u8001",u["\u2F7D"]="\u800C",u["\u2F7E"]="\u8012",u["\u2F7F"]="\u8033",u["\u2F80"]="\u807F",u["\u2F81"]="\u8089",u["\u2F82"]="\u81E3",u["\u2F83"]="\u81EA",u["\u2F84"]="\u81F3",u["\u2F85"]="\u81FC",u["\u2F86"]="\u820C",u["\u2F87"]="\u821B",u["\u2F88"]="\u821F",u["\u2F89"]="\u826E",u["\u2F8A"]="\u8272",u["\u2F8B"]="\u8278",u["\u2F8C"]="\u864D",u["\u2F8D"]="\u866B",u["\u2F8E"]="\u8840",u["\u2F8F"]="\u884C",u["\u2F90"]="\u8863",u["\u2F91"]="\u897E",u["\u2F92"]="\u898B",u["\u2F93"]="\u89D2",u["\u2F94"]="\u8A00",u["\u2F95"]="\u8C37",u["\u2F96"]="\u8C46",u["\u2F97"]="\u8C55",u["\u2F98"]="\u8C78",u["\u2F99"]="\u8C9D",u["\u2F9A"]="\u8D64",u["\u2F9B"]="\u8D70",u["\u2F9C"]="\u8DB3",u["\u2F9D"]="\u8EAB",u["\u2F9E"]="\u8ECA",u["\u2F9F"]="\u8F9B",u["\u2FA0"]="\u8FB0",u["\u2FA1"]="\u8FB5",u["\u2FA2"]="\u9091",u["\u2FA3"]="\u9149",u["\u2FA4"]="\u91C6",u["\u2FA5"]="\u91CC",u["\u2FA6"]="\u91D1",u["\u2FA7"]="\u9577",u["\u2FA8"]="\u9580",u["\u2FA9"]="\u961C",u["\u2FAA"]="\u96B6",u["\u2FAB"]="\u96B9",u["\u2FAC"]="\u96E8",u["\u2FAD"]="\u9751",u["\u2FAE"]="\u975E",u["\u2FAF"]="\u9762",u["\u2FB0"]="\u9769",u["\u2FB1"]="\u97CB",u["\u2FB2"]="\u97ED",u["\u2FB3"]="\u97F3",u["\u2FB4"]="\u9801",u["\u2FB5"]="\u98A8",u["\u2FB6"]="\u98DB",u["\u2FB7"]="\u98DF",u["\u2FB8"]="\u9996",u["\u2FB9"]="\u9999",u["\u2FBA"]="\u99AC",u["\u2FBB"]="\u9AA8",u["\u2FBC"]="\u9AD8",u["\u2FBD"]="\u9ADF",u["\u2FBE"]="\u9B25",u["\u2FBF"]="\u9B2F",u["\u2FC0"]="\u9B32",u["\u2FC1"]="\u9B3C",u["\u2FC2"]="\u9B5A",u["\u2FC3"]="\u9CE5",u["\u2FC4"]="\u9E75",u["\u2FC5"]="\u9E7F",u["\u2FC6"]="\u9EA5",u["\u2FC7"]="\u9EBB",u["\u2FC8"]="\u9EC3",u["\u2FC9"]="\u9ECD",u["\u2FCA"]="\u9ED1",u["\u2FCB"]="\u9EF9",u["\u2FCC"]="\u9EFD",u["\u2FCD"]="\u9F0E",u["\u2FCE"]="\u9F13",u["\u2FCF"]="\u9F20",u["\u2FD0"]="\u9F3B",u["\u2FD1"]="\u9F4A",u["\u2FD2"]="\u9F52",u["\u2FD3"]="\u9F8D",u["\u2FD4"]="\u9F9C",u["\u2FD5"]="\u9FA0",u["\u3036"]="\u3012",u["\u3038"]="\u5341",u["\u3039"]="\u5344",u["\u303A"]="\u5345",u["\u309B"]=" \u3099",u["\u309C"]=" \u309A",u.\u3131="\u1100",u.\u3132="\u1101",u.\u3133="\u11AA",u.\u3134="\u1102",u.\u3135="\u11AC",u.\u3136="\u11AD",u.\u3137="\u1103",u.\u3138="\u1104",u.\u3139="\u1105",u.\u313A="\u11B0",u.\u313B="\u11B1",u.\u313C="\u11B2",u.\u313D="\u11B3",u.\u313E="\u11B4",u.\u313F="\u11B5",u.\u3140="\u111A",u.\u3141="\u1106",u.\u3142="\u1107",u.\u3143="\u1108",u.\u3144="\u1121",u.\u3145="\u1109",u.\u3146="\u110A",u.\u3147="\u110B",u.\u3148="\u110C",u.\u3149="\u110D",u.\u314A="\u110E",u.\u314B="\u110F",u.\u314C="\u1110",u.\u314D="\u1111",u.\u314E="\u1112",u.\u314F="\u1161",u.\u3150="\u1162",u.\u3151="\u1163",u.\u3152="\u1164",u.\u3153="\u1165",u.\u3154="\u1166",u.\u3155="\u1167",u.\u3156="\u1168",u.\u3157="\u1169",u.\u3158="\u116A",u.\u3159="\u116B",u.\u315A="\u116C",u.\u315B="\u116D",u.\u315C="\u116E",u.\u315D="\u116F",u.\u315E="\u1170",u.\u315F="\u1171",u.\u3160="\u1172",u.\u3161="\u1173",u.\u3162="\u1174",u.\u3163="\u1175",u.\u3164="\u1160",u.\u3165="\u1114",u.\u3166="\u1115",u.\u3167="\u11C7",u.\u3168="\u11C8",u.\u3169="\u11CC",u.\u316A="\u11CE",u.\u316B="\u11D3",u.\u316C="\u11D7",u.\u316D="\u11D9",u.\u316E="\u111C",u.\u316F="\u11DD",u.\u3170="\u11DF",u.\u3171="\u111D",u.\u3172="\u111E",u.\u3173="\u1120",u.\u3174="\u1122",u.\u3175="\u1123",u.\u3176="\u1127",u.\u3177="\u1129",u.\u3178="\u112B",u.\u3179="\u112C",u.\u317A="\u112D",u.\u317B="\u112E",u.\u317C="\u112F",u.\u317D="\u1132",u.\u317E="\u1136",u.\u317F="\u1140",u.\u3180="\u1147",u.\u3181="\u114C",u.\u3182="\u11F1",u.\u3183="\u11F2",u.\u3184="\u1157",u.\u3185="\u1158",u.\u3186="\u1159",u.\u3187="\u1184",u.\u3188="\u1185",u.\u3189="\u1188",u.\u318A="\u1191",u.\u318B="\u1192",u.\u318C="\u1194",u.\u318D="\u119E",u.\u318E="\u11A1",u["\u3200"]="(\u1100)",u["\u3201"]="(\u1102)",u["\u3202"]="(\u1103)",u["\u3203"]="(\u1105)",u["\u3204"]="(\u1106)",u["\u3205"]="(\u1107)",u["\u3206"]="(\u1109)",u["\u3207"]="(\u110B)",u["\u3208"]="(\u110C)",u["\u3209"]="(\u110E)",u["\u320A"]="(\u110F)",u["\u320B"]="(\u1110)",u["\u320C"]="(\u1111)",u["\u320D"]="(\u1112)",u["\u320E"]="(\u1100\u1161)",u["\u320F"]="(\u1102\u1161)",u["\u3210"]="(\u1103\u1161)",u["\u3211"]="(\u1105\u1161)",u["\u3212"]="(\u1106\u1161)",u["\u3213"]="(\u1107\u1161)",u["\u3214"]="(\u1109\u1161)",u["\u3215"]="(\u110B\u1161)",u["\u3216"]="(\u110C\u1161)",u["\u3217"]="(\u110E\u1161)",u["\u3218"]="(\u110F\u1161)",u["\u3219"]="(\u1110\u1161)",u["\u321A"]="(\u1111\u1161)",u["\u321B"]="(\u1112\u1161)",u["\u321C"]="(\u110C\u116E)",u["\u321D"]="(\u110B\u1169\u110C\u1165\u11AB)",u["\u321E"]="(\u110B\u1169\u1112\u116E)",u["\u3220"]="(\u4E00)",u["\u3221"]="(\u4E8C)",u["\u3222"]="(\u4E09)",u["\u3223"]="(\u56DB)",u["\u3224"]="(\u4E94)",u["\u3225"]="(\u516D)",u["\u3226"]="(\u4E03)",u["\u3227"]="(\u516B)",u["\u3228"]="(\u4E5D)",u["\u3229"]="(\u5341)",u["\u322A"]="(\u6708)",u["\u322B"]="(\u706B)",u["\u322C"]="(\u6C34)",u["\u322D"]="(\u6728)",u["\u322E"]="(\u91D1)",u["\u322F"]="(\u571F)",u["\u3230"]="(\u65E5)",u["\u3231"]="(\u682A)",u["\u3232"]="(\u6709)",u["\u3233"]="(\u793E)",u["\u3234"]="(\u540D)",u["\u3235"]="(\u7279)",u["\u3236"]="(\u8CA1)",u["\u3237"]="(\u795D)",u["\u3238"]="(\u52B4)",u["\u3239"]="(\u4EE3)",u["\u323A"]="(\u547C)",u["\u323B"]="(\u5B66)",u["\u323C"]="(\u76E3)",u["\u323D"]="(\u4F01)",u["\u323E"]="(\u8CC7)",u["\u323F"]="(\u5354)",u["\u3240"]="(\u796D)",u["\u3241"]="(\u4F11)",u["\u3242"]="(\u81EA)",u["\u3243"]="(\u81F3)",u["\u32C0"]="1\u6708",u["\u32C1"]="2\u6708",u["\u32C2"]="3\u6708",u["\u32C3"]="4\u6708",u["\u32C4"]="5\u6708",u["\u32C5"]="6\u6708",u["\u32C6"]="7\u6708",u["\u32C7"]="8\u6708",u["\u32C8"]="9\u6708",u["\u32C9"]="10\u6708",u["\u32CA"]="11\u6708",u["\u32CB"]="12\u6708",u["\u3358"]="0\u70B9",u["\u3359"]="1\u70B9",u["\u335A"]="2\u70B9",u["\u335B"]="3\u70B9",u["\u335C"]="4\u70B9",u["\u335D"]="5\u70B9",u["\u335E"]="6\u70B9",u["\u335F"]="7\u70B9",u["\u3360"]="8\u70B9",u["\u3361"]="9\u70B9",u["\u3362"]="10\u70B9",u["\u3363"]="11\u70B9",u["\u3364"]="12\u70B9",u["\u3365"]="13\u70B9",u["\u3366"]="14\u70B9",u["\u3367"]="15\u70B9",u["\u3368"]="16\u70B9",u["\u3369"]="17\u70B9",u["\u336A"]="18\u70B9",u["\u336B"]="19\u70B9",u["\u336C"]="20\u70B9",u["\u336D"]="21\u70B9",u["\u336E"]="22\u70B9",u["\u336F"]="23\u70B9",u["\u3370"]="24\u70B9",u["\u33E0"]="1\u65E5",u["\u33E1"]="2\u65E5",u["\u33E2"]="3\u65E5",u["\u33E3"]="4\u65E5",u["\u33E4"]="5\u65E5",u["\u33E5"]="6\u65E5",u["\u33E6"]="7\u65E5",u["\u33E7"]="8\u65E5",u["\u33E8"]="9\u65E5",u["\u33E9"]="10\u65E5",u["\u33EA"]="11\u65E5",u["\u33EB"]="12\u65E5",u["\u33EC"]="13\u65E5",u["\u33ED"]="14\u65E5",u["\u33EE"]="15\u65E5",u["\u33EF"]="16\u65E5",u["\u33F0"]="17\u65E5",u["\u33F1"]="18\u65E5",u["\u33F2"]="19\u65E5",u["\u33F3"]="20\u65E5",u["\u33F4"]="21\u65E5",u["\u33F5"]="22\u65E5",u["\u33F6"]="23\u65E5",u["\u33F7"]="24\u65E5",u["\u33F8"]="25\u65E5",u["\u33F9"]="26\u65E5",u["\u33FA"]="27\u65E5",u["\u33FB"]="28\u65E5",u["\u33FC"]="29\u65E5",u["\u33FD"]="30\u65E5",u["\u33FE"]="31\u65E5",u.\uFB00="ff",u.\uFB01="fi",u.\uFB02="fl",u.\uFB03="ffi",u.\uFB04="ffl",u.\uFB05="\u017Ft",u.\uFB06="st",u.\uFB13="\u0574\u0576",u.\uFB14="\u0574\u0565",u.\uFB15="\u0574\u056B",u.\uFB16="\u057E\u0576",u.\uFB17="\u0574\u056D",u.\uFB4F="\u05D0\u05DC",u.\uFB50="\u0671",u.\uFB51="\u0671",u.\uFB52="\u067B",u.\uFB53="\u067B",u.\uFB54="\u067B",u.\uFB55="\u067B",u.\uFB56="\u067E",u.\uFB57="\u067E",u.\uFB58="\u067E",u.\uFB59="\u067E",u.\uFB5A="\u0680",u.\uFB5B="\u0680",u.\uFB5C="\u0680",u.\uFB5D="\u0680",u.\uFB5E="\u067A",u.\uFB5F="\u067A",u.\uFB60="\u067A",u.\uFB61="\u067A",u.\uFB62="\u067F",u.\uFB63="\u067F",u.\uFB64="\u067F",u.\uFB65="\u067F",u.\uFB66="\u0679",u.\uFB67="\u0679",u.\uFB68="\u0679",u.\uFB69="\u0679",u.\uFB6A="\u06A4",u.\uFB6B="\u06A4",u.\uFB6C="\u06A4",u.\uFB6D="\u06A4",u.\uFB6E="\u06A6",u.\uFB6F="\u06A6",u.\uFB70="\u06A6",u.\uFB71="\u06A6",u.\uFB72="\u0684",u.\uFB73="\u0684",u.\uFB74="\u0684",u.\uFB75="\u0684",u.\uFB76="\u0683",u.\uFB77="\u0683",u.\uFB78="\u0683",u.\uFB79="\u0683",u.\uFB7A="\u0686",u.\uFB7B="\u0686",u.\uFB7C="\u0686",u.\uFB7D="\u0686",u.\uFB7E="\u0687",u.\uFB7F="\u0687",u.\uFB80="\u0687",u.\uFB81="\u0687",u.\uFB82="\u068D",u.\uFB83="\u068D",u.\uFB84="\u068C",u.\uFB85="\u068C",u.\uFB86="\u068E",u.\uFB87="\u068E",u.\uFB88="\u0688",u.\uFB89="\u0688",u.\uFB8A="\u0698",u.\uFB8B="\u0698",u.\uFB8C="\u0691",u.\uFB8D="\u0691",u.\uFB8E="\u06A9",u.\uFB8F="\u06A9",u.\uFB90="\u06A9",u.\uFB91="\u06A9",u.\uFB92="\u06AF",u.\uFB93="\u06AF",u.\uFB94="\u06AF",u.\uFB95="\u06AF",u.\uFB96="\u06B3",u.\uFB97="\u06B3",u.\uFB98="\u06B3",u.\uFB99="\u06B3",u.\uFB9A="\u06B1",u.\uFB9B="\u06B1",u.\uFB9C="\u06B1",u.\uFB9D="\u06B1",u.\uFB9E="\u06BA",u.\uFB9F="\u06BA",u.\uFBA0="\u06BB",u.\uFBA1="\u06BB",u.\uFBA2="\u06BB",u.\uFBA3="\u06BB",u.\uFBA4="\u06C0",u.\uFBA5="\u06C0",u.\uFBA6="\u06C1",u.\uFBA7="\u06C1",u.\uFBA8="\u06C1",u.\uFBA9="\u06C1",u.\uFBAA="\u06BE",u.\uFBAB="\u06BE",u.\uFBAC="\u06BE",u.\uFBAD="\u06BE",u.\uFBAE="\u06D2",u.\uFBAF="\u06D2",u.\uFBB0="\u06D3",u.\uFBB1="\u06D3",u.\uFBD3="\u06AD",u.\uFBD4="\u06AD",u.\uFBD5="\u06AD",u.\uFBD6="\u06AD",u.\uFBD7="\u06C7",u.\uFBD8="\u06C7",u.\uFBD9="\u06C6",u.\uFBDA="\u06C6",u.\uFBDB="\u06C8",u.\uFBDC="\u06C8",u.\uFBDD="\u0677",u.\uFBDE="\u06CB",u.\uFBDF="\u06CB",u.\uFBE0="\u06C5",u.\uFBE1="\u06C5",u.\uFBE2="\u06C9",u.\uFBE3="\u06C9",u.\uFBE4="\u06D0",u.\uFBE5="\u06D0",u.\uFBE6="\u06D0",u.\uFBE7="\u06D0",u.\uFBE8="\u0649",u.\uFBE9="\u0649",u.\uFBEA="\u0626\u0627",u.\uFBEB="\u0626\u0627",u.\uFBEC="\u0626\u06D5",u.\uFBED="\u0626\u06D5",u.\uFBEE="\u0626\u0648",u.\uFBEF="\u0626\u0648",u.\uFBF0="\u0626\u06C7",u.\uFBF1="\u0626\u06C7",u.\uFBF2="\u0626\u06C6",u.\uFBF3="\u0626\u06C6",u.\uFBF4="\u0626\u06C8",u.\uFBF5="\u0626\u06C8",u.\uFBF6="\u0626\u06D0",u.\uFBF7="\u0626\u06D0",u.\uFBF8="\u0626\u06D0",u.\uFBF9="\u0626\u0649",u.\uFBFA="\u0626\u0649",u.\uFBFB="\u0626\u0649",u.\uFBFC="\u06CC",u.\uFBFD="\u06CC",u.\uFBFE="\u06CC",u.\uFBFF="\u06CC",u.\uFC00="\u0626\u062C",u.\uFC01="\u0626\u062D",u.\uFC02="\u0626\u0645",u.\uFC03="\u0626\u0649",u.\uFC04="\u0626\u064A",u.\uFC05="\u0628\u062C",u.\uFC06="\u0628\u062D",u.\uFC07="\u0628\u062E",u.\uFC08="\u0628\u0645",u.\uFC09="\u0628\u0649",u.\uFC0A="\u0628\u064A",u.\uFC0B="\u062A\u062C",u.\uFC0C="\u062A\u062D",u.\uFC0D="\u062A\u062E",u.\uFC0E="\u062A\u0645",u.\uFC0F="\u062A\u0649",u.\uFC10="\u062A\u064A",u.\uFC11="\u062B\u062C",u.\uFC12="\u062B\u0645",u.\uFC13="\u062B\u0649",u.\uFC14="\u062B\u064A",u.\uFC15="\u062C\u062D",u.\uFC16="\u062C\u0645",u.\uFC17="\u062D\u062C",u.\uFC18="\u062D\u0645",u.\uFC19="\u062E\u062C",u.\uFC1A="\u062E\u062D",u.\uFC1B="\u062E\u0645",u.\uFC1C="\u0633\u062C",u.\uFC1D="\u0633\u062D",u.\uFC1E="\u0633\u062E",u.\uFC1F="\u0633\u0645",u.\uFC20="\u0635\u062D",u.\uFC21="\u0635\u0645",u.\uFC22="\u0636\u062C",u.\uFC23="\u0636\u062D",u.\uFC24="\u0636\u062E",u.\uFC25="\u0636\u0645",u.\uFC26="\u0637\u062D",u.\uFC27="\u0637\u0645",u.\uFC28="\u0638\u0645",u.\uFC29="\u0639\u062C",u.\uFC2A="\u0639\u0645",u.\uFC2B="\u063A\u062C",u.\uFC2C="\u063A\u0645",u.\uFC2D="\u0641\u062C",u.\uFC2E="\u0641\u062D",u.\uFC2F="\u0641\u062E",u.\uFC30="\u0641\u0645",u.\uFC31="\u0641\u0649",u.\uFC32="\u0641\u064A",u.\uFC33="\u0642\u062D",u.\uFC34="\u0642\u0645",u.\uFC35="\u0642\u0649",u.\uFC36="\u0642\u064A",u.\uFC37="\u0643\u0627",u.\uFC38="\u0643\u062C",u.\uFC39="\u0643\u062D",u.\uFC3A="\u0643\u062E",u.\uFC3B="\u0643\u0644",u.\uFC3C="\u0643\u0645",u.\uFC3D="\u0643\u0649",u.\uFC3E="\u0643\u064A",u.\uFC3F="\u0644\u062C",u.\uFC40="\u0644\u062D",u.\uFC41="\u0644\u062E",u.\uFC42="\u0644\u0645",u.\uFC43="\u0644\u0649",u.\uFC44="\u0644\u064A",u.\uFC45="\u0645\u062C",u.\uFC46="\u0645\u062D",u.\uFC47="\u0645\u062E",u.\uFC48="\u0645\u0645",u.\uFC49="\u0645\u0649",u.\uFC4A="\u0645\u064A",u.\uFC4B="\u0646\u062C",u.\uFC4C="\u0646\u062D",u.\uFC4D="\u0646\u062E",u.\uFC4E="\u0646\u0645",u.\uFC4F="\u0646\u0649",u.\uFC50="\u0646\u064A",u.\uFC51="\u0647\u062C",u.\uFC52="\u0647\u0645",u.\uFC53="\u0647\u0649",u.\uFC54="\u0647\u064A",u.\uFC55="\u064A\u062C",u.\uFC56="\u064A\u062D",u.\uFC57="\u064A\u062E",u.\uFC58="\u064A\u0645",u.\uFC59="\u064A\u0649",u.\uFC5A="\u064A\u064A",u.\uFC5B="\u0630\u0670",u.\uFC5C="\u0631\u0670",u.\uFC5D="\u0649\u0670",u.\uFC5E=" \u064C\u0651",u.\uFC5F=" \u064D\u0651",u.\uFC60=" \u064E\u0651",u.\uFC61=" \u064F\u0651",u.\uFC62=" \u0650\u0651",u.\uFC63=" \u0651\u0670",u.\uFC64="\u0626\u0631",u.\uFC65="\u0626\u0632",u.\uFC66="\u0626\u0645",u.\uFC67="\u0626\u0646",u.\uFC68="\u0626\u0649",u.\uFC69="\u0626\u064A",u.\uFC6A="\u0628\u0631",u.\uFC6B="\u0628\u0632",u.\uFC6C="\u0628\u0645",u.\uFC6D="\u0628\u0646",u.\uFC6E="\u0628\u0649",u.\uFC6F="\u0628\u064A",u.\uFC70="\u062A\u0631",u.\uFC71="\u062A\u0632",u.\uFC72="\u062A\u0645",u.\uFC73="\u062A\u0646",u.\uFC74="\u062A\u0649",u.\uFC75="\u062A\u064A",u.\uFC76="\u062B\u0631",u.\uFC77="\u062B\u0632",u.\uFC78="\u062B\u0645",u.\uFC79="\u062B\u0646",u.\uFC7A="\u062B\u0649",u.\uFC7B="\u062B\u064A",u.\uFC7C="\u0641\u0649",u.\uFC7D="\u0641\u064A",u.\uFC7E="\u0642\u0649",u.\uFC7F="\u0642\u064A",u.\uFC80="\u0643\u0627",u.\uFC81="\u0643\u0644",u.\uFC82="\u0643\u0645",u.\uFC83="\u0643\u0649",u.\uFC84="\u0643\u064A",u.\uFC85="\u0644\u0645",u.\uFC86="\u0644\u0649",u.\uFC87="\u0644\u064A",u.\uFC88="\u0645\u0627",u.\uFC89="\u0645\u0645",u.\uFC8A="\u0646\u0631",u.\uFC8B="\u0646\u0632",u.\uFC8C="\u0646\u0645",u.\uFC8D="\u0646\u0646",u.\uFC8E="\u0646\u0649",u.\uFC8F="\u0646\u064A",u.\uFC90="\u0649\u0670",u.\uFC91="\u064A\u0631",u.\uFC92="\u064A\u0632",u.\uFC93="\u064A\u0645",u.\uFC94="\u064A\u0646",u.\uFC95="\u064A\u0649",u.\uFC96="\u064A\u064A",u.\uFC97="\u0626\u062C",u.\uFC98="\u0626\u062D",u.\uFC99="\u0626\u062E",u.\uFC9A="\u0626\u0645",u.\uFC9B="\u0626\u0647",u.\uFC9C="\u0628\u062C",u.\uFC9D="\u0628\u062D",u.\uFC9E="\u0628\u062E",u.\uFC9F="\u0628\u0645",u.\uFCA0="\u0628\u0647",u.\uFCA1="\u062A\u062C",u.\uFCA2="\u062A\u062D",u.\uFCA3="\u062A\u062E",u.\uFCA4="\u062A\u0645",u.\uFCA5="\u062A\u0647",u.\uFCA6="\u062B\u0645",u.\uFCA7="\u062C\u062D",u.\uFCA8="\u062C\u0645",u.\uFCA9="\u062D\u062C",u.\uFCAA="\u062D\u0645",u.\uFCAB="\u062E\u062C",u.\uFCAC="\u062E\u0645",u.\uFCAD="\u0633\u062C",u.\uFCAE="\u0633\u062D",u.\uFCAF="\u0633\u062E",u.\uFCB0="\u0633\u0645",u.\uFCB1="\u0635\u062D",u.\uFCB2="\u0635\u062E",u.\uFCB3="\u0635\u0645",u.\uFCB4="\u0636\u062C",u.\uFCB5="\u0636\u062D",u.\uFCB6="\u0636\u062E",u.\uFCB7="\u0636\u0645",u.\uFCB8="\u0637\u062D",u.\uFCB9="\u0638\u0645",u.\uFCBA="\u0639\u062C",u.\uFCBB="\u0639\u0645",u.\uFCBC="\u063A\u062C",u.\uFCBD="\u063A\u0645",u.\uFCBE="\u0641\u062C",u.\uFCBF="\u0641\u062D",u.\uFCC0="\u0641\u062E",u.\uFCC1="\u0641\u0645",u.\uFCC2="\u0642\u062D",u.\uFCC3="\u0642\u0645",u.\uFCC4="\u0643\u062C",u.\uFCC5="\u0643\u062D",u.\uFCC6="\u0643\u062E",u.\uFCC7="\u0643\u0644",u.\uFCC8="\u0643\u0645",u.\uFCC9="\u0644\u062C",u.\uFCCA="\u0644\u062D",u.\uFCCB="\u0644\u062E",u.\uFCCC="\u0644\u0645",u.\uFCCD="\u0644\u0647",u.\uFCCE="\u0645\u062C",u.\uFCCF="\u0645\u062D",u.\uFCD0="\u0645\u062E",u.\uFCD1="\u0645\u0645",u.\uFCD2="\u0646\u062C",u.\uFCD3="\u0646\u062D",u.\uFCD4="\u0646\u062E",u.\uFCD5="\u0646\u0645",u.\uFCD6="\u0646\u0647",u.\uFCD7="\u0647\u062C",u.\uFCD8="\u0647\u0645",u.\uFCD9="\u0647\u0670",u.\uFCDA="\u064A\u062C",u.\uFCDB="\u064A\u062D",u.\uFCDC="\u064A\u062E",u.\uFCDD="\u064A\u0645",u.\uFCDE="\u064A\u0647",u.\uFCDF="\u0626\u0645",u.\uFCE0="\u0626\u0647",u.\uFCE1="\u0628\u0645",u.\uFCE2="\u0628\u0647",u.\uFCE3="\u062A\u0645",u.\uFCE4="\u062A\u0647",u.\uFCE5="\u062B\u0645",u.\uFCE6="\u062B\u0647",u.\uFCE7="\u0633\u0645",u.\uFCE8="\u0633\u0647",u.\uFCE9="\u0634\u0645",u.\uFCEA="\u0634\u0647",u.\uFCEB="\u0643\u0644",u.\uFCEC="\u0643\u0645",u.\uFCED="\u0644\u0645",u.\uFCEE="\u0646\u0645",u.\uFCEF="\u0646\u0647",u.\uFCF0="\u064A\u0645",u.\uFCF1="\u064A\u0647",u.\uFCF2="\u0640\u064E\u0651",u.\uFCF3="\u0640\u064F\u0651",u.\uFCF4="\u0640\u0650\u0651",u.\uFCF5="\u0637\u0649",u.\uFCF6="\u0637\u064A",u.\uFCF7="\u0639\u0649",u.\uFCF8="\u0639\u064A",u.\uFCF9="\u063A\u0649",u.\uFCFA="\u063A\u064A",u.\uFCFB="\u0633\u0649",u.\uFCFC="\u0633\u064A",u.\uFCFD="\u0634\u0649",u.\uFCFE="\u0634\u064A",u.\uFCFF="\u062D\u0649",u.\uFD00="\u062D\u064A",u.\uFD01="\u062C\u0649",u.\uFD02="\u062C\u064A",u.\uFD03="\u062E\u0649",u.\uFD04="\u062E\u064A",u.\uFD05="\u0635\u0649",u.\uFD06="\u0635\u064A",u.\uFD07="\u0636\u0649",u.\uFD08="\u0636\u064A",u.\uFD09="\u0634\u062C",u.\uFD0A="\u0634\u062D",u.\uFD0B="\u0634\u062E",u.\uFD0C="\u0634\u0645",u.\uFD0D="\u0634\u0631",u.\uFD0E="\u0633\u0631",u.\uFD0F="\u0635\u0631",u.\uFD10="\u0636\u0631",u.\uFD11="\u0637\u0649",u.\uFD12="\u0637\u064A",u.\uFD13="\u0639\u0649",u.\uFD14="\u0639\u064A",u.\uFD15="\u063A\u0649",u.\uFD16="\u063A\u064A",u.\uFD17="\u0633\u0649",u.\uFD18="\u0633\u064A",u.\uFD19="\u0634\u0649",u.\uFD1A="\u0634\u064A",u.\uFD1B="\u062D\u0649",u.\uFD1C="\u062D\u064A",u.\uFD1D="\u062C\u0649",u.\uFD1E="\u062C\u064A",u.\uFD1F="\u062E\u0649",u.\uFD20="\u062E\u064A",u.\uFD21="\u0635\u0649",u.\uFD22="\u0635\u064A",u.\uFD23="\u0636\u0649",u.\uFD24="\u0636\u064A",u.\uFD25="\u0634\u062C",u.\uFD26="\u0634\u062D",u.\uFD27="\u0634\u062E",u.\uFD28="\u0634\u0645",u.\uFD29="\u0634\u0631",u.\uFD2A="\u0633\u0631",u.\uFD2B="\u0635\u0631",u.\uFD2C="\u0636\u0631",u.\uFD2D="\u0634\u062C",u.\uFD2E="\u0634\u062D",u.\uFD2F="\u0634\u062E",u.\uFD30="\u0634\u0645",u.\uFD31="\u0633\u0647",u.\uFD32="\u0634\u0647",u.\uFD33="\u0637\u0645",u.\uFD34="\u0633\u062C",u.\uFD35="\u0633\u062D",u.\uFD36="\u0633\u062E",u.\uFD37="\u0634\u062C",u.\uFD38="\u0634\u062D",u.\uFD39="\u0634\u062E",u.\uFD3A="\u0637\u0645",u.\uFD3B="\u0638\u0645",u.\uFD3C="\u0627\u064B",u.\uFD3D="\u0627\u064B",u.\uFD50="\u062A\u062C\u0645",u.\uFD51="\u062A\u062D\u062C",u.\uFD52="\u062A\u062D\u062C",u.\uFD53="\u062A\u062D\u0645",u.\uFD54="\u062A\u062E\u0645",u.\uFD55="\u062A\u0645\u062C",u.\uFD56="\u062A\u0645\u062D",u.\uFD57="\u062A\u0645\u062E",u.\uFD58="\u062C\u0645\u062D",u.\uFD59="\u062C\u0645\u062D",u.\uFD5A="\u062D\u0645\u064A",u.\uFD5B="\u062D\u0645\u0649",u.\uFD5C="\u0633\u062D\u062C",u.\uFD5D="\u0633\u062C\u062D",u.\uFD5E="\u0633\u062C\u0649",u.\uFD5F="\u0633\u0645\u062D",u.\uFD60="\u0633\u0645\u062D",u.\uFD61="\u0633\u0645\u062C",u.\uFD62="\u0633\u0645\u0645",u.\uFD63="\u0633\u0645\u0645",u.\uFD64="\u0635\u062D\u062D",u.\uFD65="\u0635\u062D\u062D",u.\uFD66="\u0635\u0645\u0645",u.\uFD67="\u0634\u062D\u0645",u.\uFD68="\u0634\u062D\u0645",u.\uFD69="\u0634\u062C\u064A",u.\uFD6A="\u0634\u0645\u062E",u.\uFD6B="\u0634\u0645\u062E",u.\uFD6C="\u0634\u0645\u0645",u.\uFD6D="\u0634\u0645\u0645",u.\uFD6E="\u0636\u062D\u0649",u.\uFD6F="\u0636\u062E\u0645",u.\uFD70="\u0636\u062E\u0645",u.\uFD71="\u0637\u0645\u062D",u.\uFD72="\u0637\u0645\u062D",u.\uFD73="\u0637\u0645\u0645",u.\uFD74="\u0637\u0645\u064A",u.\uFD75="\u0639\u062C\u0645",u.\uFD76="\u0639\u0645\u0645",u.\uFD77="\u0639\u0645\u0645",u.\uFD78="\u0639\u0645\u0649",u.\uFD79="\u063A\u0645\u0645",u.\uFD7A="\u063A\u0645\u064A",u.\uFD7B="\u063A\u0645\u0649",u.\uFD7C="\u0641\u062E\u0645",u.\uFD7D="\u0641\u062E\u0645",u.\uFD7E="\u0642\u0645\u062D",u.\uFD7F="\u0642\u0645\u0645",u.\uFD80="\u0644\u062D\u0645",u.\uFD81="\u0644\u062D\u064A",u.\uFD82="\u0644\u062D\u0649",u.\uFD83="\u0644\u062C\u062C",u.\uFD84="\u0644\u062C\u062C",u.\uFD85="\u0644\u062E\u0645",u.\uFD86="\u0644\u062E\u0645",u.\uFD87="\u0644\u0645\u062D",u.\uFD88="\u0644\u0645\u062D",u.\uFD89="\u0645\u062D\u062C",u.\uFD8A="\u0645\u062D\u0645",u.\uFD8B="\u0645\u062D\u064A",u.\uFD8C="\u0645\u062C\u062D",u.\uFD8D="\u0645\u062C\u0645",u.\uFD8E="\u0645\u062E\u062C",u.\uFD8F="\u0645\u062E\u0645",u.\uFD92="\u0645\u062C\u062E",u.\uFD93="\u0647\u0645\u062C",u.\uFD94="\u0647\u0645\u0645",u.\uFD95="\u0646\u062D\u0645",u.\uFD96="\u0646\u062D\u0649",u.\uFD97="\u0646\u062C\u0645",u.\uFD98="\u0646\u062C\u0645",u.\uFD99="\u0646\u062C\u0649",u.\uFD9A="\u0646\u0645\u064A",u.\uFD9B="\u0646\u0645\u0649",u.\uFD9C="\u064A\u0645\u0645",u.\uFD9D="\u064A\u0645\u0645",u.\uFD9E="\u0628\u062E\u064A",u.\uFD9F="\u062A\u062C\u064A",u.\uFDA0="\u062A\u062C\u0649",u.\uFDA1="\u062A\u062E\u064A",u.\uFDA2="\u062A\u062E\u0649",u.\uFDA3="\u062A\u0645\u064A",u.\uFDA4="\u062A\u0645\u0649",u.\uFDA5="\u062C\u0645\u064A",u.\uFDA6="\u062C\u062D\u0649",u.\uFDA7="\u062C\u0645\u0649",u.\uFDA8="\u0633\u062E\u0649",u.\uFDA9="\u0635\u062D\u064A",u.\uFDAA="\u0634\u062D\u064A",u.\uFDAB="\u0636\u062D\u064A",u.\uFDAC="\u0644\u062C\u064A",u.\uFDAD="\u0644\u0645\u064A",u.\uFDAE="\u064A\u062D\u064A",u.\uFDAF="\u064A\u062C\u064A",u.\uFDB0="\u064A\u0645\u064A",u.\uFDB1="\u0645\u0645\u064A",u.\uFDB2="\u0642\u0645\u064A",u.\uFDB3="\u0646\u062D\u064A",u.\uFDB4="\u0642\u0645\u062D",u.\uFDB5="\u0644\u062D\u0645",u.\uFDB6="\u0639\u0645\u064A",u.\uFDB7="\u0643\u0645\u064A",u.\uFDB8="\u0646\u062C\u062D",u.\uFDB9="\u0645\u062E\u064A",u.\uFDBA="\u0644\u062C\u0645",u.\uFDBB="\u0643\u0645\u0645",u.\uFDBC="\u0644\u062C\u0645",u.\uFDBD="\u0646\u062C\u062D",u.\uFDBE="\u062C\u062D\u064A",u.\uFDBF="\u062D\u062C\u064A",u.\uFDC0="\u0645\u062C\u064A",u.\uFDC1="\u0641\u0645\u064A",u.\uFDC2="\u0628\u062D\u064A",u.\uFDC3="\u0643\u0645\u0645",u.\uFDC4="\u0639\u062C\u0645",u.\uFDC5="\u0635\u0645\u0645",u.\uFDC6="\u0633\u062E\u064A",u.\uFDC7="\u0646\u062C\u064A",u["\uFE49"]="\u203E",u["\uFE4A"]="\u203E",u["\uFE4B"]="\u203E",u["\uFE4C"]="\u203E",u["\uFE4D"]="_",u["\uFE4E"]="_",u["\uFE4F"]="_",u.\uFE80="\u0621",u.\uFE81="\u0622",u.\uFE82="\u0622",u.\uFE83="\u0623",u.\uFE84="\u0623",u.\uFE85="\u0624",u.\uFE86="\u0624",u.\uFE87="\u0625",u.\uFE88="\u0625",u.\uFE89="\u0626",u.\uFE8A="\u0626",u.\uFE8B="\u0626",u.\uFE8C="\u0626",u.\uFE8D="\u0627",u.\uFE8E="\u0627",u.\uFE8F="\u0628",u.\uFE90="\u0628",u.\uFE91="\u0628",u.\uFE92="\u0628",u.\uFE93="\u0629",u.\uFE94="\u0629",u.\uFE95="\u062A",u.\uFE96="\u062A",u.\uFE97="\u062A",u.\uFE98="\u062A",u.\uFE99="\u062B",u.\uFE9A="\u062B",u.\uFE9B="\u062B",u.\uFE9C="\u062B",u.\uFE9D="\u062C",u.\uFE9E="\u062C",u.\uFE9F="\u062C",u.\uFEA0="\u062C",u.\uFEA1="\u062D",u.\uFEA2="\u062D",u.\uFEA3="\u062D",u.\uFEA4="\u062D",u.\uFEA5="\u062E",u.\uFEA6="\u062E",u.\uFEA7="\u062E",u.\uFEA8="\u062E",u.\uFEA9="\u062F",u.\uFEAA="\u062F",u.\uFEAB="\u0630",u.\uFEAC="\u0630",u.\uFEAD="\u0631",u.\uFEAE="\u0631",u.\uFEAF="\u0632",u.\uFEB0="\u0632",u.\uFEB1="\u0633",u.\uFEB2="\u0633",u.\uFEB3="\u0633",u.\uFEB4="\u0633",u.\uFEB5="\u0634",u.\uFEB6="\u0634",u.\uFEB7="\u0634",u.\uFEB8="\u0634",u.\uFEB9="\u0635",u.\uFEBA="\u0635",u.\uFEBB="\u0635",u.\uFEBC="\u0635",u.\uFEBD="\u0636",u.\uFEBE="\u0636",u.\uFEBF="\u0636",u.\uFEC0="\u0636",u.\uFEC1="\u0637",u.\uFEC2="\u0637",u.\uFEC3="\u0637",u.\uFEC4="\u0637",u.\uFEC5="\u0638",u.\uFEC6="\u0638",u.\uFEC7="\u0638",u.\uFEC8="\u0638",u.\uFEC9="\u0639",u.\uFECA="\u0639",u.\uFECB="\u0639",u.\uFECC="\u0639",u.\uFECD="\u063A",u.\uFECE="\u063A",u.\uFECF="\u063A",u.\uFED0="\u063A",u.\uFED1="\u0641",u.\uFED2="\u0641",u.\uFED3="\u0641",u.\uFED4="\u0641",u.\uFED5="\u0642",u.\uFED6="\u0642",u.\uFED7="\u0642",u.\uFED8="\u0642",u.\uFED9="\u0643",u.\uFEDA="\u0643",u.\uFEDB="\u0643",u.\uFEDC="\u0643",u.\uFEDD="\u0644",u.\uFEDE="\u0644",u.\uFEDF="\u0644",u.\uFEE0="\u0644",u.\uFEE1="\u0645",u.\uFEE2="\u0645",u.\uFEE3="\u0645",u.\uFEE4="\u0645",u.\uFEE5="\u0646",u.\uFEE6="\u0646",u.\uFEE7="\u0646",u.\uFEE8="\u0646",u.\uFEE9="\u0647",u.\uFEEA="\u0647",u.\uFEEB="\u0647",u.\uFEEC="\u0647",u.\uFEED="\u0648",u.\uFEEE="\u0648",u.\uFEEF="\u0649",u.\uFEF0="\u0649",u.\uFEF1="\u064A",u.\uFEF2="\u064A",u.\uFEF3="\u064A",u.\uFEF4="\u064A",u.\uFEF5="\u0644\u0622",u.\uFEF6="\u0644\u0622",u.\uFEF7="\u0644\u0623",u.\uFEF8="\u0644\u0623",u.\uFEF9="\u0644\u0625",u.\uFEFA="\u0644\u0625",u.\uFEFB="\u0644\u0627",u.\uFEFC="\u0644\u0627"});function y(u){var S=u.length;if(S<=1||!d(u.charCodeAt(0)))return u;for(var V="",U=S-1;U>=0;U--)V+=u[U];return V}e.mapSpecialUnicodeValues=s,e.reverseIfRtl=y,e.getUnicodeRangeFor=l,e.getNormalizedUnicodes=c,e.getUnicodeForGlyph=t},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptCompiler=e.PostScriptEvaluator=e.PDFFunctionFactory=e.isPDFFunction=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},i=function(){function D(k,T){for(var R=0;R<T.length;R++){var g=T[R];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(k,g.key,g)}}return function(k,T,R){return T&&D(k.prototype,T),R&&D(k,R),k}}(),s=r(0),t=r(2),o=r(142);function l(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")}var d={get value(){return(0,s.shadow)(this,"value",(0,s.isEvalSupported)())}},c=function(){function D(k){var T=k.xref,R=k.isEvalSupported,g=R===void 0?!0:R;l(this,D),this.xref=T,this.isEvalSupported=g!==!1}return i(D,[{key:"create",value:function(T){return u.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:T})}},{key:"createFromArray",value:function(T){return u.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:T})}}]),D}();function y(D){if(!Array.isArray(D))return null;for(var k=D.length,T=0;T<k;T++)if(typeof D[T]!="number"){for(var R=new Array(k),g=0;g<k;g++)R[g]=+D[g];return R}return D}var u=function(){var k=0,T=2,R=3,g=4;return{getSampleArray:function(v,b,f,p){var h,_,I=1;for(h=0,_=v.length;h<_;h++)I*=v[h];I*=b;var W=new Array(I),q=0,B=0,N=1/(Math.pow(2,f)-1),L=p.getBytes((I*f+7)/8),P=0;for(h=0;h<I;h++){for(;q<f;)B<<=8,B|=L[P++],q+=8;q-=f,W[h]=(B>>q)*N,B&=(1<<q)-1}return W},getIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fn,h=p.dict;h||(h=p);var _=[this.constructSampled,null,this.constructInterpolated,this.constructStiched,this.constructPostScript],I=h.get("FunctionType"),W=_[I];if(!W)throw new s.FormatError("Unknown type of function");return W.call(this,{xref:b,isEvalSupported:f,fn:p,dict:h})},fromIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.IR,h=p[0];switch(h){case k:return this.constructSampledFromIR({xref:b,isEvalSupported:f,IR:p});case T:return this.constructInterpolatedFromIR({xref:b,isEvalSupported:f,IR:p});case R:return this.constructStichedFromIR({xref:b,isEvalSupported:f,IR:p});default:return this.constructPostScriptFromIR({xref:b,isEvalSupported:f,IR:p})}},parse:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fn,h=this.getIR({xref:b,isEvalSupported:f,fn:p});return this.fromIR({xref:b,isEvalSupported:f,IR:h})},parseArray:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fnObj;if(!Array.isArray(p))return this.parse({xref:b,isEvalSupported:f,fn:p});for(var h=[],_=0,I=p.length;_<I;_++)h.push(this.parse({xref:b,isEvalSupported:f,fn:b.fetchIfRef(p[_])}));return function(W,q,B,N){for(var L=0,P=h.length;L<P;L++)h[L](W,q,B,N+L)}},constructSampled:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fn,h=v.dict;function _(M){for(var j=M.length,C=[],x=0,F=0;F<j;F+=2)C[x]=[M[F],M[F+1]],++x;return C}var I=y(h.getArray("Domain")),W=y(h.getArray("Range"));if(!I||!W)throw new s.FormatError("No domain or range");var q=I.length/2,B=W.length/2;I=_(I),W=_(W);var N=y(h.get("Size")),L=h.get("BitsPerSample"),P=h.get("Order")||1;P!==1&&(0,s.info)("No support for cubic spline interpolation: "+P);var O=y(h.getArray("Encode"));if(O)O=_(O);else{O=[];for(var E=0;E<q;++E)O.push([0,N[E]-1])}var w=y(h.getArray("Decode"));w?w=_(w):w=W;var A=this.getSampleArray(N,B,L,p);return[k,q,I,O,w,A,N,B,Math.pow(2,L)-1,W]},constructSampledFromIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.IR;function h(_,I,W,q,B){return q+(_-I)*((B-q)/(W-I))}return function(I,W,q,B){var N=p[1],L=p[2],P=p[3],O=p[4],E=p[5],w=p[6],A=p[7],M=p[9],j=1<<N,C=new Float64Array(j),x=new Uint32Array(j),F,$;for($=0;$<j;$++)C[$]=1;var G=A,Z=1;for(F=0;F<N;++F){var J=L[F][0],Y=L[F][1],ee=Math.min(Math.max(I[W+F],J),Y),ae=h(ee,J,Y,P[F][0],P[F][1]),pe=w[F];ae=Math.min(Math.max(ae,0),pe-1);var se=ae<pe-1?Math.floor(ae):ae-1,ue=se+1-ae,le=ae-se,ie=se*G,de=ie+G;for($=0;$<j;$++)$&Z?(C[$]*=le,x[$]+=de):(C[$]*=ue,x[$]+=ie);G*=pe,Z<<=1}for($=0;$<A;++$){var fe=0;for(F=0;F<j;F++)fe+=E[x[F]+$]*C[F];fe=h(fe,0,1,O[$][0],O[$][1]),q[B+$]=Math.min(Math.max(fe,M[$][0]),M[$][1])}}},constructInterpolated:function(v){for(var b=v.xref,f=v.isEvalSupported,p=v.fn,h=v.dict,_=y(h.getArray("C0"))||[0],I=y(h.getArray("C1"))||[1],W=h.get("N"),q=_.length,B=[],N=0;N<q;++N)B.push(I[N]-_[N]);return[T,_,B,W]},constructInterpolatedFromIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.IR,h=p[1],_=p[2],I=p[3],W=_.length;return function(B,N,L,P){for(var O=I===1?B[N]:Math.pow(B[N],I),E=0;E<W;++E)L[P+E]=h[E]+O*_[E]}},constructStiched:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fn,h=v.dict,_=y(h.getArray("Domain"));if(!_)throw new s.FormatError("No domain");var I=_.length/2;if(I!==1)throw new s.FormatError("Bad domain for stiched function");for(var W=h.get("Functions"),q=[],B=0,N=W.length;B<N;++B)q.push(this.parse({xref:b,isEvalSupported:f,fn:b.fetchIfRef(W[B])}));var L=y(h.getArray("Bounds")),P=y(h.getArray("Encode"));return[R,_,L,P,q]},constructStichedFromIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.IR,h=p[1],_=p[2],I=p[3],W=p[4],q=new Float32Array(1);return function(N,L,P,O){for(var E=function(G,Z,J){return G>J?G=J:G<Z&&(G=Z),G},w=E(N[L],h[0],h[1]),A=0,M=_.length;A<M&&!(w<_[A]);++A);var j=h[0];A>0&&(j=_[A-1]);var C=h[1];A<_.length&&(C=_[A]);var x=I[2*A],F=I[2*A+1];q[0]=j===C?x:x+(w-j)*(F-x)/(C-j),W[A](q,0,P,O)}},constructPostScript:function(v){var b=v.xref,f=v.isEvalSupported,p=v.fn,h=v.dict,_=y(h.getArray("Domain")),I=y(h.getArray("Range"));if(!_)throw new s.FormatError("No domain.");if(!I)throw new s.FormatError("No range.");var W=new o.PostScriptLexer(p),q=new o.PostScriptParser(W),B=q.parse();return[g,_,I,B]},constructPostScriptFromIR:function(v){var b=v.xref,f=v.isEvalSupported,p=v.IR,h=p[1],_=p[2],I=p[3];if(f&&d.value){var W=new z().compile(I,h,_);if(W)return new Function("src","srcOffset","dest","destOffset",W)}(0,s.info)("Unable to compile PS function");var q=_.length>>1,B=h.length>>1,N=new U(I),L=Object.create(null),P=2048*4,O=P,E=new Float32Array(B);return function(A,M,j,C){var x,F,$="",G=E;for(x=0;x<B;x++)F=A[M+x],G[x]=F,$+=F+"_";var Z=L[$];if(Z!==void 0){j.set(Z,C);return}var J=new Float32Array(q),Y=N.execute(G),ee=Y.length-q;for(x=0;x<q;x++){F=Y[ee+x];var ae=_[x*2];F<ae?F=ae:(ae=_[x*2+1],F>ae&&(F=ae)),J[x]=F}O>0&&(O--,L[$]=J),j.set(J,C)}}}}();function S(D){var k;if((typeof D>"u"?"undefined":a(D))!=="object")return!1;if((0,t.isDict)(D))k=D;else if((0,t.isStream)(D))k=D.dict;else return!1;return k.has("FunctionType")}var V=function(){var k=100;function T(R){this.stack=R?Array.prototype.slice.call(R,0):[]}return T.prototype={push:function(g){if(this.stack.length>=k)throw new Error("PostScript function stack overflow.");this.stack.push(g)},pop:function(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()},copy:function(g){if(this.stack.length+g>=k)throw new Error("PostScript function stack overflow.");for(var m=this.stack,v=m.length-g,b=g-1;b>=0;b--,v++)m.push(m[v])},index:function(g){this.push(this.stack[this.stack.length-g-1])},roll:function(g,m){var v=this.stack,b=v.length-g,f=v.length-1,p=b+(m-Math.floor(m/g)*g),h,_,I;for(h=b,_=f;h<_;h++,_--)I=v[h],v[h]=v[_],v[_]=I;for(h=b,_=p-1;h<_;h++,_--)I=v[h],v[h]=v[_],v[_]=I;for(h=p,_=f;h<_;h++,_--)I=v[h],v[h]=v[_],v[_]=I}},T}(),U=function(){function k(T){this.operators=T}return k.prototype={execute:function(R){for(var g=new V(R),m=0,v=this.operators,b=v.length,f,p,h;m<b;){if(f=v[m++],typeof f=="number"){g.push(f);continue}switch(f){case"jz":h=g.pop(),p=g.pop(),p||(m=h);break;case"j":p=g.pop(),m=p;break;case"abs":p=g.pop(),g.push(Math.abs(p));break;case"add":h=g.pop(),p=g.pop(),g.push(p+h);break;case"and":h=g.pop(),p=g.pop(),(0,s.isBool)(p)&&(0,s.isBool)(h)?g.push(p&&h):g.push(p&h);break;case"atan":p=g.pop(),g.push(Math.atan(p));break;case"bitshift":h=g.pop(),p=g.pop(),p>0?g.push(p<<h):g.push(p>>h);break;case"ceiling":p=g.pop(),g.push(Math.ceil(p));break;case"copy":p=g.pop(),g.copy(p);break;case"cos":p=g.pop(),g.push(Math.cos(p));break;case"cvi":p=g.pop()|0,g.push(p);break;case"cvr":break;case"div":h=g.pop(),p=g.pop(),g.push(p/h);break;case"dup":g.copy(1);break;case"eq":h=g.pop(),p=g.pop(),g.push(p===h);break;case"exch":g.roll(2,1);break;case"exp":h=g.pop(),p=g.pop(),g.push(Math.pow(p,h));break;case"false":g.push(!1);break;case"floor":p=g.pop(),g.push(Math.floor(p));break;case"ge":h=g.pop(),p=g.pop(),g.push(p>=h);break;case"gt":h=g.pop(),p=g.pop(),g.push(p>h);break;case"idiv":h=g.pop(),p=g.pop(),g.push(p/h|0);break;case"index":p=g.pop(),g.index(p);break;case"le":h=g.pop(),p=g.pop(),g.push(p<=h);break;case"ln":p=g.pop(),g.push(Math.log(p));break;case"log":p=g.pop(),g.push(Math.log(p)/Math.LN10);break;case"lt":h=g.pop(),p=g.pop(),g.push(p<h);break;case"mod":h=g.pop(),p=g.pop(),g.push(p%h);break;case"mul":h=g.pop(),p=g.pop(),g.push(p*h);break;case"ne":h=g.pop(),p=g.pop(),g.push(p!==h);break;case"neg":p=g.pop(),g.push(-p);break;case"not":p=g.pop(),(0,s.isBool)(p)?g.push(!p):g.push(~p);break;case"or":h=g.pop(),p=g.pop(),(0,s.isBool)(p)&&(0,s.isBool)(h)?g.push(p||h):g.push(p|h);break;case"pop":g.pop();break;case"roll":h=g.pop(),p=g.pop(),g.roll(p,h);break;case"round":p=g.pop(),g.push(Math.round(p));break;case"sin":p=g.pop(),g.push(Math.sin(p));break;case"sqrt":p=g.pop(),g.push(Math.sqrt(p));break;case"sub":h=g.pop(),p=g.pop(),g.push(p-h);break;case"true":g.push(!0);break;case"truncate":p=g.pop(),p=p<0?Math.ceil(p):Math.floor(p),g.push(p);break;case"xor":h=g.pop(),p=g.pop(),(0,s.isBool)(p)&&(0,s.isBool)(h)?g.push(p!==h):g.push(p^h);break;default:throw new s.FormatError("Unknown operator "+f)}}return g.stack}},k}(),z=function(){function k(q){this.type=q}k.prototype.visit=function(q){throw new Error("abstract method")};function T(q,B,N){k.call(this,"args"),this.index=q,this.min=B,this.max=N}T.prototype=Object.create(k.prototype),T.prototype.visit=function(q){q.visitArgument(this)};function R(q){k.call(this,"literal"),this.number=q,this.min=q,this.max=q}R.prototype=Object.create(k.prototype),R.prototype.visit=function(q){q.visitLiteral(this)};function g(q,B,N,L,P){k.call(this,"binary"),this.op=q,this.arg1=B,this.arg2=N,this.min=L,this.max=P}g.prototype=Object.create(k.prototype),g.prototype.visit=function(q){q.visitBinaryOperation(this)};function m(q,B){k.call(this,"max"),this.arg=q,this.min=q.min,this.max=B}m.prototype=Object.create(k.prototype),m.prototype.visit=function(q){q.visitMin(this)};function v(q,B,N){k.call(this,"var"),this.index=q,this.min=B,this.max=N}v.prototype=Object.create(k.prototype),v.prototype.visit=function(q){q.visitVariable(this)};function b(q,B){k.call(this,"definition"),this.variable=q,this.arg=B}b.prototype=Object.create(k.prototype),b.prototype.visit=function(q){q.visitVariableDefinition(this)};function f(){this.parts=[]}f.prototype={visitArgument:function(B){this.parts.push("Math.max(",B.min,", Math.min(",B.max,", src[srcOffset + ",B.index,"]))")},visitVariable:function(B){this.parts.push("v",B.index)},visitLiteral:function(B){this.parts.push(B.number)},visitBinaryOperation:function(B){this.parts.push("("),B.arg1.visit(this),this.parts.push(" ",B.op," "),B.arg2.visit(this),this.parts.push(")")},visitVariableDefinition:function(B){this.parts.push("var "),B.variable.visit(this),this.parts.push(" = "),B.arg.visit(this),this.parts.push(";")},visitMin:function(B){this.parts.push("Math.min("),B.arg.visit(this),this.parts.push(", ",B.max,")")},toString:function(){return this.parts.join("")}};function p(q,B){return B.type==="literal"&&B.number===0?q:q.type==="literal"&&q.number===0?B:B.type==="literal"&&q.type==="literal"?new R(q.number+B.number):new g("+",q,B,q.min+B.min,q.max+B.max)}function h(q,B){if(B.type==="literal"){if(B.number===0)return new R(0);if(B.number===1)return q;if(q.type==="literal")return new R(q.number*B.number)}if(q.type==="literal"){if(q.number===0)return new R(0);if(q.number===1)return B}var N=Math.min(q.min*B.min,q.min*B.max,q.max*B.min,q.max*B.max),L=Math.max(q.min*B.min,q.min*B.max,q.max*B.min,q.max*B.max);return new g("*",q,B,N,L)}function _(q,B){if(B.type==="literal"){if(B.number===0)return q;if(q.type==="literal")return new R(q.number-B.number)}return B.type==="binary"&&B.op==="-"&&q.type==="literal"&&q.number===1&&B.arg1.type==="literal"&&B.arg1.number===1?B.arg2:new g("-",q,B,q.min-B.max,q.max-B.min)}function I(q,B){return q.min>=B?new R(B):q.max<=B?q:new m(q,B)}function W(){}return W.prototype={compile:function(B,N,L){var P=[],O,E,w=[],A=N.length>>1,M=L.length>>1,j=0,C,x,F,$,G,Z,J,Y;for(O=0;O<A;O++)P.push(new T(O,N[O*2],N[O*2+1]));for(O=0,E=B.length;O<E;O++){if(Y=B[O],typeof Y=="number"){P.push(new R(Y));continue}switch(Y){case"add":if(P.length<2)return null;$=P.pop(),F=P.pop(),P.push(p(F,$));break;case"cvr":if(P.length<1)return null;break;case"mul":if(P.length<2)return null;$=P.pop(),F=P.pop(),P.push(h(F,$));break;case"sub":if(P.length<2)return null;$=P.pop(),F=P.pop(),P.push(_(F,$));break;case"exch":if(P.length<2)return null;G=P.pop(),Z=P.pop(),P.push(G,Z);break;case"pop":if(P.length<1)return null;P.pop();break;case"index":if(P.length<1||(F=P.pop(),F.type!=="literal")||(C=F.number,C<0||!Number.isInteger(C)||P.length<C))return null;if(G=P[P.length-C-1],G.type==="literal"||G.type==="var"){P.push(G);break}J=new v(j++,G.min,G.max),P[P.length-C-1]=J,P.push(J),w.push(new b(J,G));break;case"dup":if(P.length<1)return null;if(typeof B[O+1]=="number"&&B[O+2]==="gt"&&B[O+3]===O+7&&B[O+4]==="jz"&&B[O+5]==="pop"&&B[O+6]===B[O+1]){F=P.pop(),P.push(I(F,B[O+1])),O+=6;break}if(G=P[P.length-1],G.type==="literal"||G.type==="var"){P.push(G);break}J=new v(j++,G.min,G.max),P[P.length-1]=J,P.push(J),w.push(new b(J,G));break;case"roll":if(P.length<2||($=P.pop(),F=P.pop(),$.type!=="literal"||F.type!=="literal")||(x=$.number,C=F.number,C<=0||!Number.isInteger(C)||!Number.isInteger(x)||P.length<C))return null;if(x=(x%C+C)%C,x===0)break;Array.prototype.push.apply(P,P.splice(P.length-C,C-x));break;default:return null}}if(P.length!==M)return null;var ee=[];return w.forEach(function(ae){var pe=new f;ae.visit(pe),ee.push(pe.toString())}),P.forEach(function(ae,pe){var se=new f;ae.visit(se);var ue=L[pe*2],le=L[pe*2+1],ie=[se.toString()];ue>ae.min&&(ie.unshift("Math.max(",ue,", "),ie.push(")")),le<ae.max&&(ie.unshift("Math.min(",le,", "),ie.push(")")),ie.unshift("dest[destOffset + ",pe,"] = "),ie.push(";"),ee.push(ie.join(""))}),ee.join(`
`)}},W}();e.isPDFFunction=S,e.PDFFunctionFactory=c,e.PostScriptEvaluator=U,e.PostScriptCompiler=z},function(n,e,r){"use strict";var a="1.10.100",i="ea29ec83",s=r(83);e.WorkerMessageHandler=s.WorkerMessageHandler},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageHandler=e.WorkerTask=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i=r(0),s=r(127),t=r(2),o=function(){function u(S){this.name=S,this.terminated=!1,this._capability=(0,i.createPromiseCapability)()}return u.prototype={get finished(){return this._capability.promise},finish:function(){this._capability.resolve()},terminate:function(){this.terminated=!0},ensureNotTerminated:function(){if(this.terminated)throw new Error("Worker task was terminated")}},u}(),l=function(){function u(U){this._msgHandler=U,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}u.prototype={getFullReader:function(){return(0,i.assert)(!this._fullRequestReader),this._fullRequestReader=new S(this._msgHandler),this._fullRequestReader},getRangeReader:function(z,D){var k=new V(z,D,this._msgHandler);return this._rangeRequestReaders.push(k),k},cancelAllRequests:function(z){this._fullRequestReader&&this._fullRequestReader.cancel(z);var D=this._rangeRequestReaders.slice(0);D.forEach(function(k){k.cancel(z)})}};function S(U){var z=this;this._msgHandler=U,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;var D=this._msgHandler.sendWithStream("GetReader");this._reader=D.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(function(k){z._isStreamingSupported=k.isStreamingSupported,z._isRangeSupported=k.isRangeSupported,z._contentLength=k.contentLength})}S.prototype={get headersReady(){return this._headersReady},get contentLength(){return this._contentLength},get isStreamingSupported(){return this._isStreamingSupported},get isRangeSupported(){return this._isRangeSupported},read:function(){return this._reader.read().then(function(z){var D=z.value,k=z.done;return k?{value:void 0,done:!0}:{value:D.buffer,done:!1}})},cancel:function(z){this._reader.cancel(z)}};function V(U,z,D){this._msgHandler=D,this.onProgress=null;var k=this._msgHandler.sendWithStream("GetRangeReader",{begin:U,end:z});this._reader=k.getReader()}return V.prototype={get isStreamingSupported(){return!1},read:function(){return this._reader.read().then(function(z){var D=z.value,k=z.done;return k?{value:void 0,done:!0}:{value:D.buffer,done:!1}})},cancel:function(z){this._reader.cancel(z)}},u}(),d={setup:function(u,S){var V=!1;u.on("test",function(z){if(!V){if(V=!0,!(z instanceof Uint8Array)){u.send("test","main",!1);return}var D=z[0]===255;u.postMessageTransfers=D;var k=new XMLHttpRequest,T="response"in k;try{k.responseType}catch{T=!1}if(!T){u.send("test",!1);return}u.send("test",{supportTypedArray:!0,supportTransfers:D})}}),u.on("configure",function(z){(0,i.setVerbosityLevel)(z.verbosity)}),u.on("GetDocRequest",function(z){return d.createDocumentHandler(z,S)})},createDocumentHandler:function(u,S){var V,U=!1,z=null,D=[],k=u.apiVersion,T="1.10.100";if(k!==null&&k!==T)throw new Error('The API version "'+k+'" does not match '+('the Worker version "'+T+'".'));var R=u.docId,g=u.docBaseUrl,m=u.docId+"_worker",v=new i.MessageHandler(m,R,S);v.postMessageTransfers=u.postMessageTransfers;function b(){if(U)throw new Error("Worker was terminated")}function f(W){D.push(W)}function p(W){W.finish();var q=D.indexOf(W);D.splice(q,1)}function h(W){var q=(0,i.createPromiseCapability)(),B=function(){var P=V.ensureDoc("numPages"),O=V.ensureDoc("fingerprint"),E=V.ensureXRef("encrypt");Promise.all([P,O,E]).then(function(A){var M={numPages:A[0],fingerprint:A[1],encrypted:!!A[2]};q.resolve(M)},N)},N=function(P){q.reject(P)};return V.ensureDoc("checkHeader",[]).then(function(){V.ensureDoc("parseStartXRef",[]).then(function(){V.ensureDoc("parse",[W]).then(B,N)},N)},N),q.promise}function _(W,q){var B=(0,i.createPromiseCapability)(),N,L=W.source;if(L.data){try{N=new s.LocalPdfManager(R,L.data,L.password,q,g),B.resolve(N)}catch(j){B.reject(j)}return B.promise}var P,O=[];try{P=new l(v)}catch(j){return B.reject(j),B.promise}var E=P.getFullReader();E.headersReady.then(function(){if(E.isRangeSupported){var j=L.disableAutoFetch||E.isStreamingSupported;N=new s.NetworkPdfManager(R,P,{msgHandler:v,url:L.url,password:L.password,length:E.contentLength,disableAutoFetch:j,rangeChunkSize:L.rangeChunkSize},q,g);for(var C=0;C<O.length;C++)N.sendProgressiveData(O[C]);O=[],B.resolve(N),z=null}}).catch(function(j){B.reject(j),z=null});var w=0,A=function(){var C=(0,i.arraysToBytes)(O);L.length&&C.length!==L.length&&(0,i.warn)("reported HTTP length is different from actual");try{N=new s.LocalPdfManager(R,C,L.password,q,g),B.resolve(N)}catch(x){B.reject(x)}O=[]},M=new Promise(function(j,C){var x=function F($){try{if(b(),$.done){N||A(),z=null;return}var G=$.value;w+=(0,i.arrayByteLength)(G),E.isStreamingSupported||v.send("DocProgress",{loaded:w,total:Math.max(w,E.contentLength||0)}),N?N.sendProgressiveData(G):O.push(G),E.read().then(F,C)}catch(Z){C(Z)}};E.read().then(x,C)});return M.catch(function(j){B.reject(j),z=null}),z=function(){P.cancelAllRequests("abort")},B.promise}function I(W){function q(P){b(),v.send("GetDoc",{pdfInfo:P})}function B(P){if(b(),P instanceof i.PasswordException){var O=new o("PasswordException: response "+P.code);f(O),v.sendWithPromise("PasswordRequest",P).then(function(E){p(O),V.updatePassword(E.password),N()}).catch(function(E){p(O),v.send("PasswordException",E)}.bind(null,P))}else P instanceof i.InvalidPDFException?v.send("InvalidPDF",P):P instanceof i.MissingPDFException?v.send("MissingPDF",P):P instanceof i.UnexpectedResponseException?v.send("UnexpectedResponse",P):v.send("UnknownError",new i.UnknownErrorException(P.message,P.toString()))}function N(){b(),h(!1).then(q,function(O){if(b(),!(O instanceof i.XRefParseException)){B(O);return}V.requestLoadedStream(),V.onLoadedStream().then(function(){b(),h(!0).then(q,B)})},B)}b();var L={forceDataSchema:W.disableCreateObjectURL,maxImageSize:W.maxImageSize===void 0?-1:W.maxImageSize,disableFontFace:W.disableFontFace,nativeImageDecoderSupport:W.nativeImageDecoderSupport,ignoreErrors:W.ignoreErrors,isEvalSupported:W.isEvalSupported};_(W,L).then(function(P){if(U)throw P.terminate(),new Error("Worker was terminated");V=P,v.send("PDFManagerReady",null),V.onLoadedStream().then(function(O){v.send("DataLoaded",{length:O.bytes.byteLength})})}).then(N,B)}return v.on("GetPage",function(q){return V.getPage(q.pageIndex).then(function(B){var N=V.ensure(B,"rotate"),L=V.ensure(B,"ref"),P=V.ensure(B,"userUnit"),O=V.ensure(B,"view");return Promise.all([N,L,P,O]).then(function(E){return{rotate:E[0],ref:E[1],userUnit:E[2],view:E[3]}})})}),v.on("GetPageIndex",function(q){var B=new t.Ref(q.ref.num,q.ref.gen),N=V.pdfDocument.catalog;return N.getPageIndex(B)}),v.on("GetDestinations",function(q){return V.ensureCatalog("destinations")}),v.on("GetDestination",function(q){return V.ensureCatalog("getDestination",[q.id])}),v.on("GetPageLabels",function(q){return V.ensureCatalog("pageLabels")}),v.on("GetPageMode",function(q){return V.ensureCatalog("pageMode")}),v.on("GetAttachments",function(q){return V.ensureCatalog("attachments")}),v.on("GetJavaScript",function(q){return V.ensureCatalog("javaScript")}),v.on("GetOutline",function(q){return V.ensureCatalog("documentOutline")}),v.on("GetMetadata",function(q){return Promise.all([V.ensureDoc("documentInfo"),V.ensureCatalog("metadata")])}),v.on("GetData",function(q){return V.requestLoadedStream(),V.onLoadedStream().then(function(B){return B.bytes})}),v.on("GetStats",function(q){return V.pdfDocument.xref.stats}),v.on("GetAnnotations",function(q){return V.getPage(q.pageIndex).then(function(B){return V.ensure(B,"getAnnotationsData",[q.intent])})}),v.on("RenderPageRequest",function(q){var B=q.pageIndex;V.getPage(B).then(function(N){var L=new o("RenderPageRequest: page "+B);f(L);var P=B+1,O=Date.now();N.getOperatorList({handler:v,task:L,intent:q.intent,renderInteractiveForms:q.renderInteractiveForms}).then(function(E){p(L),(0,i.info)("page="+P+" - getOperatorList: time="+(Date.now()-O)+"ms, len="+E.totalLength)},function(E){if(p(L),!L.terminated){v.send("UnsupportedFeature",{featureId:i.UNSUPPORTED_FEATURES.unknown});var w="worker.js: while trying to getPage() and getOperatorList()",A;typeof E=="string"?A={message:E,stack:w}:(typeof E>"u"?"undefined":a(E))==="object"?A={message:E.message||E.toString(),stack:E.stack||w}:A={message:"Unknown exception type: "+(typeof E>"u"?"undefined":a(E)),stack:w},v.send("PageError",{pageNum:P,error:A,intent:q.intent})}})})},this),v.on("GetTextContent",function(q,B){var N=q.pageIndex;B.onPull=function(L){},B.onCancel=function(L){},V.getPage(N).then(function(L){var P=new o("GetTextContent: page "+N);f(P);var O=N+1,E=Date.now();L.extractTextContent({handler:v,task:P,sink:B,normalizeWhitespace:q.normalizeWhitespace,combineTextItems:q.combineTextItems}).then(function(){p(P),(0,i.info)("text indexing: page="+O+" - time="+(Date.now()-E)+"ms"),B.close()},function(w){if(p(P),!P.terminated)throw B.error(w),w})})}),v.on("Cleanup",function(q){return V.cleanup()}),v.on("Terminate",function(q){U=!0,V&&(V.terminate(),V=null),z&&z();var B=[];return D.forEach(function(N){B.push(N.finished),N.terminate()}),Promise.all(B).then(function(){v.destroy(),v=null})}),v.on("Ready",function(q){I(u),u=null}),m},initializeFromPort:function(u){var S=new i.MessageHandler("worker","main",u);d.setup(S,u),S.send("ready",null)}};function c(y){return typeof y.postMessage=="function"&&"onmessage"in y}typeof window>"u"&&!(0,i.isNodeJS)()&&typeof self<"u"&&c(self)&&d.initializeFromPort(self),e.WorkerTask=o,e.WorkerMessageHandler=d},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};if(typeof PDFJS>"u"||!PDFJS.compatibilityChecked){var i=r(85),s=typeof navigator<"u"&&navigator.userAgent||"",t=/Android/.test(s),o=/Android\s[0-2][^\d]/.test(s),l=/Android\s[0-4][^\d]/.test(s),d=s.indexOf("Chrom")>=0,c=/Chrome\/(39|40)\./.test(s),y=s.indexOf("CriOS")>=0,u=s.indexOf("Trident")>=0,S=/\b(iPad|iPhone|iPod)(?=;)/.test(s),V=s.indexOf("Opera")>=0,U=/Safari\//.test(s)&&!/(Chrome\/|Android\s)/.test(s),z=(typeof window>"u"?"undefined":a(window))==="object"&&(typeof document>"u"?"undefined":a(document))==="object";typeof PDFJS>"u"&&(i.PDFJS={}),PDFJS.compatibilityChecked=!0,function(){if(typeof Uint8ClampedArray>"u"&&(i.Uint8ClampedArray=r(86)),typeof Uint8Array<"u"){typeof Uint8Array.prototype.subarray>"u"&&(Uint8Array.prototype.subarray=function(p,h){return new Uint8Array(this.slice(p,h))},Float32Array.prototype.subarray=function(p,h){return new Float32Array(this.slice(p,h))}),typeof Float64Array>"u"&&(i.Float64Array=Float32Array);return}function k(f,p){return new b(this.slice(f,p))}function T(f,p){arguments.length<2&&(p=0);for(var h=0,_=f.length;h<_;++h,++p)this[p]=f[h]&255}function R(f,p){this.buffer=f,this.byteLength=f.length,this.length=p,v(this.length)}R.prototype=Object.create(null);var g=0;function m(f){return{get:function(){var h=this.buffer,_=f<<2;return(h[_]|h[_+1]<<8|h[_+2]<<16|h[_+3]<<24)>>>0},set:function(h){var _=this.buffer,I=f<<2;_[I]=h&255,_[I+1]=h>>8&255,_[I+2]=h>>16&255,_[I+3]=h>>>24&255}}}function v(f){for(;g<f;)Object.defineProperty(R.prototype,g,m(g)),g++}function b(f){var p,h,_;if(typeof f=="number")for(p=[],h=0;h<f;++h)p[h]=0;else if("slice"in f)p=f.slice(0);else for(p=[],h=0,_=f.length;h<_;++h)p[h]=f[h];return p.subarray=k,p.buffer=p,p.byteLength=p.length,p.set=T,(typeof f>"u"?"undefined":a(f))==="object"&&f.buffer&&(p.buffer=f.buffer),p}i.Uint8Array=b,i.Int8Array=b,i.Int32Array=b,i.Uint16Array=b,i.Float32Array=b,i.Float64Array=b,i.Uint32Array=function(){if(arguments.length===3){if(arguments[1]!==0)throw new Error("offset !== 0 is not supported");return new R(arguments[0],arguments[2])}return b.apply(this,arguments)}}(),function(){if(!(!z||!window.CanvasPixelArray)){var k=window.CanvasPixelArray.prototype;"buffer"in k||(Object.defineProperty(k,"buffer",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(k,"byteLength",{get:function(){return this.length},enumerable:!1,configurable:!0}))}}(),function(){i.URL||(i.URL=i.webkitURL)}(),function(){if(typeof Object.defineProperty<"u"){var k=!0;try{z&&Object.defineProperty(new Image,"id",{value:"test"});var T=function(){};T.prototype={get id(){}},Object.defineProperty(new T,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch{k=!1}if(k)return}Object.defineProperty=function(g,m,v){delete g[m],"get"in v&&g.__defineGetter__(m,v.get),"set"in v&&g.__defineSetter__(m,v.set),"value"in v&&(g.__defineSetter__(m,function(f){return this.__defineGetter__(m,function(){return f}),f}),g[m]=v.value)}}(),function(){if(!(typeof XMLHttpRequest>"u")){var k=XMLHttpRequest.prototype,T=new XMLHttpRequest;if("overrideMimeType"in T||Object.defineProperty(k,"overrideMimeType",{value:function(g){}}),!("responseType"in T)){if(Object.defineProperty(k,"responseType",{get:function(){return this._responseType||"text"},set:function(g){(g==="text"||g==="arraybuffer")&&(this._responseType=g,g==="arraybuffer"&&typeof this.overrideMimeType=="function"&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),typeof VBArray<"u"){Object.defineProperty(k,"response",{get:function(){return this.responseType==="arraybuffer"?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}});return}Object.defineProperty(k,"response",{get:function(){if(this.responseType!=="arraybuffer")return this.responseText;var g=this.responseText,m,v=g.length,b=new Uint8Array(v);for(m=0;m<v;++m)b[m]=g.charCodeAt(m)&255;return b.buffer}})}}}(),function(){if(!("btoa"in i)){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.btoa=function(T){var R="",g,m;for(g=0,m=T.length;g<m;g+=3){var v=T.charCodeAt(g)&255,b=T.charCodeAt(g+1)&255,f=T.charCodeAt(g+2)&255,p=v>>2,h=(v&3)<<4|b>>4,_=g+1<m?(b&15)<<2|f>>6:64,I=g+2<m?f&63:64;R+=k.charAt(p)+k.charAt(h)+k.charAt(_)+k.charAt(I)}return R}}}(),function(){if(!("atob"in i)){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.atob=function(T){if(T=T.replace(/=+$/,""),T.length%4===1)throw new Error("bad atob input");for(var R=0,g,m,v=0,b="";m=T.charAt(v++);~m&&(g=R%4?g*64+m:m,R++%4)?b+=String.fromCharCode(255&g>>(-2*R&6)):0)m=k.indexOf(m);return b}}}(),function(){typeof Function.prototype.bind<"u"||(Function.prototype.bind=function(T){var R=this,g=Array.prototype.slice.call(arguments,1),m=function(){var b=g.concat(Array.prototype.slice.call(arguments));return R.apply(T,b)};return m})}(),function(){if(z){var k=document.createElement("div");"dataset"in k||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var R={},g=0,m=this.attributes.length;g<m;g++){var v=this.attributes[g];if(v.name.substring(0,5)==="data-"){var b=v.name.substring(5).replace(/\-([a-z])/g,function(f,p){return p.toUpperCase()});R[b]=v.value}}return Object.defineProperty(this,"_dataset",{value:R,writable:!1,enumerable:!1}),R},enumerable:!0})}}(),function(){function k(g,m,v,b){var f=g.className||"",p=f.split(/\s+/g);p[0]===""&&p.shift();var h=p.indexOf(m);return h<0&&v&&p.push(m),h>=0&&b&&p.splice(h,1),g.className=p.join(" "),h>=0}if(z){var T=document.createElement("div");if(!("classList"in T)){var R={add:function(m){k(this.element,m,!0,!1)},contains:function(m){return k(this.element,m,!1,!1)},remove:function(m){k(this.element,m,!1,!0)},toggle:function(m){k(this.element,m,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var m=Object.create(R,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:m,writable:!1,enumerable:!1}),m},enumerable:!0})}}}(),function(){if(!(typeof importScripts>"u"||"console"in i)){var k={},T={log:function(){var g=Array.prototype.slice.call(arguments);i.postMessage({targetName:"main",action:"console_log",data:g})},error:function(){var g=Array.prototype.slice.call(arguments);i.postMessage({targetName:"main",action:"console_error",data:g})},time:function(g){k[g]=Date.now()},timeEnd:function(g){var m=k[g];if(!m)throw new Error("Unknown timer name "+g);this.log("Timer:",g,Date.now()-m)}};i.console=T}}(),function(){if(z){if(!("console"in window)){window.console={log:function(){},error:function(){},warn:function(){}};return}if(!("bind"in console.log)){console.log=function(k){return function(T){return k(T)}}(console.log),console.error=function(k){return function(T){return k(T)}}(console.error),console.warn=function(k){return function(T){return k(T)}}(console.warn);return}}}(),function(){function k(R){T(R.target)&&R.stopPropagation()}function T(R){return R.disabled||R.parentNode&&T(R.parentNode)}V&&document.addEventListener("click",k,!0)}(),function(){(u||y)&&(PDFJS.disableCreateObjectURL=!0)}(),function(){typeof navigator>"u"||"language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")}(),function(){(U||o||c||S)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function(){z&&(!history.pushState||o)&&(PDFJS.disableHistory=!0)}(),function(){if(z)if(window.CanvasPixelArray)typeof window.CanvasPixelArray.prototype.set!="function"&&(window.CanvasPixelArray.prototype.set=function(m){for(var v=0,b=this.length;v<b;v++)this[v]=m[v]});else{var k=!1,T;if(d?(T=s.match(/Chrom(e|ium)\/([0-9]+)\./),k=T&&parseInt(T[2])<21):t?k=l:U&&(T=s.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),k=T&&parseInt(T[1])<6),k){var R=window.CanvasRenderingContext2D.prototype,g=R.createImageData;R.createImageData=function(m,v){var b=g.call(this,m,v);return b.data.set=function(f){for(var p=0,h=this.length;p<h;p++)this[p]=f[p]},b},R=null}}}(),function(){function k(){window.requestAnimationFrame=function(T){return window.setTimeout(T,20)},window.cancelAnimationFrame=function(T){window.clearTimeout(T)}}if(z){if(S){k();return}"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,!window.requestAnimationFrame&&k())}}(),function(){(S||t)&&(PDFJS.maxCanvasPixels=5242880)}(),function(){z&&u&&window.parent!==window&&(PDFJS.disableFullscreen=!0)}(),function(){z&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var T=document.getElementsByTagName("script");return T[T.length-1]},enumerable:!0,configurable:!0}))}(),function(){if(z){var k=document.createElement("input");try{k.type="number"}catch{var T=k.constructor.prototype,R=Object.getOwnPropertyDescriptor(T,"type");Object.defineProperty(T,"type",{get:function(){return R.get.call(this)},set:function(v){R.set.call(this,v==="number"?"text":v)},enumerable:!0,configurable:!0})}}}(),function(){if(z&&document.attachEvent){var k=document.constructor.prototype,T=Object.getOwnPropertyDescriptor(k,"readyState");Object.defineProperty(k,"readyState",{get:function(){var g=T.get.call(this);return g==="interactive"?"loading":g},set:function(g){T.set.call(this,g)},enumerable:!0,configurable:!0})}}(),function(){z&&(typeof Element.prototype.remove<"u"||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}))}(),function(){Number.isNaN||(Number.isNaN=r(98))}(),function(){Number.isInteger||(Number.isInteger=r(100))}(),function(){i.Promise||(i.Promise=r(103))}(),function(){i.WeakMap||(i.WeakMap=r(113))}(),function(){var k=!1;try{if(typeof URL=="function"&&a(URL.prototype)==="object"&&"origin"in URL.prototype){var T=new URL("b","http://a");T.pathname="c%20d",k=T.href==="http://a/c%20d"}}catch{}if(k)return;var R=Object.create(null);R.ftp=21,R.file=0,R.gopher=70,R.http=80,R.https=443,R.ws=80,R.wss=443;var g=Object.create(null);g["%2e"]=".",g[".%2e"]="..",g["%2e."]="..",g["%2e%2e"]="..";function m(L){return R[L]!==void 0}function v(){q.call(this),this._isInvalid=!0}function b(L){return L===""&&v.call(this),L.toLowerCase()}function f(L){var P=L.charCodeAt(0);return P>32&&P<127&&[34,35,60,62,63,96].indexOf(P)===-1?L:encodeURIComponent(L)}function p(L){var P=L.charCodeAt(0);return P>32&&P<127&&[34,35,60,62,96].indexOf(P)===-1?L:encodeURIComponent(L)}var h,_=/[a-zA-Z]/,I=/[a-zA-Z0-9\+\-\.]/;function W(L,P,O){function E(pe){x.push(pe)}var w=P||"scheme start",A=0,M="",j=!1,C=!1,x=[];e:for(;(L[A-1]!==h||A===0)&&!this._isInvalid;){var F=L[A];switch(w){case"scheme start":if(F&&_.test(F))M+=F.toLowerCase(),w="scheme";else if(P){E("Invalid scheme.");break e}else{M="",w="no scheme";continue}break;case"scheme":if(F&&I.test(F))M+=F.toLowerCase();else if(F===":"){if(this._scheme=M,M="",P)break e;m(this._scheme)&&(this._isRelative=!0),this._scheme==="file"?w="relative":this._isRelative&&O&&O._scheme===this._scheme?w="relative or authority":this._isRelative?w="authority first slash":w="scheme data"}else if(P){if(F===h)break e;E("Code point not allowed in scheme: "+F);break e}else{M="",A=0,w="no scheme";continue}break;case"scheme data":F==="?"?(this._query="?",w="query"):F==="#"?(this._fragment="#",w="fragment"):F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._schemeData+=f(F));break;case"no scheme":if(!O||!m(O._scheme))E("Missing scheme."),v.call(this);else{w="relative";continue}break;case"relative or authority":if(F==="/"&&L[A+1]==="/")w="authority ignore slashes";else{E("Expected /, got: "+F),w="relative";continue}break;case"relative":if(this._isRelative=!0,this._scheme!=="file"&&(this._scheme=O._scheme),F===h){this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query=O._query,this._username=O._username,this._password=O._password;break e}else if(F==="/"||F==="\\")F==="\\"&&E("\\ is an invalid code point."),w="relative slash";else if(F==="?")this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query="?",this._username=O._username,this._password=O._password,w="query";else if(F==="#")this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query=O._query,this._fragment="#",this._username=O._username,this._password=O._password,w="fragment";else{var $=L[A+1],G=L[A+2];(this._scheme!=="file"||!_.test(F)||$!==":"&&$!=="|"||G!==h&&G!=="/"&&G!=="\\"&&G!=="?"&&G!=="#")&&(this._host=O._host,this._port=O._port,this._username=O._username,this._password=O._password,this._path=O._path.slice(),this._path.pop()),w="relative path";continue}break;case"relative slash":if(F==="/"||F==="\\")F==="\\"&&E("\\ is an invalid code point."),this._scheme==="file"?w="file host":w="authority ignore slashes";else{this._scheme!=="file"&&(this._host=O._host,this._port=O._port,this._username=O._username,this._password=O._password),w="relative path";continue}break;case"authority first slash":if(F==="/")w="authority second slash";else{E("Expected '/', got: "+F),w="authority ignore slashes";continue}break;case"authority second slash":if(w="authority ignore slashes",F!=="/"){E("Expected '/', got: "+F);continue}break;case"authority ignore slashes":if(F!=="/"&&F!=="\\"){w="authority";continue}else E("Expected authority, got: "+F);break;case"authority":if(F==="@"){j&&(E("@ already seen."),M+="%40"),j=!0;for(var Z=0;Z<M.length;Z++){var J=M[Z];if(J==="	"||J===`
`||J==="\r"){E("Invalid whitespace in authority.");continue}if(J===":"&&this._password===null){this._password="";continue}var Y=f(J);this._password!==null?this._password+=Y:this._username+=Y}M=""}else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){A-=M.length,M="",w="host";continue}else M+=F;break;case"file host":if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){M.length===2&&_.test(M[0])&&(M[1]===":"||M[1]==="|")?w="relative path":(M.length===0||(this._host=b.call(this,M),M=""),w="relative path start");continue}else F==="	"||F===`
`||F==="\r"?E("Invalid whitespace in file host."):M+=F;break;case"host":case"hostname":if(F===":"&&!C){if(this._host=b.call(this,M),M="",w="port",P==="hostname")break e}else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){if(this._host=b.call(this,M),M="",w="relative path start",P)break e;continue}else F!=="	"&&F!==`
`&&F!=="\r"?(F==="["?C=!0:F==="]"&&(C=!1),M+=F):E("Invalid code point in host/hostname: "+F);break;case"port":if(/[0-9]/.test(F))M+=F;else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"||P){if(M!==""){var ee=parseInt(M,10);ee!==R[this._scheme]&&(this._port=ee+""),M=""}if(P)break e;w="relative path start";continue}else F==="	"||F===`
`||F==="\r"?E("Invalid code point in port: "+F):v.call(this);break;case"relative path start":if(F==="\\"&&E("'\\' not allowed in path."),w="relative path",F!=="/"&&F!=="\\")continue;break;case"relative path":if(F===h||F==="/"||F==="\\"||!P&&(F==="?"||F==="#")){F==="\\"&&E("\\ not allowed in relative path.");var ae;(ae=g[M.toLowerCase()])&&(M=ae),M===".."?(this._path.pop(),F!=="/"&&F!=="\\"&&this._path.push("")):M==="."&&F!=="/"&&F!=="\\"?this._path.push(""):M!=="."&&(this._scheme==="file"&&this._path.length===0&&M.length===2&&_.test(M[0])&&M[1]==="|"&&(M=M[0]+":"),this._path.push(M)),M="",F==="?"?(this._query="?",w="query"):F==="#"&&(this._fragment="#",w="fragment")}else F!=="	"&&F!==`
`&&F!=="\r"&&(M+=f(F));break;case"query":!P&&F==="#"?(this._fragment="#",w="fragment"):F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._query+=p(F));break;case"fragment":F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._fragment+=F);break}A++}}function q(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function B(L,P){P!==void 0&&!(P instanceof B)&&(P=new B(String(P))),this._url=L,q.call(this);var O=L.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");W.call(this,O,null,P)}B.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var L="";return(this._username!==""||this._password!==null)&&(L=this._username+(this._password!==null?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+L+this.host:"")+this.pathname+this._query+this._fragment},set href(L){q.call(this),W.call(this,L)},get protocol(){return this._scheme+":"},set protocol(L){this._isInvalid||W.call(this,L+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(L){this._isInvalid||!this._isRelative||W.call(this,L,"host")},get hostname(){return this._host},set hostname(L){this._isInvalid||!this._isRelative||W.call(this,L,"hostname")},get port(){return this._port},set port(L){this._isInvalid||!this._isRelative||W.call(this,L,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(L){this._isInvalid||!this._isRelative||(this._path=[],W.call(this,L,"relative path start"))},get search(){return this._isInvalid||!this._query||this._query==="?"?"":this._query},set search(L){this._isInvalid||!this._isRelative||(this._query="?",L[0]==="?"&&(L=L.slice(1)),W.call(this,L,"query"))},get hash(){return this._isInvalid||!this._fragment||this._fragment==="#"?"":this._fragment},set hash(L){this._isInvalid||(this._fragment="#",L[0]==="#"&&(L=L.slice(1)),W.call(this,L,"fragment"))},get origin(){var L;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new B(this._schemeData).origin||"null"}catch{}return"null"}return L=this.host,L?this._scheme+"://"+L:""}};var N=i.URL;N&&(B.createObjectURL=function(L){return N.createObjectURL.apply(N,arguments)},B.revokeObjectURL=function(L){N.revokeObjectURL(L)}),i.URL=B}()}},function(n,e,r){"use strict";n.exports=typeof window<"u"&&window.Math===Math?window:typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:{}},function(n,e,r){"use strict";r(87),n.exports=r(6).Uint8ClampedArray},function(n,e,r){"use strict";r(88)("Uint8",1,function(a){return function(s,t,o){return a(this,s,t,o)}},!0)},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye};if(r(10)){var i=r(21),s=r(1),t=r(11),o=r(7),l=r(49),d=r(89),c=r(13),y=r(24),u=r(29),S=r(8),V=r(23),U=r(18),z=r(14),D=r(50),k=r(31),T=r(36),R=r(12),g=r(32),m=r(3),v=r(19),b=r(56),f=r(57),p=r(59),h=r(51).f,_=r(60),I=r(17),W=r(4),q=r(42),B=r(53),N=r(43),L=r(61),P=r(20),O=r(44),E=r(63),w=r(55),A=r(97),M=r(15),j=r(64),C=M.f,x=j.f,F=s.RangeError,$=s.TypeError,G=s.Uint8Array,Z="ArrayBuffer",J="Shared"+Z,Y="BYTES_PER_ELEMENT",ee="prototype",ae=Array[ee],pe=d.ArrayBuffer,se=d.DataView,ue=q(0),le=q(2),ie=q(3),de=q(4),fe=q(5),he=q(6),Se=B(!0),Ce=B(!1),Ae=L.values,Ee=L.keys,ke=L.entries,Fe=ae.lastIndexOf,Pe=ae.reduce,Ie=ae.reduceRight,$e=ae.join,Ke=ae.sort,Ze=ae.slice,ot=ae.toString,et=ae.toLocaleString,ct=W("iterator"),ht=W("toStringTag"),Ge=I("typed_constructor"),Be=I("def_constructor"),wt=l.CONSTR,At=l.TYPED,Q=l.VIEW,ve="Wrong length!",K=q(1,function(Ye,De){return ge(N(Ye,Ye[Be]),De)}),re=t(function(){return new G(new Uint16Array([1]).buffer)[0]===1}),me=!!G&&!!G[ee].set&&t(function(){new G(1).set({})}),xe=function(De,He){var tt=U(De);if(tt<0||tt%He)throw F("Wrong offset!");return tt},_e=function(De){if(m(De)&&At in De)return De;throw $(De+" is not a typed array!")},ge=function(De,He){if(!(m(De)&&Ge in De))throw $("It is not a typed array constructor!");return new De(He)},ye=function(De,He){return Ne(N(De,De[Be]),He)},Ne=function(De,He){for(var tt=0,xt=He.length,lr=ge(De,xt);xt>tt;)lr[tt]=He[tt++];return lr},Le=function(De,He,tt){C(De,He,{get:function(){return this._d[tt]}})},Je=function(De){var He=v(De),tt=arguments.length,xt=tt>1?arguments[1]:void 0,lr=xt!==void 0,Rr=_(He),rt,jr,ja,_a,fa,Jt;if(Rr!=null&&!b(Rr)){for(Jt=Rr.call(He),ja=[],rt=0;!(fa=Jt.next()).done;rt++)ja.push(fa.value);He=ja}for(lr&&tt>2&&(xt=c(xt,arguments[2],2)),rt=0,jr=z(He.length),_a=ge(this,jr);jr>rt;rt++)_a[rt]=lr?xt(He[rt],rt):He[rt];return _a},Xe=function(){for(var De=0,He=arguments.length,tt=ge(this,He);He>De;)tt[De]=arguments[De++];return tt},ut=!!G&&t(function(){et.call(new G(1))}),mt=function(){return et.apply(ut?Ze.call(_e(this)):_e(this),arguments)},Tt={copyWithin:function(De,He){return A.call(_e(this),De,He,arguments.length>2?arguments[2]:void 0)},every:function(De){return de(_e(this),De,arguments.length>1?arguments[1]:void 0)},fill:function(De){return w.apply(_e(this),arguments)},filter:function(De){return ye(this,le(_e(this),De,arguments.length>1?arguments[1]:void 0))},find:function(De){return fe(_e(this),De,arguments.length>1?arguments[1]:void 0)},findIndex:function(De){return he(_e(this),De,arguments.length>1?arguments[1]:void 0)},forEach:function(De){ue(_e(this),De,arguments.length>1?arguments[1]:void 0)},indexOf:function(De){return Ce(_e(this),De,arguments.length>1?arguments[1]:void 0)},includes:function(De){return Se(_e(this),De,arguments.length>1?arguments[1]:void 0)},join:function(De){return $e.apply(_e(this),arguments)},lastIndexOf:function(De){return Fe.apply(_e(this),arguments)},map:function(De){return K(_e(this),De,arguments.length>1?arguments[1]:void 0)},reduce:function(De){return Pe.apply(_e(this),arguments)},reduceRight:function(De){return Ie.apply(_e(this),arguments)},reverse:function(){for(var De=this,He=_e(De).length,tt=Math.floor(He/2),xt=0,lr;xt<tt;)lr=De[xt],De[xt++]=De[--He],De[He]=lr;return De},some:function(De){return ie(_e(this),De,arguments.length>1?arguments[1]:void 0)},sort:function(De){return Ke.call(_e(this),De)},subarray:function(De,He){var tt=_e(this),xt=tt.length,lr=k(De,xt);return new(N(tt,tt[Be]))(tt.buffer,tt.byteOffset+lr*tt.BYTES_PER_ELEMENT,z((He===void 0?xt:k(He,xt))-lr))}},Kt=function(De,He){return ye(this,Ze.call(_e(this),De,He))},yr=function(De){_e(this);var He=xe(arguments[1],1),tt=this.length,xt=v(De),lr=z(xt.length),Rr=0;if(lr+He>tt)throw F(ve);for(;Rr<lr;)this[He+Rr]=xt[Rr++]},dr={entries:function(){return ke.call(_e(this))},keys:function(){return Ee.call(_e(this))},values:function(){return Ae.call(_e(this))}},hr=function(De,He){return m(De)&&De[At]&&(typeof He>"u"?"undefined":a(He))!="symbol"&&He in De&&String(+He)==String(He)},Mr=function(De,He){return hr(De,He=T(He,!0))?u(2,De[He]):x(De,He)},ra=function(De,He,tt){return hr(De,He=T(He,!0))&&m(tt)&&R(tt,"value")&&!R(tt,"get")&&!R(tt,"set")&&!tt.configurable&&(!R(tt,"writable")||tt.writable)&&(!R(tt,"enumerable")||tt.enumerable)?(De[He]=tt.value,De):C(De,He,tt)};wt||(j.f=Mr,M.f=ra),o(o.S+o.F*!wt,"Object",{getOwnPropertyDescriptor:Mr,defineProperty:ra}),t(function(){ot.call({})})&&(ot=et=function(){return $e.call(this)});var Kr=V({},Tt);V(Kr,dr),S(Kr,ct,dr.values),V(Kr,{slice:Kt,set:yr,constructor:function(){},toString:ot,toLocaleString:mt}),Le(Kr,"buffer","b"),Le(Kr,"byteOffset","o"),Le(Kr,"byteLength","l"),Le(Kr,"length","e"),C(Kr,ht,{get:function(){return this[At]}}),n.exports=function(Ye,De,He,tt){tt=!!tt;var xt=Ye+(tt?"Clamped":"")+"Array",lr="get"+Ye,Rr="set"+Ye,rt=s[xt],jr=rt||{},ja=rt&&p(rt),_a=!rt||!l.ABV,fa={},Jt=rt&&rt[ee],_t=function(Oe,ze){var We=Oe._d;return We.v[lr](ze*De+We.o,re)},st=function(Oe,ze,We){var at=Oe._d;tt&&(We=(We=Math.round(We))<0?0:We>255?255:We&255),at.v[Rr](ze*De+at.o,We,re)},H=function(Oe,ze){C(Oe,ze,{get:function(){return _t(this,ze)},set:function(at){return st(this,ze,at)},enumerable:!0})};_a?(rt=He(function(Re,Oe,ze,We){y(Re,rt,xt,"_d");var at=0,dt=0,Dt,bt,qt,Pr;if(!m(Oe))qt=D(Oe),bt=qt*De,Dt=new pe(bt);else if(Oe instanceof pe||(Pr=g(Oe))==Z||Pr==J){Dt=Oe,dt=xe(ze,De);var Ut=Oe.byteLength;if(We===void 0){if(Ut%De||(bt=Ut-dt,bt<0))throw F(ve)}else if(bt=z(We)*De,bt+dt>Ut)throw F(ve);qt=bt/De}else return At in Oe?Ne(rt,Oe):Je.call(rt,Oe);for(S(Re,"_d",{b:Dt,o:dt,l:bt,e:qt,v:new se(Dt)});at<qt;)H(Re,at++)}),Jt=rt[ee]=f(Kr),S(Jt,"constructor",rt)):(!t(function(){rt(1)})||!t(function(){new rt(-1)})||!O(function(Re){new rt,new rt(null),new rt(1.5),new rt(Re)},!0))&&(rt=He(function(Re,Oe,ze,We){y(Re,rt,xt);var at;return m(Oe)?Oe instanceof pe||(at=g(Oe))==Z||at==J?We!==void 0?new jr(Oe,xe(ze,De),We):ze!==void 0?new jr(Oe,xe(ze,De)):new jr(Oe):At in Oe?Ne(rt,Oe):Je.call(rt,Oe):new jr(D(Oe))}),ue(ja!==Function.prototype?h(jr).concat(h(ja)):h(jr),function(Re){Re in rt||S(rt,Re,jr[Re])}),rt[ee]=Jt,i||(Jt.constructor=rt));var ne=Jt[ct],oe=!!ne&&(ne.name=="values"||ne.name==null),we=dr.values;S(rt,Ge,!0),S(Jt,At,xt),S(Jt,Q,!0),S(Jt,Be,rt),(tt?new rt(1)[ht]!=xt:!(ht in Jt))&&C(Jt,ht,{get:function(){return xt}}),fa[xt]=rt,o(o.G+o.W+o.F*(rt!=jr),fa),o(o.S,xt,{BYTES_PER_ELEMENT:De}),o(o.S+o.F*t(function(){jr.of.call(rt,1)}),xt,{from:Je,of:Xe}),Y in Jt||S(Jt,Y,De),o(o.P,xt,Tt),E(xt),o(o.P+o.F*me,xt,{set:yr}),o(o.P+o.F*!oe,xt,dr),!i&&Jt.toString!=ot&&(Jt.toString=ot),o(o.P+o.F*t(function(){new rt(1).slice()}),xt,{slice:Kt}),o(o.P+o.F*(t(function(){return[1,2].toLocaleString()!=new rt([1,2]).toLocaleString()})||!t(function(){Jt.toLocaleString.call([1,2])})),xt,{toLocaleString:mt}),P[xt]=oe?ne:we,!i&&!oe&&S(Jt,ct,we)}}else n.exports=function(){}},function(n,e,r){"use strict";var a=r(1),i=r(10),s=r(21),t=r(49),o=r(8),l=r(23),d=r(11),c=r(24),y=r(18),u=r(14),S=r(50),V=r(51).f,U=r(15).f,z=r(55),D=r(26),k="ArrayBuffer",T="DataView",R="prototype",g="Wrong length!",m="Wrong index!",v=a[k],b=a[T],f=a.Math,p=a.RangeError,h=a.Infinity,_=v,I=f.abs,W=f.pow,q=f.floor,B=f.log,N=f.LN2,L="buffer",P="byteLength",O="byteOffset",E=i?"_b":L,w=i?"_l":P,A=i?"_o":O;function M(de,fe,he){var Se=new Array(he),Ce=he*8-fe-1,Ae=(1<<Ce)-1,Ee=Ae>>1,ke=fe===23?W(2,-24)-W(2,-77):0,Fe=0,Pe=de<0||de===0&&1/de<0?1:0,Ie,$e,Ke;for(de=I(de),de!=de||de===h?($e=de!=de?1:0,Ie=Ae):(Ie=q(B(de)/N),de*(Ke=W(2,-Ie))<1&&(Ie--,Ke*=2),Ie+Ee>=1?de+=ke/Ke:de+=ke*W(2,1-Ee),de*Ke>=2&&(Ie++,Ke/=2),Ie+Ee>=Ae?($e=0,Ie=Ae):Ie+Ee>=1?($e=(de*Ke-1)*W(2,fe),Ie=Ie+Ee):($e=de*W(2,Ee-1)*W(2,fe),Ie=0));fe>=8;Se[Fe++]=$e&255,$e/=256,fe-=8);for(Ie=Ie<<fe|$e,Ce+=fe;Ce>0;Se[Fe++]=Ie&255,Ie/=256,Ce-=8);return Se[--Fe]|=Pe*128,Se}function j(de,fe,he){var Se=he*8-fe-1,Ce=(1<<Se)-1,Ae=Ce>>1,Ee=Se-7,ke=he-1,Fe=de[ke--],Pe=Fe&127,Ie;for(Fe>>=7;Ee>0;Pe=Pe*256+de[ke],ke--,Ee-=8);for(Ie=Pe&(1<<-Ee)-1,Pe>>=-Ee,Ee+=fe;Ee>0;Ie=Ie*256+de[ke],ke--,Ee-=8);if(Pe===0)Pe=1-Ae;else{if(Pe===Ce)return Ie?NaN:Fe?-h:h;Ie=Ie+W(2,fe),Pe=Pe-Ae}return(Fe?-1:1)*Ie*W(2,Pe-fe)}function C(de){return de[3]<<24|de[2]<<16|de[1]<<8|de[0]}function x(de){return[de&255]}function F(de){return[de&255,de>>8&255]}function $(de){return[de&255,de>>8&255,de>>16&255,de>>24&255]}function G(de){return M(de,52,8)}function Z(de){return M(de,23,4)}function J(de,fe,he){U(de[R],fe,{get:function(){return this[he]}})}function Y(de,fe,he,Se){var Ce=+he,Ae=S(Ce);if(Ae+fe>de[w])throw p(m);var Ee=de[E]._b,ke=Ae+de[A],Fe=Ee.slice(ke,ke+fe);return Se?Fe:Fe.reverse()}function ee(de,fe,he,Se,Ce,Ae){var Ee=+he,ke=S(Ee);if(ke+fe>de[w])throw p(m);for(var Fe=de[E]._b,Pe=ke+de[A],Ie=Se(+Ce),$e=0;$e<fe;$e++)Fe[Pe+$e]=Ie[Ae?$e:fe-$e-1]}if(!t.ABV)v=function(fe){c(this,v,k);var he=S(fe);this._b=z.call(new Array(he),0),this[w]=he},b=function(fe,he,Se){c(this,b,T),c(fe,v,T);var Ce=fe[w],Ae=y(he);if(Ae<0||Ae>Ce)throw p("Wrong offset!");if(Se=Se===void 0?Ce-Ae:u(Se),Ae+Se>Ce)throw p(g);this[E]=fe,this[A]=Ae,this[w]=Se},i&&(J(v,P,"_l"),J(b,L,"_b"),J(b,P,"_l"),J(b,O,"_o")),l(b[R],{getInt8:function(fe){return Y(this,1,fe)[0]<<24>>24},getUint8:function(fe){return Y(this,1,fe)[0]},getInt16:function(fe){var he=Y(this,2,fe,arguments[1]);return(he[1]<<8|he[0])<<16>>16},getUint16:function(fe){var he=Y(this,2,fe,arguments[1]);return he[1]<<8|he[0]},getInt32:function(fe){return C(Y(this,4,fe,arguments[1]))},getUint32:function(fe){return C(Y(this,4,fe,arguments[1]))>>>0},getFloat32:function(fe){return j(Y(this,4,fe,arguments[1]),23,4)},getFloat64:function(fe){return j(Y(this,8,fe,arguments[1]),52,8)},setInt8:function(fe,he){ee(this,1,fe,x,he)},setUint8:function(fe,he){ee(this,1,fe,x,he)},setInt16:function(fe,he){ee(this,2,fe,F,he,arguments[2])},setUint16:function(fe,he){ee(this,2,fe,F,he,arguments[2])},setInt32:function(fe,he){ee(this,4,fe,$,he,arguments[2])},setUint32:function(fe,he){ee(this,4,fe,$,he,arguments[2])},setFloat32:function(fe,he){ee(this,4,fe,Z,he,arguments[2])},setFloat64:function(fe,he){ee(this,8,fe,G,he,arguments[2])}});else{if(!d(function(){v(1)})||!d(function(){new v(-1)})||d(function(){return new v,new v(1.5),new v(NaN),v.name!=k})){v=function(fe){return c(this,v),new _(S(fe))};for(var ae=v[R]=_[R],pe=V(_),se=0,ue;pe.length>se;)(ue=pe[se++])in v||o(v,ue,_[ue]);s||(ae.constructor=v)}var le=new b(new v(2)),ie=b[R].setInt8;le.setInt8(0,2147483648),le.setInt8(1,2147483649),(le.getInt8(0)||!le.getInt8(1))&&l(b[R],{setInt8:function(fe,he){ie.call(this,fe,he<<24>>24)},setUint8:function(fe,he){ie.call(this,fe,he<<24>>24)}},!0)}D(v,k),D(b,T),o(b[R],t.VIEW,!0),e[k]=v,e[T]=b},function(n,e,r){"use strict";var a=r(15),i=r(9),s=r(41);n.exports=r(10)?Object.defineProperties:function(o,l){i(o);for(var d=s(l),c=d.length,y=0,u;c>y;)a.f(o,u=d[y++],l[u]);return o}},function(n,e,r){"use strict";var a=r(92);n.exports=function(i,s){return new(a(i))(s)}},function(n,e,r){"use strict";var a=r(3),i=r(93),s=r(4)("species");n.exports=function(t){var o;return i(t)&&(o=t.constructor,typeof o=="function"&&(o===Array||i(o.prototype))&&(o=void 0),a(o)&&(o=o[s],o===null&&(o=void 0))),o===void 0?Array:o}},function(n,e,r){"use strict";var a=r(25);n.exports=Array.isArray||function(s){return a(s)=="Array"}},function(n,e,r){"use strict";var a=r(4)("unscopables"),i=Array.prototype;i[a]==null&&r(8)(i,a,{}),n.exports=function(s){i[a][s]=!0}},function(n,e,r){"use strict";n.exports=function(a,i){return{value:i,done:!!a}}},function(n,e,r){"use strict";var a=r(57),i=r(29),s=r(26),t={};r(8)(t,r(4)("iterator"),function(){return this}),n.exports=function(o,l,d){o.prototype=a(t,{next:i(1,d)}),s(o,l+" Iterator")}},function(n,e,r){"use strict";var a=r(19),i=r(31),s=r(14);n.exports=[].copyWithin||function(o,l){var d=a(this),c=s(d.length),y=i(o,c),u=i(l,c),S=arguments.length>2?arguments[2]:void 0,V=Math.min((S===void 0?c:i(S,c))-u,c-y),U=1;for(u<y&&y<u+V&&(U=-1,u+=V-1,y+=V-1);V-- >0;)u in d?d[y]=d[u]:delete d[y],y+=U,u+=U;return d}},function(n,e,r){"use strict";r(99),n.exports=r(6).Number.isNaN},function(n,e,r){"use strict";var a=r(7);a(a.S,"Number",{isNaN:function(s){return s!=s}})},function(n,e,r){"use strict";r(101),n.exports=r(6).Number.isInteger},function(n,e,r){"use strict";var a=r(7);a(a.S,"Number",{isInteger:r(102)})},function(n,e,r){"use strict";var a=r(3),i=Math.floor;n.exports=function(t){return!a(t)&&isFinite(t)&&i(t)===t}},function(n,e,r){"use strict";r(66),r(104),r(67),r(106),r(111),r(112),n.exports=r(6).Promise},function(n,e,r){"use strict";var a=r(105)(!0);r(62)(String,"String",function(i){this._t=String(i),this._i=0},function(){var i=this._t,s=this._i,t;return s>=i.length?{value:void 0,done:!0}:(t=a(i,s),this._i+=t.length,{value:t,done:!1})})},function(n,e,r){"use strict";var a=r(18),i=r(38);n.exports=function(s){return function(t,o){var l=String(i(t)),d=a(o),c=l.length,y,u;return d<0||d>=c?s?"":void 0:(y=l.charCodeAt(d),y<55296||y>56319||d+1===c||(u=l.charCodeAt(d+1))<56320||u>57343?s?l.charAt(d):y:s?l.slice(d,d+2):(y-55296<<10)+(u-56320)+65536)}}},function(n,e,r){"use strict";var a=r(21),i=r(1),s=r(13),t=r(32),o=r(7),l=r(3),d=r(22),c=r(24),y=r(33),u=r(43),S=r(68).set,V=r(109)(),U=r(45),z=r(69),D=r(110),k=r(70),T="Promise",R=i.TypeError,g=i.process,m=g&&g.versions,v=m&&m.v8||"",b=i[T],f=t(g)=="process",p=function(){},h,_,I,W,q=_=U.f,B=!!function(){try{var M=b.resolve(1),j=(M.constructor={})[r(4)("species")]=function(C){C(p,p)};return(f||typeof PromiseRejectionEvent=="function")&&M.then(p)instanceof j&&v.indexOf("6.6")!==0&&D.indexOf("Chrome/66")===-1}catch{}}(),N=function(j){var C;return l(j)&&typeof(C=j.then)=="function"?C:!1},L=function(j,C){if(!j._n){j._n=!0;var x=j._c;V(function(){for(var F=j._v,$=j._s==1,G=0,Z=function(Y){var ee=$?Y.ok:Y.fail,ae=Y.resolve,pe=Y.reject,se=Y.domain,ue,le,ie;try{ee?($||(j._h==2&&E(j),j._h=1),ee===!0?ue=F:(se&&se.enter(),ue=ee(F),se&&(se.exit(),ie=!0)),ue===Y.promise?pe(R("Promise-chain cycle")):(le=N(ue))?le.call(ue,ae,pe):ae(ue)):pe(F)}catch(de){se&&!ie&&se.exit(),pe(de)}};x.length>G;)Z(x[G++]);j._c=[],j._n=!1,C&&!j._h&&P(j)})}},P=function(j){S.call(i,function(){var C=j._v,x=O(j),F,$,G;if(x&&(F=z(function(){f?g.emit("unhandledRejection",C,j):($=i.onunhandledrejection)?$({promise:j,reason:C}):(G=i.console)&&G.error&&G.error("Unhandled promise rejection",C)}),j._h=f||O(j)?2:1),j._a=void 0,x&&F.e)throw F.v})},O=function(j){return j._h!==1&&(j._a||j._c).length===0},E=function(j){S.call(i,function(){var C;f?g.emit("rejectionHandled",j):(C=i.onrejectionhandled)&&C({promise:j,reason:j._v})})},w=function(j){var C=this;C._d||(C._d=!0,C=C._w||C,C._v=j,C._s=2,C._a||(C._a=C._c.slice()),L(C,!0))},A=function M(j){var C=this,x;if(!C._d){C._d=!0,C=C._w||C;try{if(C===j)throw R("Promise can't be resolved itself");(x=N(j))?V(function(){var F={_w:C,_d:!1};try{x.call(j,s(M,F,1),s(w,F,1))}catch($){w.call(F,$)}}):(C._v=j,C._s=1,L(C,!1))}catch(F){w.call({_w:C,_d:!1},F)}}};B||(b=function(j){c(this,b,T,"_h"),d(j),h.call(this);try{j(s(A,this,1),s(w,this,1))}catch(C){w.call(this,C)}},h=function(j){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},h.prototype=r(23)(b.prototype,{then:function(j,C){var x=q(u(this,b));return x.ok=typeof j=="function"?j:!0,x.fail=typeof C=="function"&&C,x.domain=f?g.domain:void 0,this._c.push(x),this._a&&this._a.push(x),this._s&&L(this,!1),x.promise},catch:function(j){return this.then(void 0,j)}}),I=function(){var j=new h;this.promise=j,this.resolve=s(A,j,1),this.reject=s(w,j,1)},U.f=q=function(j){return j===b||j===W?new I(j):_(j)}),o(o.G+o.W+o.F*!B,{Promise:b}),r(26)(b,T),r(63)(T),W=r(6)[T],o(o.S+o.F*!B,T,{reject:function(j){var C=q(this),x=C.reject;return x(j),C.promise}}),o(o.S+o.F*(a||!B),T,{resolve:function(j){return k(a&&this===W?b:this,j)}}),o(o.S+o.F*!(B&&r(44)(function(M){b.all(M).catch(p)})),T,{all:function(j){var C=this,x=q(C),F=x.resolve,$=x.reject,G=z(function(){var Z=[],J=0,Y=1;y(j,!1,function(ee){var ae=J++,pe=!1;Z.push(void 0),Y++,C.resolve(ee).then(function(se){pe||(pe=!0,Z[ae]=se,--Y||F(Z))},$)}),--Y||F(Z)});return G.e&&$(G.v),x.promise},race:function(j){var C=this,x=q(C),F=x.reject,$=z(function(){y(j,!1,function(G){C.resolve(G).then(x.resolve,F)})});return $.e&&F($.v),x.promise}})},function(n,e,r){"use strict";var a=r(9);n.exports=function(i,s,t,o){try{return o?s(a(t)[0],t[1]):s(t)}catch(d){var l=i.return;throw l!==void 0&&a(l.call(i)),d}}},function(n,e,r){"use strict";n.exports=function(a,i,s){var t=s===void 0;switch(i.length){case 0:return t?a():a.call(s);case 1:return t?a(i[0]):a.call(s,i[0]);case 2:return t?a(i[0],i[1]):a.call(s,i[0],i[1]);case 3:return t?a(i[0],i[1],i[2]):a.call(s,i[0],i[1],i[2]);case 4:return t?a(i[0],i[1],i[2],i[3]):a.call(s,i[0],i[1],i[2],i[3])}return a.apply(s,i)}},function(n,e,r){"use strict";var a=r(1),i=r(68).set,s=a.MutationObserver||a.WebKitMutationObserver,t=a.process,o=a.Promise,l=r(25)(t)=="process";n.exports=function(){var d,c,y,u=function(){var D,k;for(l&&(D=t.domain)&&D.exit();d;){k=d.fn,d=d.next;try{k()}catch(T){throw d?y():c=void 0,T}}c=void 0,D&&D.enter()};if(l)y=function(){t.nextTick(u)};else if(s&&!(a.navigator&&a.navigator.standalone)){var S=!0,V=document.createTextNode("");new s(u).observe(V,{characterData:!0}),y=function(){V.data=S=!S}}else if(o&&o.resolve){var U=o.resolve(void 0);y=function(){U.then(u)}}else y=function(){i.call(a,u)};return function(z){var D={fn:z,next:void 0};c&&(c.next=D),d||(d=D,y()),c=D}}},function(n,e,r){"use strict";var a=r(1),i=a.navigator;n.exports=i&&i.userAgent||""},function(n,e,r){"use strict";var a=r(7),i=r(6),s=r(1),t=r(43),o=r(70);a(a.P+a.R,"Promise",{finally:function(d){var c=t(this,i.Promise||s.Promise),y=typeof d=="function";return this.then(y?function(u){return o(c,d()).then(function(){return u})}:d,y?function(u){return o(c,d()).then(function(){throw u})}:d)}})},function(n,e,r){"use strict";var a=r(7),i=r(45),s=r(69);a(a.S,"Promise",{try:function(o){var l=i.f(this),d=s(o);return(d.e?l.reject:l.resolve)(d.v),l.promise}})},function(n,e,r){"use strict";r(66),r(67),r(114),r(121),r(123),n.exports=r(6).WeakMap},function(n,e,r){"use strict";var a=r(42)(0),i=r(16),s=r(46),t=r(115),o=r(117),l=r(3),d=r(11),c=r(71),y="WeakMap",u=s.getWeak,S=Object.isExtensible,V=o.ufstore,U={},z,D=function(g){return function(){return g(this,arguments.length>0?arguments[0]:void 0)}},k={get:function(g){if(l(g)){var m=u(g);return m===!0?V(c(this,y)).get(g):m?m[this._i]:void 0}},set:function(g,m){return o.def(c(this,y),g,m)}},T=n.exports=r(118)(y,D,k,o,!0,!0);d(function(){return new T().set((Object.freeze||Object)(U),7).get(U)!=7})&&(z=o.getConstructor(D,y),t(z.prototype,k),s.NEED=!0,a(["delete","has","get","set"],function(R){var g=T.prototype,m=g[R];i(g,R,function(v,b){if(l(v)&&!S(v)){this._f||(this._f=new z);var f=this._f[R](v,b);return R=="set"?this:f}return m.call(this,v,b)})}))},function(n,e,r){"use strict";var a=r(41),i=r(116),s=r(65),t=r(19),o=r(37),l=Object.assign;n.exports=!l||r(11)(function(){var d={},c={},y=Symbol(),u="abcdefghijklmnopqrst";return d[y]=7,u.split("").forEach(function(S){c[S]=S}),l({},d)[y]!=7||Object.keys(l({},c)).join("")!=u})?function(c,y){for(var u=t(c),S=arguments.length,V=1,U=i.f,z=s.f;S>V;)for(var D=o(arguments[V++]),k=U?a(D).concat(U(D)):a(D),T=k.length,R=0,g;T>R;)z.call(D,g=k[R++])&&(u[g]=D[g]);return u}:l},function(n,e,r){"use strict";e.f=Object.getOwnPropertySymbols},function(n,e,r){"use strict";var a=r(23),i=r(46).getWeak,s=r(9),t=r(3),o=r(24),l=r(33),d=r(42),c=r(12),y=r(71),u=d(5),S=d(6),V=0,U=function(T){return T._l||(T._l=new z)},z=function(){this.a=[]},D=function(T,R){return u(T.a,function(g){return g[0]===R})};z.prototype={get:function(T){var R=D(this,T);if(R)return R[1]},has:function(T){return!!D(this,T)},set:function(T,R){var g=D(this,T);g?g[1]=R:this.a.push([T,R])},delete:function(T){var R=S(this.a,function(g){return g[0]===T});return~R&&this.a.splice(R,1),!!~R}},n.exports={getConstructor:function(T,R,g,m){var v=T(function(b,f){o(b,v,R,"_i"),b._t=R,b._i=V++,b._l=void 0,f!=null&&l(f,g,b[m],b)});return a(v.prototype,{delete:function(f){if(!t(f))return!1;var p=i(f);return p===!0?U(y(this,R)).delete(f):p&&c(p,this._i)&&delete p[this._i]},has:function(f){if(!t(f))return!1;var p=i(f);return p===!0?U(y(this,R)).has(f):p&&c(p,this._i)}}),v},def:function(T,R,g){var m=i(s(R),!0);return m===!0?U(T).set(R,g):m[T._i]=g,T},ufstore:U}},function(n,e,r){"use strict";var a=r(1),i=r(7),s=r(16),t=r(23),o=r(46),l=r(33),d=r(24),c=r(3),y=r(11),u=r(44),S=r(26),V=r(119);n.exports=function(U,z,D,k,T,R){var g=a[U],m=g,v=T?"set":"add",b=m&&m.prototype,f={},p=function(N){var L=b[N];s(b,N,N=="delete"?function(P){return R&&!c(P)?!1:L.call(this,P===0?0:P)}:N=="has"?function(O){return R&&!c(O)?!1:L.call(this,O===0?0:O)}:N=="get"?function(O){return R&&!c(O)?void 0:L.call(this,O===0?0:O)}:N=="add"?function(O){return L.call(this,O===0?0:O),this}:function(O,E){return L.call(this,O===0?0:O,E),this})};if(typeof m!="function"||!(R||b.forEach&&!y(function(){new m().entries().next()})))m=k.getConstructor(z,U,T,v),t(m.prototype,D),o.NEED=!0;else{var h=new m,_=h[v](R?{}:-0,1)!=h,I=y(function(){h.has(1)}),W=u(function(B){new m(B)}),q=!R&&y(function(){for(var B=new m,N=5;N--;)B[v](N,N);return!B.has(-0)});W||(m=z(function(B,N){d(B,m,U);var L=V(new g,B,m);return N!=null&&l(N,T,L[v],L),L}),m.prototype=b,b.constructor=m),(I||q)&&(p("delete"),p("has"),T&&p("get")),(q||_)&&p(v),R&&b.clear&&delete b.clear}return S(m,U),f[U]=m,i(i.G+i.W+i.F*(m!=g),f),R||k.setStrong(m,U,T),m}},function(n,e,r){"use strict";var a=r(3),i=r(120).set;n.exports=function(s,t,o){var l=t.constructor,d;return l!==o&&typeof l=="function"&&(d=l.prototype)!==o.prototype&&a(d)&&i&&i(s,d),s}},function(n,e,r){"use strict";var a=r(3),i=r(9),s=function(o,l){if(i(o),!a(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,o,l){try{l=r(13)(Function.call,r(64).f(Object.prototype,"__proto__").set,2),l(t,[]),o=!(t instanceof Array)}catch{o=!0}return function(c,y){return s(c,y),o?c.__proto__=y:l(c,y),c}}({},!1):void 0),check:s}},function(n,e,r){"use strict";r(122)("WeakMap")},function(n,e,r){"use strict";var a=r(7);n.exports=function(i){a(a.S,i,{of:function(){for(var t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return new this(o)}})}},function(n,e,r){"use strict";r(124)("WeakMap")},function(n,e,r){"use strict";var a=r(7),i=r(22),s=r(13),t=r(33);n.exports=function(o){a(a.S,o,{from:function(d){var c=arguments[1],y,u,S,V;return i(this),y=c!==void 0,y&&i(c),d==null?new this:(u=[],y?(S=0,V=s(c,arguments[2],2),t(d,!1,function(U){u.push(V(U,S++))})):t(d,!1,u.push,u),new this(u))}})}},function(n,e,r){"use strict";var a=!1;if(typeof ReadableStream<"u")try{new ReadableStream({start:function(s){s.close()}}),a=!0}catch{}a?e.ReadableStream=ReadableStream:e.ReadableStream=r(126).ReadableStream},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};(function(i,s){for(var t in s)i[t]=s[t]})(e,function(i){var s={};function t(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return i[o].call(l.exports,l,l.exports,t),l.l=!0,l.exports}return t.m=i,t.c=s,t.i=function(o){return o},t.d=function(o,l,d){t.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:d})},t.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(l,"a",l),l},t.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},t.p="",t(t.s=7)}([function(i,s,t){"use strict";var o=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return typeof u>"u"?"undefined":a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u>"u"?"undefined":a(u)},l=t(1),d=l.assert;function c(u){return typeof u=="string"||(typeof u>"u"?"undefined":o(u))==="symbol"}s.typeIsObject=function(u){return(typeof u>"u"?"undefined":o(u))==="object"&&u!==null||typeof u=="function"},s.createDataProperty=function(u,S,V){d(s.typeIsObject(u)),Object.defineProperty(u,S,{value:V,writable:!0,enumerable:!0,configurable:!0})},s.createArrayFromList=function(u){return u.slice()},s.ArrayBufferCopy=function(u,S,V,U,z){new Uint8Array(u).set(new Uint8Array(V,U,z),S)},s.CreateIterResultObject=function(u,S){d(typeof S=="boolean");var V={};return Object.defineProperty(V,"value",{value:u,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(V,"done",{value:S,enumerable:!0,writable:!0,configurable:!0}),V},s.IsFiniteNonNegativeNumber=function(u){return!(Number.isNaN(u)||u===1/0||u<0)};function y(u,S,V){if(typeof u!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(u,S,V)}s.InvokeOrNoop=function(u,S,V){d(u!==void 0),d(c(S)),d(Array.isArray(V));var U=u[S];if(U!==void 0)return y(U,u,V)},s.PromiseInvokeOrNoop=function(u,S,V){d(u!==void 0),d(c(S)),d(Array.isArray(V));try{return Promise.resolve(s.InvokeOrNoop(u,S,V))}catch(U){return Promise.reject(U)}},s.PromiseInvokeOrPerformFallback=function(u,S,V,U,z){d(u!==void 0),d(c(S)),d(Array.isArray(V)),d(Array.isArray(z));var D=void 0;try{D=u[S]}catch(k){return Promise.reject(k)}if(D===void 0)return U.apply(null,z);try{return Promise.resolve(y(D,u,V))}catch(k){return Promise.reject(k)}},s.TransferArrayBuffer=function(u){return u.slice()},s.ValidateAndNormalizeHighWaterMark=function(u){if(u=Number(u),Number.isNaN(u)||u<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return u},s.ValidateAndNormalizeQueuingStrategy=function(u,S){if(u!==void 0&&typeof u!="function")throw new TypeError("size property of a queuing strategy must be a function");return S=s.ValidateAndNormalizeHighWaterMark(S),{size:u,highWaterMark:S}}},function(i,s,t){"use strict";function o(c){c&&c.constructor===l&&setTimeout(function(){throw c},0)}function l(c){this.name="AssertionError",this.message=c||"",this.stack=new Error().stack}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l;function d(c,y){if(!c)throw new l(y)}i.exports={rethrowAssertionErrorRejection:o,AssertionError:l,assert:d}},function(i,s,t){"use strict";var o=function(){function Q(ve,K){for(var re=0;re<K.length;re++){var me=K[re];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(ve,me.key,me)}}return function(ve,K,re){return K&&Q(ve.prototype,K),re&&Q(ve,re),ve}}();function l(Q,ve){if(!(Q instanceof ve))throw new TypeError("Cannot call a class as a function")}var d=t(0),c=d.InvokeOrNoop,y=d.PromiseInvokeOrNoop,u=d.ValidateAndNormalizeQueuingStrategy,S=d.typeIsObject,V=t(1),U=V.assert,z=V.rethrowAssertionErrorRejection,D=t(3),k=D.DequeueValue,T=D.EnqueueValueWithSize,R=D.PeekQueueValue,g=D.ResetQueue,m=function(){function Q(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=K.size,me=K.highWaterMark,xe=me===void 0?1:me;l(this,Q),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var _e=ve.type;if(_e!==void 0)throw new RangeError("Invalid type is specified");this._writableStreamController=new ae(this,ve,re,xe),this._writableStreamController.__startSteps()}return o(Q,[{key:"abort",value:function(K){return b(this)===!1?Promise.reject(Ee("abort")):f(this)===!0?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):p(this,K)}},{key:"getWriter",value:function(){if(b(this)===!1)throw Ee("getWriter");return v(this)}},{key:"locked",get:function(){if(b(this)===!1)throw Ee("locked");return f(this)}}]),Q}();i.exports={AcquireWritableStreamDefaultWriter:v,IsWritableStream:b,IsWritableStreamLocked:f,WritableStream:m,WritableStreamAbort:p,WritableStreamDefaultControllerError:Ae,WritableStreamDefaultWriterCloseWithErrorPropagation:$,WritableStreamDefaultWriterRelease:Y,WritableStreamDefaultWriterWrite:ee,WritableStreamCloseQueuedOrInFlight:P};function v(Q){return new j(Q)}function b(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_writableStreamController"))}function f(Q){return U(b(Q)===!0,"IsWritableStreamLocked should only be used on known writable streams"),Q._writer!==void 0}function p(Q,ve){var K=Q._state;if(K==="closed")return Promise.resolve(void 0);if(K==="errored")return Promise.reject(Q._storedError);var re=new TypeError("Requested to abort");if(Q._pendingAbortRequest!==void 0)return Promise.reject(re);U(K==="writable"||K==="erroring","state must be writable or erroring");var me=!1;K==="erroring"&&(me=!0,ve=void 0);var xe=new Promise(function(_e,ge){Q._pendingAbortRequest={_resolve:_e,_reject:ge,_reason:ve,_wasAlreadyErroring:me}});return me===!1&&I(Q,re),xe}function h(Q){U(f(Q)===!0),U(Q._state==="writable");var ve=new Promise(function(K,re){var me={_resolve:K,_reject:re};Q._writeRequests.push(me)});return ve}function _(Q,ve){var K=Q._state;if(K==="writable"){I(Q,ve);return}U(K==="erroring"),W(Q)}function I(Q,ve){U(Q._storedError===void 0,"stream._storedError === undefined"),U(Q._state==="writable","state must be writable");var K=Q._writableStreamController;U(K!==void 0,"controller must not be undefined"),Q._state="erroring",Q._storedError=ve;var re=Q._writer;re!==void 0&&Z(re,ve),O(Q)===!1&&K._started===!0&&W(Q)}function W(Q){U(Q._state==="erroring","stream._state === erroring"),U(O(Q)===!1,"WritableStreamHasOperationMarkedInFlight(stream) === false"),Q._state="errored",Q._writableStreamController.__errorSteps();for(var ve=Q._storedError,K=0;K<Q._writeRequests.length;K++){var re=Q._writeRequests[K];re._reject(ve)}if(Q._writeRequests=[],Q._pendingAbortRequest===void 0){A(Q);return}var me=Q._pendingAbortRequest;if(Q._pendingAbortRequest=void 0,me._wasAlreadyErroring===!0){me._reject(ve),A(Q);return}var xe=Q._writableStreamController.__abortSteps(me._reason);xe.then(function(){me._resolve(),A(Q)},function(_e){me._reject(_e),A(Q)})}function q(Q){U(Q._inFlightWriteRequest!==void 0),Q._inFlightWriteRequest._resolve(void 0),Q._inFlightWriteRequest=void 0}function B(Q,ve){U(Q._inFlightWriteRequest!==void 0),Q._inFlightWriteRequest._reject(ve),Q._inFlightWriteRequest=void 0,U(Q._state==="writable"||Q._state==="erroring"),_(Q,ve)}function N(Q){U(Q._inFlightCloseRequest!==void 0),Q._inFlightCloseRequest._resolve(void 0),Q._inFlightCloseRequest=void 0;var ve=Q._state;U(ve==="writable"||ve==="erroring"),ve==="erroring"&&(Q._storedError=void 0,Q._pendingAbortRequest!==void 0&&(Q._pendingAbortRequest._resolve(),Q._pendingAbortRequest=void 0)),Q._state="closed";var K=Q._writer;K!==void 0&&ot(K),U(Q._pendingAbortRequest===void 0,"stream._pendingAbortRequest === undefined"),U(Q._storedError===void 0,"stream._storedError === undefined")}function L(Q,ve){U(Q._inFlightCloseRequest!==void 0),Q._inFlightCloseRequest._reject(ve),Q._inFlightCloseRequest=void 0,U(Q._state==="writable"||Q._state==="erroring"),Q._pendingAbortRequest!==void 0&&(Q._pendingAbortRequest._reject(ve),Q._pendingAbortRequest=void 0),_(Q,ve)}function P(Q){return!(Q._closeRequest===void 0&&Q._inFlightCloseRequest===void 0)}function O(Q){return!(Q._inFlightWriteRequest===void 0&&Q._inFlightCloseRequest===void 0)}function E(Q){U(Q._inFlightCloseRequest===void 0),U(Q._closeRequest!==void 0),Q._inFlightCloseRequest=Q._closeRequest,Q._closeRequest=void 0}function w(Q){U(Q._inFlightWriteRequest===void 0,"there must be no pending write request"),U(Q._writeRequests.length!==0,"writeRequests must not be empty"),Q._inFlightWriteRequest=Q._writeRequests.shift()}function A(Q){U(Q._state==="errored",'_stream_.[[state]] is `"errored"`'),Q._closeRequest!==void 0&&(U(Q._inFlightCloseRequest===void 0),Q._closeRequest._reject(Q._storedError),Q._closeRequest=void 0);var ve=Q._writer;ve!==void 0&&(Ke(ve,Q._storedError),ve._closedPromise.catch(function(){}))}function M(Q,ve){U(Q._state==="writable"),U(P(Q)===!1);var K=Q._writer;K!==void 0&&ve!==Q._backpressure&&(ve===!0?Be(K):(U(ve===!1),At(K))),Q._backpressure=ve}var j=function(){function Q(ve){if(l(this,Q),b(ve)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(f(ve)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=ve,ve._writer=this;var K=ve._state;if(K==="writable")P(ve)===!1&&ve._backpressure===!0?et(this):ht(this),Pe(this);else if(K==="erroring")ct(this,ve._storedError),this._readyPromise.catch(function(){}),Pe(this);else if(K==="closed")ht(this),$e(this);else{U(K==="errored","state must be errored");var re=ve._storedError;ct(this,re),this._readyPromise.catch(function(){}),Ie(this,re),this._closedPromise.catch(function(){})}}return o(Q,[{key:"abort",value:function(K){return C(this)===!1?Promise.reject(ke("abort")):this._ownerWritableStream===void 0?Promise.reject(Fe("abort")):x(this,K)}},{key:"close",value:function(){if(C(this)===!1)return Promise.reject(ke("close"));var K=this._ownerWritableStream;return K===void 0?Promise.reject(Fe("close")):P(K)===!0?Promise.reject(new TypeError("cannot close an already-closing stream")):F(this)}},{key:"releaseLock",value:function(){if(C(this)===!1)throw ke("releaseLock");var K=this._ownerWritableStream;K!==void 0&&(U(K._writer!==void 0),Y(this))}},{key:"write",value:function(K){return C(this)===!1?Promise.reject(ke("write")):this._ownerWritableStream===void 0?Promise.reject(Fe("write to")):ee(this,K)}},{key:"closed",get:function(){return C(this)===!1?Promise.reject(ke("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(C(this)===!1)throw ke("desiredSize");if(this._ownerWritableStream===void 0)throw Fe("desiredSize");return J(this)}},{key:"ready",get:function(){return C(this)===!1?Promise.reject(ke("ready")):this._readyPromise}}]),Q}();function C(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_ownerWritableStream"))}function x(Q,ve){var K=Q._ownerWritableStream;return U(K!==void 0),p(K,ve)}function F(Q){var ve=Q._ownerWritableStream;U(ve!==void 0);var K=ve._state;if(K==="closed"||K==="errored")return Promise.reject(new TypeError("The stream (in "+K+" state) is not in the writable state and cannot be closed"));U(K==="writable"||K==="erroring"),U(P(ve)===!1);var re=new Promise(function(me,xe){var _e={_resolve:me,_reject:xe};ve._closeRequest=_e});return ve._backpressure===!0&&K==="writable"&&At(Q),pe(ve._writableStreamController),re}function $(Q){var ve=Q._ownerWritableStream;U(ve!==void 0);var K=ve._state;return P(ve)===!0||K==="closed"?Promise.resolve():K==="errored"?Promise.reject(ve._storedError):(U(K==="writable"||K==="erroring"),F(Q))}function G(Q,ve){Q._closedPromiseState==="pending"?Ke(Q,ve):Ze(Q,ve),Q._closedPromise.catch(function(){})}function Z(Q,ve){Q._readyPromiseState==="pending"?Ge(Q,ve):wt(Q,ve),Q._readyPromise.catch(function(){})}function J(Q){var ve=Q._ownerWritableStream,K=ve._state;return K==="errored"||K==="erroring"?null:K==="closed"?0:ue(ve._writableStreamController)}function Y(Q){var ve=Q._ownerWritableStream;U(ve!==void 0),U(ve._writer===Q);var K=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Z(Q,K),G(Q,K),ve._writer=void 0,Q._ownerWritableStream=void 0}function ee(Q,ve){var K=Q._ownerWritableStream;U(K!==void 0);var re=K._writableStreamController,me=se(re,ve);if(K!==Q._ownerWritableStream)return Promise.reject(Fe("write to"));var xe=K._state;if(xe==="errored")return Promise.reject(K._storedError);if(P(K)===!0||xe==="closed")return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if(xe==="erroring")return Promise.reject(K._storedError);U(xe==="writable");var _e=h(K);return le(re,ve,me),_e}var ae=function(){function Q(ve,K,re,me){if(l(this,Q),b(ve)===!1)throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(ve._writableStreamController!==void 0)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=ve,this._underlyingSink=K,this._queue=void 0,this._queueTotalSize=void 0,g(this),this._started=!1;var xe=u(re,me);this._strategySize=xe.size,this._strategyHWM=xe.highWaterMark;var _e=Ce(this);M(ve,_e)}return o(Q,[{key:"error",value:function(K){if(ie(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var re=this._controlledWritableStream._state;re==="writable"&&Ae(this,K)}},{key:"__abortSteps",value:function(K){return y(this._underlyingSink,"abort",[K])}},{key:"__errorSteps",value:function(){g(this)}},{key:"__startSteps",value:function(){var K=this,re=c(this._underlyingSink,"start",[this]),me=this._controlledWritableStream;Promise.resolve(re).then(function(){U(me._state==="writable"||me._state==="erroring"),K._started=!0,de(K)},function(xe){U(me._state==="writable"||me._state==="erroring"),K._started=!0,_(me,xe)}).catch(z)}}]),Q}();function pe(Q){T(Q,"close",0),de(Q)}function se(Q,ve){var K=Q._strategySize;if(K===void 0)return 1;try{return K(ve)}catch(re){return fe(Q,re),1}}function ue(Q){return Q._strategyHWM-Q._queueTotalSize}function le(Q,ve,K){var re={chunk:ve};try{T(Q,re,K)}catch(_e){fe(Q,_e);return}var me=Q._controlledWritableStream;if(P(me)===!1&&me._state==="writable"){var xe=Ce(Q);M(me,xe)}de(Q)}function ie(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_underlyingSink"))}function de(Q){var ve=Q._controlledWritableStream;if(Q._started!==!1&&ve._inFlightWriteRequest===void 0){var K=ve._state;if(!(K==="closed"||K==="errored")){if(K==="erroring"){W(ve);return}if(Q._queue.length!==0){var re=R(Q);re==="close"?he(Q):Se(Q,re.chunk)}}}}function fe(Q,ve){Q._controlledWritableStream._state==="writable"&&Ae(Q,ve)}function he(Q){var ve=Q._controlledWritableStream;E(ve),k(Q),U(Q._queue.length===0,"queue must be empty once the final write record is dequeued");var K=y(Q._underlyingSink,"close",[]);K.then(function(){N(ve)},function(re){L(ve,re)}).catch(z)}function Se(Q,ve){var K=Q._controlledWritableStream;w(K);var re=y(Q._underlyingSink,"write",[ve,Q]);re.then(function(){q(K);var me=K._state;if(U(me==="writable"||me==="erroring"),k(Q),P(K)===!1&&me==="writable"){var xe=Ce(Q);M(K,xe)}de(Q)},function(me){B(K,me)}).catch(z)}function Ce(Q){var ve=ue(Q);return ve<=0}function Ae(Q,ve){var K=Q._controlledWritableStream;U(K._state==="writable"),I(K,ve)}function Ee(Q){return new TypeError("WritableStream.prototype."+Q+" can only be used on a WritableStream")}function ke(Q){return new TypeError("WritableStreamDefaultWriter.prototype."+Q+" can only be used on a WritableStreamDefaultWriter")}function Fe(Q){return new TypeError("Cannot "+Q+" a stream using a released writer")}function Pe(Q){Q._closedPromise=new Promise(function(ve,K){Q._closedPromise_resolve=ve,Q._closedPromise_reject=K,Q._closedPromiseState="pending"})}function Ie(Q,ve){Q._closedPromise=Promise.reject(ve),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="rejected"}function $e(Q){Q._closedPromise=Promise.resolve(void 0),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="resolved"}function Ke(Q,ve){U(Q._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),U(Q._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),U(Q._closedPromiseState==="pending","writer._closedPromiseState is pending"),Q._closedPromise_reject(ve),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="rejected"}function Ze(Q,ve){U(Q._closedPromise_resolve===void 0,"writer._closedPromise_resolve === undefined"),U(Q._closedPromise_reject===void 0,"writer._closedPromise_reject === undefined"),U(Q._closedPromiseState!=="pending","writer._closedPromiseState is not pending"),Q._closedPromise=Promise.reject(ve),Q._closedPromiseState="rejected"}function ot(Q){U(Q._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),U(Q._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),U(Q._closedPromiseState==="pending","writer._closedPromiseState is pending"),Q._closedPromise_resolve(void 0),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="resolved"}function et(Q){Q._readyPromise=new Promise(function(ve,K){Q._readyPromise_resolve=ve,Q._readyPromise_reject=K}),Q._readyPromiseState="pending"}function ct(Q,ve){Q._readyPromise=Promise.reject(ve),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="rejected"}function ht(Q){Q._readyPromise=Promise.resolve(void 0),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="fulfilled"}function Ge(Q,ve){U(Q._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),U(Q._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),Q._readyPromise_reject(ve),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="rejected"}function Be(Q){U(Q._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),U(Q._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),Q._readyPromise=new Promise(function(ve,K){Q._readyPromise_resolve=ve,Q._readyPromise_reject=K}),Q._readyPromiseState="pending"}function wt(Q,ve){U(Q._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),U(Q._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),Q._readyPromise=Promise.reject(ve),Q._readyPromiseState="rejected"}function At(Q){U(Q._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),U(Q._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),Q._readyPromise_resolve(void 0),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="fulfilled"}},function(i,s,t){"use strict";var o=t(0),l=o.IsFiniteNonNegativeNumber,d=t(1),c=d.assert;s.DequeueValue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),c(y._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var u=y._queue.shift();return y._queueTotalSize-=u.size,y._queueTotalSize<0&&(y._queueTotalSize=0),u.value},s.EnqueueValueWithSize=function(y,u,S){if(c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),S=Number(S),!l(S))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");y._queue.push({value:u,size:S}),y._queueTotalSize+=S},s.PeekQueueValue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),c(y._queue.length>0,"Spec-level failure: should never peek at an empty queue.");var u=y._queue[0];return u.value},s.ResetQueue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),y._queue=[],y._queueTotalSize=0}},function(i,s,t){"use strict";var o=function(){function H(ne,oe){for(var we=0;we<oe.length;we++){var Re=oe[we];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(ne,Re.key,Re)}}return function(ne,oe,we){return oe&&H(ne.prototype,oe),we&&H(ne,we),ne}}();function l(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}var d=t(0),c=d.ArrayBufferCopy,y=d.CreateIterResultObject,u=d.IsFiniteNonNegativeNumber,S=d.InvokeOrNoop,V=d.PromiseInvokeOrNoop,U=d.TransferArrayBuffer,z=d.ValidateAndNormalizeQueuingStrategy,D=d.ValidateAndNormalizeHighWaterMark,k=t(0),T=k.createArrayFromList,R=k.createDataProperty,g=k.typeIsObject,m=t(1),v=m.assert,b=m.rethrowAssertionErrorRejection,f=t(3),p=f.DequeueValue,h=f.EnqueueValueWithSize,_=f.ResetQueue,I=t(2),W=I.AcquireWritableStreamDefaultWriter,q=I.IsWritableStream,B=I.IsWritableStreamLocked,N=I.WritableStreamAbort,L=I.WritableStreamDefaultWriterCloseWithErrorPropagation,P=I.WritableStreamDefaultWriterRelease,O=I.WritableStreamDefaultWriterWrite,E=I.WritableStreamCloseQueuedOrInFlight,w=function(){function H(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=oe.size,Re=oe.highWaterMark;l(this,H),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var Oe=ne.type,ze=String(Oe);if(ze==="bytes")Re===void 0&&(Re=0),this._readableStreamController=new At(this,ne,Re);else if(Oe===void 0)Re===void 0&&(Re=1),this._readableStreamController=new $e(this,ne,we,Re);else throw new RangeError("Invalid type is specified")}return o(H,[{key:"cancel",value:function(oe){return j(this)===!1?Promise.reject(De("cancel")):x(this)===!0?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):ee(this,oe)}},{key:"getReader",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=oe.mode;if(j(this)===!1)throw De("getReader");if(we===void 0)return M(this);if(we=String(we),we==="byob")return A(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(oe,we){var Re=oe.writable,Oe=oe.readable,ze=this.pipeTo(Re,we);return st(ze),Oe}},{key:"pipeTo",value:function(oe){var we=this,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oe=Re.preventClose,ze=Re.preventAbort,We=Re.preventCancel;if(j(this)===!1)return Promise.reject(De("pipeTo"));if(q(oe)===!1)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(Oe=!!Oe,ze=!!ze,We=!!We,x(this)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(B(oe)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var at=M(this),dt=W(oe),Dt=!1,bt=Promise.resolve();return new Promise(function(qt,Pr){function Ut(){return bt=Promise.resolve(),Dt===!0?Promise.resolve():dt._readyPromise.then(function(){return Ie(at).then(function(It){var Tr=It.value,ua=It.done;ua!==!0&&(bt=O(dt,Tr).catch(function(){}))})}).then(Ut)}if(Yt(we,at._closedPromise,function(It){ze===!1?ir(function(){return N(oe,It)},!0,It):ma(!0,It)}),Yt(oe,dt._closedPromise,function(It){We===!1?ir(function(){return ee(we,It)},!0,It):ma(!0,It)}),aa(we,at._closedPromise,function(){Oe===!1?ir(function(){return L(dt)}):ma()}),E(oe)===!0||oe._state==="closed"){var Vt=new TypeError("the destination writable stream closed before all data could be piped to it");We===!1?ir(function(){return ee(we,Vt)},!0,Vt):ma(!0,Vt)}Ut().catch(function(It){bt=Promise.resolve(),b(It)});function Br(){var It=bt;return bt.then(function(){return It!==bt?Br():void 0})}function Yt(It,Tr,ua){It._state==="errored"?ua(It._storedError):Tr.catch(ua).catch(b)}function aa(It,Tr,ua){It._state==="closed"?ua():Tr.then(ua).catch(b)}function ir(It,Tr,ua){if(Dt===!0)return;Dt=!0,oe._state==="writable"&&E(oe)===!1?Br().then(xa):xa();function xa(){It().then(function(){return on(Tr,ua)},function(Ca){return on(!0,Ca)}).catch(b)}}function ma(It,Tr){Dt!==!0&&(Dt=!0,oe._state==="writable"&&E(oe)===!1?Br().then(function(){return on(It,Tr)}).catch(b):on(It,Tr))}function on(It,Tr){P(dt),Fe(at),It?Pr(Tr):qt(void 0)}})}},{key:"tee",value:function(){if(j(this)===!1)throw De("tee");var oe=F(this,!1);return T(oe)}},{key:"locked",get:function(){if(j(this)===!1)throw De("locked");return x(this)}}]),H}();i.exports={ReadableStream:w,IsReadableStreamDisturbed:C,ReadableStreamDefaultControllerClose:et,ReadableStreamDefaultControllerEnqueue:ct,ReadableStreamDefaultControllerError:ht,ReadableStreamDefaultControllerGetDesiredSize:Be};function A(H){return new Se(H)}function M(H){return new he(H)}function j(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readableStreamController"))}function C(H){return v(j(H)===!0,"IsReadableStreamDisturbed should only be used on known readable streams"),H._disturbed}function x(H){return v(j(H)===!0,"IsReadableStreamLocked should only be used on known readable streams"),H._reader!==void 0}function F(H,ne){v(j(H)===!0),v(typeof ne=="boolean");var oe=M(H),we={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};we.promise=new Promise(function(bt){we._resolve=bt});var Re=$();Re._reader=oe,Re._teeState=we,Re._cloneForBranch2=ne;var Oe=G();Oe._stream=H,Oe._teeState=we;var ze=Z();ze._stream=H,ze._teeState=we;var We=Object.create(Object.prototype);R(We,"pull",Re),R(We,"cancel",Oe);var at=new w(We),dt=Object.create(Object.prototype);R(dt,"pull",Re),R(dt,"cancel",ze);var Dt=new w(dt);return Re._branch1=at._readableStreamController,Re._branch2=Dt._readableStreamController,oe._closedPromise.catch(function(bt){we.closedOrErrored!==!0&&(ht(Re._branch1,bt),ht(Re._branch2,bt),we.closedOrErrored=!0)}),[at,Dt]}function $(){function H(){var ne=H._reader,oe=H._branch1,we=H._branch2,Re=H._teeState;return Ie(ne).then(function(Oe){v(g(Oe));var ze=Oe.value,We=Oe.done;if(v(typeof We=="boolean"),We===!0&&Re.closedOrErrored===!1&&(Re.canceled1===!1&&et(oe),Re.canceled2===!1&&et(we),Re.closedOrErrored=!0),Re.closedOrErrored!==!0){var at=ze,dt=ze;Re.canceled1===!1&&ct(oe,at),Re.canceled2===!1&&ct(we,dt)}})}return H}function G(){function H(ne){var oe=H._stream,we=H._teeState;if(we.canceled1=!0,we.reason1=ne,we.canceled2===!0){var Re=T([we.reason1,we.reason2]),Oe=ee(oe,Re);we._resolve(Oe)}return we.promise}return H}function Z(){function H(ne){var oe=H._stream,we=H._teeState;if(we.canceled2=!0,we.reason2=ne,we.canceled1===!0){var Re=T([we.reason1,we.reason2]),Oe=ee(oe,Re);we._resolve(Oe)}return we.promise}return H}function J(H){v(Ce(H._reader)===!0),v(H._state==="readable"||H._state==="closed");var ne=new Promise(function(oe,we){var Re={_resolve:oe,_reject:we};H._reader._readIntoRequests.push(Re)});return ne}function Y(H){v(Ae(H._reader)===!0),v(H._state==="readable");var ne=new Promise(function(oe,we){var Re={_resolve:oe,_reject:we};H._reader._readRequests.push(Re)});return ne}function ee(H,ne){if(H._disturbed=!0,H._state==="closed")return Promise.resolve(void 0);if(H._state==="errored")return Promise.reject(H._storedError);ae(H);var oe=H._readableStreamController.__cancelSteps(ne);return oe.then(function(){})}function ae(H){v(H._state==="readable"),H._state="closed";var ne=H._reader;if(ne!==void 0){if(Ae(ne)===!0){for(var oe=0;oe<ne._readRequests.length;oe++){var we=ne._readRequests[oe]._resolve;we(y(void 0,!0))}ne._readRequests=[]}ja(ne)}}function pe(H,ne){v(j(H)===!0,"stream must be ReadableStream"),v(H._state==="readable","state must be readable"),H._state="errored",H._storedError=ne;var oe=H._reader;if(oe!==void 0){if(Ae(oe)===!0){for(var we=0;we<oe._readRequests.length;we++){var Re=oe._readRequests[we];Re._reject(ne)}oe._readRequests=[]}else{v(Ce(oe),"reader must be ReadableStreamBYOBReader");for(var Oe=0;Oe<oe._readIntoRequests.length;Oe++){var ze=oe._readIntoRequests[Oe];ze._reject(ne)}oe._readIntoRequests=[]}rt(oe,ne),oe._closedPromise.catch(function(){})}}function se(H,ne,oe){var we=H._reader;v(we._readIntoRequests.length>0);var Re=we._readIntoRequests.shift();Re._resolve(y(ne,oe))}function ue(H,ne,oe){var we=H._reader;v(we._readRequests.length>0);var Re=we._readRequests.shift();Re._resolve(y(ne,oe))}function le(H){return H._reader._readIntoRequests.length}function ie(H){return H._reader._readRequests.length}function de(H){var ne=H._reader;return!(ne===void 0||Ce(ne)===!1)}function fe(H){var ne=H._reader;return!(ne===void 0||Ae(ne)===!1)}var he=function(){function H(ne){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(x(ne)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ee(this,ne),this._readRequests=[]}return o(H,[{key:"cancel",value:function(oe){return Ae(this)===!1?Promise.reject(tt("cancel")):this._ownerReadableStream===void 0?Promise.reject(He("cancel")):ke(this,oe)}},{key:"read",value:function(){return Ae(this)===!1?Promise.reject(tt("read")):this._ownerReadableStream===void 0?Promise.reject(He("read from")):Ie(this)}},{key:"releaseLock",value:function(){if(Ae(this)===!1)throw tt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Fe(this)}}},{key:"closed",get:function(){return Ae(this)===!1?Promise.reject(tt("closed")):this._closedPromise}}]),H}(),Se=function(){function H(ne){if(l(this,H),!j(ne))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(Q(ne._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(x(ne))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ee(this,ne),this._readIntoRequests=[]}return o(H,[{key:"cancel",value:function(oe){return Ce(this)?this._ownerReadableStream===void 0?Promise.reject(He("cancel")):ke(this,oe):Promise.reject(_a("cancel"))}},{key:"read",value:function(oe){return Ce(this)?this._ownerReadableStream===void 0?Promise.reject(He("read from")):ArrayBuffer.isView(oe)?oe.byteLength===0?Promise.reject(new TypeError("view must have non-zero byteLength")):Pe(this,oe):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(_a("read"))}},{key:"releaseLock",value:function(){if(!Ce(this))throw _a("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Fe(this)}}},{key:"closed",get:function(){return Ce(this)?this._closedPromise:Promise.reject(_a("closed"))}}]),H}();function Ce(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readIntoRequests"))}function Ae(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readRequests"))}function Ee(H,ne){H._ownerReadableStream=ne,ne._reader=H,ne._state==="readable"?xt(H):ne._state==="closed"?Rr(H):(v(ne._state==="errored","state must be errored"),lr(H,ne._storedError),H._closedPromise.catch(function(){}))}function ke(H,ne){var oe=H._ownerReadableStream;return v(oe!==void 0),ee(oe,ne)}function Fe(H){v(H._ownerReadableStream!==void 0),v(H._ownerReadableStream._reader===H),H._ownerReadableStream._state==="readable"?rt(H,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):jr(H,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),H._closedPromise.catch(function(){}),H._ownerReadableStream._reader=void 0,H._ownerReadableStream=void 0}function Pe(H,ne){var oe=H._ownerReadableStream;return v(oe!==void 0),oe._disturbed=!0,oe._state==="errored"?Promise.reject(oe._storedError):Xe(oe._readableStreamController,ne)}function Ie(H){var ne=H._ownerReadableStream;return v(ne!==void 0),ne._disturbed=!0,ne._state==="closed"?Promise.resolve(y(void 0,!0)):ne._state==="errored"?Promise.reject(ne._storedError):(v(ne._state==="readable"),ne._readableStreamController.__pullSteps())}var $e=function(){function H(ne,oe,we,Re){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(ne._readableStreamController!==void 0)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=ne,this._underlyingSource=oe,this._queue=void 0,this._queueTotalSize=void 0,_(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var Oe=z(we,Re);this._strategySize=Oe.size,this._strategyHWM=Oe.highWaterMark;var ze=this,We=S(oe,"start",[this]);Promise.resolve(We).then(function(){ze._started=!0,v(ze._pulling===!1),v(ze._pullAgain===!1),Ze(ze)},function(at){Ge(ze,at)}).catch(b)}return o(H,[{key:"close",value:function(){if(Ke(this)===!1)throw fa("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var oe=this._controlledReadableStream._state;if(oe!=="readable")throw new TypeError("The stream (in "+oe+" state) is not in the readable state and cannot be closed");et(this)}},{key:"enqueue",value:function(oe){if(Ke(this)===!1)throw fa("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var we=this._controlledReadableStream._state;if(we!=="readable")throw new TypeError("The stream (in "+we+" state) is not in the readable state and cannot be enqueued to");return ct(this,oe)}},{key:"error",value:function(oe){if(Ke(this)===!1)throw fa("error");var we=this._controlledReadableStream;if(we._state!=="readable")throw new TypeError("The stream is "+we._state+" and so cannot be errored");ht(this,oe)}},{key:"__cancelSteps",value:function(oe){return _(this),V(this._underlyingSource,"cancel",[oe])}},{key:"__pullSteps",value:function(){var oe=this._controlledReadableStream;if(this._queue.length>0){var we=p(this);return this._closeRequested===!0&&this._queue.length===0?ae(oe):Ze(this),Promise.resolve(y(we,!1))}var Re=Y(oe);return Ze(this),Re}},{key:"desiredSize",get:function(){if(Ke(this)===!1)throw fa("desiredSize");return Be(this)}}]),H}();function Ke(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_underlyingSource"))}function Ze(H){var ne=ot(H);if(ne!==!1){if(H._pulling===!0){H._pullAgain=!0;return}v(H._pullAgain===!1),H._pulling=!0;var oe=V(H._underlyingSource,"pull",[H]);oe.then(function(){if(H._pulling=!1,H._pullAgain===!0)return H._pullAgain=!1,Ze(H)},function(we){Ge(H,we)}).catch(b)}}function ot(H){var ne=H._controlledReadableStream;if(ne._state==="closed"||ne._state==="errored"||H._closeRequested===!0||H._started===!1)return!1;if(x(ne)===!0&&ie(ne)>0)return!0;var oe=Be(H);return oe>0}function et(H){var ne=H._controlledReadableStream;v(H._closeRequested===!1),v(ne._state==="readable"),H._closeRequested=!0,H._queue.length===0&&ae(ne)}function ct(H,ne){var oe=H._controlledReadableStream;if(v(H._closeRequested===!1),v(oe._state==="readable"),x(oe)===!0&&ie(oe)>0)ue(oe,ne,!1);else{var we=1;if(H._strategySize!==void 0){var Re=H._strategySize;try{we=Re(ne)}catch(Oe){throw Ge(H,Oe),Oe}}try{h(H,ne,we)}catch(Oe){throw Ge(H,Oe),Oe}}Ze(H)}function ht(H,ne){var oe=H._controlledReadableStream;v(oe._state==="readable"),_(H),pe(oe,ne)}function Ge(H,ne){H._controlledReadableStream._state==="readable"&&ht(H,ne)}function Be(H){var ne=H._controlledReadableStream,oe=ne._state;return oe==="errored"?null:oe==="closed"?0:H._strategyHWM-H._queueTotalSize}var wt=function(){function H(ne,oe){l(this,H),this._associatedReadableByteStreamController=ne,this._view=oe}return o(H,[{key:"respond",value:function(oe){if(ve(this)===!1)throw Jt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Kr(this._associatedReadableByteStreamController,oe)}},{key:"respondWithNewView",value:function(oe){if(ve(this)===!1)throw Jt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(oe))throw new TypeError("You can only respond with array buffer views");Ye(this._associatedReadableByteStreamController,oe)}},{key:"view",get:function(){return this._view}}]),H}(),At=function(){function H(ne,oe,we){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(ne._readableStreamController!==void 0)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=ne,this._underlyingByteSource=oe,this._pullAgain=!1,this._pulling=!1,re(this),this._queue=this._queueTotalSize=void 0,_(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=D(we);var Re=oe.autoAllocateChunkSize;if(Re!==void 0&&(Number.isInteger(Re)===!1||Re<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=Re,this._pendingPullIntos=[];var Oe=this,ze=S(oe,"start",[this]);Promise.resolve(ze).then(function(){Oe._started=!0,v(Oe._pulling===!1),v(Oe._pullAgain===!1),K(Oe)},function(We){ne._state==="readable"&&Mr(Oe,We)}).catch(b)}return o(H,[{key:"close",value:function(){if(Q(this)===!1)throw _t("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var oe=this._controlledReadableStream._state;if(oe!=="readable")throw new TypeError("The stream (in "+oe+" state) is not in the readable state and cannot be closed");dr(this)}},{key:"enqueue",value:function(oe){if(Q(this)===!1)throw _t("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var we=this._controlledReadableStream._state;if(we!=="readable")throw new TypeError("The stream (in "+we+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(oe))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");hr(this,oe)}},{key:"error",value:function(oe){if(Q(this)===!1)throw _t("error");var we=this._controlledReadableStream;if(we._state!=="readable")throw new TypeError("The stream is "+we._state+" and so cannot be errored");Mr(this,oe)}},{key:"__cancelSteps",value:function(oe){if(this._pendingPullIntos.length>0){var we=this._pendingPullIntos[0];we.bytesFilled=0}return _(this),V(this._underlyingByteSource,"cancel",[oe])}},{key:"__pullSteps",value:function(){var oe=this._controlledReadableStream;if(v(fe(oe)===!0),this._queueTotalSize>0){v(ie(oe)===0);var we=this._queue.shift();this._queueTotalSize-=we.byteLength,Ne(this);var Re=void 0;try{Re=new Uint8Array(we.buffer,we.byteOffset,we.byteLength)}catch(dt){return Promise.reject(dt)}return Promise.resolve(y(Re,!1))}var Oe=this._autoAllocateChunkSize;if(Oe!==void 0){var ze=void 0;try{ze=new ArrayBuffer(Oe)}catch(dt){return Promise.reject(dt)}var We={buffer:ze,byteOffset:0,byteLength:Oe,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(We)}var at=Y(oe);return K(this),at}},{key:"byobRequest",get:function(){if(Q(this)===!1)throw _t("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var oe=this._pendingPullIntos[0],we=new Uint8Array(oe.buffer,oe.byteOffset+oe.bytesFilled,oe.byteLength-oe.bytesFilled);this._byobRequest=new wt(this,we)}return this._byobRequest}},{key:"desiredSize",get:function(){if(Q(this)===!1)throw _t("desiredSize");return ra(this)}}]),H}();function Q(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_underlyingByteSource"))}function ve(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_associatedReadableByteStreamController"))}function K(H){var ne=yr(H);if(ne!==!1){if(H._pulling===!0){H._pullAgain=!0;return}v(H._pullAgain===!1),H._pulling=!0;var oe=V(H._underlyingByteSource,"pull",[H]);oe.then(function(){H._pulling=!1,H._pullAgain===!0&&(H._pullAgain=!1,K(H))},function(we){H._controlledReadableStream._state==="readable"&&Mr(H,we)}).catch(b)}}function re(H){Le(H),H._pendingPullIntos=[]}function me(H,ne){v(H._state!=="errored","state must not be errored");var oe=!1;H._state==="closed"&&(v(ne.bytesFilled===0),oe=!0);var we=xe(ne);ne.readerType==="default"?ue(H,we,oe):(v(ne.readerType==="byob"),se(H,we,oe))}function xe(H){var ne=H.bytesFilled,oe=H.elementSize;return v(ne<=H.byteLength),v(ne%oe===0),new H.ctor(H.buffer,H.byteOffset,ne/oe)}function _e(H,ne,oe,we){H._queue.push({buffer:ne,byteOffset:oe,byteLength:we}),H._queueTotalSize+=we}function ge(H,ne){var oe=ne.elementSize,we=ne.bytesFilled-ne.bytesFilled%oe,Re=Math.min(H._queueTotalSize,ne.byteLength-ne.bytesFilled),Oe=ne.bytesFilled+Re,ze=Oe-Oe%oe,We=Re,at=!1;ze>we&&(We=ze-ne.bytesFilled,at=!0);for(var dt=H._queue;We>0;){var Dt=dt[0],bt=Math.min(We,Dt.byteLength),qt=ne.byteOffset+ne.bytesFilled;c(ne.buffer,qt,Dt.buffer,Dt.byteOffset,bt),Dt.byteLength===bt?dt.shift():(Dt.byteOffset+=bt,Dt.byteLength-=bt),H._queueTotalSize-=bt,ye(H,bt,ne),We-=bt}return at===!1&&(v(H._queueTotalSize===0,"queue must be empty"),v(ne.bytesFilled>0),v(ne.bytesFilled<ne.elementSize)),at}function ye(H,ne,oe){v(H._pendingPullIntos.length===0||H._pendingPullIntos[0]===oe),Le(H),oe.bytesFilled+=ne}function Ne(H){v(H._controlledReadableStream._state==="readable"),H._queueTotalSize===0&&H._closeRequested===!0?ae(H._controlledReadableStream):K(H)}function Le(H){H._byobRequest!==void 0&&(H._byobRequest._associatedReadableByteStreamController=void 0,H._byobRequest._view=void 0,H._byobRequest=void 0)}function Je(H){for(v(H._closeRequested===!1);H._pendingPullIntos.length>0;){if(H._queueTotalSize===0)return;var ne=H._pendingPullIntos[0];ge(H,ne)===!0&&(Kt(H),me(H._controlledReadableStream,ne))}}function Xe(H,ne){var oe=H._controlledReadableStream,we=1;ne.constructor!==DataView&&(we=ne.constructor.BYTES_PER_ELEMENT);var Re=ne.constructor,Oe={buffer:ne.buffer,byteOffset:ne.byteOffset,byteLength:ne.byteLength,bytesFilled:0,elementSize:we,ctor:Re,readerType:"byob"};if(H._pendingPullIntos.length>0)return Oe.buffer=U(Oe.buffer),H._pendingPullIntos.push(Oe),J(oe);if(oe._state==="closed"){var ze=new ne.constructor(Oe.buffer,Oe.byteOffset,0);return Promise.resolve(y(ze,!0))}if(H._queueTotalSize>0){if(ge(H,Oe)===!0){var We=xe(Oe);return Ne(H),Promise.resolve(y(We,!1))}if(H._closeRequested===!0){var at=new TypeError("Insufficient bytes to fill elements in the given buffer");return Mr(H,at),Promise.reject(at)}}Oe.buffer=U(Oe.buffer),H._pendingPullIntos.push(Oe);var dt=J(oe);return K(H),dt}function ut(H,ne){ne.buffer=U(ne.buffer),v(ne.bytesFilled===0,"bytesFilled must be 0");var oe=H._controlledReadableStream;if(de(oe)===!0)for(;le(oe)>0;){var we=Kt(H);me(oe,we)}}function mt(H,ne,oe){if(oe.bytesFilled+ne>oe.byteLength)throw new RangeError("bytesWritten out of range");if(ye(H,ne,oe),!(oe.bytesFilled<oe.elementSize)){Kt(H);var we=oe.bytesFilled%oe.elementSize;if(we>0){var Re=oe.byteOffset+oe.bytesFilled,Oe=oe.buffer.slice(Re-we,Re);_e(H,Oe,0,Oe.byteLength)}oe.buffer=U(oe.buffer),oe.bytesFilled-=we,me(H._controlledReadableStream,oe),Je(H)}}function Tt(H,ne){var oe=H._pendingPullIntos[0],we=H._controlledReadableStream;if(we._state==="closed"){if(ne!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ut(H,oe)}else v(we._state==="readable"),mt(H,ne,oe)}function Kt(H){var ne=H._pendingPullIntos.shift();return Le(H),ne}function yr(H){var ne=H._controlledReadableStream;return ne._state!=="readable"||H._closeRequested===!0||H._started===!1?!1:fe(ne)===!0&&ie(ne)>0||de(ne)===!0&&le(ne)>0||ra(H)>0}function dr(H){var ne=H._controlledReadableStream;if(v(H._closeRequested===!1),v(ne._state==="readable"),H._queueTotalSize>0){H._closeRequested=!0;return}if(H._pendingPullIntos.length>0){var oe=H._pendingPullIntos[0];if(oe.bytesFilled>0){var we=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Mr(H,we),we}}ae(ne)}function hr(H,ne){var oe=H._controlledReadableStream;v(H._closeRequested===!1),v(oe._state==="readable");var we=ne.buffer,Re=ne.byteOffset,Oe=ne.byteLength,ze=U(we);if(fe(oe)===!0)if(ie(oe)===0)_e(H,ze,Re,Oe);else{v(H._queue.length===0);var We=new Uint8Array(ze,Re,Oe);ue(oe,We,!1)}else de(oe)===!0?(_e(H,ze,Re,Oe),Je(H)):(v(x(oe)===!1,"stream must not be locked"),_e(H,ze,Re,Oe))}function Mr(H,ne){var oe=H._controlledReadableStream;v(oe._state==="readable"),re(H),_(H),pe(oe,ne)}function ra(H){var ne=H._controlledReadableStream,oe=ne._state;return oe==="errored"?null:oe==="closed"?0:H._strategyHWM-H._queueTotalSize}function Kr(H,ne){if(ne=Number(ne),u(ne)===!1)throw new RangeError("bytesWritten must be a finite");v(H._pendingPullIntos.length>0),Tt(H,ne)}function Ye(H,ne){v(H._pendingPullIntos.length>0);var oe=H._pendingPullIntos[0];if(oe.byteOffset+oe.bytesFilled!==ne.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(oe.byteLength!==ne.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");oe.buffer=ne.buffer,Tt(H,ne.byteLength)}function De(H){return new TypeError("ReadableStream.prototype."+H+" can only be used on a ReadableStream")}function He(H){return new TypeError("Cannot "+H+" a stream using a released reader")}function tt(H){return new TypeError("ReadableStreamDefaultReader.prototype."+H+" can only be used on a ReadableStreamDefaultReader")}function xt(H){H._closedPromise=new Promise(function(ne,oe){H._closedPromise_resolve=ne,H._closedPromise_reject=oe})}function lr(H,ne){H._closedPromise=Promise.reject(ne),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function Rr(H){H._closedPromise=Promise.resolve(void 0),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function rt(H,ne){v(H._closedPromise_resolve!==void 0),v(H._closedPromise_reject!==void 0),H._closedPromise_reject(ne),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function jr(H,ne){v(H._closedPromise_resolve===void 0),v(H._closedPromise_reject===void 0),H._closedPromise=Promise.reject(ne)}function ja(H){v(H._closedPromise_resolve!==void 0),v(H._closedPromise_reject!==void 0),H._closedPromise_resolve(void 0),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function _a(H){return new TypeError("ReadableStreamBYOBReader.prototype."+H+" can only be used on a ReadableStreamBYOBReader")}function fa(H){return new TypeError("ReadableStreamDefaultController.prototype."+H+" can only be used on a ReadableStreamDefaultController")}function Jt(H){return new TypeError("ReadableStreamBYOBRequest.prototype."+H+" can only be used on a ReadableStreamBYOBRequest")}function _t(H){return new TypeError("ReadableByteStreamController.prototype."+H+" can only be used on a ReadableByteStreamController")}function st(H){try{Promise.prototype.then.call(H,void 0,function(){})}catch{}}},function(i,s,t){"use strict";var o=t(6),l=t(4),d=t(2);s.TransformStream=o.TransformStream,s.ReadableStream=l.ReadableStream,s.IsReadableStreamDisturbed=l.IsReadableStreamDisturbed,s.ReadableStreamDefaultControllerClose=l.ReadableStreamDefaultControllerClose,s.ReadableStreamDefaultControllerEnqueue=l.ReadableStreamDefaultControllerEnqueue,s.ReadableStreamDefaultControllerError=l.ReadableStreamDefaultControllerError,s.ReadableStreamDefaultControllerGetDesiredSize=l.ReadableStreamDefaultControllerGetDesiredSize,s.AcquireWritableStreamDefaultWriter=d.AcquireWritableStreamDefaultWriter,s.IsWritableStream=d.IsWritableStream,s.IsWritableStreamLocked=d.IsWritableStreamLocked,s.WritableStream=d.WritableStream,s.WritableStreamAbort=d.WritableStreamAbort,s.WritableStreamDefaultControllerError=d.WritableStreamDefaultControllerError,s.WritableStreamDefaultWriterCloseWithErrorPropagation=d.WritableStreamDefaultWriterCloseWithErrorPropagation,s.WritableStreamDefaultWriterRelease=d.WritableStreamDefaultWriterRelease,s.WritableStreamDefaultWriterWrite=d.WritableStreamDefaultWriterWrite},function(i,s,t){"use strict";var o=function(){function x(F,$){for(var G=0;G<$.length;G++){var Z=$[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(F,Z.key,Z)}}return function(F,$,G){return $&&x(F.prototype,$),G&&x(F,G),F}}();function l(x,F){if(!(x instanceof F))throw new TypeError("Cannot call a class as a function")}var d=t(1),c=d.assert,y=t(0),u=y.InvokeOrNoop,S=y.PromiseInvokeOrPerformFallback,V=y.PromiseInvokeOrNoop,U=y.typeIsObject,z=t(4),D=z.ReadableStream,k=z.ReadableStreamDefaultControllerClose,T=z.ReadableStreamDefaultControllerEnqueue,R=z.ReadableStreamDefaultControllerError,g=z.ReadableStreamDefaultControllerGetDesiredSize,m=t(2),v=m.WritableStream,b=m.WritableStreamDefaultControllerError;function f(x){if(x._errored===!0)throw new TypeError("TransformStream is already errored");if(x._readableClosed===!0)throw new TypeError("Readable side is already closed");_(x)}function p(x,F){if(x._errored===!0)throw new TypeError("TransformStream is already errored");if(x._readableClosed===!0)throw new TypeError("Readable side is already closed");var $=x._readableController;try{T($,F)}catch(J){throw x._readableClosed=!0,I(x,J),x._storedError}var G=g($),Z=G<=0;Z===!0&&x._backpressure===!1&&B(x,!0)}function h(x,F){if(x._errored===!0)throw new TypeError("TransformStream is already errored");W(x,F)}function _(x){c(x._errored===!1),c(x._readableClosed===!1);try{k(x._readableController)}catch{c(!1)}x._readableClosed=!0}function I(x,F){x._errored===!1&&W(x,F)}function W(x,F){c(x._errored===!1),x._errored=!0,x._storedError=F,x._writableDone===!1&&b(x._writableController,F),x._readableClosed===!1&&R(x._readableController,F)}function q(x){return c(x._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),x._backpressure===!1?Promise.resolve():(c(x._backpressure===!0,"_backpressure should have been initialized"),x._backpressureChangePromise)}function B(x,F){c(x._backpressure!==F,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),x._backpressureChangePromise!==void 0&&x._backpressureChangePromise_resolve(F),x._backpressureChangePromise=new Promise(function($){x._backpressureChangePromise_resolve=$}),x._backpressureChangePromise.then(function($){c($!==F,"_backpressureChangePromise should be fulfilled only when backpressure is changed")}),x._backpressure=F}function N(x,F){var $=F._controlledTransformStream;return p($,x),Promise.resolve()}function L(x,F){c(x._errored===!1),c(x._transforming===!1),c(x._backpressure===!1),x._transforming=!0;var $=x._transformer,G=x._transformStreamController,Z=S($,"transform",[F,G],N,[F,G]);return Z.then(function(){return x._transforming=!1,q(x)},function(J){return I(x,J),Promise.reject(J)})}function P(x){return!(!U(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledTransformStream"))}function O(x){return!(!U(x)||!Object.prototype.hasOwnProperty.call(x,"_transformStreamController"))}var E=function(){function x(F,$){l(this,x),this._transformStream=F,this._startPromise=$}return o(x,[{key:"start",value:function($){var G=this._transformStream;return G._writableController=$,this._startPromise.then(function(){return q(G)})}},{key:"write",value:function($){var G=this._transformStream;return L(G,$)}},{key:"abort",value:function(){var $=this._transformStream;$._writableDone=!0,W($,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var $=this._transformStream;c($._transforming===!1),$._writableDone=!0;var G=V($._transformer,"flush",[$._transformStreamController]);return G.then(function(){return $._errored===!0?Promise.reject($._storedError):($._readableClosed===!1&&_($),Promise.resolve())}).catch(function(Z){return I($,Z),Promise.reject($._storedError)})}}]),x}(),w=function(){function x(F,$){l(this,x),this._transformStream=F,this._startPromise=$}return o(x,[{key:"start",value:function($){var G=this._transformStream;return G._readableController=$,this._startPromise.then(function(){return c(G._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),G._backpressure===!0?Promise.resolve():(c(G._backpressure===!1,"_backpressure should have been initialized"),G._backpressureChangePromise)})}},{key:"pull",value:function(){var $=this._transformStream;return c($._backpressure===!0,"pull() should be never called while _backpressure is false"),c($._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),B($,!1),$._backpressureChangePromise}},{key:"cancel",value:function(){var $=this._transformStream;$._readableClosed=!0,W($,new TypeError("Readable side canceled"))}}]),x}(),A=function(){function x(F){if(l(this,x),O(F)===!1)throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(F._transformStreamController!==void 0)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=F}return o(x,[{key:"enqueue",value:function($){if(P(this)===!1)throw j("enqueue");p(this._controlledTransformStream,$)}},{key:"close",value:function(){if(P(this)===!1)throw j("close");f(this._controlledTransformStream)}},{key:"error",value:function($){if(P(this)===!1)throw j("error");h(this._controlledTransformStream,$)}},{key:"desiredSize",get:function(){if(P(this)===!1)throw j("desiredSize");var $=this._controlledTransformStream,G=$._readableController;return g(G)}}]),x}(),M=function(){function x(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};l(this,x),this._transformer=F;var $=F.readableStrategy,G=F.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new A(this);var Z=void 0,J=new Promise(function(ue){Z=ue}),Y=new w(this,J);this._readable=new D(Y,$);var ee=new E(this,J);this._writable=new v(ee,G),c(this._writableController!==void 0),c(this._readableController!==void 0);var ae=g(this._readableController);B(this,ae<=0);var pe=this,se=u(F,"start",[pe._transformStreamController]);Z(se),J.catch(function(ue){pe._errored===!1&&(pe._errored=!0,pe._storedError=ue)})}return o(x,[{key:"readable",get:function(){if(O(this)===!1)throw C("readable");return this._readable}},{key:"writable",get:function(){if(O(this)===!1)throw C("writable");return this._writable}}]),x}();i.exports={TransformStream:M};function j(x){return new TypeError("TransformStreamDefaultController.prototype."+x+" can only be used on a TransformStreamDefaultController")}function C(x){return new TypeError("TransformStream.prototype."+x+" can only be used on a TransformStream")}},function(i,s,t){i.exports=t(5)}]))},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkPdfManager=e.LocalPdfManager=void 0;var a=r(0),i=r(72),s=r(128),t=r(5),o=function(){function y(){throw new Error("Cannot initialize BaseManagerManager")}return y.prototype={get docId(){return this._docId},get password(){return this._password},get docBaseUrl(){var u=null;if(this._docBaseUrl){var S=(0,a.createValidAbsoluteUrl)(this._docBaseUrl);S?u=S.href:(0,a.warn)('Invalid absolute docBaseUrl: "'+this._docBaseUrl+'".')}return(0,a.shadow)(this,"docBaseUrl",u)},onLoadedStream:function(){throw new a.NotImplementedException},ensureDoc:function(S,V){return this.ensure(this.pdfDocument,S,V)},ensureXRef:function(S,V){return this.ensure(this.pdfDocument.xref,S,V)},ensureCatalog:function(S,V){return this.ensure(this.pdfDocument.catalog,S,V)},getPage:function(S){return this.pdfDocument.getPage(S)},cleanup:function(){return this.pdfDocument.cleanup()},ensure:function(S,V,U){return new a.NotImplementedException},requestRange:function(S,V){return new a.NotImplementedException},requestLoadedStream:function(){return new a.NotImplementedException},sendProgressiveData:function(S){return new a.NotImplementedException},updatePassword:function(S){this._password=S},terminate:function(){return new a.NotImplementedException}},y}(),l=function(){function y(u,S,V,U,z){this._docId=u,this._password=V,this._docBaseUrl=z,this.evaluatorOptions=U;var D=new t.Stream(S);this.pdfDocument=new s.PDFDocument(this,D),this._loadedStreamCapability=(0,a.createPromiseCapability)(),this._loadedStreamCapability.resolve(D)}return a.Util.inherit(y,o,{ensure:function(S,V,U){return new Promise(function(z,D){try{var k=S[V],T;typeof k=="function"?T=k.apply(S,U):T=k,z(T)}catch(R){D(R)}})},requestRange:function(S,V){return Promise.resolve()},requestLoadedStream:function(){},onLoadedStream:function(){return this._loadedStreamCapability.promise},terminate:function(){}}),y}(),d=function(){function y(u,S,V,U,z){this._docId=u,this._password=V.password,this._docBaseUrl=z,this.msgHandler=V.msgHandler,this.evaluatorOptions=U;var D={msgHandler:V.msgHandler,url:V.url,length:V.length,disableAutoFetch:V.disableAutoFetch,rangeChunkSize:V.rangeChunkSize};this.streamManager=new i.ChunkedStreamManager(S,D),this.pdfDocument=new s.PDFDocument(this,this.streamManager.getStream())}return a.Util.inherit(y,o,{ensure:function(S,V,U){var z=this;return new Promise(function(D,k){function T(){try{var R,g=S[V];typeof g=="function"?R=g.apply(S,U):R=g,D(R)}catch(m){if(!(m instanceof a.MissingDataException)){k(m);return}z.streamManager.requestRange(m.begin,m.end).then(T,k)}}T()})},requestRange:function(S,V){return this.streamManager.requestRange(S,V)},requestLoadedStream:function(){this.streamManager.requestAllChunks()},sendProgressiveData:function(S){this.streamManager.onReceiveData({chunk:S})},onLoadedStream:function(){return this.streamManager.onLoadedStream()},terminate:function(){this.streamManager.abort()}}),y}();e.LocalPdfManager=l,e.NetworkPdfManager=d},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDocument=e.Page=void 0;var a=function(){function U(z,D){var k=[],T=!0,R=!1,g=void 0;try{for(var m=z[Symbol.iterator](),v;!(T=(v=m.next()).done)&&(k.push(v.value),!(D&&k.length===D));T=!0);}catch(b){R=!0,g=b}finally{try{!T&&m.return&&m.return()}finally{if(R)throw g}}return k}return function(z,D){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return U(z,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(73),s=r(2),t=r(0),o=r(5),l=r(77),d=r(145),c=r(76),y=r(34),u=r(81),S=function(){var z=1,D=[0,0,612,792];function k(R,g){return g==="display"&&R.viewable||g==="print"&&R.printable}function T(R){var g=R.pdfManager,m=R.xref,v=R.pageIndex,b=R.pageDict,f=R.ref,p=R.fontCache,h=R.builtInCMapCache,_=R.pdfFunctionFactory;this.pdfManager=g,this.pageIndex=v,this.pageDict=b,this.xref=m,this.ref=f,this.fontCache=p,this.builtInCMapCache=h,this.pdfFunctionFactory=_,this.evaluatorOptions=g.evaluatorOptions,this.resourcesPromise=null;var I="p"+this.pageIndex+"_",W={obj:0};this.idFactory={createObjId:function(){return I+ ++W.obj}}}return T.prototype={getPageProp:function(g){return this.pageDict.get(g)},getInheritedPageProp:function(g,m){var v=this.pageDict,b=null,f=0,p=100;for(m=m||!1;v;){var h=m?v.getArray(g):v.get(g);if(h!==void 0&&(b||(b=[]),b.push(h)),++f>p)return(0,t.warn)("getInheritedPageProp: maximum loop count exceeded for "+g),b?b[0]:void 0;v=v.get("Parent")}if(b)return b.length===1||!(0,s.isDict)(b[0])?b[0]:s.Dict.merge(this.xref,b)},get content(){return this.getPageProp("Contents")},get resources(){return(0,t.shadow)(this,"resources",this.getInheritedPageProp("Resources")||s.Dict.empty)},get mediaBox(){var R=this.getInheritedPageProp("MediaBox",!0);return!Array.isArray(R)||R.length!==4?(0,t.shadow)(this,"mediaBox",D):(0,t.shadow)(this,"mediaBox",R)},get cropBox(){var R=this.getInheritedPageProp("CropBox",!0);return!Array.isArray(R)||R.length!==4?(0,t.shadow)(this,"cropBox",this.mediaBox):(0,t.shadow)(this,"cropBox",R)},get userUnit(){var R=this.getPageProp("UserUnit");return(!(0,t.isNum)(R)||R<=0)&&(R=z),(0,t.shadow)(this,"userUnit",R)},get view(){var R=this.mediaBox,g=this.cropBox;if(R===g)return(0,t.shadow)(this,"view",R);var m=t.Util.intersect(g,R);return(0,t.shadow)(this,"view",m||R)},get rotate(){var R=this.getInheritedPageProp("Rotate")||0;return R%90!==0?R=0:R>=360?R=R%360:R<0&&(R=(R%360+360)%360),(0,t.shadow)(this,"rotate",R)},getContentStream:function(){var g=this.content,m;if(Array.isArray(g)){var v=this.xref,b,f=g.length,p=[];for(b=0;b<f;++b)p.push(v.fetchIfRef(g[b]));m=new o.StreamsSequenceStream(p)}else(0,s.isStream)(g)?m=g:m=new o.NullStream;return m},loadResources:function(g){var m=this;return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then(function(){var v=new i.ObjectLoader(m.resources,g,m.xref);return v.load()})},getOperatorList:function(g){var m=this,v=g.handler,b=g.task,f=g.intent,p=g.renderInteractiveForms,h=this.pdfManager.ensure(this,"getContentStream"),_=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),I=new l.PartialEvaluator({pdfManager:this.pdfManager,xref:this.xref,handler:v,pageIndex:this.pageIndex,idFactory:this.idFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,options:this.evaluatorOptions,pdfFunctionFactory:this.pdfFunctionFactory}),W=Promise.all([h,_]),q=W.then(function(N){var L=a(N,1),P=L[0],O=new l.OperatorList(f,v,m.pageIndex);return v.send("StartRenderPage",{transparency:I.hasBlendModes(m.resources),pageIndex:m.pageIndex,intent:f}),I.getOperatorList({stream:P,task:b,resources:m.resources,operatorList:O}).then(function(){return O})}),B=this.pdfManager.ensure(this,"annotations");return Promise.all([q,B]).then(function(N){var L=a(N,2),P=L[0],O=L[1];if(O.length===0)return P.flush(!0),P;var E,w,A=[];for(E=0,w=O.length;E<w;E++)k(O[E],f)&&A.push(O[E].getOperatorList(I,b,p));return Promise.all(A).then(function(M){for(P.addOp(t.OPS.beginAnnotations,[]),E=0,w=M.length;E<w;E++)P.addOpList(M[E]);return P.addOp(t.OPS.endAnnotations,[]),P.flush(!0),P})})},extractTextContent:function(g){var m=this,v=g.handler,b=g.task,f=g.normalizeWhitespace,p=g.sink,h=g.combineTextItems,_=this.pdfManager.ensure(this,"getContentStream"),I=this.loadResources(["ExtGState","XObject","Font"]),W=Promise.all([_,I]);return W.then(function(q){var B=a(q,1),N=B[0],L=new l.PartialEvaluator({pdfManager:m.pdfManager,xref:m.xref,handler:v,pageIndex:m.pageIndex,idFactory:m.idFactory,fontCache:m.fontCache,builtInCMapCache:m.builtInCMapCache,options:m.evaluatorOptions,pdfFunctionFactory:m.pdfFunctionFactory});return L.getTextContent({stream:N,task:b,resources:m.resources,normalizeWhitespace:f,combineTextItems:h,sink:p})})},getAnnotationsData:function(g){for(var m=this.annotations,v=[],b=0,f=m.length;b<f;++b)(!g||k(m[b],g))&&v.push(m[b].data);return v},get annotations(){for(var R=[],g=this.getInheritedPageProp("Annots")||[],m=0,v=g.length;m<v;++m){var b=g[m],f=d.AnnotationFactory.create(this.xref,b,this.pdfManager,this.idFactory);f&&R.push(f)}return(0,t.shadow)(this,"annotations",R)}},T}(),V=function(){var z=1024,D="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";function k(g,m){var v;if((0,s.isStream)(m))v=m;else if((0,t.isArrayBuffer)(m))v=new o.Stream(m);else throw new Error("PDFDocument: Unknown argument type");if(v.length<=0)throw new Error("PDFDocument: stream must have data");this.pdfManager=g,this.stream=v,this.xref=new i.XRef(v,g);var b=g.evaluatorOptions;this.pdfFunctionFactory=new u.PDFFunctionFactory({xref:this.xref,isEvalSupported:b.isEvalSupported})}function T(g,m,v,b){var f=g.pos,p=g.end,h=[];f+v>p&&(v=p-f);for(var _=0;_<v;++_)h.push(String.fromCharCode(g.getByte()));var I=h.join("");g.pos=f;var W=b?I.lastIndexOf(m):I.indexOf(m);return W===-1?!1:(g.pos+=W,!0)}var R={get entries(){return(0,t.shadow)(this,"entries",{Title:t.isString,Author:t.isString,Subject:t.isString,Keywords:t.isString,Creator:t.isString,Producer:t.isString,CreationDate:t.isString,ModDate:t.isString,Trapped:s.isName})}};return k.prototype={parse:function(m){this.setup(m);var v=this.catalog.catDict.get("Version");(0,s.isName)(v)&&(this.pdfFormatVersion=v.name);try{if(this.acroForm=this.catalog.catDict.get("AcroForm"),this.acroForm){this.xfa=this.acroForm.get("XFA");var b=this.acroForm.get("Fields");(!b||!Array.isArray(b)||b.length===0)&&!this.xfa&&(this.acroForm=null)}}catch(f){if(f instanceof t.MissingDataException)throw f;(0,t.info)("Something wrong with AcroForm entry"),this.acroForm=null}},get linearization(){var g=null;if(this.stream.length)try{g=y.Linearization.create(this.stream)}catch(m){if(m instanceof t.MissingDataException)throw m;(0,t.info)(m)}return(0,t.shadow)(this,"linearization",g)},get startXRef(){var g=this.stream,m=0,v=this.linearization;if(v)g.reset(),T(g,"endobj",1024)&&(m=g.pos+6);else{for(var b=1024,f=!1,p=g.end;!f&&p>0;)p-=b-9,p<0&&(p=0),g.pos=p,f=T(g,"startxref",b,!0);if(f){g.skip(9);var h;do h=g.getByte();while((0,t.isSpace)(h));for(var _="";h>=32&&h<=57;)_+=String.fromCharCode(h),h=g.getByte();m=parseInt(_,10),isNaN(m)&&(m=0)}}return(0,t.shadow)(this,"startXRef",m)},get mainXRefEntriesOffset(){var g=0,m=this.linearization;return m&&(g=m.mainXRefEntriesOffset),(0,t.shadow)(this,"mainXRefEntriesOffset",g)},checkHeader:function(){var m=this.stream;if(m.reset(),T(m,"%PDF-",1024)){m.moveStart();for(var v=12,b="",f;(f=m.getByte())>32&&!(b.length>=v);)b+=String.fromCharCode(f);this.pdfFormatVersion||(this.pdfFormatVersion=b.substring(5));return}},parseStartXRef:function(){var m=this.startXRef;this.xref.setStartXRef(m)},setup:function(m){var v=this;this.xref.parse(m);var b={createPage:function(p,h,_,I,W){return new S({pdfManager:v.pdfManager,xref:v.xref,pageIndex:p,pageDict:h,ref:_,fontCache:I,builtInCMapCache:W,pdfFunctionFactory:v.pdfFunctionFactory})}};this.catalog=new i.Catalog(this.pdfManager,this.xref,b)},get numPages(){var g=this.linearization,m=g?g.numPages:this.catalog.numPages;return(0,t.shadow)(this,"numPages",m)},get documentInfo(){var g={PDFFormatVersion:this.pdfFormatVersion,IsAcroFormPresent:!!this.acroForm,IsXFAPresent:!!this.xfa},m;try{m=this.xref.trailer.get("Info")}catch(p){if(p instanceof t.MissingDataException)throw p;(0,t.info)("The document information dictionary is invalid.")}if(m){var v=R.entries;for(var b in v)if(m.has(b)){var f=m.get(b);v[b](f)?g[b]=typeof f!="string"?f:(0,t.stringToPDFString)(f):(0,t.info)('Bad value in document info for "'+b+'"')}}return(0,t.shadow)(this,"documentInfo",g)},get fingerprint(){var g=this.xref,m,v="",b=g.trailer.get("ID");Array.isArray(b)&&b[0]&&(0,t.isString)(b[0])&&b[0]!==D?m=(0,t.stringToBytes)(b[0]):(this.stream.ensureRange&&this.stream.ensureRange(0,Math.min(z,this.stream.end)),m=(0,c.calculateMD5)(this.stream.bytes.subarray(0,z),0,z));for(var f=0,p=m.length;f<p;f++){var h=m[f].toString(16);v+=h.length===1?"0"+h:h}return(0,t.shadow)(this,"fingerprint",v)},getPage:function(m){return this.catalog.getPage(m)},cleanup:function(){return this.catalog.cleanup()}},k}();e.Page=S,e.PDFDocument=V},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JpegImage=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i=r(0),s=function(){function l(d){this.message="JPEG error: "+d}return l.prototype=new Error,l.prototype.name="JpegError",l.constructor=l,l}(),t=function(){var l=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),d=4017,c=799,y=3406,u=2276,S=1567,V=3784,U=5793,z=2896;function D(){this.decodeTransform=null,this.colorTransform=-1}function k(b,f){for(var p=0,h=[],_,I,W=16;W>0&&!b[W-1];)W--;h.push({children:[],index:0});var q=h[0],B;for(_=0;_<W;_++){for(I=0;I<b[_];I++){for(q=h.pop(),q.children[q.index]=f[p];q.index>0;)q=h.pop();for(q.index++,h.push(q);h.length<=_;)h.push(B={children:[],index:0}),q.children[q.index]=B.children,q=B;p++}_+1<W&&(h.push(B={children:[],index:0}),q.children[q.index]=B.children,q=B)}return h[0].children}function T(b,f,p){return 64*((b.blocksPerLine+1)*f+p)}function R(b,f,p,h,_,I,W,q,B){var N=p.mcusPerLine,L=p.progressive,P=f,O=0,E=0;function w(){if(E>0)return E--,O>>E&1;if(O=b[f++],O===255){var Pe=b[f++];if(Pe)throw new s("unexpected marker "+(O<<8|Pe).toString(16))}return E=7,O>>>7}function A(Pe){for(var Ie=Pe;;){if(Ie=Ie[w()],typeof Ie=="number")return Ie;if((typeof Ie>"u"?"undefined":a(Ie))!=="object")throw new s("invalid huffman sequence")}}function M(Pe){for(var Ie=0;Pe>0;)Ie=Ie<<1|w(),Pe--;return Ie}function j(Pe){if(Pe===1)return w()===1?1:-1;var Ie=M(Pe);return Ie>=1<<Pe-1?Ie:Ie+(-1<<Pe)+1}function C(Pe,Ie){var $e=A(Pe.huffmanTableDC),Ke=$e===0?0:j($e);Pe.blockData[Ie]=Pe.pred+=Ke;for(var Ze=1;Ze<64;){var ot=A(Pe.huffmanTableAC),et=ot&15,ct=ot>>4;if(et===0){if(ct<15)break;Ze+=16;continue}Ze+=ct;var ht=l[Ze];Pe.blockData[Ie+ht]=j(et),Ze++}}function x(Pe,Ie){var $e=A(Pe.huffmanTableDC),Ke=$e===0?0:j($e)<<B;Pe.blockData[Ie]=Pe.pred+=Ke}function F(Pe,Ie){Pe.blockData[Ie]|=w()<<B}var $=0;function G(Pe,Ie){if($>0){$--;return}for(var $e=I,Ke=W;$e<=Ke;){var Ze=A(Pe.huffmanTableAC),ot=Ze&15,et=Ze>>4;if(ot===0){if(et<15){$=M(et)+(1<<et)-1;break}$e+=16;continue}$e+=et;var ct=l[$e];Pe.blockData[Ie+ct]=j(ot)*(1<<B),$e++}}var Z=0,J;function Y(Pe,Ie){for(var $e=I,Ke=W,Ze=0,ot,et;$e<=Ke;){var ct=l[$e];switch(Z){case 0:if(et=A(Pe.huffmanTableAC),ot=et&15,Ze=et>>4,ot===0)Ze<15?($=M(Ze)+(1<<Ze),Z=4):(Ze=16,Z=1);else{if(ot!==1)throw new s("invalid ACn encoding");J=j(ot),Z=Ze?2:3}continue;case 1:case 2:Pe.blockData[Ie+ct]?Pe.blockData[Ie+ct]+=w()<<B:(Ze--,Ze===0&&(Z=Z===2?3:0));break;case 3:Pe.blockData[Ie+ct]?Pe.blockData[Ie+ct]+=w()<<B:(Pe.blockData[Ie+ct]=J<<B,Z=0);break;case 4:Pe.blockData[Ie+ct]&&(Pe.blockData[Ie+ct]+=w()<<B);break}$e++}Z===4&&($--,$===0&&(Z=0))}function ee(Pe,Ie,$e,Ke,Ze){var ot=$e/N|0,et=$e%N,ct=ot*Pe.v+Ke,ht=et*Pe.h+Ze,Ge=T(Pe,ct,ht);Ie(Pe,Ge)}function ae(Pe,Ie,$e){var Ke=$e/Pe.blocksPerLine|0,Ze=$e%Pe.blocksPerLine,ot=T(Pe,Ke,Ze);Ie(Pe,ot)}var pe=h.length,se,ue,le,ie,de,fe;L?I===0?fe=q===0?x:F:fe=q===0?G:Y:fe=C;var he=0,Se,Ce;pe===1?Ce=h[0].blocksPerLine*h[0].blocksPerColumn:Ce=N*p.mcusPerColumn;for(var Ae,Ee;he<Ce;){var ke=_?Math.min(Ce-he,_):Ce;for(ue=0;ue<pe;ue++)h[ue].pred=0;if($=0,pe===1)for(se=h[0],de=0;de<ke;de++)ae(se,fe,he),he++;else for(de=0;de<ke;de++){for(ue=0;ue<pe;ue++)for(se=h[ue],Ae=se.h,Ee=se.v,le=0;le<Ee;le++)for(ie=0;ie<Ae;ie++)ee(se,fe,he,le,ie);he++}E=0,Se=v(b,f),Se&&Se.invalid&&((0,i.warn)("decodeScan - unexpected MCU data, next marker is: "+Se.invalid),f=Se.offset);var Fe=Se&&Se.marker;if(!Fe||Fe<=65280)throw new s("marker was not found");if(Fe>=65488&&Fe<=65495)f+=2;else break}return Se=v(b,f),Se&&Se.invalid&&((0,i.warn)("decodeScan - unexpected Scan data, next marker is: "+Se.invalid),f=Se.offset),f-P}function g(b,f,p){var h=b.quantizationTable,_=b.blockData,I,W,q,B,N,L,P,O,E,w,A,M,j,C,x,F,$;if(!h)throw new s("missing required Quantization Table.");for(var G=0;G<64;G+=8){if(E=_[f+G],w=_[f+G+1],A=_[f+G+2],M=_[f+G+3],j=_[f+G+4],C=_[f+G+5],x=_[f+G+6],F=_[f+G+7],E*=h[G],(w|A|M|j|C|x|F)===0){$=U*E+512>>10,p[G]=$,p[G+1]=$,p[G+2]=$,p[G+3]=$,p[G+4]=$,p[G+5]=$,p[G+6]=$,p[G+7]=$;continue}w*=h[G+1],A*=h[G+2],M*=h[G+3],j*=h[G+4],C*=h[G+5],x*=h[G+6],F*=h[G+7],I=U*E+128>>8,W=U*j+128>>8,q=A,B=x,N=z*(w-F)+128>>8,O=z*(w+F)+128>>8,L=M<<4,P=C<<4,I=I+W+1>>1,W=I-W,$=q*V+B*S+128>>8,q=q*S-B*V+128>>8,B=$,N=N+P+1>>1,P=N-P,O=O+L+1>>1,L=O-L,I=I+B+1>>1,B=I-B,W=W+q+1>>1,q=W-q,$=N*u+O*y+2048>>12,N=N*y-O*u+2048>>12,O=$,$=L*c+P*d+2048>>12,L=L*d-P*c+2048>>12,P=$,p[G]=I+O,p[G+7]=I-O,p[G+1]=W+P,p[G+6]=W-P,p[G+2]=q+L,p[G+5]=q-L,p[G+3]=B+N,p[G+4]=B-N}for(var Z=0;Z<8;++Z){if(E=p[Z],w=p[Z+8],A=p[Z+16],M=p[Z+24],j=p[Z+32],C=p[Z+40],x=p[Z+48],F=p[Z+56],(w|A|M|j|C|x|F)===0){$=U*E+8192>>14,$=$<-2040?0:$>=2024?255:$+2056>>4,_[f+Z]=$,_[f+Z+8]=$,_[f+Z+16]=$,_[f+Z+24]=$,_[f+Z+32]=$,_[f+Z+40]=$,_[f+Z+48]=$,_[f+Z+56]=$;continue}I=U*E+2048>>12,W=U*j+2048>>12,q=A,B=x,N=z*(w-F)+2048>>12,O=z*(w+F)+2048>>12,L=M,P=C,I=(I+W+1>>1)+4112,W=I-W,$=q*V+B*S+2048>>12,q=q*S-B*V+2048>>12,B=$,N=N+P+1>>1,P=N-P,O=O+L+1>>1,L=O-L,I=I+B+1>>1,B=I-B,W=W+q+1>>1,q=W-q,$=N*u+O*y+2048>>12,N=N*y-O*u+2048>>12,O=$,$=L*c+P*d+2048>>12,L=L*d-P*c+2048>>12,P=$,E=I+O,F=I-O,w=W+P,x=W-P,A=q+L,C=q-L,M=B+N,j=B-N,E=E<16?0:E>=4080?255:E>>4,w=w<16?0:w>=4080?255:w>>4,A=A<16?0:A>=4080?255:A>>4,M=M<16?0:M>=4080?255:M>>4,j=j<16?0:j>=4080?255:j>>4,C=C<16?0:C>=4080?255:C>>4,x=x<16?0:x>=4080?255:x>>4,F=F<16?0:F>=4080?255:F>>4,_[f+Z]=E,_[f+Z+8]=w,_[f+Z+16]=A,_[f+Z+24]=M,_[f+Z+32]=j,_[f+Z+40]=C,_[f+Z+48]=x,_[f+Z+56]=F}}function m(b,f){for(var p=f.blocksPerLine,h=f.blocksPerColumn,_=new Int16Array(64),I=0;I<h;I++)for(var W=0;W<p;W++){var q=T(f,I,W);g(f,q,_)}return f.blockData}function v(b,f,p){function h(B){return b[B]<<8|b[B+1]}var _=b.length-1,I=p<f?p:f;if(f>=_)return null;var W=h(f);if(W>=65472&&W<=65534)return{invalid:null,marker:W,offset:f};for(var q=h(I);!(q>=65472&&q<=65534);){if(++I>=_)return null;q=h(I)}return{invalid:W.toString(16),marker:q,offset:I}}return D.prototype={parse:function(f){function p(){var Ke=f[I]<<8|f[I+1];return I+=2,Ke}function h(){var Ke=p(),Ze=I+Ke-2,ot=v(f,Ze,I);ot&&ot.invalid&&((0,i.warn)("readDataBlock - incorrect length, next marker is: "+ot.invalid),Ze=ot.offset);var et=f.subarray(I,Ze);return I+=et.length,et}function _(Ke){for(var Ze=Math.ceil(Ke.samplesPerLine/8/Ke.maxH),ot=Math.ceil(Ke.scanLines/8/Ke.maxV),et=0;et<Ke.components.length;et++){Ce=Ke.components[et];var ct=Math.ceil(Math.ceil(Ke.samplesPerLine/8)*Ce.h/Ke.maxH),ht=Math.ceil(Math.ceil(Ke.scanLines/8)*Ce.v/Ke.maxV),Ge=Ze*Ce.h,Be=ot*Ce.v,wt=64*Be*(Ge+1);Ce.blockData=new Int16Array(wt),Ce.blocksPerLine=ct,Ce.blocksPerColumn=ht}Ke.mcusPerLine=Ze,Ke.mcusPerColumn=ot}var I=0,W=null,q=null,B,N,L=[],P=[],O=[],E=p();if(E!==65496)throw new s("SOI not found");for(E=p();E!==65497;){var w,A,M;switch(E){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var j=h();E===65504&&j[0]===74&&j[1]===70&&j[2]===73&&j[3]===70&&j[4]===0&&(W={version:{major:j[5],minor:j[6]},densityUnits:j[7],xDensity:j[8]<<8|j[9],yDensity:j[10]<<8|j[11],thumbWidth:j[12],thumbHeight:j[13],thumbData:j.subarray(14,14+3*j[12]*j[13])}),E===65518&&j[0]===65&&j[1]===100&&j[2]===111&&j[3]===98&&j[4]===101&&(q={version:j[5]<<8|j[6],flags0:j[7]<<8|j[8],flags1:j[9]<<8|j[10],transformCode:j[11]});break;case 65499:for(var C=p(),x=C+I-2,F;I<x;){var $=f[I++],G=new Uint16Array(64);if($>>4===0)for(A=0;A<64;A++)F=l[A],G[F]=f[I++];else if($>>4===1)for(A=0;A<64;A++)F=l[A],G[F]=p();else throw new s("DQT - invalid table spec");L[$&15]=G}break;case 65472:case 65473:case 65474:if(B)throw new s("Only single frame JPEGs supported");p(),B={},B.extended=E===65473,B.progressive=E===65474,B.precision=f[I++],B.scanLines=p(),B.samplesPerLine=p(),B.components=[],B.componentIds={};var Z=f[I++],J,Y=0,ee=0;for(w=0;w<Z;w++){J=f[I];var ae=f[I+1]>>4,pe=f[I+1]&15;Y<ae&&(Y=ae),ee<pe&&(ee=pe);var se=f[I+2];M=B.components.push({h:ae,v:pe,quantizationId:se,quantizationTable:null}),B.componentIds[J]=M-1,I+=3}B.maxH=Y,B.maxV=ee,_(B);break;case 65476:var ue=p();for(w=2;w<ue;){var le=f[I++],ie=new Uint8Array(16),de=0;for(A=0;A<16;A++,I++)de+=ie[A]=f[I];var fe=new Uint8Array(de);for(A=0;A<de;A++,I++)fe[A]=f[I];w+=17+de,(le>>4===0?O:P)[le&15]=k(ie,fe)}break;case 65501:p(),N=p();break;case 65498:p();var he=f[I++],Se=[],Ce;for(w=0;w<he;w++){var Ae=B.componentIds[f[I++]];Ce=B.components[Ae];var Ee=f[I++];Ce.huffmanTableDC=O[Ee>>4],Ce.huffmanTableAC=P[Ee&15],Se.push(Ce)}var ke=f[I++],Fe=f[I++],Pe=f[I++],Ie=R(f,I,B,Se,N,ke,Fe,Pe>>4,Pe&15);I+=Ie;break;case 65535:f[I]!==255&&I--;break;default:if(f[I-3]===255&&f[I-2]>=192&&f[I-2]<=254){I-=3;break}throw new s("unknown marker "+E.toString(16))}E=p()}for(this.width=B.samplesPerLine,this.height=B.scanLines,this.jfif=W,this.adobe=q,this.components=[],w=0;w<B.components.length;w++){Ce=B.components[w];var $e=L[Ce.quantizationId];$e&&(Ce.quantizationTable=$e),this.components.push({output:m(B,Ce),scaleX:Ce.h/B.maxH,scaleY:Ce.v/B.maxV,blocksPerLine:Ce.blocksPerLine,blocksPerColumn:Ce.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(f,p){var h=this.width/f,_=this.height/p,I,W,q,B,N,L,P,O,E,w,A=0,M,j=this.components.length,C=f*p*j,x=new Uint8ClampedArray(C),F=new Uint32Array(f),$=4294967288;for(P=0;P<j;P++){for(I=this.components[P],W=I.scaleX*h,q=I.scaleY*_,A=P,M=I.output,B=I.blocksPerLine+1<<3,N=0;N<f;N++)O=0|N*W,F[N]=(O&$)<<3|O&7;for(L=0;L<p;L++)for(O=0|L*q,w=B*(O&$)|(O&7)<<3,N=0;N<f;N++)x[A]=M[w+F[N]],A+=j}var G=this.decodeTransform;if(G)for(P=0;P<C;)for(O=0,E=0;O<j;O++,P++,E+=2)x[P]=(x[P]*G[E]>>8)+G[E+1];return x},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(f){for(var p,h,_,I=0,W=f.length;I<W;I+=3)p=f[I],h=f[I+1],_=f[I+2],f[I]=p-179.456+1.402*_,f[I+1]=p+135.459-.344*h-.714*_,f[I+2]=p-226.816+1.772*h;return f},_convertYcckToRgb:function(f){for(var p,h,_,I,W=0,q=0,B=f.length;q<B;q+=4)p=f[q],h=f[q+1],_=f[q+2],I=f[q+3],f[W++]=-122.67195406894+h*(-660635669420364e-19*h+.000437130475926232*_-54080610064599e-18*p+.00048449797120281*I-.154362151871126)+_*(-.000957964378445773*_+.000817076911346625*p-.00477271405408747*I+1.53380253221734)+p*(.000961250184130688*p-.00266257332283933*I+.48357088451265)+I*(-.000336197177618394*I+.484791561490776),f[W++]=107.268039397724+h*(219927104525741e-19*h-.000640992018297945*_+.000659397001245577*p+.000426105652938837*I-.176491792462875)+_*(-.000778269941513683*_+.00130872261408275*p+.000770482631801132*I-.151051492775562)+p*(.00126935368114843*p-.00265090189010898*I+.25802910206845)+I*(-.000318913117588328*I-.213742400323665),f[W++]=-20.810012546947+h*(-.000570115196973677*h-263409051004589e-19*_+.0020741088115012*p-.00288260236853442*I+.814272968359295)+_*(-153496057440975e-19*_-.000132689043961446*p+.000560833691242812*I-.195152027534049)+p*(.00174418132927582*p-.00255243321439347*I+.116935020465145)+I*(-.000343531996510555*I+.24165260232407);return f},_convertYcckToCmyk:function(f){for(var p,h,_,I=0,W=f.length;I<W;I+=4)p=f[I],h=f[I+1],_=f[I+2],f[I]=434.456-p-1.402*_,f[I+1]=119.541-p+.344*h+.714*_,f[I+2]=481.816-p-1.772*h;return f},_convertCmykToRgb:function(f){for(var p,h,_,I,W=0,q=1/255,B=0,N=f.length;B<N;B+=4)p=f[B]*q,h=f[B+1]*q,_=f[B+2]*q,I=f[B+3]*q,f[W++]=255+p*(-4.387332384609988*p+54.48615194189176*h+18.82290502165302*_+212.25662451639585*I-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*_-17.873870861415444*I-5.497006427196366)+_*(-2.5217340131683033*_-21.248923337353073*I+17.5119270841813)-I*(21.86122147463605*I+189.48180835922747),f[W++]=255+p*(8.841041422036149*p+60.118027045597366*h+6.871425592049007*_+31.159100130055922*I-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*_+131.35250912493976*I-190.9453302588951)+_*(4.444339102852739*_+9.8632861493405*I-24.86741582555878)-I*(20.737325471181034*I+187.80453709719578),f[W++]=255+p*(.8842522430003296*p+8.078677503112928*h+30.89978309703729*_-.23883238689178934*I-14.183576799673286)+h*(10.49593273432072*h+63.02378494754052*_+50.606957656360734*I-112.23884253719248)+_*(.03296041114873217*_+115.60384449646641*I-193.58209356861505)-I*(22.33816807309886*I+180.12613974708367);return f},getData:function(f,p,h){if(this.numComponents>4)throw new s("Unsupported color mode");var _=this._getLinearizedBlockData(f,p);if(this.numComponents===1&&h){for(var I=_.length,W=new Uint8ClampedArray(I*3),q=0,B=0;B<I;B++){var N=_[B];W[q++]=N,W[q++]=N,W[q++]=N}return W}else{if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(_);if(this.numComponents===4){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(_):this._convertYcckToCmyk(_);if(h)return this._convertCmykToRgb(_)}}return _}},D}();e.JpegImage=t},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxStream=void 0;var a=r(2),i=r(131),s=r(5),t=function(){function l(d,c,y){this.str=d,this.dict=d.dict,(0,a.isDict)(y)||(y=a.Dict.empty);var u={next:function(){return d.getByte()}};this.ccittFaxDecoder=new i.CCITTFaxDecoder(u,{K:y.get("K"),EndOfLine:y.get("EndOfLine"),EncodedByteAlign:y.get("EncodedByteAlign"),Columns:y.get("Columns"),Rows:y.get("Rows"),EndOfBlock:y.get("EndOfBlock"),BlackIs1:y.get("BlackIs1")}),s.DecodeStream.call(this,c)}return l.prototype=Object.create(s.DecodeStream.prototype),l.prototype.readBlock=function(){for(;!this.eof;){var d=this.ccittFaxDecoder.readNextChar();if(d===-1){this.eof=!0;return}this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=d}},l}();e.CCITTFaxStream=t},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxDecoder=void 0;var a=r(0),i=function(){var t=-2,o=-1,l=0,d=1,c=2,y=3,u=4,S=5,V=6,U=7,z=8,D=[[-1,-1],[-1,-1],[7,z],[7,U],[6,V],[6,V],[6,S],[6,S],[4,l],[4,l],[4,l],[4,l],[4,l],[4,l],[4,l],[4,l],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,d],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,u],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[3,y],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c],[1,c]],k=[[-1,-1],[12,t],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],T=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],R=[[-1,-1],[-1,-1],[12,t],[12,t],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],g=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],m=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function v(b){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b||typeof b.next!="function")throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=b,this.eof=!1,this.encoding=f.K||0,this.eoline=f.EndOfLine||!1,this.byteAlign=f.EncodedByteAlign||!1,this.columns=f.Columns||1728,this.rows=f.Rows||0;var p=f.EndOfBlock;p==null&&(p=!0),this.eoblock=p,this.black=f.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;for(var h=void 0;(h=this._lookBits(12))===0;)this._eatBits(1);h===1&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return v.prototype={readNextChar:function(){if(this.eof)return-1;var f=this.refLine,p=this.codingLine,h=this.columns,_=void 0,I=void 0,W=void 0,q=void 0;if(this.outputBits===0){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;this.err=!1;var B=void 0,N=void 0,L=void 0;if(this.nextLine2D){for(q=0;p[q]<h;++q)f[q]=p[q];for(f[q++]=h,f[q]=h,p[0]=0,this.codingPos=0,_=0,I=0;p[this.codingPos]<h;)switch(B=this._getTwoDimCode(),B){case l:this._addPixels(f[_+1],I),f[_+1]<h&&(_+=2);break;case d:if(B=N=0,I){do B+=L=this._getBlackCode();while(L>=64);do N+=L=this._getWhiteCode();while(L>=64)}else{do B+=L=this._getWhiteCode();while(L>=64);do N+=L=this._getBlackCode();while(L>=64)}for(this._addPixels(p[this.codingPos]+B,I),p[this.codingPos]<h&&this._addPixels(p[this.codingPos]+N,I^1);f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case U:if(this._addPixels(f[_]+3,I),I^=1,p[this.codingPos]<h)for(++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case S:if(this._addPixels(f[_]+2,I),I^=1,p[this.codingPos]<h)for(++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case y:if(this._addPixels(f[_]+1,I),I^=1,p[this.codingPos]<h)for(++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case c:if(this._addPixels(f[_],I),I^=1,p[this.codingPos]<h)for(++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case z:if(this._addPixelsNeg(f[_]-3,I),I^=1,p[this.codingPos]<h)for(_>0?--_:++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case V:if(this._addPixelsNeg(f[_]-2,I),I^=1,p[this.codingPos]<h)for(_>0?--_:++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case u:if(this._addPixelsNeg(f[_]-1,I),I^=1,p[this.codingPos]<h)for(_>0?--_:++_;f[_]<=p[this.codingPos]&&f[_]<h;)_+=2;break;case o:this._addPixels(h,0),this.eof=!0;break;default:(0,a.info)("bad 2d code"),this._addPixels(h,0),this.err=!0}}else for(p[0]=0,this.codingPos=0,I=0;p[this.codingPos]<h;){if(B=0,I)do B+=L=this._getBlackCode();while(L>=64);else do B+=L=this._getWhiteCode();while(L>=64);this._addPixels(p[this.codingPos]+B,I),I^=1}var P=!1;if(this.byteAlign&&(this.inputBits&=-8),!this.eoblock&&this.row===this.rows-1)this.rowsDone=!0;else{if(B=this._lookBits(12),this.eoline)for(;B!==o&&B!==1;)this._eatBits(1),B=this._lookBits(12);else for(;B===0;)this._eatBits(1),B=this._lookBits(12);B===1?(this._eatBits(12),P=!0):B===o&&(this.eof=!0)}if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&P&&this.byteAlign){if(B=this._lookBits(12),B===1){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(q=0;q<4;++q)B=this._lookBits(12),B!==1&&(0,a.info)("bad rtc code: "+B),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(B=this._lookBits(13),B===o)return this.eof=!0,-1;if(B>>1===1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(B&1))}p[0]>0?this.outputBits=p[this.codingPos=0]:this.outputBits=p[this.codingPos=1],this.row++}var O=void 0;if(this.outputBits>=8)O=this.codingPos&1?0:255,this.outputBits-=8,this.outputBits===0&&p[this.codingPos]<h&&(this.codingPos++,this.outputBits=p[this.codingPos]-p[this.codingPos-1]);else{W=8,O=0;do this.outputBits>W?(O<<=W,this.codingPos&1||(O|=255>>8-W),this.outputBits-=W,W=0):(O<<=this.outputBits,this.codingPos&1||(O|=255>>8-this.outputBits),W-=this.outputBits,this.outputBits=0,p[this.codingPos]<h?(this.codingPos++,this.outputBits=p[this.codingPos]-p[this.codingPos-1]):W>0&&(O<<=W,W=0));while(W)}return this.black&&(O^=255),O},_addPixels:function(f,p){var h=this.codingLine,_=this.codingPos;f>h[_]&&(f>this.columns&&((0,a.info)("row is wrong length"),this.err=!0,f=this.columns),_&1^p&&++_,h[_]=f),this.codingPos=_},_addPixelsNeg:function(f,p){var h=this.codingLine,_=this.codingPos;if(f>h[_])f>this.columns&&((0,a.info)("row is wrong length"),this.err=!0,f=this.columns),_&1^p&&++_,h[_]=f;else if(f<h[_]){for(f<0&&((0,a.info)("invalid code"),this.err=!0,f=0);_>0&&f<h[_-1];)--_;h[_]=f}this.codingPos=_},_findTableCode:function(f,p,h,_){for(var I=_||0,W=f;W<=p;++W){var q=this._lookBits(W);if(q===o)return[!0,1,!1];if(W<p&&(q<<=p-W),!I||q>=I){var B=h[q-I];if(B[0]===W)return this._eatBits(W),[!0,B[1],!0]}}return[!1,0,!1]},_getTwoDimCode:function(){var f=0,p=void 0;if(this.eoblock){if(f=this._lookBits(7),p=D[f],p&&p[0]>0)return this._eatBits(p[0]),p[1]}else{var h=this._findTableCode(1,7,D);if(h[0]&&h[2])return h[1]}return(0,a.info)("Bad two dim code"),o},_getWhiteCode:function(){var f=0,p=void 0;if(this.eoblock){if(f=this._lookBits(12),f===o)return 1;if(f>>5===0?p=k[f]:p=T[f>>3],p[0]>0)return this._eatBits(p[0]),p[1]}else{var h=this._findTableCode(1,9,T);if(h[0]||(h=this._findTableCode(11,12,k),h[0]))return h[1]}return(0,a.info)("bad white code"),this._eatBits(1),1},_getBlackCode:function(){var f=void 0,p=void 0;if(this.eoblock){if(f=this._lookBits(13),f===o)return 1;if(f>>7===0?p=R[f]:f>>9===0&&f>>7!==0?p=g[(f>>1)-64]:p=m[f>>7],p[0]>0)return this._eatBits(p[0]),p[1]}else{var h=this._findTableCode(2,6,m);if(h[0]||(h=this._findTableCode(7,12,g,64),h[0])||(h=this._findTableCode(10,13,R),h[0]))return h[1]}return(0,a.info)("bad black code"),this._eatBits(1),1},_lookBits:function(f){for(var p=void 0;this.inputBits<f;){if((p=this.source.next())===-1)return this.inputBits===0?o:this.inputBuf<<f-this.inputBits&65535>>16-f;this.inputBuf=this.inputBuf<<8|p,this.inputBits+=8}return this.inputBuf>>this.inputBits-f&65535>>16-f},_eatBits:function(f){(this.inputBits-=f)<0&&(this.inputBits=0)}},v}();e.CCITTFaxDecoder=i},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Stream=void 0;var a=r(2),i=r(5),s=r(133),t=r(0),o=function(){function d(c,y,u,S){this.stream=c,this.maybeLength=y,this.dict=u,this.params=S,i.DecodeStream.call(this,y)}return d.prototype=Object.create(i.DecodeStream.prototype),Object.defineProperty(d.prototype,"bytes",{get:function(){return(0,t.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),d.prototype.ensureBuffer=function(c){if(!this.bufferLength){var y=new s.Jbig2Image,u=[];if((0,a.isDict)(this.params)){var S=this.params.get("JBIG2Globals");if((0,a.isStream)(S)){var V=S.getBytes();u.push({data:V,start:0,end:V.length})}}u.push({data:this.bytes,start:0,end:this.bytes.length});for(var U=y.parseChunks(u),z=U.length,D=0;D<z;D++)U[D]^=255;this.buffer=U,this.bufferLength=z,this.eof=!0}},d}();e.Jbig2Stream=o},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Image=void 0;var a=r(0),i=r(75),s=function(){function l(d){this.message="JBIG2 error: "+d}return l.prototype=new Error,l.prototype.name="Jbig2Error",l.constructor=l,l}(),t=function(){function l(){}l.prototype={getContexts:function(P){return P in this?this[P]:this[P]=new Int8Array(65536)}};function d(L,P,O){this.data=L,this.start=P,this.end=O}d.prototype={get decoder(){var L=new i.ArithmeticDecoder(this.data,this.start,this.end);return(0,a.shadow)(this,"decoder",L)},get contextCache(){var L=new l;return(0,a.shadow)(this,"contextCache",L)}};function c(L,P,O){var E=L.getContexts(P),w=1;function A(C){for(var x=0,F=0;F<C;F++){var $=O.readBit(E,w);w=w<256?w<<1|$:(w<<1|$)&511|256,x=x<<1|$}return x>>>0}var M=A(1),j=A(1)?A(1)?A(1)?A(1)?A(1)?A(32)+4436:A(12)+340:A(8)+84:A(6)+20:A(4)+4:A(2);return M===0?j:j>0?-j:null}function y(L,P,O){for(var E=L.getContexts("IAID"),w=1,A=0;A<O;A++){var M=P.readBit(E,w);w=w<<1|M}return O<31?w&(1<<O)-1:w&2147483647}var u=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],S=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],V=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],U=[39717,1941,229,405],z=[32,8];function D(L,P,O){var E=O.decoder,w=O.contextCache.getContexts("GB"),A,M,j,C,x,F,$,G=[],Z=31735;for(M=0;M<P;M++)for(x=G[M]=new Uint8Array(L),F=M<1?x:G[M-1],$=M<2?x:G[M-2],A=$[0]<<13|$[1]<<12|$[2]<<11|F[0]<<7|F[1]<<6|F[2]<<5|F[3]<<4,j=0;j<L;j++)x[j]=C=E.readBit(w,A),A=(A&Z)<<1|(j+3<L?$[j+3]<<11:0)|(j+4<L?F[j+4]<<4:0)|C;return G}function k(L,P,O,E,w,A,M,j){if(L)throw new s("MMR encoding is not supported");if(E===0&&!A&&!w&&M.length===4&&M[0].x===3&&M[0].y===-1&&M[1].x===-3&&M[1].y===-1&&M[2].x===2&&M[2].y===-2&&M[3].x===-2&&M[3].y===-2)return D(P,O,j);var C=!!A,x=S[E].concat(M);x.sort(function(Be,wt){return Be.y-wt.y||Be.x-wt.x});var F=x.length,$=new Int8Array(F),G=new Int8Array(F),Z=[],J=0,Y=0,ee=0,ae=0,pe,se;for(se=0;se<F;se++)$[se]=x[se].x,G[se]=x[se].y,Y=Math.min(Y,x[se].x),ee=Math.max(ee,x[se].x),ae=Math.min(ae,x[se].y),se<F-1&&x[se].y===x[se+1].y&&x[se].x===x[se+1].x-1?J|=1<<F-1-se:Z.push(se);var ue=Z.length,le=new Int8Array(ue),ie=new Int8Array(ue),de=new Uint16Array(ue);for(pe=0;pe<ue;pe++)se=Z[pe],le[pe]=x[se].x,ie[pe]=x[se].y,de[pe]=1<<F-1-se;for(var fe=-Y,he=-ae,Se=P-ee,Ce=U[E],Ae=new Uint8Array(P),Ee=[],ke=j.decoder,Fe=j.contextCache.getContexts("GB"),Pe=0,Ie,$e,Ke,Ze=0,ot,et,ct=0;ct<O;ct++){if(w){var ht=ke.readBit(Fe,Ce);if(Pe^=ht,Pe){Ee.push(Ae);continue}}for(Ae=new Uint8Array(Ae),Ee.push(Ae),Ie=0;Ie<P;Ie++){if(C&&A[ct][Ie]){Ae[Ie]=0;continue}if(Ie>=fe&&Ie<Se&&ct>=he)for(Ze=Ze<<1&J,se=0;se<ue;se++)$e=ct+ie[se],Ke=Ie+le[se],ot=Ee[$e][Ke],ot&&(ot=de[se],Ze|=ot);else for(Ze=0,et=F-1,se=0;se<F;se++,et--)Ke=Ie+$[se],Ke>=0&&Ke<P&&($e=ct+G[se],$e>=0&&(ot=Ee[$e][Ke],ot&&(Ze|=ot<<et)));var Ge=ke.readBit(Fe,Ze);Ae[Ie]=Ge}}return Ee}function T(L,P,O,E,w,A,M,j,C){var x=V[O].coding;O===0&&(x=x.concat([j[0]]));var F=x.length,$=new Int32Array(F),G=new Int32Array(F),Z;for(Z=0;Z<F;Z++)$[Z]=x[Z].x,G[Z]=x[Z].y;var J=V[O].reference;O===0&&(J=J.concat([j[1]]));var Y=J.length,ee=new Int32Array(Y),ae=new Int32Array(Y);for(Z=0;Z<Y;Z++)ee[Z]=J[Z].x,ae[Z]=J[Z].y;for(var pe=E[0].length,se=E.length,ue=z[O],le=[],ie=C.decoder,de=C.contextCache.getContexts("GR"),fe=0,he=0;he<P;he++){if(M){var Se=ie.readBit(de,ue);if(fe^=Se,fe)throw new s("prediction is not supported")}var Ce=new Uint8Array(L);le.push(Ce);for(var Ae=0;Ae<L;Ae++){var Ee,ke,Fe=0;for(Z=0;Z<F;Z++)Ee=he+G[Z],ke=Ae+$[Z],Ee<0||ke<0||ke>=L?Fe<<=1:Fe=Fe<<1|le[Ee][ke];for(Z=0;Z<Y;Z++)Ee=he+ae[Z]-A,ke=Ae+ee[Z]-w,Ee<0||Ee>=se||ke<0||ke>=pe?Fe<<=1:Fe=Fe<<1|E[Ee][ke];var Pe=ie.readBit(de,Fe);Ce[Ae]=Pe}}return le}function R(L,P,O,E,w,A,M,j,C,x,F){if(L)throw new s("huffman is not supported");for(var $=[],G=0,Z=(0,a.log2)(O.length+E),J=F.decoder,Y=F.contextCache;$.length<E;){var ee=c(Y,"IADH",J);G+=ee;for(var ae=0;;){var pe=c(Y,"IADW",J);if(pe===null)break;ae+=pe;var se;if(P){var ue=c(Y,"IAAI",J);if(ue>1)se=g(L,P,ae,G,0,ue,1,O.concat($),Z,0,0,1,0,A,C,x,F);else{var le=y(Y,J,Z),ie=c(Y,"IARDX",J),de=c(Y,"IARDY",J),fe=le<O.length?O[le]:$[le-O.length];se=T(ae,G,C,fe,ie,de,!1,x,F)}}else se=k(!1,ae,G,M,!1,null,j,F);$.push(se)}}for(var he=[],Se=[],Ce=!1,Ae=O.length+E;Se.length<Ae;){for(var Ee=c(Y,"IAEX",J);Ee--;)Se.push(Ce);Ce=!Ce}for(var ke=0,Fe=O.length;ke<Fe;ke++)Se[ke]&&he.push(O[ke]);for(var Pe=0;Pe<E;ke++,Pe++)Se[ke]&&he.push($[Pe]);return he}function g(L,P,O,E,w,A,M,j,C,x,F,$,G,Z,J,Y,ee){if(L)throw new s("huffman is not supported");var ae=[],pe,se;for(pe=0;pe<E;pe++){if(se=new Uint8Array(O),w)for(var ue=0;ue<O;ue++)se[ue]=w;ae.push(se)}var le=ee.decoder,ie=ee.contextCache,de=-c(ie,"IADT",le),fe=0;for(pe=0;pe<A;){var he=c(ie,"IADT",le);de+=he;var Se=c(ie,"IAFS",le);fe+=Se;var Ce=fe;do{var Ae=M===1?0:c(ie,"IAIT",le),Ee=M*de+Ae,ke=y(ie,le,C),Fe=P&&c(ie,"IARI",le),Pe=j[ke],Ie=Pe[0].length,$e=Pe.length;if(Fe){var Ke=c(ie,"IARDW",le),Ze=c(ie,"IARDH",le),ot=c(ie,"IARDX",le),et=c(ie,"IARDY",le);Ie+=Ke,$e+=Ze,Pe=T(Ie,$e,J,Pe,(Ke>>1)+ot,(Ze>>1)+et,!1,Y,ee)}var ct=Ee-($&1?0:$e-1),ht=Ce-($&2?Ie-1:0),Ge,Be,wt;if(x){for(Ge=0;Ge<$e;Ge++)if(se=ae[ht+Ge],!!se){wt=Pe[Ge];var At=Math.min(O-ct,Ie);switch(G){case 0:for(Be=0;Be<At;Be++)se[ct+Be]|=wt[Be];break;case 2:for(Be=0;Be<At;Be++)se[ct+Be]^=wt[Be];break;default:throw new s("operator "+G+" is not supported")}}Ce+=$e-1}else{for(Be=0;Be<$e;Be++)if(se=ae[ct+Be],!!se)switch(wt=Pe[Be],G){case 0:for(Ge=0;Ge<Ie;Ge++)se[ht+Ge]|=wt[Ge];break;case 2:for(Ge=0;Ge<Ie;Ge++)se[ht+Ge]^=wt[Ge];break;default:throw new s("operator "+G+" is not supported")}Ce+=Ie-1}pe++;var Q=c(ie,"IADS",le);if(Q===null)break;Ce+=Q+F}while(!0)}return ae}function m(L,P,O,E,w,A){var M=[];M.push({x:-P,y:0}),w===0&&(M.push({x:-3,y:-1}),M.push({x:2,y:-2}),M.push({x:-2,y:-2}));for(var j=(E+1)*P,C=k(L,j,O,w,!1,null,M,A),x=[],F=0,$=void 0,G=void 0,Z=void 0,J=void 0;F<=E;){for($=[],G=P*F,Z=G+P,J=0;J<O;J++)$.push(C[J].subarray(G,Z));x.push($),F++}return x}function v(L,P,O,E,w,A,M,j,C,x,F,$,G,Z,J){var Y=null;if(M)throw new s("skip is not supported");if(j!==0)throw new s("operator "+j+" is not supported in halftone region");var ee=[],ae=void 0,pe=void 0,se=void 0;for(ae=0;ae<w;ae++){if(se=new Uint8Array(E),A)for(pe=0;pe<E;pe++)se[pe]=A;ee.push(se)}var ue=P.length,le=P[0],ie=le[0].length,de=le.length,fe=(0,a.log2)(ue),he=[];he.push({x:O<=1?3:2,y:-1}),O===0&&(he.push({x:-3,y:-1}),he.push({x:2,y:-2}),he.push({x:-2,y:-2}));var Se=[];for(ae=fe-1;ae>=0;ae--)Se[ae]=k(L,C,x,O,!1,Y,he,J);var Ce=void 0,Ae=void 0,Ee=void 0,ke=void 0,Fe=void 0,Pe=void 0,Ie=void 0,$e=void 0,Ke=void 0;for(Ce=0;Ce<x;Ce++)for(Ae=0;Ae<C;Ae++){for(Ee=0,ke=0,pe=fe-1;pe>=0;pe--)Ee=Se[pe][Ce][Ae]^Ee,ke|=Ee<<pe;if(Fe=P[ke],Pe=F+Ce*Z+Ae*G>>8,Ie=$+Ce*G-Ae*Z>>8,Pe>=0&&Pe+ie<=E&&Ie>=0&&Ie+de<=w)for(ae=0;ae<de;ae++)for(Ke=ee[Ie+ae],$e=Fe[ae],pe=0;pe<ie;pe++)Ke[Pe+pe]|=$e[pe];else{var Ze=void 0,ot=void 0;for(ae=0;ae<de;ae++)if(ot=Ie+ae,!(ot<0||ot>=w))for(Ke=ee[ot],$e=Fe[ae],pe=0;pe<ie;pe++)Ze=Pe+pe,Ze>=0&&Ze<E&&(Ke[Ze]|=$e[pe])}}return ee}function b(L,P){var O={};O.number=(0,a.readUint32)(L,P);var E=L[P+4],w=E&63;if(!u[w])throw new s("invalid segment type: "+w);O.type=w,O.typeName=u[w],O.deferredNonRetain=!!(E&128);var A=!!(E&64),M=L[P+5],j=M>>5&7,C=[M&31],x=P+6;if(M===7){j=(0,a.readUint32)(L,x-1)&536870911,x+=3;var F=j+7>>3;for(C[0]=L[x++];--F>0;)C.push(L[x++])}else if(M===5||M===6)throw new s("invalid referred-to flags");O.retainBits=C;var $=O.number<=256?1:O.number<=65536?2:4,G=[],Z,J;for(Z=0;Z<j;Z++){var Y=$===1?L[x]:$===2?(0,a.readUint16)(L,x):(0,a.readUint32)(L,x);G.push(Y),x+=$}if(O.referredTo=G,A?(O.pageAssociation=(0,a.readUint32)(L,x),x+=4):O.pageAssociation=L[x++],O.length=(0,a.readUint32)(L,x),x+=4,O.length===4294967295)if(w===38){var ee=p(L,x),ae=L[x+h],pe=!!(ae&1),se=6,ue=new Uint8Array(se);for(pe||(ue[0]=255,ue[1]=172),ue[2]=ee.height>>>24&255,ue[3]=ee.height>>16&255,ue[4]=ee.height>>8&255,ue[5]=ee.height&255,Z=x,J=L.length;Z<J;Z++){for(var le=0;le<se&&ue[le]===L[Z+le];)le++;if(le===se){O.length=Z+se;break}}if(O.length===4294967295)throw new s("segment end was not found")}else throw new s("invalid unknown segment length");return O.headerEnd=x,O}function f(L,P,O,E){for(var w=[],A=O;A<E;){var M=b(P,A);A=M.headerEnd;var j={header:M,data:P};if(L.randomAccess||(j.start=A,A+=M.length,j.end=A),w.push(j),M.type===51)break}if(L.randomAccess)for(var C=0,x=w.length;C<x;C++)w[C].start=A,A+=w[C].header.length,w[C].end=A;return w}function p(L,P){return{width:(0,a.readUint32)(L,P),height:(0,a.readUint32)(L,P+4),x:(0,a.readUint32)(L,P+8),y:(0,a.readUint32)(L,P+12),combinationOperator:L[P+16]&7}}var h=17;function _(L,P){var O=L.header,E=L.data,w=L.start,A=L.end,M,j,C,x;switch(O.type){case 0:var F={},$=(0,a.readUint16)(E,w);if(F.huffman=!!($&1),F.refinement=!!($&2),F.huffmanDHSelector=$>>2&3,F.huffmanDWSelector=$>>4&3,F.bitmapSizeSelector=$>>6&1,F.aggregationInstancesSelector=$>>7&1,F.bitmapCodingContextUsed=!!($&256),F.bitmapCodingContextRetained=!!($&512),F.template=$>>10&3,F.refinementTemplate=$>>12&1,w+=2,!F.huffman){for(x=F.template===0?4:1,j=[],C=0;C<x;C++)j.push({x:(0,a.readInt8)(E,w),y:(0,a.readInt8)(E,w+1)}),w+=2;F.at=j}if(F.refinement&&!F.refinementTemplate){for(j=[],C=0;C<2;C++)j.push({x:(0,a.readInt8)(E,w),y:(0,a.readInt8)(E,w+1)}),w+=2;F.refinementAt=j}F.numberOfExportedSymbols=(0,a.readUint32)(E,w),w+=4,F.numberOfNewSymbols=(0,a.readUint32)(E,w),w+=4,M=[F,O.number,O.referredTo,E,w,A];break;case 6:case 7:var G={};G.info=p(E,w),w+=h;var Z=(0,a.readUint16)(E,w);if(w+=2,G.huffman=!!(Z&1),G.refinement=!!(Z&2),G.stripSize=1<<(Z>>2&3),G.referenceCorner=Z>>4&3,G.transposed=!!(Z&64),G.combinationOperator=Z>>7&3,G.defaultPixelValue=Z>>9&1,G.dsOffset=Z<<17>>27,G.refinementTemplate=Z>>15&1,G.huffman){var J=(0,a.readUint16)(E,w);w+=2,G.huffmanFS=J&3,G.huffmanDS=J>>2&3,G.huffmanDT=J>>4&3,G.huffmanRefinementDW=J>>6&3,G.huffmanRefinementDH=J>>8&3,G.huffmanRefinementDX=J>>10&3,G.huffmanRefinementDY=J>>12&3,G.huffmanRefinementSizeSelector=!!(J&14)}if(G.refinement&&!G.refinementTemplate){for(j=[],C=0;C<2;C++)j.push({x:(0,a.readInt8)(E,w),y:(0,a.readInt8)(E,w+1)}),w+=2;G.refinementAt=j}if(G.numberOfSymbolInstances=(0,a.readUint32)(E,w),w+=4,G.huffman)throw new s("huffman is not supported");M=[G,O.referredTo,E,w,A];break;case 16:var Y={},ee=E[w++];Y.mmr=!!(ee&1),Y.template=ee>>1&3,Y.patternWidth=E[w++],Y.patternHeight=E[w++],Y.maxPatternIndex=(0,a.readUint32)(E,w),w+=4,M=[Y,O.number,E,w,A];break;case 22:case 23:var ae={};ae.info=p(E,w),w+=h;var pe=E[w++];ae.mmr=!!(pe&1),ae.template=pe>>1&3,ae.enableSkip=!!(pe&8),ae.combinationOperator=pe>>4&7,ae.defaultPixelValue=pe>>7&1,ae.gridWidth=(0,a.readUint32)(E,w),w+=4,ae.gridHeight=(0,a.readUint32)(E,w),w+=4,ae.gridOffsetX=(0,a.readUint32)(E,w)&4294967295,w+=4,ae.gridOffsetY=(0,a.readUint32)(E,w)&4294967295,w+=4,ae.gridVectorX=(0,a.readUint16)(E,w),w+=2,ae.gridVectorY=(0,a.readUint16)(E,w),w+=2,M=[ae,O.referredTo,E,w,A];break;case 38:case 39:var se={};se.info=p(E,w),w+=h;var ue=E[w++];if(se.mmr=!!(ue&1),se.template=ue>>1&3,se.prediction=!!(ue&8),!se.mmr){for(x=se.template===0?4:1,j=[],C=0;C<x;C++)j.push({x:(0,a.readInt8)(E,w),y:(0,a.readInt8)(E,w+1)}),w+=2;se.at=j}M=[se,E,w,A];break;case 48:var le={width:(0,a.readUint32)(E,w),height:(0,a.readUint32)(E,w+4),resolutionX:(0,a.readUint32)(E,w+8),resolutionY:(0,a.readUint32)(E,w+12)};le.height===4294967295&&delete le.height;var ie=E[w+16];(0,a.readUint16)(E,w+17),le.lossless=!!(ie&1),le.refinement=!!(ie&2),le.defaultPixelValue=ie>>2&1,le.combinationOperator=ie>>3&3,le.requiresBuffer=!!(ie&32),le.combinationOperatorOverride=!!(ie&64),M=[le];break;case 49:break;case 50:break;case 51:break;case 62:break;default:throw new s("segment type "+O.typeName+"("+O.type+") is not implemented")}var de="on"+O.typeName;de in P&&P[de].apply(P,M)}function I(L,P){for(var O=0,E=L.length;O<E;O++)_(L[O],P)}function W(L,P,O){var E=P;if(L[E]!==151||L[E+1]!==74||L[E+2]!==66||L[E+3]!==50||L[E+4]!==13||L[E+5]!==10||L[E+6]!==26||L[E+7]!==10)throw new s("invalid header");var w={};E+=8;var A=L[E++];throw w.randomAccess=!(A&1),A&2||(w.numberOfPages=(0,a.readUint32)(L,E),E+=4),f(w,L,E,O),new Error("Not implemented")}function q(L){for(var P=new B,O=0,E=L.length;O<E;O++){var w=L[O],A=f({},w.data,w.start,w.end);I(A,P)}return P.buffer}function B(){}B.prototype={onPageInformation:function(P){this.currentPageInfo=P;var O=P.width+7>>3,E=new Uint8ClampedArray(O*P.height);if(P.defaultPixelValue)for(var w=0,A=E.length;w<A;w++)E[w]=255;this.buffer=E},drawBitmap:function(P,O){var E=this.currentPageInfo,w=P.width,A=P.height,M=E.width+7>>3,j=E.combinationOperatorOverride?P.combinationOperator:E.combinationOperator,C=this.buffer,x=128>>(P.x&7),F=P.y*M+(P.x>>3),$,G,Z,J;switch(j){case 0:for($=0;$<A;$++){for(Z=x,J=F,G=0;G<w;G++)O[$][G]&&(C[J]|=Z),Z>>=1,Z||(Z=128,J++);F+=M}break;case 2:for($=0;$<A;$++){for(Z=x,J=F,G=0;G<w;G++)O[$][G]&&(C[J]^=Z),Z>>=1,Z||(Z=128,J++);F+=M}break;default:throw new s("operator "+j+" is not supported")}},onImmediateGenericRegion:function(P,O,E,w){var A=P.info,M=new d(O,E,w),j=k(P.mmr,A.width,A.height,P.template,P.prediction,null,P.at,M);this.drawBitmap(A,j)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(P,O,E,w,A,M){var j;if(P.huffman)throw new s("huffman is not supported");var C=this.symbols;C||(this.symbols=C={});for(var x=[],F=0,$=E.length;F<$;F++)x=x.concat(C[E[F]]);var G=new d(w,A,M);C[O]=R(P.huffman,P.refinement,x,P.numberOfNewSymbols,P.numberOfExportedSymbols,j,P.template,P.at,P.refinementTemplate,P.refinementAt,G)},onImmediateTextRegion:function(P,O,E,w,A){for(var M=P.info,j,C=this.symbols,x=[],F=0,$=O.length;F<$;F++)x=x.concat(C[O[F]]);var G=(0,a.log2)(x.length),Z=new d(E,w,A),J=g(P.huffman,P.refinement,M.width,M.height,P.defaultPixelValue,P.numberOfSymbolInstances,P.stripSize,x,G,P.transposed,P.dsOffset,P.referenceCorner,P.combinationOperator,j,P.refinementTemplate,P.refinementAt,Z);this.drawBitmap(M,J)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary:function(P,O,E,w,A){var M=this.patterns;M||(this.patterns=M={});var j=new d(E,w,A);M[O]=m(P.mmr,P.patternWidth,P.patternHeight,P.maxPatternIndex,P.template,j)},onImmediateHalftoneRegion:function(P,O,E,w,A){var M=this.patterns[O[0]],j=P.info,C=new d(E,w,A),x=v(P.mmr,M,P.template,j.width,j.height,P.defaultPixelValue,P.enableSkip,P.combinationOperator,P.gridWidth,P.gridHeight,P.gridOffsetX,P.gridOffsetY,P.gridVectorX,P.gridVectorY,C);this.drawBitmap(j,x)},onImmediateLosslessHalftoneRegion:function(){this.onImmediateHalftoneRegion.apply(this,arguments)}};function N(){}return N.prototype={parseChunks:function(P){return q(P)}},N}();e.Jbig2Image=t},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMapFactory=e.IdentityCMap=e.CMap=void 0;var a=r(0),i=r(2),s=r(34),t=r(5),o=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],l=function(){function S(V){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=V}return S.prototype={addCodespaceRange:function(U,z,D){this.codespaceRanges[U-1].push(z,D),this.numCodespaceRanges++},mapCidRange:function(U,z,D){for(;U<=z;)this._map[U++]=D++},mapBfRange:function(U,z,D){for(var k=D.length-1;U<=z;)this._map[U++]=D,D=D.substr(0,k)+String.fromCharCode(D.charCodeAt(k)+1)},mapBfRangeToArray:function(U,z,D){for(var k=0,T=D.length;U<=z&&k<T;)this._map[U]=D[k++],++U},mapOne:function(U,z){this._map[U]=z},lookup:function(U){return this._map[U]},contains:function(U){return this._map[U]!==void 0},forEach:function(U){var z=this._map,D=z.length;if(D<=65536)for(var k=0;k<D;k++)z[k]!==void 0&&U(k,z[k]);else for(var T in z)U(T,z[T])},charCodeOf:function(U){var z=this._map;if(z.length<=65536)return z.indexOf(U);for(var D in z)if(z[D]===U)return D|0;return-1},getMap:function(){return this._map},readCharCode:function(U,z,D){for(var k=0,T=this.codespaceRanges,R=this.codespaceRanges.length,g=0;g<R;g++){k=(k<<8|U.charCodeAt(z+g))>>>0;for(var m=T[g],v=0,b=m.length;v<b;){var f=m[v++],p=m[v++];if(k>=f&&k<=p){D.charcode=k,D.length=g+1;return}}}D.charcode=0,D.length=1},get length(){return this._map.length},get isIdentityCMap(){if(!(this.name==="Identity-H"||this.name==="Identity-V")||this._map.length!==65536)return!1;for(var V=0;V<65536;V++)if(this._map[V]!==V)return!1;return!0}},S}(),d=function(){function S(V,U){l.call(this),this.vertical=V,this.addCodespaceRange(U,0,65535)}return a.Util.inherit(S,l,{}),S.prototype={addCodespaceRange:l.prototype.addCodespaceRange,mapCidRange:function(U,z,D){throw new Error("should not call mapCidRange")},mapBfRange:function(U,z,D){throw new Error("should not call mapBfRange")},mapBfRangeToArray:function(U,z,D){throw new Error("should not call mapBfRangeToArray")},mapOne:function(U,z){throw new Error("should not call mapCidOne")},lookup:function(U){return Number.isInteger(U)&&U<=65535?U:void 0},contains:function(U){return Number.isInteger(U)&&U<=65535},forEach:function(U){for(var z=0;z<=65535;z++)U(z,z)},charCodeOf:function(U){return Number.isInteger(U)&&U<=65535?U:-1},getMap:function(){for(var U=new Array(65536),z=0;z<=65535;z++)U[z]=z;return U},readCharCode:l.prototype.readCharCode,get length(){return 65536},get isIdentityCMap(){throw new Error("should not access .isIdentityCMap")}},S}(),c=function(){function S(m,v){for(var b=0,f=0;f<=v;f++)b=b<<8|m[f];return b>>>0}function V(m,v){return v===1?String.fromCharCode(m[0],m[1]):v===3?String.fromCharCode(m[0],m[1],m[2],m[3]):String.fromCharCode.apply(null,m.subarray(0,v+1))}function U(m,v,b){for(var f=0,p=b;p>=0;p--)f+=m[p]+v[p],m[p]=f&255,f>>=8}function z(m,v){for(var b=1,f=v;f>=0&&b>0;f--)b+=m[f],m[f]=b&255,b>>=8}var D=16,k=19;function T(m){this.buffer=m,this.pos=0,this.end=m.length,this.tmpBuf=new Uint8Array(k)}T.prototype={readByte:function(){return this.pos>=this.end?-1:this.buffer[this.pos++]},readNumber:function(){var v=0,b;do{var f=this.readByte();if(f<0)throw new a.FormatError("unexpected EOF in bcmap");b=!(f&128),v=v<<7|f&127}while(!b);return v},readSigned:function(){var v=this.readNumber();return v&1?~(v>>>1):v>>>1},readHex:function(v,b){v.set(this.buffer.subarray(this.pos,this.pos+b+1)),this.pos+=b+1},readHexNumber:function(v,b){var f,p=this.tmpBuf,h=0;do{var _=this.readByte();if(_<0)throw new a.FormatError("unexpected EOF in bcmap");f=!(_&128),p[h++]=_&127}while(!f);for(var I=b,W=0,q=0;I>=0;){for(;q<8&&p.length>0;)W=p[--h]<<q|W,q+=7;v[I]=W&255,I--,W>>=8,q-=8}},readHexSigned:function(v,b){this.readHexNumber(v,b);for(var f=v[b]&1?255:0,p=0,h=0;h<=b;h++)p=(p&1)<<8|v[h],v[h]=p>>1^f},readString:function(){for(var v=this.readNumber(),b="",f=0;f<v;f++)b+=String.fromCharCode(this.readNumber());return b}};function R(m,v,b){return new Promise(function(f,p){var h=new T(m),_=h.readByte();v.vertical=!!(_&1);for(var I=null,W=new Uint8Array(D),q=new Uint8Array(D),B=new Uint8Array(D),N=new Uint8Array(D),L=new Uint8Array(D),P,O;(O=h.readByte())>=0;){var E=O>>5;if(E===7){switch(O&31){case 0:h.readString();break;case 1:I=h.readString();break}continue}var w=!!(O&16),A=O&15;if(A+1>D)throw new Error("processBinaryCMap: Invalid dataSize.");var M=1,j=h.readNumber(),C;switch(E){case 0:for(h.readHex(W,A),h.readHexNumber(q,A),U(q,W,A),v.addCodespaceRange(A+1,S(W,A),S(q,A)),C=1;C<j;C++)z(q,A),h.readHexNumber(W,A),U(W,q,A),h.readHexNumber(q,A),U(q,W,A),v.addCodespaceRange(A+1,S(W,A),S(q,A));break;case 1:for(h.readHex(W,A),h.readHexNumber(q,A),U(q,W,A),P=h.readNumber(),C=1;C<j;C++)z(q,A),h.readHexNumber(W,A),U(W,q,A),h.readHexNumber(q,A),U(q,W,A),P=h.readNumber();break;case 2:for(h.readHex(B,A),P=h.readNumber(),v.mapOne(S(B,A),P),C=1;C<j;C++)z(B,A),w||(h.readHexNumber(L,A),U(B,L,A)),P=h.readSigned()+(P+1),v.mapOne(S(B,A),P);break;case 3:for(h.readHex(W,A),h.readHexNumber(q,A),U(q,W,A),P=h.readNumber(),v.mapCidRange(S(W,A),S(q,A),P),C=1;C<j;C++)z(q,A),w?W.set(q):(h.readHexNumber(W,A),U(W,q,A)),h.readHexNumber(q,A),U(q,W,A),P=h.readNumber(),v.mapCidRange(S(W,A),S(q,A),P);break;case 4:for(h.readHex(B,M),h.readHex(N,A),v.mapOne(S(B,M),V(N,A)),C=1;C<j;C++)z(B,M),w||(h.readHexNumber(L,M),U(B,L,M)),z(N,A),h.readHexSigned(L,A),U(N,L,A),v.mapOne(S(B,M),V(N,A));break;case 5:for(h.readHex(W,M),h.readHexNumber(q,M),U(q,W,M),h.readHex(N,A),v.mapBfRange(S(W,M),S(q,M),V(N,A)),C=1;C<j;C++)z(q,M),w?W.set(q):(h.readHexNumber(W,M),U(W,q,M)),h.readHexNumber(q,M),U(q,W,M),h.readHex(N,A),v.mapBfRange(S(W,M),S(q,M),V(N,A));break;default:p(new Error("processBinaryCMap: Unknown type: "+E));return}}if(I){f(b(I));return}f(v)})}function g(){}return g.prototype={process:R},g}(),y=function(){function S(p){for(var h=0,_=0;_<p.length;_++)h=h<<8|p.charCodeAt(_);return h>>>0}function V(p){if(!(0,a.isString)(p))throw new a.FormatError("Malformed CMap: expected string.")}function U(p){if(!Number.isInteger(p))throw new a.FormatError("Malformed CMap: expected int.")}function z(p,h){for(;;){var _=h.getObj();if((0,i.isEOF)(_))break;if((0,i.isCmd)(_,"endbfchar"))return;V(_);var I=S(_);_=h.getObj(),V(_);var W=_;p.mapOne(I,W)}}function D(p,h){for(;;){var _=h.getObj();if((0,i.isEOF)(_))break;if((0,i.isCmd)(_,"endbfrange"))return;V(_);var I=S(_);_=h.getObj(),V(_);var W=S(_);if(_=h.getObj(),Number.isInteger(_)||(0,a.isString)(_)){var q=Number.isInteger(_)?String.fromCharCode(_):_;p.mapBfRange(I,W,q)}else if((0,i.isCmd)(_,"[")){_=h.getObj();for(var B=[];!(0,i.isCmd)(_,"]")&&!(0,i.isEOF)(_);)B.push(_),_=h.getObj();p.mapBfRangeToArray(I,W,B)}else break}throw new a.FormatError("Invalid bf range.")}function k(p,h){for(;;){var _=h.getObj();if((0,i.isEOF)(_))break;if((0,i.isCmd)(_,"endcidchar"))return;V(_);var I=S(_);_=h.getObj(),U(_);var W=_;p.mapOne(I,W)}}function T(p,h){for(;;){var _=h.getObj();if((0,i.isEOF)(_))break;if((0,i.isCmd)(_,"endcidrange"))return;V(_);var I=S(_);_=h.getObj(),V(_);var W=S(_);_=h.getObj(),U(_);var q=_;p.mapCidRange(I,W,q)}}function R(p,h){for(;;){var _=h.getObj();if((0,i.isEOF)(_))break;if((0,i.isCmd)(_,"endcodespacerange"))return;if(!(0,a.isString)(_))break;var I=S(_);if(_=h.getObj(),!(0,a.isString)(_))break;var W=S(_);p.addCodespaceRange(_.length,I,W)}throw new a.FormatError("Invalid codespace range.")}function g(p,h){var _=h.getObj();Number.isInteger(_)&&(p.vertical=!!_)}function m(p,h){var _=h.getObj();(0,i.isName)(_)&&(0,a.isString)(_.name)&&(p.name=_.name)}function v(p,h,_,I){var W,q;e:for(;;)try{var B=h.getObj();if((0,i.isEOF)(B))break;if((0,i.isName)(B))B.name==="WMode"?g(p,h):B.name==="CMapName"&&m(p,h),W=B;else if((0,i.isCmd)(B))switch(B.cmd){case"endcmap":break e;case"usecmap":(0,i.isName)(W)&&(q=W.name);break;case"begincodespacerange":R(p,h);break;case"beginbfchar":z(p,h);break;case"begincidchar":k(p,h);break;case"beginbfrange":D(p,h);break;case"begincidrange":T(p,h);break}}catch(N){if(N instanceof a.MissingDataException)throw N;(0,a.warn)("Invalid cMap data: "+N);continue}return!I&&q&&(I=q),I?b(p,_,I):Promise.resolve(p)}function b(p,h,_){return f(_,h).then(function(I){if(p.useCMap=I,p.numCodespaceRanges===0){for(var W=p.useCMap.codespaceRanges,q=0;q<W.length;q++)p.codespaceRanges[q]=W[q].slice();p.numCodespaceRanges=p.useCMap.numCodespaceRanges}return p.useCMap.forEach(function(B,N){p.contains(B)||p.mapOne(B,p.useCMap.lookup(B))}),p})}function f(p,h){return p==="Identity-H"?Promise.resolve(new d(!1,2)):p==="Identity-V"?Promise.resolve(new d(!0,2)):o.indexOf(p)===-1?Promise.reject(new Error("Unknown CMap name: "+p)):h?h(p).then(function(_){var I=_.cMapData,W=_.compressionType,q=new l(!0);if(W===a.CMapCompressionType.BINARY)return new c().process(I,q,function(N){return b(q,h,N)});if(W===a.CMapCompressionType.NONE){var B=new s.Lexer(new t.Stream(I));return v(q,B,h,null)}return Promise.reject(new Error("TODO: Only BINARY/NONE CMap compression is currently supported."))}):Promise.reject(new Error("Built-in CMap parameters are not provided."))}return{create:function(h){var _=h.encoding,I=h.fetchBuiltInCMap,W=h.useCMap;if((0,i.isName)(_))return f(_.name,I);if((0,i.isStream)(_)){var q=new l,B=new s.Lexer(_);return v(q,B,I,W).then(function(N){return N.isIdentityCMap?f(N.name,I):N})}return Promise.reject(new Error("Encoding required."))}}}();e.CMap=l,e.IdentityCMap=d,e.CMapFactory=y},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFontType=e.ProblematicCharRanges=e.IdentityToUnicodeMap=e.ToUnicodeMap=e.FontFlags=e.Font=e.ErrorFont=e.PRIVATE_USE_OFFSET_END=e.PRIVATE_USE_OFFSET_START=e.SEAC_ANALYSIS_ENABLED=void 0;var a=r(0),i=r(78),s=r(47),t=r(28),o=r(79),l=r(80),d=r(137),c=r(5),y=r(138),u=57344,S=63743,V=!1,U=1e3,z=!1,D={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144},k=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function T(N){if(N.fontMatrix&&N.fontMatrix[0]!==a.FONT_IDENTITY_MATRIX[0]){var L=.001/N.fontMatrix[0],P=N.widths;for(var O in P)P[O]*=L;N.defaultWidth*=L}}function R(N,L){if(!N.hasIncludedToUnicodeMap&&!N.hasEncoding&&L!==N.defaultEncoding&&!(N.toUnicode instanceof f)){var P=[],O=(0,s.getGlyphsUnicode)();for(var E in L){var w=L[E],A=(0,l.getUnicodeForGlyph)(w,O);A!==-1&&(P[E]=String.fromCharCode(A))}N.toUnicode.amend(P)}}function g(N,L){switch(N){case"Type1":return L==="Type1C"?a.FontType.TYPE1C:a.FontType.TYPE1;case"CIDFontType0":return L==="CIDFontType0C"?a.FontType.CIDFONTTYPE0C:a.FontType.CIDFONTTYPE0;case"OpenType":return a.FontType.OPENTYPE;case"TrueType":return a.FontType.TRUETYPE;case"CIDFontType2":return a.FontType.CIDFONTTYPE2;case"MMType1":return a.FontType.MMTYPE1;case"Type0":return a.FontType.TYPE0;default:return a.FontType.UNKNOWN}}function m(N,L){if(L[N]!==void 0)return N;var P=(0,l.getUnicodeForGlyph)(N,L);if(P!==-1){for(var O in L)if(L[O]===P)return O}return(0,a.info)("Unable to recover a standard glyph name for: "+N),N}var v=function(){function L(P,O,E,w,A,M,j,C){this.fontChar=P,this.unicode=O,this.accent=E,this.width=w,this.vmetric=A,this.operatorListId=M,this.isSpace=j,this.isInFont=C}return L.prototype.matchesForCache=function(P,O,E,w,A,M,j,C){return this.fontChar===P&&this.unicode===O&&this.accent===E&&this.width===w&&this.vmetric===A&&this.operatorListId===M&&this.isSpace===j&&this.isInFont===C},L}(),b=function(){function L(P){this._map=P}return L.prototype={get length(){return this._map.length},forEach:function(O){for(var E in this._map)O(E,this._map[E].charCodeAt(0))},has:function(O){return this._map[O]!==void 0},get:function(O){return this._map[O]},charCodeOf:function(O){var E=this._map;if(E.length<=65536)return E.indexOf(O);for(var w in E)if(E[w]===O)return w|0;return-1},amend:function(O){for(var E in O)this._map[E]=O[E]}},L}(),f=function(){function L(P,O){this.firstChar=P,this.lastChar=O}return L.prototype={get length(){return this.lastChar+1-this.firstChar},forEach:function(O){for(var E=this.firstChar,w=this.lastChar;E<=w;E++)O(E,E)},has:function(O){return this.firstChar<=O&&O<=this.lastChar},get:function(O){if(this.firstChar<=O&&O<=this.lastChar)return String.fromCharCode(O)},charCodeOf:function(O){return Number.isInteger(O)&&O>=this.firstChar&&O<=this.lastChar?O:-1},amend:function(O){throw new Error("Should not call amend()")}},L}(),p=function(){function L(M,j,C){M[j]=C>>8&255,M[j+1]=C&255}function P(M,j,C){M[j]=C>>24&255,M[j+1]=C>>16&255,M[j+2]=C>>8&255,M[j+3]=C&255}function O(M,j,C){var x,F;if(C instanceof Uint8Array)M.set(C,j);else if(typeof C=="string")for(x=0,F=C.length;x<F;x++)M[j++]=C.charCodeAt(x)&255;else for(x=0,F=C.length;x<F;x++)M[j++]=C[x]&255}function E(M){this.sfnt=M,this.tables=Object.create(null)}E.getSearchParams=function(j,C){for(var x=1,F=0;(x^j)>x;)x<<=1,F++;var $=x*C;return{range:$,entry:F,rangeShift:C*j-$}};var w=12,A=16;return E.prototype={toArray:function(){var j=this.sfnt,C=this.tables,x=Object.keys(C);x.sort();var F=x.length,$,G,Z,J,Y,ee=w+F*A,ae=[ee];for($=0;$<F;$++){J=C[x[$]];var pe=(J.length+3&-4)>>>0;ee+=pe,ae.push(ee)}var se=new Uint8Array(ee);for($=0;$<F;$++)J=C[x[$]],O(se,ae[$],J);j==="true"&&(j=(0,a.string32)(65536)),se[0]=j.charCodeAt(0)&255,se[1]=j.charCodeAt(1)&255,se[2]=j.charCodeAt(2)&255,se[3]=j.charCodeAt(3)&255,L(se,4,F);var ue=E.getSearchParams(F,16);for(L(se,6,ue.range),L(se,8,ue.entry),L(se,10,ue.rangeShift),ee=w,$=0;$<F;$++){Y=x[$],se[ee]=Y.charCodeAt(0)&255,se[ee+1]=Y.charCodeAt(1)&255,se[ee+2]=Y.charCodeAt(2)&255,se[ee+3]=Y.charCodeAt(3)&255;var le=0;for(G=ae[$],Z=ae[$+1];G<Z;G+=4){var ie=(0,a.readUint32)(se,G);le=le+ie>>>0}P(se,ee+4,le),P(se,ee+8,ae[$]),P(se,ee+12,C[Y].length),ee+=A}return se},addTable:function(j,C){if(j in this.tables)throw new Error("Table "+j+" already exists");this.tables[j]=C}},E}(),h=new Int32Array([0,32,127,161,173,174,1536,1920,2208,4256,6016,6144,7168,7248,8192,8208,8209,8210,8232,8240,8287,8304,9676,9677,12288,12289,12644,12645,43616,43648,65520,65536]),_=function(){function L(se,ue,le){var ie;this.name=se,this.loadedName=le.loadedName,this.isType3Font=le.isType3Font,this.sizes=[],this.missingFile=!1,this.glyphCache=Object.create(null),this.isSerifFont=!!(le.flags&D.Serif),this.isSymbolicFont=!!(le.flags&D.Symbolic),this.isMonospace=!!(le.flags&D.FixedPitch);var de=le.type,fe=le.subtype;if(this.type=de,this.subtype=fe,this.fallbackName=this.isMonospace?"monospace":this.isSerifFont?"serif":"sans-serif",this.differences=le.differences,this.widths=le.widths,this.defaultWidth=le.defaultWidth,this.composite=le.composite,this.wideChars=le.wideChars,this.cMap=le.cMap,this.ascent=le.ascent/U,this.descent=le.descent/U,this.fontMatrix=le.fontMatrix,this.bbox=le.bbox,this.defaultEncoding=le.defaultEncoding,this.toUnicode=le.toUnicode,this.toFontChar=[],le.type==="Type3"){for(ie=0;ie<256;ie++)this.toFontChar[ie]=this.differences[ie]||le.defaultEncoding[ie];this.fontType=a.FontType.TYPE3;return}if(this.cidEncoding=le.cidEncoding,this.vertical=le.vertical,this.vertical&&(this.vmetrics=le.vmetrics,this.defaultVMetrics=le.defaultVMetrics),!ue||ue.isEmpty){ue&&(0,a.warn)('Font file is empty in "'+se+'" ('+this.loadedName+")"),this.fallbackToSystemFont();return}fe==="Type1C"&&(de!=="Type1"&&de!=="MMType1"?j(ue)?fe="TrueType":de="Type1":C(ue)&&(fe="OpenType")),fe==="CIDFontType0C"&&de!=="CIDFontType0"&&(de="CIDFontType0"),de==="CIDFontType0"&&(x(ue)?fe="CIDFontType0":C(ue)?fe="OpenType":fe="CIDFontType0C"),fe==="OpenType"&&de!=="OpenType"&&(de="OpenType");try{var he;switch(de){case"MMType1":(0,a.info)("MMType1 font ("+se+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var Se=fe==="Type1C"||fe==="CIDFontType0C"?new B(ue,le):new q(se,ue,le);T(le),he=this.convert(se,Se,le);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",he=this.checkAndRepair(se,ue,le),this.isOpenType&&(T(le),de="OpenType");break;default:throw new a.FormatError("Font "+de+" is not supported")}}catch(Ce){if(!(Ce instanceof a.FormatError))throw Ce;(0,a.warn)(Ce),this.fallbackToSystemFont();return}this.data=he,this.fontType=g(de,fe),this.fontMatrix=le.fontMatrix,this.widths=le.widths,this.defaultWidth=le.defaultWidth,this.toUnicode=le.toUnicode,this.encoding=le.baseEncoding,this.seacMap=le.seacMap,this.loading=!0}L.getFontID=function(){var se=1;return function(){return String(se++)}}();function P(se,ue){return(se<<8)+ue}function O(se,ue,le){se[ue+1]=le,se[ue]=le>>>8}function E(se,ue){var le=(se<<8)+ue;return le&32768?le-65536:le}function w(se,ue,le,ie){return(se<<24)+(ue<<16)+(le<<8)+ie}function A(se){return String.fromCharCode(se>>8&255,se&255)}function M(se){return se=se>32767?32767:se<-32768?-32768:se,String.fromCharCode(se>>8&255,se&255)}function j(se){var ue=se.peekBytes(4);return(0,a.readUint32)(ue,0)===65536}function C(se){var ue=se.peekBytes(4);return(0,a.bytesToString)(ue)==="OTTO"}function x(se){var ue=se.peekBytes(2);return ue[0]===37&&ue[1]===33||ue[0]===128&&ue[1]===1}function F(se,ue,le){for(var ie=[],de,fe=0,he=se.length;fe<he;fe++)de=(0,l.getUnicodeForGlyph)(se[fe],ue),de!==-1&&(ie[fe]=de);for(var Se in le)de=(0,l.getUnicodeForGlyph)(le[Se],ue),de!==-1&&(ie[+Se]=de);return ie}function $(se){for(var ue=0,le=h.length-1;ue<le;){var ie=ue+le+1>>1;se<h[ie]?le=ie-1:ue=ie}return!(ue&1)}function G(se,ue,le){var ie=ue.toUnicode,de=!!(ue.flags&D.Symbolic),fe=ue.toUnicode instanceof f,he=Object.create(null),Se=[],Ce=[],Ae=u;for(var Ee in se){Ee|=0;var ke=se[Ee];if(!le[ke]){var Fe=Ee,Pe=!1;if(!fe&&ie.has(Ee)){Pe=!0;var Ie=ie.get(Fe);Ie.length===1&&(Fe=Ie.charCodeAt(0))}if(Ce[Fe]!==void 0||$(Fe)||de&&!Pe)do{if(Ae>S){(0,a.warn)("Ran out of space in font private use area.");break}Fe=Ae++,V&&Fe===61440&&(Fe=61472,Ae=Fe+1)}while(Ce[Fe]!==void 0);he[Fe]=ke,Se[Ee]=Fe,Ce[Fe]=!0}}return{toFontChar:Se,charCodeToGlyphId:he,nextAvailableFontCharCode:Ae}}function Z(se,ue){var le=[];for(var ie in se)se[ie]>=ue||le.push({fontCharCode:ie|0,glyphId:se[ie]});le.length===0&&le.push({fontCharCode:0,glyphId:0}),le.sort(function(ke,Fe){return ke.fontCharCode-Fe.fontCharCode});for(var de=[],fe=le.length,he=0;he<fe;){var Se=le[he].fontCharCode,Ce=[le[he].glyphId];++he;for(var Ae=Se;he<fe&&Ae+1===le[he].fontCharCode&&(Ce.push(le[he].glyphId),++Ae,++he,Ae!==65535););de.push([Se,Ae,Ce])}return de}function J(se,ue){var le=Z(se,ue),ie=le[le.length-1][1]>65535?2:1,de="\0\0"+A(ie)+"\0\0"+(0,a.string32)(4+ie*8),fe,he,Se,Ce;for(fe=le.length-1;fe>=0&&!(le[fe][0]<=65535);--fe);var Ae=fe+1;le[fe][0]<65535&&le[fe][1]===65535&&(le[fe][1]=65534);var Ee=le[fe][1]<65535?1:0,ke=Ae+Ee,Fe=p.getSearchParams(ke,2),Pe="",Ie="",$e="",Ke="",Ze="",ot=0,et,ct,ht,Ge;for(fe=0,he=Ae;fe<he;fe++){et=le[fe],ct=et[0],ht=et[1],Pe+=A(ct),Ie+=A(ht),Ge=et[2];var Be=!0;for(Se=1,Ce=Ge.length;Se<Ce;++Se)if(Ge[Se]!==Ge[Se-1]+1){Be=!1;break}if(Be){var At=Ge[0];$e+=A(At-ct&65535),Ke+=A(0)}else{var wt=(ke-fe)*2+ot*2;for(ot+=ht-ct+1,$e+=A(0),Ke+=A(wt),Se=0,Ce=Ge.length;Se<Ce;++Se)Ze+=A(Ge[Se])}}Ee>0&&(Ie+="\xFF\xFF",Pe+="\xFF\xFF",$e+="\0",Ke+="\0\0");var Q="\0\0"+A(2*ke)+A(Fe.range)+A(Fe.entry)+A(Fe.rangeShift)+Ie+"\0\0"+Pe+$e+Ke+Ze,ve="",K="";if(ie>1){for(de+=`\0\0
`+(0,a.string32)(4+ie*8+4+Q.length),ve="",fe=0,he=le.length;fe<he;fe++){et=le[fe],ct=et[0],Ge=et[2];var re=Ge[0];for(Se=1,Ce=Ge.length;Se<Ce;++Se)Ge[Se]!==Ge[Se-1]+1&&(ht=et[0]+Se-1,ve+=(0,a.string32)(ct)+(0,a.string32)(ht)+(0,a.string32)(re),ct=ht+1,re=Ge[Se]);ve+=(0,a.string32)(ct)+(0,a.string32)(et[1])+(0,a.string32)(re)}K="\0\f\0\0"+(0,a.string32)(ve.length+16)+"\0\0\0\0"+(0,a.string32)(ve.length/12)}return de+"\0"+A(Q.length+4)+Q+K+ve}function Y(se){var ue=new c.Stream(se.data),le=ue.getUint16();ue.getBytes(60);var ie=ue.getUint16();if(le<4&&ie&768)return!1;var de=ue.getUint16(),fe=ue.getUint16();if(de>fe)return!1;ue.getBytes(6);var he=ue.getUint16();return he===0?!1:(se.data[8]=se.data[9]=0,!0)}function ee(se,ue,le){le=le||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};var ie=0,de=0,fe=0,he=0,Se=null,Ce=0;if(ue)for(var Ae in ue){Ae|=0,(Se>Ae||!Se)&&(Se=Ae),Ce<Ae&&(Ce=Ae);var Ee=(0,l.getUnicodeRangeFor)(Ae);if(Ee<32)ie|=1<<Ee;else if(Ee<64)de|=1<<Ee-32;else if(Ee<96)fe|=1<<Ee-64;else if(Ee<123)he|=1<<Ee-96;else throw new a.FormatError("Unicode ranges Bits > 123 are reserved for internal usage")}else Se=0,Ce=255;var ke=se.bbox||[0,0,0,0],Fe=le.unitsPerEm||1/(se.fontMatrix||a.FONT_IDENTITY_MATRIX)[0],Pe=se.ascentScaled?1:Fe/U,Ie=le.ascent||Math.round(Pe*(se.ascent||ke[3])),$e=le.descent||Math.round(Pe*(se.descent||ke[1]));$e>0&&se.descent>0&&ke[1]<0&&($e=-$e);var Ke=le.yMax||Ie,Ze=-le.yMin||-$e;return"\0$\xF4\0\0\0\x8A\xBB\0\0\0\x8C\x8A\xBB\0\0\xDF\x001\0\0\0\0"+String.fromCharCode(se.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,a.string32)(ie)+(0,a.string32)(de)+(0,a.string32)(fe)+(0,a.string32)(he)+"*21*"+A(se.italicAngle?1:0)+A(Se||se.firstChar)+A(Ce||se.lastChar)+A(Ie)+A($e)+"\0d"+A(Ke)+A(Ze)+"\0\0\0\0\0\0\0\0"+A(se.xHeight)+A(se.capHeight)+A(0)+A(Se||se.firstChar)+"\0"}function ae(se){var ue=Math.floor(se.italicAngle*Math.pow(2,16));return"\0\0\0"+(0,a.string32)(ue)+"\0\0\0\0"+(0,a.string32)(se.fixedPitch)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function pe(se,ue){ue||(ue=[[],[]]);var le=[ue[0][0]||"Original licence",ue[0][1]||se,ue[0][2]||"Unknown",ue[0][3]||"uniqueID",ue[0][4]||se,ue[0][5]||"Version 0.11",ue[0][6]||"",ue[0][7]||"Unknown",ue[0][8]||"Unknown",ue[0][9]||"Unknown"],ie=[],de,fe,he,Se,Ce;for(de=0,fe=le.length;de<fe;de++){Ce=ue[1][de]||le[de];var Ae=[];for(he=0,Se=Ce.length;he<Se;he++)Ae.push(A(Ce.charCodeAt(he)));ie.push(Ae.join(""))}var Ee=[le,ie],ke=["\0","\0"],Fe=["\0\0","\0"],Pe=["\0\0","	"],Ie=le.length*ke.length,$e="\0\0"+A(Ie)+A(Ie*12+6),Ke=0;for(de=0,fe=ke.length;de<fe;de++){var Ze=Ee[de];for(he=0,Se=Ze.length;he<Se;he++){Ce=Ze[he];var ot=ke[de]+Fe[de]+Pe[de]+A(he)+A(Ce.length)+A(Ke);$e+=ot,Ke+=Ce.length}}return $e+=le.join("")+ie.join(""),$e}return L.prototype={name:null,font:null,mimetype:null,encoding:null,get renderer(){var se=d.FontRendererFactory.create(this,z);return(0,a.shadow)(this,"renderer",se)},exportData:function(){var ue={};for(var le in this)this.hasOwnProperty(le)&&(ue[le]=this[le]);return ue},fallbackToSystemFont:function(){var ue=this;this.missingFile=!0;var le,ie,de=this.name,fe=this.type,he=this.subtype,Se=de.replace(/[,_]/g,"-"),Ce=(0,o.getStdFontMap)(),Ae=(0,o.getNonStdFontMap)(),Ee=!!Ce[Se]||!!(Ae[Se]&&Ce[Ae[Se]]);if(Se=Ce[Se]||Ae[Se]||Se,this.bold=Se.search(/bold/gi)!==-1,this.italic=Se.search(/oblique/gi)!==-1||Se.search(/italic/gi)!==-1,this.black=de.search(/Black/g)!==-1,this.remeasure=Object.keys(this.widths).length>0,Ee&&fe==="CIDFontType2"&&this.cidEncoding.indexOf("Identity-")===0){var ke=(0,o.getGlyphMapForStandardFonts)(),Fe=[];for(le in ke)Fe[+le]=ke[le];if(/Arial-?Black/i.test(de)){var Pe=(0,o.getSupplementalGlyphMapForArialBlack)();for(le in Pe)Fe[+le]=Pe[le]}var Ie=this.toUnicode instanceof f;Ie||this.toUnicode.forEach(function(Ke,Ze){Fe[+Ke]=Ze}),this.toFontChar=Fe,this.toUnicode=new b(Fe)}else if(/Symbol/i.test(Se))this.toFontChar=F(t.SymbolSetEncoding,(0,s.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(Se))/Wingdings/i.test(de)&&(0,a.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=F(t.ZapfDingbatsEncoding,(0,s.getDingbatsGlyphsUnicode)(),this.differences);else if(Ee)this.toFontChar=F(this.defaultEncoding,(0,s.getGlyphsUnicode)(),this.differences);else{var $e=(0,s.getGlyphsUnicode)();this.toUnicode.forEach(function(Ke,Ze){if(!ue.composite){var ot=ue.differences[Ke]||ue.defaultEncoding[Ke];ie=(0,l.getUnicodeForGlyph)(ot,$e),ie!==-1&&(Ze=ie)}ue.toFontChar[Ke]=Ze})}this.loadedName=Se.split("-")[0],this.loading=!1,this.fontType=g(fe,he)},checkAndRepair:function(ue,le,ie){function de(_t){var st=(0,a.bytesToString)(_t.getBytes(4)),H=_t.getInt32()>>>0,ne=_t.getInt32()>>>0,oe=_t.getInt32()>>>0,we=_t.pos;_t.pos=_t.start?_t.start:0,_t.skip(ne);var Re=_t.getBytes(oe);return _t.pos=we,st==="head"&&(Re[8]=Re[9]=Re[10]=Re[11]=0,Re[17]|=32),{tag:st,checksum:H,length:oe,offset:ne,data:Re}}function fe(_t){return{version:(0,a.bytesToString)(_t.getBytes(4)),numTables:_t.getUint16(),searchRange:_t.getUint16(),entrySelector:_t.getUint16(),rangeShift:_t.getUint16()}}function he(_t,st,H,ne){if(!_t)return(0,a.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var oe,we=(st.start?st.start:0)+_t.offset;st.pos=we,st.getUint16();for(var Re=st.getUint16(),Oe,ze=!1,We=0;We<Re;We++){var at=st.getUint16(),dt=st.getUint16(),Dt=st.getInt32()>>>0,bt=!1;if(!(Oe&&Oe.platformId===at&&Oe.encodingId===dt)&&(at===0&&dt===0||at===1&&dt===0?bt=!0:at===3&&dt===1&&(ne||!Oe)?(bt=!0,H||(ze=!0)):H&&at===3&&dt===0&&(bt=!0,ze=!0),bt&&(Oe={platformId:at,encodingId:dt,offset:Dt}),ze))break}if(Oe&&(st.pos=we+Oe.offset),!Oe||st.peekByte()===-1)return(0,a.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};var qt=st.getUint16();st.getUint16(),st.getUint16();var Pr=!1,Ut=[],Vt,Br;if(qt===0){for(Vt=0;Vt<256;Vt++){var Yt=st.getByte();Yt&&Ut.push({charCode:Vt,glyphId:Yt})}Pr=!0}else if(qt===4){var aa=st.getUint16()>>1;st.getBytes(6);var ir,ma=[];for(ir=0;ir<aa;ir++)ma.push({end:st.getUint16()});for(st.getUint16(),ir=0;ir<aa;ir++)ma[ir].start=st.getUint16();for(ir=0;ir<aa;ir++)ma[ir].delta=st.getUint16();var on=0;for(ir=0;ir<aa;ir++){oe=ma[ir];var It=st.getUint16();if(!It){oe.offsetIndex=-1;continue}var Tr=(It>>1)-(aa-ir);oe.offsetIndex=Tr,on=Math.max(on,Tr+oe.end-oe.start+1)}var ua=[];for(Vt=0;Vt<on;Vt++)ua.push(st.getUint16());for(ir=0;ir<aa;ir++){oe=ma[ir],we=oe.start;var xa=oe.end,Ca=oe.delta;for(Tr=oe.offsetIndex,Vt=we;Vt<=xa;Vt++)Vt!==65535&&(Br=Tr<0?Vt:ua[Tr+Vt-we],Br=Br+Ca&65535,Ut.push({charCode:Vt,glyphId:Br}))}}else if(qt===6){var ps=st.getUint16(),j5=st.getUint16();for(Vt=0;Vt<j5;Vt++){Br=st.getUint16();var $b=ps+Vt;Ut.push({charCode:$b,glyphId:Br})}}else return(0,a.warn)("cmap table has unsupported format: "+qt),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};for(Ut.sort(function(B5,qo){return B5.charCode-qo.charCode}),We=1;We<Ut.length;We++)Ut[We-1].charCode===Ut[We].charCode&&(Ut.splice(We,1),We--);return{platformId:Oe.platformId,encodingId:Oe.encodingId,mappings:Ut,hasShortCmap:Pr}}function Se(_t,st,H,ne){if(!st){H&&(H.data=null);return}_t.pos=(_t.start?_t.start:0)+st.offset,_t.pos+=st.length-2;var oe=_t.getUint16();oe>ne&&((0,a.info)("The numOfMetrics ("+oe+") should not be greater than the numGlyphs ("+ne+")"),oe=ne,st.data[34]=(oe&65280)>>8,st.data[35]=oe&255);var we=ne-oe,Re=we-(H.length-oe*4>>1);if(Re>0){var Oe=new Uint8Array(H.length+Re*2);Oe.set(H.data),H.data=Oe}}function Ce(_t,st,H,ne,oe,we){var Re={length:0,sizeOfInstructions:0};if(H-st<=12)return Re;var Oe=_t.subarray(st,H),ze=E(Oe[0],Oe[1]);if(ze<0)return ze=-1,O(Oe,0,ze),ne.set(Oe,oe),Re.length=Oe.length,Re;var We,at=10,dt=0;for(We=0;We<ze;We++){var Dt=Oe[at]<<8|Oe[at+1];dt=Dt+1,at+=2}var bt=at,qt=Oe[at]<<8|Oe[at+1];Re.sizeOfInstructions=qt,at+=2+qt;var Pr=at,Ut=0;for(We=0;We<dt;We++){var Vt=Oe[at++];Vt&192&&(Oe[at-1]=Vt&63);var Br=(Vt&2?1:Vt&16?0:2)+(Vt&4?1:Vt&32?0:2);if(Ut+=Br,Vt&8){var Yt=Oe[at++];We+=Yt,Ut+=Yt*Br}}if(Ut===0)return Re;var aa=at+Ut;return aa>Oe.length?Re:!we&&qt>0?(ne.set(Oe.subarray(0,bt),oe),ne.set([0,0],oe+bt),ne.set(Oe.subarray(Pr,aa),oe+bt+2),aa-=qt,Oe.length-aa>3&&(aa=aa+3&-4),Re.length=aa,Re):Oe.length-aa>3?(aa=aa+3&-4,ne.set(Oe.subarray(0,aa),oe),Re.length=aa,Re):(ne.set(Oe,oe),Re.length=Oe.length,Re)}function Ae(_t,st,H){var ne=_t.data,oe=w(ne[0],ne[1],ne[2],ne[3]);oe>>16!==1&&((0,a.info)("Attempting to fix invalid version in head table: "+oe),ne[0]=0,ne[1]=1,ne[2]=0,ne[3]=0);var we=P(ne[50],ne[51]);if(we<0||we>1){(0,a.info)("Attempting to fix invalid indexToLocFormat in head table: "+we);var Re=st+1;if(H===Re<<1)ne[50]=0,ne[51]=0;else if(H===Re<<2)ne[50]=0,ne[51]=1;else throw new a.FormatError("Could not fix indexToLocFormat: "+we)}}function Ee(_t,st,H,ne,oe,we,Re){var Oe,ze,We;ne?(Oe=4,ze=function(xa,Ca){return xa[Ca]<<24|xa[Ca+1]<<16|xa[Ca+2]<<8|xa[Ca+3]},We=function(xa,Ca,ps){xa[Ca]=ps>>>24&255,xa[Ca+1]=ps>>16&255,xa[Ca+2]=ps>>8&255,xa[Ca+3]=ps&255}):(Oe=2,ze=function(xa,Ca){return xa[Ca]<<9|xa[Ca+1]<<1},We=function(xa,Ca,ps){xa[Ca]=ps>>9&255,xa[Ca+1]=ps>>1&255});var at=_t.data,dt=Oe*(1+H);at.length!==dt&&(at=new Uint8Array(dt),at.set(_t.data.subarray(0,dt)),_t.data=at);var Dt=st.data,bt=Dt.length,qt=new Uint8Array(bt),Pr=ze(at,0),Ut=0,Vt=Object.create(null);We(at,0,Ut);var Br,Yt,aa=we?H-1:H;for(Br=0,Yt=Oe;Br<aa;Br++,Yt+=Oe){var ir=ze(at,Yt);ir>bt&&(bt+3&-4)===ir&&(ir=bt),ir>bt&&(Pr=ir);var ma=Ce(Dt,Pr,ir,qt,Ut,oe),on=ma.length;on===0&&(Vt[Br]=!0),ma.sizeOfInstructions>Re&&(Re=ma.sizeOfInstructions),Ut+=on,We(at,Yt,Ut),Pr=ir}if(Ut===0){var It=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(Br=0,Yt=Oe;Br<H;Br++,Yt+=Oe)We(at,Yt,It.length);st.data=It}else if(we){var Tr=ze(at,Oe);qt.length>Tr+Ut?st.data=qt.subarray(0,Tr+Ut):(st.data=new Uint8Array(Tr+Ut),st.data.set(qt.subarray(0,Ut))),st.data.set(qt.subarray(0,Tr),Ut),We(_t.data,at.length-Oe,Ut+Tr)}else st.data=qt.subarray(0,Ut);return{missingGlyphs:Vt,maxSizeOfInstructions:Re}}function ke(_t,st,H){var ne=(le.start?le.start:0)+_t.offset;le.pos=ne;var oe=_t.length,we=ne+oe,Re=le.getInt32();le.getBytes(28);var Oe,ze=!0,We;switch(Re){case 65536:Oe=k;break;case 131072:var at=le.getUint16();if(at!==H){ze=!1;break}var dt=[];for(We=0;We<at;++We){var Dt=le.getUint16();if(Dt>=32768){ze=!1;break}dt.push(Dt)}if(!ze)break;for(var bt=[],qt=[];le.pos<we;){var Pr=le.getByte();for(qt.length=Pr,We=0;We<Pr;++We)qt[We]=String.fromCharCode(le.getByte());bt.push(qt.join(""))}for(Oe=[],We=0;We<at;++We){var Ut=dt[We];if(Ut<258){Oe.push(k[Ut]);continue}Oe.push(bt[Ut-258])}break;case 196608:break;default:(0,a.warn)("Unknown/unsupported post table version "+Re),ze=!1,st.defaultEncoding&&(Oe=st.defaultEncoding);break}return st.glyphNames=Oe,ze}function Fe(_t){var st=(le.start?le.start:0)+_t.offset;le.pos=st;var H=[[],[]],ne=_t.length,oe=st+ne,we=le.getUint16(),Re=6;if(we!==0||ne<Re)return H;var Oe=le.getUint16(),ze=le.getUint16(),We=[],at=12,dt,Dt;for(dt=0;dt<Oe&&le.pos+at<=oe;dt++){var bt={platform:le.getUint16(),encoding:le.getUint16(),language:le.getUint16(),name:le.getUint16(),length:le.getUint16(),offset:le.getUint16()};(bt.platform===1&&bt.encoding===0&&bt.language===0||bt.platform===3&&bt.encoding===1&&bt.language===1033)&&We.push(bt)}for(dt=0,Dt=We.length;dt<Dt;dt++){var qt=We[dt];if(!(qt.length<=0)){var Pr=st+ze+qt.offset;if(!(Pr+qt.length>oe)){le.pos=Pr;var Ut=qt.name;if(qt.encoding){for(var Vt="",Br=0,Yt=qt.length;Br<Yt;Br+=2)Vt+=String.fromCharCode(le.getUint16());H[1][Ut]=Vt}else H[0][Ut]=(0,a.bytesToString)(le.getBytes(qt.length))}}}return H}var Pe=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function Ie(_t,st){for(var H=_t.data,ne=0,oe,we,Re,Oe,ze,We=0,at=0,dt=[],Dt=[],bt=[],qt=st.tooComplexToFollowFunctions,Pr=!1,Ut=0,Vt=0,Br=H.length;ne<Br;){var Yt=H[ne++];if(Yt===64)if(we=H[ne++],Pr||Vt)ne+=we;else for(oe=0;oe<we;oe++)dt.push(H[ne++]);else if(Yt===65)if(we=H[ne++],Pr||Vt)ne+=we*2;else for(oe=0;oe<we;oe++)Re=H[ne++],dt.push(Re<<8|H[ne++]);else if((Yt&248)===176)if(we=Yt-176+1,Pr||Vt)ne+=we;else for(oe=0;oe<we;oe++)dt.push(H[ne++]);else if((Yt&248)===184)if(we=Yt-184+1,Pr||Vt)ne+=we*2;else for(oe=0;oe<we;oe++)Re=H[ne++],dt.push(Re<<8|H[ne++]);else if(Yt===43&&!qt){if(!Pr&&!Vt){if(Oe=dt[dt.length-1],st.functionsUsed[Oe]=!0,Oe in st.functionsStackDeltas)dt.length+=st.functionsStackDeltas[Oe];else if(Oe in st.functionsDefined&&bt.indexOf(Oe)<0){if(Dt.push({data:H,i:ne,stackTop:dt.length-1}),bt.push(Oe),ze=st.functionsDefined[Oe],!ze){(0,a.warn)("TT: CALL non-existent function"),st.hintsValid=!1;return}H=ze.data,ne=ze.i}}}else if(Yt===44&&!qt)(Pr||Vt)&&((0,a.warn)("TT: nested FDEFs not allowed"),qt=!0),Pr=!0,at=ne,Oe=dt.pop(),st.functionsDefined[Oe]={data:H,i:ne};else if(Yt===45)if(Pr)Pr=!1,We=ne;else{if(ze=Dt.pop(),!ze){(0,a.warn)("TT: ENDF bad stack"),st.hintsValid=!1;return}Oe=bt.pop(),H=ze.data,ne=ze.i,st.functionsStackDeltas[Oe]=dt.length-ze.stackTop}else if(Yt===137)(Pr||Vt)&&((0,a.warn)("TT: nested IDEFs not allowed"),qt=!0),Pr=!0,at=ne;else if(Yt===88)++Ut;else if(Yt===27)Vt=Ut;else if(Yt===89)Vt===Ut&&(Vt=0),--Ut;else if(Yt===28&&!Pr&&!Vt){var aa=dt[dt.length-1];aa>0&&(ne+=aa-1)}if(!Pr&&!Vt){var ir=Yt<=142?Pe[Yt]:Yt>=192&&Yt<=223?-1:Yt>=224?-2:0;for(Yt>=113&&Yt<=117&&(we=dt.pop(),isNaN(we)||(ir=-we*2));ir<0&&dt.length>0;)dt.pop(),ir++;for(;ir>0;)dt.push(NaN),ir--}}st.tooComplexToFollowFunctions=qt;var ma=[H];ne>H.length&&ma.push(new Uint8Array(ne-H.length)),at>We&&((0,a.warn)("TT: complementing a missing function tail"),ma.push(new Uint8Array([34,45]))),Ke(_t,ma)}function $e(_t,st){if(!_t.tooComplexToFollowFunctions){if(_t.functionsDefined.length>st){(0,a.warn)("TT: more functions defined than expected"),_t.hintsValid=!1;return}for(var H=0,ne=_t.functionsUsed.length;H<ne;H++){if(H>st){(0,a.warn)("TT: invalid function id: "+H),_t.hintsValid=!1;return}if(_t.functionsUsed[H]&&!_t.functionsDefined[H]){(0,a.warn)("TT: undefined function: "+H),_t.hintsValid=!1;return}}}}function Ke(_t,st){if(st.length>1){var H=0,ne,oe;for(ne=0,oe=st.length;ne<oe;ne++)H+=st[ne].length;H=H+3&-4;var we=new Uint8Array(H),Re=0;for(ne=0,oe=st.length;ne<oe;ne++)we.set(st[ne],Re),Re+=st[ne].length;_t.data=we,_t.length=H}}function Ze(_t,st,H,ne){var oe={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(_t&&Ie(_t,oe),st&&Ie(st,oe),_t&&$e(oe,ne),H&&H.length&1){var we=new Uint8Array(H.length+1);we.set(H.data),H.data=we}return oe.hintsValid}le=new c.Stream(new Uint8Array(le.getBytes()));var ot=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "],et=fe(le),ct=et.numTables,ht,Ge,Be=Object.create(null);Be["OS/2"]=null,Be.cmap=null,Be.head=null,Be.hhea=null,Be.hmtx=null,Be.maxp=null,Be.name=null,Be.post=null;for(var wt,At=0;At<ct;At++)wt=de(le),!(ot.indexOf(wt.tag)<0)&&wt.length!==0&&(Be[wt.tag]=wt);var Q=!Be["CFF "];if(Q){if(!Be.loca)throw new a.FormatError('Required "loca" table is not found');Be.glyf||((0,a.warn)('Required "glyf" table is not found -- trying to recover.'),Be.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{if(et.version==="OTTO"&&!(ie.composite&&ie.cidToGidMap)||!Be.head||!Be.hhea||!Be.maxp||!Be.post)return Ge=new c.Stream(Be["CFF "].data),ht=new B(Ge,ie),T(ie),this.convert(ue,ht,ie);delete Be.glyf,delete Be.loca,delete Be.fpgm,delete Be.prep,delete Be["cvt "],this.isOpenType=!0}if(!Be.maxp)throw new a.FormatError('Required "maxp" table is not found');le.pos=(le.start||0)+Be.maxp.offset;var ve=le.getInt32(),K=le.getUint16(),re=0,me=0;if(ve>=65536&&Be.maxp.length>=22){le.pos+=8;var xe=le.getUint16();xe>2&&(Be.maxp.data[14]=0,Be.maxp.data[15]=2),le.pos+=4,re=le.getUint16(),le.pos+=6,me=le.getUint16()}var _e=!1;ie.type==="CIDFontType2"&&ie.toUnicode&&ie.toUnicode.get(0)>"\0"&&(_e=!0,K++,Be.maxp.data[4]=K>>8,Be.maxp.data[5]=K&255);var ge=Ze(Be.fpgm,Be.prep,Be["cvt "],re);if(ge||(delete Be.fpgm,delete Be.prep,delete Be["cvt "]),Se(le,Be.hhea,Be.hmtx,K),!Be.head)throw new a.FormatError('Required "head" table is not found');Ae(Be.head,K,Q?Be.loca.length:0);var ye=Object.create(null);if(Q){var Ne=P(Be.head.data[50],Be.head.data[51]),Le=Ee(Be.loca,Be.glyf,K,Ne,ge,_e,me);ye=Le.missingGlyphs,ve>=65536&&Be.maxp.length>=22&&(Be.maxp.data[26]=Le.maxSizeOfInstructions>>8,Be.maxp.data[27]=Le.maxSizeOfInstructions&255)}if(!Be.hhea)throw new a.FormatError('Required "hhea" table is not found');Be.hhea.data[10]===0&&Be.hhea.data[11]===0&&(Be.hhea.data[10]=255,Be.hhea.data[11]=255);var Je={unitsPerEm:P(Be.head.data[18],Be.head.data[19]),yMax:P(Be.head.data[42],Be.head.data[43]),yMin:E(Be.head.data[38],Be.head.data[39]),ascent:P(Be.hhea.data[4],Be.hhea.data[5]),descent:E(Be.hhea.data[6],Be.hhea.data[7])};if(this.ascent=Je.ascent/Je.unitsPerEm,this.descent=Je.descent/Je.unitsPerEm,Be.post){var Xe=ke(Be.post,ie,K);Xe||(Be.post=null)}var ut=[],mt;function Tt(_t){return!ye[_t]}if(ie.composite){var Kt=ie.cidToGidMap||[],yr=Kt.length===0;ie.cMap.forEach(function(_t,st){if(st>65535)throw new a.FormatError("Max size of CID is 65,535");var H=-1;yr?H=st:Kt[st]!==void 0&&(H=Kt[st]),H>=0&&H<K&&Tt(H)&&(ut[_t]=H)}),_e&&(yr||!ut[0])&&(ut[0]=K-1)}else{var dr=he(Be.cmap,le,this.isSymbolicFont,ie.hasEncoding),hr=dr.platformId,Mr=dr.encodingId,ra=dr.mappings,Kr=ra.length;if(ie.hasEncoding&&(hr===3&&Mr===1||hr===1&&Mr===0)||hr===-1&&Mr===-1&&(0,t.getEncoding)(ie.baseEncodingName)){var Ye=[];(ie.baseEncodingName==="MacRomanEncoding"||ie.baseEncodingName==="WinAnsiEncoding")&&(Ye=(0,t.getEncoding)(ie.baseEncodingName));var De=(0,s.getGlyphsUnicode)();for(mt=0;mt<256;mt++){var He,tt;if(this.differences&&mt in this.differences?He=this.differences[mt]:mt in Ye&&Ye[mt]!==""?He=Ye[mt]:He=t.StandardEncoding[mt],!!He){tt=m(He,De);var xt;hr===3&&Mr===1?xt=De[tt]:hr===1&&Mr===0&&(xt=t.MacRomanEncoding.indexOf(tt));var lr=!1;for(At=0;At<Kr;++At)if(ra[At].charCode===xt){ut[mt]=ra[At].glyphId,lr=!0;break}if(!lr&&ie.glyphNames){var Rr=ie.glyphNames.indexOf(He);Rr===-1&&tt!==He&&(Rr=ie.glyphNames.indexOf(tt)),Rr>0&&Tt(Rr)&&(ut[mt]=Rr,lr=!0)}}}}else if(hr===0&&Mr===0)for(At=0;At<Kr;++At)ut[ra[At].charCode]=ra[At].glyphId;else for(At=0;At<Kr;++At)mt=ra[At].charCode,hr===3&&mt>=61440&&mt<=61695&&(mt&=255),ut[mt]=ra[At].glyphId}ut.length===0&&(ut[0]=0);var rt=G(ut,ie,ye);if(this.toFontChar=rt.toFontChar,Be.cmap={tag:"cmap",data:J(rt.charCodeToGlyphId,K)},(!Be["OS/2"]||!Y(Be["OS/2"]))&&(Be["OS/2"]={tag:"OS/2",data:ee(ie,rt.charCodeToGlyphId,Je)}),Be.post||(Be.post={tag:"post",data:ae(ie)}),!Q)try{Ge=new c.Stream(Be["CFF "].data);var jr=new i.CFFParser(Ge,ie,z);ht=jr.parse();var ja=new i.CFFCompiler(ht);Be["CFF "].data=ja.compile()}catch{(0,a.warn)("Failed to compile font "+ie.loadedName)}if(!Be.name)Be.name={tag:"name",data:pe(this.name)};else{var _a=Fe(Be.name);Be.name.data=pe(ue,_a)}var fa=new p(et.version);for(var Jt in Be)fa.addTable(Jt,Be[Jt].data);return fa.toArray()},convert:function(ue,le,ie){ie.fixedPitch=!1,ie.builtInEncoding&&R(ie,ie.builtInEncoding);var de=le.getGlyphMapping(ie),fe=G(de,ie,Object.create(null));this.toFontChar=fe.toFontChar;var he=le.numGlyphs;function Se(re,me){var xe=null;for(var _e in re)me===re[_e]&&(xe||(xe=[]),xe.push(_e|0));return xe}function Ce(re,me){for(var xe in re)if(me===re[xe])return xe|0;return fe.charCodeToGlyphId[fe.nextAvailableFontCharCode]=me,fe.nextAvailableFontCharCode++}var Ae=le.seacs;if(z&&Ae&&Ae.length){var Ee=ie.fontMatrix||a.FONT_IDENTITY_MATRIX,ke=le.getCharset(),Fe=Object.create(null);for(var Pe in Ae){Pe|=0;var Ie=Ae[Pe],$e=t.StandardEncoding[Ie[2]],Ke=t.StandardEncoding[Ie[3]],Ze=ke.indexOf($e),ot=ke.indexOf(Ke);if(!(Ze<0||ot<0)){var et={x:Ie[0]*Ee[0]+Ie[1]*Ee[2]+Ee[4],y:Ie[0]*Ee[1]+Ie[1]*Ee[3]+Ee[5]},ct=Se(de,Pe);if(ct)for(var ht=0,Ge=ct.length;ht<Ge;ht++){var Be=ct[ht],wt=fe.charCodeToGlyphId,At=Ce(wt,Ze),Q=Ce(wt,ot);Fe[Be]={baseFontCharCode:At,accentFontCharCode:Q,accentOffset:et}}}}ie.seacMap=Fe}var ve=1/(ie.fontMatrix||a.FONT_IDENTITY_MATRIX)[0],K=new p("OTTO");return K.addTable("CFF ",le.data),K.addTable("OS/2",ee(ie,fe.charCodeToGlyphId)),K.addTable("cmap",J(fe.charCodeToGlyphId,he)),K.addTable("head","\0\0\0\0\0\0\0\0\0\0_<\xF5\0\0"+M(ve)+"\0\0\0\0\x9E\v~'\0\0\0\0\x9E\v~'\0\0"+M(ie.descent)+"\xFF"+M(ie.ascent)+A(ie.italicAngle?2:0)+"\0\0\0\0\0\0\0"),K.addTable("hhea","\0\0\0"+M(ie.ascent)+M(ie.descent)+"\0\0\xFF\xFF\0\0\0\0\0\0"+M(ie.capHeight)+M(Math.tan(ie.italicAngle)*ie.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+A(he)),K.addTable("hmtx",function(){for(var me=le.charstrings,xe=le.cff?le.cff.widths:null,_e="\0\0\0\0",ge=1,ye=he;ge<ye;ge++){var Ne=0;if(me){var Le=me[ge-1];Ne="width"in Le?Le.width:0}else xe&&(Ne=Math.ceil(xe[ge]||0));_e+=A(Ne)+A(0)}return _e}()),K.addTable("maxp","\0\0P\0"+A(he)),K.addTable("name",pe(ue)),K.addTable("post",ae(ie)),K.toArray()},get spaceWidth(){if("_shadowWidth"in this)return this._shadowWidth;for(var se=["space","minus","one","i","I"],ue,le=0,ie=se.length;le<ie;le++){var de=se[le];if(de in this.widths){ue=this.widths[de];break}var fe=(0,s.getGlyphsUnicode)(),he=fe[de],Se=0;if(this.composite&&this.cMap.contains(he)&&(Se=this.cMap.lookup(he)),!Se&&this.toUnicode&&(Se=this.toUnicode.charCodeOf(he)),Se<=0&&(Se=he),ue=this.widths[Se],ue)break}return ue=ue||this.defaultWidth,this._shadowWidth=ue,ue},charToGlyph:function(ue,le){var ie,de,fe,he=ue;this.cMap&&this.cMap.contains(ue)&&(he=this.cMap.lookup(ue)),de=this.widths[he],de=(0,a.isNum)(de)?de:this.defaultWidth;var Se=this.vmetrics&&this.vmetrics[he],Ce=this.toUnicode.get(ue)||ue;typeof Ce=="number"&&(Ce=String.fromCharCode(Ce));var Ae=ue in this.toFontChar;ie=this.toFontChar[ue]||ue,this.missingFile&&(ie=(0,l.mapSpecialUnicodeValues)(ie)),this.isType3Font&&(fe=ie);var Ee=null;if(this.seacMap&&this.seacMap[ue]){Ae=!0;var ke=this.seacMap[ue];ie=ke.baseFontCharCode,Ee={fontChar:String.fromCharCode(ke.accentFontCharCode),offset:ke.accentOffset}}var Fe=String.fromCharCode(ie),Pe=this.glyphCache[ue];return(!Pe||!Pe.matchesForCache(Fe,Ce,Ee,de,Se,fe,le,Ae))&&(Pe=new v(Fe,Ce,Ee,de,Se,fe,le,Ae),this.glyphCache[ue]=Pe),Pe},charsToGlyphs:function(ue){var le=this.charsCache,ie,de,fe;if(le&&(ie=le[ue],ie))return ie;le||(le=this.charsCache=Object.create(null)),ie=[];var he=ue,Se=0,Ce;if(this.cMap)for(var Ae=Object.create(null);Se<ue.length;){this.cMap.readCharCode(ue,Se,Ae),fe=Ae.charcode;var Ee=Ae.length;Se+=Ee;var ke=Ee===1&&ue.charCodeAt(Se-1)===32;de=this.charToGlyph(fe,ke),ie.push(de)}else for(Se=0,Ce=ue.length;Se<Ce;++Se)fe=ue.charCodeAt(Se),de=this.charToGlyph(fe,fe===32),ie.push(de);return le[he]=ie}},L}(),I=function(){function L(P){this.error=P,this.loadedName="g_font_error",this.loading=!1}return L.prototype={charsToGlyphs:function(){return[]},exportData:function(){return{error:this.error}}},L}();function W(N,L,P){var O=Object.create(null),E,w,A,M=!!(N.flags&D.Symbolic);if(N.baseEncodingName)for(A=(0,t.getEncoding)(N.baseEncodingName),w=0;w<A.length;w++)E=P.indexOf(A[w]),E>=0?O[w]=E:O[w]=0;else if(M)for(w in L)O[w]=L[w];else for(A=t.StandardEncoding,w=0;w<A.length;w++)E=P.indexOf(A[w]),E>=0?O[w]=E:O[w]=0;var j=N.differences,C;if(j)for(w in j){var x=j[w];if(E=P.indexOf(x),E===-1){C||(C=(0,s.getGlyphsUnicode)());var F=m(x,C);F!==x&&(E=P.indexOf(F))}E>=0?O[w]=E:O[w]=0}return O}var q=function(){function L(w,A,M){for(var j=w.length,C=A.length,x=j-C,F=M,$,G=!1;F<x;){for($=0;$<C&&w[F+$]===A[$];)$++;if($>=C){for(F+=$;F<j&&(0,a.isSpace)(w[F]);)F++;G=!0;break}F++}return{found:G,length:F}}function P(w,A){var M=[101,101,120,101,99],j=w.pos,C,x,F;try{C=w.getBytes(A),x=C.length}catch(J){if(J instanceof a.MissingDataException)throw J}if(x===A&&(F=L(C,M,A-2*M.length),F.found&&F.length===A))return{stream:new c.Stream(C),length:A};(0,a.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),w.pos=j;for(var $=2048,G;;){var Z=w.peekBytes($);if(F=L(Z,M,0),F.length===0)break;if(w.pos+=F.length,F.found){G=w.pos-j;break}}return w.pos=j,G?{stream:new c.Stream(w.getBytes(G)),length:G}:((0,a.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new c.Stream(w.getBytes(A)),length:A})}function O(w,A){var M=w.getBytes();return{stream:new c.Stream(M),length:M.length}}function E(w,A,M){var j=6,C=M.length1,x=M.length2,F=A.peekBytes(j),$=F[0]===128&&F[1]===1;$&&(A.skip(j),C=F[5]<<24|F[4]<<16|F[3]<<8|F[2]);var G=P(A,C);C=G.length;var Z=new y.Type1Parser(G.stream,!1,z);Z.extractFontHeader(M),$&&(F=A.getBytes(j),x=F[5]<<24|F[4]<<16|F[3]<<8|F[2]);var J=O(A,x);x=J.length;var Y=new y.Type1Parser(J.stream,!0,z),ee=Y.extractFontProgram();for(var ae in ee.properties)M[ae]=ee.properties[ae];var pe=ee.charstrings,se=this.getType2Charstrings(pe),ue=this.getType2Subrs(ee.subrs);this.charstrings=pe,this.data=this.wrap(w,se,this.charstrings,ue,M),this.seacs=this.getSeacs(ee.charstrings)}return E.prototype={get numGlyphs(){return this.charstrings.length+1},getCharset:function(){for(var A=[".notdef"],M=this.charstrings,j=0;j<M.length;j++)A.push(M[j].glyphName);return A},getGlyphMapping:function(A){var M=this.charstrings,j=[".notdef"],C;for(C=0;C<M.length;C++)j.push(M[C].glyphName);var x=A.builtInEncoding;if(x){var F=Object.create(null);for(var $ in x)C=j.indexOf(x[$]),C>=0&&(F[$]=C)}return W(A,F,j)},getSeacs:function(A){var M,j,C=[];for(M=0,j=A.length;M<j;M++){var x=A[M];x.seac&&(C[M+1]=x.seac)}return C},getType2Charstrings:function(A){for(var M=[],j=0,C=A.length;j<C;j++)M.push(A[j].charstring);return M},getType2Subrs:function(A){var M=0,j=A.length;j<1133?M=107:j<33769?M=1131:M=32768;var C=[],x;for(x=0;x<M;x++)C.push([11]);for(x=0;x<j;x++)C.push(A[x]);return C},wrap:function(A,M,j,C,x){var F=new i.CFF;F.header=new i.CFFHeader(1,0,4,4),F.names=[A];var $=new i.CFFTopDict;$.setByName("version",391),$.setByName("Notice",392),$.setByName("FullName",393),$.setByName("FamilyName",394),$.setByName("Weight",395),$.setByName("Encoding",null),$.setByName("FontMatrix",x.fontMatrix),$.setByName("FontBBox",x.bbox),$.setByName("charset",null),$.setByName("CharStrings",null),$.setByName("Private",null),F.topDict=$;var G=new i.CFFStrings;G.add("Version 0.11"),G.add("See original notice"),G.add(A),G.add(A),G.add("Medium"),F.strings=G,F.globalSubrIndex=new i.CFFIndex;var Z=M.length,J=[0],Y,ee;for(Y=0;Y<Z;Y++){var ae=i.CFFStandardStrings.indexOf(j[Y].glyphName);ae===-1&&(ae=0),J.push(ae>>8&255,ae&255)}F.charset=new i.CFFCharset(!1,0,[],J);var pe=new i.CFFIndex;for(pe.add([139,14]),Y=0;Y<Z;Y++){var se=M[Y];if(se.length===0){pe.add([139,14]);continue}pe.add(se)}F.charStrings=pe;var ue=new i.CFFPrivateDict;ue.setByName("Subrs",null);var le=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(Y=0,ee=le.length;Y<ee;Y++){var ie=le[Y];if(ie in x.privateData){var de=x.privateData[ie];if(Array.isArray(de))for(var fe=de.length-1;fe>0;fe--)de[fe]-=de[fe-1];ue.setByName(ie,de)}}F.topDict.privateDict=ue;var he=new i.CFFIndex;for(Y=0,ee=C.length;Y<ee;Y++)he.add(C[Y]);ue.subrsIndex=he;var Se=new i.CFFCompiler(F);return Se.compile()}},E}(),B=function(){function L(P,O){this.properties=O;var E=new i.CFFParser(P,O,z);this.cff=E.parse();var w=new i.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=w.compile()}catch{(0,a.warn)("Failed to compile font "+O.loadedName),this.data=P}}return L.prototype={get numGlyphs(){return this.cff.charStrings.count},getCharset:function(){return this.cff.charset.charset},getGlyphMapping:function(){var O=this.cff,E=this.properties,w=O.charset.charset,A,M;if(E.composite){if(A=Object.create(null),O.isCIDFont)for(M=0;M<w.length;M++){var j=w[M],C=E.cMap.charCodeOf(j);A[C]=M}else for(M=0;M<O.charStrings.count;M++)A[M]=M;return A}var x=O.encoding?O.encoding.encoding:null;return A=W(E,x,w),A}},L}();(function(){typeof navigator<"u"&&/Windows/.test(navigator.userAgent)&&(e.SEAC_ANALYSIS_ENABLED=z=!0)})(),function(){typeof navigator<"u"&&/Windows.*Chrome/.test(navigator.userAgent)&&(V=!0)}(),e.SEAC_ANALYSIS_ENABLED=z,e.PRIVATE_USE_OFFSET_START=u,e.PRIVATE_USE_OFFSET_END=S,e.ErrorFont=I,e.Font=_,e.FontFlags=D,e.ToUnicodeMap=b,e.IdentityToUnicodeMap=f,e.ProblematicCharRanges=h,e.getFontType=g},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],i=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],s=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];e.ISOAdobeCharset=a,e.ExpertCharset=i,e.ExpertSubsetCharset=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontRendererFactory=void 0;var a=r(0),i=r(78),s=r(47),t=r(28),o=r(5),l=function(){function c(m,v){return m[v]<<24|m[v+1]<<16|m[v+2]<<8|m[v+3]}function y(m,v){return m[v]<<8|m[v+1]}function u(m,v,b){var f=y(m,v+2)===1?c(m,v+8):c(m,v+16),p=y(m,v+f),h,_,I;if(p===4){y(m,v+f+2);var W=y(m,v+f+6)>>1;for(_=v+f+14,h=[],I=0;I<W;I++,_+=2)h[I]={end:y(m,_)};for(_+=2,I=0;I<W;I++,_+=2)h[I].start=y(m,_);for(I=0;I<W;I++,_+=2)h[I].idDelta=y(m,_);for(I=0;I<W;I++,_+=2){var q=y(m,_);if(q!==0){h[I].ids=[];for(var B=0,N=h[I].end-h[I].start+1;B<N;B++)h[I].ids[B]=y(m,_+q),q+=2}}return h}else if(p===12){c(m,v+f+4);var L=c(m,v+f+12);for(_=v+f+16,h=[],I=0;I<L;I++)h.push({start:c(m,_),end:c(m,_+4),idDelta:c(m,_+8)-c(m,_)}),_+=12;return h}throw new a.FormatError("unsupported cmap: "+p)}function S(m,v,b,f){var p={},h=new i.CFFParser(new o.Stream(m,v,b-v),p,f),_=h.parse();return{glyphs:_.charStrings.objects,subrs:_.topDict.privateDict&&_.topDict.privateDict.subrsIndex&&_.topDict.privateDict.subrsIndex.objects,gsubrs:_.globalSubrIndex&&_.globalSubrIndex.objects}}function V(m,v,b){var f,p;b?(f=4,p=function(B,N){return B[N]<<24|B[N+1]<<16|B[N+2]<<8|B[N+3]}):(f=2,p=function(B,N){return B[N]<<9|B[N+1]<<1});for(var h=[],_=p(v,0),I=f;I<v.length;I+=f){var W=p(v,I);h.push(m.subarray(_,W)),_=W}return h}function U(m,v){for(var b=v.charCodeAt(0),f=0,p=0,h=m.length-1;p<h;){var _=p+h+1>>1;b<m[_].start?h=_-1:p=_}return m[p].start<=b&&b<=m[p].end&&(f=m[p].idDelta+(m[p].ids?m[p].ids[b-m[p].start]:b)&65535),{charCode:b,glyphId:f}}function z(m,v,b){function f(pe,se){v.push({cmd:"moveTo",args:[pe,se]})}function p(pe,se){v.push({cmd:"lineTo",args:[pe,se]})}function h(pe,se,ue,le){v.push({cmd:"quadraticCurveTo",args:[pe,se,ue,le]})}var _=0,I=(m[_]<<24|m[_+1]<<16)>>16,W,q=0,B=0;if(_+=10,I<0)do{W=m[_]<<8|m[_+1];var N=m[_+2]<<8|m[_+3];_+=4;var L,P;W&1?(L=(m[_]<<24|m[_+1]<<16)>>16,P=(m[_+2]<<24|m[_+3]<<16)>>16,_+=4):(L=m[_++],P=m[_++]),W&2?(q=L,B=P):(q=0,B=0);var O=1,E=1,w=0,A=0;W&8?(O=E=(m[_]<<24|m[_+1]<<16)/1073741824,_+=2):W&64?(O=(m[_]<<24|m[_+1]<<16)/1073741824,E=(m[_+2]<<24|m[_+3]<<16)/1073741824,_+=4):W&128&&(O=(m[_]<<24|m[_+1]<<16)/1073741824,w=(m[_+2]<<24|m[_+3]<<16)/1073741824,A=(m[_+4]<<24|m[_+5]<<16)/1073741824,E=(m[_+6]<<24|m[_+7]<<16)/1073741824,_+=8);var M=b.glyphs[N];M&&(v.push({cmd:"save"}),v.push({cmd:"transform",args:[O,w,A,E,q,B]}),z(M,v,b),v.push({cmd:"restore"}))}while(W&32);else{var j=[],C,x;for(C=0;C<I;C++)j.push(m[_]<<8|m[_+1]),_+=2;var F=m[_]<<8|m[_+1];_+=2+F;for(var $=j[j.length-1]+1,G=[];G.length<$;){W=m[_++];var Z=1;for(W&8&&(Z+=m[_++]);Z-- >0;)G.push({flags:W})}for(C=0;C<$;C++){switch(G[C].flags&18){case 0:q+=(m[_]<<24|m[_+1]<<16)>>16,_+=2;break;case 2:q-=m[_++];break;case 18:q+=m[_++];break}G[C].x=q}for(C=0;C<$;C++){switch(G[C].flags&36){case 0:B+=(m[_]<<24|m[_+1]<<16)>>16,_+=2;break;case 4:B-=m[_++];break;case 36:B+=m[_++];break}G[C].y=B}var J=0;for(_=0;_<I;_++){var Y=j[_],ee=G.slice(J,Y+1);if(ee[0].flags&1)ee.push(ee[0]);else if(ee[ee.length-1].flags&1)ee.unshift(ee[ee.length-1]);else{var ae={flags:1,x:(ee[0].x+ee[ee.length-1].x)/2,y:(ee[0].y+ee[ee.length-1].y)/2};ee.unshift(ae),ee.push(ae)}for(f(ee[0].x,ee[0].y),C=1,x=ee.length;C<x;C++)ee[C].flags&1?p(ee[C].x,ee[C].y):ee[C+1].flags&1?(h(ee[C].x,ee[C].y,ee[C+1].x,ee[C+1].y),C++):h(ee[C].x,ee[C].y,(ee[C].x+ee[C+1].x)/2,(ee[C].y+ee[C+1].y)/2);J=Y+1}}}function D(m,v,b){var f=[],p=0,h=0,_=0;function I(N,L){v.push({cmd:"moveTo",args:[N,L]})}function W(N,L){v.push({cmd:"lineTo",args:[N,L]})}function q(N,L,P,O,E,w){v.push({cmd:"bezierCurveTo",args:[N,L,P,O,E,w]})}function B(N){for(var L=0;L<N.length;){var P=!1,O=N[L++],E,w,A,M,j,C,x,F,$;switch(O){case 1:_+=f.length>>1,P=!0;break;case 3:_+=f.length>>1,P=!0;break;case 4:h+=f.pop(),I(p,h),P=!0;break;case 5:for(;f.length>0;)p+=f.shift(),h+=f.shift(),W(p,h);break;case 6:for(;f.length>0&&(p+=f.shift(),W(p,h),f.length!==0);)h+=f.shift(),W(p,h);break;case 7:for(;f.length>0&&(h+=f.shift(),W(p,h),f.length!==0);)p+=f.shift(),W(p,h);break;case 8:for(;f.length>0;)E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h);break;case 10:F=f.pop()+b.subrsBias,$=b.subrs[F],$&&B($);break;case 11:return;case 12:switch(O=N[L++],O){case 34:E=p+f.shift(),w=E+f.shift(),j=h+f.shift(),p=w+f.shift(),q(E,h,w,j,p,j),E=p+f.shift(),w=E+f.shift(),p=w+f.shift(),q(E,j,w,h,p,h);break;case 35:E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h),E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h),f.pop();break;case 36:E=p+f.shift(),j=h+f.shift(),w=E+f.shift(),C=j+f.shift(),p=w+f.shift(),q(E,j,w,C,p,C),E=p+f.shift(),w=E+f.shift(),x=C+f.shift(),p=w+f.shift(),q(E,C,w,x,p,h);break;case 37:var G=p,Z=h;E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h),E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w,h=M,Math.abs(p-G)>Math.abs(h-Z)?p+=f.shift():h+=f.shift(),q(E,A,w,M,p,h);break;default:throw new a.FormatError("unknown operator: 12 "+O)}break;case 14:if(f.length>=4){var J=f.pop(),Y=f.pop();h=f.pop(),p=f.pop(),v.push({cmd:"save"}),v.push({cmd:"translate",args:[p,h]});var ee=U(b.cmap,String.fromCharCode(b.glyphNameMap[t.StandardEncoding[J]]));D(b.glyphs[ee.glyphId],v,b),v.push({cmd:"restore"}),ee=U(b.cmap,String.fromCharCode(b.glyphNameMap[t.StandardEncoding[Y]])),D(b.glyphs[ee.glyphId],v,b)}return;case 18:_+=f.length>>1,P=!0;break;case 19:_+=f.length>>1,L+=_+7>>3,P=!0;break;case 20:_+=f.length>>1,L+=_+7>>3,P=!0;break;case 21:h+=f.pop(),p+=f.pop(),I(p,h),P=!0;break;case 22:p+=f.pop(),I(p,h),P=!0;break;case 23:_+=f.length>>1,P=!0;break;case 24:for(;f.length>2;)E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h);p+=f.shift(),h+=f.shift(),W(p,h);break;case 25:for(;f.length>6;)p+=f.shift(),h+=f.shift(),W(p,h);E=p+f.shift(),A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+f.shift(),q(E,A,w,M,p,h);break;case 26:for(f.length%2&&(p+=f.shift());f.length>0;)E=p,A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w,h=M+f.shift(),q(E,A,w,M,p,h);break;case 27:for(f.length%2&&(h+=f.shift());f.length>0;)E=p+f.shift(),A=h,w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M,q(E,A,w,M,p,h);break;case 28:f.push((N[L]<<24|N[L+1]<<16)>>16),L+=2;break;case 29:F=f.pop()+b.gsubrsBias,$=b.gsubrs[F],$&&B($);break;case 30:for(;f.length>0&&(E=p,A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+(f.length===1?f.shift():0),q(E,A,w,M,p,h),f.length!==0);)E=p+f.shift(),A=h,w=E+f.shift(),M=A+f.shift(),h=M+f.shift(),p=w+(f.length===1?f.shift():0),q(E,A,w,M,p,h);break;case 31:for(;f.length>0&&(E=p+f.shift(),A=h,w=E+f.shift(),M=A+f.shift(),h=M+f.shift(),p=w+(f.length===1?f.shift():0),q(E,A,w,M,p,h),f.length!==0);)E=p,A=h+f.shift(),w=E+f.shift(),M=A+f.shift(),p=w+f.shift(),h=M+(f.length===1?f.shift():0),q(E,A,w,M,p,h);break;default:if(O<32)throw new a.FormatError("unknown operator: "+O);O<247?f.push(O-139):O<251?f.push((O-247)*256+N[L++]+108):O<255?f.push(-(O-251)*256-N[L++]-108):(f.push((N[L]<<24|N[L+1]<<16|N[L+2]<<8|N[L+3])/65536),L+=4);break}P&&(f.length=0)}}B(m)}var k="";function T(m){this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null),this.fontMatrix=m}T.prototype={getPathJs:function(v){var b=U(this.cmap,v),f=this.compiledGlyphs[b.glyphId];return f||(f=this.compileGlyph(this.glyphs[b.glyphId]),this.compiledGlyphs[b.glyphId]=f),this.compiledCharCodeToGlyphId[b.charCode]===void 0&&(this.compiledCharCodeToGlyphId[b.charCode]=b.glyphId),f},compileGlyph:function(v){if(!v||v.length===0||v[0]===14)return k;var b=[];return b.push({cmd:"save"}),b.push({cmd:"transform",args:this.fontMatrix.slice()}),b.push({cmd:"scale",args:["size","-size"]}),this.compileGlyphImpl(v,b),b.push({cmd:"restore"}),b},compileGlyphImpl:function(){throw new Error("Children classes should implement this.")},hasBuiltPath:function(v){var b=U(this.cmap,v);return this.compiledGlyphs[b.glyphId]!==void 0&&this.compiledCharCodeToGlyphId[b.charCode]!==void 0}};function R(m,v,b){b=b||[488e-6,0,0,488e-6,0,0],T.call(this,b),this.glyphs=m,this.cmap=v}a.Util.inherit(R,T,{compileGlyphImpl:function(v,b){z(v,b,this)}});function g(m,v,b,f){b=b||[.001,0,0,.001,0,0],T.call(this,b),this.glyphs=m.glyphs,this.gsubrs=m.gsubrs||[],this.subrs=m.subrs||[],this.cmap=v,this.glyphNameMap=f||(0,s.getGlyphsUnicode)(),this.gsubrsBias=this.gsubrs.length<1240?107:this.gsubrs.length<33900?1131:32768,this.subrsBias=this.subrs.length<1240?107:this.subrs.length<33900?1131:32768}return a.Util.inherit(g,T,{compileGlyphImpl:function(v,b){D(v,b,this)}}),{create:function(v,b){for(var f=new Uint8Array(v.data),p,h,_,I,W,q,B=y(f,4),N=0,L=12;N<B;N++,L+=16){var P=(0,a.bytesToString)(f.subarray(L,L+4)),O=c(f,L+8),E=c(f,L+12);switch(P){case"cmap":p=u(f,O,O+E);break;case"glyf":h=f.subarray(O,O+E);break;case"loca":_=f.subarray(O,O+E);break;case"head":q=y(f,O+18),W=y(f,O+50);break;case"CFF ":I=S(f,O,O+E,b);break}}if(h){var w=q?[1/q,0,0,1/q,0,0]:v.fontMatrix;return new R(V(h,_,W),p,w)}return new g(I,p,v.fontMatrix,v.glyphNameMap)}}}();e.FontRendererFactory=l},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Parser=void 0;var a=r(0),i=r(28),s=r(5),t=!1,o=function(){var c={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]};function y(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}return y.prototype={convert:function(S,V,U){for(var z=S.length,D=!1,k,T,R,g=0;g<z;g++){var m=S[g];if(m<32){switch(m===12&&(m=(m<<8)+S[++g]),m){case 1:if(!t){this.stack=[];break}D=this.executeCommand(2,c.hstem);break;case 3:if(!t){this.stack=[];break}D=this.executeCommand(2,c.vstem);break;case 4:if(this.flexing){if(this.stack.length<1){D=!0;break}var v=this.stack.pop();this.stack.push(0,v);break}D=this.executeCommand(1,c.vmoveto);break;case 5:D=this.executeCommand(2,c.rlineto);break;case 6:D=this.executeCommand(1,c.hlineto);break;case 7:D=this.executeCommand(1,c.vlineto);break;case 8:D=this.executeCommand(6,c.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){D=!0;break}if(R=this.stack.pop(),!V[R]){D=!0;break}D=this.convert(V[R],V,U);break;case 11:return D;case 13:if(this.stack.length<2){D=!0;break}k=this.stack.pop(),T=this.stack.pop(),this.lsb=T,this.width=k,this.stack.push(k,T),D=this.executeCommand(2,c.hmoveto);break;case 14:this.output.push(c.endchar[0]);break;case 21:if(this.flexing)break;D=this.executeCommand(2,c.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}D=this.executeCommand(1,c.hmoveto);break;case 30:D=this.executeCommand(4,c.vhcurveto);break;case 31:D=this.executeCommand(4,c.hvcurveto);break;case 3072:this.stack=[];break;case 3073:if(!t){this.stack=[];break}D=this.executeCommand(2,c.vstem);break;case 3074:if(!t){this.stack=[];break}D=this.executeCommand(2,c.hstem);break;case 3078:U?(this.seac=this.stack.splice(-4,4),D=this.executeCommand(0,c.endchar)):D=this.executeCommand(4,c.endchar);break;case 3079:if(this.stack.length<4){D=!0;break}this.stack.pop(),k=this.stack.pop();var b=this.stack.pop();T=this.stack.pop(),this.lsb=T,this.width=k,this.stack.push(k,T,b),D=this.executeCommand(3,c.rmoveto);break;case 3084:if(this.stack.length<2){D=!0;break}var f=this.stack.pop(),p=this.stack.pop();this.stack.push(p/f);break;case 3088:if(this.stack.length<2){D=!0;break}R=this.stack.pop();var h=this.stack.pop();if(R===0&&h===3){var _=this.stack.splice(this.stack.length-17,17);this.stack.push(_[2]+_[0],_[3]+_[1],_[4],_[5],_[6],_[7],_[8],_[9],_[10],_[11],_[12],_[13],_[14]),D=this.executeCommand(13,c.flex,!0),this.flexing=!1,this.stack.push(_[15],_[16])}else R===1&&h===0&&(this.flexing=!0);break;case 3089:break;case 3105:this.stack=[];break;default:(0,a.warn)('Unknown type 1 charstring command of "'+m+'"');break}if(D)break;continue}else m<=246?m=m-139:m<=250?m=(m-247)*256+S[++g]+108:m<=254?m=-((m-251)*256)-S[++g]-108:m=(S[++g]&255)<<24|(S[++g]&255)<<16|(S[++g]&255)<<8|(S[++g]&255)<<0;this.stack.push(m)}return D},executeCommand:function(S,V,U){var z=this.stack.length;if(S>z)return!0;for(var D=z-S,k=D;k<z;k++){var T=this.stack[k];Number.isInteger(T)?this.output.push(28,T>>8&255,T&255):(T=65536*T|0,this.output.push(255,T>>24&255,T>>16&255,T>>8&255,T&255))}return this.output.push.apply(this.output,V),U?this.stack.splice(D,S):this.stack.length=0,!1}},y}(),l=function(){var c=55665,y=4330;function u(D){return D>=48&&D<=57||D>=65&&D<=70||D>=97&&D<=102}function S(D,k,T){if(T>=D.length)return new Uint8Array(0);var R=k|0,g=52845,m=22719,v,b;for(v=0;v<T;v++)R=(D[v]+R)*g+m&65535;var f=D.length-T,p=new Uint8Array(f);for(v=T,b=0;b<f;v++,b++){var h=D[v];p[b]=h^R>>8,R=(h+R)*g+m&65535}return p}function V(D,k,T){var R=k|0,g=52845,m=22719,v=D.length,b=v>>>1,f=new Uint8Array(b),p,h;for(p=0,h=0;p<v;p++){var _=D[p];if(u(_)){p++;for(var I;p<v&&!u(I=D[p]);)p++;if(p<v){var W=parseInt(String.fromCharCode(_,I),16);f[h++]=W^R>>8,R=(W+R)*g+m&65535}}}return Array.prototype.slice.call(f,T,h)}function U(D){return D===47||D===91||D===93||D===123||D===125||D===40||D===41}function z(D,k,T){if(k){var R=D.getBytes(),g=!(u(R[0])&&u(R[1])&&u(R[2])&&u(R[3]));D=new s.Stream(g?S(R,c,4):V(R,c,4))}this.seacAnalysisEnabled=!!T,this.stream=D,this.nextChar()}return z.prototype={readNumberArray:function(){this.getToken();for(var k=[];;){var T=this.getToken();if(T===null||T==="]"||T==="}")break;k.push(parseFloat(T||0))}return k},readNumber:function(){var k=this.getToken();return parseFloat(k||0)},readInt:function(){var k=this.getToken();return parseInt(k||0,10)|0},readBoolean:function(){var k=this.getToken();return k==="true"?1:0},nextChar:function(){return this.currentChar=this.stream.getByte()},getToken:function(){for(var k=!1,T=this.currentChar;;){if(T===-1)return null;if(k)(T===10||T===13)&&(k=!1);else if(T===37)k=!0;else if(!(0,a.isSpace)(T))break;T=this.nextChar()}if(U(T))return this.nextChar(),String.fromCharCode(T);var R="";do R+=String.fromCharCode(T),T=this.nextChar();while(T>=0&&!(0,a.isSpace)(T)&&!U(T));return R},readCharStrings:function(k,T){return T===-1?k:S(k,y,T)},extractFontProgram:function(){var k=this.stream,T=[],R=[],g=Object.create(null);g.lenIV=4;for(var m={subrs:[],charstrings:[],properties:{privateData:g}},v,b,f,p,h;(v=this.getToken())!==null;)if(v==="/")switch(v=this.getToken(),v){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();v=this.getToken(),!(v===null||v==="end");)if(v==="/"){var _=this.getToken();b=this.readInt(),this.getToken(),f=k.makeSubStream(k.pos,b),p=m.properties.privateData.lenIV,h=this.readCharStrings(f.getBytes(),p),k.skip(b),this.nextChar(),v=this.getToken(),v==="noaccess"&&this.getToken(),R.push({glyph:_,encoded:h})}break;case"Subrs":for(this.readInt(),this.getToken();(v=this.getToken())==="dup";){var I=this.readInt();b=this.readInt(),this.getToken(),f=k.makeSubStream(k.pos,b),p=m.properties.privateData.lenIV,h=this.readCharStrings(f.getBytes(),p),k.skip(b),this.nextChar(),v=this.getToken(),v==="noaccess"&&this.getToken(),T[I]=h}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var W=this.readNumberArray();W.length>0&&W.length%2===0&&t&&(m.properties.privateData[v]=W);break;case"StemSnapH":case"StemSnapV":m.properties.privateData[v]=this.readNumberArray();break;case"StdHW":case"StdVW":m.properties.privateData[v]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":m.properties.privateData[v]=this.readNumber();break;case"ForceBold":m.properties.privateData[v]=this.readBoolean();break}for(var q=0;q<R.length;q++){_=R[q].glyph,h=R[q].encoded;var B=new o,N=B.convert(h,T,this.seacAnalysisEnabled),L=B.output;N&&(L=[14]),m.charstrings.push({glyphName:_,charstring:L,width:B.width,lsb:B.lsb,seac:B.seac})}return m},extractFontHeader:function(k){for(var T;(T=this.getToken())!==null;)if(T==="/")switch(T=this.getToken(),T){case"FontMatrix":var R=this.readNumberArray();k.fontMatrix=R;break;case"Encoding":var g=this.getToken(),m;if(!/^\d+$/.test(g))m=(0,i.getEncoding)(g);else{m=[];var v=parseInt(g,10)|0;this.getToken();for(var b=0;b<v;b++){for(T=this.getToken();T!=="dup"&&T!=="def";)if(T=this.getToken(),T===null)return;if(T==="def")break;var f=this.readInt();this.getToken();var p=this.getToken();m[f]=p,this.getToken()}}k.builtInEncoding=m;break;case"FontBBox":var h=this.readNumberArray();k.ascent=Math.max(h[3],h[1]),k.descent=Math.min(h[1],h[3]),k.ascentScaled=!0;break}}},z}();e.Type1Parser=l},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTilingPatternIR=e.Pattern=void 0;var a=r(0),i=r(27),s=r(2),t={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7},o=function(){function y(){throw new Error("should not call Pattern constructor")}return y.prototype={getPattern:function(S){throw new Error("Should not call Pattern.getStyle: "+S)}},y.parseShading=function(u,S,V,U,z,D){var k=(0,s.isStream)(u)?u.dict:u,T=k.get("ShadingType");try{switch(T){case t.AXIAL:case t.RADIAL:return new l.RadialAxial(k,S,V,U,D);case t.FREE_FORM_MESH:case t.LATTICE_FORM_MESH:case t.COONS_PATCH_MESH:case t.TENSOR_PATCH_MESH:return new l.Mesh(u,S,V,U,D);default:throw new a.FormatError("Unsupported ShadingType: "+T)}}catch(R){if(R instanceof a.MissingDataException)throw R;return z.send("UnsupportedFeature",{featureId:a.UNSUPPORTED_FEATURES.shadingPattern}),(0,a.warn)(R),new l.Dummy}},y}(),l={};l.SMALL_NUMBER=1e-6,l.RadialAxial=function(){function y(u,S,V,U,z){this.matrix=S,this.coordsArr=u.getArray("Coords"),this.shadingType=u.get("ShadingType"),this.type="Pattern";var D=u.get("ColorSpace","CS");D=i.ColorSpace.parse(D,V,U,z),this.cs=D;var k=0,T=1;if(u.has("Domain")){var R=u.getArray("Domain");k=R[0],T=R[1]}var g=!1,m=!1;if(u.has("Extend")){var v=u.getArray("Extend");g=v[0],m=v[1]}if(this.shadingType===t.RADIAL&&(!g||!m)){var b=this.coordsArr[0],f=this.coordsArr[1],p=this.coordsArr[2],h=this.coordsArr[3],_=this.coordsArr[4],I=this.coordsArr[5],W=Math.sqrt((b-h)*(b-h)+(f-_)*(f-_));p<=I+W&&I<=p+W&&(0,a.warn)("Unsupported radial gradient.")}this.extendStart=g,this.extendEnd=m;var q=u.get("Function"),B=z.createFromArray(q),N=T-k,L=N/10,P=this.colorStops=[];if(k>=T||L<=0){(0,a.info)("Bad shading domain.");return}for(var O=new Float32Array(D.numComps),E=new Float32Array(1),w,A=k;A<=T;A+=L){E[0]=A,B(E,0,O,0),w=D.getRgb(O,0);var M=a.Util.makeCssRgb(w[0],w[1],w[2]);P.push([(A-k)/N,M])}var j="transparent";u.has("Background")&&(w=D.getRgb(u.get("Background"),0),j=a.Util.makeCssRgb(w[0],w[1],w[2])),g||(P.unshift([0,j]),P[1][0]+=l.SMALL_NUMBER),m||(P[P.length-1][0]-=l.SMALL_NUMBER,P.push([1,j])),this.colorStops=P}return y.prototype={getIR:function(){var S=this.coordsArr,V=this.shadingType,U,z,D,k,T;V===t.AXIAL?(z=[S[0],S[1]],D=[S[2],S[3]],k=null,T=null,U="axial"):V===t.RADIAL?(z=[S[0],S[1]],D=[S[3],S[4]],k=S[2],T=S[5],U="radial"):(0,a.unreachable)("getPattern type unknown: "+V);var R=this.matrix;if(R&&(z=a.Util.applyTransform(z,R),D=a.Util.applyTransform(D,R),V===t.RADIAL)){var g=a.Util.singularValueDecompose2dScale(R);k*=g[0],T*=g[1]}return["RadialAxial",U,this.colorStops,z,D,k,T]}},y}(),l.Mesh=function(){function y(b,f){this.stream=b,this.context=f,this.buffer=0,this.bufferLength=0;var p=f.numComps;this.tmpCompsBuf=new Float32Array(p);var h=f.colorSpace.numComps;this.tmpCsCompsBuf=f.colorFn?new Float32Array(h):this.tmpCompsBuf}y.prototype={get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;var b=this.stream.getByte();return b<0?!1:(this.buffer=b,this.bufferLength=8,!0)},readBits:function(f){var p=this.buffer,h=this.bufferLength;if(f===32){if(h===0)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;p=p<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var _=this.stream.getByte();return this.buffer=_&(1<<h)-1,(p<<8-h|(_&255)>>h)>>>0}if(f===8&&h===0)return this.stream.getByte();for(;h<f;)p=p<<8|this.stream.getByte(),h+=8;return h-=f,this.bufferLength=h,this.buffer=p&(1<<h)-1,p>>h},align:function(){this.buffer=0,this.bufferLength=0},readFlag:function(){return this.readBits(this.context.bitsPerFlag)},readCoordinate:function(){var f=this.context.bitsPerCoordinate,p=this.readBits(f),h=this.readBits(f),_=this.context.decode,I=f<32?1/((1<<f)-1):23283064365386963e-26;return[p*I*(_[1]-_[0])+_[0],h*I*(_[3]-_[2])+_[2]]},readComponents:function(){for(var f=this.context.numComps,p=this.context.bitsPerComponent,h=p<32?1/((1<<p)-1):23283064365386963e-26,_=this.context.decode,I=this.tmpCompsBuf,W=0,q=4;W<f;W++,q+=2){var B=this.readBits(p);I[W]=B*h*(_[q+1]-_[q])+_[q]}var N=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(I,0,N,0),this.context.colorSpace.getRgb(N,0)}};function u(b,f){for(var p=b.coords,h=b.colors,_=[],I=[],W=0;f.hasData;){var q=f.readFlag(),B=f.readCoordinate(),N=f.readComponents();if(W===0){if(!(0<=q&&q<=2))throw new a.FormatError("Unknown type4 flag");switch(q){case 0:W=3;break;case 1:I.push(I[I.length-2],I[I.length-1]),W=1;break;case 2:I.push(I[I.length-3],I[I.length-1]),W=1;break}_.push(q)}I.push(p.length),p.push(B),h.push(N),W--,f.align()}b.figures.push({type:"triangles",coords:new Int32Array(I),colors:new Int32Array(I)})}function S(b,f,p){for(var h=b.coords,_=b.colors,I=[];f.hasData;){var W=f.readCoordinate(),q=f.readComponents();I.push(h.length),h.push(W),_.push(q)}b.figures.push({type:"lattice",coords:new Int32Array(I),colors:new Int32Array(I),verticesPerRow:p})}var V=3,U=20,z=20,D=function(){function f(h){for(var _=[],I=0;I<=h;I++){var W=I/h,q=1-W;_.push(new Float32Array([q*q*q,3*W*q*q,3*W*W*q,W*W*W]))}return _}var p=[];return function(_){return p[_]||(p[_]=f(_)),p[_]}}();function k(b,f){var p=b.figures[f];(0,a.assert)(p.type==="patch","Unexpected patch mesh figure");var h=b.coords,_=b.colors,I=p.coords,W=p.colors,q=Math.min(h[I[0]][0],h[I[3]][0],h[I[12]][0],h[I[15]][0]),B=Math.min(h[I[0]][1],h[I[3]][1],h[I[12]][1],h[I[15]][1]),N=Math.max(h[I[0]][0],h[I[3]][0],h[I[12]][0],h[I[15]][0]),L=Math.max(h[I[0]][1],h[I[3]][1],h[I[12]][1],h[I[15]][1]),P=Math.ceil((N-q)*z/(b.bounds[2]-b.bounds[0]));P=Math.max(V,Math.min(U,P));var O=Math.ceil((L-B)*z/(b.bounds[3]-b.bounds[1]));O=Math.max(V,Math.min(U,O));for(var E=P+1,w=new Int32Array((O+1)*E),A=new Int32Array((O+1)*E),M=0,j=new Uint8Array(3),C=new Uint8Array(3),x=_[W[0]],F=_[W[1]],$=_[W[2]],G=_[W[3]],Z=D(O),J=D(P),Y=0;Y<=O;Y++){j[0]=(x[0]*(O-Y)+$[0]*Y)/O|0,j[1]=(x[1]*(O-Y)+$[1]*Y)/O|0,j[2]=(x[2]*(O-Y)+$[2]*Y)/O|0,C[0]=(F[0]*(O-Y)+G[0]*Y)/O|0,C[1]=(F[1]*(O-Y)+G[1]*Y)/O|0,C[2]=(F[2]*(O-Y)+G[2]*Y)/O|0;for(var ee=0;ee<=P;ee++,M++)if(!((Y===0||Y===O)&&(ee===0||ee===P))){for(var ae=0,pe=0,se=0,ue=0;ue<=3;ue++)for(var le=0;le<=3;le++,se++){var ie=Z[Y][ue]*J[ee][le];ae+=h[I[se]][0]*ie,pe+=h[I[se]][1]*ie}w[M]=h.length,h.push([ae,pe]),A[M]=_.length;var de=new Uint8Array(3);de[0]=(j[0]*(P-ee)+C[0]*ee)/P|0,de[1]=(j[1]*(P-ee)+C[1]*ee)/P|0,de[2]=(j[2]*(P-ee)+C[2]*ee)/P|0,_.push(de)}}w[0]=I[0],A[0]=W[0],w[P]=I[3],A[P]=W[1],w[E*O]=I[12],A[E*O]=W[2],w[E*O+P]=I[15],A[E*O+P]=W[3],b.figures[f]={type:"lattice",coords:w,colors:A,verticesPerRow:E}}function T(b,f){for(var p=b.coords,h=b.colors,_=new Int32Array(16),I=new Int32Array(4);f.hasData;){var W=f.readFlag();if(!(0<=W&&W<=3))throw new a.FormatError("Unknown type6 flag");var q,B,N=p.length;for(q=0,B=W!==0?8:12;q<B;q++)p.push(f.readCoordinate());var L=h.length;for(q=0,B=W!==0?2:4;q<B;q++)h.push(f.readComponents());var P,O,E,w;switch(W){case 0:_[12]=N+3,_[13]=N+4,_[14]=N+5,_[15]=N+6,_[8]=N+2,_[11]=N+7,_[4]=N+1,_[7]=N+8,_[0]=N,_[1]=N+11,_[2]=N+10,_[3]=N+9,I[2]=L+1,I[3]=L+2,I[0]=L,I[1]=L+3;break;case 1:P=_[12],O=_[13],E=_[14],w=_[15],_[12]=w,_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=E,_[11]=N+3,_[4]=O,_[7]=N+4,_[0]=P,_[1]=N+7,_[2]=N+6,_[3]=N+5,P=I[2],O=I[3],I[2]=O,I[3]=L,I[0]=P,I[1]=L+1;break;case 2:P=_[15],O=_[11],_[12]=_[3],_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=_[7],_[11]=N+3,_[4]=O,_[7]=N+4,_[0]=P,_[1]=N+7,_[2]=N+6,_[3]=N+5,P=I[3],I[2]=I[1],I[3]=L,I[0]=P,I[1]=L+1;break;case 3:_[12]=_[0],_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=_[1],_[11]=N+3,_[4]=_[2],_[7]=N+4,_[0]=_[3],_[1]=N+7,_[2]=N+6,_[3]=N+5,I[2]=I[0],I[3]=L,I[0]=I[1],I[1]=L+1;break}_[5]=p.length,p.push([(-4*p[_[0]][0]-p[_[15]][0]+6*(p[_[4]][0]+p[_[1]][0])-2*(p[_[12]][0]+p[_[3]][0])+3*(p[_[13]][0]+p[_[7]][0]))/9,(-4*p[_[0]][1]-p[_[15]][1]+6*(p[_[4]][1]+p[_[1]][1])-2*(p[_[12]][1]+p[_[3]][1])+3*(p[_[13]][1]+p[_[7]][1]))/9]),_[6]=p.length,p.push([(-4*p[_[3]][0]-p[_[12]][0]+6*(p[_[2]][0]+p[_[7]][0])-2*(p[_[0]][0]+p[_[15]][0])+3*(p[_[4]][0]+p[_[14]][0]))/9,(-4*p[_[3]][1]-p[_[12]][1]+6*(p[_[2]][1]+p[_[7]][1])-2*(p[_[0]][1]+p[_[15]][1])+3*(p[_[4]][1]+p[_[14]][1]))/9]),_[9]=p.length,p.push([(-4*p[_[12]][0]-p[_[3]][0]+6*(p[_[8]][0]+p[_[13]][0])-2*(p[_[0]][0]+p[_[15]][0])+3*(p[_[11]][0]+p[_[1]][0]))/9,(-4*p[_[12]][1]-p[_[3]][1]+6*(p[_[8]][1]+p[_[13]][1])-2*(p[_[0]][1]+p[_[15]][1])+3*(p[_[11]][1]+p[_[1]][1]))/9]),_[10]=p.length,p.push([(-4*p[_[15]][0]-p[_[0]][0]+6*(p[_[11]][0]+p[_[14]][0])-2*(p[_[12]][0]+p[_[3]][0])+3*(p[_[2]][0]+p[_[8]][0]))/9,(-4*p[_[15]][1]-p[_[0]][1]+6*(p[_[11]][1]+p[_[14]][1])-2*(p[_[12]][1]+p[_[3]][1])+3*(p[_[2]][1]+p[_[8]][1]))/9]),b.figures.push({type:"patch",coords:new Int32Array(_),colors:new Int32Array(I)})}}function R(b,f){for(var p=b.coords,h=b.colors,_=new Int32Array(16),I=new Int32Array(4);f.hasData;){var W=f.readFlag();if(!(0<=W&&W<=3))throw new a.FormatError("Unknown type7 flag");var q,B,N=p.length;for(q=0,B=W!==0?12:16;q<B;q++)p.push(f.readCoordinate());var L=h.length;for(q=0,B=W!==0?2:4;q<B;q++)h.push(f.readComponents());var P,O,E,w;switch(W){case 0:_[12]=N+3,_[13]=N+4,_[14]=N+5,_[15]=N+6,_[8]=N+2,_[9]=N+13,_[10]=N+14,_[11]=N+7,_[4]=N+1,_[5]=N+12,_[6]=N+15,_[7]=N+8,_[0]=N,_[1]=N+11,_[2]=N+10,_[3]=N+9,I[2]=L+1,I[3]=L+2,I[0]=L,I[1]=L+3;break;case 1:P=_[12],O=_[13],E=_[14],w=_[15],_[12]=w,_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=E,_[9]=N+9,_[10]=N+10,_[11]=N+3,_[4]=O,_[5]=N+8,_[6]=N+11,_[7]=N+4,_[0]=P,_[1]=N+7,_[2]=N+6,_[3]=N+5,P=I[2],O=I[3],I[2]=O,I[3]=L,I[0]=P,I[1]=L+1;break;case 2:P=_[15],O=_[11],_[12]=_[3],_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=_[7],_[9]=N+9,_[10]=N+10,_[11]=N+3,_[4]=O,_[5]=N+8,_[6]=N+11,_[7]=N+4,_[0]=P,_[1]=N+7,_[2]=N+6,_[3]=N+5,P=I[3],I[2]=I[1],I[3]=L,I[0]=P,I[1]=L+1;break;case 3:_[12]=_[0],_[13]=N+0,_[14]=N+1,_[15]=N+2,_[8]=_[1],_[9]=N+9,_[10]=N+10,_[11]=N+3,_[4]=_[2],_[5]=N+8,_[6]=N+11,_[7]=N+4,_[0]=_[3],_[1]=N+7,_[2]=N+6,_[3]=N+5,I[2]=I[0],I[3]=L,I[0]=I[1],I[1]=L+1;break}b.figures.push({type:"patch",coords:new Int32Array(_),colors:new Int32Array(I)})}}function g(b){for(var f=b.coords[0][0],p=b.coords[0][1],h=f,_=p,I=1,W=b.coords.length;I<W;I++){var q=b.coords[I][0],B=b.coords[I][1];f=f>q?q:f,p=p>B?B:p,h=h<q?q:h,_=_<B?B:_}b.bounds=[f,p,h,_]}function m(b){var f,p,h,_,I=b.coords,W=new Float32Array(I.length*2);for(f=0,h=0,p=I.length;f<p;f++){var q=I[f];W[h++]=q[0],W[h++]=q[1]}b.coords=W;var B=b.colors,N=new Uint8Array(B.length*3);for(f=0,h=0,p=B.length;f<p;f++){var L=B[f];N[h++]=L[0],N[h++]=L[1],N[h++]=L[2]}b.colors=N;var P=b.figures;for(f=0,p=P.length;f<p;f++){var O=P[f],E=O.coords,w=O.colors;for(h=0,_=E.length;h<_;h++)E[h]*=2,w[h]*=3}}function v(b,f,p,h,_){if(!(0,s.isStream)(b))throw new a.FormatError("Mesh data is not a stream");var I=b.dict;this.matrix=f,this.shadingType=I.get("ShadingType"),this.type="Pattern",this.bbox=I.getArray("BBox");var W=I.get("ColorSpace","CS");W=i.ColorSpace.parse(W,p,h,_),this.cs=W,this.background=I.has("Background")?W.getRgb(I.get("Background"),0):null;var q=I.get("Function"),B=q?_.createFromArray(q):null;this.coords=[],this.colors=[],this.figures=[];var N={bitsPerCoordinate:I.get("BitsPerCoordinate"),bitsPerComponent:I.get("BitsPerComponent"),bitsPerFlag:I.get("BitsPerFlag"),decode:I.getArray("Decode"),colorFn:B,colorSpace:W,numComps:B?1:W.numComps},L=new y(b,N),P=!1;switch(this.shadingType){case t.FREE_FORM_MESH:u(this,L);break;case t.LATTICE_FORM_MESH:var O=I.get("VerticesPerRow")|0;if(O<2)throw new a.FormatError("Invalid VerticesPerRow");S(this,L,O);break;case t.COONS_PATCH_MESH:T(this,L),P=!0;break;case t.TENSOR_PATCH_MESH:R(this,L),P=!0;break;default:(0,a.unreachable)("Unsupported mesh type.");break}if(P){g(this);for(var E=0,w=this.figures.length;E<w;E++)k(this,E)}g(this),m(this)}return v.prototype={getIR:function(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.matrix,this.bbox,this.background]}},v}(),l.Dummy=function(){function y(){this.type="Pattern"}return y.prototype={getIR:function(){return["Dummy"]}},y}();function d(c,y,u){var S=y.getArray("Matrix"),V=a.Util.normalizeRect(y.getArray("BBox")),U=y.get("XStep"),z=y.get("YStep"),D=y.get("PaintType"),k=y.get("TilingType");if(V[2]-V[0]===0||V[3]-V[1]===0)throw new a.FormatError("Invalid getTilingPatternIR /BBox array: ["+V+"].");return["TilingPattern",u,c,S,V,U,z,D,k]}e.Pattern=o,e.getTilingPatternIR=d},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bidi=void 0;var a=r(0),i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],s=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function t(U){return(U&1)!==0}function o(U){return(U&1)===0}function l(U,z,D){for(var k=z,T=U.length;k<T;++k)if(U[k]!==D)return k;return k}function d(U,z,D,k){for(var T=z;T<D;++T)U[T]=k}function c(U,z,D){for(var k=z,T=D-1;k<T;++k,--T){var R=U[k];U[k]=U[T],U[T]=R}}function y(U,z,D){return{str:U,dir:D?"ttb":z?"ltr":"rtl"}}var u=[],S=[];function V(U,z,D){var k=!0,T=U.length;if(T===0||D)return y(U,k,D);u.length=T,S.length=T;var R=0,g,m;for(g=0;g<T;++g){u[g]=U.charAt(g);var v=U.charCodeAt(g),b="L";v<=255?b=i[v]:1424<=v&&v<=1524?b="R":1536<=v&&v<=1791?(b=s[v&255],b||(0,a.warn)("Bidi: invalid Unicode character "+v.toString(16))):1792<=v&&v<=2220&&(b="AL"),(b==="R"||b==="AL"||b==="AN")&&R++,S[g]=b}if(R===0)return k=!0,y(U,k);z===-1&&(R/T<.3?(k=!0,z=0):(k=!1,z=1));var f=[];for(g=0;g<T;++g)f[g]=z;var p=t(z)?"R":"L",h=p,_=h,I=h;for(g=0;g<T;++g)S[g]==="NSM"?S[g]=I:I=S[g];I=h;var W;for(g=0;g<T;++g)W=S[g],W==="EN"?S[g]=I==="AL"?"AN":"EN":(W==="R"||W==="L"||W==="AL")&&(I=W);for(g=0;g<T;++g)W=S[g],W==="AL"&&(S[g]="R");for(g=1;g<T-1;++g)S[g]==="ES"&&S[g-1]==="EN"&&S[g+1]==="EN"&&(S[g]="EN"),S[g]==="CS"&&(S[g-1]==="EN"||S[g-1]==="AN")&&S[g+1]===S[g-1]&&(S[g]=S[g-1]);for(g=0;g<T;++g)if(S[g]==="EN"){var q;for(q=g-1;q>=0&&S[q]==="ET";--q)S[q]="EN";for(q=g+1;q<T&&S[q]==="ET";++q)S[q]="EN"}for(g=0;g<T;++g)W=S[g],(W==="WS"||W==="ES"||W==="ET"||W==="CS")&&(S[g]="ON");for(I=h,g=0;g<T;++g)W=S[g],W==="EN"?S[g]=I==="L"?"L":"EN":(W==="R"||W==="L")&&(I=W);for(g=0;g<T;++g)if(S[g]==="ON"){var B=l(S,g+1,"ON"),N=h;g>0&&(N=S[g-1]);var L=_;B+1<T&&(L=S[B+1]),N!=="L"&&(N="R"),L!=="L"&&(L="R"),N===L&&d(S,g,B,N),g=B-1}for(g=0;g<T;++g)S[g]==="ON"&&(S[g]=p);for(g=0;g<T;++g)W=S[g],o(f[g])?W==="R"?f[g]+=1:(W==="AN"||W==="EN")&&(f[g]+=2):(W==="L"||W==="AN"||W==="EN")&&(f[g]+=1);var P=-1,O=99,E;for(g=0,m=f.length;g<m;++g)E=f[g],P<E&&(P=E),O>E&&t(E)&&(O=E);for(E=P;E>=O;--E){var w=-1;for(g=0,m=f.length;g<m;++g)f[g]<E?w>=0&&(c(u,w,g),w=-1):w<0&&(w=g);w>=0&&c(u,w,f.length)}for(g=0,m=u.length;g<m;++g){var A=u[g];(A==="<"||A===">")&&(u[g]="")}return y(u.join(""),k)}e.bidi=V},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMetrics=void 0;var a=r(0),i=(0,a.getLookupTableFactory)(function(s){s.Courier=600,s["Courier-Bold"]=600,s["Courier-BoldOblique"]=600,s["Courier-Oblique"]=600,s.Helvetica=(0,a.getLookupTableFactory)(function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556}),s["Helvetica-Bold"]=(0,a.getLookupTableFactory)(function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556}),s["Helvetica-BoldOblique"]=(0,a.getLookupTableFactory)(function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556}),s["Helvetica-Oblique"]=(0,a.getLookupTableFactory)(function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556}),s.Symbol=(0,a.getLookupTableFactory)(function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790}),s["Times-Roman"]=(0,a.getLookupTableFactory)(function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500}),s["Times-Bold"]=(0,a.getLookupTableFactory)(function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500}),s["Times-BoldItalic"]=(0,a.getLookupTableFactory)(function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500}),s["Times-Italic"]=(0,a.getLookupTableFactory)(function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500}),s.ZapfDingbats=(0,a.getLookupTableFactory)(function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918})});e.getMetrics=i},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptParser=e.PostScriptLexer=void 0;var a=r(0),i=r(2),s=function(){function c(y){this.lexer=y,this.operators=[],this.token=null,this.prev=null}return c.prototype={nextToken:function(){this.prev=this.token,this.token=this.lexer.getToken()},accept:function(u){return this.token.type===u?(this.nextToken(),!0):!1},expect:function(u){if(this.accept(u))return!0;throw new a.FormatError("Unexpected symbol: found "+this.token.type+" expected "+u+".")},parse:function(){return this.nextToken(),this.expect(t.LBRACE),this.parseBlock(),this.expect(t.RBRACE),this.operators},parseBlock:function(){for(;;)if(this.accept(t.NUMBER))this.operators.push(this.prev.value);else if(this.accept(t.OPERATOR))this.operators.push(this.prev.value);else if(this.accept(t.LBRACE))this.parseCondition();else return},parseCondition:function(){var u=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(t.RBRACE),this.accept(t.IF))this.operators[u]=this.operators.length,this.operators[u+1]="jz";else if(this.accept(t.LBRACE)){var S=this.operators.length;this.operators.push(null,null);var V=this.operators.length;this.parseBlock(),this.expect(t.RBRACE),this.expect(t.IFELSE),this.operators[S]=this.operators.length,this.operators[S+1]="j",this.operators[u]=V,this.operators[u+1]="jz"}else throw new a.FormatError("PS Function: error parsing conditional.")}},c}(),t={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},o=function(){function c(u,S){this.type=u,this.value=S}var y=Object.create(null);return c.getOperator=function(S){var V=y[S];return V||(y[S]=new c(t.OPERATOR,S))},c.LBRACE=new c(t.LBRACE,"{"),c.RBRACE=new c(t.RBRACE,"}"),c.IF=new c(t.IF,"IF"),c.IFELSE=new c(t.IFELSE,"IFELSE"),c}(),l=function(){function c(y){this.stream=y,this.nextChar(),this.strBuf=[]}return c.prototype={nextChar:function(){return this.currentChar=this.stream.getByte()},getToken:function(){for(var u=!1,S=this.currentChar;;){if(S<0)return i.EOF;if(u)(S===10||S===13)&&(u=!1);else if(S===37)u=!0;else if(!(0,a.isSpace)(S))break;S=this.nextChar()}switch(S|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new o(t.NUMBER,this.getNumber());case 123:return this.nextChar(),o.LBRACE;case 125:return this.nextChar(),o.RBRACE}var V=this.strBuf;for(V.length=0,V[0]=String.fromCharCode(S);(S=this.nextChar())>=0&&(S>=65&&S<=90||S>=97&&S<=122);)V.push(String.fromCharCode(S));var U=V.join("");switch(U.toLowerCase()){case"if":return o.IF;case"ifelse":return o.IFELSE;default:return o.getOperator(U)}},getNumber:function(){var u=this.currentChar,S=this.strBuf;for(S.length=0,S[0]=String.fromCharCode(u);(u=this.nextChar())>=0&&(u>=48&&u<=57||u===45||u===46);)S.push(String.fromCharCode(u));var V=parseFloat(S.join(""));if(isNaN(V))throw new a.FormatError("Invalid floating point number: "+V);return V}},c}();e.PostScriptLexer=l,e.PostScriptParser=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i=function(t){var o=4294901760,l=65535;function d(c){var y=3285377520;this.h1=c?c&4294967295:y,this.h2=c?c&4294967295:y}return d.prototype={update:function(y){var u;if(typeof y=="string"){var S=new Uint8Array(y.length*2),V=0;for(u=0;u<y.length;u++){var U=y.charCodeAt(u);U<=255?S[V++]=U:(S[V++]=U>>>8,S[V++]=U&255)}}else if((typeof y>"u"?"undefined":a(y))==="object"&&"byteLength"in y)S=y,V=S.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");var z=V>>2,D=V-z*4,k=new Uint32Array(S.buffer,0,z),T=0,R=0,g=this.h1,m=this.h2,v=3432918353,b=461845907,f=v&l,p=b&l;for(u=0;u<z;u++)u&1?(T=k[u],T=T*v&o|T*f&l,T=T<<15|T>>>17,T=T*b&o|T*p&l,g^=T,g=g<<13|g>>>19,g=g*5+3864292196):(R=k[u],R=R*v&o|R*f&l,R=R<<15|R>>>17,R=R*b&o|R*p&l,m^=R,m=m<<13|m>>>19,m=m*5+3864292196);switch(T=0,D){case 3:T^=S[z*4+2]<<16;case 2:T^=S[z*4+1]<<8;case 1:T^=S[z*4],T=T*v&o|T*f&l,T=T<<15|T>>>17,T=T*b&o|T*p&l,z&1?g^=T:m^=T}return this.h1=g,this.h2=m,this},hexdigest:function(){var y=this.h1,u=this.h2;y^=u>>>1,y=y*3981806797&o|y*36045&l,u=u*4283543511&o|((u<<16|y>>>16)*2950163797&o)>>>16,y^=u>>>1,y=y*444984403&o|y*60499&l,u=u*3301882366&o|((u<<16|y>>>16)*3120437893&o)>>>16,y^=u>>>1;for(var S=0,V=[y,u],U="";S<V.length;S++){for(var z=(V[S]>>>0).toString(16);z.length<8;)z="0"+z;U+=z}return U}},d}();e.MurmurHash3_64=i},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFImage=void 0;var a=function(){function c(y,u){var S=[],V=!0,U=!1,z=void 0;try{for(var D=y[Symbol.iterator](),k;!(V=(k=D.next()).done)&&(S.push(k.value),!(u&&S.length===u));V=!0);}catch(T){U=!0,z=T}finally{try{!V&&D.return&&D.return()}finally{if(U)throw z}}return S}return function(y,u){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return c(y,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(0),s=r(5),t=r(2),o=r(27),l=r(74),d=function(){function y(U,z){return z&&z.canDecode(U)?z.decode(U):Promise.resolve(U)}function u(U,z,D,k){return U=z+U*D,U<0?0:U>k?k:U}function S(U,z,D,k,T,R){var g=T*R,m=z<=8?new Uint8Array(g):z<=16?new Uint16Array(g):new Uint32Array(g),v=D/T,b=k/R,f,p,h,_=0,I,W=new Uint16Array(T),q=D;for(f=0;f<T;f++)W[f]=Math.floor(f*v);for(f=0;f<R;f++)for(h=Math.floor(f*b)*q,p=0;p<T;p++)I=h+W[p],m[_++]=U[I];return m}function V(U){var z=U.xref,D=U.res,k=U.image,T=U.smask,R=T===void 0?null:T,g=U.mask,m=g===void 0?null:g,v=U.isMask,b=v===void 0?!1:v,f=U.pdfFunctionFactory;this.image=k;var p=k.dict;if(p.has("Filter")){var h=p.get("Filter").name;if(h==="JPXDecode"){var _=new l.JpxImage;_.parseImageProperties(k.stream),k.stream.reset(),k.bitsPerComponent=_.bitsPerComponent,k.numComps=_.componentsCount}else h==="JBIG2Decode"&&(k.bitsPerComponent=1,k.numComps=1)}if(this.width=p.get("Width","W"),this.height=p.get("Height","H"),this.width<1||this.height<1)throw new i.FormatError("Invalid image width: "+this.width+" or "+("height: "+this.height));this.interpolate=p.get("Interpolate","I")||!1,this.imageMask=p.get("ImageMask","IM")||!1,this.matte=p.get("Matte")||!1;var I=k.bitsPerComponent;if(!I&&(I=p.get("BitsPerComponent","BPC"),!I))if(this.imageMask)I=1;else throw new i.FormatError("Bits per component missing in image: "+this.imageMask);if(this.bpc=I,!this.imageMask){var W=p.get("ColorSpace","CS");if(!W)switch((0,i.info)("JPX images (which do not require color spaces)"),k.numComps){case 1:W=t.Name.get("DeviceGray");break;case 3:W=t.Name.get("DeviceRGB");break;case 4:W=t.Name.get("DeviceCMYK");break;default:throw new Error("JPX images with "+this.numComps+" color components not supported.")}this.colorSpace=o.ColorSpace.parse(W,z,D,f),this.numComps=this.colorSpace.numComps}if(this.decode=p.getArray("Decode","D"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode)||b&&!o.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;var q=(1<<I)-1;this.decodeCoefficients=[],this.decodeAddends=[];for(var B=0,N=0;B<this.decode.length;B+=2,++N){var L=this.decode[B],P=this.decode[B+1];this.decodeCoefficients[N]=P-L,this.decodeAddends[N]=q*L}}if(R)this.smask=new V({xref:z,res:D,image:R,pdfFunctionFactory:f});else if(m)if((0,t.isStream)(m)){var O=m.dict,E=O.get("ImageMask","IM");E?this.mask=new V({xref:z,res:D,image:m,isMask:!0,pdfFunctionFactory:f}):(0,i.warn)("Ignoring /Mask in image without /ImageMask.")}else this.mask=m}return V.buildImage=function(U){var z=U.handler,D=U.xref,k=U.res,T=U.image,R=U.nativeDecoder,g=R===void 0?null:R,m=U.pdfFunctionFactory,v=y(T,g),b,f,p=T.dict.get("SMask"),h=T.dict.get("Mask");return p?(b=y(p,g),f=Promise.resolve(null)):(b=Promise.resolve(null),h?(0,t.isStream)(h)?f=y(h,g):Array.isArray(h)?f=Promise.resolve(h):((0,i.warn)("Unsupported mask format."),f=Promise.resolve(null)):f=Promise.resolve(null)),Promise.all([v,b,f]).then(function(_){var I=a(_,3),W=I[0],q=I[1],B=I[2];return new V({xref:D,res:k,image:W,smask:q,mask:B,pdfFunctionFactory:m})})},V.createMask=function(U){var z=U.imgArray,D=U.width,k=U.height,T=U.imageIsFromDecodeStream,R=U.inverseDecode,g=(D+7>>3)*k,m=z.byteLength,v=g===m,b,f;if(T&&(!R||v))b=z;else if(!R)b=new Uint8Array(m),b.set(z);else for(b=new Uint8Array(g),b.set(z),f=m;f<g;f++)b[f]=255;if(R)for(f=0;f<m;f++)b[f]^=255;return{data:b,width:D,height:k}},V.prototype={get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)},get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)},decodeBuffer:function(z){var D=this.bpc,k=this.numComps,T=this.decodeAddends,R=this.decodeCoefficients,g=(1<<D)-1,m,v;if(D===1){for(m=0,v=z.length;m<v;m++)z[m]=+!z[m];return}var b=0;for(m=0,v=this.width*this.height;m<v;m++)for(var f=0;f<k;f++)z[b]=u(z[b],T[f],R[f],g),b++},getComponents:function(z){var D=this.bpc;if(D===8)return z;var k=this.width,T=this.height,R=this.numComps,g=k*T*R,m=0,v=D<=8?new Uint8Array(g):D<=16?new Uint16Array(g):new Uint32Array(g),b=k*R,f=(1<<D)-1,p=0,h,_;if(D===1)for(var I,W,q,B=0;B<T;B++){for(W=p+(b&-8),q=p+b;p<W;)_=z[m++],v[p]=_>>7&1,v[p+1]=_>>6&1,v[p+2]=_>>5&1,v[p+3]=_>>4&1,v[p+4]=_>>3&1,v[p+5]=_>>2&1,v[p+6]=_>>1&1,v[p+7]=_&1,p+=8;if(p<q)for(_=z[m++],I=128;p<q;)v[p++]=+!!(_&I),I>>=1}else{var N=0;for(_=0,p=0,h=g;p<h;++p){for(p%b===0&&(_=0,N=0);N<D;)_=_<<8|z[m++],N+=8;var L=N-D,P=_>>L;v[p]=P<0?0:P>f?f:P,_=_&(1<<L)-1,N=L}}return v},fillOpacity:function(z,D,k,T,R){var g=this.smask,m=this.mask,v,b,f,p,h,_;if(g)b=g.width,f=g.height,v=new Uint8Array(b*f),g.fillGrayBuffer(v),(b!==D||f!==k)&&(v=S(v,g.bpc,b,f,D,k));else if(m)if(m instanceof V){for(b=m.width,f=m.height,v=new Uint8Array(b*f),m.numComps=1,m.fillGrayBuffer(v),p=0,h=b*f;p<h;++p)v[p]=255-v[p];(b!==D||f!==k)&&(v=S(v,m.bpc,b,f,D,k))}else if(Array.isArray(m)){v=new Uint8Array(D*k);var I=this.numComps;for(p=0,h=D*k;p<h;++p){var W=0,q=p*I;for(_=0;_<I;++_){var B=R[q+_],N=_*2;if(B<m[N]||B>m[N+1]){W=255;break}}v[p]=W}}else throw new i.FormatError("Unknown mask format.");if(v)for(p=0,_=3,h=D*T;p<h;++p,_+=4)z[_]=v[p];else for(p=0,_=3,h=D*T;p<h;++p,_+=4)z[_]=255},undoPreblend:function(z,D,k){var T=this.smask&&this.smask.matte;if(T)for(var R=this.colorSpace.getRgb(T,0),g=R[0],m=R[1],v=R[2],b=D*k*4,f,p,h,_=0;_<b;_+=4){var I=z[_+3];if(I===0){z[_]=255,z[_+1]=255,z[_+2]=255;continue}var W=255/I;f=(z[_]-g)*W+g,p=(z[_+1]-m)*W+m,h=(z[_+2]-v)*W+v,z[_]=f<=0?0:f>=255?255:f|0,z[_+1]=p<=0?0:p>=255?255:p|0,z[_+2]=h<=0?0:h>=255?255:h|0}},createImageData:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,D=this.drawWidth,k=this.drawHeight,T={width:D,height:k},R=this.numComps,g=this.width,m=this.height,v=this.bpc,b=g*R*v+7>>3,f;if(!z){var p;if(this.colorSpace.name==="DeviceGray"&&v===1?p=i.ImageKind.GRAYSCALE_1BPP:this.colorSpace.name==="DeviceRGB"&&v===8&&!this.needsDecode&&(p=i.ImageKind.RGB_24BPP),p&&!this.smask&&!this.mask&&D===g&&k===m){if(T.kind=p,f=this.getImageBytes(m*b),this.image instanceof s.DecodeStream)T.data=f;else{var h=new Uint8Array(f.length);h.set(f),T.data=h}if(this.needsDecode){(0,i.assert)(p===i.ImageKind.GRAYSCALE_1BPP);for(var _=T.data,I=0,W=_.length;I<W;I++)_[I]^=255}return T}if(this.image instanceof s.JpegStream&&!this.smask&&!this.mask&&(this.colorSpace.name==="DeviceGray"||this.colorSpace.name==="DeviceRGB"||this.colorSpace.name==="DeviceCMYK"))return T.kind=i.ImageKind.RGB_24BPP,T.data=this.getImageBytes(m*b,D,k,!0),T}f=this.getImageBytes(m*b);var q=0|f.length/b*k/m,B=this.getComponents(f),N,L;return!z&&!this.smask&&!this.mask?(T.kind=i.ImageKind.RGB_24BPP,T.data=new Uint8Array(D*k*3),N=0,L=!1):(T.kind=i.ImageKind.RGBA_32BPP,T.data=new Uint8Array(D*k*4),N=1,L=!0,this.fillOpacity(T.data,D,k,q,B)),this.needsDecode&&this.decodeBuffer(B),this.colorSpace.fillRgb(T.data,g,m,D,k,q,v,B,N),L&&this.undoPreblend(T.data,D,q),T},fillGrayBuffer:function(z){var D=this.numComps;if(D!==1)throw new i.FormatError("Reading gray scale from a color image: "+D);var k=this.width,T=this.height,R=this.bpc,g=k*D*R+7>>3,m=this.getImageBytes(T*g),v=this.getComponents(m),b,f;if(R===1){if(f=k*T,this.needsDecode)for(b=0;b<f;++b)z[b]=v[b]-1&255;else for(b=0;b<f;++b)z[b]=-v[b]&255;return}this.needsDecode&&this.decodeBuffer(v),f=k*T;var p=255/((1<<R)-1);for(b=0;b<f;++b)z[b]=p*v[b]|0},getImageBytes:function(z,D,k){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return this.image.reset(),this.image.drawWidth=D||this.width,this.image.drawHeight=k||this.height,this.image.forceRGB=!!T,this.image.getBytes(z)}},V}();e.PDFImage=d},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationFactory=e.AnnotationBorderStyle=e.Annotation=void 0;var a=function O(E,w,A){E===null&&(E=Function.prototype);var M=Object.getOwnPropertyDescriptor(E,w);if(M===void 0){var j=Object.getPrototypeOf(E);return j===null?void 0:O(j,w,A)}else{if("value"in M)return M.value;var C=M.get;return C===void 0?void 0:C.call(A)}},i=function(){function O(E,w){for(var A=0;A<w.length;A++){var M=w[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,w,A){return w&&O(E.prototype,w),A&&O(E,A),E}}(),s=r(0),t=r(73),o=r(2),l=r(27),d=r(77),c=r(5);function y(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function u(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}function S(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}var V=function(){function O(){S(this,O)}return i(O,null,[{key:"create",value:function(w,A,M,j){var C=w.fetchIfRef(A);if((0,o.isDict)(C)){var x=(0,o.isRef)(A)?A.toString():"annot_"+j.createObjId(),F=C.get("Subtype");F=(0,o.isName)(F)?F.name:null;var $={xref:w,dict:C,ref:(0,o.isRef)(A)?A:null,subtype:F,id:x,pdfManager:M};switch(F){case"Link":return new v($);case"Text":return new m($);case"Widget":var G=s.Util.getInheritableProperty(C,"FT");switch(G=(0,o.isName)(G)?G.name:null,G){case"Tx":return new T($);case"Btn":return new R($);case"Ch":return new g($)}return(0,s.warn)('Unimplemented widget field type "'+G+'", falling back to base field type.'),new k($);case"Popup":return new b($);case"Line":return new f($);case"Square":return new p($);case"Circle":return new h($);case"PolyLine":return new _($);case"Polygon":return new I($);case"Highlight":return new W($);case"Underline":return new q($);case"Squiggly":return new B($);case"StrikeOut":return new N($);case"Stamp":return new L($);case"FileAttachment":return new P($);default:return F?(0,s.warn)('Unimplemented annotation type "'+F+'", falling back to base annotation.'):(0,s.warn)("Annotation is missing the required /Subtype."),new z($)}}}}]),O}();function U(O,E,w){var A=s.Util.getAxialAlignedBoundingBox(E,w),M=A[0],j=A[1],C=A[2],x=A[3];if(M===C||j===x)return[1,0,0,1,O[0],O[1]];var F=(O[2]-O[0])/(C-M),$=(O[3]-O[1])/(x-j);return[F,0,0,$,O[0]-M*F,O[1]-j*$]}var z=function(){function O(E){S(this,O);var w=E.dict;this.setFlags(w.get("F")),this.setRectangle(w.getArray("Rect")),this.setColor(w.getArray("C")),this.setBorderStyle(w),this.setAppearance(w),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,hasAppearance:!!this.appearance,id:E.id,rect:this.rectangle,subtype:E.subtype}}return i(O,[{key:"_hasFlag",value:function(w,A){return!!(w&A)}},{key:"_isViewable",value:function(w){return!this._hasFlag(w,s.AnnotationFlag.INVISIBLE)&&!this._hasFlag(w,s.AnnotationFlag.HIDDEN)&&!this._hasFlag(w,s.AnnotationFlag.NOVIEW)}},{key:"_isPrintable",value:function(w){return this._hasFlag(w,s.AnnotationFlag.PRINT)&&!this._hasFlag(w,s.AnnotationFlag.INVISIBLE)&&!this._hasFlag(w,s.AnnotationFlag.HIDDEN)}},{key:"setFlags",value:function(w){this.flags=Number.isInteger(w)&&w>0?w:0}},{key:"hasFlag",value:function(w){return this._hasFlag(this.flags,w)}},{key:"setRectangle",value:function(w){Array.isArray(w)&&w.length===4?this.rectangle=s.Util.normalizeRect(w):this.rectangle=[0,0,0,0]}},{key:"setColor",value:function(w){var A=new Uint8Array(3);if(!Array.isArray(w)){this.color=A;return}switch(w.length){case 0:this.color=null;break;case 1:l.ColorSpace.singletons.gray.getRgbItem(w,0,A,0),this.color=A;break;case 3:l.ColorSpace.singletons.rgb.getRgbItem(w,0,A,0),this.color=A;break;case 4:l.ColorSpace.singletons.cmyk.getRgbItem(w,0,A,0),this.color=A;break;default:this.color=A;break}}},{key:"setBorderStyle",value:function(w){if(this.borderStyle=new D,!!(0,o.isDict)(w))if(w.has("BS")){var A=w.get("BS"),M=A.get("Type");(!M||(0,o.isName)(M,"Border"))&&(this.borderStyle.setWidth(A.get("W")),this.borderStyle.setStyle(A.get("S")),this.borderStyle.setDashArray(A.getArray("D")))}else if(w.has("Border")){var j=w.getArray("Border");Array.isArray(j)&&j.length>=3&&(this.borderStyle.setHorizontalCornerRadius(j[0]),this.borderStyle.setVerticalCornerRadius(j[1]),this.borderStyle.setWidth(j[2]),j.length===4&&this.borderStyle.setDashArray(j[3]))}else this.borderStyle.setWidth(0)}},{key:"setAppearance",value:function(w){this.appearance=null;var A=w.get("AP");if((0,o.isDict)(A)){var M=A.get("N");if((0,o.isStream)(M)){this.appearance=M;return}if((0,o.isDict)(M)){var j=w.get("AS");!(0,o.isName)(j)||!M.has(j.name)||(this.appearance=M.get(j.name))}}}},{key:"_preparePopup",value:function(w){w.has("C")||(this.data.color=null),this.data.hasPopup=w.has("Popup"),this.data.title=(0,s.stringToPDFString)(w.get("T")||""),this.data.contents=(0,s.stringToPDFString)(w.get("Contents")||"")}},{key:"loadResources",value:function(w){return this.appearance.dict.getAsync("Resources").then(function(A){if(A){var M=new t.ObjectLoader(A,w,A.xref);return M.load().then(function(){return A})}})}},{key:"getOperatorList",value:function(w,A,M){var j=this;if(!this.appearance)return Promise.resolve(new d.OperatorList);var C=this.data,x=this.appearance.dict,F=this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"]),$=x.getArray("BBox")||[0,0,1,1],G=x.getArray("Matrix")||[1,0,0,1,0,0],Z=U(C.rect,$,G);return F.then(function(J){var Y=new d.OperatorList;return Y.addOp(s.OPS.beginAnnotation,[C.rect,Z,G]),w.getOperatorList({stream:j.appearance,task:A,resources:J,operatorList:Y}).then(function(){return Y.addOp(s.OPS.endAnnotation,[]),j.appearance.reset(),Y})})}},{key:"viewable",get:function(){return this.flags===0?!0:this._isViewable(this.flags)}},{key:"printable",get:function(){return this.flags===0?!1:this._isPrintable(this.flags)}}]),O}(),D=function(){function O(){S(this,O),this.width=1,this.style=s.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}return i(O,[{key:"setWidth",value:function(w){Number.isInteger(w)&&(this.width=w)}},{key:"setStyle",value:function(w){if(w)switch(w.name){case"S":this.style=s.AnnotationBorderStyleType.SOLID;break;case"D":this.style=s.AnnotationBorderStyleType.DASHED;break;case"B":this.style=s.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=s.AnnotationBorderStyleType.INSET;break;case"U":this.style=s.AnnotationBorderStyleType.UNDERLINE;break;default:break}}},{key:"setDashArray",value:function(w){if(Array.isArray(w)&&w.length>0){for(var A=!0,M=!0,j=0,C=w.length;j<C;j++){var x=w[j],F=+x>=0;if(F)x>0&&(M=!1);else{A=!1;break}}A&&!M?this.dashArray=w:this.width=0}else w&&(this.width=0)}},{key:"setHorizontalCornerRadius",value:function(w){Number.isInteger(w)&&(this.horizontalCornerRadius=w)}},{key:"setVerticalCornerRadius",value:function(w){Number.isInteger(w)&&(this.verticalCornerRadius=w)}}]),O}(),k=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w)),M=w.dict,j=A.data;j.annotationType=s.AnnotationType.WIDGET,j.fieldName=A._constructFieldName(M),j.fieldValue=s.Util.getInheritableProperty(M,"V",!0),j.alternativeText=(0,s.stringToPDFString)(M.get("TU")||""),j.defaultAppearance=s.Util.getInheritableProperty(M,"DA")||"";var C=s.Util.getInheritableProperty(M,"FT");return j.fieldType=(0,o.isName)(C)?C.name:null,A.fieldResources=s.Util.getInheritableProperty(M,"DR")||o.Dict.empty,j.fieldFlags=s.Util.getInheritableProperty(M,"Ff"),(!Number.isInteger(j.fieldFlags)||j.fieldFlags<0)&&(j.fieldFlags=0),j.readOnly=A.hasFieldFlag(s.AnnotationFieldFlag.READONLY),j.fieldType==="Sig"&&A.setFlags(s.AnnotationFlag.HIDDEN),A}return i(E,[{key:"_constructFieldName",value:function(A){if(!A.has("T")&&!A.has("Parent"))return(0,s.warn)("Unknown field name, falling back to empty field name."),"";if(!A.has("Parent"))return(0,s.stringToPDFString)(A.get("T"));var M=[];A.has("T")&&M.unshift((0,s.stringToPDFString)(A.get("T")));for(var j=A;j.has("Parent")&&(j=j.get("Parent"),!!(0,o.isDict)(j));)j.has("T")&&M.unshift((0,s.stringToPDFString)(j.get("T")));return M.join(".")}},{key:"hasFieldFlag",value:function(A){return!!(this.data.fieldFlags&A)}},{key:"getOperatorList",value:function(A,M,j){return j?Promise.resolve(new d.OperatorList):a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"getOperatorList",this).call(this,A,M,j)}}]),E}(z),T=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));A.data.fieldValue=(0,s.stringToPDFString)(A.data.fieldValue||"");var M=s.Util.getInheritableProperty(w.dict,"Q");(!Number.isInteger(M)||M<0||M>2)&&(M=null),A.data.textAlignment=M;var j=s.Util.getInheritableProperty(w.dict,"MaxLen");return(!Number.isInteger(j)||j<0)&&(j=null),A.data.maxLen=j,A.data.multiLine=A.hasFieldFlag(s.AnnotationFieldFlag.MULTILINE),A.data.comb=A.hasFieldFlag(s.AnnotationFieldFlag.COMB)&&!A.hasFieldFlag(s.AnnotationFieldFlag.MULTILINE)&&!A.hasFieldFlag(s.AnnotationFieldFlag.PASSWORD)&&!A.hasFieldFlag(s.AnnotationFieldFlag.FILESELECT)&&A.data.maxLen!==null,A}return i(E,[{key:"getOperatorList",value:function(A,M,j){if(j||this.appearance)return a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"getOperatorList",this).call(this,A,M,j);var C=new d.OperatorList;if(!this.data.defaultAppearance)return Promise.resolve(C);var x=new c.Stream((0,s.stringToBytes)(this.data.defaultAppearance));return A.getOperatorList({stream:x,task:M,resources:this.fieldResources,operatorList:C}).then(function(){return C})}}]),E}(k),R=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));if(A.data.checkBox=!A.hasFieldFlag(s.AnnotationFieldFlag.RADIO)&&!A.hasFieldFlag(s.AnnotationFieldFlag.PUSHBUTTON),A.data.checkBox){if(!(0,o.isName)(A.data.fieldValue))return y(A);A.data.fieldValue=A.data.fieldValue.name}if(A.data.radioButton=A.hasFieldFlag(s.AnnotationFieldFlag.RADIO)&&!A.hasFieldFlag(s.AnnotationFieldFlag.PUSHBUTTON),A.data.radioButton){A.data.fieldValue=A.data.buttonValue=null;var M=w.dict.get("Parent");if((0,o.isDict)(M)&&M.has("V")){var j=M.get("V");(0,o.isName)(j)&&(A.data.fieldValue=j.name)}var C=w.dict.get("AP");if(!(0,o.isDict)(C))return y(A);var x=C.get("N");if(!(0,o.isDict)(x))return y(A);for(var F=x.getKeys(),$=0,G=F.length;$<G;$++)if(F[$]!=="Off"){A.data.buttonValue=F[$];break}}return A}return E}(k),g=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));A.data.options=[];var M=s.Util.getInheritableProperty(w.dict,"Opt");if(Array.isArray(M))for(var j=w.xref,C=0,x=M.length;C<x;C++){var F=j.fetchIfRef(M[C]),$=Array.isArray(F);A.data.options[C]={exportValue:$?j.fetchIfRef(F[0]):F,displayValue:$?j.fetchIfRef(F[1]):F}}return Array.isArray(A.data.fieldValue)||(A.data.fieldValue=[A.data.fieldValue]),A.data.combo=A.hasFieldFlag(s.AnnotationFieldFlag.COMBO),A.data.multiSelect=A.hasFieldFlag(s.AnnotationFieldFlag.MULTISELECT),A}return E}(k),m=function(O){u(E,O);function E(w){S(this,E);var A=22,M=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return M.data.annotationType=s.AnnotationType.TEXT,M.data.hasAppearance?M.data.name="NoIcon":(M.data.rect[1]=M.data.rect[3]-A,M.data.rect[2]=M.data.rect[0]+A,M.data.name=w.dict.has("Name")?w.dict.get("Name").name:"Note"),M._preparePopup(w.dict),M}return E}(z),v=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.LINK,t.Catalog.parseDestDictionary({destDict:w.dict,resultObj:A.data,docBaseUrl:w.pdfManager.docBaseUrl}),A}return E}(z),b=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));A.data.annotationType=s.AnnotationType.POPUP;var M=w.dict,j=M.get("Parent");if(!j)return(0,s.warn)("Popup annotation has a missing or invalid parent annotation."),y(A);var C=j.get("Subtype");if(A.data.parentType=(0,o.isName)(C)?C.name:null,A.data.parentId=M.getRaw("Parent").toString(),A.data.title=(0,s.stringToPDFString)(j.get("T")||""),A.data.contents=(0,s.stringToPDFString)(j.get("Contents")||""),j.has("C")?(A.setColor(j.getArray("C")),A.data.color=A.color):A.data.color=null,!A.viewable){var x=j.get("F");A._isViewable(x)&&A.setFlags(x)}return A}return E}(z),f=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));A.data.annotationType=s.AnnotationType.LINE;var M=w.dict;return A.data.lineCoordinates=s.Util.normalizeRect(M.getArray("L")),A._preparePopup(M),A}return E}(z),p=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.SQUARE,A._preparePopup(w.dict),A}return E}(z),h=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.CIRCLE,A._preparePopup(w.dict),A}return E}(z),_=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));A.data.annotationType=s.AnnotationType.POLYLINE;var M=w.dict,j=M.getArray("Vertices");A.data.vertices=[];for(var C=0,x=j.length;C<x;C+=2)A.data.vertices.push({x:j[C],y:j[C+1]});return A._preparePopup(M),A}return E}(z),I=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.POLYGON,A}return E}(_),W=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.HIGHLIGHT,A._preparePopup(w.dict),A}return E}(z),q=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.UNDERLINE,A._preparePopup(w.dict),A}return E}(z),B=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.SQUIGGLY,A._preparePopup(w.dict),A}return E}(z),N=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.STRIKEOUT,A._preparePopup(w.dict),A}return E}(z),L=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w));return A.data.annotationType=s.AnnotationType.STAMP,A._preparePopup(w.dict),A}return E}(z),P=function(O){u(E,O);function E(w){S(this,E);var A=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,w)),M=new t.FileSpec(w.dict.get("FS"),w.xref);return A.data.annotationType=s.AnnotationType.FILEATTACHMENT,A.data.file=M.serializable,A._preparePopup(w.dict),A}return E}(z);e.Annotation=z,e.AnnotationBorderStyle=D,e.AnnotationFactory=V}])})});var BX=te((qb,wI)=>{(function(e,r){typeof qb=="object"&&typeof wI=="object"?wI.exports=r():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],r):typeof qb=="object"?qb["pdfjs-dist/build/pdf"]=r():e["pdfjs-dist/build/pdf"]=e.pdfjsDistBuildPdf=r()})(typeof self<"u"?self:qb,function(){return function(n){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return n[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=e,r.d=function(a,i,s){r.o(a,i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get:s})},r.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(i,"a",i),i},r.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},r.p="",r(r.s=75)}([function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unreachable=e.warn=e.utf8StringToString=e.stringToUTF8String=e.stringToPDFString=e.stringToBytes=e.string32=e.shadow=e.setVerbosityLevel=e.ReadableStream=e.removeNullCharacters=e.readUint32=e.readUint16=e.readInt8=e.log2=e.loadJpegStream=e.isEvalSupported=e.isLittleEndian=e.createValidAbsoluteUrl=e.isSameOrigin=e.isNodeJS=e.isSpace=e.isString=e.isNum=e.isEmptyObj=e.isBool=e.isArrayBuffer=e.info=e.getVerbosityLevel=e.getLookupTableFactory=e.deprecated=e.createObjectURL=e.createPromiseCapability=e.createBlob=e.bytesToString=e.assert=e.arraysToBytes=e.arrayByteLength=e.FormatError=e.XRefParseException=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.StatTimer=e.PasswordResponses=e.PasswordException=e.PageViewport=e.NotImplementedException=e.NativeImageDecoding=e.MissingPDFException=e.MissingDataException=e.MessageHandler=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VERBOSITY_LEVELS=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};r(76);var i=r(116),s=[.001,0,0,.001,0,0],t={NONE:"none",DECODE:"decode",DISPLAY:"display"},o={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},S={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},V={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},U={errors:0,warnings:1,infos:5},z={NONE:0,BINARY:1,STREAM:2},D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},k=U.warnings;function T(K){k=K}function R(){return k}function g(K){k>=U.infos&&console.log("Info: "+K)}function m(K){k>=U.warnings&&console.log("Warning: "+K)}function v(K){console.log("Deprecated API usage: "+K)}function b(K){throw new Error(K)}function f(K,re){K||b(re)}var p={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};function h(K,re){try{var me=new URL(K);if(!me.origin||me.origin==="null")return!1}catch{return!1}var xe=new URL(re,me);return me.origin===xe.origin}function _(K){if(!K)return!1;switch(K.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function I(K,re){if(!K)return null;try{var me=re?new URL(K,re):new URL(K);if(_(me))return me}catch{}return null}function W(K,re,me){return Object.defineProperty(K,re,{value:me,enumerable:!0,configurable:!0,writable:!1}),me}function q(K){var re;return function(){return K&&(re=Object.create(null),K(re),K=null),re}}var B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},N=function(){function re(me,xe){this.name="PasswordException",this.message=me,this.code=xe}return re.prototype=new Error,re.constructor=re,re}(),L=function(){function re(me,xe){this.name="UnknownErrorException",this.message=me,this.details=xe}return re.prototype=new Error,re.constructor=re,re}(),P=function(){function re(me){this.name="InvalidPDFException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),O=function(){function re(me){this.name="MissingPDFException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),E=function(){function re(me,xe){this.name="UnexpectedResponseException",this.message=me,this.status=xe}return re.prototype=new Error,re.constructor=re,re}(),w=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="NotImplementedException",re.constructor=re,re}(),A=function(){function re(me,xe){this.begin=me,this.end=xe,this.message="Missing data ["+me+", "+xe+")"}return re.prototype=new Error,re.prototype.name="MissingDataException",re.constructor=re,re}(),M=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="XRefParseException",re.constructor=re,re}(),j=function(){function re(me){this.message=me}return re.prototype=new Error,re.prototype.name="FormatError",re.constructor=re,re}(),C=function(){function re(me){this.name="AbortException",this.message=me}return re.prototype=new Error,re.constructor=re,re}(),x=/\x00/g;function F(K){return typeof K!="string"?(m("The argument for removeNullCharacters must be a string."),K):K.replace(x,"")}function $(K){f(K!==null&&(typeof K>"u"?"undefined":a(K))==="object"&&K.length!==void 0,"Invalid argument for bytesToString");var re=K.length,me=8192;if(re<me)return String.fromCharCode.apply(null,K);for(var xe=[],_e=0;_e<re;_e+=me){var ge=Math.min(_e+me,re),ye=K.subarray(_e,ge);xe.push(String.fromCharCode.apply(null,ye))}return xe.join("")}function G(K){f(typeof K=="string","Invalid argument for stringToBytes");for(var re=K.length,me=new Uint8Array(re),xe=0;xe<re;++xe)me[xe]=K.charCodeAt(xe)&255;return me}function Z(K){return K.length!==void 0?K.length:(f(K.byteLength!==void 0),K.byteLength)}function J(K){if(K.length===1&&K[0]instanceof Uint8Array)return K[0];var re=0,me,xe=K.length,_e,ge;for(me=0;me<xe;me++)_e=K[me],ge=Z(_e),re+=ge;var ye=0,Ne=new Uint8Array(re);for(me=0;me<xe;me++)_e=K[me],_e instanceof Uint8Array||(typeof _e=="string"?_e=G(_e):_e=new Uint8Array(_e)),ge=_e.byteLength,Ne.set(_e,ye),ye+=ge;return Ne}function Y(K){return String.fromCharCode(K>>24&255,K>>16&255,K>>8&255,K&255)}function ee(K){for(var re=1,me=0;K>re;)re<<=1,me++;return me}function ae(K,re){return K[re]<<24>>24}function pe(K,re){return K[re]<<8|K[re+1]}function se(K,re){return(K[re]<<24|K[re+1]<<16|K[re+2]<<8|K[re+3])>>>0}function ue(){var K=new Uint8Array(4);K[0]=1;var re=new Uint32Array(K.buffer,0,1);return re[0]===1}function le(){try{return new Function(""),!0}catch{return!1}}var ie=[1,0,0,1,0,0],de=function(){function re(){}var me=["rgb(",0,",",0,",",0,")"];re.makeCssRgb=function(ge,ye,Ne){return me[1]=ge,me[3]=ye,me[5]=Ne,me.join("")},re.transform=function(ge,ye){return[ge[0]*ye[0]+ge[2]*ye[1],ge[1]*ye[0]+ge[3]*ye[1],ge[0]*ye[2]+ge[2]*ye[3],ge[1]*ye[2]+ge[3]*ye[3],ge[0]*ye[4]+ge[2]*ye[5]+ge[4],ge[1]*ye[4]+ge[3]*ye[5]+ge[5]]},re.applyTransform=function(ge,ye){var Ne=ge[0]*ye[0]+ge[1]*ye[2]+ye[4],Le=ge[0]*ye[1]+ge[1]*ye[3]+ye[5];return[Ne,Le]},re.applyInverseTransform=function(ge,ye){var Ne=ye[0]*ye[3]-ye[1]*ye[2],Le=(ge[0]*ye[3]-ge[1]*ye[2]+ye[2]*ye[5]-ye[4]*ye[3])/Ne,Je=(-ge[0]*ye[1]+ge[1]*ye[0]+ye[4]*ye[1]-ye[5]*ye[0])/Ne;return[Le,Je]},re.getAxialAlignedBoundingBox=function(ge,ye){var Ne=re.applyTransform(ge,ye),Le=re.applyTransform(ge.slice(2,4),ye),Je=re.applyTransform([ge[0],ge[3]],ye),Xe=re.applyTransform([ge[2],ge[1]],ye);return[Math.min(Ne[0],Le[0],Je[0],Xe[0]),Math.min(Ne[1],Le[1],Je[1],Xe[1]),Math.max(Ne[0],Le[0],Je[0],Xe[0]),Math.max(Ne[1],Le[1],Je[1],Xe[1])]},re.inverseTransform=function(ge){var ye=ge[0]*ge[3]-ge[1]*ge[2];return[ge[3]/ye,-ge[1]/ye,-ge[2]/ye,ge[0]/ye,(ge[2]*ge[5]-ge[4]*ge[3])/ye,(ge[4]*ge[1]-ge[5]*ge[0])/ye]},re.apply3dTransform=function(ge,ye){return[ge[0]*ye[0]+ge[1]*ye[1]+ge[2]*ye[2],ge[3]*ye[0]+ge[4]*ye[1]+ge[5]*ye[2],ge[6]*ye[0]+ge[7]*ye[1]+ge[8]*ye[2]]},re.singularValueDecompose2dScale=function(ge){var ye=[ge[0],ge[2],ge[1],ge[3]],Ne=ge[0]*ye[0]+ge[1]*ye[2],Le=ge[0]*ye[1]+ge[1]*ye[3],Je=ge[2]*ye[0]+ge[3]*ye[2],Xe=ge[2]*ye[1]+ge[3]*ye[3],ut=(Ne+Xe)/2,mt=Math.sqrt((Ne+Xe)*(Ne+Xe)-4*(Ne*Xe-Je*Le))/2,Tt=ut+mt||1,Kt=ut-mt||1;return[Math.sqrt(Tt),Math.sqrt(Kt)]},re.normalizeRect=function(ge){var ye=ge.slice(0);return ge[0]>ge[2]&&(ye[0]=ge[2],ye[2]=ge[0]),ge[1]>ge[3]&&(ye[1]=ge[3],ye[3]=ge[1]),ye},re.intersect=function(ge,ye){function Ne(ut,mt){return ut-mt}var Le=[ge[0],ge[2],ye[0],ye[2]].sort(Ne),Je=[ge[1],ge[3],ye[1],ye[3]].sort(Ne),Xe=[];if(ge=re.normalizeRect(ge),ye=re.normalizeRect(ye),Le[0]===ge[0]&&Le[1]===ye[0]||Le[0]===ye[0]&&Le[1]===ge[0])Xe[0]=Le[1],Xe[2]=Le[2];else return!1;if(Je[0]===ge[1]&&Je[1]===ye[1]||Je[0]===ye[1]&&Je[1]===ge[1])Xe[1]=Je[1],Xe[3]=Je[2];else return!1;return Xe};var xe=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return re.toRoman=function(ge,ye){f(Number.isInteger(ge)&&ge>0,"The number should be a positive integer.");for(var Ne,Le=[];ge>=1e3;)ge-=1e3,Le.push("M");Ne=ge/100|0,ge%=100,Le.push(xe[Ne]),Ne=ge/10|0,ge%=10,Le.push(xe[10+Ne]),Le.push(xe[20+ge]);var Je=Le.join("");return ye?Je.toLowerCase():Je},re.appendToArray=function(ge,ye){Array.prototype.push.apply(ge,ye)},re.prependToArray=function(ge,ye){Array.prototype.unshift.apply(ge,ye)},re.extendObj=function(ge,ye){for(var Ne in ye)ge[Ne]=ye[Ne]},re.getInheritableProperty=function(ge,ye,Ne){for(;ge&&!ge.has(ye);)ge=ge.get("Parent");return ge?Ne?ge.getArray(ye):ge.get(ye):null},re.inherit=function(ge,ye,Ne){ge.prototype=Object.create(ye.prototype),ge.prototype.constructor=ge;for(var Le in Ne)ge.prototype[Le]=Ne[Le]},re.loadScript=function(ge,ye){var Ne=document.createElement("script"),Le=!1;Ne.setAttribute("src",ge),ye&&(Ne.onload=function(){Le||ye(),Le=!0}),document.getElementsByTagName("head")[0].appendChild(Ne)},re}(),fe=function(){function re(me,xe,_e,ge,ye,Ne){this.viewBox=me,this.scale=xe,this.rotation=_e,this.offsetX=ge,this.offsetY=ye;var Le=(me[2]+me[0])/2,Je=(me[3]+me[1])/2,Xe,ut,mt,Tt;switch(_e=_e%360,_e=_e<0?_e+360:_e,_e){case 180:Xe=-1,ut=0,mt=0,Tt=1;break;case 90:Xe=0,ut=1,mt=1,Tt=0;break;case 270:Xe=0,ut=-1,mt=-1,Tt=0;break;default:Xe=1,ut=0,mt=0,Tt=-1;break}Ne&&(mt=-mt,Tt=-Tt);var Kt,yr,dr,hr;Xe===0?(Kt=Math.abs(Je-me[1])*xe+ge,yr=Math.abs(Le-me[0])*xe+ye,dr=Math.abs(me[3]-me[1])*xe,hr=Math.abs(me[2]-me[0])*xe):(Kt=Math.abs(Le-me[0])*xe+ge,yr=Math.abs(Je-me[1])*xe+ye,dr=Math.abs(me[2]-me[0])*xe,hr=Math.abs(me[3]-me[1])*xe),this.transform=[Xe*xe,ut*xe,mt*xe,Tt*xe,Kt-Xe*xe*Le-mt*xe*Je,yr-ut*xe*Le-Tt*xe*Je],this.width=dr,this.height=hr,this.fontScale=xe}return re.prototype={clone:function(xe){xe=xe||{};var _e="scale"in xe?xe.scale:this.scale,ge="rotation"in xe?xe.rotation:this.rotation;return new re(this.viewBox.slice(),_e,ge,this.offsetX,this.offsetY,xe.dontFlip)},convertToViewportPoint:function(xe,_e){return de.applyTransform([xe,_e],this.transform)},convertToViewportRectangle:function(xe){var _e=de.applyTransform([xe[0],xe[1]],this.transform),ge=de.applyTransform([xe[2],xe[3]],this.transform);return[_e[0],_e[1],ge[0],ge[1]]},convertToPdfPoint:function(xe,_e){return de.applyInverseTransform([xe,_e],this.transform)}},re}(),he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Se(K){var re,me=K.length,xe=[];if(K[0]==="\xFE"&&K[1]==="\xFF")for(re=2;re<me;re+=2)xe.push(String.fromCharCode(K.charCodeAt(re)<<8|K.charCodeAt(re+1)));else for(re=0;re<me;++re){var _e=he[K.charCodeAt(re)];xe.push(_e?String.fromCharCode(_e):K.charAt(re))}return xe.join("")}function Ce(K){return decodeURIComponent(escape(K))}function Ae(K){return unescape(encodeURIComponent(K))}function Ee(K){for(var re in K)return!1;return!0}function ke(K){return typeof K=="boolean"}function Fe(K){return typeof K=="number"}function Pe(K){return typeof K=="string"}function Ie(K){return(typeof K>"u"?"undefined":a(K))==="object"&&K!==null&&K.byteLength!==void 0}function $e(K){return K===32||K===9||K===13||K===10}function Ke(){return(typeof process>"u"?"undefined":a(process))==="object"&&process+""=="[object process]"}function Ze(){var K={};return K.promise=new Promise(function(re,me){K.resolve=re,K.reject=me}),K}var ot=function(){function re(xe,_e,ge){for(;xe.length<ge;)xe+=_e;return xe}function me(){this.started=Object.create(null),this.times=[],this.enabled=!0}return me.prototype={time:function(_e){this.enabled&&(_e in this.started&&m("Timer is already running for "+_e),this.started[_e]=Date.now())},timeEnd:function(_e){this.enabled&&(_e in this.started||m("Timer has not been started for "+_e),this.times.push({name:_e,start:this.started[_e],end:Date.now()}),delete this.started[_e])},toString:function(){var _e,ge,ye=this.times,Ne="",Le=0;for(_e=0,ge=ye.length;_e<ge;++_e){var Je=ye[_e].name;Je.length>Le&&(Le=Je.length)}for(_e=0,ge=ye.length;_e<ge;++_e){var Xe=ye[_e],ut=Xe.end-Xe.start;Ne+=re(Xe.name," ",Le)+" "+ut+`ms
`}return Ne}},me}(),et=function(re,me){if(typeof Blob<"u")return new Blob([re],{type:me});throw new Error('The "Blob" constructor is not supported.')},ct=function(){var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(xe,_e){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!ge&&URL.createObjectURL){var ye=et(xe,_e);return URL.createObjectURL(ye)}for(var Ne="data:"+_e+";base64,",Le=0,Je=xe.length;Le<Je;Le+=3){var Xe=xe[Le]&255,ut=xe[Le+1]&255,mt=xe[Le+2]&255,Tt=Xe>>2,Kt=(Xe&3)<<4|ut>>4,yr=Le+1<Je?(ut&15)<<2|mt>>6:64,dr=Le+2<Je?mt&63:64;Ne+=re[Tt]+re[Kt]+re[yr]+re[dr]}return Ne}}();function ht(K,re){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return K?new Promise(function(xe,_e){xe(K.apply(me,re))}):Promise.resolve(void 0)}function Ge(K){if((typeof K>"u"?"undefined":a(K))!=="object")return K;switch(K.name){case"AbortException":return new C(K.message);case"MissingPDFException":return new O(K.message);case"UnexpectedResponseException":return new E(K.message,K.status);default:return new L(K.message,K.details)}}function Be(K){return!(K instanceof Error)||K instanceof C||K instanceof O||K instanceof E||K instanceof L?K:new L(K.message,K.toString())}function wt(K,re,me){re?K.resolve():K.reject(me)}function At(K){return Promise.resolve(K).catch(function(){})}function Q(K,re,me){var xe=this;this.sourceName=K,this.targetName=re,this.comObj=me,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var _e=this.callbacksCapabilities=Object.create(null),ge=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(ye){var Ne=ye.data;if(Ne.targetName===xe.sourceName)if(Ne.stream)xe._processStreamMessage(Ne);else if(Ne.isReply){var Le=Ne.callbackId;if(Ne.callbackId in _e){var Je=_e[Le];delete _e[Le],"error"in Ne?Je.reject(Ge(Ne.error)):Je.resolve(Ne.data)}else throw new Error("Cannot resolve callback "+Le)}else if(Ne.action in ge){var Xe=ge[Ne.action];if(Ne.callbackId){var ut=xe.sourceName,mt=Ne.sourceName;Promise.resolve().then(function(){return Xe[0].call(Xe[1],Ne.data)}).then(function(Tt){me.postMessage({sourceName:ut,targetName:mt,isReply:!0,callbackId:Ne.callbackId,data:Tt})},function(Tt){me.postMessage({sourceName:ut,targetName:mt,isReply:!0,callbackId:Ne.callbackId,error:Be(Tt)})})}else Ne.streamId?xe._createStreamSink(Ne):Xe[0].call(Xe[1],Ne.data)}else throw new Error("Unknown action from worker: "+Ne.action)},me.addEventListener("message",this._onComObjOnMessage)}Q.prototype={on:function(re,me,xe){var _e=this.actionHandler;if(_e[re])throw new Error('There is already an actionName called "'+re+'"');_e[re]=[me,xe]},send:function(re,me,xe){var _e={sourceName:this.sourceName,targetName:this.targetName,action:re,data:me};this.postMessage(_e,xe)},sendWithPromise:function(re,me,xe){var _e=this.callbackId++,ge={sourceName:this.sourceName,targetName:this.targetName,action:re,data:me,callbackId:_e},ye=Ze();this.callbacksCapabilities[_e]=ye;try{this.postMessage(ge,xe)}catch(Ne){ye.reject(Ne)}return ye.promise},sendWithStream:function(re,me,xe,_e){var ge=this,ye=this.streamId++,Ne=this.sourceName,Le=this.targetName;return new i.ReadableStream({start:function(Xe){var ut=Ze();return ge.streamControllers[ye]={controller:Xe,startCall:ut,isClosed:!1},ge.postMessage({sourceName:Ne,targetName:Le,action:re,streamId:ye,data:me,desiredSize:Xe.desiredSize}),ut.promise},pull:function(Xe){var ut=Ze();return ge.streamControllers[ye].pullCall=ut,ge.postMessage({sourceName:Ne,targetName:Le,stream:"pull",streamId:ye,desiredSize:Xe.desiredSize}),ut.promise},cancel:function(Xe){var ut=Ze();return ge.streamControllers[ye].cancelCall=ut,ge.streamControllers[ye].isClosed=!0,ge.postMessage({sourceName:Ne,targetName:Le,stream:"cancel",reason:Xe,streamId:ye}),ut.promise}},xe)},_createStreamSink:function(re){var me=this,xe=this,_e=this.actionHandler[re.action],ge=re.streamId,ye=re.desiredSize,Ne=this.sourceName,Le=re.sourceName,Je=Ze(),Xe=function(Tt){var Kt=Tt.stream,yr=Tt.chunk,dr=Tt.transfers,hr=Tt.success,Mr=Tt.reason;me.postMessage({sourceName:Ne,targetName:Le,stream:Kt,streamId:ge,chunk:yr,success:hr,reason:Mr},dr)},ut={enqueue:function(Tt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,yr=arguments[2];if(!this.isCancelled){var dr=this.desiredSize;this.desiredSize-=Kt,dr>0&&this.desiredSize<=0&&(this.sinkCapability=Ze(),this.ready=this.sinkCapability.promise),Xe({stream:"enqueue",chunk:Tt,transfers:yr})}},close:function(){this.isCancelled||(this.isCancelled=!0,Xe({stream:"close"}),delete xe.streamSinks[ge])},error:function(Tt){this.isCancelled||(this.isCancelled=!0,Xe({stream:"error",reason:Tt}))},sinkCapability:Je,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ye,ready:null};ut.sinkCapability.resolve(),ut.ready=ut.sinkCapability.promise,this.streamSinks[ge]=ut,ht(_e[0],[re.data,ut],_e[1]).then(function(){Xe({stream:"start_complete",success:!0})},function(mt){Xe({stream:"start_complete",success:!1,reason:mt})})},_processStreamMessage:function(re){var me=this,xe=this.sourceName,_e=re.sourceName,ge=re.streamId,ye=function(Je){var Xe=Je.stream,ut=Je.success,mt=Je.reason;me.comObj.postMessage({sourceName:xe,targetName:_e,stream:Xe,success:ut,streamId:ge,reason:mt})},Ne=function(){Promise.all([me.streamControllers[re.streamId].startCall,me.streamControllers[re.streamId].pullCall,me.streamControllers[re.streamId].cancelCall].map(function(Je){return Je&&At(Je.promise)})).then(function(){delete me.streamControllers[re.streamId]})};switch(re.stream){case"start_complete":wt(this.streamControllers[re.streamId].startCall,re.success,Ge(re.reason));break;case"pull_complete":wt(this.streamControllers[re.streamId].pullCall,re.success,Ge(re.reason));break;case"pull":if(!this.streamSinks[re.streamId]){ye({stream:"pull_complete",success:!0});break}this.streamSinks[re.streamId].desiredSize<=0&&re.desiredSize>0&&this.streamSinks[re.streamId].sinkCapability.resolve(),this.streamSinks[re.streamId].desiredSize=re.desiredSize,ht(this.streamSinks[re.streamId].onPull).then(function(){ye({stream:"pull_complete",success:!0})},function(Le){ye({stream:"pull_complete",success:!1,reason:Le})});break;case"enqueue":f(this.streamControllers[re.streamId],"enqueue should have stream controller"),this.streamControllers[re.streamId].isClosed||this.streamControllers[re.streamId].controller.enqueue(re.chunk);break;case"close":if(f(this.streamControllers[re.streamId],"close should have stream controller"),this.streamControllers[re.streamId].isClosed)break;this.streamControllers[re.streamId].isClosed=!0,this.streamControllers[re.streamId].controller.close(),Ne();break;case"error":f(this.streamControllers[re.streamId],"error should have stream controller"),this.streamControllers[re.streamId].controller.error(Ge(re.reason)),Ne();break;case"cancel_complete":wt(this.streamControllers[re.streamId].cancelCall,re.success,Ge(re.reason)),Ne();break;case"cancel":if(!this.streamSinks[re.streamId])break;ht(this.streamSinks[re.streamId].onCancel,[Ge(re.reason)]).then(function(){ye({stream:"cancel_complete",success:!0})},function(Le){ye({stream:"cancel_complete",success:!1,reason:Le})}),this.streamSinks[re.streamId].sinkCapability.reject(Ge(re.reason)),this.streamSinks[re.streamId].isCancelled=!0,delete this.streamSinks[re.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(re,me){me&&this.postMessageTransfers?this.comObj.postMessage(re,me):this.comObj.postMessage(re)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};function ve(K,re,me){var xe=new Image;xe.onload=function(){me.resolve(K,xe)},xe.onerror=function(){me.resolve(K,null),m("Error during JPEG image loading")},xe.src=re}e.FONT_IDENTITY_MATRIX=s,e.IDENTITY_MATRIX=ie,e.OPS=D,e.VERBOSITY_LEVELS=U,e.UNSUPPORTED_FEATURES=p,e.AnnotationBorderStyleType=u,e.AnnotationFieldFlag=y,e.AnnotationFlag=c,e.AnnotationType=d,e.FontType=V,e.ImageKind=l,e.CMapCompressionType=z,e.AbortException=C,e.InvalidPDFException=P,e.MessageHandler=Q,e.MissingDataException=A,e.MissingPDFException=O,e.NativeImageDecoding=t,e.NotImplementedException=w,e.PageViewport=fe,e.PasswordException=N,e.PasswordResponses=B,e.StatTimer=ot,e.StreamType=S,e.TextRenderingMode=o,e.UnexpectedResponseException=E,e.UnknownErrorException=L,e.Util=de,e.XRefParseException=M,e.FormatError=j,e.arrayByteLength=Z,e.arraysToBytes=J,e.assert=f,e.bytesToString=$,e.createBlob=et,e.createPromiseCapability=Ze,e.createObjectURL=ct,e.deprecated=v,e.getLookupTableFactory=q,e.getVerbosityLevel=R,e.info=g,e.isArrayBuffer=Ie,e.isBool=ke,e.isEmptyObj=Ee,e.isNum=Fe,e.isString=Pe,e.isSpace=$e,e.isNodeJS=Ke,e.isSameOrigin=h,e.createValidAbsoluteUrl=I,e.isLittleEndian=ue,e.isEvalSupported=le,e.loadJpegStream=ve,e.log2=ee,e.readInt8=ae,e.readUint16=pe,e.readUint32=se,e.removeNullCharacters=F,e.ReadableStream=i.ReadableStream,e.setVerbosityLevel=T,e.shadow=W,e.string32=Y,e.stringToBytes=G,e.stringToPDFString=Se,e.stringToUTF8String=Ce,e.utf8StringToString=Ae,e.warn=m,e.unreachable=b},function(n,e,r){"use strict";var a=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=a)},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};n.exports=function(i){return(typeof i>"u"?"undefined":a(i))==="object"?i!==null:typeof i=="function"}},function(n,e,r){"use strict";var a=r(51)("wks"),i=r(16),s=r(1).Symbol,t=typeof s=="function",o=n.exports=function(l){return a[l]||(a[l]=t&&s[l]||(t?s:i)("Symbol."+l))};o.store=a},function(n,e,r){"use strict";var a=n.exports={version:"2.5.7"};typeof __e=="number"&&(__e=a)},function(n,e,r){"use strict";var a=r(1),i=r(4),s=r(6),t=r(14),o=r(11),l="prototype",d=function c(y,u,S){var V=y&c.F,U=y&c.G,z=y&c.S,D=y&c.P,k=y&c.B,T=U?a:z?a[u]||(a[u]={}):(a[u]||{})[l],R=U?i:i[u]||(i[u]={}),g=R[l]||(R[l]={}),m,v,b,f;U&&(S=u);for(m in S)v=!V&&T&&T[m]!==void 0,b=(v?T:S)[m],f=k&&v?o(b,a):D&&typeof b=="function"?o(Function.call,b):b,T&&t(T,m,b,y&c.U),R[m]!=b&&s(R,m,f),D&&g[m]!=b&&(g[m]=b)};a.core=i,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,n.exports=d},function(n,e,r){"use strict";var a=r(13),i=r(27);n.exports=r(8)?function(s,t,o){return a.f(s,t,i(1,o))}:function(s,t,o){return s[t]=o,s}},function(n,e,r){"use strict";var a=r(2);n.exports=function(i){if(!a(i))throw TypeError(i+" is not an object!");return i}},function(n,e,r){"use strict";n.exports=!r(9)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,e,r){"use strict";n.exports=function(a){try{return!!a()}catch{return!0}}},function(n,e,r){"use strict";var a={}.hasOwnProperty;n.exports=function(i,s){return a.call(i,s)}},function(n,e,r){"use strict";var a=r(22);n.exports=function(i,s,t){if(a(i),s===void 0)return i;switch(t){case 1:return function(o){return i.call(s,o)};case 2:return function(o,l){return i.call(s,o,l)};case 3:return function(o,l,d){return i.call(s,o,l,d)}}return function(){return i.apply(s,arguments)}}},function(n,e,r){"use strict";var a=r(17),i=Math.min;n.exports=function(s){return s>0?i(a(s),9007199254740991):0}},function(n,e,r){"use strict";var a=r(7),i=r(45),s=r(33),t=Object.defineProperty;e.f=r(8)?Object.defineProperty:function(l,d,c){if(a(l),d=s(d,!0),a(c),i)try{return t(l,d,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(l[d]=c.value),l}},function(n,e,r){"use strict";var a=r(1),i=r(6),s=r(10),t=r(16)("src"),o="toString",l=Function[o],d=(""+l).split(o);r(4).inspectSource=function(c){return l.call(c)},(n.exports=function(c,y,u,S){var V=typeof u=="function";V&&(s(u,"name")||i(u,"name",y)),c[y]!==u&&(V&&(s(u,t)||i(u,t,c[y]?""+c[y]:d.join(String(y)))),c===a?c[y]=u:S?c[y]?c[y]=u:i(c,y,u):(delete c[y],i(c,y,u)))})(Function.prototype,o,function(){return typeof this=="function"&&this[t]||l.call(this)})},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.getDefaultSetting=e.LinkTarget=e.getFilenameFromUrl=e.isValidUrl=e.isExternalLinkTargetSet=e.addLinkAttributes=e.RenderingCancelledException=e.CustomStyle=void 0;var a=function(){function v(b,f){for(var p=0;p<f.length;p++){var h=f[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,f,p){return f&&v(b.prototype,f),p&&v(b,p),b}}(),i=r(0),s=r(20),t=o(s);function o(v){return v&&v.__esModule?v:{default:v}}function l(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}var d="noopener noreferrer nofollow",c="http://www.w3.org/2000/svg",y=function(){function v(){l(this,v)}return a(v,[{key:"create",value:function(f,p){if(f<=0||p<=0)throw new Error("invalid canvas size");var h=document.createElement("canvas"),_=h.getContext("2d");return h.width=f,h.height=p,{canvas:h,context:_}}},{key:"reset",value:function(f,p,h){if(!f.canvas)throw new Error("canvas is not specified");if(p<=0||h<=0)throw new Error("invalid canvas size");f.canvas.width=p,f.canvas.height=h}},{key:"destroy",value:function(f){if(!f.canvas)throw new Error("canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}}]),v}(),u=function(){function v(b){var f=b.baseUrl,p=f===void 0?null:f,h=b.isCompressed,_=h===void 0?!1:h;l(this,v),this.baseUrl=p,this.isCompressed=_}return a(v,[{key:"fetch",value:function(f){var p=this,h=f.name;return this.baseUrl?h?new Promise(function(_,I){var W=p.baseUrl+h+(p.isCompressed?".bcmap":""),q=new XMLHttpRequest;q.open("GET",W,!0),p.isCompressed&&(q.responseType="arraybuffer"),q.onreadystatechange=function(){if(q.readyState===XMLHttpRequest.DONE){if(q.status===200||q.status===0){var B=void 0;if(p.isCompressed&&q.response?B=new Uint8Array(q.response):!p.isCompressed&&q.responseText&&(B=(0,i.stringToBytes)(q.responseText)),B){_({cMapData:B,compressionType:p.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE});return}}I(new Error("Unable to load "+(p.isCompressed?"binary ":"")+"CMap at: "+W))}},q.send(null)}):Promise.reject(new Error("CMap name must be specified.")):Promise.reject(new Error('CMap baseUrl must be specified, see "PDFJS.cMapUrl" (and also "PDFJS.cMapPacked").'))}}]),v}(),S=function(){function v(){l(this,v)}return a(v,[{key:"create",value:function(f,p){(0,i.assert)(f>0&&p>0,"Invalid SVG dimensions");var h=document.createElementNS(c,"svg:svg");return h.setAttribute("version","1.1"),h.setAttribute("width",f+"px"),h.setAttribute("height",p+"px"),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox","0 0 "+f+" "+p),h}},{key:"createElement",value:function(f){return(0,i.assert)(typeof f=="string","Invalid SVG element type"),document.createElementNS(c,f)}}]),v}(),V=function(){var b=["ms","Moz","Webkit","O"],f=Object.create(null);function p(){}return p.getProp=function(_,I){if(arguments.length===1&&typeof f[_]=="string")return f[_];I=I||document.documentElement;var W=I.style,q,B;if(typeof W[_]=="string")return f[_]=_;B=_.charAt(0).toUpperCase()+_.slice(1);for(var N=0,L=b.length;N<L;N++)if(q=b[N]+B,typeof W[q]=="string")return f[_]=q;return f[_]="undefined"},p.setProp=function(_,I,W){var q=this.getProp(_);q!=="undefined"&&(I.style[q]=W)},p}(),U=function(){function b(f,p){this.message=f,this.type=p}return b.prototype=new Error,b.prototype.name="RenderingCancelledException",b.constructor=b,b}(),z={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},D=["","_self","_blank","_parent","_top"];function k(v,b){var f=b&&b.url;if(v.href=v.title=f?(0,i.removeNullCharacters)(f):"",f){var p=b.target;typeof p>"u"&&(p=R("externalLinkTarget")),v.target=D[p];var h=b.rel;typeof h>"u"&&(h=R("externalLinkRel")),v.rel=h}}function T(v){var b=v.indexOf("#"),f=v.indexOf("?"),p=Math.min(b>0?b:v.length,f>0?f:v.length);return v.substring(v.lastIndexOf("/",p)+1,p)}function R(v){var b=t.default.PDFJS;switch(v){case"pdfBug":return b?b.pdfBug:!1;case"disableAutoFetch":return b?b.disableAutoFetch:!1;case"disableStream":return b?b.disableStream:!1;case"disableRange":return b?b.disableRange:!1;case"disableFontFace":return b?b.disableFontFace:!1;case"disableCreateObjectURL":return b?b.disableCreateObjectURL:!1;case"disableWebGL":return b?b.disableWebGL:!0;case"cMapUrl":return b?b.cMapUrl:null;case"cMapPacked":return b?b.cMapPacked:!1;case"postMessageTransfers":return b?b.postMessageTransfers:!0;case"workerPort":return b?b.workerPort:null;case"workerSrc":return b?b.workerSrc:null;case"disableWorker":return b?b.disableWorker:!1;case"maxImageSize":return b?b.maxImageSize:-1;case"imageResourcesPath":return b?b.imageResourcesPath:"";case"isEvalSupported":return b?b.isEvalSupported:!0;case"externalLinkTarget":if(!b)return z.NONE;switch(b.externalLinkTarget){case z.NONE:case z.SELF:case z.BLANK:case z.PARENT:case z.TOP:return b.externalLinkTarget}return(0,i.warn)("PDFJS.externalLinkTarget is invalid: "+b.externalLinkTarget),b.externalLinkTarget=z.NONE,z.NONE;case"externalLinkRel":return b?b.externalLinkRel:d;case"enableStats":return!!(b&&b.enableStats);case"pdfjsNext":return!!(b&&b.pdfjsNext);default:throw new Error("Unknown default setting: "+v)}}function g(){var v=R("externalLinkTarget");switch(v){case z.NONE:return!1;case z.SELF:case z.BLANK:case z.PARENT:case z.TOP:return!0}}function m(v,b){(0,i.deprecated)("isValidUrl(), please use createValidAbsoluteUrl() instead.");var f=b?"http://example.com":null;return(0,i.createValidAbsoluteUrl)(v,f)!==null}e.CustomStyle=V,e.RenderingCancelledException=U,e.addLinkAttributes=k,e.isExternalLinkTargetSet=g,e.isValidUrl=m,e.getFilenameFromUrl=T,e.LinkTarget=z,e.getDefaultSetting=R,e.DEFAULT_LINK_REL=d,e.DOMCanvasFactory=y,e.DOMCMapReaderFactory=u,e.DOMSVGFactory=S},function(n,e,r){"use strict";var a=0,i=Math.random();n.exports=function(s){return"Symbol(".concat(s===void 0?"":s,")_",(++a+i).toString(36))}},function(n,e,r){"use strict";var a=Math.ceil,i=Math.floor;n.exports=function(s){return isNaN(s=+s)?0:(s>0?i:a)(s)}},function(n,e,r){"use strict";var a=r(35);n.exports=function(i){return Object(a(i))}},function(n,e,r){"use strict";n.exports={}},function(n,e,r){"use strict";n.exports=typeof window<"u"&&window.Math===Math?window:typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:{}},function(n,e,r){"use strict";n.exports=!1},function(n,e,r){"use strict";n.exports=function(a){if(typeof a!="function")throw TypeError(a+" is not a function!");return a}},function(n,e,r){"use strict";var a=r(14);n.exports=function(i,s,t){for(var o in s)a(i,o,s[o],t);return i}},function(n,e,r){"use strict";n.exports=function(a,i,s,t){if(!(a instanceof i)||t!==void 0&&t in a)throw TypeError(s+": incorrect invocation!");return a}},function(n,e,r){"use strict";var a={}.toString;n.exports=function(i){return a.call(i).slice(8,-1)}},function(n,e,r){"use strict";var a=r(13).f,i=r(10),s=r(3)("toStringTag");n.exports=function(t,o,l){t&&!i(t=l?t:t.prototype,s)&&a(t,s,{configurable:!0,value:o})}},function(n,e,r){"use strict";n.exports=function(a,i){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:i}}},function(n,e,r){"use strict";var a=r(34),i=r(35);n.exports=function(s){return a(i(s))}},function(n,e,r){"use strict";var a=r(17),i=Math.max,s=Math.min;n.exports=function(t,o){return t=a(t),t<0?i(t+o,0):s(t,o)}},function(n,e,r){"use strict";var a=r(25),i=r(3)("toStringTag"),s=a(function(){return arguments}())=="Arguments",t=function(l,d){try{return l[d]}catch{}};n.exports=function(o){var l,d,c;return o===void 0?"Undefined":o===null?"Null":typeof(d=t(l=Object(o),i))=="string"?d:s?a(l):(c=a(l))=="Object"&&typeof l.callee=="function"?"Arguments":c}},function(n,e,r){"use strict";var a=r(11),i=r(98),s=r(53),t=r(7),o=r(12),l=r(57),d={},c={},y=n.exports=function(u,S,V,U,z){var D=z?function(){return u}:l(u),k=a(V,U,S?2:1),T=0,R,g,m,v;if(typeof D!="function")throw TypeError(u+" is not iterable!");if(s(D)){for(R=o(u.length);R>T;T++)if(v=S?k(t(g=u[T])[0],g[1]):k(u[T]),v===d||v===c)return v}else for(m=D.call(u);!(g=m.next()).done;)if(v=i(m,k,g.value,S),v===d||v===c)return v};y.BREAK=d,y.RETURN=c},function(n,e,r){"use strict";var a=r(2),i=r(1).document,s=a(i)&&a(i.createElement);n.exports=function(t){return s?i.createElement(t):{}}},function(n,e,r){"use strict";var a=r(2);n.exports=function(i,s){if(!a(i))return i;var t,o;if(s&&typeof(t=i.toString)=="function"&&!a(o=t.call(i))||typeof(t=i.valueOf)=="function"&&!a(o=t.call(i))||!s&&typeof(t=i.toString)=="function"&&!a(o=t.call(i)))return o;throw TypeError("Can't convert object to primitive value")}},function(n,e,r){"use strict";var a=r(25);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return a(i)=="String"?i.split(""):Object(i)}},function(n,e,r){"use strict";n.exports=function(a){if(a==null)throw TypeError("Can't call method on  "+a);return a}},function(n,e,r){"use strict";var a=r(51)("keys"),i=r(16);n.exports=function(s){return a[s]||(a[s]=i(s))}},function(n,e,r){"use strict";n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,e,r){"use strict";var a=r(49),i=r(37);n.exports=Object.keys||function(t){return a(t,i)}},function(n,e,r){"use strict";var a=r(11),i=r(34),s=r(18),t=r(12),o=r(82);n.exports=function(l,d){var c=l==1,y=l==2,u=l==3,S=l==4,V=l==6,U=l==5||V,z=d||o;return function(D,k,T){for(var R=s(D),g=i(R),m=a(k,T,3),v=t(g.length),b=0,f=c?z(D,v):y?z(D,0):void 0,p,h;v>b;b++)if((U||b in g)&&(p=g[b],h=m(p,b,R),l)){if(c)f[b]=h;else if(h)switch(l){case 3:return!0;case 5:return p;case 6:return b;case 2:f.push(p)}else if(S)return!1}return V?-1:u||S?S:f}}},function(n,e,r){"use strict";var a=r(7),i=r(22),s=r(3)("species");n.exports=function(t,o){var l=a(t).constructor,d;return l===void 0||(d=a(l)[s])==null?o:i(d)}},function(n,e,r){"use strict";var a=r(3)("iterator"),i=!1;try{var s=[7][a]();s.return=function(){i=!0},Array.from(s,function(){throw 2})}catch{}n.exports=function(t,o){if(!o&&!i)return!1;var l=!1;try{var d=[7],c=d[a]();c.next=function(){return{done:l=!0}},d[a]=function(){return c},t(d)}catch{}return l}},function(n,e,r){"use strict";var a=r(22);function i(s){var t,o;this.promise=new s(function(l,d){if(t!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");t=l,o=d}),this.resolve=a(t),this.reject=a(o)}n.exports.f=function(s){return new i(s)}},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},i=r(16)("meta"),s=r(2),t=r(10),o=r(13).f,l=0,d=Object.isExtensible||function(){return!0},c=!r(9)(function(){return d(Object.preventExtensions({}))}),y=function(D){o(D,i,{value:{i:"O"+ ++l,w:{}}})},u=function(D,k){if(!s(D))return(typeof D>"u"?"undefined":a(D))=="symbol"?D:(typeof D=="string"?"S":"P")+D;if(!t(D,i)){if(!d(D))return"F";if(!k)return"E";y(D)}return D[i].i},S=function(D,k){if(!t(D,i)){if(!d(D))return!0;if(!k)return!1;y(D)}return D[i].w},V=function(D){return c&&U.NEED&&d(D)&&!t(D,i)&&y(D),D},U=n.exports={KEY:i,NEED:!1,fastKey:u,getWeak:S,onFreeze:V}},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateResponseStatus=e.validateRangeRequestCapabilities=e.createResponseStatusError=void 0;var a=r(0);function i(o){var l=o.getResponseHeader,d=o.isHttp,c=o.rangeChunkSize,y=o.disableRange;(0,a.assert)(c>0);var u={allowRangeRequests:!1,suggestedLength:void 0};if(y||!d||l("Accept-Ranges")!=="bytes")return u;var S=l("Content-Encoding")||"identity";if(S!=="identity")return u;var V=parseInt(l("Content-Length"),10);return!Number.isInteger(V)||(u.suggestedLength=V,V<=2*c)||(u.allowRangeRequests=!0),u}function s(o,l){return o===404||o===0&&/^file:/.test(l)?new a.MissingPDFException('Missing PDF "'+l+'".'):new a.UnexpectedResponseException("Unexpected server response ("+o+') while retrieving PDF "'+l+'".',o)}function t(o){return o===200||o===206}e.createResponseStatusError=s,e.validateRangeRequestCapabilities=i,e.validateResponseStatus=t},function(n,e,r){"use strict";n.exports=!r(8)&&!r(9)(function(){return Object.defineProperty(r(32)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,e,r){"use strict";for(var a=r(1),i=r(6),s=r(16),t=s("typed_array"),o=s("view"),l=!!(a.ArrayBuffer&&a.DataView),d=l,c=0,y=9,u,S="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<y;)(u=a[S[c++]])?(i(u.prototype,t,!0),i(u.prototype,o,!0)):d=!1;n.exports={ABV:l,CONSTR:d,TYPED:t,VIEW:o}},function(n,e,r){"use strict";var a=r(17),i=r(12);n.exports=function(s){if(s===void 0)return 0;var t=a(s),o=i(t);if(t!==o)throw RangeError("Wrong length!");return o}},function(n,e,r){"use strict";var a=r(49),i=r(37).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},function(n,e,r){"use strict";var a=r(10),i=r(28),s=r(50)(!1),t=r(36)("IE_PROTO");n.exports=function(o,l){var d=i(o),c=0,y=[],u;for(u in d)u!=t&&a(d,u)&&y.push(u);for(;l.length>c;)a(d,u=l[c++])&&(~s(y,u)||y.push(u));return y}},function(n,e,r){"use strict";var a=r(28),i=r(12),s=r(29);n.exports=function(t){return function(o,l,d){var c=a(o),y=i(c.length),u=s(d,y),S;if(t&&l!=l){for(;y>u;)if(S=c[u++],S!=S)return!0}else for(;y>u;u++)if((t||u in c)&&c[u]===l)return t||u||0;return!t&&-1}}},function(n,e,r){"use strict";var a=r(4),i=r(1),s="__core-js_shared__",t=i[s]||(i[s]={});(n.exports=function(o,l){return t[o]||(t[o]=l!==void 0?l:{})})("versions",[]).push({version:a.version,mode:r(21)?"pure":"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})},function(n,e,r){"use strict";var a=r(18),i=r(29),s=r(12);n.exports=function(o){for(var l=a(this),d=s(l.length),c=arguments.length,y=i(c>1?arguments[1]:void 0,d),u=c>2?arguments[2]:void 0,S=u===void 0?d:i(u,d);S>y;)l[y++]=o;return l}},function(n,e,r){"use strict";var a=r(19),i=r(3)("iterator"),s=Array.prototype;n.exports=function(t){return t!==void 0&&(a.Array===t||s[i]===t)}},function(n,e,r){"use strict";var a=r(7),i=r(81),s=r(37),t=r(36)("IE_PROTO"),o=function(){},l="prototype",d=function(){var y=r(32)("iframe"),u=s.length,S="<",V=">",U;for(y.style.display="none",r(55).appendChild(y),y.src="javascript:",U=y.contentWindow.document,U.open(),U.write(S+"script"+V+"document.F=Object"+S+"/script"+V),U.close(),d=U.F;u--;)delete d[l][s[u]];return d()};n.exports=Object.create||function(y,u){var S;return y!==null?(o[l]=a(y),S=new o,o[l]=null,S[t]=y):S=d(),u===void 0?S:i(S,u)}},function(n,e,r){"use strict";var a=r(1).document;n.exports=a&&a.documentElement},function(n,e,r){"use strict";var a=r(10),i=r(18),s=r(36)("IE_PROTO"),t=Object.prototype;n.exports=Object.getPrototypeOf||function(o){return o=i(o),a(o,s)?o[s]:typeof o.constructor=="function"&&o instanceof o.constructor?o.constructor.prototype:o instanceof Object?t:null}},function(n,e,r){"use strict";var a=r(30),i=r(3)("iterator"),s=r(19);n.exports=r(4).getIteratorMethod=function(t){if(t!=null)return t[i]||t["@@iterator"]||s[a(t)]}},function(n,e,r){"use strict";var a=r(85),i=r(86),s=r(19),t=r(28);n.exports=r(59)(Array,"Array",function(o,l){this._t=t(o),this._i=0,this._k=l},function(){var o=this._t,l=this._k,d=this._i++;return!o||d>=o.length?(this._t=void 0,i(1)):l=="keys"?i(0,d):l=="values"?i(0,o[d]):i(0,[d,o[d]])},"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},function(n,e,r){"use strict";var a=r(21),i=r(5),s=r(14),t=r(6),o=r(19),l=r(87),d=r(26),c=r(56),y=r(3)("iterator"),u=!([].keys&&"next"in[].keys()),S="@@iterator",V="keys",U="values",z=function(){return this};n.exports=function(D,k,T,R,g,m,v){l(T,k,R);var b=function(E){if(!u&&E in _)return _[E];switch(E){case V:return function(){return new T(this,E)};case U:return function(){return new T(this,E)}}return function(){return new T(this,E)}},f=k+" Iterator",p=g==U,h=!1,_=D.prototype,I=_[y]||_[S]||g&&_[g],W=I||b(g),q=g?p?b("entries"):W:void 0,B=k=="Array"&&_.entries||I,N,L,P;if(B&&(P=c(B.call(new D)),P!==Object.prototype&&P.next&&(d(P,f,!0),!a&&typeof P[y]!="function"&&t(P,y,z))),p&&I&&I.name!==U&&(h=!0,W=function(){return I.call(this)}),(!a||v)&&(u||h||!_[y])&&t(_,y,W),o[k]=W,o[f]=z,g)if(N={values:p?W:b(U),keys:m?W:b(V),entries:q},v)for(L in N)L in _||s(_,L,N[L]);else i(i.P+i.F*(u||h),k,N);return N}},function(n,e,r){"use strict";var a=r(1),i=r(13),s=r(8),t=r(3)("species");n.exports=function(o){var l=a[o];s&&l&&!l[t]&&i.f(l,t,{configurable:!0,get:function(){return this}})}},function(n,e,r){"use strict";var a=r(62),i=r(27),s=r(28),t=r(33),o=r(10),l=r(45),d=Object.getOwnPropertyDescriptor;e.f=r(8)?d:function(y,u){if(y=s(y),u=t(u,!0),l)try{return d(y,u)}catch{}if(o(y,u))return i(!a.f.call(y,u),y[u])}},function(n,e,r){"use strict";e.f={}.propertyIsEnumerable},function(n,e,r){"use strict";var a=r(30),i={};i[r(3)("toStringTag")]="z",i+""!="[object z]"&&r(14)(Object.prototype,"toString",function(){return"[object "+a(this)+"]"},!0)},function(n,e,r){"use strict";for(var a=r(58),i=r(38),s=r(14),t=r(1),o=r(6),l=r(19),d=r(3),c=d("iterator"),y=d("toStringTag"),u=l.Array,S={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},V=i(S),U=0;U<V.length;U++){var z=V[U],D=S[z],k=t[z],T=k&&k.prototype,R;if(T&&(T[c]||o(T,c,u),T[y]||o(T,y,z),l[z]=u,D))for(R in a)T[R]||s(T,R,a[R],!0)}},function(n,e,r){"use strict";var a=r(11),i=r(99),s=r(55),t=r(32),o=r(1),l=o.process,d=o.setImmediate,c=o.clearImmediate,y=o.MessageChannel,u=o.Dispatch,S=0,V={},U="onreadystatechange",z,D,k,T=function(){var m=+this;if(V.hasOwnProperty(m)){var v=V[m];delete V[m],v()}},R=function(m){T.call(m.data)};(!d||!c)&&(d=function(m){for(var v=[],b=1;arguments.length>b;)v.push(arguments[b++]);return V[++S]=function(){i(typeof m=="function"?m:Function(m),v)},z(S),S},c=function(m){delete V[m]},r(25)(l)=="process"?z=function(m){l.nextTick(a(T,m,1))}:u&&u.now?z=function(m){u.now(a(T,m,1))}:y?(D=new y,k=D.port2,D.port1.onmessage=R,z=a(k.postMessage,k,1)):o.addEventListener&&typeof postMessage=="function"&&!o.importScripts?(z=function(m){o.postMessage(m+"","*")},o.addEventListener("message",R,!1)):U in t("script")?z=function(m){s.appendChild(t("script"))[U]=function(){s.removeChild(this),T.call(m)}}:z=function(m){setTimeout(a(T,m,1),0)}),n.exports={set:d,clear:c}},function(n,e,r){"use strict";n.exports=function(a){try{return{e:!1,v:a()}}catch(i){return{e:!0,v:i}}}},function(n,e,r){"use strict";var a=r(7),i=r(2),s=r(42);n.exports=function(t,o){if(a(t),i(o)&&o.constructor===t)return o;var l=s.f(t),d=l.resolve;return d(o),l.promise}},function(n,e,r){"use strict";var a=r(2);n.exports=function(i,s){if(!a(i)||i._t!==s)throw TypeError("Incompatible receiver, "+s+" required!");return i}},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.build=e.version=e._UnsupportedManager=e.setPDFNetworkStreamClass=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=e.getDocument=void 0;var a=function(){function M(j,C){for(var x=0;x<C.length;x++){var F=C[x];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(j,F.key,F)}}return function(j,C,x){return C&&M(j.prototype,C),x&&M(j,x),j}}(),i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=r(0),t=r(15),o=r(119),l=r(120),d=r(20),c=S(d),y=r(71),u=r(123);function S(M){return M&&M.__esModule?M:{default:M}}function V(M,j){if(!(M instanceof j))throw new TypeError("Cannot call a class as a function")}var U=65536,z=!1,D,k=!1,T=typeof document<"u"&&document.currentScript?document.currentScript.src:null,R=null,g=!1;{typeof window>"u"?(z=!0,typeof require.ensure>"u"&&(require.ensure=MX()),g=!0):typeof require<"u"&&typeof require.ensure=="function"&&(g=!0),typeof requirejs<"u"&&requirejs.toUrl&&(D=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var m=typeof requirejs<"u"&&requirejs.load;R=g?function(M){require.ensure([],function(){var j;j=jX(),M(j.WorkerMessageHandler)})}:m?function(M){requirejs(["pdfjs-dist/build/pdf.worker"],function(j){M(j.WorkerMessageHandler)})}:null}var v;function b(M){v=M}function f(M,j,C,x){var F=new h;arguments.length>1&&(0,s.deprecated)("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument"),j&&(j instanceof _||(j=Object.create(j),j.length=M.length,j.initialData=M.initialData,j.abort||(j.abort=function(){})),M=Object.create(M),M.range=j),F.onPassword=C||null,F.onProgress=x||null;var $;if(typeof M=="string")$={url:M};else if((0,s.isArrayBuffer)(M))$={data:M};else if(M instanceof _)$={range:M};else{if((typeof M>"u"?"undefined":i(M))!=="object")throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!M.url&&!M.data&&!M.range)throw new Error("Invalid parameter object: need either .data, .range or .url");$=M}var G={},Z=null,J=null,Y=t.DOMCMapReaderFactory;for(var ee in $){if(ee==="url"&&typeof window<"u"){G[ee]=new URL($[ee],window.location).href;continue}else if(ee==="range"){Z=$[ee];continue}else if(ee==="worker"){J=$[ee];continue}else if(ee==="data"&&!($[ee]instanceof Uint8Array)){var ae=$[ee];if(typeof ae=="string")G[ee]=(0,s.stringToBytes)(ae);else if((typeof ae>"u"?"undefined":i(ae))==="object"&&ae!==null&&!isNaN(ae.length))G[ee]=new Uint8Array(ae);else if((0,s.isArrayBuffer)(ae))G[ee]=new Uint8Array(ae);else throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");continue}else if(ee==="CMapReaderFactory"){Y=$[ee];continue}G[ee]=$[ee]}if(G.rangeChunkSize=G.rangeChunkSize||U,G.ignoreErrors=G.stopAtErrors!==!0,G.disableNativeImageDecoder!==void 0&&(0,s.deprecated)("parameter disableNativeImageDecoder, use nativeImageDecoderSupport instead"),G.nativeImageDecoderSupport=G.nativeImageDecoderSupport||(G.disableNativeImageDecoder===!0?s.NativeImageDecoding.NONE:s.NativeImageDecoding.DECODE),G.nativeImageDecoderSupport!==s.NativeImageDecoding.DECODE&&G.nativeImageDecoderSupport!==s.NativeImageDecoding.NONE&&G.nativeImageDecoderSupport!==s.NativeImageDecoding.DISPLAY&&((0,s.warn)("Invalid parameter nativeImageDecoderSupport: need a state of enum {NativeImageDecoding}"),G.nativeImageDecoderSupport=s.NativeImageDecoding.DECODE),!J){var pe=(0,t.getDefaultSetting)("workerPort");J=pe?B.fromPort(pe):new B,F._worker=J}var se=F.docId;return J.promise.then(function(){if(F.destroyed)throw new Error("Loading aborted");return p(J,G,Z,se).then(function(ue){if(F.destroyed)throw new Error("Loading aborted");var le=void 0;Z?le=new u.PDFDataTransportStream(G,Z):G.data||(le=new v({source:G,disableRange:(0,t.getDefaultSetting)("disableRange")}));var ie=new s.MessageHandler(se,ue,J.port);ie.postMessageTransfers=J.postMessageTransfers;var de=new N(ie,F,le,Y);F._transport=de,ie.send("Ready",null)})}).catch(F._capability.reject),F}function p(M,j,C,x){if(M.destroyed)return Promise.reject(new Error("Worker was destroyed"));var F="1.10.100";return j.disableAutoFetch=(0,t.getDefaultSetting)("disableAutoFetch"),j.disableStream=(0,t.getDefaultSetting)("disableStream"),j.chunkedViewerLoading=!!C,C&&(j.length=C.length,j.initialData=C.initialData),M.messageHandler.sendWithPromise("GetDocRequest",{docId:x,apiVersion:F,source:{data:j.data,url:j.url,password:j.password,disableAutoFetch:j.disableAutoFetch,rangeChunkSize:j.rangeChunkSize,length:j.length},maxImageSize:(0,t.getDefaultSetting)("maxImageSize"),disableFontFace:(0,t.getDefaultSetting)("disableFontFace"),disableCreateObjectURL:(0,t.getDefaultSetting)("disableCreateObjectURL"),postMessageTransfers:(0,t.getDefaultSetting)("postMessageTransfers")&&!k,docBaseUrl:j.docBaseUrl,nativeImageDecoderSupport:j.nativeImageDecoderSupport,ignoreErrors:j.ignoreErrors,isEvalSupported:(0,t.getDefaultSetting)("isEvalSupported")}).then(function($){if(M.destroyed)throw new Error("Worker was destroyed");return $})}var h=function(){var j=0;function C(){this._capability=(0,s.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+j++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return C.prototype={get promise(){return this._capability.promise},destroy:function(){var F=this;this.destroyed=!0;var $=this._transport?this._transport.destroy():Promise.resolve();return $.then(function(){F._transport=null,F._worker&&(F._worker.destroy(),F._worker=null)})},then:function(F,$){return this.promise.then.apply(this.promise,arguments)}},C}(),_=function(){function j(C,x){this.length=C,this.initialData=x,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,s.createPromiseCapability)()}return j.prototype={addRangeListener:function(x){this._rangeListeners.push(x)},addProgressListener:function(x){this._progressListeners.push(x)},addProgressiveReadListener:function(x){this._progressiveReadListeners.push(x)},onDataRange:function(x,F){for(var $=this._rangeListeners,G=0,Z=$.length;G<Z;++G)$[G](x,F)},onDataProgress:function(x){var F=this;this._readyCapability.promise.then(function(){for(var $=F._progressListeners,G=0,Z=$.length;G<Z;++G)$[G](x)})},onDataProgressiveRead:function(x){var F=this;this._readyCapability.promise.then(function(){for(var $=F._progressiveReadListeners,G=0,Z=$.length;G<Z;++G)$[G](x)})},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(x,F){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function(){}},j}(),I=function(){function j(C,x,F){this.pdfInfo=C,this.transport=x,this.loadingTask=F}return j.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(x){return this.transport.getPage(x)},getPageIndex:function(x){return this.transport.getPageIndex(x)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(x){return this.transport.getDestination(x)},getPageLabels:function(){return this.transport.getPageLabels()},getPageMode:function(){return this.transport.getPageMode()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}},j}(),W=function(){function j(C,x,F){this.pageIndex=C,this.pageInfo=x,this.transport=F,this.stats=new s.StatTimer,this.stats.enabled=(0,t.getDefaultSetting)("enableStats"),this.commonObjs=F.commonObjs,this.objs=new L,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return j.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get userUnit(){return this.pageInfo.userUnit},get view(){return this.pageInfo.view},getViewport:function(x,F){return arguments.length<2&&(F=this.rotate),new s.PageViewport(this.view,x,F,0,0)},getAnnotations:function(x){var F=x&&x.intent||null;return(!this.annotationsPromise||this.annotationsIntent!==F)&&(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,F),this.annotationsIntent=F),this.annotationsPromise},render:function(x){var F=this,$=this.stats;$.time("Overall"),this.pendingCleanup=!1;var G=x.intent==="print"?"print":"display",Z=x.canvasFactory||new t.DOMCanvasFactory;this.intentStates[G]||(this.intentStates[G]=Object.create(null));var J=this.intentStates[G];J.displayReadyCapability||(J.receivingOperatorList=!0,J.displayReadyCapability=(0,s.createPromiseCapability)(),J.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:G,renderInteractiveForms:x.renderInteractiveForms===!0}));var Y=function(se){var ue=J.renderTasks.indexOf(ee);ue>=0&&J.renderTasks.splice(ue,1),F.cleanupAfterRender&&(F.pendingCleanup=!0),F._tryCleanup(),se?ee.capability.reject(se):ee.capability.resolve(),$.timeEnd("Rendering"),$.timeEnd("Overall")},ee=new O(Y,x,this.objs,this.commonObjs,J.operatorList,this.pageNumber,Z);ee.useRequestAnimationFrame=G!=="print",J.renderTasks||(J.renderTasks=[]),J.renderTasks.push(ee);var ae=ee.task;return x.continueCallback&&((0,s.deprecated)("render is used with continueCallback parameter"),ae.onContinue=x.continueCallback),J.displayReadyCapability.promise.then(function(pe){if(F.pendingCleanup){Y();return}$.time("Rendering"),ee.initializeGraphics(pe),ee.operatorListChanged()}).catch(Y),ae},getOperatorList:function(){function x(){if($.operatorList.lastChunk){$.opListReadCapability.resolve($.operatorList);var Z=$.renderTasks.indexOf(G);Z>=0&&$.renderTasks.splice(Z,1)}}var F="oplist";this.intentStates[F]||(this.intentStates[F]=Object.create(null));var $=this.intentStates[F],G;return $.opListReadCapability||(G={},G.operatorListChanged=x,$.receivingOperatorList=!0,$.opListReadCapability=(0,s.createPromiseCapability)(),$.renderTasks=[],$.renderTasks.push(G),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:F})),$.opListReadCapability.promise},streamTextContent:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=100;return this.transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:x.normalizeWhitespace===!0,combineTextItems:x.disableCombineTextItems!==!0},{highWaterMark:F,size:function(G){return G.items.length}})},getTextContent:function(x){x=x||{};var F=this.streamTextContent(x);return new Promise(function($,G){function Z(){J.read().then(function(ee){var ae=ee.value,pe=ee.done;if(pe){$(Y);return}s.Util.extendObj(Y.styles,ae.styles),s.Util.appendToArray(Y.items,ae.items),Z()},G)}var J=F.getReader(),Y={items:[],styles:Object.create(null)};Z()})},_destroy:function(){this.destroyed=!0,this.transport.pageCache[this.pageIndex]=null;var x=[];return Object.keys(this.intentStates).forEach(function(F){if(F!=="oplist"){var $=this.intentStates[F];$.renderTasks.forEach(function(G){var Z=G.capability.promise.catch(function(){});x.push(Z),G.cancel()})}},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(x)},destroy:function(){(0,s.deprecated)("page destroy method, use cleanup() instead"),this.cleanup()},cleanup:function(){this.pendingCleanup=!0,this._tryCleanup()},_tryCleanup:function(){!this.pendingCleanup||Object.keys(this.intentStates).some(function(x){var F=this.intentStates[x];return F.renderTasks.length!==0||F.receivingOperatorList},this)||(Object.keys(this.intentStates).forEach(function(x){delete this.intentStates[x]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(x,F){var $=this.intentStates[F];$.displayReadyCapability&&$.displayReadyCapability.resolve(x)},_renderPageChunk:function(x,F){var $=this.intentStates[F],G,Z;for(G=0,Z=x.length;G<Z;G++)$.operatorList.fnArray.push(x.fnArray[G]),$.operatorList.argsArray.push(x.argsArray[G]);for($.operatorList.lastChunk=x.lastChunk,G=0;G<$.renderTasks.length;G++)$.renderTasks[G].operatorListChanged();x.lastChunk&&($.receivingOperatorList=!1,this._tryCleanup())}},j}(),q=function(){function M(j){V(this,M),this._listeners=[],this._defer=j,this._deferred=Promise.resolve(void 0)}return a(M,[{key:"postMessage",value:function(C,x){var F=this;function $(J){if((typeof J>"u"?"undefined":i(J))!=="object"||J===null)return J;if(G.has(J))return G.get(J);var Y,ee;if((ee=J.buffer)&&(0,s.isArrayBuffer)(ee)){var ae=x&&x.indexOf(ee)>=0;return J===ee?Y=J:ae?Y=new J.constructor(ee,J.byteOffset,J.byteLength):Y=new J.constructor(J),G.set(J,Y),Y}Y=Array.isArray(J)?[]:{},G.set(J,Y);for(var pe in J){for(var se,ue=J;!(se=Object.getOwnPropertyDescriptor(ue,pe));)ue=Object.getPrototypeOf(ue);typeof se.value>"u"||typeof se.value=="function"||(Y[pe]=$(se.value))}return Y}if(!this._defer){this._listeners.forEach(function(J){J.call(this,{data:C})},this);return}var G=new WeakMap,Z={data:$(C)};this._deferred.then(function(){F._listeners.forEach(function(J){J.call(this,Z)},F)})}},{key:"addEventListener",value:function(C,x){this._listeners.push(x)}},{key:"removeEventListener",value:function(C,x){var F=this._listeners.indexOf(x);this._listeners.splice(F,1)}},{key:"terminate",value:function(){this._listeners=[]}}]),M}(),B=function(){var j=0;function C(){if(typeof D<"u")return D;if((0,t.getDefaultSetting)("workerSrc"))return(0,t.getDefaultSetting)("workerSrc");if(T)return T.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2");throw new Error("No PDFJS.workerSrc specified")}var x=void 0;function F(){var J;if(x)return x.promise;x=(0,s.createPromiseCapability)();var Y=R||function(ee){s.Util.loadScript(C(),function(){ee(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})};return Y(x.resolve),x.promise}function $(J){var Y="importScripts('"+J+"');";return URL.createObjectURL(new Blob([Y]))}var G=new WeakMap;function Z(J,Y){if(Y&&G.has(Y))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=J,this.destroyed=!1,this.postMessageTransfers=!0,this._readyCapability=(0,s.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,Y){G.set(Y,this),this._initializeFromPort(Y);return}this._initialize()}return Z.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initializeFromPort:function(Y){this._port=Y,this._messageHandler=new s.MessageHandler("main","worker",Y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()},_initialize:function(){var Y=this;if(!z&&!(0,t.getDefaultSetting)("disableWorker")&&typeof Worker<"u"){var ee=C();try{(0,s.isSameOrigin)(window.location.href,ee)||(ee=$(new URL(ee,window.location).href));var ae=new Worker(ee),pe=new s.MessageHandler("main","worker",ae),se=function(){ae.removeEventListener("error",ue),pe.destroy(),ae.terminate(),Y.destroyed?Y._readyCapability.reject(new Error("Worker was destroyed")):Y._setupFakeWorker()},ue=function(){Y._webWorker||se()};ae.addEventListener("error",ue),pe.on("test",function(ie){if(ae.removeEventListener("error",ue),Y.destroyed){se();return}var de=ie&&ie.supportTypedArray;de?(Y._messageHandler=pe,Y._port=ae,Y._webWorker=ae,ie.supportTransfers||(Y.postMessageTransfers=!1,k=!0),Y._readyCapability.resolve(),pe.send("configure",{verbosity:(0,s.getVerbosityLevel)()})):(Y._setupFakeWorker(),pe.destroy(),ae.terminate())}),pe.on("console_log",function(ie){console.log.apply(console,ie)}),pe.on("console_error",function(ie){console.error.apply(console,ie)}),pe.on("ready",function(ie){if(ae.removeEventListener("error",ue),Y.destroyed){se();return}try{le()}catch{Y._setupFakeWorker()}});var le=function(){var de=(0,t.getDefaultSetting)("postMessageTransfers")&&!k,fe=new Uint8Array([de?255:0]);try{pe.send("test",fe,[fe.buffer])}catch{(0,s.info)("Cannot use postMessage transfers"),fe[0]=0,pe.send("test",fe)}};le();return}catch{(0,s.info)("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){var Y=this;!z&&!(0,t.getDefaultSetting)("disableWorker")&&((0,s.warn)("Setting up fake worker."),z=!0),F().then(function(ee){if(Y.destroyed){Y._readyCapability.reject(new Error("Worker was destroyed"));return}var ae=Uint8Array!==Float32Array,pe=new q(ae);Y._port=pe;var se="fake"+j++,ue=new s.MessageHandler(se+"_worker",se,pe);ee.setup(ue,pe);var le=new s.MessageHandler(se,se+"_worker",pe);Y._messageHandler=le,Y._readyCapability.resolve()})},destroy:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),G.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},Z.fromPort=function(J){return G.has(J)?G.get(J):new Z(null,J)},Z}(),N=function(){function j(C,x,F,$){this.messageHandler=C,this.loadingTask=x,this.commonObjs=new L,this.fontLoader=new o.FontLoader(x.docId),this.CMapReaderFactory=new $({baseUrl:(0,t.getDefaultSetting)("cMapUrl"),isCompressed:(0,t.getDefaultSetting)("cMapPacked")}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=F,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,s.createPromiseCapability)(),this.setupMessageHandler()}return j.prototype={destroy:function(){var x=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,s.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var F=[];this.pageCache.forEach(function(G){G&&F.push(G._destroy())}),this.pageCache=[],this.pagePromises=[];var $=this.messageHandler.sendWithPromise("Terminate",null);return F.push($),Promise.all(F).then(function(){x.fontLoader.clear(),x._networkStream&&x._networkStream.cancelAllRequests(),x.messageHandler&&(x.messageHandler.destroy(),x.messageHandler=null),x.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise},setupMessageHandler:function(){var x=this.messageHandler,F=this.loadingTask;x.on("GetReader",function($,G){var Z=this;(0,s.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(J){Z._lastProgress={loaded:J.loaded,total:J.total}},G.onPull=function(){Z._fullReader.read().then(function(J){var Y=J.value,ee=J.done;if(ee){G.close();return}(0,s.assert)((0,s.isArrayBuffer)(Y)),G.enqueue(new Uint8Array(Y),1,[Y])}).catch(function(J){G.error(J)})},G.onCancel=function(J){Z._fullReader.cancel(J)}},this),x.on("ReaderHeadersReady",function($){var G=this,Z=(0,s.createPromiseCapability)(),J=this._fullReader;return J.headersReady.then(function(){if(!J.isStreamingSupported||!J.isRangeSupported){if(G._lastProgress){var Y=G.loadingTask;Y.onProgress&&Y.onProgress(G._lastProgress)}J.onProgress=function(ee){var ae=G.loadingTask;ae.onProgress&&ae.onProgress({loaded:ee.loaded,total:ee.total})}}Z.resolve({isStreamingSupported:J.isStreamingSupported,isRangeSupported:J.isRangeSupported,contentLength:J.contentLength})},Z.reject),Z.promise},this),x.on("GetRangeReader",function($,G){(0,s.assert)(this._networkStream);var Z=this._networkStream.getRangeReader($.begin,$.end);G.onPull=function(){Z.read().then(function(J){var Y=J.value,ee=J.done;if(ee){G.close();return}(0,s.assert)((0,s.isArrayBuffer)(Y)),G.enqueue(new Uint8Array(Y),1,[Y])}).catch(function(J){G.error(J)})},G.onCancel=function(J){Z.cancel(J)}},this),x.on("GetDoc",function(G){var Z=G.pdfInfo;this.numPages=G.pdfInfo.numPages;var J=this.loadingTask,Y=new I(Z,this,J);this.pdfDocument=Y,J._capability.resolve(Y)},this),x.on("PasswordRequest",function(G){var Z=this;if(this._passwordCapability=(0,s.createPromiseCapability)(),F.onPassword){var J=function(ee){Z._passwordCapability.resolve({password:ee})};F.onPassword(J,G.code)}else this._passwordCapability.reject(new s.PasswordException(G.message,G.code));return this._passwordCapability.promise},this),x.on("PasswordException",function(G){F._capability.reject(new s.PasswordException(G.message,G.code))},this),x.on("InvalidPDF",function(G){this.loadingTask._capability.reject(new s.InvalidPDFException(G.message))},this),x.on("MissingPDF",function(G){this.loadingTask._capability.reject(new s.MissingPDFException(G.message))},this),x.on("UnexpectedResponse",function(G){this.loadingTask._capability.reject(new s.UnexpectedResponseException(G.message,G.status))},this),x.on("UnknownError",function(G){this.loadingTask._capability.reject(new s.UnknownErrorException(G.message,G.details))},this),x.on("DataLoaded",function(G){this.downloadInfoCapability.resolve(G)},this),x.on("PDFManagerReady",function(G){},this),x.on("StartRenderPage",function(G){if(!this.destroyed){var Z=this.pageCache[G.pageIndex];Z.stats.timeEnd("Page Request"),Z._startRenderPage(G.transparency,G.intent)}},this),x.on("RenderPageChunk",function(G){if(!this.destroyed){var Z=this.pageCache[G.pageIndex];Z._renderPageChunk(G.operatorList,G.intent)}},this),x.on("commonobj",function(G){var Z=this;if(!this.destroyed){var J=G[0],Y=G[1];if(!this.commonObjs.hasData(J))switch(Y){case"Font":var ee=G[2];if("error"in ee){var ae=ee.error;(0,s.warn)("Error during font loading: "+ae),this.commonObjs.resolve(J,ae);break}var pe=null;(0,t.getDefaultSetting)("pdfBug")&&c.default.FontInspector&&c.default.FontInspector.enabled&&(pe={registerFont:function(ie,de){c.default.FontInspector.fontAdded(ie,de)}});var se=new o.FontFaceObject(ee,{isEvalSupported:(0,t.getDefaultSetting)("isEvalSupported"),disableFontFace:(0,t.getDefaultSetting)("disableFontFace"),fontRegistry:pe}),ue=function(ie){Z.commonObjs.resolve(J,se)};this.fontLoader.bind([se],ue);break;case"FontPath":this.commonObjs.resolve(J,G[2]);break;default:throw new Error("Got unknown common object type "+Y)}}},this),x.on("obj",function(G){if(!this.destroyed){var Z=G[0],J=G[1],Y=G[2],ee=this.pageCache[J],ae;if(!ee.objs.hasData(Z))switch(Y){case"JpegStream":ae=G[3],(0,s.loadJpegStream)(Z,ae,ee.objs);break;case"Image":ae=G[3],ee.objs.resolve(Z,ae);var pe=8e6;ae&&"data"in ae&&ae.data.length>pe&&(ee.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type "+Y)}}},this),x.on("DocProgress",function(G){if(!this.destroyed){var Z=this.loadingTask;Z.onProgress&&Z.onProgress({loaded:G.loaded,total:G.total})}},this),x.on("PageError",function(G){if(!this.destroyed){var Z=this.pageCache[G.pageNum-1],J=Z.intentStates[G.intent];if(J.displayReadyCapability)J.displayReadyCapability.reject(G.error);else throw new Error(G.error);if(J.operatorList){J.operatorList.lastChunk=!0;for(var Y=0;Y<J.renderTasks.length;Y++)J.renderTasks[Y].operatorListChanged()}}},this),x.on("UnsupportedFeature",function(G){if(!this.destroyed){var Z=G.featureId,J=this.loadingTask;J.onUnsupportedFeature&&J.onUnsupportedFeature(Z),E.notify(Z)}},this),x.on("JpegDecode",function($){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if(typeof document>"u")return Promise.reject(new Error('"document" is not defined.'));var G=$[0],Z=$[1];return Z!==3&&Z!==1?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(J,Y){var ee=new Image;ee.onload=function(){var ae=ee.width,pe=ee.height,se=ae*pe,ue=se*4,le=new Uint8Array(se*Z),ie=document.createElement("canvas");ie.width=ae,ie.height=pe;var de=ie.getContext("2d");de.drawImage(ee,0,0);var fe=de.getImageData(0,0,ae,pe).data,he,Se;if(Z===3)for(he=0,Se=0;he<ue;he+=4,Se+=3)le[Se]=fe[he],le[Se+1]=fe[he+1],le[Se+2]=fe[he+2];else if(Z===1)for(he=0,Se=0;he<ue;he+=4,Se++)le[Se]=fe[he];J({data:le,width:ae,height:pe})},ee.onerror=function(){Y(new Error("JpegDecode failed to load image"))},ee.src=G})},this),x.on("FetchBuiltInCMap",function($){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:$.name})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(x,F){var $=this;if(!Number.isInteger(x)||x<=0||x>this.numPages)return Promise.reject(new Error("Invalid page request"));var G=x-1;if(G in this.pagePromises)return this.pagePromises[G];var Z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:G}).then(function(J){if($.destroyed)throw new Error("Transport destroyed");var Y=new W(G,J,$);return $.pageCache[G]=Y,Y});return this.pagePromises[G]=Z,Z},getPageIndex:function(x){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:x}).catch(function(F){return Promise.reject(new Error(F))})},getAnnotations:function(x,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:x,intent:F})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(x){return this.messageHandler.sendWithPromise("GetDestination",{id:x})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getPageMode:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(F){return{info:F[0],metadata:F[1]?new y.Metadata(F[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){var x=this;this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var F=0,$=x.pageCache.length;F<$;F++){var G=x.pageCache[F];G&&G.cleanup()}x.commonObjs.clear(),x.fontLoader.clear()})}},j}(),L=function(){function j(){this.objs=Object.create(null)}return j.prototype={ensureObj:function(x){if(this.objs[x])return this.objs[x];var F={capability:(0,s.createPromiseCapability)(),data:null,resolved:!1};return this.objs[x]=F,F},get:function(x,F){if(F)return this.ensureObj(x).capability.promise.then(F),null;var $=this.objs[x];if(!$||!$.resolved)throw new Error("Requesting object that isn't resolved yet "+x);return $.data},resolve:function(x,F){var $=this.ensureObj(x);$.resolved=!0,$.data=F,$.capability.resolve(F)},isResolved:function(x){var F=this.objs;return F[x]?F[x].resolved:!1},hasData:function(x){return this.isResolved(x)},getData:function(x){var F=this.objs;return!F[x]||!F[x].resolved?null:F[x].data},clear:function(){this.objs=Object.create(null)}},j}(),P=function(){function j(C){this._internalRenderTask=C,this.onContinue=null}return j.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(x,F){return this.promise.then.apply(this.promise,arguments)}},j}(),O=function(){var j=new WeakMap;function C(x,F,$,G,Z,J,Y){this.callback=x,this.params=F,this.objs=$,this.commonObjs=G,this.operatorListIdx=null,this.operatorList=Z,this.pageNumber=J,this.canvasFactory=Y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.useRequestAnimationFrame=!1,this.cancelled=!1,this.capability=(0,s.createPromiseCapability)(),this.task=new P(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}return C.prototype={initializeGraphics:function(F){if(this._canvas){if(j.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");j.set(this._canvas,this)}if(!this.cancelled){(0,t.getDefaultSetting)("pdfBug")&&c.default.StepperManager&&c.default.StepperManager.enabled&&(this.stepper=c.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var $=this.params;this.gfx=new l.CanvasGraphics($.canvasContext,this.commonObjs,this.objs,this.canvasFactory,$.imageLayer),this.gfx.beginDrawing({transform:$.transform,viewport:$.viewport,transparency:F,background:$.background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1,this.cancelled=!0,this._canvas&&j.delete(this._canvas),(0,t.getDefaultSetting)("pdfjsNext")?this.callback(new t.RenderingCancelledException("Rendering cancelled, page "+this.pageNumber,"canvas")):this.callback("cancelled")},operatorListChanged:function(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()},_continue:function(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&typeof window<"u"?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&j.delete(this._canvas),this.callback())))}},C}(),E=function(){var j=[];return{listen:function(x){(0,s.deprecated)("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead"),j.push(x)},notify:function(x){for(var F=0,$=j.length;F<$;F++)j[F](x)}}}(),w,A;e.version=w="1.10.100",e.build=A="ea29ec83",e.getDocument=f,e.LoopbackPort=q,e.PDFDataRangeTransport=_,e.PDFWorker=B,e.PDFDocumentProxy=I,e.PDFPageProxy=W,e.setPDFNetworkStreamClass=b,e._UnsupportedManager=E,e.version=w,e.build=A},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUtils=void 0;var a=r(15),i=r(0),s=function(){function o(p,h,_){var I=p.createShader(_);p.shaderSource(I,h),p.compileShader(I);var W=p.getShaderParameter(I,p.COMPILE_STATUS);if(!W){var q=p.getShaderInfoLog(I);throw new Error("Error during shader compilation: "+q)}return I}function l(p,h){return o(p,h,p.VERTEX_SHADER)}function d(p,h){return o(p,h,p.FRAGMENT_SHADER)}function c(p,h){for(var _=p.createProgram(),I=0,W=h.length;I<W;++I)p.attachShader(_,h[I]);p.linkProgram(_);var q=p.getProgramParameter(_,p.LINK_STATUS);if(!q){var B=p.getProgramInfoLog(_);throw new Error("Error during program linking: "+B)}return _}function y(p,h,_){p.activeTexture(_);var I=p.createTexture();return p.bindTexture(p.TEXTURE_2D,I),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,h),I}var u,S;function V(){u||(S=document.createElement("canvas"),u=S.getContext("webgl",{premultipliedalpha:!1}))}var U="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",z="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",D=null;function k(){var p,h;V(),p=S,S=null,h=u,u=null;var _=l(h,U),I=d(h,z),W=c(h,[_,I]);h.useProgram(W);var q={};q.gl=h,q.canvas=p,q.resolutionLocation=h.getUniformLocation(W,"u_resolution"),q.positionLocation=h.getAttribLocation(W,"a_position"),q.backdropLocation=h.getUniformLocation(W,"u_backdrop"),q.subtypeLocation=h.getUniformLocation(W,"u_subtype");var B=h.getAttribLocation(W,"a_texCoord"),N=h.getUniformLocation(W,"u_image"),L=h.getUniformLocation(W,"u_mask"),P=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,P),h.bufferData(h.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),h.STATIC_DRAW),h.enableVertexAttribArray(B),h.vertexAttribPointer(B,2,h.FLOAT,!1,0,0),h.uniform1i(N,0),h.uniform1i(L,1),D=q}function T(p,h,_){var I=p.width,W=p.height;D||k();var q=D,B=q.canvas,N=q.gl;B.width=I,B.height=W,N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.uniform2f(q.resolutionLocation,I,W),_.backdrop?N.uniform4f(q.resolutionLocation,_.backdrop[0],_.backdrop[1],_.backdrop[2],1):N.uniform4f(q.resolutionLocation,0,0,0,0),N.uniform1i(q.subtypeLocation,_.subtype==="Luminosity"?1:0);var L=y(N,p,N.TEXTURE0),P=y(N,h,N.TEXTURE1),O=N.createBuffer();return N.bindBuffer(N.ARRAY_BUFFER,O),N.bufferData(N.ARRAY_BUFFER,new Float32Array([0,0,I,0,0,W,0,W,I,0,I,W]),N.STATIC_DRAW),N.enableVertexAttribArray(q.positionLocation),N.vertexAttribPointer(q.positionLocation,2,N.FLOAT,!1,0,0),N.clearColor(0,0,0,0),N.enable(N.BLEND),N.blendFunc(N.ONE,N.ONE_MINUS_SRC_ALPHA),N.clear(N.COLOR_BUFFER_BIT),N.drawArrays(N.TRIANGLES,0,6),N.flush(),N.deleteTexture(L),N.deleteTexture(P),N.deleteBuffer(O),B}var R="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",g="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",m=null;function v(){var p,h;V(),p=S,S=null,h=u,u=null;var _=l(h,R),I=d(h,g),W=c(h,[_,I]);h.useProgram(W);var q={};q.gl=h,q.canvas=p,q.resolutionLocation=h.getUniformLocation(W,"u_resolution"),q.scaleLocation=h.getUniformLocation(W,"u_scale"),q.offsetLocation=h.getUniformLocation(W,"u_offset"),q.positionLocation=h.getAttribLocation(W,"a_position"),q.colorLocation=h.getAttribLocation(W,"a_color"),m=q}function b(p,h,_,I,W){m||v();var q=m,B=q.canvas,N=q.gl;B.width=p,B.height=h,N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.uniform2f(q.resolutionLocation,p,h);var L=0,P,O,E;for(P=0,O=I.length;P<O;P++)switch(I[P].type){case"lattice":E=I[P].coords.length/I[P].verticesPerRow|0,L+=(E-1)*(I[P].verticesPerRow-1)*6;break;case"triangles":L+=I[P].coords.length;break}var w=new Float32Array(L*2),A=new Uint8Array(L*3),M=W.coords,j=W.colors,C=0,x=0;for(P=0,O=I.length;P<O;P++){var F=I[P],$=F.coords,G=F.colors;switch(F.type){case"lattice":var Z=F.verticesPerRow;E=$.length/Z|0;for(var J=1;J<E;J++)for(var Y=J*Z+1,ee=1;ee<Z;ee++,Y++)w[C]=M[$[Y-Z-1]],w[C+1]=M[$[Y-Z-1]+1],w[C+2]=M[$[Y-Z]],w[C+3]=M[$[Y-Z]+1],w[C+4]=M[$[Y-1]],w[C+5]=M[$[Y-1]+1],A[x]=j[G[Y-Z-1]],A[x+1]=j[G[Y-Z-1]+1],A[x+2]=j[G[Y-Z-1]+2],A[x+3]=j[G[Y-Z]],A[x+4]=j[G[Y-Z]+1],A[x+5]=j[G[Y-Z]+2],A[x+6]=j[G[Y-1]],A[x+7]=j[G[Y-1]+1],A[x+8]=j[G[Y-1]+2],w[C+6]=w[C+2],w[C+7]=w[C+3],w[C+8]=w[C+4],w[C+9]=w[C+5],w[C+10]=M[$[Y]],w[C+11]=M[$[Y]+1],A[x+9]=A[x+3],A[x+10]=A[x+4],A[x+11]=A[x+5],A[x+12]=A[x+6],A[x+13]=A[x+7],A[x+14]=A[x+8],A[x+15]=j[G[Y]],A[x+16]=j[G[Y]+1],A[x+17]=j[G[Y]+2],C+=12,x+=18;break;case"triangles":for(var ae=0,pe=$.length;ae<pe;ae++)w[C]=M[$[ae]],w[C+1]=M[$[ae]+1],A[x]=j[G[ae]],A[x+1]=j[G[ae]+1],A[x+2]=j[G[ae]+2],C+=2,x+=3;break}}_?N.clearColor(_[0]/255,_[1]/255,_[2]/255,1):N.clearColor(0,0,0,0),N.clear(N.COLOR_BUFFER_BIT);var se=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,se),N.bufferData(N.ARRAY_BUFFER,w,N.STATIC_DRAW),N.enableVertexAttribArray(q.positionLocation),N.vertexAttribPointer(q.positionLocation,2,N.FLOAT,!1,0,0);var ue=N.createBuffer();return N.bindBuffer(N.ARRAY_BUFFER,ue),N.bufferData(N.ARRAY_BUFFER,A,N.STATIC_DRAW),N.enableVertexAttribArray(q.colorLocation),N.vertexAttribPointer(q.colorLocation,3,N.UNSIGNED_BYTE,!1,0,0),N.uniform2f(q.scaleLocation,W.scaleX,W.scaleY),N.uniform2f(q.offsetLocation,W.offsetX,W.offsetY),N.drawArrays(N.TRIANGLES,0,L),N.flush(),N.deleteBuffer(se),N.deleteBuffer(ue),B}function f(){D&&D.canvas&&(D.canvas.width=0,D.canvas.height=0),m&&m.canvas&&(m.canvas.width=0,m.canvas.height=0),D=null,m=null}return{get isEnabled(){if((0,a.getDefaultSetting)("disableWebGL"))return!1;var p=!1;try{V(),p=!!u}catch{}return(0,i.shadow)(this,"isEnabled",p)},composeSMask:T,drawFigures:b,clear:f}}();e.WebGLUtils=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var a=function(){function l(d,c){for(var y=0;y<c.length;y++){var u=c[y];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}return function(d,c,y){return c&&l(d.prototype,c),y&&l(d,y),d}}(),i=r(0),s=r(122);function t(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(d){t(this,l),(0,i.assert)(typeof d=="string","Metadata: input is not a string"),d=this._repair(d);var c=new s.SimpleXMLParser,y=c.parseFromString(d);this._metadata=Object.create(null),y&&this._parse(y)}return a(l,[{key:"_repair",value:function(c){return c.replace(/>\\376\\377([^<]+)/g,function(y,u){for(var S=u.replace(/\\([0-3])([0-7])([0-7])/g,function(k,T,R,g){return String.fromCharCode(T*64+R*8+g*1)}),V="",U=0,z=S.length;U<z;U+=2){var D=S.charCodeAt(U)*256+S.charCodeAt(U+1);D>=32&&D<127&&D!==60&&D!==62&&D!==38?V+=String.fromCharCode(D):V+="&#x"+(65536+D).toString(16).substring(1)+";"}return">"+V})}},{key:"_parse",value:function(c){var y=c.documentElement;if(y.nodeName.toLowerCase()!=="rdf:rdf")for(y=y.firstChild;y&&y.nodeName.toLowerCase()!=="rdf:rdf";)y=y.nextSibling;var u=y?y.nodeName.toLowerCase():null;if(!(!y||u!=="rdf:rdf"||!y.hasChildNodes()))for(var S=y.childNodes,V=0,U=S.length;V<U;V++){var z=S[V];if(z.nodeName.toLowerCase()==="rdf:description"){for(var D=0,k=z.childNodes.length;D<k;D++)if(z.childNodes[D].nodeName.toLowerCase()!=="#text"){var T=z.childNodes[D],R=T.nodeName.toLowerCase();this._metadata[R]=T.textContent.trim()}}}}},{key:"get",value:function(c){return this._metadata[c]||null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(c){return typeof this._metadata[c]<"u"}},{key:"metadata",get:function(){return(0,i.deprecated)("`metadata` getter; use `getAll()` instead."),this.getAll()}}]),l}();e.Metadata=o},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var a=function(){function B(N,L){for(var P=0;P<L.length;P++){var O=L[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(N,O.key,O)}}return function(N,L,P){return L&&B(N.prototype,L),P&&B(N,P),N}}(),i=r(15),s=r(0);function t(B,N){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:B}function o(B,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);B.prototype=Object.create(N&&N.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(B,N):B.__proto__=N)}function l(B,N){if(!(B instanceof N))throw new TypeError("Cannot call a class as a function")}var d=function(){function B(){l(this,B)}return a(B,null,[{key:"create",value:function(L){var P=L.data.annotationType;switch(P){case s.AnnotationType.LINK:return new y(L);case s.AnnotationType.TEXT:return new u(L);case s.AnnotationType.WIDGET:var O=L.data.fieldType;switch(O){case"Tx":return new V(L);case"Btn":if(L.data.radioButton)return new z(L);if(L.data.checkBox)return new U(L);(0,s.warn)("Unimplemented button widget annotation: pushbutton");break;case"Ch":return new D(L)}return new S(L);case s.AnnotationType.POPUP:return new k(L);case s.AnnotationType.LINE:return new R(L);case s.AnnotationType.SQUARE:return new g(L);case s.AnnotationType.CIRCLE:return new m(L);case s.AnnotationType.POLYLINE:return new v(L);case s.AnnotationType.POLYGON:return new b(L);case s.AnnotationType.HIGHLIGHT:return new f(L);case s.AnnotationType.UNDERLINE:return new p(L);case s.AnnotationType.SQUIGGLY:return new h(L);case s.AnnotationType.STRIKEOUT:return new _(L);case s.AnnotationType.STAMP:return new I(L);case s.AnnotationType.FILEATTACHMENT:return new W(L);default:return new c(L)}}}]),B}(),c=function(){function B(N){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;l(this,B),this.isRenderable=L,this.data=N.data,this.layer=N.layer,this.page=N.page,this.viewport=N.viewport,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderInteractiveForms=N.renderInteractiveForms,this.svgFactory=N.svgFactory,L&&(this.container=this._createContainer(P))}return a(B,[{key:"_createContainer",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,P=this.data,O=this.page,E=this.viewport,w=document.createElement("section"),A=P.rect[2]-P.rect[0],M=P.rect[3]-P.rect[1];w.setAttribute("data-annotation-id",P.id);var j=s.Util.normalizeRect([P.rect[0],O.view[3]-P.rect[1]+O.view[1],P.rect[2],O.view[3]-P.rect[3]+O.view[1]]);if(i.CustomStyle.setProp("transform",w,"matrix("+E.transform.join(",")+")"),i.CustomStyle.setProp("transformOrigin",w,-j[0]+"px "+-j[1]+"px"),!L&&P.borderStyle.width>0){w.style.borderWidth=P.borderStyle.width+"px",P.borderStyle.style!==s.AnnotationBorderStyleType.UNDERLINE&&(A=A-2*P.borderStyle.width,M=M-2*P.borderStyle.width);var C=P.borderStyle.horizontalCornerRadius,x=P.borderStyle.verticalCornerRadius;if(C>0||x>0){var F=C+"px / "+x+"px";i.CustomStyle.setProp("borderRadius",w,F)}switch(P.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:w.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:w.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:w.style.borderBottomStyle="solid";break;default:break}P.color?w.style.borderColor=s.Util.makeCssRgb(P.color[0]|0,P.color[1]|0,P.color[2]|0):w.style.borderWidth=0}return w.style.left=j[0]+"px",w.style.top=j[1]+"px",w.style.width=A+"px",w.style.height=M+"px",w}},{key:"_createPopup",value:function(L,P,O){P||(P=document.createElement("div"),P.style.height=L.style.height,P.style.width=L.style.width,L.appendChild(P));var E=new T({container:L,trigger:P,color:O.color,title:O.title,contents:O.contents,hideWrapper:!0}),w=E.render();w.style.left=L.style.width,L.appendChild(w)}},{key:"render",value:function(){throw new Error("Abstract method `AnnotationElement.render` called")}}]),B}(),y=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.url||L.data.dest||L.data.action);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P))}return a(N,[{key:"render",value:function(){this.container.className="linkAnnotation";var P=document.createElement("a");return(0,i.addLinkAttributes)(P,{url:this.data.url,target:this.data.newWindow?i.LinkTarget.BLANK:void 0}),this.data.url||(this.data.action?this._bindNamedAction(P,this.data.action):this._bindLink(P,this.data.dest)),this.container.appendChild(P),this.container}},{key:"_bindLink",value:function(P,O){var E=this;P.href=this.linkService.getDestinationHash(O),P.onclick=function(){return O&&E.linkService.navigateTo(O),!1},O&&(P.className="internalLink")}},{key:"_bindNamedAction",value:function(P,O){var E=this;P.href=this.linkService.getAnchorUrl(""),P.onclick=function(){return E.linkService.executeNamedAction(O),!1},P.className="internalLink"}}]),N}(c),u=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P))}return a(N,[{key:"render",value:function(){this.container.className="textAnnotation";var P=document.createElement("img");return P.style.height=this.container.style.height,P.style.width=this.container.style.width,P.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",P.alt="[{{type}} Annotation]",P.dataset.l10nId="text_annotation_type",P.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,P,this.data),this.container.appendChild(P),this.container}}]),N}(c),S=function(B){o(N,B);function N(){return l(this,N),t(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,[{key:"render",value:function(){return this.container}}]),N}(c),V=function(B){o(N,B);function N(L){l(this,N);var P=L.renderInteractiveForms||!L.data.hasAppearance&&!!L.data.fieldValue;return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P))}return a(N,[{key:"render",value:function(){var P=["left","center","right"];this.container.className="textWidgetAnnotation";var O=null;if(this.renderInteractiveForms){if(this.data.multiLine?(O=document.createElement("textarea"),O.textContent=this.data.fieldValue):(O=document.createElement("input"),O.type="text",O.setAttribute("value",this.data.fieldValue)),O.disabled=this.data.readOnly,this.data.maxLen!==null&&(O.maxLength=this.data.maxLen),this.data.comb){var E=this.data.rect[2]-this.data.rect[0],w=E/this.data.maxLen;O.classList.add("comb"),O.style.letterSpacing="calc("+w+"px - 1ch)"}}else{O=document.createElement("div"),O.textContent=this.data.fieldValue,O.style.verticalAlign="middle",O.style.display="table-cell";var A=null;this.data.fontRefName&&(A=this.page.commonObjs.getData(this.data.fontRefName)),this._setTextStyle(O,A)}return this.data.textAlignment!==null&&(O.style.textAlign=P[this.data.textAlignment]),this.container.appendChild(O),this.container}},{key:"_setTextStyle",value:function(P,O){var E=P.style;if(E.fontSize=this.data.fontSize+"px",E.direction=this.data.fontDirection<0?"rtl":"ltr",!!O){E.fontWeight=O.black?O.bold?"900":"bold":O.bold?"bold":"normal",E.fontStyle=O.italic?"italic":"normal";var w=O.loadedName?'"'+O.loadedName+'", ':"",A=O.fallbackName||"Helvetica, sans-serif";E.fontFamily=w+A}}}]),N}(S),U=function(B){o(N,B);function N(L){return l(this,N),t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,L.renderInteractiveForms))}return a(N,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var P=document.createElement("input");return P.disabled=this.data.readOnly,P.type="checkbox",this.data.fieldValue&&this.data.fieldValue!=="Off"&&P.setAttribute("checked",!0),this.container.appendChild(P),this.container}}]),N}(S),z=function(B){o(N,B);function N(L){return l(this,N),t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,L.renderInteractiveForms))}return a(N,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var P=document.createElement("input");return P.disabled=this.data.readOnly,P.type="radio",P.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&P.setAttribute("checked",!0),this.container.appendChild(P),this.container}}]),N}(S),D=function(B){o(N,B);function N(L){return l(this,N),t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,L.renderInteractiveForms))}return a(N,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var P=document.createElement("select");P.disabled=this.data.readOnly,this.data.combo||(P.size=this.data.options.length,this.data.multiSelect&&(P.multiple=!0));for(var O=0,E=this.data.options.length;O<E;O++){var w=this.data.options[O],A=document.createElement("option");A.textContent=w.displayValue,A.value=w.exportValue,this.data.fieldValue.indexOf(w.displayValue)>=0&&A.setAttribute("selected",!0),P.appendChild(A)}return this.container.appendChild(P),this.container}}]),N}(S),k=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P))}return a(N,[{key:"render",value:function(){var P=["Line","Square","Circle","PolyLine","Polygon"];if(this.container.className="popupAnnotation",P.indexOf(this.data.parentType)>=0)return this.container;var O='[data-annotation-id="'+this.data.parentId+'"]',E=this.layer.querySelector(O);if(!E)return this.container;var w=new T({container:this.container,trigger:E,color:this.data.color,title:this.data.title,contents:this.data.contents}),A=parseFloat(E.style.left),M=parseFloat(E.style.width);return i.CustomStyle.setProp("transformOrigin",this.container,-(A+M)+"px -"+E.style.top),this.container.style.left=A+M+"px",this.container.appendChild(w.render()),this.container}}]),N}(c),T=function(){function B(N){l(this,B),this.container=N.container,this.trigger=N.trigger,this.color=N.color,this.title=N.title,this.contents=N.contents,this.hideWrapper=N.hideWrapper||!1,this.pinned=!1}return a(B,[{key:"render",value:function(){var L=.7,P=document.createElement("div");P.className="popupWrapper",this.hideElement=this.hideWrapper?P:this.container,this.hideElement.setAttribute("hidden",!0);var O=document.createElement("div");O.className="popup";var E=this.color;if(E){var w=L*(255-E[0])+E[0],A=L*(255-E[1])+E[1],M=L*(255-E[2])+E[2];O.style.backgroundColor=s.Util.makeCssRgb(w|0,A|0,M|0)}var j=this._formatContents(this.contents),C=document.createElement("h1");return C.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),O.addEventListener("click",this._hide.bind(this,!0)),O.appendChild(C),O.appendChild(j),P.appendChild(O),P}},{key:"_formatContents",value:function(L){for(var P=document.createElement("p"),O=L.split(/(?:\r\n?|\n)/),E=0,w=O.length;E<w;++E){var A=O[E];P.appendChild(document.createTextNode(A)),E<w-1&&P.appendChild(document.createElement("br"))}return P}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;L&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;L&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),B}(),R=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){this.container.className="lineAnnotation";var P=this.data,O=P.rect[2]-P.rect[0],E=P.rect[3]-P.rect[1],w=this.svgFactory.create(O,E),A=this.svgFactory.createElement("svg:line");return A.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),A.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),A.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),A.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),A.setAttribute("stroke-width",P.borderStyle.width),A.setAttribute("stroke","transparent"),w.appendChild(A),this.container.append(w),this._createPopup(this.container,A,P),this.container}}]),N}(c),g=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){this.container.className="squareAnnotation";var P=this.data,O=P.rect[2]-P.rect[0],E=P.rect[3]-P.rect[1],w=this.svgFactory.create(O,E),A=P.borderStyle.width,M=this.svgFactory.createElement("svg:rect");return M.setAttribute("x",A/2),M.setAttribute("y",A/2),M.setAttribute("width",O-A),M.setAttribute("height",E-A),M.setAttribute("stroke-width",A),M.setAttribute("stroke","transparent"),M.setAttribute("fill","none"),w.appendChild(M),this.container.append(w),this._createPopup(this.container,M,P),this.container}}]),N}(c),m=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){this.container.className="circleAnnotation";var P=this.data,O=P.rect[2]-P.rect[0],E=P.rect[3]-P.rect[1],w=this.svgFactory.create(O,E),A=P.borderStyle.width,M=this.svgFactory.createElement("svg:ellipse");return M.setAttribute("cx",O/2),M.setAttribute("cy",E/2),M.setAttribute("rx",O/2-A/2),M.setAttribute("ry",E/2-A/2),M.setAttribute("stroke-width",A),M.setAttribute("stroke","transparent"),M.setAttribute("fill","none"),w.appendChild(M),this.container.append(w),this._createPopup(this.container,M,P),this.container}}]),N}(c),v=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents),O=t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0));return O.containerClassName="polylineAnnotation",O.svgElementName="svg:polyline",O}return a(N,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var P=this.data,O=P.rect[2]-P.rect[0],E=P.rect[3]-P.rect[1],w=this.svgFactory.create(O,E),A=P.vertices,M=[],j=0,C=A.length;j<C;j++){var x=A[j].x-P.rect[0],F=P.rect[3]-A[j].y;M.push(x+","+F)}M=M.join(" ");var $=P.borderStyle.width,G=this.svgFactory.createElement(this.svgElementName);return G.setAttribute("points",M),G.setAttribute("stroke-width",$),G.setAttribute("stroke","transparent"),G.setAttribute("fill","none"),w.appendChild(G),this.container.append(w),this._createPopup(this.container,G,P),this.container}}]),N}(c),b=function(B){o(N,B);function N(L){l(this,N);var P=t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L));return P.containerClassName="polygonAnnotation",P.svgElementName="svg:polygon",P}return N}(v),f=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),N}(c),p=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),N}(c),h=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),N}(c),_=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),N}(c),I=function(B){o(N,B);function N(L){l(this,N);var P=!!(L.data.hasPopup||L.data.title||L.data.contents);return t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,P,!0))}return a(N,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),N}(c),W=function(B){o(N,B);function N(L){l(this,N);var P=t(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,!0)),O=P.data.file;return P.filename=(0,i.getFilenameFromUrl)(O.filename),P.content=O.content,P.linkService.onFileAttachmentAnnotation({id:(0,s.stringToPDFString)(O.filename),filename:O.filename,content:O.content}),P}return a(N,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var P=document.createElement("div");return P.style.height=this.container.style.height,P.style.width=this.container.style.width,P.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,P,this.data),this.container.appendChild(P),this.container}},{key:"_download",value:function(){if(!this.downloadManager){(0,s.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}]),N}(c),q=function(){function B(){l(this,B)}return a(B,null,[{key:"render",value:function(L){for(var P=0,O=L.annotations.length;P<O;P++){var E=L.annotations[P];if(E){var w=d.create({data:E,layer:L.div,page:L.page,viewport:L.viewport,linkService:L.linkService,downloadManager:L.downloadManager,imageResourcesPath:L.imageResourcesPath||(0,i.getDefaultSetting)("imageResourcesPath"),renderInteractiveForms:L.renderInteractiveForms||!1,svgFactory:new i.DOMSVGFactory});w.isRenderable&&L.div.appendChild(w.render())}}}},{key:"update",value:function(L){for(var P=0,O=L.annotations.length;P<O;P++){var E=L.annotations[P],w=L.div.querySelector('[data-annotation-id="'+E.id+'"]');w&&i.CustomStyle.setProp("transform",w,"matrix("+L.viewport.transform.join(",")+")")}L.div.removeAttribute("hidden")}}]),B}();e.AnnotationLayer=q},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var a=r(0),i=r(15),s=function(){var o=1e5,l=/\S/;function d(k){return!l.test(k)}var c=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function y(k,T,R){var g=document.createElement("div"),m={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(k._textDivs.push(g),d(T.str)){m.isWhitespace=!0,k._textDivProperties.set(g,m);return}var v=a.Util.transform(k._viewport.transform,T.transform),b=Math.atan2(v[1],v[0]),f=R[T.fontName];f.vertical&&(b+=Math.PI/2);var p=Math.sqrt(v[2]*v[2]+v[3]*v[3]),h=p;f.ascent?h=f.ascent*h:f.descent&&(h=(1+f.descent)*h);var _,I;if(b===0?(_=v[4],I=v[5]-h):(_=v[4]+h*Math.sin(b),I=v[5]-h*Math.cos(b)),c[1]=_,c[3]=I,c[5]=p,c[7]=f.fontFamily,m.style=c.join(""),g.setAttribute("style",m.style),g.textContent=T.str,(0,i.getDefaultSetting)("pdfBug")&&(g.dataset.fontName=T.fontName),b!==0&&(m.angle=b*(180/Math.PI)),T.str.length>1&&(f.vertical?m.canvasWidth=T.height*k._viewport.scale:m.canvasWidth=T.width*k._viewport.scale),k._textDivProperties.set(g,m),k._textContentStream&&k._layoutText(g),k._enhanceTextSelection){var W=1,q=0;b!==0&&(W=Math.cos(b),q=Math.sin(b));var B=(f.vertical?T.height:T.width)*k._viewport.scale,N=p,L,P;b!==0?(L=[W,q,-q,W,_,I],P=a.Util.getAxialAlignedBoundingBox([0,0,B,N],L)):P=[_,I,_+B,I+N],k._bounds.push({left:P[0],top:P[1],right:P[2],bottom:P[3],div:g,size:[B,N],m:L})}}function u(k){if(!k._canceled){var T=k._textDivs,R=k._capability,g=T.length;if(g>o){k._renderingDone=!0,R.resolve();return}if(!k._textContentStream)for(var m=0;m<g;m++)k._layoutText(T[m]);k._renderingDone=!0,R.resolve()}}function S(k){for(var T=k._bounds,R=k._viewport,g=V(R.width,R.height,T),m=0;m<g.length;m++){var v=T[m].div,b=k._textDivProperties.get(v);if(b.angle===0){b.paddingLeft=T[m].left-g[m].left,b.paddingTop=T[m].top-g[m].top,b.paddingRight=g[m].right-T[m].right,b.paddingBottom=g[m].bottom-T[m].bottom,k._textDivProperties.set(v,b);continue}var f=g[m],p=T[m],h=p.m,_=h[0],I=h[1],W=[[0,0],[0,p.size[1]],[p.size[0],0],p.size],q=new Float64Array(64);W.forEach(function(L,P){var O=a.Util.applyTransform(L,h);q[P+0]=_&&(f.left-O[0])/_,q[P+4]=I&&(f.top-O[1])/I,q[P+8]=_&&(f.right-O[0])/_,q[P+12]=I&&(f.bottom-O[1])/I,q[P+16]=I&&(f.left-O[0])/-I,q[P+20]=_&&(f.top-O[1])/_,q[P+24]=I&&(f.right-O[0])/-I,q[P+28]=_&&(f.bottom-O[1])/_,q[P+32]=_&&(f.left-O[0])/-_,q[P+36]=I&&(f.top-O[1])/-I,q[P+40]=_&&(f.right-O[0])/-_,q[P+44]=I&&(f.bottom-O[1])/-I,q[P+48]=I&&(f.left-O[0])/I,q[P+52]=_&&(f.top-O[1])/-_,q[P+56]=I&&(f.right-O[0])/I,q[P+60]=_&&(f.bottom-O[1])/-_});var B=function(P,O,E){for(var w=0,A=0;A<E;A++){var M=P[O++];M>0&&(w=w?Math.min(M,w):M)}return w},N=1+Math.min(Math.abs(_),Math.abs(I));b.paddingLeft=B(q,32,16)/N,b.paddingTop=B(q,48,16)/N,b.paddingRight=B(q,0,16)/N,b.paddingBottom=B(q,16,16)/N,k._textDivProperties.set(v,b)}}function V(k,T,R){var g=R.map(function(v,b){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:b,x1New:void 0,x2New:void 0}});U(k,g);var m=new Array(R.length);return g.forEach(function(v){var b=v.index;m[b]={left:v.x1New,top:0,right:v.x2New,bottom:0}}),R.map(function(v,b){var f=m[b],p=g[b];p.x1=v.top,p.y1=k-f.right,p.x2=v.bottom,p.y2=k-f.left,p.index=b,p.x1New=void 0,p.x2New=void 0}),U(T,g),g.forEach(function(v){var b=v.index;m[b].top=v.x1New,m[b].bottom=v.x2New}),m}function U(k,T){T.sort(function(m,v){return m.x1-v.x1||m.index-v.index});var R={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},g=[{start:-1/0,end:1/0,boundary:R}];T.forEach(function(m){for(var v=0;v<g.length&&g[v].end<=m.y1;)v++;for(var b=g.length-1;b>=0&&g[b].start>=m.y2;)b--;var f,p,h,_,I=-1/0;for(h=v;h<=b;h++){f=g[h],p=f.boundary;var W;p.x2>m.x1?W=p.index>m.index?p.x1New:m.x1:p.x2New===void 0?W=(p.x2+m.x1)/2:W=p.x2New,W>I&&(I=W)}for(m.x1New=I,h=v;h<=b;h++)f=g[h],p=f.boundary,p.x2New===void 0?p.x2>m.x1?p.index>m.index&&(p.x2New=p.x2):p.x2New=I:p.x2New>I&&(p.x2New=Math.max(I,p.x2));var q=[],B=null;for(h=v;h<=b;h++){f=g[h],p=f.boundary;var N=p.x2>m.x2?p:m;B===N?q[q.length-1].end=f.end:(q.push({start:f.start,end:f.end,boundary:N}),B=N)}for(g[v].start<m.y1&&(q[0].start=m.y1,q.unshift({start:g[v].start,end:m.y1,boundary:g[v].boundary})),m.y2<g[b].end&&(q[q.length-1].end=m.y2,q.push({start:m.y2,end:g[b].end,boundary:g[b].boundary})),h=v;h<=b;h++)if(f=g[h],p=f.boundary,p.x2New===void 0){var L=!1;for(_=v-1;!L&&_>=0&&g[_].start>=p.y1;_--)L=g[_].boundary===p;for(_=b+1;!L&&_<g.length&&g[_].end<=p.y2;_++)L=g[_].boundary===p;for(_=0;!L&&_<q.length;_++)L=q[_].boundary===p;L||(p.x2New=I)}Array.prototype.splice.apply(g,[v,b-v+1].concat(q))}),g.forEach(function(m){var v=m.boundary;v.x2New===void 0&&(v.x2New=Math.max(k,v.x2))})}function z(k){var T=k.textContent,R=k.textContentStream,g=k.container,m=k.viewport,v=k.textDivs,b=k.textContentItemsStr,f=k.enhanceTextSelection;this._textContent=T,this._textContentStream=R,this._container=g,this._viewport=m,this._textDivs=v||[],this._textContentItemsStr=b||[],this._enhanceTextSelection=!!f,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,a.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}z.prototype={get promise(){return this._capability.promise},cancel:function(){this._reader&&(this._reader.cancel(new a.AbortException("text layer task cancelled")),this._reader=null),this._canceled=!0,this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function(T,R){for(var g=0,m=T.length;g<m;g++)this._textContentItemsStr.push(T[g].str),y(this,T[g],R)},_layoutText:function(T){var R=this._container,g=this._textDivProperties.get(T);if(!g.isWhitespace){var m=T.style.fontSize,v=T.style.fontFamily;(m!==this._layoutTextLastFontSize||v!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=m+" "+v,this._lastFontSize=m,this._lastFontFamily=v);var b=this._layoutTextCtx.measureText(T.textContent).width,f="";g.canvasWidth!==0&&b>0&&(g.scale=g.canvasWidth/b,f="scaleX("+g.scale+")"),g.angle!==0&&(f="rotate("+g.angle+"deg) "+f),f!==""&&(g.originalTransform=f,i.CustomStyle.setProp("transform",T,f)),this._textDivProperties.set(T,g),R.appendChild(T)}},_render:function(T){var R=this,g=(0,a.createPromiseCapability)(),m=Object.create(null),v=document.createElement("canvas");if(v.mozOpaque=!0,this._layoutTextCtx=v.getContext("2d",{alpha:!1}),this._textContent){var b=this._textContent.items,f=this._textContent.styles;this._processItems(b,f),g.resolve()}else if(this._textContentStream){var p=function h(){R._reader.read().then(function(_){var I=_.value,W=_.done;if(W){g.resolve();return}a.Util.extendObj(m,I.styles),R._processItems(I.items,m),h()},g.reject)};this._reader=this._textContentStream.getReader(),p()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');g.promise.then(function(){m=null,T?R._renderTimer=setTimeout(function(){u(R),R._renderTimer=null},T):u(R)},this._capability.reject)},expandTextDivs:function(T){if(!(!this._enhanceTextSelection||!this._renderingDone)){this._bounds!==null&&(S(this),this._bounds=null);for(var R=0,g=this._textDivs.length;R<g;R++){var m=this._textDivs[R],v=this._textDivProperties.get(m);if(!v.isWhitespace)if(T){var b="",f="";v.scale!==1&&(b="scaleX("+v.scale+")"),v.angle!==0&&(b="rotate("+v.angle+"deg) "+b),v.paddingLeft!==0&&(f+=" padding-left: "+v.paddingLeft/v.scale+"px;",b+=" translateX("+-v.paddingLeft/v.scale+"px)"),v.paddingTop!==0&&(f+=" padding-top: "+v.paddingTop+"px;",b+=" translateY("+-v.paddingTop+"px)"),v.paddingRight!==0&&(f+=" padding-right: "+v.paddingRight/v.scale+"px;"),v.paddingBottom!==0&&(f+=" padding-bottom: "+v.paddingBottom+"px;"),f!==""&&m.setAttribute("style",v.style+f),b!==""&&i.CustomStyle.setProp("transform",m,b)}else m.style.padding=0,i.CustomStyle.setProp("transform",m,v.originalTransform||"")}}}};function D(k){var T=new z({textContent:k.textContent,textContentStream:k.textContentStream,container:k.container,viewport:k.viewport,textDivs:k.textDivs,textContentItemsStr:k.textContentItemsStr,enhanceTextSelection:k.enhanceTextSelection});return T._render(k.timeout),T}return D}();e.renderTextLayer=s},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var a=r(0),i=r(15),s=function(){throw new Error("Not implemented: SVGGraphics")};{var t={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o=function(){for(var c=new Uint8Array([137,80,78,71,13,10,26,10]),y=12,u=new Int32Array(256),S=0;S<256;S++){for(var V=S,U=0;U<8;U++)V&1?V=3988292384^V>>1&2147483647:V=V>>1&2147483647;u[S]=V}function z(m,v,b){for(var f=-1,p=v;p<b;p++){var h=(f^m[p])&255,_=u[h];f=f>>>8^_}return f^-1}function D(m,v,b,f){var p=f,h=v.length;b[p]=h>>24&255,b[p+1]=h>>16&255,b[p+2]=h>>8&255,b[p+3]=h&255,p+=4,b[p]=m.charCodeAt(0)&255,b[p+1]=m.charCodeAt(1)&255,b[p+2]=m.charCodeAt(2)&255,b[p+3]=m.charCodeAt(3)&255,p+=4,b.set(v,p),p+=v.length;var _=z(b,f+4,p);b[p]=_>>24&255,b[p+1]=_>>16&255,b[p+2]=_>>8&255,b[p+3]=_&255}function k(m,v,b){for(var f=1,p=0,h=v;h<b;++h)f=(f+(m[h]&255))%65521,p=(p+f)%65521;return p<<16|f}function T(m){if(!(0,a.isNodeJS)())return R(m);try{var v;parseInt(process.versions.node)>=8?v=m:v=new Buffer(m);var b=require("zlib").deflateSync(v,{level:9});return b instanceof Uint8Array?b:new Uint8Array(b)}catch(f){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+f)}return R(m)}function R(m){var v=m.length,b=65535,f=Math.ceil(v/b),p=new Uint8Array(2+v+f*5+4),h=0;p[h++]=120,p[h++]=156;for(var _=0;v>b;)p[h++]=0,p[h++]=255,p[h++]=255,p[h++]=0,p[h++]=0,p.set(m.subarray(_,_+b),h),h+=b,_+=b,v-=b;p[h++]=1,p[h++]=v&255,p[h++]=v>>8&255,p[h++]=~v&65535&255,p[h++]=(~v&65535)>>8&255,p.set(m.subarray(_),h),h+=m.length-_;var I=k(m,0,m.length);return p[h++]=I>>24&255,p[h++]=I>>16&255,p[h++]=I>>8&255,p[h++]=I&255,p}function g(m,v,b){var f=m.width,p=m.height,h,_,I,W=m.data;switch(v){case a.ImageKind.GRAYSCALE_1BPP:_=0,h=1,I=f+7>>3;break;case a.ImageKind.RGB_24BPP:_=2,h=8,I=f*3;break;case a.ImageKind.RGBA_32BPP:_=6,h=8,I=f*4;break;default:throw new Error("invalid format")}var q=new Uint8Array((1+I)*p),B=0,N=0,L,P;for(L=0;L<p;++L)q[B++]=0,q.set(W.subarray(N,N+I),B),N+=I,B+=I;if(v===a.ImageKind.GRAYSCALE_1BPP)for(B=0,L=0;L<p;L++)for(B++,P=0;P<I;P++)q[B++]^=255;var O=new Uint8Array([f>>24&255,f>>16&255,f>>8&255,f&255,p>>24&255,p>>16&255,p>>8&255,p&255,h,_,0,0,0]),E=T(q),w=c.length+y*3+O.length+E.length,A=new Uint8Array(w),M=0;return A.set(c,M),M+=c.length,D("IHDR",O,A,M),M+=y+O.length,D("IDATA",E,A,M),M+=y+E.length,D("IEND",new Uint8Array(0),A,M),(0,a.createObjectURL)(A,"image/png",b)}return function(v,b){var f=v.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:v.kind;return g(v,f,b)}}(),l=function(){function c(){this.fontSizeScale=1,this.fontWeight=t.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=t.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return c.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(u,S){this.x=u,this.y=S}},c}();e.SVGGraphics=s=function(){function c(R){for(var g=[],m=[],v=R.length,b=0;b<v;b++){if(R[b].fn==="save"){g.push({fnId:92,fn:"group",items:[]}),m.push(g),g=g[g.length-1].items;continue}R[b].fn==="restore"?g=m.pop():g.push(R[b])}return g}function y(R){if(Number.isInteger(R))return R.toString();var g=R.toFixed(10),m=g.length-1;if(g[m]!=="0")return g;do m--;while(g[m]==="0");return g.substr(0,g[m]==="."?m:m+1)}function u(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":"scale("+y(R[0])+" "+y(R[3])+")";if(R[0]===R[3]&&R[1]===-R[2]){var g=Math.acos(R[0])*180/Math.PI;return"rotate("+y(g)+")"}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return"translate("+y(R[4])+" "+y(R[5])+")";return"matrix("+y(R[0])+" "+y(R[1])+" "+y(R[2])+" "+y(R[3])+" "+y(R[4])+" "+y(R[5])+")"}function S(R,g,m){this.svgFactory=new i.DOMSVGFactory,this.current=new l,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=R,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m}var V="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/1999/xlink",z=["butt","round","square"],D=["miter","round","bevel"],k=0,T=0;return S.prototype={save:function(){this.transformStack.push(this.transformMatrix);var g=this.current;this.extraStack.push(g),this.current=g.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function(g){this.save(),this.executeOpTree(g),this.restore()},loadDependencies:function(g){for(var m=this,v=g.fnArray,b=v.length,f=g.argsArray,p=0;p<b;p++)if(a.OPS.dependency===v[p])for(var h=f[p],_=0,I=h.length;_<I;_++){var W=h[_],q=W.substring(0,2)==="g_",B;q?B=new Promise(function(N){m.commonObjs.get(W,N)}):B=new Promise(function(N){m.objs.get(W,N)}),this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)},transform:function(g,m,v,b,f,p){var h=[g,m,v,b,f,p];this.transformMatrix=a.Util.transform(this.transformMatrix,h),this.tgrp=null},getSVG:function(g,m){var v=this;this.viewport=m;var b=this._initialize(m);return this.loadDependencies(g).then(function(){v.transformMatrix=a.IDENTITY_MATRIX;var f=v.convertOpList(g);return v.executeOpTree(f),b})},convertOpList:function(g){var m=g.argsArray,v=g.fnArray,b=v.length,f=[],p=[];for(var h in a.OPS)f[a.OPS[h]]=h;for(var _=0;_<b;_++){var I=v[_];p.push({fnId:I,fn:f[I],args:m[_]})}return c(p)},executeOpTree:function(g){for(var m=g.length,v=0;v<m;v++){var b=g[v].fn,f=g[v].fnId,p=g[v].args;switch(f|0){case a.OPS.beginText:this.beginText();break;case a.OPS.setLeading:this.setLeading(p);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(p[0],p[1]);break;case a.OPS.setFont:this.setFont(p);break;case a.OPS.showText:this.showText(p[0]);break;case a.OPS.showSpacedText:this.showText(p[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(p[0],p[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(p[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(p[0]);break;case a.OPS.setHScale:this.setHScale(p[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(p[0],p[1],p[2],p[3],p[4],p[5]);break;case a.OPS.setTextRise:this.setTextRise(p[0]);break;case a.OPS.setLineWidth:this.setLineWidth(p[0]);break;case a.OPS.setLineJoin:this.setLineJoin(p[0]);break;case a.OPS.setLineCap:this.setLineCap(p[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(p[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(p[0],p[1],p[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(p[0],p[1],p[2]);break;case a.OPS.setDash:this.setDash(p[0],p[1]);break;case a.OPS.setGState:this.setGState(p[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintJpegXObject:this.paintJpegXObject(p[0],p[1],p[2]);break;case a.OPS.paintImageXObject:this.paintImageXObject(p[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(p[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(p[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(p[0],p[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(p[0],p[1],p[2],p[3],p[4],p[5]);break;case a.OPS.constructPath:this.constructPath(p[0],p[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(g[v].items);break;default:(0,a.warn)("Unimplemented operator "+b);break}}},setWordSpacing:function(g){this.current.wordSpacing=g},setCharSpacing:function(g){this.current.charSpacing=g},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(g,m,v,b,f,p){var h=this.current;this.current.textMatrix=this.current.lineMatrix=[g,m,v,b,f,p],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,h.xcoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",y(h.fontSize)+"px"),h.tspan.setAttributeNS(null,"y",y(-h.y)),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtElement.appendChild(h.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=a.IDENTITY_MATRIX,this.current.lineMatrix=a.IDENTITY_MATRIX,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.txtElement=this.svgFactory.createElement("svg:text"),this.current.txtgrp=this.svgFactory.createElement("svg:g"),this.current.xcoords=[]},moveText:function(g,m){var v=this.current;this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=m,v.xcoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",y(v.fontSize)+"px"),v.tspan.setAttributeNS(null,"y",y(-v.y))},showText:function(g){var m=this.current,v=m.font,b=m.fontSize;if(b!==0){var f=m.charSpacing,p=m.wordSpacing,h=m.fontDirection,_=m.textHScale*h,I=g.length,W=v.vertical,q=b*m.fontMatrix[0],B=0,N;for(N=0;N<I;++N){var L=g[N];if(L===null){B+=h*p;continue}else if((0,a.isNum)(L)){B+=-L*b*.001;continue}var P=L.width,O=L.fontChar,E=(L.isSpace?p:0)+f,w=P*q+E*h;if(!L.isInFont&&!v.missingFile){B+=w;continue}m.xcoords.push(m.x+B*_),m.tspan.textContent+=O,B+=w}W?m.y-=B*_:m.x+=B*_,m.tspan.setAttributeNS(null,"x",m.xcoords.map(y).join(" ")),m.tspan.setAttributeNS(null,"y",y(-m.y)),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",y(m.fontSize)+"px"),m.fontStyle!==t.fontStyle&&m.tspan.setAttributeNS(null,"font-style",m.fontStyle),m.fontWeight!==t.fontWeight&&m.tspan.setAttributeNS(null,"font-weight",m.fontWeight),m.fillColor!==t.fillColor&&m.tspan.setAttributeNS(null,"fill",m.fillColor);var A=m.textMatrix;m.textRise!==0&&(A=A.slice(),A[5]+=m.textRise),m.txtElement.setAttributeNS(null,"transform",u(A)+" scale(1, -1)"),m.txtElement.setAttributeNS(V,"xml:space","preserve"),m.txtElement.appendChild(m.tspan),m.txtgrp.appendChild(m.txtElement),this._ensureTransformGroup().appendChild(m.txtElement)}},setLeadingMoveText:function(g,m){this.setLeading(-m),this.moveText(g,m)},addFontStyle:function(g){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var m=(0,a.createObjectURL)(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+g.loadedName+'"; src: url('+m+`); }
`},setFont:function(g){var m=this.current,v=this.commonObjs.get(g[0]),b=g[1];this.current.font=v,this.embedFonts&&v.data&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),m.fontMatrix=v.fontMatrix?v.fontMatrix:a.FONT_IDENTITY_MATRIX;var f=v.black?v.bold?"bolder":"bold":v.bold?"bold":"normal",p=v.italic?"italic":"normal";b<0?(b=-b,m.fontDirection=-1):m.fontDirection=1,m.fontSize=b,m.fontFamily=v.loadedName,m.fontWeight=f,m.fontStyle=p,m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"y",y(-m.y)),m.xcoords=[]},endText:function(){},setLineWidth:function(g){this.current.lineWidth=g},setLineCap:function(g){this.current.lineCap=z[g]},setLineJoin:function(g){this.current.lineJoin=D[g]},setMiterLimit:function(g){this.current.miterLimit=g},setStrokeAlpha:function(g){this.current.strokeAlpha=g},setStrokeRGBColor:function(g,m,v){var b=a.Util.makeCssRgb(g,m,v);this.current.strokeColor=b},setFillAlpha:function(g){this.current.fillAlpha=g},setFillRGBColor:function(g,m,v){var b=a.Util.makeCssRgb(g,m,v);this.current.fillColor=b,this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]},setDash:function(g,m){this.current.dashArray=g,this.current.dashPhase=m},constructPath:function(g,m){var v=this.current,b=v.x,f=v.y;v.path=this.svgFactory.createElement("svg:path");for(var p=[],h=g.length,_=0,I=0;_<h;_++)switch(g[_]|0){case a.OPS.rectangle:b=m[I++],f=m[I++];var W=m[I++],q=m[I++],B=b+W,N=f+q;p.push("M",y(b),y(f),"L",y(B),y(f),"L",y(B),y(N),"L",y(b),y(N),"Z");break;case a.OPS.moveTo:b=m[I++],f=m[I++],p.push("M",y(b),y(f));break;case a.OPS.lineTo:b=m[I++],f=m[I++],p.push("L",y(b),y(f));break;case a.OPS.curveTo:b=m[I+4],f=m[I+5],p.push("C",y(m[I]),y(m[I+1]),y(m[I+2]),y(m[I+3]),y(b),y(f)),I+=6;break;case a.OPS.curveTo2:b=m[I+2],f=m[I+3],p.push("C",y(b),y(f),y(m[I]),y(m[I+1]),y(m[I+2]),y(m[I+3])),I+=4;break;case a.OPS.curveTo3:b=m[I+2],f=m[I+3],p.push("C",y(m[I]),y(m[I+1]),y(b),y(f),y(b),y(f)),I+=4;break;case a.OPS.closePath:p.push("Z");break}v.path.setAttributeNS(null,"d",p.join(" ")),v.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(v.path),v.element=v.path,v.setCurrentPoint(b,f)},endPath:function(){if(this.pendingClip){var g=this.current,m="clippath"+k;k++;var v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",m),v.setAttributeNS(null,"transform",u(this.transformMatrix));var b=g.element.cloneNode();this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,v.appendChild(b),this.defs.appendChild(v),g.activeClipUrl&&(g.clipGroup=null,this.extraStack.forEach(function(f){f.clipGroup=null})),g.activeClipUrl="url(#"+m+")",this.tgrp=null}},clip:function(g){this.pendingClip=g},closePath:function(){var g=this.current,m=g.path.getAttributeNS(null,"d");m+="Z",g.path.setAttributeNS(null,"d",m)},setLeading:function(g){this.current.leading=-g},setTextRise:function(g){this.current.textRise=g},setHScale:function(g){this.current.textHScale=g/100},setGState:function(g){for(var m=0,v=g.length;m<v;m++){var b=g[m],f=b[0],p=b[1];switch(f){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"Font":this.setFont(p);break;case"CA":this.setStrokeAlpha(p);break;case"ca":this.setFillAlpha(p);break;default:(0,a.warn)("Unimplemented graphic state "+f);break}}},fill:function(){var g=this.current;g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha)},stroke:function(){var g=this.current;g.element.setAttributeNS(null,"stroke",g.strokeColor),g.element.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),g.element.setAttributeNS(null,"stroke-miterlimit",y(g.miterLimit)),g.element.setAttributeNS(null,"stroke-linecap",g.lineCap),g.element.setAttributeNS(null,"stroke-linejoin",g.lineJoin),g.element.setAttributeNS(null,"stroke-width",y(g.lineWidth)+"px"),g.element.setAttributeNS(null,"stroke-dasharray",g.dashArray.map(y).join(" ")),g.element.setAttributeNS(null,"stroke-dashoffset",y(g.dashPhase)+"px"),g.element.setAttributeNS(null,"fill","none")},eoFill:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},paintSolidColorImageMask:function(){var g=this.current,m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",g.fillColor),this._ensureTransformGroup().appendChild(m)},paintJpegXObject:function(g,m,v){var b=this.objs.get(g),f=this.svgFactory.createElement("svg:image");f.setAttributeNS(U,"xlink:href",b.src),f.setAttributeNS(null,"width",y(m)),f.setAttributeNS(null,"height",y(v)),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",y(-v)),f.setAttributeNS(null,"transform","scale("+y(1/m)+" "+y(-1/v)+")"),this._ensureTransformGroup().appendChild(f)},paintImageXObject:function(g){var m=this.objs.get(g);if(!m){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(m)},paintInlineImageXObject:function(g,m){var v=g.width,b=g.height,f=o(g,this.forceDataSchema),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y","0"),p.setAttributeNS(null,"width",y(v)),p.setAttributeNS(null,"height",y(b)),this.current.element=p,this.clip("nonzero");var h=this.svgFactory.createElement("svg:image");h.setAttributeNS(U,"xlink:href",f),h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y",y(-b)),h.setAttributeNS(null,"width",y(v)+"px"),h.setAttributeNS(null,"height",y(b)+"px"),h.setAttributeNS(null,"transform","scale("+y(1/v)+" "+y(-1/b)+")"),m?m.appendChild(h):this._ensureTransformGroup().appendChild(h)},paintImageMaskXObject:function(g){var m=this.current,v=g.width,b=g.height,f=m.fillColor;m.maskId="mask"+T++;var p=this.svgFactory.createElement("svg:mask");p.setAttributeNS(null,"id",m.maskId);var h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width",y(v)),h.setAttributeNS(null,"height",y(b)),h.setAttributeNS(null,"fill",f),h.setAttributeNS(null,"mask","url(#"+m.maskId+")"),this.defs.appendChild(p),this._ensureTransformGroup().appendChild(h),this.paintInlineImageXObject(g,p)},paintFormXObjectBegin:function(g,m){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),Array.isArray(m)&&m.length===4){var v=m[2]-m[0],b=m[3]-m[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",m[0]),f.setAttributeNS(null,"y",m[1]),f.setAttributeNS(null,"width",y(v)),f.setAttributeNS(null,"height",y(b)),this.current.element=f,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(g){var m=this.svgFactory.create(g.width,g.height),v=this.svgFactory.createElement("svg:defs");m.appendChild(v),this.defs=v;var b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",u(g.transform)),m.appendChild(b),this.svg=b,m},_ensureClipGroup:function(){if(!this.current.clipGroup){var g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(g),this.current.clipGroup=g}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},S}()}e.SVGGraphics=s},function(n,e,r){"use strict";var a="1.10.100",i="ea29ec83",s=r(0),t=r(118),o=r(69),l=r(73),d=r(72),c=r(15),y=r(74);if(s.isNodeJS()){var u=r(124).PDFNodeStream;o.setPDFNetworkStreamClass(u)}else if(typeof Response<"u"&&"body"in Response.prototype&&typeof ReadableStream<"u"){var S=r(125).PDFFetchStream;o.setPDFNetworkStreamClass(S)}else{var V=r(126).PDFNetworkStream;o.setPDFNetworkStreamClass(V)}e.PDFJS=t.PDFJS,e.build=o.build,e.version=o.version,e.getDocument=o.getDocument,e.LoopbackPort=o.LoopbackPort,e.PDFDataRangeTransport=o.PDFDataRangeTransport,e.PDFWorker=o.PDFWorker,e.renderTextLayer=l.renderTextLayer,e.AnnotationLayer=d.AnnotationLayer,e.CustomStyle=c.CustomStyle,e.createPromiseCapability=s.createPromiseCapability,e.PasswordResponses=s.PasswordResponses,e.InvalidPDFException=s.InvalidPDFException,e.MissingPDFException=s.MissingPDFException,e.SVGGraphics=y.SVGGraphics,e.NativeImageDecoding=s.NativeImageDecoding,e.UnexpectedResponseException=s.UnexpectedResponseException,e.OPS=s.OPS,e.UNSUPPORTED_FEATURES=s.UNSUPPORTED_FEATURES,e.isValidUrl=c.isValidUrl,e.createValidAbsoluteUrl=s.createValidAbsoluteUrl,e.createObjectURL=s.createObjectURL,e.removeNullCharacters=s.removeNullCharacters,e.shadow=s.shadow,e.createBlob=s.createBlob,e.RenderingCancelledException=c.RenderingCancelledException,e.getFilenameFromUrl=c.getFilenameFromUrl,e.addLinkAttributes=c.addLinkAttributes,e.StatTimer=s.StatTimer},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};if(typeof PDFJS>"u"||!PDFJS.compatibilityChecked){var i=r(20),s=typeof navigator<"u"&&navigator.userAgent||"",t=/Android/.test(s),o=/Android\s[0-2][^\d]/.test(s),l=/Android\s[0-4][^\d]/.test(s),d=s.indexOf("Chrom")>=0,c=/Chrome\/(39|40)\./.test(s),y=s.indexOf("CriOS")>=0,u=s.indexOf("Trident")>=0,S=/\b(iPad|iPhone|iPod)(?=;)/.test(s),V=s.indexOf("Opera")>=0,U=/Safari\//.test(s)&&!/(Chrome\/|Android\s)/.test(s),z=(typeof window>"u"?"undefined":a(window))==="object"&&(typeof document>"u"?"undefined":a(document))==="object";typeof PDFJS>"u"&&(i.PDFJS={}),PDFJS.compatibilityChecked=!0,function(){if(typeof Uint8ClampedArray>"u"&&(i.Uint8ClampedArray=r(77)),typeof Uint8Array<"u"){typeof Uint8Array.prototype.subarray>"u"&&(Uint8Array.prototype.subarray=function(p,h){return new Uint8Array(this.slice(p,h))},Float32Array.prototype.subarray=function(p,h){return new Float32Array(this.slice(p,h))}),typeof Float64Array>"u"&&(i.Float64Array=Float32Array);return}function k(f,p){return new b(this.slice(f,p))}function T(f,p){arguments.length<2&&(p=0);for(var h=0,_=f.length;h<_;++h,++p)this[p]=f[h]&255}function R(f,p){this.buffer=f,this.byteLength=f.length,this.length=p,v(this.length)}R.prototype=Object.create(null);var g=0;function m(f){return{get:function(){var h=this.buffer,_=f<<2;return(h[_]|h[_+1]<<8|h[_+2]<<16|h[_+3]<<24)>>>0},set:function(h){var _=this.buffer,I=f<<2;_[I]=h&255,_[I+1]=h>>8&255,_[I+2]=h>>16&255,_[I+3]=h>>>24&255}}}function v(f){for(;g<f;)Object.defineProperty(R.prototype,g,m(g)),g++}function b(f){var p,h,_;if(typeof f=="number")for(p=[],h=0;h<f;++h)p[h]=0;else if("slice"in f)p=f.slice(0);else for(p=[],h=0,_=f.length;h<_;++h)p[h]=f[h];return p.subarray=k,p.buffer=p,p.byteLength=p.length,p.set=T,(typeof f>"u"?"undefined":a(f))==="object"&&f.buffer&&(p.buffer=f.buffer),p}i.Uint8Array=b,i.Int8Array=b,i.Int32Array=b,i.Uint16Array=b,i.Float32Array=b,i.Float64Array=b,i.Uint32Array=function(){if(arguments.length===3){if(arguments[1]!==0)throw new Error("offset !== 0 is not supported");return new R(arguments[0],arguments[2])}return b.apply(this,arguments)}}(),function(){if(!(!z||!window.CanvasPixelArray)){var k=window.CanvasPixelArray.prototype;"buffer"in k||(Object.defineProperty(k,"buffer",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(k,"byteLength",{get:function(){return this.length},enumerable:!1,configurable:!0}))}}(),function(){i.URL||(i.URL=i.webkitURL)}(),function(){if(typeof Object.defineProperty<"u"){var k=!0;try{z&&Object.defineProperty(new Image,"id",{value:"test"});var T=function(){};T.prototype={get id(){}},Object.defineProperty(new T,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch{k=!1}if(k)return}Object.defineProperty=function(g,m,v){delete g[m],"get"in v&&g.__defineGetter__(m,v.get),"set"in v&&g.__defineSetter__(m,v.set),"value"in v&&(g.__defineSetter__(m,function(f){return this.__defineGetter__(m,function(){return f}),f}),g[m]=v.value)}}(),function(){if(!(typeof XMLHttpRequest>"u")){var k=XMLHttpRequest.prototype,T=new XMLHttpRequest;if("overrideMimeType"in T||Object.defineProperty(k,"overrideMimeType",{value:function(g){}}),!("responseType"in T)){if(Object.defineProperty(k,"responseType",{get:function(){return this._responseType||"text"},set:function(g){(g==="text"||g==="arraybuffer")&&(this._responseType=g,g==="arraybuffer"&&typeof this.overrideMimeType=="function"&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),typeof VBArray<"u"){Object.defineProperty(k,"response",{get:function(){return this.responseType==="arraybuffer"?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}});return}Object.defineProperty(k,"response",{get:function(){if(this.responseType!=="arraybuffer")return this.responseText;var g=this.responseText,m,v=g.length,b=new Uint8Array(v);for(m=0;m<v;++m)b[m]=g.charCodeAt(m)&255;return b.buffer}})}}}(),function(){if(!("btoa"in i)){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.btoa=function(T){var R="",g,m;for(g=0,m=T.length;g<m;g+=3){var v=T.charCodeAt(g)&255,b=T.charCodeAt(g+1)&255,f=T.charCodeAt(g+2)&255,p=v>>2,h=(v&3)<<4|b>>4,_=g+1<m?(b&15)<<2|f>>6:64,I=g+2<m?f&63:64;R+=k.charAt(p)+k.charAt(h)+k.charAt(_)+k.charAt(I)}return R}}}(),function(){if(!("atob"in i)){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.atob=function(T){if(T=T.replace(/=+$/,""),T.length%4===1)throw new Error("bad atob input");for(var R=0,g,m,v=0,b="";m=T.charAt(v++);~m&&(g=R%4?g*64+m:m,R++%4)?b+=String.fromCharCode(255&g>>(-2*R&6)):0)m=k.indexOf(m);return b}}}(),function(){typeof Function.prototype.bind<"u"||(Function.prototype.bind=function(T){var R=this,g=Array.prototype.slice.call(arguments,1),m=function(){var b=g.concat(Array.prototype.slice.call(arguments));return R.apply(T,b)};return m})}(),function(){if(z){var k=document.createElement("div");"dataset"in k||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var R={},g=0,m=this.attributes.length;g<m;g++){var v=this.attributes[g];if(v.name.substring(0,5)==="data-"){var b=v.name.substring(5).replace(/\-([a-z])/g,function(f,p){return p.toUpperCase()});R[b]=v.value}}return Object.defineProperty(this,"_dataset",{value:R,writable:!1,enumerable:!1}),R},enumerable:!0})}}(),function(){function k(g,m,v,b){var f=g.className||"",p=f.split(/\s+/g);p[0]===""&&p.shift();var h=p.indexOf(m);return h<0&&v&&p.push(m),h>=0&&b&&p.splice(h,1),g.className=p.join(" "),h>=0}if(z){var T=document.createElement("div");if(!("classList"in T)){var R={add:function(m){k(this.element,m,!0,!1)},contains:function(m){return k(this.element,m,!1,!1)},remove:function(m){k(this.element,m,!1,!0)},toggle:function(m){k(this.element,m,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var m=Object.create(R,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:m,writable:!1,enumerable:!1}),m},enumerable:!0})}}}(),function(){if(!(typeof importScripts>"u"||"console"in i)){var k={},T={log:function(){var g=Array.prototype.slice.call(arguments);i.postMessage({targetName:"main",action:"console_log",data:g})},error:function(){var g=Array.prototype.slice.call(arguments);i.postMessage({targetName:"main",action:"console_error",data:g})},time:function(g){k[g]=Date.now()},timeEnd:function(g){var m=k[g];if(!m)throw new Error("Unknown timer name "+g);this.log("Timer:",g,Date.now()-m)}};i.console=T}}(),function(){if(z){if(!("console"in window)){window.console={log:function(){},error:function(){},warn:function(){}};return}if(!("bind"in console.log)){console.log=function(k){return function(T){return k(T)}}(console.log),console.error=function(k){return function(T){return k(T)}}(console.error),console.warn=function(k){return function(T){return k(T)}}(console.warn);return}}}(),function(){function k(R){T(R.target)&&R.stopPropagation()}function T(R){return R.disabled||R.parentNode&&T(R.parentNode)}V&&document.addEventListener("click",k,!0)}(),function(){(u||y)&&(PDFJS.disableCreateObjectURL=!0)}(),function(){typeof navigator>"u"||"language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")}(),function(){(U||o||c||S)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function(){z&&(!history.pushState||o)&&(PDFJS.disableHistory=!0)}(),function(){if(z)if(window.CanvasPixelArray)typeof window.CanvasPixelArray.prototype.set!="function"&&(window.CanvasPixelArray.prototype.set=function(m){for(var v=0,b=this.length;v<b;v++)this[v]=m[v]});else{var k=!1,T;if(d?(T=s.match(/Chrom(e|ium)\/([0-9]+)\./),k=T&&parseInt(T[2])<21):t?k=l:U&&(T=s.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),k=T&&parseInt(T[1])<6),k){var R=window.CanvasRenderingContext2D.prototype,g=R.createImageData;R.createImageData=function(m,v){var b=g.call(this,m,v);return b.data.set=function(f){for(var p=0,h=this.length;p<h;p++)this[p]=f[p]},b},R=null}}}(),function(){function k(){window.requestAnimationFrame=function(T){return window.setTimeout(T,20)},window.cancelAnimationFrame=function(T){window.clearTimeout(T)}}if(z){if(S){k();return}"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,!window.requestAnimationFrame&&k())}}(),function(){(S||t)&&(PDFJS.maxCanvasPixels=5242880)}(),function(){z&&u&&window.parent!==window&&(PDFJS.disableFullscreen=!0)}(),function(){z&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var T=document.getElementsByTagName("script");return T[T.length-1]},enumerable:!0,configurable:!0}))}(),function(){if(z){var k=document.createElement("input");try{k.type="number"}catch{var T=k.constructor.prototype,R=Object.getOwnPropertyDescriptor(T,"type");Object.defineProperty(T,"type",{get:function(){return R.get.call(this)},set:function(v){R.set.call(this,v==="number"?"text":v)},enumerable:!0,configurable:!0})}}}(),function(){if(z&&document.attachEvent){var k=document.constructor.prototype,T=Object.getOwnPropertyDescriptor(k,"readyState");Object.defineProperty(k,"readyState",{get:function(){var g=T.get.call(this);return g==="interactive"?"loading":g},set:function(g){T.set.call(this,g)},enumerable:!0,configurable:!0})}}(),function(){z&&(typeof Element.prototype.remove<"u"||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}))}(),function(){Number.isNaN||(Number.isNaN=r(89))}(),function(){Number.isInteger||(Number.isInteger=r(91))}(),function(){i.Promise||(i.Promise=r(94))}(),function(){i.WeakMap||(i.WeakMap=r(104))}(),function(){var k=!1;try{if(typeof URL=="function"&&a(URL.prototype)==="object"&&"origin"in URL.prototype){var T=new URL("b","http://a");T.pathname="c%20d",k=T.href==="http://a/c%20d"}}catch{}if(k)return;var R=Object.create(null);R.ftp=21,R.file=0,R.gopher=70,R.http=80,R.https=443,R.ws=80,R.wss=443;var g=Object.create(null);g["%2e"]=".",g[".%2e"]="..",g["%2e."]="..",g["%2e%2e"]="..";function m(L){return R[L]!==void 0}function v(){q.call(this),this._isInvalid=!0}function b(L){return L===""&&v.call(this),L.toLowerCase()}function f(L){var P=L.charCodeAt(0);return P>32&&P<127&&[34,35,60,62,63,96].indexOf(P)===-1?L:encodeURIComponent(L)}function p(L){var P=L.charCodeAt(0);return P>32&&P<127&&[34,35,60,62,96].indexOf(P)===-1?L:encodeURIComponent(L)}var h,_=/[a-zA-Z]/,I=/[a-zA-Z0-9\+\-\.]/;function W(L,P,O){function E(pe){x.push(pe)}var w=P||"scheme start",A=0,M="",j=!1,C=!1,x=[];e:for(;(L[A-1]!==h||A===0)&&!this._isInvalid;){var F=L[A];switch(w){case"scheme start":if(F&&_.test(F))M+=F.toLowerCase(),w="scheme";else if(P){E("Invalid scheme.");break e}else{M="",w="no scheme";continue}break;case"scheme":if(F&&I.test(F))M+=F.toLowerCase();else if(F===":"){if(this._scheme=M,M="",P)break e;m(this._scheme)&&(this._isRelative=!0),this._scheme==="file"?w="relative":this._isRelative&&O&&O._scheme===this._scheme?w="relative or authority":this._isRelative?w="authority first slash":w="scheme data"}else if(P){if(F===h)break e;E("Code point not allowed in scheme: "+F);break e}else{M="",A=0,w="no scheme";continue}break;case"scheme data":F==="?"?(this._query="?",w="query"):F==="#"?(this._fragment="#",w="fragment"):F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._schemeData+=f(F));break;case"no scheme":if(!O||!m(O._scheme))E("Missing scheme."),v.call(this);else{w="relative";continue}break;case"relative or authority":if(F==="/"&&L[A+1]==="/")w="authority ignore slashes";else{E("Expected /, got: "+F),w="relative";continue}break;case"relative":if(this._isRelative=!0,this._scheme!=="file"&&(this._scheme=O._scheme),F===h){this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query=O._query,this._username=O._username,this._password=O._password;break e}else if(F==="/"||F==="\\")F==="\\"&&E("\\ is an invalid code point."),w="relative slash";else if(F==="?")this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query="?",this._username=O._username,this._password=O._password,w="query";else if(F==="#")this._host=O._host,this._port=O._port,this._path=O._path.slice(),this._query=O._query,this._fragment="#",this._username=O._username,this._password=O._password,w="fragment";else{var $=L[A+1],G=L[A+2];(this._scheme!=="file"||!_.test(F)||$!==":"&&$!=="|"||G!==h&&G!=="/"&&G!=="\\"&&G!=="?"&&G!=="#")&&(this._host=O._host,this._port=O._port,this._username=O._username,this._password=O._password,this._path=O._path.slice(),this._path.pop()),w="relative path";continue}break;case"relative slash":if(F==="/"||F==="\\")F==="\\"&&E("\\ is an invalid code point."),this._scheme==="file"?w="file host":w="authority ignore slashes";else{this._scheme!=="file"&&(this._host=O._host,this._port=O._port,this._username=O._username,this._password=O._password),w="relative path";continue}break;case"authority first slash":if(F==="/")w="authority second slash";else{E("Expected '/', got: "+F),w="authority ignore slashes";continue}break;case"authority second slash":if(w="authority ignore slashes",F!=="/"){E("Expected '/', got: "+F);continue}break;case"authority ignore slashes":if(F!=="/"&&F!=="\\"){w="authority";continue}else E("Expected authority, got: "+F);break;case"authority":if(F==="@"){j&&(E("@ already seen."),M+="%40"),j=!0;for(var Z=0;Z<M.length;Z++){var J=M[Z];if(J==="	"||J===`
`||J==="\r"){E("Invalid whitespace in authority.");continue}if(J===":"&&this._password===null){this._password="";continue}var Y=f(J);this._password!==null?this._password+=Y:this._username+=Y}M=""}else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){A-=M.length,M="",w="host";continue}else M+=F;break;case"file host":if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){M.length===2&&_.test(M[0])&&(M[1]===":"||M[1]==="|")?w="relative path":(M.length===0||(this._host=b.call(this,M),M=""),w="relative path start");continue}else F==="	"||F===`
`||F==="\r"?E("Invalid whitespace in file host."):M+=F;break;case"host":case"hostname":if(F===":"&&!C){if(this._host=b.call(this,M),M="",w="port",P==="hostname")break e}else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"){if(this._host=b.call(this,M),M="",w="relative path start",P)break e;continue}else F!=="	"&&F!==`
`&&F!=="\r"?(F==="["?C=!0:F==="]"&&(C=!1),M+=F):E("Invalid code point in host/hostname: "+F);break;case"port":if(/[0-9]/.test(F))M+=F;else if(F===h||F==="/"||F==="\\"||F==="?"||F==="#"||P){if(M!==""){var ee=parseInt(M,10);ee!==R[this._scheme]&&(this._port=ee+""),M=""}if(P)break e;w="relative path start";continue}else F==="	"||F===`
`||F==="\r"?E("Invalid code point in port: "+F):v.call(this);break;case"relative path start":if(F==="\\"&&E("'\\' not allowed in path."),w="relative path",F!=="/"&&F!=="\\")continue;break;case"relative path":if(F===h||F==="/"||F==="\\"||!P&&(F==="?"||F==="#")){F==="\\"&&E("\\ not allowed in relative path.");var ae;(ae=g[M.toLowerCase()])&&(M=ae),M===".."?(this._path.pop(),F!=="/"&&F!=="\\"&&this._path.push("")):M==="."&&F!=="/"&&F!=="\\"?this._path.push(""):M!=="."&&(this._scheme==="file"&&this._path.length===0&&M.length===2&&_.test(M[0])&&M[1]==="|"&&(M=M[0]+":"),this._path.push(M)),M="",F==="?"?(this._query="?",w="query"):F==="#"&&(this._fragment="#",w="fragment")}else F!=="	"&&F!==`
`&&F!=="\r"&&(M+=f(F));break;case"query":!P&&F==="#"?(this._fragment="#",w="fragment"):F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._query+=p(F));break;case"fragment":F!==h&&F!=="	"&&F!==`
`&&F!=="\r"&&(this._fragment+=F);break}A++}}function q(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function B(L,P){P!==void 0&&!(P instanceof B)&&(P=new B(String(P))),this._url=L,q.call(this);var O=L.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");W.call(this,O,null,P)}B.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var L="";return(this._username!==""||this._password!==null)&&(L=this._username+(this._password!==null?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+L+this.host:"")+this.pathname+this._query+this._fragment},set href(L){q.call(this),W.call(this,L)},get protocol(){return this._scheme+":"},set protocol(L){this._isInvalid||W.call(this,L+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(L){this._isInvalid||!this._isRelative||W.call(this,L,"host")},get hostname(){return this._host},set hostname(L){this._isInvalid||!this._isRelative||W.call(this,L,"hostname")},get port(){return this._port},set port(L){this._isInvalid||!this._isRelative||W.call(this,L,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(L){this._isInvalid||!this._isRelative||(this._path=[],W.call(this,L,"relative path start"))},get search(){return this._isInvalid||!this._query||this._query==="?"?"":this._query},set search(L){this._isInvalid||!this._isRelative||(this._query="?",L[0]==="?"&&(L=L.slice(1)),W.call(this,L,"query"))},get hash(){return this._isInvalid||!this._fragment||this._fragment==="#"?"":this._fragment},set hash(L){this._isInvalid||(this._fragment="#",L[0]==="#"&&(L=L.slice(1)),W.call(this,L,"fragment"))},get origin(){var L;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new B(this._schemeData).origin||"null"}catch{}return"null"}return L=this.host,L?this._scheme+"://"+L:""}};var N=i.URL;N&&(B.createObjectURL=function(L){return N.createObjectURL.apply(N,arguments)},B.revokeObjectURL=function(L){N.revokeObjectURL(L)}),i.URL=B}()}},function(n,e,r){"use strict";r(78),n.exports=r(4).Uint8ClampedArray},function(n,e,r){"use strict";r(79)("Uint8",1,function(a){return function(s,t,o){return a(this,s,t,o)}},!0)},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye};if(r(8)){var i=r(21),s=r(1),t=r(9),o=r(5),l=r(46),d=r(80),c=r(11),y=r(24),u=r(27),S=r(6),V=r(23),U=r(17),z=r(12),D=r(47),k=r(29),T=r(33),R=r(10),g=r(30),m=r(2),v=r(18),b=r(53),f=r(54),p=r(56),h=r(48).f,_=r(57),I=r(16),W=r(3),q=r(39),B=r(50),N=r(40),L=r(58),P=r(19),O=r(41),E=r(60),w=r(52),A=r(88),M=r(13),j=r(61),C=M.f,x=j.f,F=s.RangeError,$=s.TypeError,G=s.Uint8Array,Z="ArrayBuffer",J="Shared"+Z,Y="BYTES_PER_ELEMENT",ee="prototype",ae=Array[ee],pe=d.ArrayBuffer,se=d.DataView,ue=q(0),le=q(2),ie=q(3),de=q(4),fe=q(5),he=q(6),Se=B(!0),Ce=B(!1),Ae=L.values,Ee=L.keys,ke=L.entries,Fe=ae.lastIndexOf,Pe=ae.reduce,Ie=ae.reduceRight,$e=ae.join,Ke=ae.sort,Ze=ae.slice,ot=ae.toString,et=ae.toLocaleString,ct=W("iterator"),ht=W("toStringTag"),Ge=I("typed_constructor"),Be=I("def_constructor"),wt=l.CONSTR,At=l.TYPED,Q=l.VIEW,ve="Wrong length!",K=q(1,function(Ye,De){return ge(N(Ye,Ye[Be]),De)}),re=t(function(){return new G(new Uint16Array([1]).buffer)[0]===1}),me=!!G&&!!G[ee].set&&t(function(){new G(1).set({})}),xe=function(De,He){var tt=U(De);if(tt<0||tt%He)throw F("Wrong offset!");return tt},_e=function(De){if(m(De)&&At in De)return De;throw $(De+" is not a typed array!")},ge=function(De,He){if(!(m(De)&&Ge in De))throw $("It is not a typed array constructor!");return new De(He)},ye=function(De,He){return Ne(N(De,De[Be]),He)},Ne=function(De,He){for(var tt=0,xt=He.length,lr=ge(De,xt);xt>tt;)lr[tt]=He[tt++];return lr},Le=function(De,He,tt){C(De,He,{get:function(){return this._d[tt]}})},Je=function(De){var He=v(De),tt=arguments.length,xt=tt>1?arguments[1]:void 0,lr=xt!==void 0,Rr=_(He),rt,jr,ja,_a,fa,Jt;if(Rr!=null&&!b(Rr)){for(Jt=Rr.call(He),ja=[],rt=0;!(fa=Jt.next()).done;rt++)ja.push(fa.value);He=ja}for(lr&&tt>2&&(xt=c(xt,arguments[2],2)),rt=0,jr=z(He.length),_a=ge(this,jr);jr>rt;rt++)_a[rt]=lr?xt(He[rt],rt):He[rt];return _a},Xe=function(){for(var De=0,He=arguments.length,tt=ge(this,He);He>De;)tt[De]=arguments[De++];return tt},ut=!!G&&t(function(){et.call(new G(1))}),mt=function(){return et.apply(ut?Ze.call(_e(this)):_e(this),arguments)},Tt={copyWithin:function(De,He){return A.call(_e(this),De,He,arguments.length>2?arguments[2]:void 0)},every:function(De){return de(_e(this),De,arguments.length>1?arguments[1]:void 0)},fill:function(De){return w.apply(_e(this),arguments)},filter:function(De){return ye(this,le(_e(this),De,arguments.length>1?arguments[1]:void 0))},find:function(De){return fe(_e(this),De,arguments.length>1?arguments[1]:void 0)},findIndex:function(De){return he(_e(this),De,arguments.length>1?arguments[1]:void 0)},forEach:function(De){ue(_e(this),De,arguments.length>1?arguments[1]:void 0)},indexOf:function(De){return Ce(_e(this),De,arguments.length>1?arguments[1]:void 0)},includes:function(De){return Se(_e(this),De,arguments.length>1?arguments[1]:void 0)},join:function(De){return $e.apply(_e(this),arguments)},lastIndexOf:function(De){return Fe.apply(_e(this),arguments)},map:function(De){return K(_e(this),De,arguments.length>1?arguments[1]:void 0)},reduce:function(De){return Pe.apply(_e(this),arguments)},reduceRight:function(De){return Ie.apply(_e(this),arguments)},reverse:function(){for(var De=this,He=_e(De).length,tt=Math.floor(He/2),xt=0,lr;xt<tt;)lr=De[xt],De[xt++]=De[--He],De[He]=lr;return De},some:function(De){return ie(_e(this),De,arguments.length>1?arguments[1]:void 0)},sort:function(De){return Ke.call(_e(this),De)},subarray:function(De,He){var tt=_e(this),xt=tt.length,lr=k(De,xt);return new(N(tt,tt[Be]))(tt.buffer,tt.byteOffset+lr*tt.BYTES_PER_ELEMENT,z((He===void 0?xt:k(He,xt))-lr))}},Kt=function(De,He){return ye(this,Ze.call(_e(this),De,He))},yr=function(De){_e(this);var He=xe(arguments[1],1),tt=this.length,xt=v(De),lr=z(xt.length),Rr=0;if(lr+He>tt)throw F(ve);for(;Rr<lr;)this[He+Rr]=xt[Rr++]},dr={entries:function(){return ke.call(_e(this))},keys:function(){return Ee.call(_e(this))},values:function(){return Ae.call(_e(this))}},hr=function(De,He){return m(De)&&De[At]&&(typeof He>"u"?"undefined":a(He))!="symbol"&&He in De&&String(+He)==String(He)},Mr=function(De,He){return hr(De,He=T(He,!0))?u(2,De[He]):x(De,He)},ra=function(De,He,tt){return hr(De,He=T(He,!0))&&m(tt)&&R(tt,"value")&&!R(tt,"get")&&!R(tt,"set")&&!tt.configurable&&(!R(tt,"writable")||tt.writable)&&(!R(tt,"enumerable")||tt.enumerable)?(De[He]=tt.value,De):C(De,He,tt)};wt||(j.f=Mr,M.f=ra),o(o.S+o.F*!wt,"Object",{getOwnPropertyDescriptor:Mr,defineProperty:ra}),t(function(){ot.call({})})&&(ot=et=function(){return $e.call(this)});var Kr=V({},Tt);V(Kr,dr),S(Kr,ct,dr.values),V(Kr,{slice:Kt,set:yr,constructor:function(){},toString:ot,toLocaleString:mt}),Le(Kr,"buffer","b"),Le(Kr,"byteOffset","o"),Le(Kr,"byteLength","l"),Le(Kr,"length","e"),C(Kr,ht,{get:function(){return this[At]}}),n.exports=function(Ye,De,He,tt){tt=!!tt;var xt=Ye+(tt?"Clamped":"")+"Array",lr="get"+Ye,Rr="set"+Ye,rt=s[xt],jr=rt||{},ja=rt&&p(rt),_a=!rt||!l.ABV,fa={},Jt=rt&&rt[ee],_t=function(Oe,ze){var We=Oe._d;return We.v[lr](ze*De+We.o,re)},st=function(Oe,ze,We){var at=Oe._d;tt&&(We=(We=Math.round(We))<0?0:We>255?255:We&255),at.v[Rr](ze*De+at.o,We,re)},H=function(Oe,ze){C(Oe,ze,{get:function(){return _t(this,ze)},set:function(at){return st(this,ze,at)},enumerable:!0})};_a?(rt=He(function(Re,Oe,ze,We){y(Re,rt,xt,"_d");var at=0,dt=0,Dt,bt,qt,Pr;if(!m(Oe))qt=D(Oe),bt=qt*De,Dt=new pe(bt);else if(Oe instanceof pe||(Pr=g(Oe))==Z||Pr==J){Dt=Oe,dt=xe(ze,De);var Ut=Oe.byteLength;if(We===void 0){if(Ut%De||(bt=Ut-dt,bt<0))throw F(ve)}else if(bt=z(We)*De,bt+dt>Ut)throw F(ve);qt=bt/De}else return At in Oe?Ne(rt,Oe):Je.call(rt,Oe);for(S(Re,"_d",{b:Dt,o:dt,l:bt,e:qt,v:new se(Dt)});at<qt;)H(Re,at++)}),Jt=rt[ee]=f(Kr),S(Jt,"constructor",rt)):(!t(function(){rt(1)})||!t(function(){new rt(-1)})||!O(function(Re){new rt,new rt(null),new rt(1.5),new rt(Re)},!0))&&(rt=He(function(Re,Oe,ze,We){y(Re,rt,xt);var at;return m(Oe)?Oe instanceof pe||(at=g(Oe))==Z||at==J?We!==void 0?new jr(Oe,xe(ze,De),We):ze!==void 0?new jr(Oe,xe(ze,De)):new jr(Oe):At in Oe?Ne(rt,Oe):Je.call(rt,Oe):new jr(D(Oe))}),ue(ja!==Function.prototype?h(jr).concat(h(ja)):h(jr),function(Re){Re in rt||S(rt,Re,jr[Re])}),rt[ee]=Jt,i||(Jt.constructor=rt));var ne=Jt[ct],oe=!!ne&&(ne.name=="values"||ne.name==null),we=dr.values;S(rt,Ge,!0),S(Jt,At,xt),S(Jt,Q,!0),S(Jt,Be,rt),(tt?new rt(1)[ht]!=xt:!(ht in Jt))&&C(Jt,ht,{get:function(){return xt}}),fa[xt]=rt,o(o.G+o.W+o.F*(rt!=jr),fa),o(o.S,xt,{BYTES_PER_ELEMENT:De}),o(o.S+o.F*t(function(){jr.of.call(rt,1)}),xt,{from:Je,of:Xe}),Y in Jt||S(Jt,Y,De),o(o.P,xt,Tt),E(xt),o(o.P+o.F*me,xt,{set:yr}),o(o.P+o.F*!oe,xt,dr),!i&&Jt.toString!=ot&&(Jt.toString=ot),o(o.P+o.F*t(function(){new rt(1).slice()}),xt,{slice:Kt}),o(o.P+o.F*(t(function(){return[1,2].toLocaleString()!=new rt([1,2]).toLocaleString()})||!t(function(){Jt.toLocaleString.call([1,2])})),xt,{toLocaleString:mt}),P[xt]=oe?ne:we,!i&&!oe&&S(Jt,ct,we)}}else n.exports=function(){}},function(n,e,r){"use strict";var a=r(1),i=r(8),s=r(21),t=r(46),o=r(6),l=r(23),d=r(9),c=r(24),y=r(17),u=r(12),S=r(47),V=r(48).f,U=r(13).f,z=r(52),D=r(26),k="ArrayBuffer",T="DataView",R="prototype",g="Wrong length!",m="Wrong index!",v=a[k],b=a[T],f=a.Math,p=a.RangeError,h=a.Infinity,_=v,I=f.abs,W=f.pow,q=f.floor,B=f.log,N=f.LN2,L="buffer",P="byteLength",O="byteOffset",E=i?"_b":L,w=i?"_l":P,A=i?"_o":O;function M(de,fe,he){var Se=new Array(he),Ce=he*8-fe-1,Ae=(1<<Ce)-1,Ee=Ae>>1,ke=fe===23?W(2,-24)-W(2,-77):0,Fe=0,Pe=de<0||de===0&&1/de<0?1:0,Ie,$e,Ke;for(de=I(de),de!=de||de===h?($e=de!=de?1:0,Ie=Ae):(Ie=q(B(de)/N),de*(Ke=W(2,-Ie))<1&&(Ie--,Ke*=2),Ie+Ee>=1?de+=ke/Ke:de+=ke*W(2,1-Ee),de*Ke>=2&&(Ie++,Ke/=2),Ie+Ee>=Ae?($e=0,Ie=Ae):Ie+Ee>=1?($e=(de*Ke-1)*W(2,fe),Ie=Ie+Ee):($e=de*W(2,Ee-1)*W(2,fe),Ie=0));fe>=8;Se[Fe++]=$e&255,$e/=256,fe-=8);for(Ie=Ie<<fe|$e,Ce+=fe;Ce>0;Se[Fe++]=Ie&255,Ie/=256,Ce-=8);return Se[--Fe]|=Pe*128,Se}function j(de,fe,he){var Se=he*8-fe-1,Ce=(1<<Se)-1,Ae=Ce>>1,Ee=Se-7,ke=he-1,Fe=de[ke--],Pe=Fe&127,Ie;for(Fe>>=7;Ee>0;Pe=Pe*256+de[ke],ke--,Ee-=8);for(Ie=Pe&(1<<-Ee)-1,Pe>>=-Ee,Ee+=fe;Ee>0;Ie=Ie*256+de[ke],ke--,Ee-=8);if(Pe===0)Pe=1-Ae;else{if(Pe===Ce)return Ie?NaN:Fe?-h:h;Ie=Ie+W(2,fe),Pe=Pe-Ae}return(Fe?-1:1)*Ie*W(2,Pe-fe)}function C(de){return de[3]<<24|de[2]<<16|de[1]<<8|de[0]}function x(de){return[de&255]}function F(de){return[de&255,de>>8&255]}function $(de){return[de&255,de>>8&255,de>>16&255,de>>24&255]}function G(de){return M(de,52,8)}function Z(de){return M(de,23,4)}function J(de,fe,he){U(de[R],fe,{get:function(){return this[he]}})}function Y(de,fe,he,Se){var Ce=+he,Ae=S(Ce);if(Ae+fe>de[w])throw p(m);var Ee=de[E]._b,ke=Ae+de[A],Fe=Ee.slice(ke,ke+fe);return Se?Fe:Fe.reverse()}function ee(de,fe,he,Se,Ce,Ae){var Ee=+he,ke=S(Ee);if(ke+fe>de[w])throw p(m);for(var Fe=de[E]._b,Pe=ke+de[A],Ie=Se(+Ce),$e=0;$e<fe;$e++)Fe[Pe+$e]=Ie[Ae?$e:fe-$e-1]}if(!t.ABV)v=function(fe){c(this,v,k);var he=S(fe);this._b=z.call(new Array(he),0),this[w]=he},b=function(fe,he,Se){c(this,b,T),c(fe,v,T);var Ce=fe[w],Ae=y(he);if(Ae<0||Ae>Ce)throw p("Wrong offset!");if(Se=Se===void 0?Ce-Ae:u(Se),Ae+Se>Ce)throw p(g);this[E]=fe,this[A]=Ae,this[w]=Se},i&&(J(v,P,"_l"),J(b,L,"_b"),J(b,P,"_l"),J(b,O,"_o")),l(b[R],{getInt8:function(fe){return Y(this,1,fe)[0]<<24>>24},getUint8:function(fe){return Y(this,1,fe)[0]},getInt16:function(fe){var he=Y(this,2,fe,arguments[1]);return(he[1]<<8|he[0])<<16>>16},getUint16:function(fe){var he=Y(this,2,fe,arguments[1]);return he[1]<<8|he[0]},getInt32:function(fe){return C(Y(this,4,fe,arguments[1]))},getUint32:function(fe){return C(Y(this,4,fe,arguments[1]))>>>0},getFloat32:function(fe){return j(Y(this,4,fe,arguments[1]),23,4)},getFloat64:function(fe){return j(Y(this,8,fe,arguments[1]),52,8)},setInt8:function(fe,he){ee(this,1,fe,x,he)},setUint8:function(fe,he){ee(this,1,fe,x,he)},setInt16:function(fe,he){ee(this,2,fe,F,he,arguments[2])},setUint16:function(fe,he){ee(this,2,fe,F,he,arguments[2])},setInt32:function(fe,he){ee(this,4,fe,$,he,arguments[2])},setUint32:function(fe,he){ee(this,4,fe,$,he,arguments[2])},setFloat32:function(fe,he){ee(this,4,fe,Z,he,arguments[2])},setFloat64:function(fe,he){ee(this,8,fe,G,he,arguments[2])}});else{if(!d(function(){v(1)})||!d(function(){new v(-1)})||d(function(){return new v,new v(1.5),new v(NaN),v.name!=k})){v=function(fe){return c(this,v),new _(S(fe))};for(var ae=v[R]=_[R],pe=V(_),se=0,ue;pe.length>se;)(ue=pe[se++])in v||o(v,ue,_[ue]);s||(ae.constructor=v)}var le=new b(new v(2)),ie=b[R].setInt8;le.setInt8(0,2147483648),le.setInt8(1,2147483649),(le.getInt8(0)||!le.getInt8(1))&&l(b[R],{setInt8:function(fe,he){ie.call(this,fe,he<<24>>24)},setUint8:function(fe,he){ie.call(this,fe,he<<24>>24)}},!0)}D(v,k),D(b,T),o(b[R],t.VIEW,!0),e[k]=v,e[T]=b},function(n,e,r){"use strict";var a=r(13),i=r(7),s=r(38);n.exports=r(8)?Object.defineProperties:function(o,l){i(o);for(var d=s(l),c=d.length,y=0,u;c>y;)a.f(o,u=d[y++],l[u]);return o}},function(n,e,r){"use strict";var a=r(83);n.exports=function(i,s){return new(a(i))(s)}},function(n,e,r){"use strict";var a=r(2),i=r(84),s=r(3)("species");n.exports=function(t){var o;return i(t)&&(o=t.constructor,typeof o=="function"&&(o===Array||i(o.prototype))&&(o=void 0),a(o)&&(o=o[s],o===null&&(o=void 0))),o===void 0?Array:o}},function(n,e,r){"use strict";var a=r(25);n.exports=Array.isArray||function(s){return a(s)=="Array"}},function(n,e,r){"use strict";var a=r(3)("unscopables"),i=Array.prototype;i[a]==null&&r(6)(i,a,{}),n.exports=function(s){i[a][s]=!0}},function(n,e,r){"use strict";n.exports=function(a,i){return{value:i,done:!!a}}},function(n,e,r){"use strict";var a=r(54),i=r(27),s=r(26),t={};r(6)(t,r(3)("iterator"),function(){return this}),n.exports=function(o,l,d){o.prototype=a(t,{next:i(1,d)}),s(o,l+" Iterator")}},function(n,e,r){"use strict";var a=r(18),i=r(29),s=r(12);n.exports=[].copyWithin||function(o,l){var d=a(this),c=s(d.length),y=i(o,c),u=i(l,c),S=arguments.length>2?arguments[2]:void 0,V=Math.min((S===void 0?c:i(S,c))-u,c-y),U=1;for(u<y&&y<u+V&&(U=-1,u+=V-1,y+=V-1);V-- >0;)u in d?d[y]=d[u]:delete d[y],y+=U,u+=U;return d}},function(n,e,r){"use strict";r(90),n.exports=r(4).Number.isNaN},function(n,e,r){"use strict";var a=r(5);a(a.S,"Number",{isNaN:function(s){return s!=s}})},function(n,e,r){"use strict";r(92),n.exports=r(4).Number.isInteger},function(n,e,r){"use strict";var a=r(5);a(a.S,"Number",{isInteger:r(93)})},function(n,e,r){"use strict";var a=r(2),i=Math.floor;n.exports=function(t){return!a(t)&&isFinite(t)&&i(t)===t}},function(n,e,r){"use strict";r(63),r(95),r(64),r(97),r(102),r(103),n.exports=r(4).Promise},function(n,e,r){"use strict";var a=r(96)(!0);r(59)(String,"String",function(i){this._t=String(i),this._i=0},function(){var i=this._t,s=this._i,t;return s>=i.length?{value:void 0,done:!0}:(t=a(i,s),this._i+=t.length,{value:t,done:!1})})},function(n,e,r){"use strict";var a=r(17),i=r(35);n.exports=function(s){return function(t,o){var l=String(i(t)),d=a(o),c=l.length,y,u;return d<0||d>=c?s?"":void 0:(y=l.charCodeAt(d),y<55296||y>56319||d+1===c||(u=l.charCodeAt(d+1))<56320||u>57343?s?l.charAt(d):y:s?l.slice(d,d+2):(y-55296<<10)+(u-56320)+65536)}}},function(n,e,r){"use strict";var a=r(21),i=r(1),s=r(11),t=r(30),o=r(5),l=r(2),d=r(22),c=r(24),y=r(31),u=r(40),S=r(65).set,V=r(100)(),U=r(42),z=r(66),D=r(101),k=r(67),T="Promise",R=i.TypeError,g=i.process,m=g&&g.versions,v=m&&m.v8||"",b=i[T],f=t(g)=="process",p=function(){},h,_,I,W,q=_=U.f,B=!!function(){try{var M=b.resolve(1),j=(M.constructor={})[r(3)("species")]=function(C){C(p,p)};return(f||typeof PromiseRejectionEvent=="function")&&M.then(p)instanceof j&&v.indexOf("6.6")!==0&&D.indexOf("Chrome/66")===-1}catch{}}(),N=function(j){var C;return l(j)&&typeof(C=j.then)=="function"?C:!1},L=function(j,C){if(!j._n){j._n=!0;var x=j._c;V(function(){for(var F=j._v,$=j._s==1,G=0,Z=function(Y){var ee=$?Y.ok:Y.fail,ae=Y.resolve,pe=Y.reject,se=Y.domain,ue,le,ie;try{ee?($||(j._h==2&&E(j),j._h=1),ee===!0?ue=F:(se&&se.enter(),ue=ee(F),se&&(se.exit(),ie=!0)),ue===Y.promise?pe(R("Promise-chain cycle")):(le=N(ue))?le.call(ue,ae,pe):ae(ue)):pe(F)}catch(de){se&&!ie&&se.exit(),pe(de)}};x.length>G;)Z(x[G++]);j._c=[],j._n=!1,C&&!j._h&&P(j)})}},P=function(j){S.call(i,function(){var C=j._v,x=O(j),F,$,G;if(x&&(F=z(function(){f?g.emit("unhandledRejection",C,j):($=i.onunhandledrejection)?$({promise:j,reason:C}):(G=i.console)&&G.error&&G.error("Unhandled promise rejection",C)}),j._h=f||O(j)?2:1),j._a=void 0,x&&F.e)throw F.v})},O=function(j){return j._h!==1&&(j._a||j._c).length===0},E=function(j){S.call(i,function(){var C;f?g.emit("rejectionHandled",j):(C=i.onrejectionhandled)&&C({promise:j,reason:j._v})})},w=function(j){var C=this;C._d||(C._d=!0,C=C._w||C,C._v=j,C._s=2,C._a||(C._a=C._c.slice()),L(C,!0))},A=function M(j){var C=this,x;if(!C._d){C._d=!0,C=C._w||C;try{if(C===j)throw R("Promise can't be resolved itself");(x=N(j))?V(function(){var F={_w:C,_d:!1};try{x.call(j,s(M,F,1),s(w,F,1))}catch($){w.call(F,$)}}):(C._v=j,C._s=1,L(C,!1))}catch(F){w.call({_w:C,_d:!1},F)}}};B||(b=function(j){c(this,b,T,"_h"),d(j),h.call(this);try{j(s(A,this,1),s(w,this,1))}catch(C){w.call(this,C)}},h=function(j){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},h.prototype=r(23)(b.prototype,{then:function(j,C){var x=q(u(this,b));return x.ok=typeof j=="function"?j:!0,x.fail=typeof C=="function"&&C,x.domain=f?g.domain:void 0,this._c.push(x),this._a&&this._a.push(x),this._s&&L(this,!1),x.promise},catch:function(j){return this.then(void 0,j)}}),I=function(){var j=new h;this.promise=j,this.resolve=s(A,j,1),this.reject=s(w,j,1)},U.f=q=function(j){return j===b||j===W?new I(j):_(j)}),o(o.G+o.W+o.F*!B,{Promise:b}),r(26)(b,T),r(60)(T),W=r(4)[T],o(o.S+o.F*!B,T,{reject:function(j){var C=q(this),x=C.reject;return x(j),C.promise}}),o(o.S+o.F*(a||!B),T,{resolve:function(j){return k(a&&this===W?b:this,j)}}),o(o.S+o.F*!(B&&r(41)(function(M){b.all(M).catch(p)})),T,{all:function(j){var C=this,x=q(C),F=x.resolve,$=x.reject,G=z(function(){var Z=[],J=0,Y=1;y(j,!1,function(ee){var ae=J++,pe=!1;Z.push(void 0),Y++,C.resolve(ee).then(function(se){pe||(pe=!0,Z[ae]=se,--Y||F(Z))},$)}),--Y||F(Z)});return G.e&&$(G.v),x.promise},race:function(j){var C=this,x=q(C),F=x.reject,$=z(function(){y(j,!1,function(G){C.resolve(G).then(x.resolve,F)})});return $.e&&F($.v),x.promise}})},function(n,e,r){"use strict";var a=r(7);n.exports=function(i,s,t,o){try{return o?s(a(t)[0],t[1]):s(t)}catch(d){var l=i.return;throw l!==void 0&&a(l.call(i)),d}}},function(n,e,r){"use strict";n.exports=function(a,i,s){var t=s===void 0;switch(i.length){case 0:return t?a():a.call(s);case 1:return t?a(i[0]):a.call(s,i[0]);case 2:return t?a(i[0],i[1]):a.call(s,i[0],i[1]);case 3:return t?a(i[0],i[1],i[2]):a.call(s,i[0],i[1],i[2]);case 4:return t?a(i[0],i[1],i[2],i[3]):a.call(s,i[0],i[1],i[2],i[3])}return a.apply(s,i)}},function(n,e,r){"use strict";var a=r(1),i=r(65).set,s=a.MutationObserver||a.WebKitMutationObserver,t=a.process,o=a.Promise,l=r(25)(t)=="process";n.exports=function(){var d,c,y,u=function(){var D,k;for(l&&(D=t.domain)&&D.exit();d;){k=d.fn,d=d.next;try{k()}catch(T){throw d?y():c=void 0,T}}c=void 0,D&&D.enter()};if(l)y=function(){t.nextTick(u)};else if(s&&!(a.navigator&&a.navigator.standalone)){var S=!0,V=document.createTextNode("");new s(u).observe(V,{characterData:!0}),y=function(){V.data=S=!S}}else if(o&&o.resolve){var U=o.resolve(void 0);y=function(){U.then(u)}}else y=function(){i.call(a,u)};return function(z){var D={fn:z,next:void 0};c&&(c.next=D),d||(d=D,y()),c=D}}},function(n,e,r){"use strict";var a=r(1),i=a.navigator;n.exports=i&&i.userAgent||""},function(n,e,r){"use strict";var a=r(5),i=r(4),s=r(1),t=r(40),o=r(67);a(a.P+a.R,"Promise",{finally:function(d){var c=t(this,i.Promise||s.Promise),y=typeof d=="function";return this.then(y?function(u){return o(c,d()).then(function(){return u})}:d,y?function(u){return o(c,d()).then(function(){throw u})}:d)}})},function(n,e,r){"use strict";var a=r(5),i=r(42),s=r(66);a(a.S,"Promise",{try:function(o){var l=i.f(this),d=s(o);return(d.e?l.reject:l.resolve)(d.v),l.promise}})},function(n,e,r){"use strict";r(63),r(64),r(105),r(112),r(114),n.exports=r(4).WeakMap},function(n,e,r){"use strict";var a=r(39)(0),i=r(14),s=r(43),t=r(106),o=r(108),l=r(2),d=r(9),c=r(68),y="WeakMap",u=s.getWeak,S=Object.isExtensible,V=o.ufstore,U={},z,D=function(g){return function(){return g(this,arguments.length>0?arguments[0]:void 0)}},k={get:function(g){if(l(g)){var m=u(g);return m===!0?V(c(this,y)).get(g):m?m[this._i]:void 0}},set:function(g,m){return o.def(c(this,y),g,m)}},T=n.exports=r(109)(y,D,k,o,!0,!0);d(function(){return new T().set((Object.freeze||Object)(U),7).get(U)!=7})&&(z=o.getConstructor(D,y),t(z.prototype,k),s.NEED=!0,a(["delete","has","get","set"],function(R){var g=T.prototype,m=g[R];i(g,R,function(v,b){if(l(v)&&!S(v)){this._f||(this._f=new z);var f=this._f[R](v,b);return R=="set"?this:f}return m.call(this,v,b)})}))},function(n,e,r){"use strict";var a=r(38),i=r(107),s=r(62),t=r(18),o=r(34),l=Object.assign;n.exports=!l||r(9)(function(){var d={},c={},y=Symbol(),u="abcdefghijklmnopqrst";return d[y]=7,u.split("").forEach(function(S){c[S]=S}),l({},d)[y]!=7||Object.keys(l({},c)).join("")!=u})?function(c,y){for(var u=t(c),S=arguments.length,V=1,U=i.f,z=s.f;S>V;)for(var D=o(arguments[V++]),k=U?a(D).concat(U(D)):a(D),T=k.length,R=0,g;T>R;)z.call(D,g=k[R++])&&(u[g]=D[g]);return u}:l},function(n,e,r){"use strict";e.f=Object.getOwnPropertySymbols},function(n,e,r){"use strict";var a=r(23),i=r(43).getWeak,s=r(7),t=r(2),o=r(24),l=r(31),d=r(39),c=r(10),y=r(68),u=d(5),S=d(6),V=0,U=function(T){return T._l||(T._l=new z)},z=function(){this.a=[]},D=function(T,R){return u(T.a,function(g){return g[0]===R})};z.prototype={get:function(T){var R=D(this,T);if(R)return R[1]},has:function(T){return!!D(this,T)},set:function(T,R){var g=D(this,T);g?g[1]=R:this.a.push([T,R])},delete:function(T){var R=S(this.a,function(g){return g[0]===T});return~R&&this.a.splice(R,1),!!~R}},n.exports={getConstructor:function(T,R,g,m){var v=T(function(b,f){o(b,v,R,"_i"),b._t=R,b._i=V++,b._l=void 0,f!=null&&l(f,g,b[m],b)});return a(v.prototype,{delete:function(f){if(!t(f))return!1;var p=i(f);return p===!0?U(y(this,R)).delete(f):p&&c(p,this._i)&&delete p[this._i]},has:function(f){if(!t(f))return!1;var p=i(f);return p===!0?U(y(this,R)).has(f):p&&c(p,this._i)}}),v},def:function(T,R,g){var m=i(s(R),!0);return m===!0?U(T).set(R,g):m[T._i]=g,T},ufstore:U}},function(n,e,r){"use strict";var a=r(1),i=r(5),s=r(14),t=r(23),o=r(43),l=r(31),d=r(24),c=r(2),y=r(9),u=r(41),S=r(26),V=r(110);n.exports=function(U,z,D,k,T,R){var g=a[U],m=g,v=T?"set":"add",b=m&&m.prototype,f={},p=function(N){var L=b[N];s(b,N,N=="delete"?function(P){return R&&!c(P)?!1:L.call(this,P===0?0:P)}:N=="has"?function(O){return R&&!c(O)?!1:L.call(this,O===0?0:O)}:N=="get"?function(O){return R&&!c(O)?void 0:L.call(this,O===0?0:O)}:N=="add"?function(O){return L.call(this,O===0?0:O),this}:function(O,E){return L.call(this,O===0?0:O,E),this})};if(typeof m!="function"||!(R||b.forEach&&!y(function(){new m().entries().next()})))m=k.getConstructor(z,U,T,v),t(m.prototype,D),o.NEED=!0;else{var h=new m,_=h[v](R?{}:-0,1)!=h,I=y(function(){h.has(1)}),W=u(function(B){new m(B)}),q=!R&&y(function(){for(var B=new m,N=5;N--;)B[v](N,N);return!B.has(-0)});W||(m=z(function(B,N){d(B,m,U);var L=V(new g,B,m);return N!=null&&l(N,T,L[v],L),L}),m.prototype=b,b.constructor=m),(I||q)&&(p("delete"),p("has"),T&&p("get")),(q||_)&&p(v),R&&b.clear&&delete b.clear}return S(m,U),f[U]=m,i(i.G+i.W+i.F*(m!=g),f),R||k.setStrong(m,U,T),m}},function(n,e,r){"use strict";var a=r(2),i=r(111).set;n.exports=function(s,t,o){var l=t.constructor,d;return l!==o&&typeof l=="function"&&(d=l.prototype)!==o.prototype&&a(d)&&i&&i(s,d),s}},function(n,e,r){"use strict";var a=r(2),i=r(7),s=function(o,l){if(i(o),!a(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,o,l){try{l=r(11)(Function.call,r(61).f(Object.prototype,"__proto__").set,2),l(t,[]),o=!(t instanceof Array)}catch{o=!0}return function(c,y){return s(c,y),o?c.__proto__=y:l(c,y),c}}({},!1):void 0),check:s}},function(n,e,r){"use strict";r(113)("WeakMap")},function(n,e,r){"use strict";var a=r(5);n.exports=function(i){a(a.S,i,{of:function(){for(var t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return new this(o)}})}},function(n,e,r){"use strict";r(115)("WeakMap")},function(n,e,r){"use strict";var a=r(5),i=r(22),s=r(11),t=r(31);n.exports=function(o){a(a.S,o,{from:function(d){var c=arguments[1],y,u,S,V;return i(this),y=c!==void 0,y&&i(c),d==null?new this:(u=[],y?(S=0,V=s(c,arguments[2],2),t(d,!1,function(U){u.push(V(U,S++))})):t(d,!1,u.push,u),new this(u))}})}},function(n,e,r){"use strict";var a=!1;if(typeof ReadableStream<"u")try{new ReadableStream({start:function(s){s.close()}}),a=!0}catch{}a?e.ReadableStream=ReadableStream:e.ReadableStream=r(117).ReadableStream},function(n,e,r){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};(function(i,s){for(var t in s)i[t]=s[t]})(e,function(i){var s={};function t(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return i[o].call(l.exports,l,l.exports,t),l.l=!0,l.exports}return t.m=i,t.c=s,t.i=function(o){return o},t.d=function(o,l,d){t.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:d})},t.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(l,"a",l),l},t.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},t.p="",t(t.s=7)}([function(i,s,t){"use strict";var o=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return typeof u>"u"?"undefined":a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u>"u"?"undefined":a(u)},l=t(1),d=l.assert;function c(u){return typeof u=="string"||(typeof u>"u"?"undefined":o(u))==="symbol"}s.typeIsObject=function(u){return(typeof u>"u"?"undefined":o(u))==="object"&&u!==null||typeof u=="function"},s.createDataProperty=function(u,S,V){d(s.typeIsObject(u)),Object.defineProperty(u,S,{value:V,writable:!0,enumerable:!0,configurable:!0})},s.createArrayFromList=function(u){return u.slice()},s.ArrayBufferCopy=function(u,S,V,U,z){new Uint8Array(u).set(new Uint8Array(V,U,z),S)},s.CreateIterResultObject=function(u,S){d(typeof S=="boolean");var V={};return Object.defineProperty(V,"value",{value:u,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(V,"done",{value:S,enumerable:!0,writable:!0,configurable:!0}),V},s.IsFiniteNonNegativeNumber=function(u){return!(Number.isNaN(u)||u===1/0||u<0)};function y(u,S,V){if(typeof u!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(u,S,V)}s.InvokeOrNoop=function(u,S,V){d(u!==void 0),d(c(S)),d(Array.isArray(V));var U=u[S];if(U!==void 0)return y(U,u,V)},s.PromiseInvokeOrNoop=function(u,S,V){d(u!==void 0),d(c(S)),d(Array.isArray(V));try{return Promise.resolve(s.InvokeOrNoop(u,S,V))}catch(U){return Promise.reject(U)}},s.PromiseInvokeOrPerformFallback=function(u,S,V,U,z){d(u!==void 0),d(c(S)),d(Array.isArray(V)),d(Array.isArray(z));var D=void 0;try{D=u[S]}catch(k){return Promise.reject(k)}if(D===void 0)return U.apply(null,z);try{return Promise.resolve(y(D,u,V))}catch(k){return Promise.reject(k)}},s.TransferArrayBuffer=function(u){return u.slice()},s.ValidateAndNormalizeHighWaterMark=function(u){if(u=Number(u),Number.isNaN(u)||u<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return u},s.ValidateAndNormalizeQueuingStrategy=function(u,S){if(u!==void 0&&typeof u!="function")throw new TypeError("size property of a queuing strategy must be a function");return S=s.ValidateAndNormalizeHighWaterMark(S),{size:u,highWaterMark:S}}},function(i,s,t){"use strict";function o(c){c&&c.constructor===l&&setTimeout(function(){throw c},0)}function l(c){this.name="AssertionError",this.message=c||"",this.stack=new Error().stack}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l;function d(c,y){if(!c)throw new l(y)}i.exports={rethrowAssertionErrorRejection:o,AssertionError:l,assert:d}},function(i,s,t){"use strict";var o=function(){function Q(ve,K){for(var re=0;re<K.length;re++){var me=K[re];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(ve,me.key,me)}}return function(ve,K,re){return K&&Q(ve.prototype,K),re&&Q(ve,re),ve}}();function l(Q,ve){if(!(Q instanceof ve))throw new TypeError("Cannot call a class as a function")}var d=t(0),c=d.InvokeOrNoop,y=d.PromiseInvokeOrNoop,u=d.ValidateAndNormalizeQueuingStrategy,S=d.typeIsObject,V=t(1),U=V.assert,z=V.rethrowAssertionErrorRejection,D=t(3),k=D.DequeueValue,T=D.EnqueueValueWithSize,R=D.PeekQueueValue,g=D.ResetQueue,m=function(){function Q(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=K.size,me=K.highWaterMark,xe=me===void 0?1:me;l(this,Q),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var _e=ve.type;if(_e!==void 0)throw new RangeError("Invalid type is specified");this._writableStreamController=new ae(this,ve,re,xe),this._writableStreamController.__startSteps()}return o(Q,[{key:"abort",value:function(K){return b(this)===!1?Promise.reject(Ee("abort")):f(this)===!0?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):p(this,K)}},{key:"getWriter",value:function(){if(b(this)===!1)throw Ee("getWriter");return v(this)}},{key:"locked",get:function(){if(b(this)===!1)throw Ee("locked");return f(this)}}]),Q}();i.exports={AcquireWritableStreamDefaultWriter:v,IsWritableStream:b,IsWritableStreamLocked:f,WritableStream:m,WritableStreamAbort:p,WritableStreamDefaultControllerError:Ae,WritableStreamDefaultWriterCloseWithErrorPropagation:$,WritableStreamDefaultWriterRelease:Y,WritableStreamDefaultWriterWrite:ee,WritableStreamCloseQueuedOrInFlight:P};function v(Q){return new j(Q)}function b(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_writableStreamController"))}function f(Q){return U(b(Q)===!0,"IsWritableStreamLocked should only be used on known writable streams"),Q._writer!==void 0}function p(Q,ve){var K=Q._state;if(K==="closed")return Promise.resolve(void 0);if(K==="errored")return Promise.reject(Q._storedError);var re=new TypeError("Requested to abort");if(Q._pendingAbortRequest!==void 0)return Promise.reject(re);U(K==="writable"||K==="erroring","state must be writable or erroring");var me=!1;K==="erroring"&&(me=!0,ve=void 0);var xe=new Promise(function(_e,ge){Q._pendingAbortRequest={_resolve:_e,_reject:ge,_reason:ve,_wasAlreadyErroring:me}});return me===!1&&I(Q,re),xe}function h(Q){U(f(Q)===!0),U(Q._state==="writable");var ve=new Promise(function(K,re){var me={_resolve:K,_reject:re};Q._writeRequests.push(me)});return ve}function _(Q,ve){var K=Q._state;if(K==="writable"){I(Q,ve);return}U(K==="erroring"),W(Q)}function I(Q,ve){U(Q._storedError===void 0,"stream._storedError === undefined"),U(Q._state==="writable","state must be writable");var K=Q._writableStreamController;U(K!==void 0,"controller must not be undefined"),Q._state="erroring",Q._storedError=ve;var re=Q._writer;re!==void 0&&Z(re,ve),O(Q)===!1&&K._started===!0&&W(Q)}function W(Q){U(Q._state==="erroring","stream._state === erroring"),U(O(Q)===!1,"WritableStreamHasOperationMarkedInFlight(stream) === false"),Q._state="errored",Q._writableStreamController.__errorSteps();for(var ve=Q._storedError,K=0;K<Q._writeRequests.length;K++){var re=Q._writeRequests[K];re._reject(ve)}if(Q._writeRequests=[],Q._pendingAbortRequest===void 0){A(Q);return}var me=Q._pendingAbortRequest;if(Q._pendingAbortRequest=void 0,me._wasAlreadyErroring===!0){me._reject(ve),A(Q);return}var xe=Q._writableStreamController.__abortSteps(me._reason);xe.then(function(){me._resolve(),A(Q)},function(_e){me._reject(_e),A(Q)})}function q(Q){U(Q._inFlightWriteRequest!==void 0),Q._inFlightWriteRequest._resolve(void 0),Q._inFlightWriteRequest=void 0}function B(Q,ve){U(Q._inFlightWriteRequest!==void 0),Q._inFlightWriteRequest._reject(ve),Q._inFlightWriteRequest=void 0,U(Q._state==="writable"||Q._state==="erroring"),_(Q,ve)}function N(Q){U(Q._inFlightCloseRequest!==void 0),Q._inFlightCloseRequest._resolve(void 0),Q._inFlightCloseRequest=void 0;var ve=Q._state;U(ve==="writable"||ve==="erroring"),ve==="erroring"&&(Q._storedError=void 0,Q._pendingAbortRequest!==void 0&&(Q._pendingAbortRequest._resolve(),Q._pendingAbortRequest=void 0)),Q._state="closed";var K=Q._writer;K!==void 0&&ot(K),U(Q._pendingAbortRequest===void 0,"stream._pendingAbortRequest === undefined"),U(Q._storedError===void 0,"stream._storedError === undefined")}function L(Q,ve){U(Q._inFlightCloseRequest!==void 0),Q._inFlightCloseRequest._reject(ve),Q._inFlightCloseRequest=void 0,U(Q._state==="writable"||Q._state==="erroring"),Q._pendingAbortRequest!==void 0&&(Q._pendingAbortRequest._reject(ve),Q._pendingAbortRequest=void 0),_(Q,ve)}function P(Q){return!(Q._closeRequest===void 0&&Q._inFlightCloseRequest===void 0)}function O(Q){return!(Q._inFlightWriteRequest===void 0&&Q._inFlightCloseRequest===void 0)}function E(Q){U(Q._inFlightCloseRequest===void 0),U(Q._closeRequest!==void 0),Q._inFlightCloseRequest=Q._closeRequest,Q._closeRequest=void 0}function w(Q){U(Q._inFlightWriteRequest===void 0,"there must be no pending write request"),U(Q._writeRequests.length!==0,"writeRequests must not be empty"),Q._inFlightWriteRequest=Q._writeRequests.shift()}function A(Q){U(Q._state==="errored",'_stream_.[[state]] is `"errored"`'),Q._closeRequest!==void 0&&(U(Q._inFlightCloseRequest===void 0),Q._closeRequest._reject(Q._storedError),Q._closeRequest=void 0);var ve=Q._writer;ve!==void 0&&(Ke(ve,Q._storedError),ve._closedPromise.catch(function(){}))}function M(Q,ve){U(Q._state==="writable"),U(P(Q)===!1);var K=Q._writer;K!==void 0&&ve!==Q._backpressure&&(ve===!0?Be(K):(U(ve===!1),At(K))),Q._backpressure=ve}var j=function(){function Q(ve){if(l(this,Q),b(ve)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(f(ve)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=ve,ve._writer=this;var K=ve._state;if(K==="writable")P(ve)===!1&&ve._backpressure===!0?et(this):ht(this),Pe(this);else if(K==="erroring")ct(this,ve._storedError),this._readyPromise.catch(function(){}),Pe(this);else if(K==="closed")ht(this),$e(this);else{U(K==="errored","state must be errored");var re=ve._storedError;ct(this,re),this._readyPromise.catch(function(){}),Ie(this,re),this._closedPromise.catch(function(){})}}return o(Q,[{key:"abort",value:function(K){return C(this)===!1?Promise.reject(ke("abort")):this._ownerWritableStream===void 0?Promise.reject(Fe("abort")):x(this,K)}},{key:"close",value:function(){if(C(this)===!1)return Promise.reject(ke("close"));var K=this._ownerWritableStream;return K===void 0?Promise.reject(Fe("close")):P(K)===!0?Promise.reject(new TypeError("cannot close an already-closing stream")):F(this)}},{key:"releaseLock",value:function(){if(C(this)===!1)throw ke("releaseLock");var K=this._ownerWritableStream;K!==void 0&&(U(K._writer!==void 0),Y(this))}},{key:"write",value:function(K){return C(this)===!1?Promise.reject(ke("write")):this._ownerWritableStream===void 0?Promise.reject(Fe("write to")):ee(this,K)}},{key:"closed",get:function(){return C(this)===!1?Promise.reject(ke("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(C(this)===!1)throw ke("desiredSize");if(this._ownerWritableStream===void 0)throw Fe("desiredSize");return J(this)}},{key:"ready",get:function(){return C(this)===!1?Promise.reject(ke("ready")):this._readyPromise}}]),Q}();function C(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_ownerWritableStream"))}function x(Q,ve){var K=Q._ownerWritableStream;return U(K!==void 0),p(K,ve)}function F(Q){var ve=Q._ownerWritableStream;U(ve!==void 0);var K=ve._state;if(K==="closed"||K==="errored")return Promise.reject(new TypeError("The stream (in "+K+" state) is not in the writable state and cannot be closed"));U(K==="writable"||K==="erroring"),U(P(ve)===!1);var re=new Promise(function(me,xe){var _e={_resolve:me,_reject:xe};ve._closeRequest=_e});return ve._backpressure===!0&&K==="writable"&&At(Q),pe(ve._writableStreamController),re}function $(Q){var ve=Q._ownerWritableStream;U(ve!==void 0);var K=ve._state;return P(ve)===!0||K==="closed"?Promise.resolve():K==="errored"?Promise.reject(ve._storedError):(U(K==="writable"||K==="erroring"),F(Q))}function G(Q,ve){Q._closedPromiseState==="pending"?Ke(Q,ve):Ze(Q,ve),Q._closedPromise.catch(function(){})}function Z(Q,ve){Q._readyPromiseState==="pending"?Ge(Q,ve):wt(Q,ve),Q._readyPromise.catch(function(){})}function J(Q){var ve=Q._ownerWritableStream,K=ve._state;return K==="errored"||K==="erroring"?null:K==="closed"?0:ue(ve._writableStreamController)}function Y(Q){var ve=Q._ownerWritableStream;U(ve!==void 0),U(ve._writer===Q);var K=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Z(Q,K),G(Q,K),ve._writer=void 0,Q._ownerWritableStream=void 0}function ee(Q,ve){var K=Q._ownerWritableStream;U(K!==void 0);var re=K._writableStreamController,me=se(re,ve);if(K!==Q._ownerWritableStream)return Promise.reject(Fe("write to"));var xe=K._state;if(xe==="errored")return Promise.reject(K._storedError);if(P(K)===!0||xe==="closed")return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if(xe==="erroring")return Promise.reject(K._storedError);U(xe==="writable");var _e=h(K);return le(re,ve,me),_e}var ae=function(){function Q(ve,K,re,me){if(l(this,Q),b(ve)===!1)throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(ve._writableStreamController!==void 0)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=ve,this._underlyingSink=K,this._queue=void 0,this._queueTotalSize=void 0,g(this),this._started=!1;var xe=u(re,me);this._strategySize=xe.size,this._strategyHWM=xe.highWaterMark;var _e=Ce(this);M(ve,_e)}return o(Q,[{key:"error",value:function(K){if(ie(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var re=this._controlledWritableStream._state;re==="writable"&&Ae(this,K)}},{key:"__abortSteps",value:function(K){return y(this._underlyingSink,"abort",[K])}},{key:"__errorSteps",value:function(){g(this)}},{key:"__startSteps",value:function(){var K=this,re=c(this._underlyingSink,"start",[this]),me=this._controlledWritableStream;Promise.resolve(re).then(function(){U(me._state==="writable"||me._state==="erroring"),K._started=!0,de(K)},function(xe){U(me._state==="writable"||me._state==="erroring"),K._started=!0,_(me,xe)}).catch(z)}}]),Q}();function pe(Q){T(Q,"close",0),de(Q)}function se(Q,ve){var K=Q._strategySize;if(K===void 0)return 1;try{return K(ve)}catch(re){return fe(Q,re),1}}function ue(Q){return Q._strategyHWM-Q._queueTotalSize}function le(Q,ve,K){var re={chunk:ve};try{T(Q,re,K)}catch(_e){fe(Q,_e);return}var me=Q._controlledWritableStream;if(P(me)===!1&&me._state==="writable"){var xe=Ce(Q);M(me,xe)}de(Q)}function ie(Q){return!(!S(Q)||!Object.prototype.hasOwnProperty.call(Q,"_underlyingSink"))}function de(Q){var ve=Q._controlledWritableStream;if(Q._started!==!1&&ve._inFlightWriteRequest===void 0){var K=ve._state;if(!(K==="closed"||K==="errored")){if(K==="erroring"){W(ve);return}if(Q._queue.length!==0){var re=R(Q);re==="close"?he(Q):Se(Q,re.chunk)}}}}function fe(Q,ve){Q._controlledWritableStream._state==="writable"&&Ae(Q,ve)}function he(Q){var ve=Q._controlledWritableStream;E(ve),k(Q),U(Q._queue.length===0,"queue must be empty once the final write record is dequeued");var K=y(Q._underlyingSink,"close",[]);K.then(function(){N(ve)},function(re){L(ve,re)}).catch(z)}function Se(Q,ve){var K=Q._controlledWritableStream;w(K);var re=y(Q._underlyingSink,"write",[ve,Q]);re.then(function(){q(K);var me=K._state;if(U(me==="writable"||me==="erroring"),k(Q),P(K)===!1&&me==="writable"){var xe=Ce(Q);M(K,xe)}de(Q)},function(me){B(K,me)}).catch(z)}function Ce(Q){var ve=ue(Q);return ve<=0}function Ae(Q,ve){var K=Q._controlledWritableStream;U(K._state==="writable"),I(K,ve)}function Ee(Q){return new TypeError("WritableStream.prototype."+Q+" can only be used on a WritableStream")}function ke(Q){return new TypeError("WritableStreamDefaultWriter.prototype."+Q+" can only be used on a WritableStreamDefaultWriter")}function Fe(Q){return new TypeError("Cannot "+Q+" a stream using a released writer")}function Pe(Q){Q._closedPromise=new Promise(function(ve,K){Q._closedPromise_resolve=ve,Q._closedPromise_reject=K,Q._closedPromiseState="pending"})}function Ie(Q,ve){Q._closedPromise=Promise.reject(ve),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="rejected"}function $e(Q){Q._closedPromise=Promise.resolve(void 0),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="resolved"}function Ke(Q,ve){U(Q._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),U(Q._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),U(Q._closedPromiseState==="pending","writer._closedPromiseState is pending"),Q._closedPromise_reject(ve),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="rejected"}function Ze(Q,ve){U(Q._closedPromise_resolve===void 0,"writer._closedPromise_resolve === undefined"),U(Q._closedPromise_reject===void 0,"writer._closedPromise_reject === undefined"),U(Q._closedPromiseState!=="pending","writer._closedPromiseState is not pending"),Q._closedPromise=Promise.reject(ve),Q._closedPromiseState="rejected"}function ot(Q){U(Q._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),U(Q._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),U(Q._closedPromiseState==="pending","writer._closedPromiseState is pending"),Q._closedPromise_resolve(void 0),Q._closedPromise_resolve=void 0,Q._closedPromise_reject=void 0,Q._closedPromiseState="resolved"}function et(Q){Q._readyPromise=new Promise(function(ve,K){Q._readyPromise_resolve=ve,Q._readyPromise_reject=K}),Q._readyPromiseState="pending"}function ct(Q,ve){Q._readyPromise=Promise.reject(ve),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="rejected"}function ht(Q){Q._readyPromise=Promise.resolve(void 0),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="fulfilled"}function Ge(Q,ve){U(Q._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),U(Q._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),Q._readyPromise_reject(ve),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="rejected"}function Be(Q){U(Q._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),U(Q._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),Q._readyPromise=new Promise(function(ve,K){Q._readyPromise_resolve=ve,Q._readyPromise_reject=K}),Q._readyPromiseState="pending"}function wt(Q,ve){U(Q._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),U(Q._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),Q._readyPromise=Promise.reject(ve),Q._readyPromiseState="rejected"}function At(Q){U(Q._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),U(Q._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),Q._readyPromise_resolve(void 0),Q._readyPromise_resolve=void 0,Q._readyPromise_reject=void 0,Q._readyPromiseState="fulfilled"}},function(i,s,t){"use strict";var o=t(0),l=o.IsFiniteNonNegativeNumber,d=t(1),c=d.assert;s.DequeueValue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),c(y._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var u=y._queue.shift();return y._queueTotalSize-=u.size,y._queueTotalSize<0&&(y._queueTotalSize=0),u.value},s.EnqueueValueWithSize=function(y,u,S){if(c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),S=Number(S),!l(S))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");y._queue.push({value:u,size:S}),y._queueTotalSize+=S},s.PeekQueueValue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),c(y._queue.length>0,"Spec-level failure: should never peek at an empty queue.");var u=y._queue[0];return u.value},s.ResetQueue=function(y){c("_queue"in y&&"_queueTotalSize"in y,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),y._queue=[],y._queueTotalSize=0}},function(i,s,t){"use strict";var o=function(){function H(ne,oe){for(var we=0;we<oe.length;we++){var Re=oe[we];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(ne,Re.key,Re)}}return function(ne,oe,we){return oe&&H(ne.prototype,oe),we&&H(ne,we),ne}}();function l(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}var d=t(0),c=d.ArrayBufferCopy,y=d.CreateIterResultObject,u=d.IsFiniteNonNegativeNumber,S=d.InvokeOrNoop,V=d.PromiseInvokeOrNoop,U=d.TransferArrayBuffer,z=d.ValidateAndNormalizeQueuingStrategy,D=d.ValidateAndNormalizeHighWaterMark,k=t(0),T=k.createArrayFromList,R=k.createDataProperty,g=k.typeIsObject,m=t(1),v=m.assert,b=m.rethrowAssertionErrorRejection,f=t(3),p=f.DequeueValue,h=f.EnqueueValueWithSize,_=f.ResetQueue,I=t(2),W=I.AcquireWritableStreamDefaultWriter,q=I.IsWritableStream,B=I.IsWritableStreamLocked,N=I.WritableStreamAbort,L=I.WritableStreamDefaultWriterCloseWithErrorPropagation,P=I.WritableStreamDefaultWriterRelease,O=I.WritableStreamDefaultWriterWrite,E=I.WritableStreamCloseQueuedOrInFlight,w=function(){function H(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=oe.size,Re=oe.highWaterMark;l(this,H),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var Oe=ne.type,ze=String(Oe);if(ze==="bytes")Re===void 0&&(Re=0),this._readableStreamController=new At(this,ne,Re);else if(Oe===void 0)Re===void 0&&(Re=1),this._readableStreamController=new $e(this,ne,we,Re);else throw new RangeError("Invalid type is specified")}return o(H,[{key:"cancel",value:function(oe){return j(this)===!1?Promise.reject(De("cancel")):x(this)===!0?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):ee(this,oe)}},{key:"getReader",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=oe.mode;if(j(this)===!1)throw De("getReader");if(we===void 0)return M(this);if(we=String(we),we==="byob")return A(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(oe,we){var Re=oe.writable,Oe=oe.readable,ze=this.pipeTo(Re,we);return st(ze),Oe}},{key:"pipeTo",value:function(oe){var we=this,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oe=Re.preventClose,ze=Re.preventAbort,We=Re.preventCancel;if(j(this)===!1)return Promise.reject(De("pipeTo"));if(q(oe)===!1)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(Oe=!!Oe,ze=!!ze,We=!!We,x(this)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(B(oe)===!0)return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var at=M(this),dt=W(oe),Dt=!1,bt=Promise.resolve();return new Promise(function(qt,Pr){function Ut(){return bt=Promise.resolve(),Dt===!0?Promise.resolve():dt._readyPromise.then(function(){return Ie(at).then(function(It){var Tr=It.value,ua=It.done;ua!==!0&&(bt=O(dt,Tr).catch(function(){}))})}).then(Ut)}if(Yt(we,at._closedPromise,function(It){ze===!1?ir(function(){return N(oe,It)},!0,It):ma(!0,It)}),Yt(oe,dt._closedPromise,function(It){We===!1?ir(function(){return ee(we,It)},!0,It):ma(!0,It)}),aa(we,at._closedPromise,function(){Oe===!1?ir(function(){return L(dt)}):ma()}),E(oe)===!0||oe._state==="closed"){var Vt=new TypeError("the destination writable stream closed before all data could be piped to it");We===!1?ir(function(){return ee(we,Vt)},!0,Vt):ma(!0,Vt)}Ut().catch(function(It){bt=Promise.resolve(),b(It)});function Br(){var It=bt;return bt.then(function(){return It!==bt?Br():void 0})}function Yt(It,Tr,ua){It._state==="errored"?ua(It._storedError):Tr.catch(ua).catch(b)}function aa(It,Tr,ua){It._state==="closed"?ua():Tr.then(ua).catch(b)}function ir(It,Tr,ua){if(Dt===!0)return;Dt=!0,oe._state==="writable"&&E(oe)===!1?Br().then(xa):xa();function xa(){It().then(function(){return on(Tr,ua)},function(Ca){return on(!0,Ca)}).catch(b)}}function ma(It,Tr){Dt!==!0&&(Dt=!0,oe._state==="writable"&&E(oe)===!1?Br().then(function(){return on(It,Tr)}).catch(b):on(It,Tr))}function on(It,Tr){P(dt),Fe(at),It?Pr(Tr):qt(void 0)}})}},{key:"tee",value:function(){if(j(this)===!1)throw De("tee");var oe=F(this,!1);return T(oe)}},{key:"locked",get:function(){if(j(this)===!1)throw De("locked");return x(this)}}]),H}();i.exports={ReadableStream:w,IsReadableStreamDisturbed:C,ReadableStreamDefaultControllerClose:et,ReadableStreamDefaultControllerEnqueue:ct,ReadableStreamDefaultControllerError:ht,ReadableStreamDefaultControllerGetDesiredSize:Be};function A(H){return new Se(H)}function M(H){return new he(H)}function j(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readableStreamController"))}function C(H){return v(j(H)===!0,"IsReadableStreamDisturbed should only be used on known readable streams"),H._disturbed}function x(H){return v(j(H)===!0,"IsReadableStreamLocked should only be used on known readable streams"),H._reader!==void 0}function F(H,ne){v(j(H)===!0),v(typeof ne=="boolean");var oe=M(H),we={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};we.promise=new Promise(function(bt){we._resolve=bt});var Re=$();Re._reader=oe,Re._teeState=we,Re._cloneForBranch2=ne;var Oe=G();Oe._stream=H,Oe._teeState=we;var ze=Z();ze._stream=H,ze._teeState=we;var We=Object.create(Object.prototype);R(We,"pull",Re),R(We,"cancel",Oe);var at=new w(We),dt=Object.create(Object.prototype);R(dt,"pull",Re),R(dt,"cancel",ze);var Dt=new w(dt);return Re._branch1=at._readableStreamController,Re._branch2=Dt._readableStreamController,oe._closedPromise.catch(function(bt){we.closedOrErrored!==!0&&(ht(Re._branch1,bt),ht(Re._branch2,bt),we.closedOrErrored=!0)}),[at,Dt]}function $(){function H(){var ne=H._reader,oe=H._branch1,we=H._branch2,Re=H._teeState;return Ie(ne).then(function(Oe){v(g(Oe));var ze=Oe.value,We=Oe.done;if(v(typeof We=="boolean"),We===!0&&Re.closedOrErrored===!1&&(Re.canceled1===!1&&et(oe),Re.canceled2===!1&&et(we),Re.closedOrErrored=!0),Re.closedOrErrored!==!0){var at=ze,dt=ze;Re.canceled1===!1&&ct(oe,at),Re.canceled2===!1&&ct(we,dt)}})}return H}function G(){function H(ne){var oe=H._stream,we=H._teeState;if(we.canceled1=!0,we.reason1=ne,we.canceled2===!0){var Re=T([we.reason1,we.reason2]),Oe=ee(oe,Re);we._resolve(Oe)}return we.promise}return H}function Z(){function H(ne){var oe=H._stream,we=H._teeState;if(we.canceled2=!0,we.reason2=ne,we.canceled1===!0){var Re=T([we.reason1,we.reason2]),Oe=ee(oe,Re);we._resolve(Oe)}return we.promise}return H}function J(H){v(Ce(H._reader)===!0),v(H._state==="readable"||H._state==="closed");var ne=new Promise(function(oe,we){var Re={_resolve:oe,_reject:we};H._reader._readIntoRequests.push(Re)});return ne}function Y(H){v(Ae(H._reader)===!0),v(H._state==="readable");var ne=new Promise(function(oe,we){var Re={_resolve:oe,_reject:we};H._reader._readRequests.push(Re)});return ne}function ee(H,ne){if(H._disturbed=!0,H._state==="closed")return Promise.resolve(void 0);if(H._state==="errored")return Promise.reject(H._storedError);ae(H);var oe=H._readableStreamController.__cancelSteps(ne);return oe.then(function(){})}function ae(H){v(H._state==="readable"),H._state="closed";var ne=H._reader;if(ne!==void 0){if(Ae(ne)===!0){for(var oe=0;oe<ne._readRequests.length;oe++){var we=ne._readRequests[oe]._resolve;we(y(void 0,!0))}ne._readRequests=[]}ja(ne)}}function pe(H,ne){v(j(H)===!0,"stream must be ReadableStream"),v(H._state==="readable","state must be readable"),H._state="errored",H._storedError=ne;var oe=H._reader;if(oe!==void 0){if(Ae(oe)===!0){for(var we=0;we<oe._readRequests.length;we++){var Re=oe._readRequests[we];Re._reject(ne)}oe._readRequests=[]}else{v(Ce(oe),"reader must be ReadableStreamBYOBReader");for(var Oe=0;Oe<oe._readIntoRequests.length;Oe++){var ze=oe._readIntoRequests[Oe];ze._reject(ne)}oe._readIntoRequests=[]}rt(oe,ne),oe._closedPromise.catch(function(){})}}function se(H,ne,oe){var we=H._reader;v(we._readIntoRequests.length>0);var Re=we._readIntoRequests.shift();Re._resolve(y(ne,oe))}function ue(H,ne,oe){var we=H._reader;v(we._readRequests.length>0);var Re=we._readRequests.shift();Re._resolve(y(ne,oe))}function le(H){return H._reader._readIntoRequests.length}function ie(H){return H._reader._readRequests.length}function de(H){var ne=H._reader;return!(ne===void 0||Ce(ne)===!1)}function fe(H){var ne=H._reader;return!(ne===void 0||Ae(ne)===!1)}var he=function(){function H(ne){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(x(ne)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ee(this,ne),this._readRequests=[]}return o(H,[{key:"cancel",value:function(oe){return Ae(this)===!1?Promise.reject(tt("cancel")):this._ownerReadableStream===void 0?Promise.reject(He("cancel")):ke(this,oe)}},{key:"read",value:function(){return Ae(this)===!1?Promise.reject(tt("read")):this._ownerReadableStream===void 0?Promise.reject(He("read from")):Ie(this)}},{key:"releaseLock",value:function(){if(Ae(this)===!1)throw tt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Fe(this)}}},{key:"closed",get:function(){return Ae(this)===!1?Promise.reject(tt("closed")):this._closedPromise}}]),H}(),Se=function(){function H(ne){if(l(this,H),!j(ne))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(Q(ne._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(x(ne))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ee(this,ne),this._readIntoRequests=[]}return o(H,[{key:"cancel",value:function(oe){return Ce(this)?this._ownerReadableStream===void 0?Promise.reject(He("cancel")):ke(this,oe):Promise.reject(_a("cancel"))}},{key:"read",value:function(oe){return Ce(this)?this._ownerReadableStream===void 0?Promise.reject(He("read from")):ArrayBuffer.isView(oe)?oe.byteLength===0?Promise.reject(new TypeError("view must have non-zero byteLength")):Pe(this,oe):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(_a("read"))}},{key:"releaseLock",value:function(){if(!Ce(this))throw _a("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Fe(this)}}},{key:"closed",get:function(){return Ce(this)?this._closedPromise:Promise.reject(_a("closed"))}}]),H}();function Ce(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readIntoRequests"))}function Ae(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_readRequests"))}function Ee(H,ne){H._ownerReadableStream=ne,ne._reader=H,ne._state==="readable"?xt(H):ne._state==="closed"?Rr(H):(v(ne._state==="errored","state must be errored"),lr(H,ne._storedError),H._closedPromise.catch(function(){}))}function ke(H,ne){var oe=H._ownerReadableStream;return v(oe!==void 0),ee(oe,ne)}function Fe(H){v(H._ownerReadableStream!==void 0),v(H._ownerReadableStream._reader===H),H._ownerReadableStream._state==="readable"?rt(H,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):jr(H,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),H._closedPromise.catch(function(){}),H._ownerReadableStream._reader=void 0,H._ownerReadableStream=void 0}function Pe(H,ne){var oe=H._ownerReadableStream;return v(oe!==void 0),oe._disturbed=!0,oe._state==="errored"?Promise.reject(oe._storedError):Xe(oe._readableStreamController,ne)}function Ie(H){var ne=H._ownerReadableStream;return v(ne!==void 0),ne._disturbed=!0,ne._state==="closed"?Promise.resolve(y(void 0,!0)):ne._state==="errored"?Promise.reject(ne._storedError):(v(ne._state==="readable"),ne._readableStreamController.__pullSteps())}var $e=function(){function H(ne,oe,we,Re){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(ne._readableStreamController!==void 0)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=ne,this._underlyingSource=oe,this._queue=void 0,this._queueTotalSize=void 0,_(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var Oe=z(we,Re);this._strategySize=Oe.size,this._strategyHWM=Oe.highWaterMark;var ze=this,We=S(oe,"start",[this]);Promise.resolve(We).then(function(){ze._started=!0,v(ze._pulling===!1),v(ze._pullAgain===!1),Ze(ze)},function(at){Ge(ze,at)}).catch(b)}return o(H,[{key:"close",value:function(){if(Ke(this)===!1)throw fa("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var oe=this._controlledReadableStream._state;if(oe!=="readable")throw new TypeError("The stream (in "+oe+" state) is not in the readable state and cannot be closed");et(this)}},{key:"enqueue",value:function(oe){if(Ke(this)===!1)throw fa("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var we=this._controlledReadableStream._state;if(we!=="readable")throw new TypeError("The stream (in "+we+" state) is not in the readable state and cannot be enqueued to");return ct(this,oe)}},{key:"error",value:function(oe){if(Ke(this)===!1)throw fa("error");var we=this._controlledReadableStream;if(we._state!=="readable")throw new TypeError("The stream is "+we._state+" and so cannot be errored");ht(this,oe)}},{key:"__cancelSteps",value:function(oe){return _(this),V(this._underlyingSource,"cancel",[oe])}},{key:"__pullSteps",value:function(){var oe=this._controlledReadableStream;if(this._queue.length>0){var we=p(this);return this._closeRequested===!0&&this._queue.length===0?ae(oe):Ze(this),Promise.resolve(y(we,!1))}var Re=Y(oe);return Ze(this),Re}},{key:"desiredSize",get:function(){if(Ke(this)===!1)throw fa("desiredSize");return Be(this)}}]),H}();function Ke(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_underlyingSource"))}function Ze(H){var ne=ot(H);if(ne!==!1){if(H._pulling===!0){H._pullAgain=!0;return}v(H._pullAgain===!1),H._pulling=!0;var oe=V(H._underlyingSource,"pull",[H]);oe.then(function(){if(H._pulling=!1,H._pullAgain===!0)return H._pullAgain=!1,Ze(H)},function(we){Ge(H,we)}).catch(b)}}function ot(H){var ne=H._controlledReadableStream;if(ne._state==="closed"||ne._state==="errored"||H._closeRequested===!0||H._started===!1)return!1;if(x(ne)===!0&&ie(ne)>0)return!0;var oe=Be(H);return oe>0}function et(H){var ne=H._controlledReadableStream;v(H._closeRequested===!1),v(ne._state==="readable"),H._closeRequested=!0,H._queue.length===0&&ae(ne)}function ct(H,ne){var oe=H._controlledReadableStream;if(v(H._closeRequested===!1),v(oe._state==="readable"),x(oe)===!0&&ie(oe)>0)ue(oe,ne,!1);else{var we=1;if(H._strategySize!==void 0){var Re=H._strategySize;try{we=Re(ne)}catch(Oe){throw Ge(H,Oe),Oe}}try{h(H,ne,we)}catch(Oe){throw Ge(H,Oe),Oe}}Ze(H)}function ht(H,ne){var oe=H._controlledReadableStream;v(oe._state==="readable"),_(H),pe(oe,ne)}function Ge(H,ne){H._controlledReadableStream._state==="readable"&&ht(H,ne)}function Be(H){var ne=H._controlledReadableStream,oe=ne._state;return oe==="errored"?null:oe==="closed"?0:H._strategyHWM-H._queueTotalSize}var wt=function(){function H(ne,oe){l(this,H),this._associatedReadableByteStreamController=ne,this._view=oe}return o(H,[{key:"respond",value:function(oe){if(ve(this)===!1)throw Jt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Kr(this._associatedReadableByteStreamController,oe)}},{key:"respondWithNewView",value:function(oe){if(ve(this)===!1)throw Jt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(oe))throw new TypeError("You can only respond with array buffer views");Ye(this._associatedReadableByteStreamController,oe)}},{key:"view",get:function(){return this._view}}]),H}(),At=function(){function H(ne,oe,we){if(l(this,H),j(ne)===!1)throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(ne._readableStreamController!==void 0)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=ne,this._underlyingByteSource=oe,this._pullAgain=!1,this._pulling=!1,re(this),this._queue=this._queueTotalSize=void 0,_(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=D(we);var Re=oe.autoAllocateChunkSize;if(Re!==void 0&&(Number.isInteger(Re)===!1||Re<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=Re,this._pendingPullIntos=[];var Oe=this,ze=S(oe,"start",[this]);Promise.resolve(ze).then(function(){Oe._started=!0,v(Oe._pulling===!1),v(Oe._pullAgain===!1),K(Oe)},function(We){ne._state==="readable"&&Mr(Oe,We)}).catch(b)}return o(H,[{key:"close",value:function(){if(Q(this)===!1)throw _t("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var oe=this._controlledReadableStream._state;if(oe!=="readable")throw new TypeError("The stream (in "+oe+" state) is not in the readable state and cannot be closed");dr(this)}},{key:"enqueue",value:function(oe){if(Q(this)===!1)throw _t("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var we=this._controlledReadableStream._state;if(we!=="readable")throw new TypeError("The stream (in "+we+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(oe))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");hr(this,oe)}},{key:"error",value:function(oe){if(Q(this)===!1)throw _t("error");var we=this._controlledReadableStream;if(we._state!=="readable")throw new TypeError("The stream is "+we._state+" and so cannot be errored");Mr(this,oe)}},{key:"__cancelSteps",value:function(oe){if(this._pendingPullIntos.length>0){var we=this._pendingPullIntos[0];we.bytesFilled=0}return _(this),V(this._underlyingByteSource,"cancel",[oe])}},{key:"__pullSteps",value:function(){var oe=this._controlledReadableStream;if(v(fe(oe)===!0),this._queueTotalSize>0){v(ie(oe)===0);var we=this._queue.shift();this._queueTotalSize-=we.byteLength,Ne(this);var Re=void 0;try{Re=new Uint8Array(we.buffer,we.byteOffset,we.byteLength)}catch(dt){return Promise.reject(dt)}return Promise.resolve(y(Re,!1))}var Oe=this._autoAllocateChunkSize;if(Oe!==void 0){var ze=void 0;try{ze=new ArrayBuffer(Oe)}catch(dt){return Promise.reject(dt)}var We={buffer:ze,byteOffset:0,byteLength:Oe,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(We)}var at=Y(oe);return K(this),at}},{key:"byobRequest",get:function(){if(Q(this)===!1)throw _t("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var oe=this._pendingPullIntos[0],we=new Uint8Array(oe.buffer,oe.byteOffset+oe.bytesFilled,oe.byteLength-oe.bytesFilled);this._byobRequest=new wt(this,we)}return this._byobRequest}},{key:"desiredSize",get:function(){if(Q(this)===!1)throw _t("desiredSize");return ra(this)}}]),H}();function Q(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_underlyingByteSource"))}function ve(H){return!(!g(H)||!Object.prototype.hasOwnProperty.call(H,"_associatedReadableByteStreamController"))}function K(H){var ne=yr(H);if(ne!==!1){if(H._pulling===!0){H._pullAgain=!0;return}v(H._pullAgain===!1),H._pulling=!0;var oe=V(H._underlyingByteSource,"pull",[H]);oe.then(function(){H._pulling=!1,H._pullAgain===!0&&(H._pullAgain=!1,K(H))},function(we){H._controlledReadableStream._state==="readable"&&Mr(H,we)}).catch(b)}}function re(H){Le(H),H._pendingPullIntos=[]}function me(H,ne){v(H._state!=="errored","state must not be errored");var oe=!1;H._state==="closed"&&(v(ne.bytesFilled===0),oe=!0);var we=xe(ne);ne.readerType==="default"?ue(H,we,oe):(v(ne.readerType==="byob"),se(H,we,oe))}function xe(H){var ne=H.bytesFilled,oe=H.elementSize;return v(ne<=H.byteLength),v(ne%oe===0),new H.ctor(H.buffer,H.byteOffset,ne/oe)}function _e(H,ne,oe,we){H._queue.push({buffer:ne,byteOffset:oe,byteLength:we}),H._queueTotalSize+=we}function ge(H,ne){var oe=ne.elementSize,we=ne.bytesFilled-ne.bytesFilled%oe,Re=Math.min(H._queueTotalSize,ne.byteLength-ne.bytesFilled),Oe=ne.bytesFilled+Re,ze=Oe-Oe%oe,We=Re,at=!1;ze>we&&(We=ze-ne.bytesFilled,at=!0);for(var dt=H._queue;We>0;){var Dt=dt[0],bt=Math.min(We,Dt.byteLength),qt=ne.byteOffset+ne.bytesFilled;c(ne.buffer,qt,Dt.buffer,Dt.byteOffset,bt),Dt.byteLength===bt?dt.shift():(Dt.byteOffset+=bt,Dt.byteLength-=bt),H._queueTotalSize-=bt,ye(H,bt,ne),We-=bt}return at===!1&&(v(H._queueTotalSize===0,"queue must be empty"),v(ne.bytesFilled>0),v(ne.bytesFilled<ne.elementSize)),at}function ye(H,ne,oe){v(H._pendingPullIntos.length===0||H._pendingPullIntos[0]===oe),Le(H),oe.bytesFilled+=ne}function Ne(H){v(H._controlledReadableStream._state==="readable"),H._queueTotalSize===0&&H._closeRequested===!0?ae(H._controlledReadableStream):K(H)}function Le(H){H._byobRequest!==void 0&&(H._byobRequest._associatedReadableByteStreamController=void 0,H._byobRequest._view=void 0,H._byobRequest=void 0)}function Je(H){for(v(H._closeRequested===!1);H._pendingPullIntos.length>0;){if(H._queueTotalSize===0)return;var ne=H._pendingPullIntos[0];ge(H,ne)===!0&&(Kt(H),me(H._controlledReadableStream,ne))}}function Xe(H,ne){var oe=H._controlledReadableStream,we=1;ne.constructor!==DataView&&(we=ne.constructor.BYTES_PER_ELEMENT);var Re=ne.constructor,Oe={buffer:ne.buffer,byteOffset:ne.byteOffset,byteLength:ne.byteLength,bytesFilled:0,elementSize:we,ctor:Re,readerType:"byob"};if(H._pendingPullIntos.length>0)return Oe.buffer=U(Oe.buffer),H._pendingPullIntos.push(Oe),J(oe);if(oe._state==="closed"){var ze=new ne.constructor(Oe.buffer,Oe.byteOffset,0);return Promise.resolve(y(ze,!0))}if(H._queueTotalSize>0){if(ge(H,Oe)===!0){var We=xe(Oe);return Ne(H),Promise.resolve(y(We,!1))}if(H._closeRequested===!0){var at=new TypeError("Insufficient bytes to fill elements in the given buffer");return Mr(H,at),Promise.reject(at)}}Oe.buffer=U(Oe.buffer),H._pendingPullIntos.push(Oe);var dt=J(oe);return K(H),dt}function ut(H,ne){ne.buffer=U(ne.buffer),v(ne.bytesFilled===0,"bytesFilled must be 0");var oe=H._controlledReadableStream;if(de(oe)===!0)for(;le(oe)>0;){var we=Kt(H);me(oe,we)}}function mt(H,ne,oe){if(oe.bytesFilled+ne>oe.byteLength)throw new RangeError("bytesWritten out of range");if(ye(H,ne,oe),!(oe.bytesFilled<oe.elementSize)){Kt(H);var we=oe.bytesFilled%oe.elementSize;if(we>0){var Re=oe.byteOffset+oe.bytesFilled,Oe=oe.buffer.slice(Re-we,Re);_e(H,Oe,0,Oe.byteLength)}oe.buffer=U(oe.buffer),oe.bytesFilled-=we,me(H._controlledReadableStream,oe),Je(H)}}function Tt(H,ne){var oe=H._pendingPullIntos[0],we=H._controlledReadableStream;if(we._state==="closed"){if(ne!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");ut(H,oe)}else v(we._state==="readable"),mt(H,ne,oe)}function Kt(H){var ne=H._pendingPullIntos.shift();return Le(H),ne}function yr(H){var ne=H._controlledReadableStream;return ne._state!=="readable"||H._closeRequested===!0||H._started===!1?!1:fe(ne)===!0&&ie(ne)>0||de(ne)===!0&&le(ne)>0||ra(H)>0}function dr(H){var ne=H._controlledReadableStream;if(v(H._closeRequested===!1),v(ne._state==="readable"),H._queueTotalSize>0){H._closeRequested=!0;return}if(H._pendingPullIntos.length>0){var oe=H._pendingPullIntos[0];if(oe.bytesFilled>0){var we=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Mr(H,we),we}}ae(ne)}function hr(H,ne){var oe=H._controlledReadableStream;v(H._closeRequested===!1),v(oe._state==="readable");var we=ne.buffer,Re=ne.byteOffset,Oe=ne.byteLength,ze=U(we);if(fe(oe)===!0)if(ie(oe)===0)_e(H,ze,Re,Oe);else{v(H._queue.length===0);var We=new Uint8Array(ze,Re,Oe);ue(oe,We,!1)}else de(oe)===!0?(_e(H,ze,Re,Oe),Je(H)):(v(x(oe)===!1,"stream must not be locked"),_e(H,ze,Re,Oe))}function Mr(H,ne){var oe=H._controlledReadableStream;v(oe._state==="readable"),re(H),_(H),pe(oe,ne)}function ra(H){var ne=H._controlledReadableStream,oe=ne._state;return oe==="errored"?null:oe==="closed"?0:H._strategyHWM-H._queueTotalSize}function Kr(H,ne){if(ne=Number(ne),u(ne)===!1)throw new RangeError("bytesWritten must be a finite");v(H._pendingPullIntos.length>0),Tt(H,ne)}function Ye(H,ne){v(H._pendingPullIntos.length>0);var oe=H._pendingPullIntos[0];if(oe.byteOffset+oe.bytesFilled!==ne.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(oe.byteLength!==ne.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");oe.buffer=ne.buffer,Tt(H,ne.byteLength)}function De(H){return new TypeError("ReadableStream.prototype."+H+" can only be used on a ReadableStream")}function He(H){return new TypeError("Cannot "+H+" a stream using a released reader")}function tt(H){return new TypeError("ReadableStreamDefaultReader.prototype."+H+" can only be used on a ReadableStreamDefaultReader")}function xt(H){H._closedPromise=new Promise(function(ne,oe){H._closedPromise_resolve=ne,H._closedPromise_reject=oe})}function lr(H,ne){H._closedPromise=Promise.reject(ne),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function Rr(H){H._closedPromise=Promise.resolve(void 0),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function rt(H,ne){v(H._closedPromise_resolve!==void 0),v(H._closedPromise_reject!==void 0),H._closedPromise_reject(ne),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function jr(H,ne){v(H._closedPromise_resolve===void 0),v(H._closedPromise_reject===void 0),H._closedPromise=Promise.reject(ne)}function ja(H){v(H._closedPromise_resolve!==void 0),v(H._closedPromise_reject!==void 0),H._closedPromise_resolve(void 0),H._closedPromise_resolve=void 0,H._closedPromise_reject=void 0}function _a(H){return new TypeError("ReadableStreamBYOBReader.prototype."+H+" can only be used on a ReadableStreamBYOBReader")}function fa(H){return new TypeError("ReadableStreamDefaultController.prototype."+H+" can only be used on a ReadableStreamDefaultController")}function Jt(H){return new TypeError("ReadableStreamBYOBRequest.prototype."+H+" can only be used on a ReadableStreamBYOBRequest")}function _t(H){return new TypeError("ReadableByteStreamController.prototype."+H+" can only be used on a ReadableByteStreamController")}function st(H){try{Promise.prototype.then.call(H,void 0,function(){})}catch{}}},function(i,s,t){"use strict";var o=t(6),l=t(4),d=t(2);s.TransformStream=o.TransformStream,s.ReadableStream=l.ReadableStream,s.IsReadableStreamDisturbed=l.IsReadableStreamDisturbed,s.ReadableStreamDefaultControllerClose=l.ReadableStreamDefaultControllerClose,s.ReadableStreamDefaultControllerEnqueue=l.ReadableStreamDefaultControllerEnqueue,s.ReadableStreamDefaultControllerError=l.ReadableStreamDefaultControllerError,s.ReadableStreamDefaultControllerGetDesiredSize=l.ReadableStreamDefaultControllerGetDesiredSize,s.AcquireWritableStreamDefaultWriter=d.AcquireWritableStreamDefaultWriter,s.IsWritableStream=d.IsWritableStream,s.IsWritableStreamLocked=d.IsWritableStreamLocked,s.WritableStream=d.WritableStream,s.WritableStreamAbort=d.WritableStreamAbort,s.WritableStreamDefaultControllerError=d.WritableStreamDefaultControllerError,s.WritableStreamDefaultWriterCloseWithErrorPropagation=d.WritableStreamDefaultWriterCloseWithErrorPropagation,s.WritableStreamDefaultWriterRelease=d.WritableStreamDefaultWriterRelease,s.WritableStreamDefaultWriterWrite=d.WritableStreamDefaultWriterWrite},function(i,s,t){"use strict";var o=function(){function x(F,$){for(var G=0;G<$.length;G++){var Z=$[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(F,Z.key,Z)}}return function(F,$,G){return $&&x(F.prototype,$),G&&x(F,G),F}}();function l(x,F){if(!(x instanceof F))throw new TypeError("Cannot call a class as a function")}var d=t(1),c=d.assert,y=t(0),u=y.InvokeOrNoop,S=y.PromiseInvokeOrPerformFallback,V=y.PromiseInvokeOrNoop,U=y.typeIsObject,z=t(4),D=z.ReadableStream,k=z.ReadableStreamDefaultControllerClose,T=z.ReadableStreamDefaultControllerEnqueue,R=z.ReadableStreamDefaultControllerError,g=z.ReadableStreamDefaultControllerGetDesiredSize,m=t(2),v=m.WritableStream,b=m.WritableStreamDefaultControllerError;function f(x){if(x._errored===!0)throw new TypeError("TransformStream is already errored");if(x._readableClosed===!0)throw new TypeError("Readable side is already closed");_(x)}function p(x,F){if(x._errored===!0)throw new TypeError("TransformStream is already errored");if(x._readableClosed===!0)throw new TypeError("Readable side is already closed");var $=x._readableController;try{T($,F)}catch(J){throw x._readableClosed=!0,I(x,J),x._storedError}var G=g($),Z=G<=0;Z===!0&&x._backpressure===!1&&B(x,!0)}function h(x,F){if(x._errored===!0)throw new TypeError("TransformStream is already errored");W(x,F)}function _(x){c(x._errored===!1),c(x._readableClosed===!1);try{k(x._readableController)}catch{c(!1)}x._readableClosed=!0}function I(x,F){x._errored===!1&&W(x,F)}function W(x,F){c(x._errored===!1),x._errored=!0,x._storedError=F,x._writableDone===!1&&b(x._writableController,F),x._readableClosed===!1&&R(x._readableController,F)}function q(x){return c(x._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),x._backpressure===!1?Promise.resolve():(c(x._backpressure===!0,"_backpressure should have been initialized"),x._backpressureChangePromise)}function B(x,F){c(x._backpressure!==F,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),x._backpressureChangePromise!==void 0&&x._backpressureChangePromise_resolve(F),x._backpressureChangePromise=new Promise(function($){x._backpressureChangePromise_resolve=$}),x._backpressureChangePromise.then(function($){c($!==F,"_backpressureChangePromise should be fulfilled only when backpressure is changed")}),x._backpressure=F}function N(x,F){var $=F._controlledTransformStream;return p($,x),Promise.resolve()}function L(x,F){c(x._errored===!1),c(x._transforming===!1),c(x._backpressure===!1),x._transforming=!0;var $=x._transformer,G=x._transformStreamController,Z=S($,"transform",[F,G],N,[F,G]);return Z.then(function(){return x._transforming=!1,q(x)},function(J){return I(x,J),Promise.reject(J)})}function P(x){return!(!U(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledTransformStream"))}function O(x){return!(!U(x)||!Object.prototype.hasOwnProperty.call(x,"_transformStreamController"))}var E=function(){function x(F,$){l(this,x),this._transformStream=F,this._startPromise=$}return o(x,[{key:"start",value:function($){var G=this._transformStream;return G._writableController=$,this._startPromise.then(function(){return q(G)})}},{key:"write",value:function($){var G=this._transformStream;return L(G,$)}},{key:"abort",value:function(){var $=this._transformStream;$._writableDone=!0,W($,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var $=this._transformStream;c($._transforming===!1),$._writableDone=!0;var G=V($._transformer,"flush",[$._transformStreamController]);return G.then(function(){return $._errored===!0?Promise.reject($._storedError):($._readableClosed===!1&&_($),Promise.resolve())}).catch(function(Z){return I($,Z),Promise.reject($._storedError)})}}]),x}(),w=function(){function x(F,$){l(this,x),this._transformStream=F,this._startPromise=$}return o(x,[{key:"start",value:function($){var G=this._transformStream;return G._readableController=$,this._startPromise.then(function(){return c(G._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),G._backpressure===!0?Promise.resolve():(c(G._backpressure===!1,"_backpressure should have been initialized"),G._backpressureChangePromise)})}},{key:"pull",value:function(){var $=this._transformStream;return c($._backpressure===!0,"pull() should be never called while _backpressure is false"),c($._backpressureChangePromise!==void 0,"_backpressureChangePromise should have been initialized"),B($,!1),$._backpressureChangePromise}},{key:"cancel",value:function(){var $=this._transformStream;$._readableClosed=!0,W($,new TypeError("Readable side canceled"))}}]),x}(),A=function(){function x(F){if(l(this,x),O(F)===!1)throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(F._transformStreamController!==void 0)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=F}return o(x,[{key:"enqueue",value:function($){if(P(this)===!1)throw j("enqueue");p(this._controlledTransformStream,$)}},{key:"close",value:function(){if(P(this)===!1)throw j("close");f(this._controlledTransformStream)}},{key:"error",value:function($){if(P(this)===!1)throw j("error");h(this._controlledTransformStream,$)}},{key:"desiredSize",get:function(){if(P(this)===!1)throw j("desiredSize");var $=this._controlledTransformStream,G=$._readableController;return g(G)}}]),x}(),M=function(){function x(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};l(this,x),this._transformer=F;var $=F.readableStrategy,G=F.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new A(this);var Z=void 0,J=new Promise(function(ue){Z=ue}),Y=new w(this,J);this._readable=new D(Y,$);var ee=new E(this,J);this._writable=new v(ee,G),c(this._writableController!==void 0),c(this._readableController!==void 0);var ae=g(this._readableController);B(this,ae<=0);var pe=this,se=u(F,"start",[pe._transformStreamController]);Z(se),J.catch(function(ue){pe._errored===!1&&(pe._errored=!0,pe._storedError=ue)})}return o(x,[{key:"readable",get:function(){if(O(this)===!1)throw C("readable");return this._readable}},{key:"writable",get:function(){if(O(this)===!1)throw C("writable");return this._writable}}]),x}();i.exports={TransformStream:M};function j(x){return new TypeError("TransformStreamDefaultController.prototype."+x+" can only be used on a TransformStreamDefaultController")}function C(x){return new TypeError("TransformStream.prototype."+x+" can only be used on a TransformStream")}},function(i,s,t){i.exports=t(5)}]))},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFJS=e.globalScope=void 0;var a=r(69),i=r(15),s=r(0),t=r(72),o=r(20),l=u(o),d=r(71),c=r(73),y=r(74);function u(U){return U&&U.__esModule?U:{default:U}}l.default.PDFJS||(l.default.PDFJS={});var S=l.default.PDFJS;S.version="1.10.100",S.build="ea29ec83",S.pdfBug=!1,S.verbosity!==void 0&&(0,s.setVerbosityLevel)(S.verbosity),delete S.verbosity,Object.defineProperty(S,"verbosity",{get:function(){return(0,s.getVerbosityLevel)()},set:function(z){(0,s.setVerbosityLevel)(z)},enumerable:!0,configurable:!0}),S.VERBOSITY_LEVELS=s.VERBOSITY_LEVELS,S.OPS=s.OPS,S.UNSUPPORTED_FEATURES=s.UNSUPPORTED_FEATURES,S.isValidUrl=i.isValidUrl,S.shadow=s.shadow,S.createBlob=s.createBlob,S.createObjectURL=function(z,D){return(0,s.createObjectURL)(z,D,S.disableCreateObjectURL)},Object.defineProperty(S,"isLittleEndian",{configurable:!0,get:function(){return(0,s.shadow)(S,"isLittleEndian",(0,s.isLittleEndian)())}}),S.removeNullCharacters=s.removeNullCharacters,S.PasswordResponses=s.PasswordResponses,S.PasswordException=s.PasswordException,S.UnknownErrorException=s.UnknownErrorException,S.InvalidPDFException=s.InvalidPDFException,S.MissingPDFException=s.MissingPDFException,S.UnexpectedResponseException=s.UnexpectedResponseException,S.Util=s.Util,S.PageViewport=s.PageViewport,S.createPromiseCapability=s.createPromiseCapability,S.maxImageSize=S.maxImageSize===void 0?-1:S.maxImageSize,S.cMapUrl=S.cMapUrl===void 0?null:S.cMapUrl,S.cMapPacked=S.cMapPacked===void 0?!1:S.cMapPacked,S.disableFontFace=S.disableFontFace===void 0?!1:S.disableFontFace,S.imageResourcesPath=S.imageResourcesPath===void 0?"":S.imageResourcesPath,S.disableWorker=S.disableWorker===void 0?!1:S.disableWorker,S.workerSrc=S.workerSrc===void 0?null:S.workerSrc,S.workerPort=S.workerPort===void 0?null:S.workerPort,S.disableRange=S.disableRange===void 0?!1:S.disableRange,S.disableStream=S.disableStream===void 0?!1:S.disableStream,S.disableAutoFetch=S.disableAutoFetch===void 0?!1:S.disableAutoFetch,S.pdfBug=S.pdfBug===void 0?!1:S.pdfBug,S.postMessageTransfers=S.postMessageTransfers===void 0?!0:S.postMessageTransfers,S.disableCreateObjectURL=S.disableCreateObjectURL===void 0?!1:S.disableCreateObjectURL,S.disableWebGL=S.disableWebGL===void 0?!0:S.disableWebGL,S.externalLinkTarget=S.externalLinkTarget===void 0?i.LinkTarget.NONE:S.externalLinkTarget,S.externalLinkRel=S.externalLinkRel===void 0?i.DEFAULT_LINK_REL:S.externalLinkRel,S.isEvalSupported=S.isEvalSupported===void 0?!0:S.isEvalSupported,S.pdfjsNext=S.pdfjsNext===void 0?!1:S.pdfjsNext;{var V=S.openExternalLinksInNewWindow;delete S.openExternalLinksInNewWindow,Object.defineProperty(S,"openExternalLinksInNewWindow",{get:function(){return S.externalLinkTarget===i.LinkTarget.BLANK},set:function(z){if(z&&(0,s.deprecated)('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.'),S.externalLinkTarget!==i.LinkTarget.NONE){(0,s.warn)("PDFJS.externalLinkTarget is already initialized");return}S.externalLinkTarget=z?i.LinkTarget.BLANK:i.LinkTarget.NONE},enumerable:!0,configurable:!0}),V&&(S.openExternalLinksInNewWindow=V)}S.getDocument=a.getDocument,S.LoopbackPort=a.LoopbackPort,S.PDFDataRangeTransport=a.PDFDataRangeTransport,S.PDFWorker=a.PDFWorker,S.hasCanvasTypedArrays=!0,S.CustomStyle=i.CustomStyle,S.LinkTarget=i.LinkTarget,S.addLinkAttributes=i.addLinkAttributes,S.getFilenameFromUrl=i.getFilenameFromUrl,S.isExternalLinkTargetSet=i.isExternalLinkTargetSet,S.AnnotationLayer=t.AnnotationLayer,S.renderTextLayer=c.renderTextLayer,S.Metadata=d.Metadata,S.SVGGraphics=y.SVGGraphics,S.UnsupportedManager=a._UnsupportedManager,e.globalScope=l.default,e.PDFJS=S},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=r(0);function i(d){this.docId=d,this.styleElement=null,this.nativeFontFaces=[],this.loadTestFontId=0,this.loadingContext={requests:[],nextRequestId:0}}i.prototype={insertRule:function(c){var y=this.styleElement;y||(y=this.styleElement=document.createElement("style"),y.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(y));var u=y.sheet;u.insertRule(c,u.cssRules.length)},clear:function(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.nativeFontFaces.forEach(function(c){document.fonts.delete(c)}),this.nativeFontFaces.length=0}};{var s=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};Object.defineProperty(i.prototype,"loadTestFont",{get:function(){return(0,a.shadow)(this,"loadTestFont",s())},configurable:!0}),i.prototype.addNativeFontFace=function(c){this.nativeFontFaces.push(c),document.fonts.add(c)},i.prototype.bind=function(c,y){for(var u=[],S=[],V=[],U=function(b){return b.loaded.catch(function(f){(0,a.warn)('Failed to load font "'+b.family+'": '+f)})},z=i.isFontLoadingAPISupported&&!i.isSyncFontLoadingSupported,D=0,k=c.length;D<k;D++){var T=c[D];if(!(T.attached||T.loading===!1))if(T.attached=!0,z){var R=T.createNativeFontFace();R&&(this.addNativeFontFace(R),V.push(U(R)))}else{var g=T.createFontFaceRule();g&&(this.insertRule(g),u.push(g),S.push(T))}}var m=this.queueLoadingCallback(y);z?Promise.all(V).then(function(){m.complete()}):u.length>0&&!i.isSyncFontLoadingSupported?this.prepareFontLoadEvent(u,S,m):m.complete()},i.prototype.queueLoadingCallback=function(c){function y(){for((0,a.assert)(!V.end,"completeRequest() cannot be called twice"),V.end=Date.now();u.requests.length>0&&u.requests[0].end;){var U=u.requests.shift();setTimeout(U.callback,0)}}var u=this.loadingContext,S="pdfjs-font-loading-"+u.nextRequestId++,V={id:S,complete:y,callback:c,started:Date.now()};return u.requests.push(V),V},i.prototype.prepareFontLoadEvent=function(c,y,u){function S(B,N){return B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3)&255}function V(B,N,L,P){var O=B.substr(0,N),E=B.substr(N+L);return O+P+E}var U,z,D=document.createElement("canvas");D.width=1,D.height=1;var k=D.getContext("2d"),T=0;function R(B,N){if(T++,T>30){(0,a.warn)("Load test font never loaded."),N();return}k.font="30px "+B,k.fillText(".",0,20);var L=k.getImageData(0,0,1,1);if(L.data[3]>0){N();return}setTimeout(R.bind(null,B,N))}var g="lt"+Date.now()+this.loadTestFontId++,m=this.loadTestFont,v=976;m=V(m,v,g.length,g);var b=16,f=1482184792,p=S(m,b);for(U=0,z=g.length-3;U<z;U+=4)p=p-f+S(g,U)|0;U<g.length&&(p=p-f+S(g+"XXX",U)|0),m=V(m,b,4,(0,a.string32)(p));var h="url(data:font/opentype;base64,"+btoa(m)+");",_='@font-face { font-family:"'+g+'";src:'+h+"}";this.insertRule(_);var I=[];for(U=0,z=y.length;U<z;U++)I.push(y[U].loadedName);I.push(g);var W=document.createElement("div");for(W.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),U=0,z=I.length;U<z;++U){var q=document.createElement("span");q.textContent="Hi",q.style.fontFamily=I[U],W.appendChild(q)}document.body.appendChild(W),R(g,function(){document.body.removeChild(W),u.complete()})}}i.isFontLoadingAPISupported=typeof document<"u"&&!!document.fonts;{var t=function(){if(typeof navigator>"u")return!0;var c=!1,y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);return y&&y[1]>=14&&(c=!0),c};Object.defineProperty(i,"isSyncFontLoadingSupported",{get:function(){return(0,a.shadow)(i,"isSyncFontLoadingSupported",t())},enumerable:!0,configurable:!0})}var o={get value(){return(0,a.shadow)(this,"value",(0,a.isEvalSupported)())}},l=function(){function c(y,u){this.compiledGlyphs=Object.create(null);for(var S in y)this[S]=y[S];this.options=u}return c.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var u=new FontFace(this.loadedName,this.data,{});return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this),u},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var u=(0,a.bytesToString)(new Uint8Array(this.data)),S=this.loadedName,V="url(data:"+this.mimetype+";base64,"+btoa(u)+");",U='@font-face { font-family:"'+S+'";src:'+V+"}";return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,V),U},getPathGenerator:function(u,S){if(!(S in this.compiledGlyphs)){var V=u.get(this.loadedName+"_path_"+S),U,z,D;if(this.options.isEvalSupported&&o.value){var k,T="";for(z=0,D=V.length;z<D;z++)U=V[z],U.args!==void 0?k=U.args.join(","):k="",T+="c."+U.cmd+"("+k+`);
`;this.compiledGlyphs[S]=new Function("c","size",T)}else this.compiledGlyphs[S]=function(R,g){for(z=0,D=V.length;z<D;z++)U=V[z],U.cmd==="scale"&&(U.args=[g,-g]),R[U.cmd].apply(R,U.args)}}return this.compiledGlyphs[S]}},c}();e.FontFaceObject=l,e.FontLoader=i},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var a=r(0),i=r(121),s=r(70),t=16,o=100,l=4096,d=.65,c=!0,y=1e3,u=16,S={get value(){return(0,a.shadow)(S,"value",(0,a.isLittleEndian)())}};function V(T){T.mozCurrentTransform||(T._originalSave=T.save,T._originalRestore=T.restore,T._originalRotate=T.rotate,T._originalScale=T.scale,T._originalTranslate=T.translate,T._originalTransform=T.transform,T._originalSetTransform=T.setTransform,T._transformMatrix=T._transformMatrix||[1,0,0,1,0,0],T._transformStack=[],Object.defineProperty(T,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(T,"mozCurrentTransformInverse",{get:function(){var g=this._transformMatrix,m=g[0],v=g[1],b=g[2],f=g[3],p=g[4],h=g[5],_=m*f-v*b,I=v*b-m*f;return[f/_,v/I,b/I,m/_,(f*p-b*h)/I,(v*p-m*h)/_]}}),T.save=function(){var g=this._transformMatrix;this._transformStack.push(g),this._transformMatrix=g.slice(0,6),this._originalSave()},T.restore=function(){var g=this._transformStack.pop();g&&(this._transformMatrix=g,this._originalRestore())},T.translate=function(g,m){var v=this._transformMatrix;v[4]=v[0]*g+v[2]*m+v[4],v[5]=v[1]*g+v[3]*m+v[5],this._originalTranslate(g,m)},T.scale=function(g,m){var v=this._transformMatrix;v[0]=v[0]*g,v[1]=v[1]*g,v[2]=v[2]*m,v[3]=v[3]*m,this._originalScale(g,m)},T.transform=function(g,m,v,b,f,p){var h=this._transformMatrix;this._transformMatrix=[h[0]*g+h[2]*m,h[1]*g+h[3]*m,h[0]*v+h[2]*b,h[1]*v+h[3]*b,h[0]*f+h[2]*p+h[4],h[1]*f+h[3]*p+h[5]],T._originalTransform(g,m,v,b,f,p)},T.setTransform=function(g,m,v,b,f,p){this._transformMatrix=[g,m,v,b,f,p],T._originalSetTransform(g,m,v,b,f,p)},T.rotate=function(g){var m=Math.cos(g),v=Math.sin(g),b=this._transformMatrix;this._transformMatrix=[b[0]*m+b[2]*v,b[1]*m+b[3]*v,b[0]*-v+b[2]*m,b[1]*-v+b[3]*m,b[4],b[5]],this._originalRotate(g)})}var U=function(){function R(g){this.canvasFactory=g,this.cache=Object.create(null)}return R.prototype={getCanvas:function(m,v,b,f){var p;return this.cache[m]!==void 0?(p=this.cache[m],this.canvasFactory.reset(p,v,b),p.context.setTransform(1,0,0,1,0,0)):(p=this.canvasFactory.create(v,b),this.cache[m]=p),f&&V(p.context),p},clear:function(){for(var m in this.cache){var v=this.cache[m];this.canvasFactory.destroy(v),delete this.cache[m]}}},R}();function z(T){var R=1e3,g=T.width,m=T.height,v,b,f,p=g+1,h=new Uint8Array(p*(m+1)),_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=g+7&-8,W=T.data,q=new Uint8Array(I*m),B=0,N;for(v=0,N=W.length;v<N;v++)for(var L=128,P=W[v];L>0;)q[B++]=P&L?0:255,L>>=1;var O=0;for(B=0,q[B]!==0&&(h[0]=1,++O),b=1;b<g;b++)q[B]!==q[B+1]&&(h[b]=q[B]?2:1,++O),B++;for(q[B]!==0&&(h[b]=2,++O),v=1;v<m;v++){B=v*I,f=v*p,q[B-I]!==q[B]&&(h[f]=q[B]?1:8,++O);var E=(q[B]?4:0)+(q[B-I]?8:0);for(b=1;b<g;b++)E=(E>>2)+(q[B+1]?4:0)+(q[B-I+1]?8:0),_[E]&&(h[f+b]=_[E],++O),B++;if(q[B-I]!==q[B]&&(h[f+b]=q[B]?2:4,++O),O>R)return null}for(B=I*(m-1),f=v*p,q[B]!==0&&(h[f]=8,++O),b=1;b<g;b++)q[B]!==q[B+1]&&(h[f+b]=q[B]?4:8,++O),B++;if(q[B]!==0&&(h[f+b]=4,++O),O>R)return null;var w=new Int32Array([0,p,-1,0,-p,0,0,0,1]),A=[];for(v=0;O&&v<=m;v++){for(var M=v*p,j=M+g;M<j&&!h[M];)M++;if(M!==j){var C=[M%p,v],x=h[M],F=M,$;do{var G=w[x];do M+=G;while(!h[M]);$=h[M],$!==5&&$!==10?(x=$,h[M]=0):(x=$&51*x>>4,h[M]&=x>>2|x<<2),C.push(M%p),C.push(M/p|0),--O}while(F!==M);A.push(C),--v}}var Z=function(Y){Y.save(),Y.scale(1/g,-1/m),Y.translate(0,-m),Y.beginPath();for(var ee=0,ae=A.length;ee<ae;ee++){var pe=A[ee];Y.moveTo(pe[0],pe[1]);for(var se=2,ue=pe.length;se<ue;se+=2)Y.lineTo(pe[se],pe[se+1])}Y.fill(),Y.beginPath(),Y.restore()};return Z}var D=function(){function R(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return R.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(m,v){this.x=m,this.y=v}},R}(),k=function(){var R=15,g=10;function m(E,w,A,M,j){this.ctx=E,this.current=new D,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=w,this.objs=A,this.canvasFactory=M,this.imageLayer=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new U(this.canvasFactory),E&&V(E),this.cachedGetSinglePixelWidth=null}function v(E,w){if(typeof ImageData<"u"&&w instanceof ImageData){E.putImageData(w,0,0);return}var A=w.height,M=w.width,j=A%u,C=(A-j)/u,x=j===0?C:C+1,F=E.createImageData(M,u),$=0,G,Z=w.data,J=F.data,Y,ee,ae,pe;if(w.kind===a.ImageKind.GRAYSCALE_1BPP){var se=Z.byteLength,ue=new Uint32Array(J.buffer,0,J.byteLength>>2),le=ue.length,ie=M+7>>3,de=4294967295,fe=S.value?4278190080:255;for(Y=0;Y<x;Y++){for(ae=Y<C?u:j,G=0,ee=0;ee<ae;ee++){for(var he=se-$,Se=0,Ce=he>ie?M:he*8-7,Ae=Ce&-8,Ee=0,ke=0;Se<Ae;Se+=8)ke=Z[$++],ue[G++]=ke&128?de:fe,ue[G++]=ke&64?de:fe,ue[G++]=ke&32?de:fe,ue[G++]=ke&16?de:fe,ue[G++]=ke&8?de:fe,ue[G++]=ke&4?de:fe,ue[G++]=ke&2?de:fe,ue[G++]=ke&1?de:fe;for(;Se<Ce;Se++)Ee===0&&(ke=Z[$++],Ee=128),ue[G++]=ke&Ee?de:fe,Ee>>=1}for(;G<le;)ue[G++]=0;E.putImageData(F,0,Y*u)}}else if(w.kind===a.ImageKind.RGBA_32BPP){for(ee=0,pe=M*u*4,Y=0;Y<C;Y++)J.set(Z.subarray($,$+pe)),$+=pe,E.putImageData(F,0,ee),ee+=u;Y<x&&(pe=M*j*4,J.set(Z.subarray($,$+pe)),E.putImageData(F,0,ee))}else if(w.kind===a.ImageKind.RGB_24BPP)for(ae=u,pe=M*ae,Y=0;Y<x;Y++){for(Y>=C&&(ae=j,pe=M*ae),G=0,ee=pe;ee--;)J[G++]=Z[$++],J[G++]=Z[$++],J[G++]=Z[$++],J[G++]=255;E.putImageData(F,0,Y*u)}else throw new Error("bad image kind: "+w.kind)}function b(E,w){for(var A=w.height,M=w.width,j=A%u,C=(A-j)/u,x=j===0?C:C+1,F=E.createImageData(M,u),$=0,G=w.data,Z=F.data,J=0;J<x;J++){for(var Y=J<C?u:j,ee=3,ae=0;ae<Y;ae++)for(var pe=0,se=0;se<M;se++){if(!pe){var ue=G[$++];pe=128}Z[ee]=ue&pe?0:255,ee+=4,pe>>=1}E.putImageData(F,0,J*u)}}function f(E,w){for(var A=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],M=0,j=A.length;M<j;M++){var C=A[M];E[C]!==void 0&&(w[C]=E[C])}E.setLineDash!==void 0&&(w.setLineDash(E.getLineDash()),w.lineDashOffset=E.lineDashOffset)}function p(E){E.strokeStyle="#000000",E.fillStyle="#000000",E.fillRule="nonzero",E.globalAlpha=1,E.lineWidth=1,E.lineCap="butt",E.lineJoin="miter",E.miterLimit=10,E.globalCompositeOperation="source-over",E.font="10px sans-serif",E.setLineDash!==void 0&&(E.setLineDash([]),E.lineDashOffset=0)}function h(E,w,A,M){for(var j=E.length,C=3;C<j;C+=4){var x=E[C];if(x===0)E[C-3]=w,E[C-2]=A,E[C-1]=M;else if(x<255){var F=255-x;E[C-3]=E[C-3]*x+w*F>>8,E[C-2]=E[C-2]*x+A*F>>8,E[C-1]=E[C-1]*x+M*F>>8}}}function _(E,w,A){for(var M=E.length,j=1/255,C=3;C<M;C+=4){var x=A?A[E[C]]:E[C];w[C]=w[C]*x*j|0}}function I(E,w,A){for(var M=E.length,j=3;j<M;j+=4){var C=E[j-3]*77+E[j-2]*152+E[j-1]*28;w[j]=A?w[j]*A[C>>8]>>8:w[j]*C>>16}}function W(E,w,A,M,j,C,x){var F=!!C,$=F?C[0]:0,G=F?C[1]:0,Z=F?C[2]:0,J;j==="Luminosity"?J=I:J=_;for(var Y=1048576,ee=Math.min(M,Math.ceil(Y/A)),ae=0;ae<M;ae+=ee){var pe=Math.min(ee,M-ae),se=E.getImageData(0,ae,A,pe),ue=w.getImageData(0,ae,A,pe);F&&h(se.data,$,G,Z),J(se.data,ue.data,x),E.putImageData(ue,0,ae)}}function q(E,w,A){var M=w.canvas,j=w.context;E.setTransform(w.scaleX,0,0,w.scaleY,w.offsetX,w.offsetY);var C=w.backdrop||null;if(!w.transferMap&&s.WebGLUtils.isEnabled){var x=s.WebGLUtils.composeSMask(A.canvas,M,{subtype:w.subtype,backdrop:C});E.setTransform(1,0,0,1,0,0),E.drawImage(x,w.offsetX,w.offsetY);return}W(j,A,M.width,M.height,w.subtype,C,w.transferMap),E.drawImage(M,0,0)}var B=["butt","round","square"],N=["miter","round","bevel"],L={},P={};m.prototype={beginDrawing:function(w){var A=w.transform,M=w.viewport,j=w.transparency,C=w.background,x=C===void 0?null:C,F=this.ctx.canvas.width,$=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=x||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,F,$),this.ctx.restore(),j){var G=this.cachedCanvases.getCanvas("transparent",F,$,!0);this.compositeCtx=this.ctx,this.transparentCanvas=G.canvas,this.ctx=G.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),p(this.ctx),A&&this.ctx.transform.apply(this.ctx,A),this.ctx.transform.apply(this.ctx,M.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(w,A,M,j){var C=w.argsArray,x=w.fnArray,F=A||0,$=C.length;if($===F)return F;for(var G=$-F>g&&typeof M=="function",Z=G?Date.now()+R:0,J=0,Y=this.commonObjs,ee=this.objs,ae;;){if(j!==void 0&&F===j.nextBreakPoint)return j.breakIt(F,M),F;if(ae=x[F],ae!==a.OPS.dependency)this[ae].apply(this,C[F]);else for(var pe=C[F],se=0,ue=pe.length;se<ue;se++){var le=pe[se],ie=le[0]==="g"&&le[1]==="_",de=ie?Y:ee;if(!de.isResolved(le))return de.get(le,M),F}if(F++,F===$)return F;if(G&&++J>g){if(Date.now()>Z)return M(),F;J=0}}},endDrawing:function(){this.current.activeSMask!==null&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),s.WebGLUtils.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(w){this.current.lineWidth=w,this.ctx.lineWidth=w},setLineCap:function(w){this.ctx.lineCap=B[w]},setLineJoin:function(w){this.ctx.lineJoin=N[w]},setMiterLimit:function(w){this.ctx.miterLimit=w},setDash:function(w,A){var M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(w),M.lineDashOffset=A)},setRenderingIntent:function(w){},setFlatness:function(w){},setGState:function(w){for(var A=0,M=w.length;A<M;A++){var j=w[A],C=j[0],x=j[1];switch(C){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x[0],x[1]);break;case"CA":this.current.strokeAlpha=j[1];break;case"ca":this.current.fillAlpha=j[1],this.ctx.globalAlpha=j[1];break;case"BM":this.ctx.globalCompositeOperation=x;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=x?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break}}},beginSMaskGroup:function(){var w=this.current.activeSMask,A=w.canvas.width,M=w.canvas.height,j="smaskGroupAt"+this.groupLevel,C=this.cachedCanvases.getCanvas(j,A,M,!0),x=this.ctx,F=x.mozCurrentTransform;this.ctx.save();var $=C.context;$.scale(1/w.scaleX,1/w.scaleY),$.translate(-w.offsetX,-w.offsetY),$.transform.apply($,F),w.startTransformInverse=$.mozCurrentTransformInverse,f(x,$),this.ctx=$,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(x),this.groupLevel++},suspendSMaskGroup:function(){var w=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),q(this.ctx,this.current.activeSMask,w),this.ctx.restore(),this.ctx.save(),f(w,this.ctx),this.current.resumeSMaskCtx=w;var A=a.Util.transform(this.current.activeSMask.startTransformInverse,w.mozCurrentTransform);this.ctx.transform.apply(this.ctx,A),w.save(),w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,w.canvas.width,w.canvas.height),w.restore()},resumeSMaskGroup:function(){var w=this.current.resumeSMaskCtx,A=this.ctx;this.ctx=w,this.groupStack.push(A),this.groupLevel++},endSMaskGroup:function(){var w=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),q(this.ctx,this.current.activeSMask,w),this.ctx.restore(),f(w,this.ctx);var A=a.Util.transform(this.current.activeSMask.startTransformInverse,w.mozCurrentTransform);this.ctx.transform.apply(this.ctx,A)},save:function(){this.ctx.save();var w=this.current;this.stateStack.push(w),this.current=w.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this.cachedGetSinglePixelWidth=null)},transform:function(w,A,M,j,C,x){this.ctx.transform(w,A,M,j,C,x),this.cachedGetSinglePixelWidth=null},constructPath:function(w,A){for(var M=this.ctx,j=this.current,C=j.x,x=j.y,F=0,$=0,G=w.length;F<G;F++)switch(w[F]|0){case a.OPS.rectangle:C=A[$++],x=A[$++];var Z=A[$++],J=A[$++];Z===0&&(Z=this.getSinglePixelWidth()),J===0&&(J=this.getSinglePixelWidth());var Y=C+Z,ee=x+J;this.ctx.moveTo(C,x),this.ctx.lineTo(Y,x),this.ctx.lineTo(Y,ee),this.ctx.lineTo(C,ee),this.ctx.lineTo(C,x),this.ctx.closePath();break;case a.OPS.moveTo:C=A[$++],x=A[$++],M.moveTo(C,x);break;case a.OPS.lineTo:C=A[$++],x=A[$++],M.lineTo(C,x);break;case a.OPS.curveTo:C=A[$+4],x=A[$+5],M.bezierCurveTo(A[$],A[$+1],A[$+2],A[$+3],C,x),$+=6;break;case a.OPS.curveTo2:M.bezierCurveTo(C,x,A[$],A[$+1],A[$+2],A[$+3]),C=A[$+2],x=A[$+3],$+=4;break;case a.OPS.curveTo3:C=A[$+2],x=A[$+3],M.bezierCurveTo(A[$],A[$+1],C,x,C,x),$+=4;break;case a.OPS.closePath:M.closePath();break}j.setCurrentPoint(C,x)},closePath:function(){this.ctx.closePath()},stroke:function(w){w=typeof w<"u"?w:!0;var A=this.ctx,M=this.current.strokeColor;A.lineWidth=Math.max(this.getSinglePixelWidth()*d,this.current.lineWidth),A.globalAlpha=this.current.strokeAlpha,M&&M.hasOwnProperty("type")&&M.type==="Pattern"?(A.save(),A.strokeStyle=M.getPattern(A,this),A.stroke(),A.restore()):A.stroke(),w&&this.consumePath(),A.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(w){w=typeof w<"u"?w:!0;var A=this.ctx,M=this.current.fillColor,j=this.current.patternFill,C=!1;j&&(A.save(),this.baseTransform&&A.setTransform.apply(A,this.baseTransform),A.fillStyle=M.getPattern(A,this),C=!0),this.pendingEOFill?(A.fill("evenodd"),this.pendingEOFill=!1):A.fill(),C&&A.restore(),w&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=L},eoClip:function(){this.pendingClip=P},beginText:function(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var w=this.pendingTextPaths,A=this.ctx;if(w===void 0){A.beginPath();return}A.save(),A.beginPath();for(var M=0;M<w.length;M++){var j=w[M];A.setTransform.apply(A,j.transform),A.translate(j.x,j.y),j.addToPath(A,j.fontSize)}A.restore(),A.clip(),A.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(w){this.current.charSpacing=w},setWordSpacing:function(w){this.current.wordSpacing=w},setHScale:function(w){this.current.textHScale=w/100},setLeading:function(w){this.current.leading=-w},setFont:function(w,A){var M=this.commonObjs.get(w),j=this.current;if(!M)throw new Error("Can't find font for "+w);if(j.fontMatrix=M.fontMatrix?M.fontMatrix:a.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+w),A<0?(A=-A,j.fontDirection=-1):j.fontDirection=1,this.current.font=M,this.current.fontSize=A,!M.isType3Font){var C=M.loadedName||"sans-serif",x=M.black?"900":M.bold?"bold":"normal",F=M.italic?"italic":"normal",$='"'+C+'", '+M.fallbackName,G=A<t?t:A>o?o:A;this.current.fontSizeScale=A/G;var Z=F+" "+x+" "+G+"px "+$;this.ctx.font=Z}},setTextRenderingMode:function(w){this.current.textRenderingMode=w},setTextRise:function(w){this.current.textRise=w},moveText:function(w,A){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=A},setLeadingMoveText:function(w,A){this.setLeading(-A),this.moveText(w,A)},setTextMatrix:function(w,A,M,j,C,x){this.current.textMatrix=[w,A,M,j,C,x],this.current.textMatrixScale=Math.sqrt(w*w+A*A),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(w,A,M){var j=this.ctx,C=this.current,x=C.font,F=C.textRenderingMode,$=C.fontSize/C.fontSizeScale,G=F&a.TextRenderingMode.FILL_STROKE_MASK,Z=!!(F&a.TextRenderingMode.ADD_TO_PATH_FLAG),J;if((x.disableFontFace||Z)&&(J=x.getPathGenerator(this.commonObjs,w)),x.disableFontFace?(j.save(),j.translate(A,M),j.beginPath(),J(j,$),(G===a.TextRenderingMode.FILL||G===a.TextRenderingMode.FILL_STROKE)&&j.fill(),(G===a.TextRenderingMode.STROKE||G===a.TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((G===a.TextRenderingMode.FILL||G===a.TextRenderingMode.FILL_STROKE)&&j.fillText(w,A,M),(G===a.TextRenderingMode.STROKE||G===a.TextRenderingMode.FILL_STROKE)&&j.strokeText(w,A,M)),Z){var Y=this.pendingTextPaths||(this.pendingTextPaths=[]);Y.push({transform:j.mozCurrentTransform,x:A,y:M,fontSize:$,addToPath:J})}},get isFontSubpixelAAEnabled(){var E=this.canvasFactory.create(10,10).context;E.scale(1.5,1),E.fillText("I",0,10);for(var w=E.getImageData(0,0,10,10).data,A=!1,M=3;M<w.length;M+=4)if(w[M]>0&&w[M]<255){A=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",A)},showText:function(w){var A=this.current,M=A.font;if(M.isType3Font)return this.showType3Text(w);var j=A.fontSize;if(j!==0){var C=this.ctx,x=A.fontSizeScale,F=A.charSpacing,$=A.wordSpacing,G=A.fontDirection,Z=A.textHScale*G,J=w.length,Y=M.vertical,ee=Y?1:-1,ae=M.defaultVMetrics,pe=j*A.fontMatrix[0],se=A.textRenderingMode===a.TextRenderingMode.FILL&&!M.disableFontFace;C.save(),C.transform.apply(C,A.textMatrix),C.translate(A.x,A.y+A.textRise),A.patternFill&&(C.fillStyle=A.fillColor.getPattern(C,this)),G>0?C.scale(Z,-1):C.scale(Z,1);var ue=A.lineWidth,le=A.textMatrixScale;if(le===0||ue===0){var ie=A.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(ie===a.TextRenderingMode.STROKE||ie===a.TextRenderingMode.FILL_STROKE)&&(this.cachedGetSinglePixelWidth=null,ue=this.getSinglePixelWidth()*d)}else ue/=le;x!==1&&(C.scale(x,x),ue/=x),C.lineWidth=ue;var de=0,fe;for(fe=0;fe<J;++fe){var he=w[fe];if((0,a.isNum)(he)){de+=ee*he*j/1e3;continue}var Se=!1,Ce=(he.isSpace?$:0)+F,Ae=he.fontChar,Ee=he.accent,ke,Fe,Pe,Ie,$e=he.width;if(Y){var Ke,Ze,ot;Ke=he.vmetric||ae,Ze=he.vmetric?Ke[1]:$e*.5,Ze=-Ze*pe,ot=Ke[2]*pe,$e=Ke?-Ke[0]:$e,ke=Ze/x,Fe=(de+ot)/x}else ke=de/x,Fe=0;if(M.remeasure&&$e>0){var et=C.measureText(Ae).width*1e3/j*x;if($e<et&&this.isFontSubpixelAAEnabled){var ct=$e/et;Se=!0,C.save(),C.scale(ct,1),ke/=ct}else $e!==et&&(ke+=($e-et)/2e3*j/x)}(he.isInFont||M.missingFile)&&(se&&!Ee?C.fillText(Ae,ke,Fe):(this.paintChar(Ae,ke,Fe),Ee&&(Pe=ke+Ee.offset.x/x,Ie=Fe-Ee.offset.y/x,this.paintChar(Ee.fontChar,Pe,Ie))));var ht=$e*pe+Ce*G;de+=ht,Se&&C.restore()}Y?A.y-=de*Z:A.x+=de*Z,C.restore()}},showType3Text:function(w){var A=this.ctx,M=this.current,j=M.font,C=M.fontSize,x=M.fontDirection,F=j.vertical?1:-1,$=M.charSpacing,G=M.wordSpacing,Z=M.textHScale*x,J=M.fontMatrix||a.FONT_IDENTITY_MATRIX,Y=w.length,ee=M.textRenderingMode===a.TextRenderingMode.INVISIBLE,ae,pe,se,ue;if(!(ee||C===0)){for(this.cachedGetSinglePixelWidth=null,A.save(),A.transform.apply(A,M.textMatrix),A.translate(M.x,M.y),A.scale(Z,x),ae=0;ae<Y;++ae){if(pe=w[ae],(0,a.isNum)(pe)){ue=F*pe*C/1e3,this.ctx.translate(ue,0),M.x+=ue*Z;continue}var le=(pe.isSpace?G:0)+$,ie=j.charProcOperatorList[pe.operatorListId];if(!ie){(0,a.warn)('Type3 character "'+pe.operatorListId+'" is not available.');continue}this.processingType3=pe,this.save(),A.scale(C,C),A.transform.apply(A,J),this.executeOperatorList(ie),this.restore();var de=a.Util.applyTransform([pe.width,0],J);se=de[0]*C+le,A.translate(se,0),M.x+=se*Z}A.restore(),this.processingType3=null}},setCharWidth:function(w,A){},setCharWidthAndBounds:function(w,A,M,j,C,x){this.ctx.rect(M,j,C-M,x-j),this.clip(),this.endPath()},getColorN_Pattern:function(w){var A=this,M;if(w[0]==="TilingPattern"){var j=w[1],C=this.baseTransform||this.ctx.mozCurrentTransform.slice(),x={createCanvasGraphics:function($){return new m($,A.commonObjs,A.objs,A.canvasFactory)}};M=new i.TilingPattern(w,j,this.ctx,x,C)}else M=(0,i.getShadingPatternFromIR)(w);return M},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(w,A,M){var j=a.Util.makeCssRgb(w,A,M);this.ctx.strokeStyle=j,this.current.strokeColor=j},setFillRGBColor:function(w,A,M){var j=a.Util.makeCssRgb(w,A,M);this.ctx.fillStyle=j,this.current.fillColor=j,this.current.patternFill=!1},shadingFill:function(w){var A=this.ctx;this.save();var M=(0,i.getShadingPatternFromIR)(w);A.fillStyle=M.getPattern(A,this,!0);var j=A.mozCurrentTransformInverse;if(j){var C=A.canvas,x=C.width,F=C.height,$=a.Util.applyTransform([0,0],j),G=a.Util.applyTransform([0,F],j),Z=a.Util.applyTransform([x,0],j),J=a.Util.applyTransform([x,F],j),Y=Math.min($[0],G[0],Z[0],J[0]),ee=Math.min($[1],G[1],Z[1],J[1]),ae=Math.max($[0],G[0],Z[0],J[0]),pe=Math.max($[1],G[1],Z[1],J[1]);this.ctx.fillRect(Y,ee,ae-Y,pe-ee)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){throw new Error("Should not call beginInlineImage")},beginImageData:function(){throw new Error("Should not call beginImageData")},paintFormXObjectBegin:function(w,A){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform.apply(this,w),this.baseTransform=this.ctx.mozCurrentTransform,Array.isArray(A)&&A.length===4){var M=A[2]-A[0],j=A[3]-A[1];this.ctx.rect(A[0],A[1],M,j),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(w){this.save();var A=this.ctx;w.isolated||(0,a.info)("TODO: Support non-isolated groups."),w.knockout&&(0,a.warn)("Knockout groups not supported.");var M=A.mozCurrentTransform;if(w.matrix&&A.transform.apply(A,w.matrix),!w.bbox)throw new Error("Bounding box is required.");var j=a.Util.getAxialAlignedBoundingBox(w.bbox,A.mozCurrentTransform),C=[0,0,A.canvas.width,A.canvas.height];j=a.Util.intersect(j,C)||[0,0,0,0];var x=Math.floor(j[0]),F=Math.floor(j[1]),$=Math.max(Math.ceil(j[2])-x,1),G=Math.max(Math.ceil(j[3])-F,1),Z=1,J=1;$>l&&(Z=$/l,$=l),G>l&&(J=G/l,G=l);var Y="groupAt"+this.groupLevel;w.smask&&(Y+="_smask_"+this.smaskCounter++%2);var ee=this.cachedCanvases.getCanvas(Y,$,G,!0),ae=ee.context;ae.scale(1/Z,1/J),ae.translate(-x,-F),ae.transform.apply(ae,M),w.smask?this.smaskStack.push({canvas:ee.canvas,context:ae,offsetX:x,offsetY:F,scaleX:Z,scaleY:J,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(A.setTransform(1,0,0,1,0,0),A.translate(x,F),A.scale(Z,J)),f(A,ae),this.ctx=ae,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(A),this.groupLevel++,this.current.activeSMask=null},endGroup:function(w){this.groupLevel--;var A=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,w.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(A.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(w,A,M){if(this.save(),p(this.ctx),this.current=new D,Array.isArray(w)&&w.length===4){var j=w[2]-w[0],C=w[3]-w[1];this.ctx.rect(w[0],w[1],j,C),this.clip(),this.endPath()}this.transform.apply(this,A),this.transform.apply(this,M)},endAnnotation:function(){this.restore()},paintJpegXObject:function(w,A,M){var j=this.objs.get(w);if(!j){(0,a.warn)("Dependent image isn't ready yet");return}this.save();var C=this.ctx;if(C.scale(1/A,-1/M),C.drawImage(j,0,0,j.width,j.height,0,-M,A,M),this.imageLayer){var x=C.mozCurrentTransformInverse,F=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:w,left:F[0],top:F[1],width:A/x[0],height:M/x[3]})}this.restore()},paintImageMaskXObject:function(w){var A=this.ctx,M=w.width,j=w.height,C=this.current.fillColor,x=this.current.patternFill,F=this.processingType3;if(c&&F&&F.compiled===void 0&&(M<=y&&j<=y?F.compiled=z({data:w.data,width:M,height:j}):F.compiled=null),F&&F.compiled){F.compiled(A);return}var $=this.cachedCanvases.getCanvas("maskCanvas",M,j),G=$.context;G.save(),b(G,w),G.globalCompositeOperation="source-in",G.fillStyle=x?C.getPattern(G,this):C,G.fillRect(0,0,M,j),G.restore(),this.paintInlineImageXObject($.canvas)},paintImageMaskXObjectRepeat:function(w,A,M,j){var C=w.width,x=w.height,F=this.current.fillColor,$=this.current.patternFill,G=this.cachedCanvases.getCanvas("maskCanvas",C,x),Z=G.context;Z.save(),b(Z,w),Z.globalCompositeOperation="source-in",Z.fillStyle=$?F.getPattern(Z,this):F,Z.fillRect(0,0,C,x),Z.restore();for(var J=this.ctx,Y=0,ee=j.length;Y<ee;Y+=2)J.save(),J.transform(A,0,0,M,j[Y],j[Y+1]),J.scale(1,-1),J.drawImage(G.canvas,0,0,C,x,0,-1,1,1),J.restore()},paintImageMaskXObjectGroup:function(w){for(var A=this.ctx,M=this.current.fillColor,j=this.current.patternFill,C=0,x=w.length;C<x;C++){var F=w[C],$=F.width,G=F.height,Z=this.cachedCanvases.getCanvas("maskCanvas",$,G),J=Z.context;J.save(),b(J,F),J.globalCompositeOperation="source-in",J.fillStyle=j?M.getPattern(J,this):M,J.fillRect(0,0,$,G),J.restore(),A.save(),A.transform.apply(A,F.transform),A.scale(1,-1),A.drawImage(Z.canvas,0,0,$,G,0,-1,1,1),A.restore()}},paintImageXObject:function(w){var A=this.objs.get(w);if(!A){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(A)},paintImageXObjectRepeat:function(w,A,M,j){var C=this.objs.get(w);if(!C){(0,a.warn)("Dependent image isn't ready yet");return}for(var x=C.width,F=C.height,$=[],G=0,Z=j.length;G<Z;G+=2)$.push({transform:[A,0,0,M,j[G],j[G+1]],x:0,y:0,w:x,h:F});this.paintInlineImageXObjectGroup(C,$)},paintInlineImageXObject:function(w){var A=w.width,M=w.height,j=this.ctx;this.save(),j.scale(1/A,-1/M);var C=j.mozCurrentTransformInverse,x=C[0],F=C[1],$=Math.max(Math.sqrt(x*x+F*F),1),G=C[2],Z=C[3],J=Math.max(Math.sqrt(G*G+Z*Z),1),Y,ee;if(w instanceof HTMLElement||!w.data)Y=w;else{ee=this.cachedCanvases.getCanvas("inlineImage",A,M);var ae=ee.context;v(ae,w),Y=ee.canvas}for(var pe=A,se=M,ue="prescale1";$>2&&pe>1||J>2&&se>1;){var le=pe,ie=se;$>2&&pe>1&&(le=Math.ceil(pe/2),$/=pe/le),J>2&&se>1&&(ie=Math.ceil(se/2),J/=se/ie),ee=this.cachedCanvases.getCanvas(ue,le,ie),ae=ee.context,ae.clearRect(0,0,le,ie),ae.drawImage(Y,0,0,pe,se,0,0,le,ie),Y=ee.canvas,pe=le,se=ie,ue=ue==="prescale1"?"prescale2":"prescale1"}if(j.drawImage(Y,0,0,pe,se,0,-M,A,M),this.imageLayer){var de=this.getCanvasPosition(0,-M);this.imageLayer.appendImage({imgData:w,left:de[0],top:de[1],width:A/C[0],height:M/C[3]})}this.restore()},paintInlineImageXObjectGroup:function(w,A){var M=this.ctx,j=w.width,C=w.height,x=this.cachedCanvases.getCanvas("inlineImage",j,C),F=x.context;v(F,w);for(var $=0,G=A.length;$<G;$++){var Z=A[$];if(M.save(),M.transform.apply(M,Z.transform),M.scale(1,-1),M.drawImage(x.canvas,Z.x,Z.y,Z.w,Z.h,0,-1,1,1),this.imageLayer){var J=this.getCanvasPosition(Z.x,Z.y);this.imageLayer.appendImage({imgData:w,left:J[0],top:J[1],width:j,height:C})}M.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,a.warn)("Unsupported 'paintXObject' command.")},markPoint:function(w){},markPointProps:function(w,A){},beginMarkedContent:function(w){},beginMarkedContentProps:function(w,A){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var w=this.ctx;this.pendingClip&&(this.pendingClip===P?w.clip("evenodd"):w.clip(),this.pendingClip=null),w.beginPath()},getSinglePixelWidth:function(w){if(this.cachedGetSinglePixelWidth===null){this.ctx.save();var A=this.ctx.mozCurrentTransformInverse;this.ctx.restore(),this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(A[0]*A[0]+A[1]*A[1],A[2]*A[2]+A[3]*A[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function(w,A){var M=this.ctx.mozCurrentTransform;return[M[0]*w+M[2]*A+M[4],M[1]*w+M[3]*A+M[5]]}};for(var O in a.OPS)m.prototype[a.OPS[O]]=m.prototype[O];return m}();e.CanvasGraphics=k},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.getShadingPatternFromIR=void 0;var a=r(0),i=r(70),s={};s.RadialAxial={fromIR:function(c){var y=c[1],u=c[2],S=c[3],V=c[4],U=c[5],z=c[6];return{type:"Pattern",getPattern:function(k){var T;y==="axial"?T=k.createLinearGradient(S[0],S[1],V[0],V[1]):y==="radial"&&(T=k.createRadialGradient(S[0],S[1],U,V[0],V[1],z));for(var R=0,g=u.length;R<g;++R){var m=u[R];T.addColorStop(m[0],m[1])}return T}}}};var t=function(){function c(S,V,U,z,D,k,T,R){var g=V.coords,m=V.colors,v=S.data,b=S.width*4,f;g[U+1]>g[z+1]&&(f=U,U=z,z=f,f=k,k=T,T=f),g[z+1]>g[D+1]&&(f=z,z=D,D=f,f=T,T=R,R=f),g[U+1]>g[z+1]&&(f=U,U=z,z=f,f=k,k=T,T=f);var p=(g[U]+V.offsetX)*V.scaleX,h=(g[U+1]+V.offsetY)*V.scaleY,_=(g[z]+V.offsetX)*V.scaleX,I=(g[z+1]+V.offsetY)*V.scaleY,W=(g[D]+V.offsetX)*V.scaleX,q=(g[D+1]+V.offsetY)*V.scaleY;if(!(h>=q))for(var B=m[k],N=m[k+1],L=m[k+2],P=m[T],O=m[T+1],E=m[T+2],w=m[R],A=m[R+1],M=m[R+2],j=Math.round(h),C=Math.round(q),x,F,$,G,Z,J,Y,ee,ae,pe=j;pe<=C;pe++){pe<I?(ae=pe<h?0:h===I?1:(h-pe)/(h-I),x=p-(p-_)*ae,F=B-(B-P)*ae,$=N-(N-O)*ae,G=L-(L-E)*ae):(ae=pe>q?1:I===q?0:(I-pe)/(I-q),x=_-(_-W)*ae,F=P-(P-w)*ae,$=O-(O-A)*ae,G=E-(E-M)*ae),ae=pe<h?0:pe>q?1:(h-pe)/(h-q),Z=p-(p-W)*ae,J=B-(B-w)*ae,Y=N-(N-A)*ae,ee=L-(L-M)*ae;for(var se=Math.round(Math.min(x,Z)),ue=Math.round(Math.max(x,Z)),le=b*pe+se*4,ie=se;ie<=ue;ie++)ae=(x-ie)/(x-Z),ae=ae<0?0:ae>1?1:ae,v[le++]=F-(F-J)*ae|0,v[le++]=$-($-Y)*ae|0,v[le++]=G-(G-ee)*ae|0,v[le++]=255}}function y(S,V,U){var z=V.coords,D=V.colors,k,T;switch(V.type){case"lattice":var R=V.verticesPerRow,g=Math.floor(z.length/R)-1,m=R-1;for(k=0;k<g;k++)for(var v=k*R,b=0;b<m;b++,v++)c(S,U,z[v],z[v+1],z[v+R],D[v],D[v+1],D[v+R]),c(S,U,z[v+R+1],z[v+1],z[v+R],D[v+R+1],D[v+1],D[v+R]);break;case"triangles":for(k=0,T=z.length;k<T;k+=3)c(S,U,z[k],z[k+1],z[k+2],D[k],D[k+1],D[k+2]);break;default:throw new Error("illegal figure")}}function u(S,V,U,z,D,k,T){var R=1.1,g=3e3,m=2,v=Math.floor(S[0]),b=Math.floor(S[1]),f=Math.ceil(S[2])-v,p=Math.ceil(S[3])-b,h=Math.min(Math.ceil(Math.abs(f*V[0]*R)),g),_=Math.min(Math.ceil(Math.abs(p*V[1]*R)),g),I=f/h,W=p/_,q={coords:U,colors:z,offsetX:-v,offsetY:-b,scaleX:1/I,scaleY:1/W},B=h+m*2,N=_+m*2,L,P,O,E;if(i.WebGLUtils.isEnabled)L=i.WebGLUtils.drawFigures(h,_,k,D,q),P=T.getCanvas("mesh",B,N,!1),P.context.drawImage(L,m,m),L=P.canvas;else{P=T.getCanvas("mesh",B,N,!1);var w=P.context,A=w.createImageData(h,_);if(k){var M=A.data;for(O=0,E=M.length;O<E;O+=4)M[O]=k[0],M[O+1]=k[1],M[O+2]=k[2],M[O+3]=255}for(O=0;O<D.length;O++)y(A,D[O],q);w.putImageData(A,m,m),L=P.canvas}return{canvas:L,offsetX:v-m*I,offsetY:b-m*W,scaleX:I,scaleY:W}}return u}();s.Mesh={fromIR:function(c){var y=c[2],u=c[3],S=c[4],V=c[5],U=c[6],z=c[8];return{type:"Pattern",getPattern:function(k,T,R){var g;if(R)g=a.Util.singularValueDecompose2dScale(k.mozCurrentTransform);else if(g=a.Util.singularValueDecompose2dScale(T.baseTransform),U){var m=a.Util.singularValueDecompose2dScale(U);g=[g[0]*m[0],g[1]*m[1]]}var v=t(V,g,y,u,S,R?null:z,T.cachedCanvases);return R||(k.setTransform.apply(k,T.baseTransform),U&&k.transform.apply(k,U)),k.translate(v.offsetX,v.offsetY),k.scale(v.scaleX,v.scaleY),k.createPattern(v.canvas,"no-repeat")}}}},s.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};function o(d){var c=s[d[0]];if(!c)throw new Error("Unknown IR type: "+d[0]);return c.fromIR(d)}var l=function(){var c={COLORED:1,UNCOLORED:2},y=3e3;function u(S,V,U,z,D){this.operatorList=S[2],this.matrix=S[3]||[1,0,0,1,0,0],this.bbox=S[4],this.xstep=S[5],this.ystep=S[6],this.paintType=S[7],this.tilingType=S[8],this.color=V,this.canvasGraphicsFactory=z,this.baseTransform=D,this.type="Pattern",this.ctx=U}return u.prototype={createPatternCanvas:function(V){var U=this.operatorList,z=this.bbox,D=this.xstep,k=this.ystep,T=this.paintType,R=this.tilingType,g=this.color,m=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+R);var v=z[0],b=z[1],f=z[2],p=z[3],h=[v,b],_=[v+D,b+k],I=_[0]-h[0],W=_[1]-h[1],q=a.Util.singularValueDecompose2dScale(this.matrix),B=a.Util.singularValueDecompose2dScale(this.baseTransform),N=[q[0]*B[0],q[1]*B[1]];I=Math.min(Math.ceil(Math.abs(I*N[0])),y),W=Math.min(Math.ceil(Math.abs(W*N[1])),y);var L=V.cachedCanvases.getCanvas("pattern",I,W,!0),P=L.context,O=m.createCanvasGraphics(P);O.groupLevel=V.groupLevel,this.setFillAndStrokeStyleToContext(O,T,g),this.setScale(I,W,D,k),this.transformToScale(O);var E=[1,0,0,1,-h[0],-h[1]];return O.transform.apply(O,E),this.clipBbox(O,z,v,b,f,p),O.executeOperatorList(U),L.canvas},setScale:function(V,U,z,D){this.scale=[V/z,U/D]},transformToScale:function(V){var U=this.scale,z=[U[0],0,0,U[1],0,0];V.transform.apply(V,z)},scaleToContext:function(){var V=this.scale;this.ctx.scale(1/V[0],1/V[1])},clipBbox:function(V,U,z,D,k,T){if(Array.isArray(U)&&U.length===4){var R=k-z,g=T-D;V.ctx.rect(z,D,R,g),V.clip(),V.endPath()}},setFillAndStrokeStyleToContext:function(V,U,z){var D=V.ctx,k=V.current;switch(U){case c.COLORED:var T=this.ctx;D.fillStyle=T.fillStyle,D.strokeStyle=T.strokeStyle,k.fillColor=T.fillStyle,k.strokeColor=T.strokeStyle;break;case c.UNCOLORED:var R=a.Util.makeCssRgb(z[0],z[1],z[2]);D.fillStyle=R,D.strokeStyle=R,k.fillColor=R,k.strokeColor=R;break;default:throw new a.FormatError("Unsupported paint type: "+U)}},getPattern:function(V,U){var z=this.createPatternCanvas(U);return V=this.ctx,V.setTransform.apply(V,this.baseTransform),V.transform.apply(V,this.matrix),this.scaleToContext(),V.createPattern(z,"repeat")}},u}();e.getShadingPatternFromIR=o,e.TilingPattern=l},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function U(z,D){var k=[],T=!0,R=!1,g=void 0;try{for(var m=z[Symbol.iterator](),v;!(T=(v=m.next()).done)&&(k.push(v.value),!(D&&k.length===D));T=!0);}catch(b){R=!0,g=b}finally{try{!T&&m.return&&m.return()}finally{if(R)throw g}}return k}return function(z,D){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return U(z,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function U(z,D,k){z===null&&(z=Function.prototype);var T=Object.getOwnPropertyDescriptor(z,D);if(T===void 0){var R=Object.getPrototypeOf(z);return R===null?void 0:U(R,D,k)}else{if("value"in T)return T.value;var g=T.get;return g===void 0?void 0:g.call(k)}},s=function(){function U(z,D){for(var k=0;k<D.length;k++){var T=D[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(z,T.key,T)}}return function(z,D,k){return D&&U(z.prototype,D),k&&U(z,k),z}}();function t(U,z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:U}function o(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,z):U.__proto__=z)}function l(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}var d={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function c(U,z){var D=U[z];return D===" "||D===`
`||D==="\r"||D==="	"}function y(U){for(var z=0,D=U.length;z<D;z++)if(!c(U,z))return!1;return!0}var u=function(){function U(){l(this,U)}return s(U,[{key:"_resolveEntities",value:function(D){return D.replace(/&([^;]+);/g,function(k,T){if(T.substring(0,2)==="#x")return String.fromCharCode(parseInt(T.substring(2),16));if(T.substring(0,1)==="#")return String.fromCharCode(parseInt(T.substring(1),10));switch(T){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(T)})}},{key:"_parseContent",value:function(D,k){var T=k,R=void 0,g=[];function m(){for(;T<D.length&&c(D,T);)++T}for(;T<D.length&&!c(D,T)&&D[T]!==">"&&D[T]!=="/";)++T;for(R=D.substring(k,T),m();T<D.length&&D[T]!==">"&&D[T]!=="/"&&D[T]!=="?";){m();for(var v="",b="";T<D.length&&!c(D,T)&&D[T]!=="=";)v+=D[T],++T;if(m(),D[T]!=="=")return null;++T,m();var f=D[T];if(f!=='"'&&f!=="'")return null;var p=D.indexOf(f,++T);if(p<0)return null;b=D.substring(T,p),g.push({name:v,value:this._resolveEntities(b)}),T=p+1,m()}return{name:R,attributes:g,parsed:T-k}}},{key:"_parseProcessingInstruction",value:function(D,k){var T=k,R=void 0,g=void 0;function m(){for(;T<D.length&&c(D,T);)++T}for(;T<D.length&&!c(D,T)&&D[T]!==">"&&D[T]!=="/";)++T;R=D.substring(k,T),m();for(var v=T;T<D.length&&(D[T]!=="?"||D[T+1]!==">");)++T;return g=D.substring(v,T),{name:R,value:g,parsed:T-k}}},{key:"parseXml",value:function(D){for(var k=0;k<D.length;){var T=D[k],R=k;if(T==="<"){++R;var g=D[R],m=void 0;switch(g){case"/":if(++R,m=D.indexOf(">",R),m<0){this.onError(d.UnterminatedElement);return}this.onEndElement(D.substring(R,m)),R=m+1;break;case"?":++R;var v=this._parseProcessingInstruction(D,R);if(D.substring(R+v.parsed,R+v.parsed+2)!=="?>"){this.onError(d.UnterminatedXmlDeclaration);return}this.onPi(v.name,v.value),R+=v.parsed+2;break;case"!":if(D.substring(R+1,R+3)==="--"){if(m=D.indexOf("-->",R+3),m<0){this.onError(d.UnterminatedComment);return}this.onComment(D.substring(R+3,m)),R=m+3}else if(D.substring(R+1,R+8)==="[CDATA["){if(m=D.indexOf("]]>",R+8),m<0){this.onError(d.UnterminatedCdat);return}this.onCdata(D.substring(R+8,m)),R=m+3}else if(D.substring(R+1,R+8)==="DOCTYPE"){var b=D.indexOf("[",R+8),f=!1;if(m=D.indexOf(">",R+8),m<0){this.onError(d.UnterminatedDoctypeDeclaration);return}if(b>0&&m>b){if(m=D.indexOf("]>",R+8),m<0){this.onError(d.UnterminatedDoctypeDeclaration);return}f=!0}var p=D.substring(R+8,m+(f?1:0));this.onDoctype(p),R=m+(f?2:1)}else{this.onError(d.MalformedElement);return}break;default:var h=this._parseContent(D,R);if(h===null){this.onError(d.MalformedElement);return}var _=!1;if(D.substring(R+h.parsed,R+h.parsed+2)==="/>")_=!0;else if(D.substring(R+h.parsed,R+h.parsed+1)!==">"){this.onError(d.UnterminatedElement);return}this.onBeginElement(h.name,h.attributes,_),R+=h.parsed+(_?2:1);break}}else{for(;R<D.length&&D[R]!=="<";)R++;var I=D.substring(k,R);this.onText(this._resolveEntities(I))}k=R}}},{key:"onResolveEntity",value:function(D){return"&"+D+";"}},{key:"onPi",value:function(D,k){}},{key:"onComment",value:function(D){}},{key:"onCdata",value:function(D){}},{key:"onDoctype",value:function(D){}},{key:"onText",value:function(D){}},{key:"onBeginElement",value:function(D,k,T){}},{key:"onEndElement",value:function(D){}},{key:"onError",value:function(D){}}]),U}(),S=function(){function U(z,D){l(this,U),this.nodeName=z,this.nodeValue=D,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return s(U,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes[0]}},{key:"nextSibling",get:function(){var D=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[D+1]}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map(function(D){return D.textContent}).join(""):this.nodeValue||""}}]),U}(),V=function(U){o(z,U);function z(){l(this,z);var D=t(this,(z.__proto__||Object.getPrototypeOf(z)).call(this));return D._currentFragment=null,D._stack=null,D._errorCode=d.NoError,D}return s(z,[{key:"parseFromString",value:function(k){if(this._currentFragment=[],this._stack=[],this._errorCode=d.NoError,this.parseXml(k),this._errorCode===d.NoError){var T=a(this._currentFragment,1),R=T[0];return{documentElement:R}}}},{key:"onResolveEntity",value:function(k){switch(k){case"apos":return"'"}return i(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onResolveEntity",this).call(this,k)}},{key:"onText",value:function(k){if(!y(k)){var T=new S("#text",k);this._currentFragment.push(T)}}},{key:"onCdata",value:function(k){var T=new S("#text",k);this._currentFragment.push(T)}},{key:"onBeginElement",value:function(k,T,R){var g=new S(k);g.childNodes=[],this._currentFragment.push(g),!R&&(this._stack.push(this._currentFragment),this._currentFragment=g.childNodes)}},{key:"onEndElement",value:function(k){this._currentFragment=this._stack.pop();for(var T=this._currentFragment[this._currentFragment.length-1],R=0,g=T.childNodes.length;R<g;R++)T.childNodes[R].parentNode=T}},{key:"onError",value:function(k){this._errorCode=k}}]),z}(u);e.SimpleXMLParser=V},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=r(0),i=function(){function t(d,c){var y=this;(0,a.assert)(c),this._queuedChunks=[];var u=d.initialData;if(u&&u.length>0){var S=new Uint8Array(u).buffer;this._queuedChunks.push(S)}this._pdfDataRangeTransport=c,this._isRangeSupported=!d.disableRange,this._isStreamingSupported=!d.disableStream,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(V,U){y._onReceiveData({begin:V,chunk:U})}),this._pdfDataRangeTransport.addProgressListener(function(V){y._onProgress({loaded:V})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(V){y._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.transportReady()}t.prototype={_onReceiveData:function(c){var y=new Uint8Array(c.chunk).buffer;if(c.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(y):this._queuedChunks.push(y);else{var u=this._rangeReaders.some(function(S){return S._begin!==c.begin?!1:(S._enqueue(y),!0)});(0,a.assert)(u)}},_onProgress:function(c){if(this._rangeReaders.length>0){var y=this._rangeReaders[0];y.onProgress&&y.onProgress({loaded:c.loaded})}},_removeRangeReader:function(c){var y=this._rangeReaders.indexOf(c);y>=0&&this._rangeReaders.splice(y,1)},getFullReader:function(){(0,a.assert)(!this._fullRequestReader);var c=this._queuedChunks;return this._queuedChunks=null,new o(this,c)},getRangeReader:function(c,y){var u=new l(this,c,y);return this._pdfDataRangeTransport.requestDataRange(c,y),this._rangeReaders.push(u),u},cancelAllRequests:function(c){this._fullRequestReader&&this._fullRequestReader.cancel(c);var y=this._rangeReaders.slice(0);y.forEach(function(u){u.cancel(c)}),this._pdfDataRangeTransport.abort()}};function o(d,c){this._stream=d,this._done=!1,this._queuedChunks=c||[],this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}o.prototype={_enqueue:function(c){if(!this._done){if(this._requests.length>0){var y=this._requests.shift();y.resolve({value:c,done:!1});return}this._queuedChunks.push(c)}},get headersReady(){return this._headersReady},get isRangeSupported(){return this._stream._isRangeSupported},get isStreamingSupported(){return this._stream._isStreamingSupported},get contentLength(){return this._stream._contentLength},read:function(){if(this._queuedChunks.length>0){var c=this._queuedChunks.shift();return Promise.resolve({value:c,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var y=(0,a.createPromiseCapability)();return this._requests.push(y),y.promise},cancel:function(c){this._done=!0,this._requests.forEach(function(y){y.resolve({value:void 0,done:!0})}),this._requests=[]}};function l(d,c,y){this._stream=d,this._begin=c,this._end=y,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return l.prototype={_enqueue:function(c){if(!this._done){if(this._requests.length===0)this._queuedChunk=c;else{var y=this._requests.shift();y.resolve({value:c,done:!1}),this._requests.forEach(function(u){u.resolve({value:void 0,done:!0})}),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}},get isStreamingSupported(){return!1},read:function(){if(this._queuedChunk){var c=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:c,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var y=(0,a.createPromiseCapability)();return this._requests.push(y),y.promise},cancel:function(c){this._done=!0,this._requests.forEach(function(y){y.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}},t}();e.PDFDataTransportStream=i},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var a=function(){function g(m,v){for(var b=0;b<v.length;b++){var f=v[b];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(m,f.key,f)}}return function(m,v,b){return v&&g(m.prototype,v),b&&g(m,b),m}}(),i=r(0),s=r(44);function t(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function o(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}function l(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}var d=require("fs"),c=require("http"),y=require("https"),u=require("url"),S=function(){function g(m){l(this,g),this.options=m,this.source=m.source,this.url=u.parse(this.source.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:"||!this.url.host,this.httpHeaders=this.isHttp&&this.source.httpHeaders||{},this._fullRequest=null,this._rangeRequestReaders=[]}return a(g,[{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequest),this._fullRequest=this.isFsUrl?new T(this):new D(this),this._fullRequest}},{key:"getRangeReader",value:function(v,b){var f=this.isFsUrl?new R(this,v,b):new k(this,v,b);return this._rangeRequestReaders.push(f),f}},{key:"cancelAllRequests",value:function(v){this._fullRequest&&this._fullRequest.cancel(v);var b=this._rangeRequestReaders.slice(0);b.forEach(function(f){f.cancel(v)})}}]),g}(),V=function(){function g(m){l(this,g),this._url=m.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null,this._contentLength=m.source.length,this._loaded=0,this._disableRange=m.options.disableRange||!1,this._rangeChunkSize=m.source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!m.source.disableStream,this._isRangeSupported=!m.options.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}return a(g,[{key:"read",value:function(){var v=this;return this._readCapability.promise.then(function(){if(v._done)return Promise.resolve({value:void 0,done:!0});if(v._errored)return Promise.reject(v._reason);var b=v._readableStream.read();if(b===null)return v._readCapability=(0,i.createPromiseCapability)(),v.read();v._loaded+=b.length,v.onProgress&&v.onProgress({loaded:v._loaded,total:v._contentLength});var f=new Uint8Array(b).buffer;return Promise.resolve({value:f,done:!1})})}},{key:"cancel",value:function(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}},{key:"_error",value:function(v){this._errored=!0,this._reason=v,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(v){var b=this;this._readableStream=v,v.on("readable",function(){b._readCapability.resolve()}),v.on("end",function(){v.destroy(),b._done=!0,b._readCapability.resolve()}),v.on("error",function(f){b._error(f)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._errored&&this._readableStream.destroy(this._reason)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),g}(),U=function(){function g(m){l(this,g),this._url=m.url,this._done=!1,this._errored=!1,this._reason=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!m.source.disableStream}return a(g,[{key:"read",value:function(){var v=this;return this._readCapability.promise.then(function(){if(v._done)return Promise.resolve({value:void 0,done:!0});if(v._errored)return Promise.reject(v._reason);var b=v._readableStream.read();if(b===null)return v._readCapability=(0,i.createPromiseCapability)(),v.read();v._loaded+=b.length,v.onProgress&&v.onProgress({loaded:v._loaded});var f=new Uint8Array(b).buffer;return Promise.resolve({value:f,done:!1})})}},{key:"cancel",value:function(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}},{key:"_error",value:function(v){this._errored=!0,this._reason=v,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(v){var b=this;this._readableStream=v,v.on("readable",function(){b._readCapability.resolve()}),v.on("end",function(){v.destroy(),b._done=!0,b._readCapability.resolve()}),v.on("error",function(f){b._error(f)}),this._errored&&this._readableStream.destroy(this._reason)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),g}();function z(g,m){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:m}}var D=function(g){o(m,g);function m(v){l(this,m);var b=t(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v)),f=function(h){b._headersCapability.resolve(),b._setReadableStream(h);var _=(0,s.validateRangeRequestCapabilities)({getResponseHeader:function(B){return b._readableStream.headers[B.toLowerCase()]},isHttp:v.isHttp,rangeChunkSize:b._rangeChunkSize,disableRange:b._disableRange}),I=_.allowRangeRequests,W=_.suggestedLength;I&&(b._isRangeSupported=!0),b._contentLength=W};return b._request=null,b._url.protocol==="http:"?b._request=c.request(z(b._url,v.httpHeaders),f):b._request=y.request(z(b._url,v.httpHeaders),f),b._request.on("error",function(p){b._errored=!0,b._reason=p,b._headersCapability.reject(p)}),b._request.end(),b}return m}(V),k=function(g){o(m,g);function m(v,b,f){l(this,m);var p=t(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v));p._httpHeaders={};for(var h in v.httpHeaders){var _=v.httpHeaders[h];typeof _>"u"||(p._httpHeaders[h]=_)}return p._httpHeaders.Range="bytes="+b+"-"+(f-1),p._request=null,p._url.protocol==="http:"?p._request=c.request(z(p._url,p._httpHeaders),function(I){p._setReadableStream(I)}):p._request=y.request(z(p._url,p._httpHeaders),function(I){p._setReadableStream(I)}),p._request.on("error",function(I){p._errored=!0,p._reason=I}),p._request.end(),p}return m}(U),T=function(g){o(m,g);function m(v){l(this,m);var b=t(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v)),f=decodeURI(b._url.path);return d.lstat(f,function(p,h){if(p){b._errored=!0,b._reason=p,b._headersCapability.reject(p);return}b._contentLength=h.size,b._setReadableStream(d.createReadStream(f)),b._headersCapability.resolve()}),b}return m}(V),R=function(g){o(m,g);function m(v,b,f){l(this,m);var p=t(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,v));return p._setReadableStream(d.createReadStream(decodeURI(p._url.path),{start:b,end:f-1})),p}return m}(U);e.PDFNodeStream=S},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=function(){function y(u,S){for(var V=0;V<S.length;V++){var U=S[V];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(u,U.key,U)}}return function(u,S,V){return S&&y(u.prototype,S),V&&y(u,V),u}}(),i=r(0),s=r(44);function t(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function o(y,u){return{method:"GET",headers:y,mode:"cors",credentials:u?"include":"same-origin",redirect:"follow"}}var l=function(){function y(u){t(this,y),this.options=u,this.source=u.source,this.isHttp=/^https?:/i.test(this.source.url),this.httpHeaders=this.isHttp&&this.source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return a(y,[{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader),this._fullRequestReader=new d(this),this._fullRequestReader}},{key:"getRangeReader",value:function(S,V){var U=new c(this,S,V);return this._rangeRequestReaders.push(U),U}},{key:"cancelAllRequests",value:function(S){this._fullRequestReader&&this._fullRequestReader.cancel(S);var V=this._rangeRequestReaders.slice(0);V.forEach(function(U){U.cancel(S)})}}]),y}(),d=function(){function y(u){var S=this;t(this,y),this._stream=u,this._reader=null,this._loaded=0,this._withCredentials=u.source.withCredentials,this._contentLength=this._stream.source.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=this._stream.options.disableRange,this._rangeChunkSize=this._stream.source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isRangeSupported=!this._stream.options.disableRange,this._isStreamingSupported=!this._stream.source.disableStream,this._headers=new Headers;for(var V in this._stream.httpHeaders){var U=this._stream.httpHeaders[V];typeof U>"u"||this._headers.append(V,U)}var z=this._stream.source.url;fetch(z,o(this._headers,this._withCredentials)).then(function(D){if(!(0,s.validateResponseStatus)(D.status))throw(0,s.createResponseStatusError)(D.status,z);S._reader=D.body.getReader(),S._headersCapability.resolve();var k=(0,s.validateRangeRequestCapabilities)({getResponseHeader:function(m){return D.headers.get(m)},isHttp:S._stream.isHttp,rangeChunkSize:S._rangeChunkSize,disableRange:S._disableRange}),T=k.allowRangeRequests,R=k.suggestedLength;S._contentLength=R,S._isRangeSupported=T,!S._isStreamingSupported&&S._isRangeSupported&&S.cancel(new i.AbortException("streaming is disabled"))}).catch(this._headersCapability.reject),this.onProgress=null}return a(y,[{key:"read",value:function(){var S=this;return this._headersCapability.promise.then(function(){return S._reader.read().then(function(V){var U=V.value,z=V.done;if(z)return Promise.resolve({value:U,done:z});S._loaded+=U.byteLength,S.onProgress&&S.onProgress({loaded:S._loaded,total:S._contentLength});var D=new Uint8Array(U).buffer;return Promise.resolve({value:D,done:!1})})})}},{key:"cancel",value:function(S){this._reader&&this._reader.cancel(S)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),y}(),c=function(){function y(u,S,V){var U=this;t(this,y),this._stream=u,this._reader=null,this._loaded=0,this._withCredentials=u.source.withCredentials,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!u.source.disableStream,this._headers=new Headers;for(var z in this._stream.httpHeaders){var D=this._stream.httpHeaders[z];typeof D>"u"||this._headers.append(z,D)}var k=S+"-"+(V-1);this._headers.append("Range","bytes="+k);var T=this._stream.source.url;fetch(T,o(this._headers,this._withCredentials)).then(function(R){if(!(0,s.validateResponseStatus)(R.status))throw(0,s.createResponseStatusError)(R.status,T);U._readCapability.resolve(),U._reader=R.body.getReader()}),this.onProgress=null}return a(y,[{key:"read",value:function(){var S=this;return this._readCapability.promise.then(function(){return S._reader.read().then(function(V){var U=V.value,z=V.done;if(z)return Promise.resolve({value:U,done:z});S._loaded+=U.byteLength,S.onProgress&&S.onProgress({loaded:S._loaded});var D=new Uint8Array(U).buffer;return Promise.resolve({value:D,done:!1})})})}},{key:"cancel",value:function(S){this._reader&&this._reader.cancel(S)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),y}();e.PDFFetchStream=l},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkManager=e.PDFNetworkStream=void 0;var a=r(0),i=r(44),s=r(20),t=o(s);function o(z){return z&&z.__esModule?z:{default:z}}var l=200,d=206;function c(z,D){this.url=z,D=D||{},this.isHttp=/^https?:/i.test(z),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this.withCredentials=D.withCredentials||!1,this.getXhr=D.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null),this.loadedRequests=Object.create(null)}function y(z){var D=z.response;if(typeof D!="string")return D;var k=(0,a.stringToBytes)(D);return k.buffer}var u=function(){try{var D=new XMLHttpRequest;return D.open("GET",t.default.location.href),D.responseType="moz-chunked-arraybuffer",D.responseType==="moz-chunked-arraybuffer"}catch{return!1}}();c.prototype={requestRange:function(D,k,T){var R={begin:D,end:k};for(var g in T)R[g]=T[g];return this.request(R)},requestFull:function(D){return this.request(D)},request:function(D){var k=this.getXhr(),T=this.currXhrId++,R=this.pendingRequests[T]={xhr:k};k.open("GET",this.url),k.withCredentials=this.withCredentials;for(var g in this.httpHeaders){var m=this.httpHeaders[g];typeof m>"u"||k.setRequestHeader(g,m)}if(this.isHttp&&"begin"in D&&"end"in D){var v=D.begin+"-"+(D.end-1);k.setRequestHeader("Range","bytes="+v),R.expectedStatus=206}else R.expectedStatus=200;var b=u&&!!D.onProgressiveData;return b?(k.responseType="moz-chunked-arraybuffer",R.onProgressiveData=D.onProgressiveData,R.mozChunked=!0):k.responseType="arraybuffer",D.onError&&(k.onerror=function(f){D.onError(k.status)}),k.onreadystatechange=this.onStateChange.bind(this,T),k.onprogress=this.onProgress.bind(this,T),R.onHeadersReceived=D.onHeadersReceived,R.onDone=D.onDone,R.onError=D.onError,R.onProgress=D.onProgress,k.send(null),T},onProgress:function(D,k){var T=this.pendingRequests[D];if(T){if(T.mozChunked){var R=y(T.xhr);T.onProgressiveData(R)}var g=T.onProgress;g&&g(k)}},onStateChange:function(D,k){var T=this.pendingRequests[D];if(T){var R=T.xhr;if(R.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),R.readyState===4&&D in this.pendingRequests){if(delete this.pendingRequests[D],R.status===0&&this.isHttp){T.onError&&T.onError(R.status);return}var g=R.status||l,m=g===l&&T.expectedStatus===d;if(!m&&g!==T.expectedStatus){T.onError&&T.onError(R.status);return}this.loadedRequests[D]=!0;var v=y(R);if(g===d){var b=R.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(b),p=parseInt(f[1],10);T.onDone({begin:p,chunk:v})}else T.onProgressiveData?T.onDone(null):v?T.onDone({begin:0,chunk:v}):T.onError&&T.onError(R.status)}}},hasPendingRequests:function(){for(var D in this.pendingRequests)return!0;return!1},getRequestXhr:function(D){return this.pendingRequests[D].xhr},isStreamingRequest:function(D){return!!this.pendingRequests[D].onProgressiveData},isPendingRequest:function(D){return D in this.pendingRequests},isLoadedRequest:function(D){return D in this.loadedRequests},abortAllRequests:function(){for(var D in this.pendingRequests)this.abortRequest(D|0)},abortRequest:function(D){var k=this.pendingRequests[D].xhr;delete this.pendingRequests[D],k.abort()}};function S(z){this._options=z;var D=z.source;this._manager=new c(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}S.prototype={_onRangeRequestReaderClosed:function(D){var k=this._rangeRequestReaders.indexOf(D);k>=0&&this._rangeRequestReaders.splice(k,1)},getFullReader:function(){return(0,a.assert)(!this._fullRequestReader),this._fullRequestReader=new V(this._manager,this._options),this._fullRequestReader},getRangeReader:function(D,k){var T=new U(this._manager,D,k);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T},cancelAllRequests:function(D){this._fullRequestReader&&this._fullRequestReader.cancel(D);var k=this._rangeRequestReaders.slice(0);k.forEach(function(T){T.cancel(D)})}};function V(z,D){this._manager=z;var k=D.source,T={onHeadersReceived:this._onHeadersReceived.bind(this),onProgressiveData:k.disableStream?null:this._onProgressiveData.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._fullRequestId=z.requestFull(T),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=D.disableRange||!1,this._contentLength=k.length,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this.onProgress=null}V.prototype={_onHeadersReceived:function(){var D=this._fullRequestId,k=this._manager.getRequestXhr(D),T=(0,i.validateRangeRequestCapabilities)({getResponseHeader:function(b){return k.getResponseHeader(b)},isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),R=T.allowRangeRequests,g=T.suggestedLength;this._contentLength=g||this._contentLength,R&&(this._isRangeSupported=!0);var m=this._manager;m.isStreamingRequest(D)?this._isStreamingSupported=!0:this._isRangeSupported&&m.abortRequest(D),this._headersReceivedCapability.resolve()},_onProgressiveData:function(D){if(this._requests.length>0){var k=this._requests.shift();k.resolve({value:D,done:!1})}else this._cachedChunks.push(D)},_onDone:function(D){D&&this._onProgressiveData(D.chunk),this._done=!0,!(this._cachedChunks.length>0)&&(this._requests.forEach(function(k){k.resolve({value:void 0,done:!0})}),this._requests=[])},_onError:function(D){var k=this._url,T=(0,i.createResponseStatusError)(D,k);this._storedError=T,this._headersReceivedCapability.reject(T),this._requests.forEach(function(R){R.reject(T)}),this._requests=[],this._cachedChunks=[]},_onProgress:function(D){this.onProgress&&this.onProgress({loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})},get isRangeSupported(){return this._isRangeSupported},get isStreamingSupported(){return this._isStreamingSupported},get contentLength(){return this._contentLength},get headersReady(){return this._headersReceivedCapability.promise},read:function(){if(this._storedError)return Promise.reject(this._storedError);if(this._cachedChunks.length>0){var D=this._cachedChunks.shift();return Promise.resolve({value:D,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var k=(0,a.createPromiseCapability)();return this._requests.push(k),k.promise},cancel:function(D){this._done=!0,this._headersReceivedCapability.reject(D),this._requests.forEach(function(k){k.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}};function U(z,D,k){this._manager=z;var T={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=z.requestRange(D,k,T),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}U.prototype={_close:function(){this.onClosed&&this.onClosed(this)},_onDone:function(D){var k=D.chunk;if(this._requests.length>0){var T=this._requests.shift();T.resolve({value:k,done:!1})}else this._queuedChunk=k;this._done=!0,this._requests.forEach(function(R){R.resolve({value:void 0,done:!0})}),this._requests=[],this._close()},_onProgress:function(D){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:D.loaded})},get isStreamingSupported(){return!1},read:function(){if(this._queuedChunk!==null){var D=this._queuedChunk;return this._queuedChunk=null,Promise.resolve({value:D,done:!1})}if(this._done)return Promise.resolve({value:void 0,done:!0});var k=(0,a.createPromiseCapability)();return this._requests.push(k),k.promise},cancel:function(D){this._done=!0,this._requests.forEach(function(k){k.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},e.PDFNetworkStream=S,e.NetworkManager=c}])})});var qX=te(R5=>{"use strict";Object.defineProperty(R5,"__esModule",{value:!0});R5.PDFLoader=void 0;var LX=F5(),lSe=DX(),SI=class extends lSe.BufferLoader{constructor(e,{splitPages:r=!0,pdfjs:a=cSe,parsedItemSeparator:i=""}={}){super(e),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.splitPages=r,this.pdfjs=a,this.parsedItemSeparator=i}async parse(e,r){let{getDocument:a,version:i}=await this.pdfjs(),s=await a({data:new Uint8Array(e.buffer),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,t=await s.getMetadata().catch(()=>null),o=[];for(let l=1;l<=s.numPages;l+=1){let c=await(await s.getPage(l)).getTextContent();if(c.items.length===0)continue;let y,u=[];for(let V of c.items)"str"in V&&(y===V.transform[5]||!y?u.push(V.str):u.push(`
${V.str}`),y=V.transform[5]);let S=u.join(this.parsedItemSeparator);o.push(new LX.Document({pageContent:S,metadata:{...r,pdf:{version:i,info:t?.info,metadata:t?.metadata,totalPages:s.numPages},loc:{pageNumber:l}}}))}return this.splitPages?o:o.length===0?[]:[new LX.Document({pageContent:o.map(l=>l.pageContent).join(`

`),metadata:{...r,pdf:{version:i,info:t?.info,metadata:t?.metadata,totalPages:s.numPages}}})]}};R5.PDFLoader=SI;async function cSe(){try{let{default:n}=await Promise.resolve().then(()=>gn(BX())),{getDocument:e,version:r}=n;return{getDocument:e,version:r}}catch(n){throw console.error(n),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}});var $X=te((xVe,UX)=>{UX.exports=qX()});var zX=te((wVe,VX)=>{VX.exports=Zy()});var GX=te(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.LatexTextSplitter=Yn.MarkdownTextSplitter=Yn.TokenTextSplitter=Yn.RecursiveCharacterTextSplitter=Yn.SupportedTextSplitterLanguages=Yn.CharacterTextSplitter=Yn.TextSplitter=void 0;var WX=F5(),dSe=zX(),_m=class extends WX.BaseDocumentTransformer{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.keepSeparator=e?.keepSeparator??this.keepSeparator,this.lengthFunction=e?.lengthFunction??(r=>r.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,r={}){return this.splitDocuments(e,r)}splitOnSeparator(e,r){let a;if(r)if(this.keepSeparator){let i=r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");a=e.split(new RegExp(`(?=${i})`))}else a=e.split(r);else a=e.split("");return a.filter(i=>i!=="")}async createDocuments(e,r=[],a={}){let i=r.length>0?r:[...Array(e.length)].map(()=>({})),{chunkHeader:s="",chunkOverlapHeader:t="(cont'd) ",appendChunkOverlapHeader:o=!1}=a,l=new Array;for(let d=0;d<e.length;d+=1){let c=e[d],y=1,u=null,S=-1;for(let V of await this.splitText(c)){let U=s,z=c.indexOf(V,S+1);if(u===null){let R=this.numberOfNewLines(c,0,z);y+=R}else{let R=S+await this.lengthFunction(u);if(R<z){let g=this.numberOfNewLines(c,R,z);y+=g}else if(R>z){let g=this.numberOfNewLines(c,z,R);y-=g}o&&(U+=t)}let D=this.numberOfNewLines(V),k=i[d].loc&&typeof i[d].loc=="object"?{...i[d].loc}:{};k.lines={from:y,to:y+D};let T={...i[d],loc:k};U+=V,l.push(new WX.Document({pageContent:U,metadata:T})),y+=D,u=V,S=z}}return l}numberOfNewLines(e,r,a){return(e.slice(r,a).match(/\n/g)||[]).length}async splitDocuments(e,r={}){let a=e.filter(t=>t.pageContent!==void 0),i=a.map(t=>t.pageContent),s=a.map(t=>t.metadata);return this.createDocuments(i,s,r)}joinDocs(e,r){let a=e.join(r).trim();return a===""?null:a}async mergeSplits(e,r){let a=[],i=[],s=0;for(let o of e){let l=await this.lengthFunction(o);if(s+l+i.length*r.length>this.chunkSize&&(s>this.chunkSize&&console.warn(`Created a chunk of size ${s}, +
which is longer than the specified ${this.chunkSize}`),i.length>0)){let d=this.joinDocs(i,r);for(d!==null&&a.push(d);s>this.chunkOverlap||s+l+i.length*r.length>this.chunkSize&&s>0;)s-=await this.lengthFunction(i[0]),i.shift()}i.push(o),s+=l}let t=this.joinDocs(i,r);return t!==null&&a.push(t),a}};Yn.TextSplitter=_m;var CI=class extends _m{static lc_name(){return"CharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),this.separator=e?.separator??this.separator}async splitText(e){let r=this.splitOnSeparator(e,this.separator);return this.mergeSplits(r,this.keepSeparator?"":this.separator)}};Yn.CharacterTextSplitter=CI;Yn.SupportedTextSplitterLanguages=["cpp","go","java","js","php","proto","python","rst","ruby","rust","scala","swift","markdown","latex","html","sol"];var wf=class n extends _m{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=e?.separators??this.separators,this.keepSeparator=e?.keepSeparator??!0}async _splitText(e,r){let a=[],i=r[r.length-1],s;for(let d=0;d<r.length;d+=1){let c=r[d];if(c===""){i=c;break}if(e.includes(c)){i=c,s=r.slice(d+1);break}}let t=this.splitOnSeparator(e,i),o=[],l=this.keepSeparator?"":i;for(let d of t)if(await this.lengthFunction(d)<this.chunkSize)o.push(d);else{if(o.length){let c=await this.mergeSplits(o,l);a.push(...c),o=[]}if(!s)a.push(d);else{let c=await this._splitText(d,s);a.push(...c)}}if(o.length){let d=await this.mergeSplits(o,l);a.push(...d)}return a}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,r){return new n({...r,separators:n.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}};Yn.RecursiveCharacterTextSplitter=wf;var AI=class extends _m{static lc_name(){return"TokenTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"encodingName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disallowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.encodingName=e?.encodingName??"gpt2",this.allowedSpecial=e?.allowedSpecial??[],this.disallowedSpecial=e?.disallowedSpecial??"all"}async splitText(e){this.tokenizer||(this.tokenizer=await(0,dSe.getEncoding)(this.encodingName));let r=[],a=this.tokenizer.encode(e,this.allowedSpecial,this.disallowedSpecial),i=0;for(;i<a.length;){i>0&&(i-=this.chunkOverlap);let s=Math.min(i+this.chunkSize,a.length),t=a.slice(i,s);r.push(this.tokenizer.decode(t)),i=s}return r}};Yn.TokenTextSplitter=AI;var EI=class extends wf{constructor(e){super({...e,separators:wf.getSeparatorsForLanguage("markdown")})}};Yn.MarkdownTextSplitter=EI;var PI=class extends wf{constructor(e){super({...e,separators:wf.getSeparatorsForLanguage("latex")})}};Yn.LatexTextSplitter=PI});var HX=te(Sf=>{"use strict";var pSe=Sf&&Sf.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),fSe=Sf&&Sf.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pSe(e,n,r)};Object.defineProperty(Sf,"__esModule",{value:!0});fSe(GX(),Sf)});var ZX=te((AVe,KX)=>{KX.exports=HX()});var XX=te((EVe,JX)=>{JX.exports=v3()});var YX=te(I5=>{"use strict";Object.defineProperty(I5,"__esModule",{value:!0});I5.cosine=void 0;function hSe(n,e){let r=0,a=0,i=0;for(let s=0;s<n.length;s++)r+=n[s]*e[s],a+=n[s]*n[s],i+=e[s]*e[s];return r/(Math.sqrt(a)*Math.sqrt(i))}I5.cosine=hSe});var eY=te((TVe,QX)=>{QX.exports=ME()});var tY=te(Cf=>{"use strict";var mSe=Cf&&Cf.__createBinding||(Object.create?function(n,e,r,a){a===void 0&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,a,i)}:function(n,e,r,a){a===void 0&&(a=r),n[a]=e[r]}),gSe=Cf&&Cf.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mSe(e,n,r)};Object.defineProperty(Cf,"__esModule",{value:!0});gSe(eY(),Cf)});var rY=te(N5=>{"use strict";Object.defineProperty(N5,"__esModule",{value:!0});N5.MemoryVectorStore=void 0;var bSe=XX(),D5=F5(),vSe=YX(),ySe=tY(),TI=class n extends bSe.VectorStore{_vectorstoreType(){return"memory"}constructor(e,{similarity:r,...a}={}){super(e,a),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=r??vSe.cosine}async addDocuments(e){let r=e.map(({pageContent:a})=>a);return this.addVectors(await this.embeddings.embedDocuments(r),e)}async addVectors(e,r){let a=e.map((i,s)=>({content:r[s].pageContent,embedding:i,metadata:r[s].metadata,id:r[s].id}));this.memoryVectors=this.memoryVectors.concat(a)}async _queryVectors(e,r,a){let i=t=>{if(!a)return!0;let o=new D5.Document({metadata:t.metadata,pageContent:t.content,id:t.id});return a(o)};return this.memoryVectors.filter(i).map((t,o)=>({similarity:this.similarity(e,t.embedding),index:o,metadata:t.metadata,content:t.content,embedding:t.embedding,id:t.id})).sort((t,o)=>t.similarity>o.similarity?-1:0).slice(0,r)}async similaritySearchVectorWithScore(e,r,a){return(await this._queryVectors(e,r,a)).map(t=>[new D5.Document({metadata:t.metadata,pageContent:t.content,id:t.id}),t.similarity])}async maxMarginalRelevanceSearch(e,r){let a=await this.embeddings.embedQuery(e),i=await this._queryVectors(a,r.fetchK??20,r.filter),s=i.map(o=>o.embedding);return(0,ySe.maximalMarginalRelevance)(a,s,r.lambda,r.k).map(o=>new D5.Document({metadata:i[o].metadata,pageContent:i[o].content,id:i[o].id}))}static async fromTexts(e,r,a,i){let s=[];for(let t=0;t<e.length;t+=1){let o=Array.isArray(r)?r[t]:r,l=new D5.Document({pageContent:e[t],metadata:o});s.push(l)}return n.fromDocuments(s,a,i)}static async fromDocuments(e,r,a){let i=new this(r,a);return await i.addDocuments(e),i}static async fromExistingIndex(e,r){return new this(e,r)}};N5.MemoryVectorStore=TI});var nY=te((kVe,aY)=>{aY.exports=rY()});var sY=te((RVe,iY)=>{var{OllamaEmbeddings:_Se}=XT(),xSe=new _Se({model:"mxbai-embed-large",baseUrl:"http://localhost:11434"});iY.exports={embeddings:xSe}});var M5=te((IVe,oY)=>{var{MemoryVectorStore:wSe}=nY(),{embeddings:SSe}=sY(),Ub=new wSe(SSe),CSe=Ub.asRetriever({k:2});async function ASe(n){await Ub.addDocuments(n),console.log("Documents added to DB")}async function ESe(n){return await CSe.invoke(n)}function PSe(){Ub&&Array.isArray(Ub.memoryVectors)?(Ub.memoryVectors.length=0,console.log("\u2705 MemoryVectorStore cleared.")):console.warn("\u26A0\uFE0F No valid MemoryVectorStore found.")}oY.exports={addDocuments:ASe,retrieveDocuments:ESe,flushDB:PSe}});var lY=te((NVe,uY)=>{var OI=require("vscode"),{DirectoryLoader:TSe}=FX(),{PDFLoader:OSe}=$X(),{RecursiveCharacterTextSplitter:FSe}=ZX(),DVe=require("path"),{addDocuments:kSe}=M5();async function RSe(n){let e=OI.workspace.workspaceFolders?.[0]?.uri.fsPath||".",a=await new TSe(e,{".pdf":t=>new OSe(t)}).load();if(!a.length){OI.window.showWarningMessage("No PDF documents found.");return}let s=await new FSe({chunkSize:200,chunkOverlap:40}).splitDocuments(a);await kSe(s),OI.window.showInformationMessage("Project Completely Indexed")}uY.exports={indexProjectCommand:RSe}});var dY=te((jVe,cY)=>{var ISe=require("vscode"),MVe=require("path"),{retrieveDocuments:DSe}=M5();async function NSe(n="crea_area_assistenza"){let e=await DSe(n);console.log("@@@ DEBUG");for(let r of e)ISe.window.showInformationMessage(`* ${r.pageContent}


`),console.log(`* ${r.pageContent}


`);return e}cY.exports={retrieve:NSe}});var pY=require("vscode"),{explainCodeCommand:MSe}=wX(),{runTomQuiz:jSe,flushUserMind:BSe,showUserMentalState:LSe}=fI(),{configureTars:qSe,showConfig:USe,flushConfiguration:$Se}=hI(),{helpCommand:VSe}=CX(),{toggleDecorations:zSe}=mI(),{indexProjectCommand:WSe}=lY(),{retrieve:GSe}=dY(),{flushDB:HSe}=M5();function KSe(n){[{name:"tars.explain-code",callback:async()=>{await MSe(n),pY.window.showInformationMessage("Task Completed!")}},{name:"tars.flush",callback:()=>BSe(n)},{name:"tars.tom",callback:()=>jSe(n)},{name:"tars.logUserMind",callback:()=>LSe(n)},{name:"tars.configure-tars",callback:()=>qSe(n)},{name:"tars.flush-tars-config",callback:()=>$Se(n)},{name:"tars.show-tars-config",callback:()=>USe(n)},{name:"tars.help-command",callback:()=>VSe(n)},{name:"tars.toggle-decorations",callback:()=>zSe(n)},{name:"tars.index-project",callback:()=>WSe(n)},{name:"tars.retrieve",callback:()=>GSe("crea_area_assistenza")},{name:"tars.flushDB",callback:()=>HSe()}].forEach(({name:r,callback:a})=>{let i=pY.commands.registerCommand(r,a);n.subscriptions.push(i)})}function ZSe(){}module.exports={activate:KSe,deactivate:ZSe};
/*! Bundled license information:

@langchain/core/dist/utils/js-sha1/hash.cjs:
  (*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)

@langchain/core/dist/utils/fast-json-patch/src/helpers.cjs:
@langchain/core/dist/utils/fast-json-patch/src/helpers.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

@langchain/core/dist/utils/fast-json-patch/src/duplex.cjs:
@langchain/core/dist/utils/fast-json-patch/src/duplex.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2013-2021 Joachim Wester
   * MIT license
   *)

@langchain/core/dist/utils/sax-js/sax.cjs:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

mustache/mustache.mjs:
mustache/mustache.js:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)

web-streams-polyfill/dist/ponyfill.js:
  (**
   * @license
   * web-streams-polyfill v4.0.0-beta.3
   * Copyright 2021 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

formdata-node/lib/cjs/blobHelpers.js:
formdata-node/lib/cjs/Blob.js:
  (*! Based on fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> & David Frank *)

humanize-ms/index.js:
  (*!
   * humanize-ms - index.js
   * Copyright(c) 2014 dead_horse <dead_horse@qq.com>
   * MIT Licensed
   *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
*/
